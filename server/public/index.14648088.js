var e,t,r,n,i="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:"undefined"!=typeof window?window:"undefined"!=typeof global?global:{};function o(e,t,r,n){Object.defineProperty(e,t,{get:r,set:n,enumerable:!0,configurable:!0})}var u={},l={},c=i.parcelRequire9391;null==c&&((c=function(e){if(e in u)return u[e].exports;if(e in l){var t=l[e];delete l[e];var r={id:e,exports:{}};return u[e]=r,t.call(r.exports,r,r.exports),r.exports}var n=Error("Cannot find module '"+e+"'");throw n.code="MODULE_NOT_FOUND",n}).register=function(e,t){l[e]=t},i.parcelRequire9391=c),c.register("kW8Wl",function(e,t){o(e.exports,"videoPlayer",()=>g);var r,n,u,l,f=c("awmEs").Buffer,d={149:(e,t,r)=>{var n=r(634);e.exports=function(e,t){return void 0===t&&(t=!1),function(r,i,o){if(r)e(r);else if(i.statusCode>=400&&i.statusCode<=599){var u,l=o;if(t){if(n.TextDecoder){var c=(void 0===(u=i.headers&&i.headers["content-type"])&&(u=""),u.toLowerCase().split(";").reduce(function(e,t){var r=t.split("="),n=r[0],i=r[1];return"charset"===n.trim()?i.trim():e},"utf-8"));try{l=new TextDecoder(c).decode(o)}catch(e){}}else l=String.fromCharCode.apply(null,new Uint8Array(o))}e({cause:l})}else e(null,o)}}},899:(e,t,r)=>{var n=r(634),i=r(119),o=r(378);function u(e,t,r){var n=e;return o(t)?(r=t,"string"==typeof e&&(n={uri:e})):n=i({},t,{uri:e}),n.callback=r,n}function l(e,t,r){return c(t=u(e,t,r))}function c(e){if(void 0===e.callback)throw Error("callback argument missing");var t=!1,r=function(r,n,i){t||(t=!0,e.callback(r,n,i))};function n(e){return clearTimeout(f),e instanceof Error||(e=Error(""+(e||"Unknown XMLHttpRequest Error"))),e.statusCode=0,r(e,v)}function i(){if(!u){clearTimeout(f);var t,n,i,o=v,l=null;return 0!==(i=e.useXDR&&void 0===c.status?200:1223===c.status?204:c.status)?(o={body:function(){var e=void 0;if(e=c.response?c.response:c.responseText||function(e){try{if("document"===e.responseType)return e.responseXML;var t=e.responseXML&&"parsererror"===e.responseXML.documentElement.nodeName;if(""===e.responseType&&!t)return e.responseXML}catch(e){}return null}(c),y)try{e=JSON.parse(e)}catch(e){}return e}(),statusCode:i,method:h,headers:{},url:d,rawRequest:c},c.getAllResponseHeaders&&(o.headers=(t=c.getAllResponseHeaders(),n={},t&&t.trim().split("\n").forEach(function(e){var t=e.indexOf(":"),r=e.slice(0,t).trim().toLowerCase(),i=e.slice(t+1).trim();void 0===n[r]?n[r]=i:Array.isArray(n[r])?n[r].push(i):n[r]=[n[r],i]}),n))):l=Error("Internal XMLHttpRequest Error"),r(l,o,o.body)}}var o,u,c=e.xhr||null;c||(c=e.cors||e.useXDR?new l.XDomainRequest:new l.XMLHttpRequest);var f,d=c.url=e.uri||e.url,h=c.method=e.method||"GET",p=e.body||e.data,m=c.headers=e.headers||{},g=!!e.sync,y=!1,v={body:void 0,headers:{},statusCode:0,method:h,url:d,rawRequest:c};if("json"in e&&!1!==e.json&&(y=!0,m.accept||m.Accept||(m.Accept="application/json"),"GET"!==h&&"HEAD"!==h&&(m["content-type"]||m["Content-Type"]||(m["Content-Type"]="application/json"),p=JSON.stringify(!0===e.json?p:e.json))),c.onreadystatechange=function(){4===c.readyState&&setTimeout(i,0)},c.onload=i,c.onerror=n,c.onprogress=function(){},c.onabort=function(){u=!0},c.ontimeout=n,c.open(h,d,!g,e.username,e.password),g||(c.withCredentials=!!e.withCredentials),!g&&e.timeout>0&&(f=setTimeout(function(){if(!u){u=!0,c.abort("timeout");var e=Error("XMLHttpRequest timeout");e.code="ETIMEDOUT",n(e)}},e.timeout)),c.setRequestHeader)for(o in m)m.hasOwnProperty(o)&&c.setRequestHeader(o,m[o]);else if(e.headers&&!function(e){for(var t in e)if(e.hasOwnProperty(t))return!1;return!0}(e.headers))throw Error("Headers cannot be set on an XDomainRequest object");return"responseType"in e&&(c.responseType=e.responseType),"beforeSend"in e&&"function"==typeof e.beforeSend&&e.beforeSend(c),c.send(p||null),c}l.httpHandler=r(149),e.exports=l,e.exports.default=l,l.XMLHttpRequest=n.XMLHttpRequest||function(){},l.XDomainRequest="withCredentials"in new l.XMLHttpRequest?l.XMLHttpRequest:n.XDomainRequest,function(e,t){for(var r=0;r<e.length;r++)t(e[r])}(["get","put","post","patch","head","delete"],function(e){l["delete"===e?"del":e]=function(t,r,n){return(r=u(t,r,n)).method=e.toUpperCase(),c(r)}})},42:(e,t)=>{function r(e,t){return void 0===t&&(t=Object),t&&"function"==typeof t.freeze?t.freeze(e):e}var n=r({HTML:"text/html",isHTML:function(e){return e===n.HTML},XML_APPLICATION:"application/xml",XML_TEXT:"text/xml",XML_XHTML_APPLICATION:"application/xhtml+xml",XML_SVG_IMAGE:"image/svg+xml"}),i=r({HTML:"http://www.w3.org/1999/xhtml",isHTML:function(e){return e===i.HTML},SVG:"http://www.w3.org/2000/svg",XML:"http://www.w3.org/XML/1998/namespace",XMLNS:"http://www.w3.org/2000/xmlns/"});t.assign=function(e,t){if(null===e||"object"!=typeof e)throw TypeError("target is not an object");for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e},t.find=function(e,t,r){if(void 0===r&&(r=Array.prototype),e&&"function"==typeof r.find)return r.find.call(e,t);for(var n=0;n<e.length;n++)if(Object.prototype.hasOwnProperty.call(e,n)){var i=e[n];if(t.call(void 0,i,n,e))return i}},t.freeze=r,t.MIME_TYPE=n,t.NAMESPACE=i},289:(e,t,r)=>{var n=r(42),i=r(990),o=r(128),u=r(394),l=i.DOMImplementation,c=n.NAMESPACE,f=u.ParseError,d=u.XMLReader;function h(e){return e.replace(/\r[\n\u0085]/g,"\n").replace(/[\r\u0085\u2028]/g,"\n")}function p(e){this.options=e||{locator:{}}}function m(){this.cdata=!1}function g(e,t){t.lineNumber=e.lineNumber,t.columnNumber=e.columnNumber}function y(e){if(e)return"\n@"+(e.systemId||"")+"#[line:"+e.lineNumber+",col:"+e.columnNumber+"]"}function v(e,t,r){return"string"==typeof e?e.substr(t,r):e.length>=t+r||t?new java.lang.String(e,t,r)+"":e}function b(e,t){e.currentElement?e.currentElement.appendChild(t):e.doc.appendChild(t)}p.prototype.parseFromString=function(e,t){var r=this.options,n=new d,i=r.domBuilder||new m,u=r.errorHandler,l=r.locator,f=r.xmlns||{},p=/\/x?html?$/.test(t),g=p?o.HTML_ENTITIES:o.XML_ENTITIES;l&&i.setDocumentLocator(l),n.errorHandler=function(e,t,r){if(!e){if(t instanceof m)return t;e=t}var n={},i=e instanceof Function;function o(t){var o=e[t];!o&&i&&(o=2==e.length?function(r){e(t,r)}:e),n[t]=o&&function(e){o("[xmldom "+t+"]	"+e+y(r))}||function(){}}return r=r||{},o("warning"),o("error"),o("fatalError"),n}(u,i,l),n.domBuilder=r.domBuilder||i,p&&(f[""]=c.HTML),f.xml=f.xml||c.XML;var v=r.normalizeLineEndings||h;return e&&"string"==typeof e?n.parse(v(e),f,g):n.errorHandler.error("invalid doc source"),i.doc},m.prototype={startDocument:function(){this.doc=(new l).createDocument(null,null,null),this.locator&&(this.doc.documentURI=this.locator.systemId)},startElement:function(e,t,r,n){var i=this.doc,o=i.createElementNS(e,r||t),u=n.length;b(this,o),this.currentElement=o,this.locator&&g(this.locator,o);for(var l=0;l<u;l++){e=n.getURI(l);var c=n.getValue(l),f=(r=n.getQName(l),i.createAttributeNS(e,r));this.locator&&g(n.getLocator(l),f),f.value=f.nodeValue=c,o.setAttributeNode(f)}},endElement:function(e,t,r){var n=this.currentElement;n.tagName,this.currentElement=n.parentNode},startPrefixMapping:function(e,t){},endPrefixMapping:function(e){},processingInstruction:function(e,t){var r=this.doc.createProcessingInstruction(e,t);this.locator&&g(this.locator,r),b(this,r)},ignorableWhitespace:function(e,t,r){},characters:function(e,t,r){if(e=v.apply(this,arguments)){if(this.cdata)var n=this.doc.createCDATASection(e);else n=this.doc.createTextNode(e);this.currentElement?this.currentElement.appendChild(n):/^\s*$/.test(e)&&this.doc.appendChild(n),this.locator&&g(this.locator,n)}},skippedEntity:function(e){},endDocument:function(){this.doc.normalize()},setDocumentLocator:function(e){(this.locator=e)&&(e.lineNumber=0)},comment:function(e,t,r){e=v.apply(this,arguments);var n=this.doc.createComment(e);this.locator&&g(this.locator,n),b(this,n)},startCDATA:function(){this.cdata=!0},endCDATA:function(){this.cdata=!1},startDTD:function(e,t,r){var n=this.doc.implementation;if(n&&n.createDocumentType){var i=n.createDocumentType(e,t,r);this.locator&&g(this.locator,i),b(this,i),this.doc.doctype=i}},warning:function(e){console.warn("[xmldom warning]	"+e,y(this.locator))},error:function(e){console.error("[xmldom error]	"+e,y(this.locator))},fatalError:function(e){throw new f(e,this.locator)}},"endDTD,startEntity,endEntity,attributeDecl,elementDecl,externalEntityDecl,internalEntityDecl,resolveEntity,getExternalSubset,notationDecl,unparsedEntityDecl".replace(/\w+/g,function(e){m.prototype[e]=function(){return null}}),t.DOMParser=p},990:(e,t,r)=>{var n=r(42),i=n.find,o=n.NAMESPACE;function u(e){return""!==e}function l(e,t){return e.hasOwnProperty(t)||(e[t]=!0),e}function c(e){return e?Object.keys((e?e.split(/[\t\n\f\r ]+/).filter(u):[]).reduce(l,{})):[]}function f(e,t){for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r])}function d(e,t){var r=e.prototype;if(!(r instanceof t)){function n(){}n.prototype=t.prototype,f(r,n=new n),e.prototype=r=n}r.constructor!=e&&("function"!=typeof e&&console.error("unknown Class:"+e),r.constructor=e)}var h={},p=h.ELEMENT_NODE=1,m=h.ATTRIBUTE_NODE=2,g=h.TEXT_NODE=3,y=h.CDATA_SECTION_NODE=4,v=h.ENTITY_REFERENCE_NODE=5,b=h.ENTITY_NODE=6,_=h.PROCESSING_INSTRUCTION_NODE=7,T=h.COMMENT_NODE=8,E=h.DOCUMENT_NODE=9,S=h.DOCUMENT_TYPE_NODE=10,w=h.DOCUMENT_FRAGMENT_NODE=11,A=h.NOTATION_NODE=12,C={},I={},O=(C.INDEX_SIZE_ERR=(I[1]="Index size error",1),C.DOMSTRING_SIZE_ERR=(I[2]="DOMString size error",2),C.HIERARCHY_REQUEST_ERR=(I[3]="Hierarchy request error",3)),R=(C.WRONG_DOCUMENT_ERR=(I[4]="Wrong document",4),C.INVALID_CHARACTER_ERR=(I[5]="Invalid character",5),C.NO_DATA_ALLOWED_ERR=(I[6]="No data allowed",6),C.NO_MODIFICATION_ALLOWED_ERR=(I[7]="No modification allowed",7),C.NOT_FOUND_ERR=(I[8]="Not found",8)),P=(C.NOT_SUPPORTED_ERR=(I[9]="Not supported",9),C.INUSE_ATTRIBUTE_ERR=(I[10]="Attribute in use",10));function k(e,t){if(t instanceof Error)var r=t;else r=this,Error.call(this,I[e]),this.message=I[e],Error.captureStackTrace&&Error.captureStackTrace(this,k);return r.code=e,t&&(this.message=this.message+": "+t),r}function D(){}function N(e,t){this._node=e,this._refresh=t,L(this)}function L(e){var t=e._node._inc||e._node.ownerDocument._inc;if(e._inc!=t){var r=e._refresh(e._node);ey(e,"length",r.length),f(r,e),e._inc=t}}function x(){}function j(e,t){for(var r=e.length;r--;)if(e[r]===t)return r}function M(e,t,r,n){if(n?t[j(t,n)]=r:t[t.length++]=r,e){r.ownerElement=e;var i=e.ownerDocument;i&&(n&&G(i,e,n),i&&i._inc++,r.namespaceURI===o.XMLNS&&(e._nsMap[r.prefix?r.localName:""]=r.value))}}function F(e,t,r){var n=j(t,r);if(!(n>=0))throw new k(R,Error(e.tagName+"@"+r));for(var i=t.length-1;n<i;)t[n]=t[++n];if(t.length=i,e){var o=e.ownerDocument;o&&(G(o,e,r),r.ownerElement=null)}}function B(){}function U(){}function q(e){return("<"==e?"&lt;":">"==e&&"&gt;")||"&"==e&&"&amp;"||'"'==e&&"&quot;"||"&#"+e.charCodeAt()+";"}function H(e,t){if(t(e))return!0;if(e=e.firstChild)do if(H(e,t))return!0;while(e=e.nextSibling)}function V(){this.ownerDocument=this}function G(e,t,r,n){e&&e._inc++,r.namespaceURI===o.XMLNS&&delete t._nsMap[r.prefix?r.localName:""]}function Y(e,t,r){if(e&&e._inc){e._inc++;var n=t.childNodes;if(r)n[n.length++]=r;else{for(var i=t.firstChild,o=0;i;)n[o++]=i,i=i.nextSibling;n.length=o,delete n[n.length]}}}function z(e,t){var r=t.previousSibling,n=t.nextSibling;return r?r.nextSibling=n:e.firstChild=n,n?n.previousSibling=r:e.lastChild=r,t.parentNode=null,t.previousSibling=null,t.nextSibling=null,Y(e.ownerDocument,e),t}function K(e){return e&&e.nodeType===U.DOCUMENT_TYPE_NODE}function W(e){return e&&e.nodeType===U.ELEMENT_NODE}function X(e){return e&&e.nodeType===U.TEXT_NODE}function Q(e,t){var r=e.childNodes||[];if(i(r,W)||K(t))return!1;var n=i(r,K);return!(t&&n&&r.indexOf(n)>r.indexOf(t))}function $(e,t){var r=e.childNodes||[];if(i(r,function(e){return W(e)&&e!==t}))return!1;var n=i(r,K);return!(t&&n&&r.indexOf(n)>r.indexOf(t))}function J(e,t,r){var n=e.childNodes||[],o=t.childNodes||[];if(t.nodeType===U.DOCUMENT_FRAGMENT_NODE){var u=o.filter(W);if(u.length>1||i(o,X))throw new k(O,"More than one element or text in fragment");if(1===u.length&&!$(e,r))throw new k(O,"Element in fragment can not be inserted before doctype")}if(W(t)&&!$(e,r))throw new k(O,"Only one element can be added and only after doctype");if(K(t)){if(i(n,function(e){return K(e)&&e!==r}))throw new k(O,"Only one doctype is allowed");var l=i(n,W);if(r&&n.indexOf(l)<n.indexOf(r))throw new k(O,"Doctype can only be inserted before an element")}}function Z(e,t,r,n){(function(e,t,r){if(!(e&&(e.nodeType===U.DOCUMENT_NODE||e.nodeType===U.DOCUMENT_FRAGMENT_NODE||e.nodeType===U.ELEMENT_NODE)))throw new k(O,"Unexpected parent node type "+e.nodeType);if(r&&r.parentNode!==e)throw new k(R,"child not in parent");if(!(t&&(W(t)||X(t)||K(t)||t.nodeType===U.DOCUMENT_FRAGMENT_NODE||t.nodeType===U.COMMENT_NODE||t.nodeType===U.PROCESSING_INSTRUCTION_NODE))||K(t)&&e.nodeType!==U.DOCUMENT_NODE)throw new k(O,"Unexpected node type "+t.nodeType+" for parent node type "+e.nodeType)})(e,t,r),e.nodeType===U.DOCUMENT_NODE&&(n||function(e,t,r){var n=e.childNodes||[],o=t.childNodes||[];if(t.nodeType===U.DOCUMENT_FRAGMENT_NODE){var u=o.filter(W);if(u.length>1||i(o,X))throw new k(O,"More than one element or text in fragment");if(1===u.length&&!Q(e,r))throw new k(O,"Element in fragment can not be inserted before doctype")}if(W(t)&&!Q(e,r))throw new k(O,"Only one element can be added and only after doctype");if(K(t)){if(i(n,K))throw new k(O,"Only one doctype is allowed");var l=i(n,W);if(r&&n.indexOf(l)<n.indexOf(r))throw new k(O,"Doctype can only be inserted before an element");if(!r&&l)throw new k(O,"Doctype can not be appended since element is present")}})(e,t,r);var o=t.parentNode;if(o&&o.removeChild(t),t.nodeType===w){var u=t.firstChild;if(null==u)return t;var l=t.lastChild}else u=l=t;var c=r?r.previousSibling:e.lastChild;u.previousSibling=c,l.nextSibling=r,c?c.nextSibling=u:e.firstChild=u,null==r?e.lastChild=l:r.previousSibling=l;do u.parentNode=e;while(u!==l&&(u=u.nextSibling))return Y(e.ownerDocument||e,e),t.nodeType==w&&(t.firstChild=t.lastChild=null),t}function ee(){this._nsMap={}}function et(){}function er(){}function en(){}function ei(){}function eo(){}function ea(){}function es(){}function eu(){}function el(){}function ec(){}function ef(){}function ed(){}function eh(e,t){var r=[],n=9==this.nodeType&&this.documentElement||this,i=n.prefix,o=n.namespaceURI;if(o&&null==i&&null==(i=n.lookupPrefix(o)))var u=[{namespace:o,prefix:null}];return eg(this,r,e,t,u),r.join("")}function ep(e,t,r){var n=e.prefix||"",i=e.namespaceURI;if(!i||"xml"===n&&i===o.XML||i===o.XMLNS)return!1;for(var u=r.length;u--;){var l=r[u];if(l.prefix===n)return l.namespace!==i}return!0}function em(e,t,r){e.push(" ",t,'="',r.replace(/[<>&"\t\n\r]/g,q),'"')}function eg(e,t,r,n,i){if(i||(i=[]),n){if(!(e=n(e)))return;if("string"==typeof e)return void t.push(e)}switch(e.nodeType){case p:var u,l,c,f=e.attributes,d=f.length,h=e.firstChild,b=e.tagName,A=b;if(!(r=o.isHTML(e.namespaceURI)||r)&&!e.prefix&&e.namespaceURI){for(var C,I,O=0;O<f.length;O++)if("xmlns"===f.item(O).name){I=f.item(O).value;break}if(!I){for(var R=i.length-1;R>=0;R--)if(""===(C=i[R]).prefix&&C.namespace===e.namespaceURI){I=C.namespace;break}}if(I!==e.namespaceURI){for(R=i.length-1;R>=0;R--)if((C=i[R]).namespace===e.namespaceURI){C.prefix&&(A=C.prefix+":"+b);break}}}t.push("<",A);for(var P=0;P<d;P++)"xmlns"==(u=f.item(P)).prefix?i.push({prefix:u.localName,namespace:u.value}):"xmlns"==u.nodeName&&i.push({prefix:"",namespace:u.value});for(P=0;P<d;P++)ep(u=f.item(P),0,i)&&(em(t,(l=u.prefix||"")?"xmlns:"+l:"xmlns",c=u.namespaceURI),i.push({prefix:l,namespace:c})),eg(u,t,r,n,i);if(b===A&&ep(e,0,i)&&(em(t,(l=e.prefix||"")?"xmlns:"+l:"xmlns",c=e.namespaceURI),i.push({prefix:l,namespace:c})),h||r&&!/^(?:meta|link|img|br|hr|input)$/i.test(b)){if(t.push(">"),r&&/^script$/i.test(b))for(;h;)h.data?t.push(h.data):eg(h,t,r,n,i.slice()),h=h.nextSibling;else for(;h;)eg(h,t,r,n,i.slice()),h=h.nextSibling;t.push("</",A,">")}else t.push("/>");return;case E:case w:for(h=e.firstChild;h;)eg(h,t,r,n,i.slice()),h=h.nextSibling;return;case m:return em(t,e.name,e.value);case g:return t.push(e.data.replace(/[<&>]/g,q));case y:return t.push("<![CDATA[",e.data,"]]>");case T:return t.push("<!--",e.data,"-->");case S:var k=e.publicId,D=e.systemId;if(t.push("<!DOCTYPE ",e.name),k)t.push(" PUBLIC ",k),D&&"."!=D&&t.push(" ",D),t.push(">");else if(D&&"."!=D)t.push(" SYSTEM ",D,">");else{var N=e.internalSubset;N&&t.push(" [",N,"]"),t.push(">")}return;case _:return t.push("<?",e.target," ",e.data,"?>");case v:return t.push("&",e.nodeName,";");default:t.push("??",e.nodeName)}}function ey(e,t,r){e[t]=r}C.INVALID_STATE_ERR=(I[11]="Invalid state",11),C.SYNTAX_ERR=(I[12]="Syntax error",12),C.INVALID_MODIFICATION_ERR=(I[13]="Invalid modification",13),C.NAMESPACE_ERR=(I[14]="Invalid namespace",14),C.INVALID_ACCESS_ERR=(I[15]="Invalid access",15),k.prototype=Error.prototype,f(C,k),D.prototype={length:0,item:function(e){return this[e]||null},toString:function(e,t){for(var r=[],n=0;n<this.length;n++)eg(this[n],r,e,t);return r.join("")},filter:function(e){return Array.prototype.filter.call(this,e)},indexOf:function(e){return Array.prototype.indexOf.call(this,e)}},N.prototype.item=function(e){return L(this),this[e]},d(N,D),x.prototype={length:0,item:D.prototype.item,getNamedItem:function(e){for(var t=this.length;t--;){var r=this[t];if(r.nodeName==e)return r}},setNamedItem:function(e){var t=e.ownerElement;if(t&&t!=this._ownerElement)throw new k(P);var r=this.getNamedItem(e.nodeName);return M(this._ownerElement,this,e,r),r},setNamedItemNS:function(e){var t,r=e.ownerElement;if(r&&r!=this._ownerElement)throw new k(P);return t=this.getNamedItemNS(e.namespaceURI,e.localName),M(this._ownerElement,this,e,t),t},removeNamedItem:function(e){var t=this.getNamedItem(e);return F(this._ownerElement,this,t),t},removeNamedItemNS:function(e,t){var r=this.getNamedItemNS(e,t);return F(this._ownerElement,this,r),r},getNamedItemNS:function(e,t){for(var r=this.length;r--;){var n=this[r];if(n.localName==t&&n.namespaceURI==e)return n}return null}},B.prototype={hasFeature:function(e,t){return!0},createDocument:function(e,t,r){var n=new V;if(n.implementation=this,n.childNodes=new D,n.doctype=r||null,r&&n.appendChild(r),t){var i=n.createElementNS(e,t);n.appendChild(i)}return n},createDocumentType:function(e,t,r){var n=new ea;return n.name=e,n.nodeName=e,n.publicId=t||"",n.systemId=r||"",n}},U.prototype={firstChild:null,lastChild:null,previousSibling:null,nextSibling:null,attributes:null,parentNode:null,childNodes:null,ownerDocument:null,nodeValue:null,namespaceURI:null,prefix:null,localName:null,insertBefore:function(e,t){return Z(this,e,t)},replaceChild:function(e,t){Z(this,e,t,J),t&&this.removeChild(t)},removeChild:function(e){return z(this,e)},appendChild:function(e){return this.insertBefore(e,null)},hasChildNodes:function(){return null!=this.firstChild},cloneNode:function(e){return function e(t,r,n){var i=new r.constructor;for(var o in r)if(Object.prototype.hasOwnProperty.call(r,o)){var u=r[o];"object"!=typeof u&&u!=i[o]&&(i[o]=u)}switch(r.childNodes&&(i.childNodes=new D),i.ownerDocument=t,i.nodeType){case p:var l=r.attributes,c=i.attributes=new x,f=l.length;c._ownerElement=i;for(var d=0;d<f;d++)i.setAttributeNode(e(t,l.item(d),!0));break;case m:n=!0}if(n)for(var h=r.firstChild;h;)i.appendChild(e(t,h,n)),h=h.nextSibling;return i}(this.ownerDocument||this,this,e)},normalize:function(){for(var e=this.firstChild;e;){var t=e.nextSibling;t&&t.nodeType==g&&e.nodeType==g?(this.removeChild(t),e.appendData(t.data)):(e.normalize(),e=t)}},isSupported:function(e,t){return this.ownerDocument.implementation.hasFeature(e,t)},hasAttributes:function(){return this.attributes.length>0},lookupPrefix:function(e){for(var t=this;t;){var r=t._nsMap;if(r){for(var n in r)if(Object.prototype.hasOwnProperty.call(r,n)&&r[n]===e)return n}t=t.nodeType==m?t.ownerDocument:t.parentNode}return null},lookupNamespaceURI:function(e){for(var t=this;t;){var r=t._nsMap;if(r&&Object.prototype.hasOwnProperty.call(r,e))return r[e];t=t.nodeType==m?t.ownerDocument:t.parentNode}return null},isDefaultNamespace:function(e){return null==this.lookupPrefix(e)}},f(h,U),f(h,U.prototype),V.prototype={nodeName:"#document",nodeType:E,doctype:null,documentElement:null,_inc:1,insertBefore:function(e,t){if(e.nodeType==w){for(var r=e.firstChild;r;){var n=r.nextSibling;this.insertBefore(r,t),r=n}return e}return Z(this,e,t),e.ownerDocument=this,null===this.documentElement&&e.nodeType===p&&(this.documentElement=e),e},removeChild:function(e){return this.documentElement==e&&(this.documentElement=null),z(this,e)},replaceChild:function(e,t){Z(this,e,t,J),e.ownerDocument=this,t&&this.removeChild(t),W(e)&&(this.documentElement=e)},importNode:function(e,t){return function e(t,r,n){var i;switch(r.nodeType){case p:(i=r.cloneNode(!1)).ownerDocument=t;case w:break;case m:n=!0}if(i||(i=r.cloneNode(!1)),i.ownerDocument=t,i.parentNode=null,n)for(var o=r.firstChild;o;)i.appendChild(e(t,o,n)),o=o.nextSibling;return i}(this,e,t)},getElementById:function(e){var t=null;return H(this.documentElement,function(r){if(r.nodeType==p&&r.getAttribute("id")==e)return t=r,!0}),t},getElementsByClassName:function(e){var t=c(e);return new N(this,function(r){var n=[];return t.length>0&&H(r.documentElement,function(i){if(i!==r&&i.nodeType===p){var o=i.getAttribute("class");if(o){var u=e===o;if(!u){var l=c(o);u=t.every(function(e){return l&&-1!==l.indexOf(e)})}u&&n.push(i)}}}),n})},createElement:function(e){var t=new ee;return t.ownerDocument=this,t.nodeName=e,t.tagName=e,t.localName=e,t.childNodes=new D,(t.attributes=new x)._ownerElement=t,t},createDocumentFragment:function(){var e=new ec;return e.ownerDocument=this,e.childNodes=new D,e},createTextNode:function(e){var t=new en;return t.ownerDocument=this,t.appendData(e),t},createComment:function(e){var t=new ei;return t.ownerDocument=this,t.appendData(e),t},createCDATASection:function(e){var t=new eo;return t.ownerDocument=this,t.appendData(e),t},createProcessingInstruction:function(e,t){var r=new ef;return r.ownerDocument=this,r.tagName=r.target=e,r.nodeValue=r.data=t,r},createAttribute:function(e){var t=new et;return t.ownerDocument=this,t.name=e,t.nodeName=e,t.localName=e,t.specified=!0,t},createEntityReference:function(e){var t=new el;return t.ownerDocument=this,t.nodeName=e,t},createElementNS:function(e,t){var r=new ee,n=t.split(":"),i=r.attributes=new x;return r.childNodes=new D,r.ownerDocument=this,r.nodeName=t,r.tagName=t,r.namespaceURI=e,2==n.length?(r.prefix=n[0],r.localName=n[1]):r.localName=t,i._ownerElement=r,r},createAttributeNS:function(e,t){var r=new et,n=t.split(":");return r.ownerDocument=this,r.nodeName=t,r.name=t,r.namespaceURI=e,r.specified=!0,2==n.length?(r.prefix=n[0],r.localName=n[1]):r.localName=t,r}},d(V,U),ee.prototype={nodeType:p,hasAttribute:function(e){return null!=this.getAttributeNode(e)},getAttribute:function(e){var t=this.getAttributeNode(e);return t&&t.value||""},getAttributeNode:function(e){return this.attributes.getNamedItem(e)},setAttribute:function(e,t){var r=this.ownerDocument.createAttribute(e);r.value=r.nodeValue=""+t,this.setAttributeNode(r)},removeAttribute:function(e){var t=this.getAttributeNode(e);t&&this.removeAttributeNode(t)},appendChild:function(e){return e.nodeType===w?this.insertBefore(e,null):(e.parentNode&&e.parentNode.removeChild(e),e.parentNode=this,e.previousSibling=this.lastChild,e.nextSibling=null,e.previousSibling?e.previousSibling.nextSibling=e:this.firstChild=e,this.lastChild=e,Y(this.ownerDocument,this,e),e)},setAttributeNode:function(e){return this.attributes.setNamedItem(e)},setAttributeNodeNS:function(e){return this.attributes.setNamedItemNS(e)},removeAttributeNode:function(e){return this.attributes.removeNamedItem(e.nodeName)},removeAttributeNS:function(e,t){var r=this.getAttributeNodeNS(e,t);r&&this.removeAttributeNode(r)},hasAttributeNS:function(e,t){return null!=this.getAttributeNodeNS(e,t)},getAttributeNS:function(e,t){var r=this.getAttributeNodeNS(e,t);return r&&r.value||""},setAttributeNS:function(e,t,r){var n=this.ownerDocument.createAttributeNS(e,t);n.value=n.nodeValue=""+r,this.setAttributeNode(n)},getAttributeNodeNS:function(e,t){return this.attributes.getNamedItemNS(e,t)},getElementsByTagName:function(e){return new N(this,function(t){var r=[];return H(t,function(n){n===t||n.nodeType!=p||"*"!==e&&n.tagName!=e||r.push(n)}),r})},getElementsByTagNameNS:function(e,t){return new N(this,function(r){var n=[];return H(r,function(i){i===r||i.nodeType!==p||"*"!==e&&i.namespaceURI!==e||"*"!==t&&i.localName!=t||n.push(i)}),n})}},V.prototype.getElementsByTagName=ee.prototype.getElementsByTagName,V.prototype.getElementsByTagNameNS=ee.prototype.getElementsByTagNameNS,d(ee,U),et.prototype.nodeType=m,d(et,U),er.prototype={data:"",substringData:function(e,t){return this.data.substring(e,e+t)},appendData:function(e){e=this.data+e,this.nodeValue=this.data=e,this.length=e.length},insertData:function(e,t){this.replaceData(e,0,t)},appendChild:function(e){throw Error(I[O])},deleteData:function(e,t){this.replaceData(e,t,"")},replaceData:function(e,t,r){r=this.data.substring(0,e)+r+this.data.substring(e+t),this.nodeValue=this.data=r,this.length=r.length}},d(er,U),en.prototype={nodeName:"#text",nodeType:g,splitText:function(e){var t=this.data,r=t.substring(e);t=t.substring(0,e),this.data=this.nodeValue=t,this.length=t.length;var n=this.ownerDocument.createTextNode(r);return this.parentNode&&this.parentNode.insertBefore(n,this.nextSibling),n}},d(en,er),ei.prototype={nodeName:"#comment",nodeType:T},d(ei,er),eo.prototype={nodeName:"#cdata-section",nodeType:y},d(eo,er),ea.prototype.nodeType=S,d(ea,U),es.prototype.nodeType=A,d(es,U),eu.prototype.nodeType=b,d(eu,U),el.prototype.nodeType=v,d(el,U),ec.prototype.nodeName="#document-fragment",ec.prototype.nodeType=w,d(ec,U),ef.prototype.nodeType=_,d(ef,U),ed.prototype.serializeToString=function(e,t,r){return eh.call(e,t,r)},U.prototype.toString=eh;try{Object.defineProperty&&(Object.defineProperty(N.prototype,"length",{get:function(){return L(this),this.$$length}}),Object.defineProperty(U.prototype,"textContent",{get:function(){return function e(t){switch(t.nodeType){case p:case w:var r=[];for(t=t.firstChild;t;)7!==t.nodeType&&8!==t.nodeType&&r.push(e(t)),t=t.nextSibling;return r.join("");default:return t.nodeValue}}(this)},set:function(e){switch(this.nodeType){case p:case w:for(;this.firstChild;)this.removeChild(this.firstChild);(e||String(e))&&this.appendChild(this.ownerDocument.createTextNode(e));break;default:this.data=e,this.value=e,this.nodeValue=e}}}),ey=function(e,t,r){e["$$"+t]=r})}catch(e){}t.DocumentType=ea,t.DOMException=k,t.DOMImplementation=B,t.Element=ee,t.Node=U,t.NodeList=D,t.XMLSerializer=ed},128:(e,t,r)=>{var n=r(42).freeze;t.XML_ENTITIES=n({amp:"&",apos:"'",gt:">",lt:"<",quot:'"'}),t.HTML_ENTITIES=n({lt:"<",gt:">",amp:"&",quot:'"',apos:"'",Agrave:"\xc0",Aacute:"\xc1",Acirc:"\xc2",Atilde:"\xc3",Auml:"\xc4",Aring:"\xc5",AElig:"\xc6",Ccedil:"\xc7",Egrave:"\xc8",Eacute:"\xc9",Ecirc:"\xca",Euml:"\xcb",Igrave:"\xcc",Iacute:"\xcd",Icirc:"\xce",Iuml:"\xcf",ETH:"\xd0",Ntilde:"\xd1",Ograve:"\xd2",Oacute:"\xd3",Ocirc:"\xd4",Otilde:"\xd5",Ouml:"\xd6",Oslash:"\xd8",Ugrave:"\xd9",Uacute:"\xda",Ucirc:"\xdb",Uuml:"\xdc",Yacute:"\xdd",THORN:"\xde",szlig:"\xdf",agrave:"\xe0",aacute:"\xe1",acirc:"\xe2",atilde:"\xe3",auml:"\xe4",aring:"\xe5",aelig:"\xe6",ccedil:"\xe7",egrave:"\xe8",eacute:"\xe9",ecirc:"\xea",euml:"\xeb",igrave:"\xec",iacute:"\xed",icirc:"\xee",iuml:"\xef",eth:"\xf0",ntilde:"\xf1",ograve:"\xf2",oacute:"\xf3",ocirc:"\xf4",otilde:"\xf5",ouml:"\xf6",oslash:"\xf8",ugrave:"\xf9",uacute:"\xfa",ucirc:"\xfb",uuml:"\xfc",yacute:"\xfd",thorn:"\xfe",yuml:"\xff",nbsp:"\xa0",iexcl:"\xa1",cent:"\xa2",pound:"\xa3",curren:"\xa4",yen:"\xa5",brvbar:"\xa6",sect:"\xa7",uml:"\xa8",copy:"\xa9",ordf:"\xaa",laquo:"\xab",not:"\xac",shy:"\xad\xad",reg:"\xae",macr:"\xaf",deg:"\xb0",plusmn:"\xb1",sup2:"\xb2",sup3:"\xb3",acute:"\xb4",micro:"\xb5",para:"\xb6",middot:"\xb7",cedil:"\xb8",sup1:"\xb9",ordm:"\xba",raquo:"\xbb",frac14:"\xbc",frac12:"\xbd",frac34:"\xbe",iquest:"\xbf",times:"\xd7",divide:"\xf7",forall:"∀",part:"∂",exist:"∃",empty:"∅",nabla:"∇",isin:"∈",notin:"∉",ni:"∋",prod:"∏",sum:"∑",minus:"−",lowast:"∗",radic:"√",prop:"∝",infin:"∞",ang:"∠",and:"∧",or:"∨",cap:"∩",cup:"∪",int:"∫",there4:"∴",sim:"∼",cong:"≅",asymp:"≈",ne:"≠",equiv:"≡",le:"≤",ge:"≥",sub:"⊂",sup:"⊃",nsub:"⊄",sube:"⊆",supe:"⊇",oplus:"⊕",otimes:"⊗",perp:"⊥",sdot:"⋅",Alpha:"Α",Beta:"Β",Gamma:"Γ",Delta:"Δ",Epsilon:"Ε",Zeta:"Ζ",Eta:"Η",Theta:"Θ",Iota:"Ι",Kappa:"Κ",Lambda:"Λ",Mu:"Μ",Nu:"Ν",Xi:"Ξ",Omicron:"Ο",Pi:"Π",Rho:"Ρ",Sigma:"Σ",Tau:"Τ",Upsilon:"Υ",Phi:"Φ",Chi:"Χ",Psi:"Ψ",Omega:"Ω",alpha:"α",beta:"β",gamma:"γ",delta:"δ",epsilon:"ε",zeta:"ζ",eta:"η",theta:"θ",iota:"ι",kappa:"κ",lambda:"λ",mu:"μ",nu:"ν",xi:"ξ",omicron:"ο",pi:"π",rho:"ρ",sigmaf:"ς",sigma:"σ",tau:"τ",upsilon:"υ",phi:"φ",chi:"χ",psi:"ψ",omega:"ω",thetasym:"ϑ",upsih:"ϒ",piv:"ϖ",OElig:"Œ",oelig:"œ",Scaron:"Š",scaron:"š",Yuml:"Ÿ",fnof:"ƒ",circ:"ˆ",tilde:"˜",ensp:" ",emsp:" ",thinsp:" ",zwnj:"‌",zwj:"‍",lrm:"‎",rlm:"‏",ndash:"–",mdash:"—",lsquo:"‘",rsquo:"’",sbquo:"‚",ldquo:"“",rdquo:"”",bdquo:"„",dagger:"†",Dagger:"‡",bull:"•",hellip:"…",permil:"‰",prime:"′",Prime:"″",lsaquo:"‹",rsaquo:"›",oline:"‾",euro:"€",trade:"™",larr:"←",uarr:"↑",rarr:"→",darr:"↓",harr:"↔",crarr:"↵",lceil:"⌈",rceil:"⌉",lfloor:"⌊",rfloor:"⌋",loz:"◊",spades:"♠",clubs:"♣",hearts:"♥",diams:"♦"}),t.entityMap=t.HTML_ENTITIES},337:(e,t,r)=>{var n=r(990);n.DOMImplementation,n.XMLSerializer,t.DOMParser=r(289).DOMParser},394:(e,t,r)=>{var n=r(42).NAMESPACE,i=/[A-Z_a-z\xC0-\xD6\xD8-\xF6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD]/,o=RegExp("[\\-\\.0-9"+i.source.slice(1,-1)+"\\u00B7\\u0300-\\u036F\\u203F-\\u2040]"),u=RegExp("^"+i.source+o.source+"*(?::"+i.source+o.source+"*)?$");function l(e,t){this.message=e,this.locator=t,Error.captureStackTrace&&Error.captureStackTrace(this,l)}function c(){}function f(e,t){return t.lineNumber=e.lineNumber,t.columnNumber=e.columnNumber,t}function d(e,t,r){for(var i,o=e.tagName,u=null,l=e.length;l--;){var c=e[l],f=c.qName,d=c.value;if((i=f.indexOf(":"))>0)var p=c.prefix=f.slice(0,i),m=f.slice(i+1),g="xmlns"===p&&m;else m=f,p=null,g="xmlns"===f&&"";c.localName=m,!1!==g&&(null==u&&(u={},h(r,r={})),r[g]=u[g]=d,c.uri=n.XMLNS,t.startPrefixMapping(g,d))}for(l=e.length;l--;)(p=(c=e[l]).prefix)&&("xml"===p&&(c.uri=n.XML),"xmlns"!==p&&(c.uri=r[p||""]));(i=o.indexOf(":"))>0?(p=e.prefix=o.slice(0,i),m=e.localName=o.slice(i+1)):(p=null,m=e.localName=o);var y=e.uri=r[p||""];if(t.startElement(y,m,o,e),!e.closed)return e.currentNSMap=r,e.localNSMap=u,!0;if(t.endElement(y,m,o),u)for(p in u)Object.prototype.hasOwnProperty.call(u,p)&&t.endPrefixMapping(p)}function h(e,t){for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r])}function p(){this.attributeNames={}}l.prototype=Error(),l.prototype.name=l.name,c.prototype={parse:function(e,t,r){var i=this.domBuilder;i.startDocument(),h(t,t={}),function(e,t,r,i,o){function u(e){var t,n=e.slice(1,-1);return Object.hasOwnProperty.call(r,n)?r[n]:"#"===n.charAt(0)?(t=parseInt(n.substr(1).replace("x","0x")))>65535?String.fromCharCode(55296+((t-=65536)>>10),56320+(1023&t)):String.fromCharCode(t):(o.error("entity not found:"+e),e)}function c(t){if(t>T){var r=e.substring(T,t).replace(/&#?\w+;/g,u);v&&h(T),i.characters(r,0,t-T),T=t}}function h(t,r){for(;t>=g&&(r=y.exec(e));)g=(m=r.index)+r[0].length,v.lineNumber++;v.columnNumber=t-m+1}for(var m=0,g=0,y=/.*(?:\r\n?|\n)|.*$/g,v=i.locator,b=[{currentNSMap:t}],_={},T=0;;){try{var E=e.indexOf("<",T);if(E<0){if(!e.substr(T).match(/^\s*$/)){var S=i.doc,w=S.createTextNode(e.substr(T));S.appendChild(w),i.currentElement=w}return}switch(E>T&&c(E),e.charAt(E+1)){case"/":var A=e.indexOf(">",E+3),C=e.substring(E+2,A).replace(/[ \t\n\r]+$/g,""),I=b.pop();A<0?(C=e.substring(E+2).replace(/[\s<].*/,""),o.error("end tag name: "+C+" is not complete:"+I.tagName),A=E+1+C.length):C.match(/\s</)&&(C=C.replace(/[\s<].*/,""),o.error("end tag name: "+C+" maybe not complete"),A=E+1+C.length);var O=I.localNSMap,R=I.tagName==C;if(R||I.tagName&&I.tagName.toLowerCase()==C.toLowerCase()){if(i.endElement(I.uri,I.localName,C),O)for(var P in O)Object.prototype.hasOwnProperty.call(O,P)&&i.endPrefixMapping(P);R||o.fatalError("end tag name: "+C+" is not match the current start tagName:"+I.tagName)}else b.push(I);A++;break;case"?":v&&h(E),A=function(e,t,r){var n=e.indexOf("?>",t);if(n){var i=e.substring(t,n).match(/^<\?(\S*)\s*([\s\S]*?)\s*$/);return i?(i[0].length,r.processingInstruction(i[1],i[2]),n+2):-1}return -1}(e,E,i);break;case"!":v&&h(E),A=function(e,t,r,n){if("-"===e.charAt(t+2))return"-"===e.charAt(t+3)?(i=e.indexOf("-->",t+4))>t?(r.comment(e,t+4,i-t-4),i+3):(n.error("Unclosed comment"),-1):-1;if("CDATA["==e.substr(t+3,6)){var i=e.indexOf("]]>",t+9);return r.startCDATA(),r.characters(e,t+9,i-t-9),r.endCDATA(),i+3}var o=function(e,t){var r,n=[],i=/'[^']+'|"[^"]+"|[^\s<>\/=]+=?|(\/?\s*>|<)/g;for(i.lastIndex=t,i.exec(e);r=i.exec(e);)if(n.push(r),r[1])return n}(e,t),u=o.length;if(u>1&&/!doctype/i.test(o[0][0])){var l=o[1][0],c=!1,f=!1;u>3&&(/^public$/i.test(o[2][0])?(c=o[3][0],f=u>4&&o[4][0]):/^system$/i.test(o[2][0])&&(f=o[3][0]));var d=o[u-1];return r.startDTD(l,c,f),r.endDTD(),d.index+d[0].length}return -1}(e,E,i,o);break;default:v&&h(E);var k=new p,D=b[b.length-1].currentNSMap,N=(A=function(e,t,r,i,o,u){function l(e,t,n){r.attributeNames.hasOwnProperty(e)&&u.fatalError("Attribute "+e+" redefined"),r.addValue(e,t.replace(/[\t\n\r]/g," ").replace(/&#?\w+;/g,o),n)}for(var c,f=++t,d=0;;){var h=e.charAt(f);switch(h){case"=":if(1===d)c=e.slice(t,f),d=3;else{if(2!==d)throw Error("attribute equal must after attrName");d=3}break;case"'":case'"':if(3===d||1===d){if(1===d&&(u.warning('attribute value must after "="'),c=e.slice(t,f)),t=f+1,!((f=e.indexOf(h,t))>0))throw Error("attribute value no end '"+h+"' match");l(c,p=e.slice(t,f),t-1),d=5}else{if(4!=d)throw Error('attribute value must after "="');l(c,p=e.slice(t,f),t),u.warning('attribute "'+c+'" missed start quot('+h+")!!"),t=f+1,d=5}break;case"/":switch(d){case 0:r.setTagName(e.slice(t,f));case 5:case 6:case 7:d=7,r.closed=!0;case 4:case 1:case 2:break;default:throw Error("attribute invalid close char('/')")}break;case"":return u.error("unexpected end of input"),0==d&&r.setTagName(e.slice(t,f)),f;case">":switch(d){case 0:r.setTagName(e.slice(t,f));case 5:case 6:case 7:break;case 4:case 1:"/"===(p=e.slice(t,f)).slice(-1)&&(r.closed=!0,p=p.slice(0,-1));case 2:2===d&&(p=c),4==d?(u.warning('attribute "'+p+'" missed quot(")!'),l(c,p,t)):(n.isHTML(i[""])&&p.match(/^(?:disabled|checked|selected)$/i)||u.warning('attribute "'+p+'" missed value!! "'+p+'" instead!!'),l(p,p,t));break;case 3:throw Error("attribute value missed!!")}return f;case"\x80":h=" ";default:if(h<=" ")switch(d){case 0:r.setTagName(e.slice(t,f)),d=6;break;case 1:c=e.slice(t,f),d=2;break;case 4:var p=e.slice(t,f);u.warning('attribute "'+p+'" missed quot(")!!'),l(c,p,t);case 5:d=6}else switch(d){case 2:r.tagName,n.isHTML(i[""])&&c.match(/^(?:disabled|checked|selected)$/i)||u.warning('attribute "'+c+'" missed value!! "'+c+'" instead2!!'),l(c,c,t),t=f,d=1;break;case 5:u.warning('attribute space is required"'+c+'"!!');case 6:d=1,t=f;break;case 3:d=4,t=f;break;case 7:throw Error("elements closed character '/' and '>' must be connected to")}}f++}}(e,E,k,D,u,o),k.length);if(!k.closed&&function(e,t,r,n){var i=n[r];return null==i&&((i=e.lastIndexOf("</"+r+">"))<t&&(i=e.lastIndexOf("</"+r)),n[r]=i),i<t}(e,A,k.tagName,_)&&(k.closed=!0,r.nbsp||o.warning("unclosed xml attribute")),v&&N){for(var L=f(v,{}),x=0;x<N;x++){var j=k[x];h(j.offset),j.locator=f(v,{})}i.locator=L,d(k,i,D)&&b.push(k),i.locator=v}else d(k,i,D)&&b.push(k);n.isHTML(k.uri)&&!k.closed?A=function(e,t,r,n,i){if(/^(?:script|textarea)$/i.test(r)){var o=e.indexOf("</"+r+">",t),u=e.substring(t+1,o);if(/[&<]/.test(u))return/^script$/i.test(r)||(u=u.replace(/&#?\w+;/g,n)),i.characters(u,0,u.length),o}return t+1}(e,A,k.tagName,u,i):A++}}catch(e){if(e instanceof l)throw e;o.error("element parse error: "+e),A=-1}A>T?T=A:c(Math.max(E,T)+1)}}(e,t,r,i,this.errorHandler),i.endDocument()}},p.prototype={setTagName:function(e){if(!u.test(e))throw Error("invalid tagName:"+e);this.tagName=e},addValue:function(e,t,r){if(!u.test(e))throw Error("invalid attribute:"+e);this.attributeNames[e]=this.length,this[this.length++]={qName:e,value:t,offset:r}},length:0,getLocalName:function(e){return this[e].localName},getLocator:function(e){return this[e].locator},getQName:function(e){return this[e].qName},getURI:function(e){return this[e].uri},getValue:function(e){return this[e].value}},t.XMLReader=c,t.ParseError=l},169:e=>{var t=function(e){e.style.display="none"},r=function(e){e.style.display=""};e.exports={hide:t,show:r,setText:function(e,n){if(!n||n.length<=0)return e.innerText="",void t(e);e.innerText=n,r(e)}}},161:(e,t,r)=>{r.r(t),r.d(t,{default:()=>_});var n=r(634),i=r.n(n),o=r(924),u=r.n(o),l=r(822),c=r.n(l);function f(e,t){var r=e.dash.mediaPlayer,n=r.getTracksFor("audio"),i=e.audioTracks();function o(e){return"dash-audio-".concat(e)}i.length&&t.clearTracks(["audio"]);var l=r.getCurrentTrackFor("audio");n.forEach(function(t){var r=null;if(Array.isArray(t.labels)){for(var n=0;n<t.labels.length;n++)if(t.labels[n].lang&&-1!==e.language().indexOf(t.labels[n].lang.toLowerCase())){r=t.labels[n];break}}var c=null;r?c=r.text:Array.isArray(t.labels)&&1===t.labels.length?c=t.labels[0].text:(c=t.lang,t.roles&&t.roles.length&&(c+=" ("+t.roles.join(", ")+")")),i.addTrack(new(u()).AudioTrack({enabled:t===l,id:o(t.index),kind:t.kind||"main",label:c,language:t.lang}))});var c=function(){for(var e=0;e<i.length;e++){var t=i[e];if(t.enabled){var u=function(e,t){return e.find(function(e){return o(e.index)===t.id})}(n,t);r.setCurrentTrack(u)}}};i.addEventListener("change",c),e.dash.mediaPlayer.on(dashjs.MediaPlayer.events.STREAM_TEARDOWN_COMPLETE,function(){i.removeEventListener("change",c)})}function d(e,t){e.dash.mediaPlayer.on(dashjs.MediaPlayer.events.PLAYBACK_METADATA_LOADED,f.bind(null,e,t))}function h(e,t,r){i().VTTCue&&!/\[native code\]/.test(i().VTTCue.toString())&&(i().VTTCue=!1);var n=[];if(t.featuresNativeTextTracks)console.error("You must pass {html: {nativeCaptions: false}} in the videojs constructor to use text tracks in videojs-contrib-dash");else{var o=e.dash.mediaPlayer;o.on(dashjs.MediaPlayer.events.TEXT_TRACKS_ADDED,u),o.on(dashjs.MediaPlayer.events.CAN_PLAY,function(){o.off(dashjs.MediaPlayer.events.TEXT_TRACKS_ADDED,u)})}function u(t){t.index;var r=t.tracks;o.off(dashjs.MediaPlayer.events.TEXT_TRACKS_ADDED,u),n.forEach(e.removeRemoteTextTrack.bind(e)),n=[],r.length&&(n=function(e,t,r){var n=[],i=r.map(function(t){var r=null;if(Array.isArray(t.labels)){for(var n=0;n<t.labels.length;n++)if(t.labels[n].lang&&-1!==e.language().indexOf(t.labels[n].lang.toLowerCase())){r=t.labels[n];break}}return{dashTrack:t,trackConfig:{label:r?r.text:Array.isArray(t.labels)&&1===t.labels.length?t.labels[0].text:t.lang||t.label,language:t.lang,srclang:t.lang,kind:t.kind}}}).map(function(t){var r=t.trackConfig,i=t.dashTrack;if(i.isTTML&&!e.getChild("TTMLTextTrackDisplay"))return null;var o=e.addRemoteTextTrack(r,!1);return n.push({textTrack:o.track,dashTrack:i}),o}).filter(function(e){return null!==e});function o(){for(var t=e.dash.mediaPlayer,i=e.textTracks(),o=-1,u=0;u<i.length;u+=1)(function(){var e=i[u];if("showing"===e.mode){var t=function(t,r){for(var n=0;n<t.length;n++)if(t[n].textTrack===e)return t[n]}(n),l=t?t.dashTrack:null;l&&(o=r.indexOf(l))}})();o!==t.getCurrentTextTrackIndex()&&t.setTextTrack(o)}return e.textTracks().on("change",o),e.dash.mediaPlayer.on(dashjs.MediaPlayer.events.STREAM_TEARDOWN_COMPLETE,function(){e.textTracks().off("change",o)}),o(),i}(e,0,r))}}var p=r(474),m=r.n(p);function g(e){return(g="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function y(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}function v(e,t){for(var r,n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,(r=function(e,t){if("object"!==g(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,"string");if("object"!==g(n))return n;throw TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(i.key),"symbol"===g(r)?r:String(r)),i)}}var b=function(){var e;function t(e,r,n){var i=this;if(function(e,t){if(!(e instanceof t))throw TypeError("Cannot call a class as a function")}(this,t),n=n||r.options_,this.player=u()(n.playerId),this.player.dash=this.player.dash||{},this.tech_=r,this.el_=r.el(),this.elParent_=this.el_.parentNode,this.hasFiniteDuration_=!1,e.src){r.isReady_=!1,t.updateSourceData&&(console.warn('updateSourceData has been deprecated. Please switch to using hook("updatesource", callback).'),e=t.updateSourceData(e)),t.hooks("updatesource").forEach(function(t){e=t(e)});var o=e.src;this.keySystemOptions_=t.buildDashJSProtData(e.keySystemOptions),this.player.dash.mediaPlayer=c().MediaPlayer().create(),this.mediaPlayer_=this.player.dash.mediaPlayer,t.useVideoJSDebug&&(console.warn('useVideoJSDebug has been deprecated. Please switch to using hook("beforeinitialize", callback).'),t.useVideoJSDebug(this.mediaPlayer_)),t.beforeInitialize&&(console.warn('beforeInitialize has been deprecated. Please switch to using hook("beforeinitialize", callback).'),t.beforeInitialize(this.player,this.mediaPlayer_)),t.hooks("beforeinitialize").forEach(function(e){e(i.player,i.mediaPlayer_)}),this.mediaPlayer_.initialize(),this.retriggerError_=function(e){if("error"===e.type&&(e.error.code>=10&&e.error.code<=35?i.player.error({code:4,dashjsErrorCode:e.error.code,message:e.error.message}):e.error.code<10?i.player.error({code:e.error.code,dashjsErrorCode:e.error.code,message:e.error.message}):e.error.code>=100&&e.error.code<=114?i.player.error({code:5,dashjsErrorCode:e.error.code,message:e.error.message}):i.player.error({code:e.error.code,message:e.error.message})),"capability"===e.error&&"mediasource"===e.event)i.player.error({code:4,message:"The media cannot be played because it requires a feature that your browser does not support."});else if("manifestError"!==e.error||"createParser"!==e.event.id&&"codec"!==e.event.id&&"nostreams"!==e.event.id&&"nostreamscomposed"!==e.event.id&&"parse"!==e.event.id&&"multiplexedrep"!==e.event.id){if("mediasource"===e.error)e.event.match("MEDIA_ERR_ABORTED")?i.player.error({code:1,message:e.event}):e.event.match("MEDIA_ERR_NETWORK")?i.player.error({code:2,message:e.event}):e.event.match("MEDIA_ERR_DECODE")?i.player.error({code:3,message:e.event}):e.event.match("MEDIA_ERR_SRC_NOT_SUPPORTED")?i.player.error({code:4,message:e.event}):e.event.match("MEDIA_ERR_ENCRYPTED")?i.player.error({code:5,message:e.event}):(e.event.match("UNKNOWN"),i.player.error({code:4,message:e.event}));else if("capability"===e.error&&"encryptedmedia"===e.event)i.player.error({code:5,message:"The media cannot be played because it requires encryption features that your browser does not support."});else if("key_session"===e.error)i.player.error({code:5,message:e.event});else if("download"===e.error)i.player.error({code:2,message:"The media playback was aborted because too many consecutive download errors occurred."});else{if("mssError"!==e.error)return;i.player.error({code:3,message:e.event})}}else i.player.error({code:4,message:e.event.message});setTimeout(function(){i.mediaPlayer_.reset()},10)},this.mediaPlayer_.on(c().MediaPlayer.events.ERROR,this.retriggerError_),this.getDuration_=function(e){var t=e.data.Period_asArray,r=i.hasFiniteDuration_;e.data.mediaPresentationDuration||t[t.length-1].duration?i.hasFiniteDuration_=!0:i.hasFiniteDuration_=!1,i.hasFiniteDuration_!==r&&i.player.trigger("durationchange")},this.mediaPlayer_.on(c().MediaPlayer.events.MANIFEST_LOADED,this.getDuration_),n.dash&&Object.keys(n.dash).forEach(function(e){var t,r;if("useTTML"!==e){var o="set"+e.charAt(0).toUpperCase()+e.slice(1),u=n.dash[e];i.mediaPlayer_.hasOwnProperty(o)&&(console.warn("Using dash options in videojs-contrib-dash without the set prefix "+"has been deprecated. Change '".concat(e,"' to '").concat(o,"'")),e=o),i.mediaPlayer_.hasOwnProperty(e)?(Array.isArray(u)||(u=[u]),(t=i.mediaPlayer_)[e].apply(t,function(e){if(Array.isArray(e))return y(e)}(r=u)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(r)||function(e,t){if(e){if("string"==typeof e)return y(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?y(e,t):void 0}}(r)||function(){throw TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}())):console.warn("Warning: dash configuration option unrecognized: ".concat(e))}}),this.mediaPlayer_.attachView(this.el_),n.dash&&n.dash.useTTML&&(this.ttmlContainer_=this.player.addChild("TTMLTextTrackDisplay"),this.mediaPlayer_.attachTTMLRenderingDiv(this.ttmlContainer_.el())),this.mediaPlayer_.setAutoPlay(!1),d.call(null,this.player,r),h.call(null,this.player,r,n),this.mediaPlayer_.setProtectionData(this.keySystemOptions_),this.mediaPlayer_.attachSource(o),this.tech_.triggerReady()}}return e=[{key:"buildDashJSProtData",value:function(e){var t={};if(!e||!Array.isArray(e))return null;for(var r=0;r<e.length;r++){var n=e[r],i=u().mergeOptions({},n.options);i.licenseUrl&&(i.serverURL=i.licenseUrl,delete i.licenseUrl),t[n.name]=i}return t}},{key:"hooks",value:function(e,r){return t.hooks_[e]=t.hooks_[e]||[],r&&(t.hooks_[e]=t.hooks_[e].concat(r)),t.hooks_[e]}},{key:"hook",value:function(e,r){t.hooks(e,r)}},{key:"removeHook",value:function(e,r){var n=t.hooks(e).indexOf(r);return -1!==n&&(t.hooks_[e]=t.hooks_[e].slice(),t.hooks_[e].splice(n,1),!0)}}],v(t.prototype,[{key:"dispose",value:function(){this.mediaPlayer_&&(this.mediaPlayer_.off(c().MediaPlayer.events.ERROR,this.retriggerError_),this.mediaPlayer_.off(c().MediaPlayer.events.MANIFEST_LOADED,this.getDuration_),this.mediaPlayer_.reset()),this.player.dash&&delete this.player.dash,this.ttmlContainer_&&(this.ttmlContainer_.dispose(),this.player.removeChild("TTMLTextTrackDisplay"))}},{key:"duration",value:function(){return this.mediaPlayer_.isDynamic()&&!this.hasFiniteDuration_?1/0:this.mediaPlayer_.duration()}}]),e&&v(t,e),Object.defineProperty(t,"prototype",{writable:!1}),t}();b.hooks_={},u().DashSourceHandler=function(){return{canHandleSource:function(e){var t,r;return(t=JSON.parse(JSON.stringify(t=e)),b.updateSourceData&&(console.warn('updateSourceData has been deprecated. Please switch to using hook("updatesource", callback).'),t=b.updateSourceData(t)),b.hooks("updatesource").forEach(function(e){t=e(t)}),r=m().createElement("video"),!t.keySystemOptions||i().navigator.requestMediaKeySystemAccess||r.msSetMediaKeys)?u().DashSourceHandler.canPlayType(e.type)?"probably":/\.mpd/i.test(e.src)?"maybe":"":""},handleSource:function(e,t,r){return new b(e,t,r)},canPlayType:function(e){return u().DashSourceHandler.canPlayType(e)}}},u().DashSourceHandler.canPlayType=function(e){return/^application\/dash\+xml/i.test(e)?"probably":""},i().MediaSource&&u().getTech("Html5").registerSourceHandler(u().DashSourceHandler(),0),u().Html5DashJS=b;let _=b},431:(e,t,r)=>{var n;void 0===(n=(function(e){!function(e,t,r){var n=function(e){var t,r,n;for(r=1;r<arguments.length;r++)for(n in t=arguments[r])t.hasOwnProperty(n)&&(e[n]=t[n]);return e},i={debug:!1,timeout:5e3,prerollTimeout:100,adLabel:"Advertisement",showControlsForAds:!0,showControlsForJSAds:!0,adsRenderingSettings:{uiElements:[]}},o=r.browser.IS_ANDROID||r.browser.IS_IOS?{click:"touchend",mousedown:"touchstart",mouseup:"touchend",mousemove:"touchmove"}:{click:"click",mousedown:"mousedown",mouseup:"mouseup",mousemove:"mousemove"},u=function(u,l,c){this.player=u;var f=(function(e,t){e.id=this.controlPrefix+t,e.className=this.controlPrefix+t+" "+t}).bind(this),d=function(e){return RegExp("(^|[^A-Za-z-])"+e+"((?![A-Za-z-])|$)","gi")},h=function(e,t){return d(t).test(e.className)?e:e.className=e.className.trim()+" "+t},p=function(e,t){var r=d(t);return r.test(e.className)?e.className=e.className.trim().replace(r,""):e},m=(function(){this.vjsControls=this.player.getChild("controlBar"),this.adContainerDiv=this.vjsControls.el().parentNode.appendChild(t.createElement("div")),f(this.adContainerDiv,"ima-ad-container"),this.adContainerDiv.style.position="absolute",this.adContainerDiv.addEventListener("mouseenter",I,!1),this.adContainerDiv.addEventListener("mouseleave",C,!1),g(),this.adDisplayContainer=new google.ima.AdDisplayContainer(this.adContainerDiv,this.contentPlayer),this.showAdContainer(!this.settings.manual)}).bind(this),g=(function(){this.controlsDiv=t.createElement("div"),f(this.controlsDiv,"ima-controls-div"),this.controlsDiv.style.width="100%",this.countdownDiv=t.createElement("div"),f(this.countdownDiv,"ima-countdown-div"),this.countdownDiv.innerHTML=this.settings.adLabel,this.countdownDiv.style.display=this.showCountdown?"":"none",this.seekBarDiv=t.createElement("div"),f(this.seekBarDiv,"ima-seek-bar-div"),this.seekBarDiv.style.width="100%",this.progressDiv=t.createElement("div"),f(this.progressDiv,"ima-progress-div"),this.playPauseDiv=t.createElement("div"),f(this.playPauseDiv,"ima-play-pause-div"),h(this.playPauseDiv,"ima-playing"),this.playPauseDiv.addEventListener(o.click,P,!1),this.muteDiv=t.createElement("div"),f(this.muteDiv,"ima-mute-div"),h(this.muteDiv,"ima-non-muted"),this.muteDiv.addEventListener(o.click,k,!1),this.sliderDiv=t.createElement("div"),f(this.sliderDiv,"ima-slider-div"),this.sliderDiv.addEventListener(o.mousedown,D,!1),this.sliderLevelDiv=t.createElement("div"),f(this.sliderLevelDiv,"ima-slider-level-div"),this.fullscreenDiv=t.createElement("div"),f(this.fullscreenDiv,"ima-fullscreen-div"),h(this.fullscreenDiv,"ima-non-fullscreen"),this.fullscreenDiv.addEventListener(o.click,j,!1),this.adContainerDiv.appendChild(this.controlsDiv),this.controlsDiv.appendChild(this.seekBarDiv),this.controlsDiv.appendChild(this.playPauseDiv),this.controlsDiv.appendChild(this.muteDiv),this.controlsDiv.appendChild(this.sliderDiv),this.controlsDiv.appendChild(this.fullscreenDiv),this.seekBarDiv.appendChild(this.progressDiv),this.sliderDiv.appendChild(this.sliderLevelDiv),this.settings.vjsControls?(this.initVjsControls(),this.controlsDiv.style.display="none",this.vjsControls.el().appendChild(this.countdownDiv)):this.controlsDiv.appendChild(this.countdownDiv)}).bind(this);this.showAdContainer=(function(e){this.adContainerDiv.style.display=e?"block":"none",this.player.toggleClass("vjs-ima-ad",e)}).bind(this),this.initializeAdDisplayContainer=(function(){this.adDisplayContainerInitialized=!0,this.adDisplayContainer.initialize()}).bind(this),this.requestAds=(function(){this.adDisplayContainerInitialized||this.adDisplayContainer.initialize();var e=new google.ima.AdsRequest;this.settings.adTagUrl?e.adTagUrl=this.settings.adTagUrl:e.adsResponse=this.settings.adsResponse,this.settings.forceNonLinearFullSlot&&(e.forceNonLinearFullSlot=!0),e.linearAdSlotWidth=this.getPlayerWidth(),e.linearAdSlotHeight=this.getPlayerHeight(),e.nonLinearAdSlotWidth=this.settings.nonLinearWidth||this.getPlayerWidth(),e.nonLinearAdSlotHeight=this.settings.nonLinearHeight||this.getPlayerHeight()/3,e.vastLoadTimeout=Math.max(this.settings.prerollTimeout,this.settings.postrollTimeout),this.adsLoader.requestAds(e)}).bind(this);var y=(function(e){this.adsManager=e.getAdsManager(this.contentPlayheadTracker,this.adsRenderingSettings),this.adsManager.addEventListener(google.ima.AdErrorEvent.Type.AD_ERROR,b),this.adsManager.addEventListener(google.ima.AdEvent.Type.AD_BREAK_READY,_),this.adsManager.addEventListener(google.ima.AdEvent.Type.CONTENT_PAUSE_REQUESTED,this.onContentPauseRequested_),this.adsManager.addEventListener(google.ima.AdEvent.Type.CONTENT_RESUME_REQUESTED,this.onContentResumeRequested_),this.adsManager.addEventListener(google.ima.AdEvent.Type.ALL_ADS_COMPLETED,T),this.adsManager.addEventListener(google.ima.AdEvent.Type.LOADED,E),this.adsManager.addEventListener(google.ima.AdEvent.Type.STARTED,S),this.adsManager.addEventListener(google.ima.AdEvent.Type.CLICK,P),this.adsManager.addEventListener(google.ima.AdEvent.Type.COMPLETE,this.onAdComplete_),this.adsManager.addEventListener(google.ima.AdEvent.Type.SKIPPED,this.onAdComplete_),this.adsManager.addEventListener(google.ima.AdEvent.Type.PAUSED,this.onAdPaused_),this.adsManager.addEventListener(google.ima.AdEvent.Type.RESUMED,this.onAdResumed_);var t={load:google.ima.AdEvent.Type.LOADED,"ad-started":google.ima.AdEvent.Type.STARTED,click:google.ima.AdEvent.Type.CLICK,"ad-ended":google.ima.AdEvent.Type.COMPLETE,"ad-skipped":google.ima.AdEvent.Type.SKIPPED,"first-quartile":google.ima.AdEvent.Type.FIRST_QUARTILE,midpoint:google.ima.AdEvent.Type.MIDPOINT,"third-quartile":google.ima.AdEvent.Type.THIRD_QUARTILE,impression:google.ima.AdEvent.Type.IMPRESSION,pause:google.ima.AdEvent.Type.PAUSED,play:google.ima.AdEvent.Type.RESUMED,mute:google.ima.AdEvent.Type.VOLUME_MUTED,"allpods-completed":google.ima.AdEvent.Type.ALL_ADS_COMPLETED};if(Object.keys(t).forEach((function(e){this.adsManager.addEventListener(t[e],(function(){this.player.trigger("ads-"+e)}).bind(this))}).bind(this)),V(this.player.muted()),!this.autoPlayAdBreaks)try{var r=this.getPlayerWidth(),n=this.getPlayerHeight();this.adsManagerDimensions.width=r,this.adsManagerDimensions.height=n,this.adsManager.init(r,n,google.ima.ViewMode.NORMAL),this.adsManager.setVolume(this.player.muted()?0:this.player.volume())}catch(e){b(e)}var i=this.adsManager.getCuePoints(),o=!i.length,u=!1;i.forEach(function(e){e?-1==e&&(u=!0):o=!0}),o||this.player.trigger("nopreroll"),u||this.player.trigger("nopostroll"),i.length&&this.player.trigger("ads-cuepoints",i),this.player.trigger("adsready")}).bind(this);this.start=function(){e.console.log("WARNING: player.ima.start is deprecated. Use player.ima.startFromReadyCallback instead.")},this.startFromReadyCallback=(function(){if(this.autoPlayAdBreaks&&this.adsManager)try{this.adsManager.init(this.getPlayerWidth(),this.getPlayerHeight(),google.ima.ViewMode.NORMAL),this.adsManager.setVolume(this.player.muted()?0:this.player.volume()),this.adsManager.start()}catch(e){b(e)}}).bind(this);var v=(function(e){console.log("AdsLoader error: "+e.getError()),this.showAdContainer(!1),this.adsManager&&this.adsManager.destroy(),this.player.trigger({type:"adserror",data:{AdError:e.getError(),AdErrorEvent:e}})}).bind(this),b=(function(e){var t=void 0!==e.getError?e.getError():e.stack;console.log("Ad error: "+t),this.adsActive=!1,this.adPlaying=!1,this.restoreLoop(),this.vjsControls.show(),this.adsManager.destroy(),this.showAdContainer(!1),this.updateVjsControls(),this.player.trigger({type:"adserror",data:{AdError:t,AdErrorEvent:e}})}).bind(this),_=(function(e){this.adBreakReadyListener(e)}).bind(this);this.playAdBreak=(function(){this.autoPlayAdBreaks||this.adsManager.start()}).bind(this),this.resetLoop=(function(){this.contentLoop=this.contentPlayer&&this.contentPlayer.loop,this.contentLoop&&(this.contentPlayer.loop=!1)}).bind(this),this.restoreLoop=(function(){this.contentLoop&&(this.contentPlayer.loop=!0,this.contentLoop=!1)}).bind(this),this.onContentPauseRequested_=(function(e){this.contentSource=this.player.currentSrc(),this.resetLoop(),this.player.off("contentended",this.localContentEndedListener),this.player.ads.startLinearAdMode(),this.showAdContainer(!0);var t=e.getAd().getContentType();this.settings.vjsControls&&this.settings.showControlsForAds||(this.settings.showControlsForAds&&("application/javascript"!==t||this.settings.showControlsForJSAds)?this.controlsDiv.style.display="block":this.controlsDiv.style.display="none",this.vjsControls.hide()),R(),this.player.pause(),this.adsActive=!0,this.adPlaying=!0,this.updateVjsControls()}).bind(this),this.onContentResumeRequested_=(function(e){this.contentResumeTimer=clearTimeout(this.contentResumeTimer),this.restoreLoop(),this.adsActive=!1,this.adPlaying=!1,this.player.on("contentended",this.localContentEndedListener),(null==this.currentAd||this.currentAd.isLinear())&&this.showAdContainer(!1),this.vjsControls.show(),this.player.ads.endLinearAdMode(),this.countdownDiv.innerHTML="",this.updateVjsControls()}).bind(this);var T=(function(e){if(this.allAdsCompleted=!0,this.showAdContainer(!1),1==this.contentComplete)for(var t in this.contentPlayer.src&&!/^blob:/.test(this.contentPlayer.src)&&this.contentSource&&this.contentPlayer.src!=this.contentSource&&this.player.src(this.contentSource),this.player.trigger(""),this.contentAndAdsEndedListeners)this.contentAndAdsEndedListeners[t]()}).bind(this),E=(function(e){e.getAd().isLinear()||this.player.ended()||(this.player.ads.endLinearAdMode(),this.player.play())}).bind(this),S=(function(e){this.currentAd=e.getAd(),this.currentAd.isLinear()?(this.adTrackingTimer=setInterval(A,250),p(this.adContainerDiv,"bumpable-ima-ad-container")):(h(this.adContainerDiv,"bumpable-ima-ad-container"),this.player.addClass("vjs-ima-non-linear"),this.showAdContainer(!0))}).bind(this);this.onAdComplete_=(function(e){if(this.currentAd.isLinear()){clearInterval(this.adTrackingTimer);var t=this.currentAd.getAdPodInfo();if(t&&t.getAdPosition()<t.getTotalAds())return void this.player.trigger("ads-pod-ended");this.contentResumeTimer=setTimeout((function(){this.onContentResumeRequested_(null)}).bind(this),1e3)}else this.player.removeClass("vjs-ima-non-linear")}).bind(this),this.onAdPaused_=(function(e){O(),this.adPlaying=!1}).bind(this),this.onAdResumed_=(function(e){R(),this.adPlaying=!0}).bind(this);var w=function(e){var t=Math.floor(e/60),r=Math.floor(e%60);return r.toString().length<2&&(r="0"+r),t+":"+r},A=(function(){var e=this.adsManager.getRemainingTime(),t=this.currentAd.getDuration(),r=t-e;r=r>0?r:0;var n,i=!1,o=0;this.currentAd.getAdPodInfo()&&(i=!0,n=this.currentAd.getAdPodInfo().getAdPosition(),o=this.currentAd.getAdPodInfo().getTotalAds());var u=": ";i&&o>1&&(u=" ("+n+" of "+o+"): "),this.countdownDiv.innerHTML=this.settings.adLabel+u+w(e);var l=r/t*100;this.progressDiv.style.width=l+"%",this.updateVjsControls()}).bind(this);this.getPlayerWidth=(function(){return parseInt(getComputedStyle(this.player.el()).width,10)||this.player.width()}).bind(this),this.getPlayerHeight=(function(){return parseInt(getComputedStyle(this.player.el()).height,10)||this.player.height()}).bind(this);var C=(function(){this.controlsDiv.style.height="14px",this.playPauseDiv.style.display="none",this.muteDiv.style.display="none",this.sliderDiv.style.display="none",this.fullscreenDiv.style.display="none"}).bind(this),I=(function(){this.controlsDiv.style.height="37px",this.playPauseDiv.style.display="block",this.muteDiv.style.display="block",this.sliderDiv.style.display="block",this.fullscreenDiv.style.display="block"}).bind(this),O=(function(){h(this.playPauseDiv,"ima-paused"),p(this.playPauseDiv,"ima-playing")}).bind(this),R=(function(){h(this.playPauseDiv,"ima-playing"),p(this.playPauseDiv,"ima-paused")}).bind(this),P=(function(){this.adPlaying?(O(),this.adsManager.pause(),this.adPlaying=!1):(R(),this.adsManager.resume(),this.adPlaying=!0)}).bind(this),k=(function(){V(!this.adMuted)}).bind(this),D=function(){t.addEventListener(o.mouseup,L,!1),t.addEventListener(o.mousemove,N,!1)},N=function(e){x(e)},L=function e(r){x(r),t.removeEventListener(o.mousemove,N),t.removeEventListener(o.mouseup,e)},x=(function(e){var t=((e.changedTouches?e.changedTouches[0].clientX:e.clientX)-this.sliderDiv.getBoundingClientRect().left)/this.sliderDiv.offsetWidth;t*=100,t=Math.min(Math.max(t,0),100),this.sliderLevelDiv.style.width=t+"%",this.player.volume(t/100),this.adsManager.setVolume(t/100),0==this.player.volume()?(h(this.muteDiv,"ima-muted"),p(this.muteDiv,"ima-non-muted"),this.player.muted(!0),this.adMuted=!0):(h(this.muteDiv,"ima-non-muted"),p(this.muteDiv,"ima-muted"),this.player.muted(!1),this.adMuted=!1)}).bind(this),j=(function(){this.player.isFullscreen()?this.player.exitFullscreen():this.player.requestFullscreen()}).bind(this),M=(function(){this.player.isFullscreen()?(h(this.fullscreenDiv,"ima-fullscreen"),p(this.fullscreenDiv,"ima-non-fullscreen"),this.adsManager&&this.adsManager.resize(e.screen.width,e.screen.height,google.ima.ViewMode.FULLSCREEN)):(h(this.fullscreenDiv,"ima-non-fullscreen"),p(this.fullscreenDiv,"ima-fullscreen"),this.adsManager&&this.adsManager.resize(this.getPlayerWidth(),this.getPlayerHeight(),google.ima.ViewMode.NORMAL))}).bind(this),F=(function(){var e=this.player.muted()?0:this.player.volume();this.adsManager&&this.adsManager.setVolume(e),0==e?(this.adMuted=!0,h(this.muteDiv,"ima-muted"),p(this.muteDiv,"ima-non-muted"),this.sliderLevelDiv.style.width="0%"):(this.adMuted=!1,h(this.muteDiv,"ima-non-muted"),p(this.muteDiv,"ima-muted"),this.sliderLevelDiv.style.width=100*e+"%")}).bind(this),B=(function(){this.player.off("loadedmetadata",B),this.player.currentTime(0)}).bind(this),U=(function(){this.player.off("loadedmetadata",U),this.player.currentTime(0),this.player.play()}).bind(this),q=(function(){this.adsActive=!1,this.adPlaying=!1,this.restoreLoop(),this.player.on("contentended",this.localContentEndedListener),this.currentAd&&this.currentAd.isLinear()&&this.showAdContainer(!1),this.vjsControls.show(),this.player.ads.endLinearAdMode(),this.contentPlayheadTracker.currentTime=0,this.countdownDiv.innerHTML="",this.updateVjsControls(),this.adTrackingTimer&&clearInterval(this.adTrackingTimer),this.adsManager&&(this.adsManager.destroy(),this.adsManager=null),this.adsLoader&&!this.contentComplete&&this.adsLoader.contentComplete(),this.contentComplete=!1,this.allAdsCompleted=!1}).bind(this);this.addEventListener=(function(e,t){this.adsManager&&this.adsManager.addEventListener(e,t)}).bind(this),this.getAdsManager=(function(){return this.adsManager}).bind(this),this.setContent=(function(t,r,n){e.console.log("WARNING: player.ima.setContent is deprecated. Use player.ima.setContentWithAdTag instead."),this.setContentWithAdTag(t,r,n)}).bind(this),this.setContentWithAdTag=(function(e,t,r){q(),this.settings.adTagUrl=t||this.settings.adTagUrl,H(e,r)}).bind(this),this.setContentWithAdsResponse=(function(e,t,r){q(),this.settings.adsResponse=t||this.settings.adsResponse,H(e,r)}).bind(this),this.playAd=(function(e){q(),this.settings.adTagUrl=e||this.settings.adTagUrl,this.requestAds()}).bind(this);var H=(function(e,t){this.player.currentSrc()&&(this.player.currentTime(0),this.player.pause()),e&&this.player.src(e),t?this.player.on("loadedmetadata",U):this.player.on("loadedmetadata",B)}).bind(this),V=(function(e){e?(h(this.muteDiv,"ima-muted"),p(this.muteDiv,"ima-non-muted"),this.adsManager.setVolume(0),this.player.muted(!0),this.adMuted=!0,this.sliderLevelDiv.style.width="0%"):(h(this.muteDiv,"ima-non-muted"),p(this.muteDiv,"ima-muted"),this.adsManager.setVolume(this.player.volume()),this.player.muted(!1),this.adMuted=!1,this.sliderLevelDiv.style.width=100*this.player.volume()+"%")}).bind(this);this.addContentEndedListener=(function(e){this.contentEndedListeners.push(e)}).bind(this),this.addContentAndAdsEndedListener=(function(e){this.contentAndAdsEndedListeners.push(e)}).bind(this),this.setAdBreakReadyListener=(function(e){this.adBreakReadyListener=e}).bind(this),this.pauseAd=(function(){this.adsActive&&this.adPlaying&&(O(),this.adsManager.pause(),this.adPlaying=!1)}).bind(this),this.resumeAd=(function(){this.adsActive&&!this.adPlaying&&(R(),this.adsManager.resume(),this.adPlaying=!0)}).bind(this);var G=(function(){this.updateTimeIntervalHandle=setInterval(z,this.seekCheckInterval),this.seekCheckIntervalHandle=setInterval(K,this.seekCheckInterval),this.resizeCheckIntervalHandle=setInterval(W,this.resizeCheckInterval)}).bind(this),Y=(function(){var e=this.player.currentTime();e&&"content-playback"==this.player.ads.state&&(e<1&&(e=0),this.contentPlayheadTracker.startTime=e,this.player.off("timeupdate",Y))}).bind(this),z=(function(){"content-playback"==this.player.ads.state&&!this.contentPlayheadTracker.seeking&&this.contentPlayheadTracker.startTime>=0&&(this.contentPlayheadTracker.currentTime=this.player.currentTime()-this.contentPlayheadTracker.startTime)}).bind(this),K=(function(){"content-playback"==this.player.ads.state&&(Math.abs(1e3*(this.player.currentTime()-this.contentPlayheadTracker.previousTime))>this.seekCheckInterval+this.seekThreshold?this.contentPlayheadTracker.seeking=!0:this.contentPlayheadTracker.seeking=!1,this.contentPlayheadTracker.previousTime=this.player.currentTime())}).bind(this),W=(function(){var e=this.getPlayerWidth(),t=this.getPlayerHeight();this.adsManager&&(e!=this.adsManagerDimensions.width||t!=this.adsManagerDimensions.height)&&(this.adsManagerDimensions.width=e,this.adsManagerDimensions.height=t,this.adsManager.resize(e,t,google.ima.ViewMode.NORMAL))}).bind(this);if(this.setShowCountdown=(function(e){this.showCountdown=e,this.countdownDiv.style.display=this.showCountdown?"":"none"}).bind(this),this.VERSION="0.2.0",this.settings,this.controlPrefix,this.contentPlayer,this.showCountdown,this.autoPlayAdBreaks,this.vjsControls,this.adContainerDiv,this.controlsDiv,this.countdownDiv,this.seekBarDiv,this.progressDiv,this.playPauseDiv,this.muteDiv,this.sliderDiv,this.sliderLevelDiv,this.fullscreenDiv,this.adDisplayContainer,this.adDisplayContainerInitialized=!1,this.adsLoader,this.adsManager,this.adsRenderingSettings=null,this.adTagUrl,this.adsResponse,this.currentAd,this.contentTrackingTimer,this.adTrackingTimer,this.adsActive=!1,this.adPlaying=!1,this.adMuted=!1,this.contentComplete=!1,this.allAdsCompleted=!1,this.updateTimeIntervalHandle,this.seekCheckIntervalHandle,this.seekCheckInterval=1e3,this.resizeCheckIntervalHandle,this.resizeCheckInterval=250,this.seekThreshold=100,this.contentPlayheadTracker={currentTime:0,previousTime:0,seeking:!1,duration:0,startTime:-1},this.adPlayheadTracker={currentTime:0,duration:0,isPod:!1,adPosition:0,totalAds:0},this.adsManagerDimensions={width:0,height:0},this.contentEndedListeners=[],this.contentAndAdsEndedListeners=[],this.adBreakReadyListener=function(){console.log("Please set adBreakReadyListener")},this.contentSource="",this.localContentEndedListener=(function(){for(var e in this.adsLoader&&!this.contentComplete&&(this.adsLoader.contentComplete(),this.contentComplete=!0),this.contentEndedListeners)this.contentEndedListeners[e]();if(this.allAdsCompleted)for(var e in this.contentAndAdsEndedListeners)this.contentAndAdsEndedListeners[e]();clearInterval(this.updateTimeIntervalHandle),clearInterval(this.seekCheckIntervalHandle),clearInterval(this.resizeCheckIntervalHandle),this.player.el()&&this.player.one("play",G)}).bind(this),this.playerDisposedListener=(function(){this.contentEndedListeners,this.contentAndAdsEndedListeners=[],this.contentComplete=!0,this.player.off("contentended",this.localContentEndedListener),this.player.off("timeupdate",Y),this.player.ads.adTimeoutTimeout&&clearTimeout(this.player.ads.adTimeoutTimeout);var e=[this.updateTimeIntervalHandle,this.seekCheckIntervalHandle,this.adTrackingTimer,this.resizeCheckIntervalHandle];for(var t in e){var r=e[t];r&&clearInterval(r)}this.adsManager&&(this.adsManager.destroy(),this.adsManager=null)}).bind(this),this.initVjsControls=(function(){var e=this,t=function(t,r,n,i,o){var u=t.prototype[n];return r[n]=function(){return e.adsActive||o?i&&i.apply(this,arguments):u&&u.apply(this,arguments)}},n=function(e,r,n,i,o,u,l){var c=e.prototype[o],f=t(e,r,o,u);n?(r.off(n,i,c),r.on(n,i,f)):(r.off(i,c),r.on(i,f))},i=r.getComponent("PlayToggle"),o=this.vjsControls.playToggle;n(i,o,null,["tap","click"],"handleClick",function(){P(),e.adPlaying?this.handlePlay():this.handlePause()}),t(i,o,"update",function(){var t=e.adsActive?!e.adPlaying:u.paused();this.toggleClass("vjs-play-control-ad",e.adsActive),this.toggleClass("vjs-paused",t),this.toggleClass("vjs-playing",!t);var r=t?"Play":"Pause";r!=this.controlText()&&this.controlText(r)},!0),n(i,o,u,"play","handlePlay",function(){this.update()}),n(i,o,u,"pause","handlePause",function(){this.update()});var l=r.getComponent("SeekBar"),c=r.getComponent("DvrSeekBar"),f=this.vjsControls.progressControl.seekBar,d=function(){var t=e.currentAd&&e.currentAd.getDuration();return!t||t<0?0:Math.max(t-e.adsManager.getRemainingTime(),0)/t};t(l,f,"getPercent",d),c&&t(c,f,"getPercent",d),n(l,f,null,["mousedown","touchstart"],"handleMouseDown",null),n(l,f,null,"focus","handleFocus",null),n(r.getComponent("DurationDisplay"),this.vjsControls.durationDisplay,u,["timeupdate","loadedmetadata"],"updateContent",function(){var t=e.currentAd&&e.currentAd.getDuration();t&&t!=this.duration_&&(this.duration_=t,this.contentEl_.innerHTML='<span class="vjs-control-text">'+this.localize("Duration Time")+"</span> "+w(t))}),n(r.getComponent("CurrentTimeDisplay"),this.vjsControls.currentTimeDisplay,u,["timeupdate","loadedmetadata"],"updateContent",function(){var t=e.currentAd&&e.currentAd.getDuration();if(t){var r=w(t-e.adsManager.getRemainingTime());r!==this.formattedTime_&&(this.formattedTime_=r,this.contentEl_.innerHTML='<span class="vjs-control-text">'+this.localize("Current Time")+"</span> "+r)}})}).bind(this),this.updateVjsControls=(function(){if(this.settings.vjsControls){this.player.toggleClass("vjs-ad-paused",this.adsActive&&!this.adPlaying);var e=this.vjsControls;e.playToggle.update(),e.progressControl.seekBar.update(),e.durationDisplay.updateContent(),e.currentTimeDisplay.updateContent();var t=this.currentAd&&this.currentAd.getDuration(),r=!this.adsActive||t&&t>=0?"":"none";e.durationDisplay.el().style.display=r,e.currentTimeDisplay.el().style.display=r,e.timeDivider.el().style.display=r}}).bind(this),this.proxyClickEvents=(function(){var n=r&&r.browser&&r.browser.IS_ANDROID||r.browser.IS_IOS?["touchstart","touchend"]:["click","dblclick","mousedown","mouseup"],i=this.player,o=i.el(),u=this;n.forEach(function(r){o.addEventListener(r,function(r){var n=u.currentAd,o=r.target;if(n&&!n.isLinear()&&"IFRAME"==o.nodeName&&!r.isTrusted){var l=n.getWidth()||n.getVastMediaWidth(),c=n.getHeight()||n.getVastMediaHeight(),f=(y=o.getBoundingClientRect(),v=t.documentElement,b=t.body,_=v.clientLeft||b.clientLeft||0,T=e.pageXOffset||b.scrollLeft,E=y.left+T-_,S=v.clientTop||b.clientTop||0,w=e.pageYOffset||b.scrollTop,{left:E,top:y.top+w-S,width:y.width,height:y.height}),d=r.touches&&r.touches[0],h=d?d.pageX:r.clientX,p=d?d.pageY:r.clientY,m=f.left+f.width-(f.width-l)/2,g=f.top+f.height-c-4;if(!(h<m&&h>m-40&&p>g&&p<g+30||h>f.left+f.width/2-15&&h<f.left+f.width/2+15&&p>f.top+f.height-15)){var y,v,b,_,T,E,S,w,A,C={};for(var I in r)C[I]=r[I];C.bubbles=!1;try{A=new r.constructor(r.type,C)}catch(e){(A=t.createEvent("MouseEvent")).initMouseEvent(r.type,C.bubbles,C.cancelable,C.view,C.detail,C.screenX,C.screenY,C.clientX,C.clientY,C.ctrlKey,C.altKey,C.shiftKey,C.metaKey,C.button,null)}A.stopPropagation(),i.tech_.trigger(A)}}})})}).bind(this),this.settings=n({},i,l||{}),this.settings.adLabel=this.player.localize(this.settings.adLabel),this.settings.id){this.controlPrefix=this.settings.id+"_",this.contentPlayer=this.player.$(".vjs-tech"),this.showCountdown=!0,!1===this.settings.showCountdown&&(this.showCountdown=!1),this.autoPlayAdBreaks=!0,!1===this.settings.autoPlayAdBreaks&&(this.autoPlayAdBreaks=!1);var X=n({},{debug:this.settings.debug,timeout:this.settings.timeout,prerollTimeout:this.settings.prerollTimeout,postrollTimeout:this.settings.postrollTimeout},l.contribAdsSettings||{});if(u.ads(X),u.one("play",G),u.on("contentended",this.localContentEndedListener),u.on("dispose",this.playerDisposedListener),u.on("timeupdate",Y),this.adsRenderingSettings=new google.ima.AdsRenderingSettings,this.adsRenderingSettings.restoreCustomPlaybackStateOnAdBreakComplete=!0,this.settings.adsRenderingSettings)for(var Q in this.settings.adsRenderingSettings)this.adsRenderingSettings[Q]=this.settings.adsRenderingSettings[Q];this.settings.locale&&google.ima.settings.setLocale(this.settings.locale),m(),this.adsLoader=new google.ima.AdsLoader(this.adDisplayContainer),this.adsLoader.getSettings().setVpaidMode(google.ima.ImaSdkSettings.VpaidMode.ENABLED),0==this.settings.vpaidAllowed&&this.adsLoader.getSettings().setVpaidMode(google.ima.ImaSdkSettings.VpaidMode.DISABLED),this.settings.vpaidMode&&this.adsLoader.getSettings().setVpaidMode(this.settings.vpaidMode),this.settings.locale&&this.adsLoader.getSettings().setLocale(this.settings.locale),this.settings.numRedirects&&this.adsLoader.getSettings().setNumRedirects(this.settings.numRedirects),this.adsLoader.getSettings().setPlayerType("videojs-ima"),this.adsLoader.getSettings().setPlayerVersion(this.VERSION),this.adsLoader.getSettings().setAutoPlayAdBreaks(this.autoPlayAdBreaks),this.adsLoader.addEventListener(google.ima.AdsManagerLoadedEvent.Type.ADS_MANAGER_LOADED,y,!1),this.adsLoader.addEventListener(google.ima.AdErrorEvent.Type.AD_ERROR,v,!1),c||(c=this.startFromReadyCallback),u.on("readyforpreroll",c),u.ready(function(){u.on("fullscreenchange",M),u.on("volumechange",F)}),this.proxyClickEvents()}else e.console.log("Error: must provide id of video.js div")};r.registerPlugin("ima",function(e,t){this.ima=new u(this,e,t)})}(window,document,e.default||e)}).apply(t,[r(924),r(833)]))||(e.exports=n)},162:function(e,t,r){var n;n=void 0!==r.g?r.g:this,e.exports=function(e){if(e.CSS&&e.CSS.escape)return e.CSS.escape;var t=function(e){if(0==arguments.length)throw TypeError("`CSS.escape` requires an argument.");for(var t,r=String(e),n=r.length,i=-1,o="",u=r.charCodeAt(0);++i<n;)0!=(t=r.charCodeAt(i))?o+=t>=1&&t<=31||127==t||0==i&&t>=48&&t<=57||1==i&&t>=48&&t<=57&&45==u?"\\"+t.toString(16)+" ":(0!=i||1!=n||45!=t)&&(t>=128||45==t||95==t||t>=48&&t<=57||t>=65&&t<=90||t>=97&&t<=122)?r.charAt(i):"\\"+r.charAt(i):o+="�";return o};return e.CSS||(e.CSS={}),e.CSS.escape=t,t}(n)},822:e=>{window,e.exports=function(e){var t={};function r(n){if(t[n])return t[n].exports;var i=t[n]={i:n,l:!1,exports:{}};return e[n].call(i.exports,i,i.exports,r),i.l=!0,i.exports}return r.m=e,r.c=t,r.d=function(e,t,n){r.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},r.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},r.t=function(e,t){if(1&t&&(e=r(e)),8&t||4&t&&"object"==typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(r.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var i in e)r.d(n,i,(function(t){return e[t]}).bind(null,i));return n},r.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return r.d(t,"a",t),t},r.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},r.p="/dist/",r(r.s="./index.js")}({"./externals/base64.js":function(e,t,r){var n,i,o,u,l,c=function(e){for(var t=[],r=0;r<e.length;++r){var n=e.charCodeAt(r);n<128?t.push(n):(n<2048?t.push(192|n>>6):(n<65536?t.push(224|n>>12):(t.push(240|n>>18),t.push(128|63&n>>12)),t.push(128|63&n>>6)),t.push(128|63&n))}return t},f=function(e){for(var t=[],r=0;r<e.length;){var n=e[r++];n<128||(n=n<224?(31&n)<<6|63&e[r++]:n<240?(15&n)<<12|(63&e[r++])<<6|63&e[r++]:(7&n)<<18|(63&e[r++])<<12|(63&e[r++])<<6|63&e[r++]),t.push(String.fromCharCode(n))}return t.join("")},d={};n="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",i=function(e){for(var t=0,r=[],i=0|e.length/3;0<i--;){var o=(e[t]<<16)+(e[t+1]<<8)+e[t+2];t+=3,r.push(n.charAt(63&o>>18)),r.push(n.charAt(63&o>>12)),r.push(n.charAt(63&o>>6)),r.push(n.charAt(63&o))}return 2==e.length-t?(o=(e[t]<<16)+(e[t+1]<<8),r.push(n.charAt(63&o>>18)),r.push(n.charAt(63&o>>12)),r.push(n.charAt(63&o>>6)),r.push("=")):1==e.length-t&&(o=e[t]<<16,r.push(n.charAt(63&o>>18)),r.push(n.charAt(63&o>>12)),r.push("==")),r.join("")},o=function(){for(var e=[],t=0;t<n.length;++t)e[n.charCodeAt(t)]=t;return e["=".charCodeAt(0)]=0,e}(),u=function(e){for(var t=0,r=[],n=0|e.length/4;0<n--;){var i=(o[e.charCodeAt(t)]<<18)+(o[e.charCodeAt(t+1)]<<12)+(o[e.charCodeAt(t+2)]<<6)+o[e.charCodeAt(t+3)];r.push(255&i>>16),r.push(255&i>>8),r.push(255&i),t+=4}return r&&("="==e.charAt(t-2)?(r.pop(),r.pop()):"="==e.charAt(t-1)&&r.pop()),r},l={encode:function(e){for(var t=[],r=0;r<e.length;++r)t.push(e.charCodeAt(r));return t},decode:function(e){for(var t=0;t<s.length;++t)a[t]=String.fromCharCode(a[t]);return a.join("")}},d.decodeArray=function(e){var t=u(e);return new Uint8Array(t)},d.encodeASCII=function(e){return i(l.encode(e))},d.decodeASCII=function(e){var t=u(e);return l.decode(t)},d.encode=function(e){return i(c(e))},d.decode=function(e){return f(u(e))},t.decode=d.decode,t.decodeArray=d.decodeArray,t.encode=d.encode,t.encodeASCII=d.encodeASCII},"./externals/cea608-parser.js":function(e,t,r){var n,i,o,u,l,c,f,d,h,p,m,g,y,v,b;n={42:225,92:233,94:237,95:243,96:250,123:231,124:247,125:209,126:241,127:9608,128:174,129:176,130:189,131:191,132:8482,133:162,134:163,135:9834,136:224,137:32,138:232,139:226,140:234,141:238,142:244,143:251,144:193,145:201,146:211,147:218,148:220,149:252,150:8216,151:161,152:42,153:8217,154:9473,155:169,156:8480,157:8226,158:8220,159:8221,160:192,161:194,162:199,163:200,164:202,165:203,166:235,167:206,168:207,169:239,170:212,171:217,172:249,173:219,174:171,175:187,176:195,177:227,178:205,179:204,180:236,181:210,182:242,183:213,184:245,185:123,186:125,187:92,188:94,189:95,190:124,191:8764,192:196,193:228,194:214,195:246,196:223,197:165,198:164,199:9475,200:197,201:229,202:216,203:248,204:9487,205:9491,206:9495,207:9499},i=function(e){var t=e;return n.hasOwnProperty(e)&&(t=n[e]),String.fromCharCode(t)},o={17:1,18:3,21:5,22:7,23:9,16:11,19:12,20:14},u={17:2,18:4,21:6,22:8,23:10,19:13,20:15},l={25:1,26:3,29:5,30:7,31:9,24:11,27:12,28:14},c={25:2,26:4,29:6,30:8,31:10,27:13,28:15},f=["white","green","blue","cyan","red","yellow","magenta","black","transparent"],d={verboseFilter:{DATA:3,DEBUG:3,INFO:2,WARNING:2,TEXT:1,ERROR:0},time:null,verboseLevel:0,setTime:function(e){this.time=e},log:function(e,t){var r=this.verboseFilter[e];this.verboseLevel>=r&&console.log(this.time+" ["+e+"] "+t)}},h=function(e){for(var t=[],r=0;r<e.length;r++)t.push(e[r].toString(16));return t},(p=function(e,t,r,n,i){this.foreground=e||"white",this.underline=t||!1,this.italics=r||!1,this.background=n||"black",this.flash=i||!1}).prototype={reset:function(){this.foreground="white",this.underline=!1,this.italics=!1,this.background="black",this.flash=!1},setStyles:function(e){for(var t=["foreground","underline","italics","background","flash"],r=0;r<t.length;r++){var n=t[r];e.hasOwnProperty(n)&&(this[n]=e[n])}},isDefault:function(){return"white"===this.foreground&&!this.underline&&!this.italics&&"black"===this.background&&!this.flash},equals:function(e){return this.foreground===e.foreground&&this.underline===e.underline&&this.italics===e.italics&&this.background===e.background&&this.flash===e.flash},copy:function(e){this.foreground=e.foreground,this.underline=e.underline,this.italics=e.italics,this.background=e.background,this.flash=e.flash},toString:function(){return"color="+this.foreground+", underline="+this.underline+", italics="+this.italics+", background="+this.background+", flash="+this.flash}},(m=function(e,t,r,n,i,o){this.uchar=e||" ",this.penState=new p(t,r,n,i,o)}).prototype={reset:function(){this.uchar=" ",this.penState.reset()},setChar:function(e,t){this.uchar=e,this.penState.copy(t)},setPenState:function(e){this.penState.copy(e)},equals:function(e){return this.uchar===e.uchar&&this.penState.equals(e.penState)},copy:function(e){this.uchar=e.uchar,this.penState.copy(e.penState)},isEmpty:function(){return" "===this.uchar&&this.penState.isDefault()}},(g=function(){this.chars=[];for(var e=0;e<32;e++)this.chars.push(new m);this.pos=0,this.currPenState=new p}).prototype={equals:function(e){for(var t=!0,r=0;r<32;r++)if(!this.chars[r].equals(e.chars[r])){t=!1;break}return t},copy:function(e){for(var t=0;t<32;t++)this.chars[t].copy(e.chars[t])},isEmpty:function(){for(var e=!0,t=0;t<32;t++)if(!this.chars[t].isEmpty()){e=!1;break}return e},setCursor:function(e){this.pos!==e&&(this.pos=e),this.pos<0?(d.log("ERROR","Negative cursor position "+this.pos),this.pos=0):this.pos>32&&(d.log("ERROR","Too large cursor position "+this.pos),this.pos=32)},moveCursor:function(e){var t=this.pos+e;if(e>1)for(var r=this.pos+1;r<t+1;r++)this.chars[r].setPenState(this.currPenState);this.setCursor(t)},backSpace:function(){this.moveCursor(-1),this.chars[this.pos].setChar(" ",this.currPenState)},insertChar:function(e){e>=144&&this.backSpace();var t=i(e);this.pos>=32?d.log("ERROR","Cannot insert "+e.toString(16)+" ("+t+") at position "+this.pos+". Skipping it!"):(this.chars[this.pos].setChar(t,this.currPenState),this.moveCursor(1))},clearFromPos:function(e){var t;for(t=e;t<32;t++)this.chars[t].reset()},clear:function(){this.clearFromPos(0),this.pos=0,this.currPenState.reset()},clearToEndOfRow:function(){this.clearFromPos(this.pos)},getTextString:function(){for(var e=[],t=!0,r=0;r<32;r++){var n=this.chars[r].uchar;" "!==n&&(t=!1),e.push(n)}return t?"":e.join("")},setPenStyles:function(e){this.currPenState.setStyles(e),this.chars[this.pos].setPenState(this.currPenState)}},(y=function(){this.rows=[];for(var e=0;e<15;e++)this.rows.push(new g);this.currRow=14,this.nrRollUpRows=null,this.reset()}).prototype={reset:function(){for(var e=0;e<15;e++)this.rows[e].clear();this.currRow=14},equals:function(e){for(var t=!0,r=0;r<15;r++)if(!this.rows[r].equals(e.rows[r])){t=!1;break}return t},copy:function(e){for(var t=0;t<15;t++)this.rows[t].copy(e.rows[t])},isEmpty:function(){for(var e=!0,t=0;t<15;t++)if(!this.rows[t].isEmpty()){e=!1;break}return e},backSpace:function(){this.rows[this.currRow].backSpace()},clearToEndOfRow:function(){this.rows[this.currRow].clearToEndOfRow()},insertChar:function(e){this.rows[this.currRow].insertChar(e)},setPen:function(e){this.rows[this.currRow].setPenStyles(e)},moveCursor:function(e){this.rows[this.currRow].moveCursor(e)},setCursor:function(e){d.log("INFO","setCursor: "+e),this.rows[this.currRow].setCursor(e)},setPAC:function(e){d.log("INFO","pacData = "+JSON.stringify(e));var t=e.row-1;this.nrRollUpRows&&t<this.nrRollUpRows-1&&(t=this.nrRollUpRows-1),this.currRow=t;var r=this.rows[this.currRow];if(null!==e.indent){var n=Math.max(e.indent-1,0);r.setCursor(e.indent),e.color=r.chars[n].penState.foreground}var i={foreground:e.color,underline:e.underline,italics:e.italics,background:"black",flash:!1};this.setPen(i)},setBkgData:function(e){d.log("INFO","bkgData = "+JSON.stringify(e)),this.backSpace(),this.setPen(e),this.insertChar(32)},setRollUpRows:function(e){this.nrRollUpRows=e},rollUp:function(){if(null!==this.nrRollUpRows){d.log("TEXT",this.getDisplayText());var e=this.currRow+1-this.nrRollUpRows,t=this.rows.splice(e,1)[0];t.clear(),this.rows.splice(this.currRow,0,t),d.log("INFO","Rolling up")}else d.log("DEBUG","roll_up but nrRollUpRows not set yet")},getDisplayText:function(e){e=e||!1;for(var t=[],r="",n=-1,i=0;i<15;i++){var o=this.rows[i].getTextString();o&&(n=i+1,e?t.push("Row "+n+': "'+o+'"'):t.push(o.trim()))}return t.length>0&&(r=e?"["+t.join(" | ")+"]":t.join("\n")),r},getTextAndFormat:function(){return this.rows}},(v=function(e,t){this.chNr=e,this.outputFilter=t,this.mode=null,this.verbose=0,this.displayedMemory=new y,this.nonDisplayedMemory=new y,this.lastOutputScreen=new y,this.currRollUpRow=this.displayedMemory.rows[14],this.writeScreen=this.displayedMemory,this.mode=null,this.cueStartTime=null}).prototype={modes:["MODE_ROLL-UP","MODE_POP-ON","MODE_PAINT-ON","MODE_TEXT"],reset:function(){this.mode=null,this.displayedMemory.reset(),this.nonDisplayedMemory.reset(),this.lastOutputScreen.reset(),this.currRollUpRow=this.displayedMemory.rows[14],this.writeScreen=this.displayedMemory,this.mode=null,this.cueStartTime=null,this.lastCueEndTime=null},getHandler:function(){return this.outputFilter},setHandler:function(e){this.outputFilter=e},setPAC:function(e){this.writeScreen.setPAC(e)},setBkgData:function(e){this.writeScreen.setBkgData(e)},setMode:function(e){e!==this.mode&&(this.mode=e,d.log("INFO","MODE="+e),"MODE_POP-ON"==this.mode?this.writeScreen=this.nonDisplayedMemory:(this.writeScreen=this.displayedMemory,this.writeScreen.reset()),"MODE_ROLL-UP"!==this.mode&&(this.displayedMemory.nrRollUpRows=null,this.nonDisplayedMemory.nrRollUpRows=null),this.mode=e)},insertChars:function(e){for(var t=0;t<e.length;t++)this.writeScreen.insertChar(e[t]);var r=this.writeScreen===this.displayedMemory?"DISP":"NON_DISP";d.log("INFO",r+": "+this.writeScreen.getDisplayText(!0)),"MODE_PAINT-ON"!==this.mode&&"MODE_ROLL-UP"!==this.mode||(d.log("TEXT","DISPLAYED: "+this.displayedMemory.getDisplayText(!0)),this.outputDataUpdate())},cc_RCL:function(){d.log("INFO","RCL - Resume Caption Loading"),this.setMode("MODE_POP-ON")},cc_BS:function(){d.log("INFO","BS - BackSpace"),"MODE_TEXT"!==this.mode&&(this.writeScreen.backSpace(),this.writeScreen===this.displayedMemory&&this.outputDataUpdate())},cc_AOF:function(){},cc_AON:function(){},cc_DER:function(){d.log("INFO","DER- Delete to End of Row"),this.writeScreen.clearToEndOfRow(),this.outputDataUpdate()},cc_RU:function(e){d.log("INFO","RU("+e+") - Roll Up"),this.writeScreen=this.displayedMemory,this.setMode("MODE_ROLL-UP"),this.writeScreen.setRollUpRows(e)},cc_FON:function(){d.log("INFO","FON - Flash On"),this.writeScreen.setPen({flash:!0})},cc_RDC:function(){d.log("INFO","RDC - Resume Direct Captioning"),this.setMode("MODE_PAINT-ON")},cc_TR:function(){d.log("INFO","TR"),this.setMode("MODE_TEXT")},cc_RTD:function(){d.log("INFO","RTD"),this.setMode("MODE_TEXT")},cc_EDM:function(){d.log("INFO","EDM - Erase Displayed Memory"),this.displayedMemory.reset(),this.outputDataUpdate()},cc_CR:function(){d.log("CR - Carriage Return"),this.writeScreen.rollUp(),this.outputDataUpdate()},cc_ENM:function(){d.log("INFO","ENM - Erase Non-displayed Memory"),this.nonDisplayedMemory.reset()},cc_EOC:function(){if(d.log("INFO","EOC - End Of Caption"),"MODE_POP-ON"===this.mode){var e=this.displayedMemory;this.displayedMemory=this.nonDisplayedMemory,this.nonDisplayedMemory=e,this.writeScreen=this.nonDisplayedMemory,d.log("TEXT","DISP: "+this.displayedMemory.getDisplayText())}this.outputDataUpdate()},cc_TO:function(e){d.log("INFO","TO("+e+") - Tab Offset"),this.writeScreen.moveCursor(e)},cc_MIDROW:function(e){var t={flash:!1};if(t.underline=e%2==1,t.italics=e>=46,t.italics)t.foreground="white";else{var r=Math.floor(e/2)-16;t.foreground=["white","green","blue","cyan","red","yellow","magenta"][r]}d.log("INFO","MIDROW: "+JSON.stringify(t)),this.writeScreen.setPen(t)},outputDataUpdate:function(){var e=d.time;null!==e&&this.outputFilter&&(this.outputFilter.updateData&&this.outputFilter.updateData(e,this.displayedMemory),null!==this.cueStartTime||this.displayedMemory.isEmpty()?this.displayedMemory.equals(this.lastOutputScreen)||(this.outputFilter.newCue&&this.outputFilter.newCue(this.cueStartTime,e,this.lastOutputScreen),this.cueStartTime=this.displayedMemory.isEmpty()?null:e):this.cueStartTime=e,this.lastOutputScreen.copy(this.displayedMemory))},cueSplitAtTime:function(e){this.outputFilter&&(this.displayedMemory.isEmpty()||(this.outputFilter.newCue&&this.outputFilter.newCue(this.cueStartTime,e,this.displayedMemory),this.cueStartTime=e))}},(b=function(e,t,r){this.field=e||1,this.outputs=[t,r],this.channels=[new v(1,t),new v(2,r)],this.currChNr=-1,this.lastCmdA=null,this.lastCmdB=null,this.bufferedData=[],this.startTime=null,this.lastTime=null,this.dataCounters={padding:0,char:0,cmd:0,other:0}}).prototype={getHandler:function(e){return this.channels[e].getHandler()},setHandler:function(e,t){this.channels[e].setHandler(t)},addData:function(e,t){var r,n,i,o=!1;this.lastTime=e,d.setTime(e);for(var u=0;u<t.length;u+=2)n=127&t[u],i=127&t[u+1],n>=16&&n<=31&&n===this.lastCmdA&&i===this.lastCmdB?(this.lastCmdA=null,this.lastCmdB=null,d.log("DEBUG","Repeated command ("+h([n,i])+") is dropped")):0!==n||0!==i?(d.log("DATA","["+h([t[u],t[u+1]])+"] -> ("+h([n,i])+")"),(r=this.parseCmd(n,i))||(r=this.parseMidrow(n,i)),r||(r=this.parsePAC(n,i)),r||(r=this.parseBackgroundAttributes(n,i)),r||(o=this.parseChars(n,i))&&(this.currChNr&&this.currChNr>=0?this.channels[this.currChNr-1].insertChars(o):d.log("WARNING","No channel found yet. TEXT-MODE?")),r?this.dataCounters.cmd+=2:o?this.dataCounters.char+=2:(this.dataCounters.other+=2,d.log("WARNING","Couldn't parse cleaned data "+h([n,i])+" orig: "+h([t[u],t[u+1]])))):this.dataCounters.padding+=2},parseCmd:function(e,t){if(!((20===e||21===e||28===e||29===e)&&32<=t&&t<=47||(23===e||31===e)&&33<=t&&t<=35))return!1;r=20===e||21===e||23===e?1:2;var r,n=this.channels[r-1];return 20===e||21===e||28===e||29===e?32===t?n.cc_RCL():33===t?n.cc_BS():34===t?n.cc_AOF():35===t?n.cc_AON():36===t?n.cc_DER():37===t?n.cc_RU(2):38===t?n.cc_RU(3):39===t?n.cc_RU(4):40===t?n.cc_FON():41===t?n.cc_RDC():42===t?n.cc_TR():43===t?n.cc_RTD():44===t?n.cc_EDM():45===t?n.cc_CR():46===t?n.cc_ENM():47===t&&n.cc_EOC():n.cc_TO(t-32),this.lastCmdA=e,this.lastCmdB=t,this.currChNr=r,!0},parseMidrow:function(e,t){var r=null;if((17===e||25===e)&&32<=t&&t<=47){if((r=17===e?1:2)!==this.currChNr)return d.log("ERROR","Mismatch channel in midrow parsing"),!1;var n=this.channels[r-1];return n.insertChars([32]),n.cc_MIDROW(t),d.log("DEBUG","MIDROW ("+h([e,t])+")"),this.lastCmdA=e,this.lastCmdB=t,!0}return!1},parsePAC:function(e,t){if(!((17<=e&&e<=23||25<=e&&e<=31)&&64<=t&&t<=127||(16===e||24===e)&&64<=t&&t<=95))return!1;r=e<=23?1:2,n=64<=t&&t<=95?1===r?o[e]:l[e]:1===r?u[e]:c[e];var r,n,i=this.interpretPAC(n,t);return this.channels[r-1].setPAC(i),this.lastCmdA=e,this.lastCmdB=t,this.currChNr=r,!0},interpretPAC:function(e,t){var r,n={color:null,italics:!1,indent:null,underline:!1,row:e};return r=t>95?t-96:t-64,n.underline=1==(1&r),r<=13?n.color=["white","green","blue","cyan","red","yellow","magenta","white"][Math.floor(r/2)]:r<=15?(n.italics=!0,n.color="white"):n.indent=4*Math.floor((r-16)/2),n},parseChars:function(e,t){var r,n=null,o=null,u=null;if((e>=25?(n=2,u=e-8):(n=1,u=e),17<=u&&u<=19)?(r=17===u?t+80:18===u?t+112:t+144,d.log("INFO","Special char '"+i(r)+"' in channel "+n),o=[r],this.lastCmdA=e,this.lastCmdB=t):32<=e&&e<=127&&(o=0===t?[e]:[e,t],this.lastCmdA=null,this.lastCmdB=null),o){var l=h(o);d.log("DEBUG","Char codes =  "+l.join(","))}return o},parseBackgroundAttributes:function(e,t){var r,n;return((16===e||24===e)&&32<=t&&t<=47||(23===e||31===e)&&45<=t&&t<=47)&&(r={},16===e||24===e?(n=Math.floor((t-32)/2),r.background=f[n],t%2==1&&(r.background=r.background+"_semi")):45===t?r.background="transparent":(r.foreground="black",47===t&&(r.underline=!0)),this.channels[(e<24?1:2)-1].setBkgData(r),this.lastCmdA=e,this.lastCmdB=t,!0)},reset:function(){for(var e=0;e<this.channels.length;e++)this.channels[e]&&this.channels[e].reset();this.lastCmdA=null,this.lastCmdB=null},cueSplitAtTime:function(e){for(var t=0;t<this.channels.length;t++)this.channels[t]&&this.channels[t].cueSplitAtTime(e)}},t.logger=d,t.PenState=p,t.CaptionScreen=y,t.Cea608Parser=b,t.findCea608Nalus=function(e,t,r){for(var n=0,i=t,o=[];i<t+r;){if(n=e.getUint32(i),6==(31&e.getUint8(i+4)))for(var u=i+5,l=-1;u<i+4+n-1;){l=0;for(var c=255;255===c;)l+=c=e.getUint8(u),u++;var f=0;for(c=255;255===c;)f+=c=e.getUint8(u),u++;(function(e,t,r,n){if(4!==e||t<8)return null;var i=r.getUint8(n),o=r.getUint16(n+1),u=r.getUint32(n+3),l=r.getUint8(n+7);return 181==i&&49==o&&1195456820==u&&3==l})(l,f,e,u)&&o.push([u,f]),u+=f}i+=n+4}return o},t.extractCea608DataFromRange=function(e,t){var r=t[0],n=[[],[]];r+=8;var i=31&e.getUint8(r);r+=2;for(var o=0;o<i;o++){var u=e.getUint8(r),l=4&u,c=3&u;r++;var f=e.getUint8(r);r++;var d=e.getUint8(r);r++,l&&(127&f)+(127&d)!=0&&(0===c?(n[0].push(f),n[0].push(d)):1===c&&(n[1].push(f),n[1].push(d)))}return n}},"./externals/xml2json.js":function(e,t,r){r.r(t),t.default=function(e){function t(e){var t=e.localName;return null==t&&(t=e.baseName),null!=t&&""!=t||(t=e.nodeName),t}function r(e){return"string"==typeof e?e.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&apos;"):e}function n(e,t,r,n){for(var i=0;i<e.length;i++){var o=e[i];if("string"==typeof o){if(o==n)break}else if(o instanceof RegExp){if(o.test(n))break}else if("function"==typeof o&&o(t,r,n))break}return i!=e.length}function i(t,r,i){"property"===e.arrayAccessForm&&(t[r]instanceof Array?t[r+"_asArray"]=t[r]:t[r+"_asArray"]=[t[r]]),!(t[r]instanceof Array)&&e.arrayAccessFormPaths.length>0&&n(e.arrayAccessFormPaths,t,r,i)&&(t[r]=[t[r]])}function o(e){var t=e.split(/[-T:+Z]/g),r=new Date(t[0],t[1]-1,t[2]),n=t[5].split(".");if(r.setHours(t[3],t[4],n[0]),n.length>1&&r.setMilliseconds(n[1]),t[6]&&t[7]){var i=60*t[6]+Number(t[7]);i=0+("-"==(/\d\d-\d\d:\d\d$/.test(e)?"-":"+")?-1*i:i),r.setMinutes(r.getMinutes()-i-r.getTimezoneOffset())}else -1!==e.indexOf("Z",e.length-1)&&(r=new Date(Date.UTC(r.getFullYear(),r.getMonth(),r.getDate(),r.getHours(),r.getMinutes(),r.getSeconds(),r.getMilliseconds())));return r}function u(t,n,i,o){var u="<"+(null!=t&&null!=t.__prefix?t.__prefix+":":"")+n;if(null!=i)for(var l=0;l<i.length;l++){var c=i[l],f=t[c];e.escapeMode&&(f=r(f)),u+=" "+c.substr(e.attributePrefix.length)+"=",e.useDoubleQuotes?u+='"'+f+'"':u+="'"+f+"'"}return u+(o?"/>":">")}function l(e,t){return"</"+(null!=e.__prefix?e.__prefix+":":"")+t+">"}function c(t,r){var n,i;return"property"==e.arrayAccessForm&&(i="_asArray",-1!==(n=r.toString()).indexOf(i,n.length-i.length))||0==r.toString().indexOf(e.attributePrefix)||0==r.toString().indexOf("__")||t[r]instanceof Function}function f(e){var t=0;if(e instanceof Object)for(var r in e)c(e,r)||t++;return t}function d(t){var r=[];if(t instanceof Object)for(var n in t)-1==n.toString().indexOf("__")&&0==n.toString().indexOf(e.attributePrefix)&&r.push(n);return r}function h(t){var n,i="";return t instanceof Object?i+=(n="",null!=t.__cdata&&(n+="<![CDATA["+t.__cdata+"]]>"),null!=t.__text&&(e.escapeMode?n+=r(t.__text):n+=t.__text),n):null!=t&&(e.escapeMode?i+=r(t):i+=t),i}function p(e,t){return""===e?t:e+"."+t}void 0===(e=e||{}).escapeMode&&(e.escapeMode=!0),void 0===e.attributePrefix&&(e.attributePrefix="_"),e.arrayAccessForm=e.arrayAccessForm||"none",e.emptyNodeForm=e.emptyNodeForm||"text",void 0===e.enableToStringFunc&&(e.enableToStringFunc=!0),e.arrayAccessFormPaths=e.arrayAccessFormPaths||[],void 0===e.skipEmptyTextNodesForObj&&(e.skipEmptyTextNodesForObj=!0),void 0===e.stripWhitespaces&&(e.stripWhitespaces=!0),e.datetimeAccessFormPaths=e.datetimeAccessFormPaths||[],void 0===e.useDoubleQuotes&&(e.useDoubleQuotes=!1),e.xmlElementsFilter=e.xmlElementsFilter||[],e.jsonPropertiesFilter=e.jsonPropertiesFilter||[],void 0===e.keepCData&&(e.keepCData=!1),void 0===e.ignoreRoot&&(e.ignoreRoot=!1),this.parseXmlString=function(e){var t;if(window.ActiveXObject||window,void 0===e)return null;if(window.DOMParser){var r=new window.DOMParser;try{(t=r.parseFromString(e,"text/xml")).getElementsByTagNameNS("*","parsererror").length>0&&(t=null)}catch(e){t=null}}else 0==e.indexOf("<?")&&(e=e.substr(e.indexOf("?>")+2)),(t=new ActiveXObject("Microsoft.XMLDOM")).async="false",t.loadXML(e);return t},this.asArray=function(e){return void 0===e||null==e?[]:e instanceof Array?e:[e]},this.toXmlDateTime=function(e){return e instanceof Date?e.toISOString():"number"==typeof e?new Date(e).toISOString():null},this.asDateTime=function(e){return"string"==typeof e?o(e):e},this.xml2json=function(r){return function r(u,l){if(9==u.nodeType){for(var c={},f=u.childNodes,d=0;d<f.length;d++)1==(p=f[d]).nodeType&&(e.ignoreRoot?c=r(p):(c={})[m=t(p)]=r(p));return c}if(1==u.nodeType){(c={}).__cnt=0;var h=[];for(f=u.childNodes,d=0;d<f.length;d++){var p,m=t(p=f[d]);if(8!=p.nodeType){var g=l+"."+m;if(y=c,v=p.nodeType,b=m,!(1==v&&e.xmlElementsFilter.length>0)||n(e.xmlElementsFilter,y,b,g)){if(c.__cnt++,null==c[m]){var y,v,b,_,T=r(p,g);("#text"!=m||/[^\s]/.test(T))&&((_={})[m]=T,h.push(_)),c[m]=T,i(c,m,g)}else null!=c[m]&&(c[m]instanceof Array||(c[m]=[c[m]],i(c,m,g))),T=r(p,g),("#text"!=m||/[^\s]/.test(T))&&((_={})[m]=T,h.push(_)),c[m][c[m].length]=T}}}c.__children=h;for(var E=t(u),S=0;S<u.attributes.length;S++){var w=u.attributes[S];c.__cnt++;for(var A=w.value,C=0,I=e.matchers.length;C<I;C++){var O=e.matchers[C];O.test(w,E)&&(A=O.converter(w.value))}c[e.attributePrefix+w.name]=A}var R=u.prefix;return null!=R&&""!=R&&(c.__cnt++,c.__prefix=R),null!=c["#text"]&&(c.__text=c["#text"],c.__text instanceof Array&&(c.__text=c.__text.join("\n")),e.stripWhitespaces&&(c.__text=c.__text.trim()),delete c["#text"],"property"==e.arrayAccessForm&&delete c["#text_asArray"],c.__text=function(t,r,i){if(e.datetimeAccessFormPaths.length>0){var u=i.split(".#")[0];return n(e.datetimeAccessFormPaths,t,r,u)?o(t):t}return t}(c.__text,m,l+"."+m)),null!=c["#cdata-section"]&&(c.__cdata=c["#cdata-section"],delete c["#cdata-section"],"property"==e.arrayAccessForm&&delete c["#cdata-section_asArray"]),0==c.__cnt&&"text"==e.emptyNodeForm?c="":1==c.__cnt&&null!=c.__text?c=c.__text:1!=c.__cnt||null==c.__cdata||e.keepCData?c.__cnt>1&&null!=c.__text&&e.skipEmptyTextNodesForObj&&(e.stripWhitespaces&&""==c.__text||""==c.__text.trim())&&delete c.__text:c=c.__cdata,delete c.__cnt,e.enableToStringFunc&&(null!=c.__text||null!=c.__cdata)&&(c.toString=function(){return(null!=this.__text?this.__text:"")+(null!=this.__cdata?this.__cdata:"")}),c}if(3==u.nodeType||4==u.nodeType)return u.nodeValue}(r)},this.xml_str2json=function(e){var t=this.parseXmlString(e);return null!=t?this.xml2json(t):null},this.json2xml_str=function(t){return function t(r,i){var o,m="";if(f(r)>0){for(var g in r)if(!c(r,g)&&(""==i||(o=p(i,g),0==e.jsonPropertiesFilter.length||""==o||n(e.jsonPropertiesFilter,r,g,o)))){var y=r[g],v=d(y);null==y||null==y?m+=u(y,g,v,!0):y instanceof Object?y instanceof Array?m+=function(e,r,n,i){var o="";if(0==e.length)o+=u(e,r,n,!0);else for(var c=0;c<e.length;c++)o+=u(e[c],r,d(e[c]),!1)+t(e[c],p(i,r))+l(e[c],r);return o}(y,g,v,i):y instanceof Date?m+=u(y,g,v,!1)+y.toISOString()+l(y,g):f(y)>0||null!=y.__text||null!=y.__cdata?m+=u(y,g,v,!1)+t(y,p(i,g))+l(y,g):m+=u(y,g,v,!0):m+=u(y,g,v,!1)+h(y)+l(y,g)}}return m+h(r)}(t,"")},this.json2xml=function(e){var t=this.json2xml_str(e);return this.parseXmlString(t)},this.getVersion=function(){return"1.2.0"}}},"./index.js":function(e,t,r){r.r(t);var n=r("./index_mediaplayerOnly.js");r.d(t,"MediaPlayer",function(){return n.MediaPlayer});var i=r("./src/streaming/utils/Capabilities.js");r.d(t,"supportsMediaSource",function(){return i.supportsMediaSource});var o=r("./src/streaming/metrics/MetricsReporting.js");r.d(t,"MetricsReporting",function(){return o.default});var u=r("./src/streaming/protection/Protection.js");r.d(t,"Protection",function(){return u.default});var l=r("./src/streaming/MediaPlayerFactory.js");r.d(t,"MediaPlayerFactory",function(){return l.default});var c=r("./src/core/Debug.js");r.d(t,"Debug",function(){return c.default}),dashjs.Protection=u.default,dashjs.MetricsReporting=o.default,dashjs.MediaPlayerFactory=l.default,dashjs.Debug=c.default,dashjs.supportsMediaSource=i.supportsMediaSource,t.default=dashjs},"./index_mediaplayerOnly.js":function(e,t,r){r.r(t),(function(e){var n=r("./src/streaming/MediaPlayer.js");r.d(t,"MediaPlayer",function(){return n.default});var i=r("./src/core/FactoryMaker.js");r.d(t,"FactoryMaker",function(){return i.default});var o=r("./src/core/Debug.js");r.d(t,"Debug",function(){return o.default});var u=r("./src/core/Version.js"),l=(r("./node_modules/es6-promise/auto.js"),"undefined"!=typeof window&&window||e),c=l.dashjs;c||(c=l.dashjs={}),c.MediaPlayer=n.default,c.FactoryMaker=i.default,c.Debug=o.default,c.Version=Object(u.getVersionString)(),t.default=c}).call(this,r("./node_modules/webpack/buildin/global.js"))},"./node_modules/base64-js/index.js":function(e,t,r){t.byteLength=function(e){var t=f(e),r=t[0],n=t[1];return 3*(r+n)/4-n},t.toByteArray=function(e){var t,r,n=f(e),u=n[0],l=n[1],c=new o(3*(u+l)/4-l),d=0,h=l>0?u-4:u;for(r=0;r<h;r+=4)t=i[e.charCodeAt(r)]<<18|i[e.charCodeAt(r+1)]<<12|i[e.charCodeAt(r+2)]<<6|i[e.charCodeAt(r+3)],c[d++]=t>>16&255,c[d++]=t>>8&255,c[d++]=255&t;return 2===l&&(t=i[e.charCodeAt(r)]<<2|i[e.charCodeAt(r+1)]>>4,c[d++]=255&t),1===l&&(t=i[e.charCodeAt(r)]<<10|i[e.charCodeAt(r+1)]<<4|i[e.charCodeAt(r+2)]>>2,c[d++]=t>>8&255,c[d++]=255&t),c},t.fromByteArray=function(e){for(var t,r=e.length,i=r%3,o=[],u=0,l=r-i;u<l;u+=16383)o.push(function(e,t,r){for(var i,o=[],u=t;u<r;u+=3)o.push(n[(i=(e[u]<<16&16711680)+(e[u+1]<<8&65280)+(255&e[u+2]))>>18&63]+n[i>>12&63]+n[i>>6&63]+n[63&i]);return o.join("")}(e,u,u+16383>l?l:u+16383));return 1===i?o.push(n[(t=e[r-1])>>2]+n[t<<4&63]+"=="):2===i&&o.push(n[(t=(e[r-2]<<8)+e[r-1])>>10]+n[t>>4&63]+n[t<<2&63]+"="),o.join("")};for(var n=[],i=[],o="undefined"!=typeof Uint8Array?Uint8Array:Array,u="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",l=0,c=u.length;l<c;++l)n[l]=u[l],i[u.charCodeAt(l)]=l;function f(e){var t=e.length;if(t%4>0)throw Error("Invalid string. Length must be a multiple of 4");var r=e.indexOf("=");return -1===r&&(r=t),[r,r===t?0:4-r%4]}i["-".charCodeAt(0)]=62,i["_".charCodeAt(0)]=63},"./node_modules/bcp-47-match/index.js":function(e,t,r){function n(e,t){return function(r,n){for(var o,u,l,c=i(r,"tag"),f=i(null==n?"*":n,"range"),d=[],h=-1;++h<f.length;)if(o=f[h].toLowerCase(),t||"*"!==o){for(u=-1,l=[];++u<c.length;)if(e(c[u].toLowerCase(),o)){if(!t)return c[u];d.push(c[u])}else l.push(c[u]);c=l}return t?d:void 0}}function i(e,t){var r=e&&"string"==typeof e?[e]:e;if(!r||"object"!=typeof r||!("length"in r))throw Error("Invalid "+t+" `"+r+"`, expected non-empty string");return r}t.basicFilter=n(function(e,t){return"*"===t||e===t||e.indexOf(t+"-")>-1},!0),t.extendedFilter=n(function(e,t){var r=e.split("-"),n=t.split("-"),i=0,o=0;if("*"!==n[0]&&r[i]!==n[o])return!1;for(i++,o++;o<n.length;)if("*"!==n[o]){if(!r[i])return!1;if(r[i]!==n[o]){if(1===r[i].length)return!1;i++}else i++,o++}else o++;return!0},!0),t.lookup=n(function(e,t){for(var r,n=t;;){if("*"===n||e===n)return!0;if((r=n.lastIndexOf("-"))<0)return!1;"-"===n.charAt(r-2)&&(r-=2),n=n.slice(0,r)}})},"./node_modules/bcp-47-normalize/index.js":function(e,t,r){e.exports=r("./node_modules/bcp-47-normalize/lib/index.js")},"./node_modules/bcp-47-normalize/lib/defaults.json":function(e){e.exports=JSON.parse('["mni-beng-in","mni-mtei-in","sat-deva-in","sat-olck-in","shi-latn-ma","shi-tfng-ma","vai-latn-lr","vai-vaii-lr","yue-hans-cn","yue-hant-hk","az-arab-ir","az-cyrl-az","az-latn-az","bm-nkoo-ml","bs-cyrl-ba","bs-latn-ba","en-dsrt-us","ff-adlm-gn","ff-latn-sn","ha-arab-ng","hi-latn-in","iu-latn-ca","ks-arab-in","ks-deva-in","mn-mong-cn","ms-arab-my","pa-arab-pk","pa-guru-in","sd-arab-pk","sd-deva-in","sr-cyrl-rs","sr-latn-rs","su-latn-id","uz-arab-af","uz-cyrl-uz","uz-latn-uz","zh-hans-cn","zh-hant-tw","mni-beng","sat-olck","shi-tfng","vai-vaii","yue-hant","az-latn","bs-latn","ff-latn","jbo-001","ks-arab","pa-guru","prg-001","sd-arab","sr-cyrl","su-latn","uz-latn","zh-hans","agq-cm","ar-001","arn-cl","asa-tz","ast-es","bas-cm","bem-zm","bez-tz","bgn-pk","blt-vn","brx-in","bss-cm","byn-er","cad-us","cch-ng","ccp-bd","ceb-ph","cgg-ug","chr-us","cic-us","ckb-iq","dav-ke","dje-ne","doi-in","dsb-de","dua-cm","dyo-sn","ebu-ke","eo-001","ewo-cm","fil-ph","fur-it","gaa-gh","gez-et","gsw-ch","guz-ke","haw-us","hsb-de","ia-001","ife-tg","io-001","jgo-cm","jmc-tz","kab-dz","kaj-ng","kam-ke","kcg-ng","kde-tz","kea-cv","ken-cm","khq-ml","kkj-cm","kln-ke","kok-in","kpe-lr","ksb-tz","ksf-cm","ksh-de","lag-tz","lkt-us","lrc-ir","luo-ke","luy-ke","mai-in","mas-ke","mer-ke","mfe-mu","mgh-mz","mgo-cm","moh-ca","mua-cm","mus-us","myv-ru","mzn-ir","naq-na","nds-de","nmg-cm","nnh-cm","nqo-gn","nso-za","nus-ss","nyn-ug","osa-us","pcm-ng","quc-gt","rof-tz","rwk-tz","sah-ru","saq-ke","sbp-tz","scn-it","sdh-ir","seh-mz","ses-ml","sid-et","sma-se","smj-se","smn-fi","sms-fi","ssy-er","syr-iq","szl-pl","teo-ug","tig-er","trv-tw","trw-pk","twq-ne","tzm-ma","vo-001","vun-tz","wae-ch","wal-et","wbp-au","xog-ug","yav-cm","yi-001","zgh-ma","aa-et","af-za","ak-gh","am-et","an-es","as-in","ba-ru","be-by","bg-bg","bm-ml","bn-bd","bo-cn","br-fr","ca-es","ce-ru","co-fr","cs-cz","cu-ru","cv-ru","cy-gb","da-dk","de-de","dv-mv","dz-bt","ee-gh","el-gr","en-us","es-es","et-ee","eu-es","fa-ir","fi-fi","fo-fo","fr-fr","fy-nl","ga-ie","gd-gb","gl-es","gn-py","gu-in","gv-im","ha-ng","he-il","hi-in","hr-hr","hu-hu","hy-am","id-id","ig-ng","ii-cn","is-is","it-it","iu-ca","ja-jp","jv-id","ka-ge","ki-ke","kk-kz","kl-gl","km-kh","kn-in","ko-kr","ku-tr","kw-gb","ky-kg","lb-lu","lg-ug","ln-cd","lo-la","lt-lt","lu-cd","lv-lv","mg-mg","mi-nz","mk-mk","ml-in","mn-mn","mr-in","ms-my","mt-mt","my-mm","nb-no","nd-zw","ne-np","nl-nl","nn-no","nr-za","nv-us","ny-mw","oc-fr","om-et","or-in","os-ge","pl-pl","ps-af","pt-br","qu-pe","rm-ch","rn-bi","ro-ro","ru-ru","rw-rw","sa-in","sc-it","se-no","sg-cf","si-lk","sk-sk","sl-si","sn-zw","so-so","sq-al","ss-za","st-za","sv-se","sw-tz","ta-in","te-in","tg-tj","th-th","ti-et","tk-tm","tn-za","to-to","tr-tr","ts-za","tt-ru","ug-cn","uk-ua","ur-pk","ve-za","vi-vn","wa-be","wo-sn","xh-za","yo-ng","zu-za"]')},"./node_modules/bcp-47-normalize/lib/fields.json":function(e){e.exports=JSON.parse('[{"from":{"field":"script","value":"qaai"},"to":{"field":"script","value":"zinh"}},{"from":{"field":"region","value":"bu"},"to":{"field":"region","value":"mm"}},{"from":{"field":"region","value":"ct"},"to":{"field":"region","value":"ki"}},{"from":{"field":"region","value":"dd"},"to":{"field":"region","value":"de"}},{"from":{"field":"region","value":"dy"},"to":{"field":"region","value":"bj"}},{"from":{"field":"region","value":"fx"},"to":{"field":"region","value":"fr"}},{"from":{"field":"region","value":"hv"},"to":{"field":"region","value":"bf"}},{"from":{"field":"region","value":"jt"},"to":{"field":"region","value":"um"}},{"from":{"field":"region","value":"mi"},"to":{"field":"region","value":"um"}},{"from":{"field":"region","value":"nh"},"to":{"field":"region","value":"vu"}},{"from":{"field":"region","value":"nq"},"to":{"field":"region","value":"aq"}},{"from":{"field":"region","value":"pu"},"to":{"field":"region","value":"um"}},{"from":{"field":"region","value":"pz"},"to":{"field":"region","value":"pa"}},{"from":{"field":"region","value":"qu"},"to":{"field":"region","value":"eu"}},{"from":{"field":"region","value":"rh"},"to":{"field":"region","value":"zw"}},{"from":{"field":"region","value":"tp"},"to":{"field":"region","value":"tl"}},{"from":{"field":"region","value":"uk"},"to":{"field":"region","value":"gb"}},{"from":{"field":"region","value":"vd"},"to":{"field":"region","value":"vn"}},{"from":{"field":"region","value":"wk"},"to":{"field":"region","value":"um"}},{"from":{"field":"region","value":"yd"},"to":{"field":"region","value":"ye"}},{"from":{"field":"region","value":"zr"},"to":{"field":"region","value":"cd"}},{"from":{"field":"region","value":"230"},"to":{"field":"region","value":"et"}},{"from":{"field":"region","value":"280"},"to":{"field":"region","value":"de"}},{"from":{"field":"region","value":"736"},"to":{"field":"region","value":"sd"}},{"from":{"field":"region","value":"886"},"to":{"field":"region","value":"ye"}},{"from":{"field":"region","value":"958"},"to":{"field":"region","value":"aa"}},{"from":{"field":"region","value":"020"},"to":{"field":"region","value":"ad"}},{"from":{"field":"region","value":"784"},"to":{"field":"region","value":"ae"}},{"from":{"field":"region","value":"004"},"to":{"field":"region","value":"af"}},{"from":{"field":"region","value":"028"},"to":{"field":"region","value":"ag"}},{"from":{"field":"region","value":"660"},"to":{"field":"region","value":"ai"}},{"from":{"field":"region","value":"008"},"to":{"field":"region","value":"al"}},{"from":{"field":"region","value":"051"},"to":{"field":"region","value":"am"}},{"from":{"field":"region","value":"024"},"to":{"field":"region","value":"ao"}},{"from":{"field":"region","value":"010"},"to":{"field":"region","value":"aq"}},{"from":{"field":"region","value":"032"},"to":{"field":"region","value":"ar"}},{"from":{"field":"region","value":"016"},"to":{"field":"region","value":"as"}},{"from":{"field":"region","value":"040"},"to":{"field":"region","value":"at"}},{"from":{"field":"region","value":"036"},"to":{"field":"region","value":"au"}},{"from":{"field":"region","value":"533"},"to":{"field":"region","value":"aw"}},{"from":{"field":"region","value":"248"},"to":{"field":"region","value":"ax"}},{"from":{"field":"region","value":"031"},"to":{"field":"region","value":"az"}},{"from":{"field":"region","value":"070"},"to":{"field":"region","value":"ba"}},{"from":{"field":"region","value":"052"},"to":{"field":"region","value":"bb"}},{"from":{"field":"region","value":"050"},"to":{"field":"region","value":"bd"}},{"from":{"field":"region","value":"056"},"to":{"field":"region","value":"be"}},{"from":{"field":"region","value":"854"},"to":{"field":"region","value":"bf"}},{"from":{"field":"region","value":"100"},"to":{"field":"region","value":"bg"}},{"from":{"field":"region","value":"048"},"to":{"field":"region","value":"bh"}},{"from":{"field":"region","value":"108"},"to":{"field":"region","value":"bi"}},{"from":{"field":"region","value":"204"},"to":{"field":"region","value":"bj"}},{"from":{"field":"region","value":"652"},"to":{"field":"region","value":"bl"}},{"from":{"field":"region","value":"060"},"to":{"field":"region","value":"bm"}},{"from":{"field":"region","value":"096"},"to":{"field":"region","value":"bn"}},{"from":{"field":"region","value":"068"},"to":{"field":"region","value":"bo"}},{"from":{"field":"region","value":"535"},"to":{"field":"region","value":"bq"}},{"from":{"field":"region","value":"076"},"to":{"field":"region","value":"br"}},{"from":{"field":"region","value":"044"},"to":{"field":"region","value":"bs"}},{"from":{"field":"region","value":"064"},"to":{"field":"region","value":"bt"}},{"from":{"field":"region","value":"104"},"to":{"field":"region","value":"mm"}},{"from":{"field":"region","value":"074"},"to":{"field":"region","value":"bv"}},{"from":{"field":"region","value":"072"},"to":{"field":"region","value":"bw"}},{"from":{"field":"region","value":"112"},"to":{"field":"region","value":"by"}},{"from":{"field":"region","value":"084"},"to":{"field":"region","value":"bz"}},{"from":{"field":"region","value":"124"},"to":{"field":"region","value":"ca"}},{"from":{"field":"region","value":"166"},"to":{"field":"region","value":"cc"}},{"from":{"field":"region","value":"180"},"to":{"field":"region","value":"cd"}},{"from":{"field":"region","value":"140"},"to":{"field":"region","value":"cf"}},{"from":{"field":"region","value":"178"},"to":{"field":"region","value":"cg"}},{"from":{"field":"region","value":"756"},"to":{"field":"region","value":"ch"}},{"from":{"field":"region","value":"384"},"to":{"field":"region","value":"ci"}},{"from":{"field":"region","value":"184"},"to":{"field":"region","value":"ck"}},{"from":{"field":"region","value":"152"},"to":{"field":"region","value":"cl"}},{"from":{"field":"region","value":"120"},"to":{"field":"region","value":"cm"}},{"from":{"field":"region","value":"156"},"to":{"field":"region","value":"cn"}},{"from":{"field":"region","value":"170"},"to":{"field":"region","value":"co"}},{"from":{"field":"region","value":"188"},"to":{"field":"region","value":"cr"}},{"from":{"field":"region","value":"192"},"to":{"field":"region","value":"cu"}},{"from":{"field":"region","value":"132"},"to":{"field":"region","value":"cv"}},{"from":{"field":"region","value":"531"},"to":{"field":"region","value":"cw"}},{"from":{"field":"region","value":"162"},"to":{"field":"region","value":"cx"}},{"from":{"field":"region","value":"196"},"to":{"field":"region","value":"cy"}},{"from":{"field":"region","value":"203"},"to":{"field":"region","value":"cz"}},{"from":{"field":"region","value":"278"},"to":{"field":"region","value":"de"}},{"from":{"field":"region","value":"276"},"to":{"field":"region","value":"de"}},{"from":{"field":"region","value":"262"},"to":{"field":"region","value":"dj"}},{"from":{"field":"region","value":"208"},"to":{"field":"region","value":"dk"}},{"from":{"field":"region","value":"212"},"to":{"field":"region","value":"dm"}},{"from":{"field":"region","value":"214"},"to":{"field":"region","value":"do"}},{"from":{"field":"region","value":"012"},"to":{"field":"region","value":"dz"}},{"from":{"field":"region","value":"218"},"to":{"field":"region","value":"ec"}},{"from":{"field":"region","value":"233"},"to":{"field":"region","value":"ee"}},{"from":{"field":"region","value":"818"},"to":{"field":"region","value":"eg"}},{"from":{"field":"region","value":"732"},"to":{"field":"region","value":"eh"}},{"from":{"field":"region","value":"232"},"to":{"field":"region","value":"er"}},{"from":{"field":"region","value":"724"},"to":{"field":"region","value":"es"}},{"from":{"field":"region","value":"231"},"to":{"field":"region","value":"et"}},{"from":{"field":"region","value":"246"},"to":{"field":"region","value":"fi"}},{"from":{"field":"region","value":"242"},"to":{"field":"region","value":"fj"}},{"from":{"field":"region","value":"238"},"to":{"field":"region","value":"fk"}},{"from":{"field":"region","value":"583"},"to":{"field":"region","value":"fm"}},{"from":{"field":"region","value":"234"},"to":{"field":"region","value":"fo"}},{"from":{"field":"region","value":"250"},"to":{"field":"region","value":"fr"}},{"from":{"field":"region","value":"249"},"to":{"field":"region","value":"fr"}},{"from":{"field":"region","value":"266"},"to":{"field":"region","value":"ga"}},{"from":{"field":"region","value":"826"},"to":{"field":"region","value":"gb"}},{"from":{"field":"region","value":"308"},"to":{"field":"region","value":"gd"}},{"from":{"field":"region","value":"268"},"to":{"field":"region","value":"ge"}},{"from":{"field":"region","value":"254"},"to":{"field":"region","value":"gf"}},{"from":{"field":"region","value":"831"},"to":{"field":"region","value":"gg"}},{"from":{"field":"region","value":"288"},"to":{"field":"region","value":"gh"}},{"from":{"field":"region","value":"292"},"to":{"field":"region","value":"gi"}},{"from":{"field":"region","value":"304"},"to":{"field":"region","value":"gl"}},{"from":{"field":"region","value":"270"},"to":{"field":"region","value":"gm"}},{"from":{"field":"region","value":"324"},"to":{"field":"region","value":"gn"}},{"from":{"field":"region","value":"312"},"to":{"field":"region","value":"gp"}},{"from":{"field":"region","value":"226"},"to":{"field":"region","value":"gq"}},{"from":{"field":"region","value":"300"},"to":{"field":"region","value":"gr"}},{"from":{"field":"region","value":"239"},"to":{"field":"region","value":"gs"}},{"from":{"field":"region","value":"320"},"to":{"field":"region","value":"gt"}},{"from":{"field":"region","value":"316"},"to":{"field":"region","value":"gu"}},{"from":{"field":"region","value":"624"},"to":{"field":"region","value":"gw"}},{"from":{"field":"region","value":"328"},"to":{"field":"region","value":"gy"}},{"from":{"field":"region","value":"344"},"to":{"field":"region","value":"hk"}},{"from":{"field":"region","value":"334"},"to":{"field":"region","value":"hm"}},{"from":{"field":"region","value":"340"},"to":{"field":"region","value":"hn"}},{"from":{"field":"region","value":"191"},"to":{"field":"region","value":"hr"}},{"from":{"field":"region","value":"332"},"to":{"field":"region","value":"ht"}},{"from":{"field":"region","value":"348"},"to":{"field":"region","value":"hu"}},{"from":{"field":"region","value":"360"},"to":{"field":"region","value":"id"}},{"from":{"field":"region","value":"372"},"to":{"field":"region","value":"ie"}},{"from":{"field":"region","value":"376"},"to":{"field":"region","value":"il"}},{"from":{"field":"region","value":"833"},"to":{"field":"region","value":"im"}},{"from":{"field":"region","value":"356"},"to":{"field":"region","value":"in"}},{"from":{"field":"region","value":"086"},"to":{"field":"region","value":"io"}},{"from":{"field":"region","value":"368"},"to":{"field":"region","value":"iq"}},{"from":{"field":"region","value":"364"},"to":{"field":"region","value":"ir"}},{"from":{"field":"region","value":"352"},"to":{"field":"region","value":"is"}},{"from":{"field":"region","value":"380"},"to":{"field":"region","value":"it"}},{"from":{"field":"region","value":"832"},"to":{"field":"region","value":"je"}},{"from":{"field":"region","value":"388"},"to":{"field":"region","value":"jm"}},{"from":{"field":"region","value":"400"},"to":{"field":"region","value":"jo"}},{"from":{"field":"region","value":"392"},"to":{"field":"region","value":"jp"}},{"from":{"field":"region","value":"404"},"to":{"field":"region","value":"ke"}},{"from":{"field":"region","value":"417"},"to":{"field":"region","value":"kg"}},{"from":{"field":"region","value":"116"},"to":{"field":"region","value":"kh"}},{"from":{"field":"region","value":"296"},"to":{"field":"region","value":"ki"}},{"from":{"field":"region","value":"174"},"to":{"field":"region","value":"km"}},{"from":{"field":"region","value":"659"},"to":{"field":"region","value":"kn"}},{"from":{"field":"region","value":"408"},"to":{"field":"region","value":"kp"}},{"from":{"field":"region","value":"410"},"to":{"field":"region","value":"kr"}},{"from":{"field":"region","value":"414"},"to":{"field":"region","value":"kw"}},{"from":{"field":"region","value":"136"},"to":{"field":"region","value":"ky"}},{"from":{"field":"region","value":"398"},"to":{"field":"region","value":"kz"}},{"from":{"field":"region","value":"418"},"to":{"field":"region","value":"la"}},{"from":{"field":"region","value":"422"},"to":{"field":"region","value":"lb"}},{"from":{"field":"region","value":"662"},"to":{"field":"region","value":"lc"}},{"from":{"field":"region","value":"438"},"to":{"field":"region","value":"li"}},{"from":{"field":"region","value":"144"},"to":{"field":"region","value":"lk"}},{"from":{"field":"region","value":"430"},"to":{"field":"region","value":"lr"}},{"from":{"field":"region","value":"426"},"to":{"field":"region","value":"ls"}},{"from":{"field":"region","value":"440"},"to":{"field":"region","value":"lt"}},{"from":{"field":"region","value":"442"},"to":{"field":"region","value":"lu"}},{"from":{"field":"region","value":"428"},"to":{"field":"region","value":"lv"}},{"from":{"field":"region","value":"434"},"to":{"field":"region","value":"ly"}},{"from":{"field":"region","value":"504"},"to":{"field":"region","value":"ma"}},{"from":{"field":"region","value":"492"},"to":{"field":"region","value":"mc"}},{"from":{"field":"region","value":"498"},"to":{"field":"region","value":"md"}},{"from":{"field":"region","value":"499"},"to":{"field":"region","value":"me"}},{"from":{"field":"region","value":"663"},"to":{"field":"region","value":"mf"}},{"from":{"field":"region","value":"450"},"to":{"field":"region","value":"mg"}},{"from":{"field":"region","value":"584"},"to":{"field":"region","value":"mh"}},{"from":{"field":"region","value":"807"},"to":{"field":"region","value":"mk"}},{"from":{"field":"region","value":"466"},"to":{"field":"region","value":"ml"}},{"from":{"field":"region","value":"496"},"to":{"field":"region","value":"mn"}},{"from":{"field":"region","value":"446"},"to":{"field":"region","value":"mo"}},{"from":{"field":"region","value":"580"},"to":{"field":"region","value":"mp"}},{"from":{"field":"region","value":"474"},"to":{"field":"region","value":"mq"}},{"from":{"field":"region","value":"478"},"to":{"field":"region","value":"mr"}},{"from":{"field":"region","value":"500"},"to":{"field":"region","value":"ms"}},{"from":{"field":"region","value":"470"},"to":{"field":"region","value":"mt"}},{"from":{"field":"region","value":"480"},"to":{"field":"region","value":"mu"}},{"from":{"field":"region","value":"462"},"to":{"field":"region","value":"mv"}},{"from":{"field":"region","value":"454"},"to":{"field":"region","value":"mw"}},{"from":{"field":"region","value":"484"},"to":{"field":"region","value":"mx"}},{"from":{"field":"region","value":"458"},"to":{"field":"region","value":"my"}},{"from":{"field":"region","value":"508"},"to":{"field":"region","value":"mz"}},{"from":{"field":"region","value":"516"},"to":{"field":"region","value":"na"}},{"from":{"field":"region","value":"540"},"to":{"field":"region","value":"nc"}},{"from":{"field":"region","value":"562"},"to":{"field":"region","value":"ne"}},{"from":{"field":"region","value":"574"},"to":{"field":"region","value":"nf"}},{"from":{"field":"region","value":"566"},"to":{"field":"region","value":"ng"}},{"from":{"field":"region","value":"558"},"to":{"field":"region","value":"ni"}},{"from":{"field":"region","value":"528"},"to":{"field":"region","value":"nl"}},{"from":{"field":"region","value":"578"},"to":{"field":"region","value":"no"}},{"from":{"field":"region","value":"524"},"to":{"field":"region","value":"np"}},{"from":{"field":"region","value":"520"},"to":{"field":"region","value":"nr"}},{"from":{"field":"region","value":"570"},"to":{"field":"region","value":"nu"}},{"from":{"field":"region","value":"554"},"to":{"field":"region","value":"nz"}},{"from":{"field":"region","value":"512"},"to":{"field":"region","value":"om"}},{"from":{"field":"region","value":"591"},"to":{"field":"region","value":"pa"}},{"from":{"field":"region","value":"604"},"to":{"field":"region","value":"pe"}},{"from":{"field":"region","value":"258"},"to":{"field":"region","value":"pf"}},{"from":{"field":"region","value":"598"},"to":{"field":"region","value":"pg"}},{"from":{"field":"region","value":"608"},"to":{"field":"region","value":"ph"}},{"from":{"field":"region","value":"586"},"to":{"field":"region","value":"pk"}},{"from":{"field":"region","value":"616"},"to":{"field":"region","value":"pl"}},{"from":{"field":"region","value":"666"},"to":{"field":"region","value":"pm"}},{"from":{"field":"region","value":"612"},"to":{"field":"region","value":"pn"}},{"from":{"field":"region","value":"630"},"to":{"field":"region","value":"pr"}},{"from":{"field":"region","value":"275"},"to":{"field":"region","value":"ps"}},{"from":{"field":"region","value":"620"},"to":{"field":"region","value":"pt"}},{"from":{"field":"region","value":"585"},"to":{"field":"region","value":"pw"}},{"from":{"field":"region","value":"600"},"to":{"field":"region","value":"py"}},{"from":{"field":"region","value":"634"},"to":{"field":"region","value":"qa"}},{"from":{"field":"region","value":"959"},"to":{"field":"region","value":"qm"}},{"from":{"field":"region","value":"960"},"to":{"field":"region","value":"qn"}},{"from":{"field":"region","value":"962"},"to":{"field":"region","value":"qp"}},{"from":{"field":"region","value":"963"},"to":{"field":"region","value":"qq"}},{"from":{"field":"region","value":"964"},"to":{"field":"region","value":"qr"}},{"from":{"field":"region","value":"965"},"to":{"field":"region","value":"qs"}},{"from":{"field":"region","value":"966"},"to":{"field":"region","value":"qt"}},{"from":{"field":"region","value":"967"},"to":{"field":"region","value":"eu"}},{"from":{"field":"region","value":"968"},"to":{"field":"region","value":"qv"}},{"from":{"field":"region","value":"969"},"to":{"field":"region","value":"qw"}},{"from":{"field":"region","value":"970"},"to":{"field":"region","value":"qx"}},{"from":{"field":"region","value":"971"},"to":{"field":"region","value":"qy"}},{"from":{"field":"region","value":"972"},"to":{"field":"region","value":"qz"}},{"from":{"field":"region","value":"638"},"to":{"field":"region","value":"re"}},{"from":{"field":"region","value":"642"},"to":{"field":"region","value":"ro"}},{"from":{"field":"region","value":"688"},"to":{"field":"region","value":"rs"}},{"from":{"field":"region","value":"643"},"to":{"field":"region","value":"ru"}},{"from":{"field":"region","value":"646"},"to":{"field":"region","value":"rw"}},{"from":{"field":"region","value":"682"},"to":{"field":"region","value":"sa"}},{"from":{"field":"region","value":"090"},"to":{"field":"region","value":"sb"}},{"from":{"field":"region","value":"690"},"to":{"field":"region","value":"sc"}},{"from":{"field":"region","value":"729"},"to":{"field":"region","value":"sd"}},{"from":{"field":"region","value":"752"},"to":{"field":"region","value":"se"}},{"from":{"field":"region","value":"702"},"to":{"field":"region","value":"sg"}},{"from":{"field":"region","value":"654"},"to":{"field":"region","value":"sh"}},{"from":{"field":"region","value":"705"},"to":{"field":"region","value":"si"}},{"from":{"field":"region","value":"744"},"to":{"field":"region","value":"sj"}},{"from":{"field":"region","value":"703"},"to":{"field":"region","value":"sk"}},{"from":{"field":"region","value":"694"},"to":{"field":"region","value":"sl"}},{"from":{"field":"region","value":"674"},"to":{"field":"region","value":"sm"}},{"from":{"field":"region","value":"686"},"to":{"field":"region","value":"sn"}},{"from":{"field":"region","value":"706"},"to":{"field":"region","value":"so"}},{"from":{"field":"region","value":"740"},"to":{"field":"region","value":"sr"}},{"from":{"field":"region","value":"728"},"to":{"field":"region","value":"ss"}},{"from":{"field":"region","value":"678"},"to":{"field":"region","value":"st"}},{"from":{"field":"region","value":"222"},"to":{"field":"region","value":"sv"}},{"from":{"field":"region","value":"534"},"to":{"field":"region","value":"sx"}},{"from":{"field":"region","value":"760"},"to":{"field":"region","value":"sy"}},{"from":{"field":"region","value":"748"},"to":{"field":"region","value":"sz"}},{"from":{"field":"region","value":"796"},"to":{"field":"region","value":"tc"}},{"from":{"field":"region","value":"148"},"to":{"field":"region","value":"td"}},{"from":{"field":"region","value":"260"},"to":{"field":"region","value":"tf"}},{"from":{"field":"region","value":"768"},"to":{"field":"region","value":"tg"}},{"from":{"field":"region","value":"764"},"to":{"field":"region","value":"th"}},{"from":{"field":"region","value":"762"},"to":{"field":"region","value":"tj"}},{"from":{"field":"region","value":"772"},"to":{"field":"region","value":"tk"}},{"from":{"field":"region","value":"626"},"to":{"field":"region","value":"tl"}},{"from":{"field":"region","value":"795"},"to":{"field":"region","value":"tm"}},{"from":{"field":"region","value":"788"},"to":{"field":"region","value":"tn"}},{"from":{"field":"region","value":"776"},"to":{"field":"region","value":"to"}},{"from":{"field":"region","value":"792"},"to":{"field":"region","value":"tr"}},{"from":{"field":"region","value":"780"},"to":{"field":"region","value":"tt"}},{"from":{"field":"region","value":"798"},"to":{"field":"region","value":"tv"}},{"from":{"field":"region","value":"158"},"to":{"field":"region","value":"tw"}},{"from":{"field":"region","value":"834"},"to":{"field":"region","value":"tz"}},{"from":{"field":"region","value":"804"},"to":{"field":"region","value":"ua"}},{"from":{"field":"region","value":"800"},"to":{"field":"region","value":"ug"}},{"from":{"field":"region","value":"581"},"to":{"field":"region","value":"um"}},{"from":{"field":"region","value":"840"},"to":{"field":"region","value":"us"}},{"from":{"field":"region","value":"858"},"to":{"field":"region","value":"uy"}},{"from":{"field":"region","value":"860"},"to":{"field":"region","value":"uz"}},{"from":{"field":"region","value":"336"},"to":{"field":"region","value":"va"}},{"from":{"field":"region","value":"670"},"to":{"field":"region","value":"vc"}},{"from":{"field":"region","value":"862"},"to":{"field":"region","value":"ve"}},{"from":{"field":"region","value":"092"},"to":{"field":"region","value":"vg"}},{"from":{"field":"region","value":"850"},"to":{"field":"region","value":"vi"}},{"from":{"field":"region","value":"704"},"to":{"field":"region","value":"vn"}},{"from":{"field":"region","value":"548"},"to":{"field":"region","value":"vu"}},{"from":{"field":"region","value":"876"},"to":{"field":"region","value":"wf"}},{"from":{"field":"region","value":"882"},"to":{"field":"region","value":"ws"}},{"from":{"field":"region","value":"973"},"to":{"field":"region","value":"xa"}},{"from":{"field":"region","value":"974"},"to":{"field":"region","value":"xb"}},{"from":{"field":"region","value":"975"},"to":{"field":"region","value":"xc"}},{"from":{"field":"region","value":"976"},"to":{"field":"region","value":"xd"}},{"from":{"field":"region","value":"977"},"to":{"field":"region","value":"xe"}},{"from":{"field":"region","value":"978"},"to":{"field":"region","value":"xf"}},{"from":{"field":"region","value":"979"},"to":{"field":"region","value":"xg"}},{"from":{"field":"region","value":"980"},"to":{"field":"region","value":"xh"}},{"from":{"field":"region","value":"981"},"to":{"field":"region","value":"xi"}},{"from":{"field":"region","value":"982"},"to":{"field":"region","value":"xj"}},{"from":{"field":"region","value":"983"},"to":{"field":"region","value":"xk"}},{"from":{"field":"region","value":"984"},"to":{"field":"region","value":"xl"}},{"from":{"field":"region","value":"985"},"to":{"field":"region","value":"xm"}},{"from":{"field":"region","value":"986"},"to":{"field":"region","value":"xn"}},{"from":{"field":"region","value":"987"},"to":{"field":"region","value":"xo"}},{"from":{"field":"region","value":"988"},"to":{"field":"region","value":"xp"}},{"from":{"field":"region","value":"989"},"to":{"field":"region","value":"xq"}},{"from":{"field":"region","value":"990"},"to":{"field":"region","value":"xr"}},{"from":{"field":"region","value":"991"},"to":{"field":"region","value":"xs"}},{"from":{"field":"region","value":"992"},"to":{"field":"region","value":"xt"}},{"from":{"field":"region","value":"993"},"to":{"field":"region","value":"xu"}},{"from":{"field":"region","value":"994"},"to":{"field":"region","value":"xv"}},{"from":{"field":"region","value":"995"},"to":{"field":"region","value":"xw"}},{"from":{"field":"region","value":"996"},"to":{"field":"region","value":"xx"}},{"from":{"field":"region","value":"997"},"to":{"field":"region","value":"xy"}},{"from":{"field":"region","value":"998"},"to":{"field":"region","value":"xz"}},{"from":{"field":"region","value":"720"},"to":{"field":"region","value":"ye"}},{"from":{"field":"region","value":"887"},"to":{"field":"region","value":"ye"}},{"from":{"field":"region","value":"175"},"to":{"field":"region","value":"yt"}},{"from":{"field":"region","value":"710"},"to":{"field":"region","value":"za"}},{"from":{"field":"region","value":"894"},"to":{"field":"region","value":"zm"}},{"from":{"field":"region","value":"716"},"to":{"field":"region","value":"zw"}},{"from":{"field":"region","value":"999"},"to":{"field":"region","value":"zz"}},{"from":{"field":"variants","value":"aaland"},"to":{"field":"region","value":"ax"}},{"from":{"field":"variants","value":"polytoni"},"to":{"field":"variants","value":"polyton"}},{"from":{"field":"variants","value":"heploc"},"to":{"field":"variants","value":"alalc97"}},{"from":{"field":"variants","value":"arevela"},"to":{"field":"language","value":"hy"}},{"from":{"field":"variants","value":"arevmda"},"to":{"field":"language","value":"hyw"}}]')},"./node_modules/bcp-47-normalize/lib/index.js":function(e,t,r){var n=r("./node_modules/bcp-47/index.js"),i=r("./node_modules/bcp-47-match/index.js"),o=r("./node_modules/bcp-47-normalize/lib/matches.json"),u=r("./node_modules/bcp-47-normalize/lib/fields.json"),l=r("./node_modules/bcp-47-normalize/lib/defaults.json"),c=r("./node_modules/bcp-47-normalize/lib/many.json");e.exports=function(e,t){var r,d=t||{},v=n.parse(String(e||"").toLowerCase(),d),b=n.stringify(v),_=-1;if(!b)return b;for(;++_<o.length;)i.extendedFilter(b,o[_].from).length&&(p(v,o[_].from,o[_].to),b=n.stringify(v));for(_=-1;++_<u.length;)m(v,u[_].from.field,u[_].from.value)&&g(v,u[_].to.field,u[_].to.value);for(b=n.stringify(Object.assign({},v,h)),_=-1;++_<l.length;)b===l[_]&&(p(v,l[_],l[_].split("-").slice(0,-1).join("-")),b=n.stringify(Object.assign({},v,h)));if(v.extensions.sort(y),d.warning)for(r in c)f.call(c[r],v[r])&&d.warning("Deprecated "+r+" `"+v[r]+"`, expected one of `"+c[r][v[r]].join("`, `")+"`",null,7);return v.script&&(v.script=v.script.charAt(0).toUpperCase()+v.script.slice(1)),v.region&&(v.region=v.region.toUpperCase()),n.stringify(v)};var f={}.hasOwnProperty,d=new Intl.Collator,h={variants:[],extensions:[],privateuse:[],irregular:null,regular:null};function p(e,t,r){var i,o=n.parse(t),u=n.parse(r),l=[];for(i in o)o[i]&&o[i].length&&m(e,i,o[i])&&l.push(i);for(i in u)u[i]&&u[i].length&&(l.indexOf(i)>-1||!e[i]||!e[i].length)&&g(e,i,u[i])}function m(e,t,r){var n,i,o,u,l=!1;if(r){if(i=n=e[t],n&&"object"==typeof n)for(i=[],o=-1;++o<n.length;)u=n[o],0>r.indexOf(u)?i.push(u):l=!0;else n===r&&(i=null,l=!0);e[t]=i}return l}function g(e,t,r){var n,i,o,u=e[t];if(u&&"object"==typeof u)for(n=[].concat(r),i=-1;++i<n.length;)o=n[i],0>u.indexOf(o)&&u.push(o);else e[t]=r}function y(e,t){return d.compare(e.singleton,t.singleton)}},"./node_modules/bcp-47-normalize/lib/many.json":function(e){e.exports=JSON.parse('{"region":{"172":["ru","am","az","by","ge","kg","kz","md","tj","tm","ua","uz"],"200":["cz","sk"],"530":["cw","sx","bq"],"532":["cw","sx","bq"],"536":["sa","iq"],"582":["fm","mh","mp","pw"],"810":["ru","am","az","by","ee","ge","kz","kg","lv","lt","md","tj","tm","ua","uz"],"830":["je","gg"],"890":["rs","me","si","hr","mk","ba"],"891":["rs","me"],"an":["cw","sx","bq"],"cs":["rs","me"],"fq":["aq","tf"],"nt":["sa","iq"],"pc":["fm","mh","mp","pw"],"su":["ru","am","az","by","ee","ge","kz","kg","lv","lt","md","tj","tm","ua","uz"],"yu":["rs","me"],"062":["034","143"],"ant":["cw","sx","bq"],"scg":["rs","me"],"ntz":["sa","iq"],"sun":["ru","am","az","by","ee","ge","kz","kg","lv","lt","md","tj","tm","ua","uz"],"yug":["rs","me"]}}')},"./node_modules/bcp-47-normalize/lib/matches.json":function(e){e.exports=JSON.parse('[{"from":"in","to":"id"},{"from":"iw","to":"he"},{"from":"ji","to":"yi"},{"from":"jw","to":"jv"},{"from":"mo","to":"ro"},{"from":"scc","to":"sr"},{"from":"scr","to":"hr"},{"from":"aam","to":"aas"},{"from":"adp","to":"dz"},{"from":"aue","to":"ktz"},{"from":"ayx","to":"nun"},{"from":"bgm","to":"bcg"},{"from":"bjd","to":"drl"},{"from":"ccq","to":"rki"},{"from":"cjr","to":"mom"},{"from":"cka","to":"cmr"},{"from":"cmk","to":"xch"},{"from":"coy","to":"pij"},{"from":"cqu","to":"quh"},{"from":"drh","to":"mn"},{"from":"drw","to":"fa-af"},{"from":"gav","to":"dev"},{"from":"gfx","to":"vaj"},{"from":"ggn","to":"gvr"},{"from":"gti","to":"nyc"},{"from":"guv","to":"duz"},{"from":"hrr","to":"jal"},{"from":"ibi","to":"opa"},{"from":"ilw","to":"gal"},{"from":"jeg","to":"oyb"},{"from":"kgc","to":"tdf"},{"from":"kgh","to":"kml"},{"from":"koj","to":"kwv"},{"from":"krm","to":"bmf"},{"from":"ktr","to":"dtp"},{"from":"kvs","to":"gdj"},{"from":"kwq","to":"yam"},{"from":"kxe","to":"tvd"},{"from":"kzj","to":"dtp"},{"from":"kzt","to":"dtp"},{"from":"lii","to":"raq"},{"from":"lmm","to":"rmx"},{"from":"meg","to":"cir"},{"from":"mst","to":"mry"},{"from":"mwj","to":"vaj"},{"from":"myt","to":"mry"},{"from":"nad","to":"xny"},{"from":"ncp","to":"kdz"},{"from":"nnx","to":"ngv"},{"from":"nts","to":"pij"},{"from":"oun","to":"vaj"},{"from":"pcr","to":"adx"},{"from":"pmc","to":"huw"},{"from":"pmu","to":"phr"},{"from":"ppa","to":"bfy"},{"from":"ppr","to":"lcq"},{"from":"pry","to":"prt"},{"from":"puz","to":"pub"},{"from":"sca","to":"hle"},{"from":"skk","to":"oyb"},{"from":"tdu","to":"dtp"},{"from":"thc","to":"tpo"},{"from":"thx","to":"oyb"},{"from":"tie","to":"ras"},{"from":"tkk","to":"twm"},{"from":"tlw","to":"weo"},{"from":"tmp","to":"tyj"},{"from":"tne","to":"kak"},{"from":"tnf","to":"fa-af"},{"from":"tsf","to":"taj"},{"from":"uok","to":"ema"},{"from":"xba","to":"cax"},{"from":"xia","to":"acn"},{"from":"xkh","to":"waw"},{"from":"xsj","to":"suj"},{"from":"ybd","to":"rki"},{"from":"yma","to":"lrr"},{"from":"ymt","to":"mtm"},{"from":"yos","to":"zom"},{"from":"yuu","to":"yug"},{"from":"asd","to":"snz"},{"from":"dit","to":"dif"},{"from":"llo","to":"ngt"},{"from":"myd","to":"aog"},{"from":"nns","to":"nbr"},{"from":"sgn-br","to":"bzs"},{"from":"sgn-co","to":"csn"},{"from":"sgn-de","to":"gsg"},{"from":"sgn-dk","to":"dsl"},{"from":"sgn-fr","to":"fsl"},{"from":"sgn-gb","to":"bfi"},{"from":"sgn-gr","to":"gss"},{"from":"sgn-ie","to":"isg"},{"from":"sgn-it","to":"ise"},{"from":"sgn-jp","to":"jsl"},{"from":"sgn-mx","to":"mfs"},{"from":"sgn-ni","to":"ncs"},{"from":"sgn-nl","to":"dse"},{"from":"sgn-no","to":"nsi"},{"from":"sgn-pt","to":"psr"},{"from":"sgn-se","to":"swl"},{"from":"sgn-us","to":"ase"},{"from":"sgn-za","to":"sfs"},{"from":"no-bokmal","to":"nb"},{"from":"no-nynorsk","to":"nn"},{"from":"aa-saaho","to":"ssy"},{"from":"sh","to":"sr-latn"},{"from":"cnr","to":"sr-me"},{"from":"no","to":"nb"},{"from":"tl","to":"fil"},{"from":"az-az","to":"az-latn-az"},{"from":"bs-ba","to":"bs-latn-ba"},{"from":"ha-latn-gh","to":"ha-gh"},{"from":"ha-latn-ne","to":"ha-ne"},{"from":"ha-latn-ng","to":"ha-ng"},{"from":"kk-cyrl-kz","to":"kk-kz"},{"from":"ky-cyrl-kg","to":"ky-kg"},{"from":"ks-arab-in","to":"ks-in"},{"from":"mn-cyrl-mn","to":"mn-mn"},{"from":"ms-latn-bn","to":"ms-bn"},{"from":"ms-latn-my","to":"ms-my"},{"from":"ms-latn-sg","to":"ms-sg"},{"from":"pa-in","to":"pa-guru-in"},{"from":"pa-pk","to":"pa-arab-pk"},{"from":"shi-ma","to":"shi-tfng-ma"},{"from":"sr-ba","to":"sr-cyrl-ba"},{"from":"sr-me","to":"sr-latn-me"},{"from":"sr-rs","to":"sr-cyrl-rs"},{"from":"sr-xk","to":"sr-cyrl-xk"},{"from":"tzm-latn-ma","to":"tzm-ma"},{"from":"ug-arab-cn","to":"ug-cn"},{"from":"uz-af","to":"uz-arab-af"},{"from":"uz-uz","to":"uz-latn-uz"},{"from":"vai-lr","to":"vai-vaii-lr"},{"from":"yue-cn","to":"yue-hans-cn"},{"from":"yue-hk","to":"yue-hant-hk"},{"from":"zh-cn","to":"zh-hans-cn"},{"from":"zh-hk","to":"zh-hant-hk"},{"from":"zh-mo","to":"zh-hant-mo"},{"from":"zh-sg","to":"zh-hans-sg"},{"from":"zh-tw","to":"zh-hant-tw"},{"from":"aju","to":"jrb"},{"from":"als","to":"sq"},{"from":"arb","to":"ar"},{"from":"ayr","to":"ay"},{"from":"azj","to":"az"},{"from":"bcc","to":"bal"},{"from":"bcl","to":"bik"},{"from":"bxk","to":"luy"},{"from":"bxr","to":"bua"},{"from":"cld","to":"syr"},{"from":"cmn","to":"zh"},{"from":"cwd","to":"cr"},{"from":"dgo","to":"doi"},{"from":"dhd","to":"mwr"},{"from":"dik","to":"din"},{"from":"diq","to":"zza"},{"from":"lbk","to":"bnc"},{"from":"ekk","to":"et"},{"from":"emk","to":"man"},{"from":"esk","to":"ik"},{"from":"fat","to":"ak"},{"from":"fuc","to":"ff"},{"from":"gaz","to":"om"},{"from":"gbo","to":"grb"},{"from":"gno","to":"gon"},{"from":"gug","to":"gn"},{"from":"gya","to":"gba"},{"from":"hdn","to":"hai"},{"from":"hea","to":"hmn"},{"from":"ike","to":"iu"},{"from":"kmr","to":"ku"},{"from":"knc","to":"kr"},{"from":"kng","to":"kg"},{"from":"knn","to":"kok"},{"from":"kpv","to":"kv"},{"from":"lvs","to":"lv"},{"from":"mhr","to":"chm"},{"from":"mup","to":"raj"},{"from":"khk","to":"mn"},{"from":"npi","to":"ne"},{"from":"ojg","to":"oj"},{"from":"ory","to":"or"},{"from":"pbu","to":"ps"},{"from":"pes","to":"fa"},{"from":"plt","to":"mg"},{"from":"pnb","to":"lah"},{"from":"quz","to":"qu"},{"from":"rmy","to":"rom"},{"from":"spy","to":"kln"},{"from":"src","to":"sc"},{"from":"swh","to":"sw"},{"from":"ttq","to":"tmh"},{"from":"tw","to":"ak"},{"from":"umu","to":"del"},{"from":"uzn","to":"uz"},{"from":"xpe","to":"kpe"},{"from":"xsl","to":"den"},{"from":"ydd","to":"yi"},{"from":"zai","to":"zap"},{"from":"zsm","to":"ms"},{"from":"zyb","to":"za"},{"from":"him","to":"srx"},{"from":"mnk","to":"man"},{"from":"bh","to":"bho"},{"from":"prs","to":"fa-af"},{"from":"swc","to":"sw-cd"},{"from":"aar","to":"aa"},{"from":"abk","to":"ab"},{"from":"ave","to":"ae"},{"from":"afr","to":"af"},{"from":"aka","to":"ak"},{"from":"amh","to":"am"},{"from":"arg","to":"an"},{"from":"ara","to":"ar"},{"from":"asm","to":"as"},{"from":"ava","to":"av"},{"from":"aym","to":"ay"},{"from":"aze","to":"az"},{"from":"bak","to":"ba"},{"from":"bel","to":"be"},{"from":"bul","to":"bg"},{"from":"bih","to":"bho"},{"from":"bis","to":"bi"},{"from":"bam","to":"bm"},{"from":"ben","to":"bn"},{"from":"bod","to":"bo"},{"from":"bre","to":"br"},{"from":"bos","to":"bs"},{"from":"cat","to":"ca"},{"from":"che","to":"ce"},{"from":"cha","to":"ch"},{"from":"cos","to":"co"},{"from":"cre","to":"cr"},{"from":"ces","to":"cs"},{"from":"chu","to":"cu"},{"from":"chv","to":"cv"},{"from":"cym","to":"cy"},{"from":"dan","to":"da"},{"from":"deu","to":"de"},{"from":"div","to":"dv"},{"from":"dzo","to":"dz"},{"from":"ewe","to":"ee"},{"from":"ell","to":"el"},{"from":"eng","to":"en"},{"from":"epo","to":"eo"},{"from":"spa","to":"es"},{"from":"est","to":"et"},{"from":"eus","to":"eu"},{"from":"fas","to":"fa"},{"from":"ful","to":"ff"},{"from":"fin","to":"fi"},{"from":"fij","to":"fj"},{"from":"fao","to":"fo"},{"from":"fra","to":"fr"},{"from":"fry","to":"fy"},{"from":"gle","to":"ga"},{"from":"gla","to":"gd"},{"from":"glg","to":"gl"},{"from":"grn","to":"gn"},{"from":"guj","to":"gu"},{"from":"glv","to":"gv"},{"from":"hau","to":"ha"},{"from":"heb","to":"he"},{"from":"hin","to":"hi"},{"from":"hmo","to":"ho"},{"from":"hrv","to":"hr"},{"from":"hat","to":"ht"},{"from":"hun","to":"hu"},{"from":"hye","to":"hy"},{"from":"her","to":"hz"},{"from":"ina","to":"ia"},{"from":"ind","to":"id"},{"from":"ile","to":"ie"},{"from":"ibo","to":"ig"},{"from":"iii","to":"ii"},{"from":"ipk","to":"ik"},{"from":"ido","to":"io"},{"from":"isl","to":"is"},{"from":"ita","to":"it"},{"from":"iku","to":"iu"},{"from":"jpn","to":"ja"},{"from":"jav","to":"jv"},{"from":"kat","to":"ka"},{"from":"kon","to":"kg"},{"from":"kik","to":"ki"},{"from":"kua","to":"kj"},{"from":"kaz","to":"kk"},{"from":"kal","to":"kl"},{"from":"khm","to":"km"},{"from":"kan","to":"kn"},{"from":"kor","to":"ko"},{"from":"kau","to":"kr"},{"from":"kas","to":"ks"},{"from":"kur","to":"ku"},{"from":"kom","to":"kv"},{"from":"cor","to":"kw"},{"from":"kir","to":"ky"},{"from":"lat","to":"la"},{"from":"ltz","to":"lb"},{"from":"lug","to":"lg"},{"from":"lim","to":"li"},{"from":"lin","to":"ln"},{"from":"lao","to":"lo"},{"from":"lit","to":"lt"},{"from":"lub","to":"lu"},{"from":"lav","to":"lv"},{"from":"mlg","to":"mg"},{"from":"mah","to":"mh"},{"from":"mri","to":"mi"},{"from":"mkd","to":"mk"},{"from":"mal","to":"ml"},{"from":"mon","to":"mn"},{"from":"mol","to":"ro"},{"from":"mar","to":"mr"},{"from":"msa","to":"ms"},{"from":"mlt","to":"mt"},{"from":"mya","to":"my"},{"from":"nau","to":"na"},{"from":"nob","to":"nb"},{"from":"nde","to":"nd"},{"from":"nep","to":"ne"},{"from":"ndo","to":"ng"},{"from":"nld","to":"nl"},{"from":"nno","to":"nn"},{"from":"nor","to":"nb"},{"from":"nbl","to":"nr"},{"from":"nav","to":"nv"},{"from":"nya","to":"ny"},{"from":"oci","to":"oc"},{"from":"oji","to":"oj"},{"from":"orm","to":"om"},{"from":"ori","to":"or"},{"from":"oss","to":"os"},{"from":"pan","to":"pa"},{"from":"pli","to":"pi"},{"from":"pol","to":"pl"},{"from":"pus","to":"ps"},{"from":"por","to":"pt"},{"from":"que","to":"qu"},{"from":"roh","to":"rm"},{"from":"run","to":"rn"},{"from":"ron","to":"ro"},{"from":"rus","to":"ru"},{"from":"kin","to":"rw"},{"from":"san","to":"sa"},{"from":"srd","to":"sc"},{"from":"snd","to":"sd"},{"from":"sme","to":"se"},{"from":"sag","to":"sg"},{"from":"hbs","to":"sr-latn"},{"from":"sin","to":"si"},{"from":"slk","to":"sk"},{"from":"slv","to":"sl"},{"from":"smo","to":"sm"},{"from":"sna","to":"sn"},{"from":"som","to":"so"},{"from":"sqi","to":"sq"},{"from":"srp","to":"sr"},{"from":"ssw","to":"ss"},{"from":"sot","to":"st"},{"from":"sun","to":"su"},{"from":"swe","to":"sv"},{"from":"swa","to":"sw"},{"from":"tam","to":"ta"},{"from":"tel","to":"te"},{"from":"tgk","to":"tg"},{"from":"tha","to":"th"},{"from":"tir","to":"ti"},{"from":"tuk","to":"tk"},{"from":"tgl","to":"fil"},{"from":"tsn","to":"tn"},{"from":"ton","to":"to"},{"from":"tur","to":"tr"},{"from":"tso","to":"ts"},{"from":"tat","to":"tt"},{"from":"twi","to":"ak"},{"from":"tah","to":"ty"},{"from":"uig","to":"ug"},{"from":"ukr","to":"uk"},{"from":"urd","to":"ur"},{"from":"uzb","to":"uz"},{"from":"ven","to":"ve"},{"from":"vie","to":"vi"},{"from":"vol","to":"vo"},{"from":"wln","to":"wa"},{"from":"wol","to":"wo"},{"from":"xho","to":"xh"},{"from":"yid","to":"yi"},{"from":"yor","to":"yo"},{"from":"zha","to":"za"},{"from":"zho","to":"zh"},{"from":"zul","to":"zu"},{"from":"alb","to":"sq"},{"from":"arm","to":"hy"},{"from":"baq","to":"eu"},{"from":"bur","to":"my"},{"from":"chi","to":"zh"},{"from":"cze","to":"cs"},{"from":"dut","to":"nl"},{"from":"fre","to":"fr"},{"from":"geo","to":"ka"},{"from":"ger","to":"de"},{"from":"gre","to":"el"},{"from":"ice","to":"is"},{"from":"mac","to":"mk"},{"from":"mao","to":"mi"},{"from":"may","to":"ms"},{"from":"per","to":"fa"},{"from":"rum","to":"ro"},{"from":"slo","to":"sk"},{"from":"tib","to":"bo"},{"from":"wel","to":"cy"}]')},"./node_modules/bcp-47/index.js":function(e,t,r){t.parse=r("./node_modules/bcp-47/lib/parse.js"),t.stringify=r("./node_modules/bcp-47/lib/stringify.js")},"./node_modules/bcp-47/lib/normalize.json":function(e){e.exports=JSON.parse('{"en-gb-oed":"en-GB-oxendict","i-ami":"ami","i-bnn":"bnn","i-default":null,"i-enochian":null,"i-hak":"hak","i-klingon":"tlh","i-lux":"lb","i-mingo":null,"i-navajo":"nv","i-pwn":"pwn","i-tao":"tao","i-tay":"tay","i-tsu":"tsu","sgn-be-fr":"sfb","sgn-be-nl":"vgt","sgn-ch-de":"sgg","art-lojban":"jbo","cel-gaulish":null,"no-bok":"nb","no-nyn":"nn","zh-guoyu":"cmn","zh-hakka":"hak","zh-min":null,"zh-min-nan":"nan","zh-xiang":"hsn"}')},"./node_modules/bcp-47/lib/parse.js":function(e,t,r){var n=r("./node_modules/is-alphanumerical/index.js"),i=r("./node_modules/is-alphabetical/index.js"),o=r("./node_modules/is-decimal/index.js"),u=r("./node_modules/bcp-47/lib/regular.json"),l=r("./node_modules/bcp-47/lib/normalize.json");e.exports=function e(t,r){var f,d,h,p=r||{},m={language:null,extendedLanguageSubtags:[],script:null,region:null,variants:[],extensions:[],privateuse:[],irregular:null,regular:null},g=String(t),y=g.toLowerCase(),v=0;if(null==t)throw Error("Expected string, got `"+t+"`");if(c.call(l,y))return(null==p.normalize||p.normalize)&&l[y]?e(l[y]):(m[-1===u.indexOf(y)?"irregular":"regular"]=g,m);for(;i(y.charCodeAt(v))&&v<9;)v++;if(v>1&&v<9){if(m.language=g.slice(0,v),v<4)for(d=0;45===y.charCodeAt(v)&&i(y.charCodeAt(v+1))&&i(y.charCodeAt(v+2))&&i(y.charCodeAt(v+3))&&!i(y.charCodeAt(v+4));){if(d>2)return b(v,3,"Too many extended language subtags, expected at most 3 subtags");m.extendedLanguageSubtags.push(g.slice(v+1,v+4)),v+=4,d++}for(45===y.charCodeAt(v)&&i(y.charCodeAt(v+1))&&i(y.charCodeAt(v+2))&&i(y.charCodeAt(v+3))&&i(y.charCodeAt(v+4))&&!i(y.charCodeAt(v+5))&&(m.script=g.slice(v+1,v+5),v+=5),45===y.charCodeAt(v)&&(i(y.charCodeAt(v+1))&&i(y.charCodeAt(v+2))&&!i(y.charCodeAt(v+3))?(m.region=g.slice(v+1,v+3),v+=3):o(y.charCodeAt(v+1))&&o(y.charCodeAt(v+2))&&o(y.charCodeAt(v+3))&&!o(y.charCodeAt(v+4))&&(m.region=g.slice(v+1,v+4),v+=4));45===y.charCodeAt(v);){for(h=f=v+1;n(y.charCodeAt(h));){if(h-f>7)return b(h,1,"Too long variant, expected at most 8 characters");h++}if(!(h-f>4||h-f>3&&o(y.charCodeAt(f))))break;m.variants.push(g.slice(f,h)),v=h}for(;45===y.charCodeAt(v)&&120!==y.charCodeAt(v+1)&&n(y.charCodeAt(v+1))&&45===y.charCodeAt(v+2)&&n(y.charCodeAt(v+3));){for(h=v+2,d=0;45===y.charCodeAt(h)&&n(y.charCodeAt(h+1))&&n(y.charCodeAt(h+2));)for(h=(f=h+1)+2,d++;n(y.charCodeAt(h));){if(h-f>7)return b(h,2,"Too long extension, expected at most 8 characters");h++}if(!d)return b(h,4,"Empty extension, extensions must have at least 2 characters of content");m.extensions.push({singleton:g.charAt(v+1),extensions:g.slice(v+3,h).split("-")}),v=h}}else v=0;if(0===v&&120===y.charCodeAt(v)||45===y.charCodeAt(v)&&120===y.charCodeAt(v+1))for(h=v=v?v+2:1;45===y.charCodeAt(h)&&n(y.charCodeAt(h+1));){for(h=f=v+1;n(y.charCodeAt(h));){if(h-f>7)return b(h,5,"Too long private-use area, expected at most 8 characters");h++}m.privateuse.push(g.slice(v+1,h)),v=h}return v!==g.length?b(v,6,"Found superfluous content after tag"):m;function b(e,t,r){return p.warning&&p.warning(r,t,e),p.forgiving?m:{language:null,extendedLanguageSubtags:[],script:null,region:null,variants:[],extensions:[],privateuse:[],irregular:null,regular:null}}};var c={}.hasOwnProperty},"./node_modules/bcp-47/lib/regular.json":function(e){e.exports=JSON.parse('["art-lojban","cel-gaulish","no-bok","no-nyn","zh-guoyu","zh-hakka","zh-min","zh-min-nan","zh-xiang"]')},"./node_modules/bcp-47/lib/stringify.js":function(e,t,r){e.exports=function(e){var t,r,n,i=e||{},o=[];if(i.irregular||i.regular)return i.irregular||i.regular;if(i.language)for(o=o.concat(i.language,i.extendedLanguageSubtags||[],i.script||[],i.region||[],i.variants||[]),t=i.extensions||[],r=-1;++r<t.length;)(n=t[r]).singleton&&n.extensions&&n.extensions.length&&(o=o.concat(n.singleton,n.extensions));return i.privateuse&&i.privateuse.length&&(o=o.concat("x",i.privateuse)),o.join("-")}},"./node_modules/buffer/index.js":function(e,t,r){(function(e){var n=r("./node_modules/base64-js/index.js"),i=r("./node_modules/ieee754/index.js"),o=r("./node_modules/isarray/index.js");function u(){return c.TYPED_ARRAY_SUPPORT?2147483647:1073741823}function l(e,t){if(u()<t)throw RangeError("Invalid typed array length");return c.TYPED_ARRAY_SUPPORT?(e=new Uint8Array(t)).__proto__=c.prototype:(null===e&&(e=new c(t)),e.length=t),e}function c(e,t,r){if(!(c.TYPED_ARRAY_SUPPORT||this instanceof c))return new c(e,t,r);if("number"==typeof e){if("string"==typeof t)throw Error("If encoding is specified then the first argument must be a string");return h(this,e)}return f(this,e,t,r)}function f(e,t,r,n){if("number"==typeof t)throw TypeError('"value" argument must not be a number');return"undefined"!=typeof ArrayBuffer&&t instanceof ArrayBuffer?function(e,t,r,n){if(t.byteLength,r<0||t.byteLength<r)throw RangeError("'offset' is out of bounds");if(t.byteLength<r+(n||0))throw RangeError("'length' is out of bounds");return t=void 0===r&&void 0===n?new Uint8Array(t):void 0===n?new Uint8Array(t,r):new Uint8Array(t,r,n),c.TYPED_ARRAY_SUPPORT?(e=t).__proto__=c.prototype:e=p(e,t),e}(e,t,r,n):"string"==typeof t?function(e,t,r){if("string"==typeof r&&""!==r||(r="utf8"),!c.isEncoding(r))throw TypeError('"encoding" must be a valid string encoding');var n=0|g(t,r),i=(e=l(e,n)).write(t,r);return i!==n&&(e=e.slice(0,i)),e}(e,t,r):function(e,t){if(c.isBuffer(t)){var r,n=0|m(t.length);return 0===(e=l(e,n)).length||t.copy(e,0,0,n),e}if(t){if("undefined"!=typeof ArrayBuffer&&t.buffer instanceof ArrayBuffer||"length"in t)return"number"!=typeof t.length||(r=t.length)!=r?l(e,0):p(e,t);if("Buffer"===t.type&&o(t.data))return p(e,t.data)}throw TypeError("First argument must be a string, Buffer, ArrayBuffer, Array, or array-like object.")}(e,t)}function d(e){if("number"!=typeof e)throw TypeError('"size" argument must be a number');if(e<0)throw RangeError('"size" argument must not be negative')}function h(e,t){if(d(t),e=l(e,t<0?0:0|m(t)),!c.TYPED_ARRAY_SUPPORT)for(var r=0;r<t;++r)e[r]=0;return e}function p(e,t){var r=t.length<0?0:0|m(t.length);e=l(e,r);for(var n=0;n<r;n+=1)e[n]=255&t[n];return e}function m(e){if(e>=u())throw RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+u().toString(16)+" bytes");return 0|e}function g(e,t){if(c.isBuffer(e))return e.length;if("undefined"!=typeof ArrayBuffer&&"function"==typeof ArrayBuffer.isView&&(ArrayBuffer.isView(e)||e instanceof ArrayBuffer))return e.byteLength;"string"!=typeof e&&(e=""+e);var r=e.length;if(0===r)return 0;for(var n=!1;;)switch(t){case"ascii":case"latin1":case"binary":return r;case"utf8":case"utf-8":case void 0:return k(e).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*r;case"hex":return r>>>1;case"base64":return D(e).length;default:if(n)return k(e).length;t=(""+t).toLowerCase(),n=!0}}function y(e,t,r){var i,o,u=!1;if((void 0===t||t<0)&&(t=0),t>this.length||((void 0===r||r>this.length)&&(r=this.length),r<=0)||(r>>>=0)<=(t>>>=0))return"";for(e||(e="utf8");;)switch(e){case"hex":return function(e,t,r){var n,i=e.length;(!t||t<0)&&(t=0),(!r||r<0||r>i)&&(r=i);for(var o="",u=t;u<r;++u)o+=(n=e[u])<16?"0"+n.toString(16):n.toString(16);return o}(this,t,r);case"utf8":case"utf-8":return T(this,t,r);case"ascii":return function(e,t,r){var n="";r=Math.min(e.length,r);for(var i=t;i<r;++i)n+=String.fromCharCode(127&e[i]);return n}(this,t,r);case"latin1":case"binary":return function(e,t,r){var n="";r=Math.min(e.length,r);for(var i=t;i<r;++i)n+=String.fromCharCode(e[i]);return n}(this,t,r);case"base64":return i=t,o=r,0===i&&o===this.length?n.fromByteArray(this):n.fromByteArray(this.slice(i,o));case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return function(e,t,r){for(var n=e.slice(t,r),i="",o=0;o<n.length;o+=2)i+=String.fromCharCode(n[o]+256*n[o+1]);return i}(this,t,r);default:if(u)throw TypeError("Unknown encoding: "+e);e=(e+"").toLowerCase(),u=!0}}function v(e,t,r){var n=e[t];e[t]=e[r],e[r]=n}function b(e,t,r,n,i){if(0===e.length)return -1;if("string"==typeof r?(n=r,r=0):r>2147483647?r=2147483647:r<-2147483648&&(r=-2147483648),isNaN(r=+r)&&(r=i?0:e.length-1),r<0&&(r=e.length+r),r>=e.length){if(i)return -1;r=e.length-1}else if(r<0){if(!i)return -1;r=0}if("string"==typeof t&&(t=c.from(t,n)),c.isBuffer(t))return 0===t.length?-1:_(e,t,r,n,i);if("number"==typeof t)return t&=255,c.TYPED_ARRAY_SUPPORT&&"function"==typeof Uint8Array.prototype.indexOf?i?Uint8Array.prototype.indexOf.call(e,t,r):Uint8Array.prototype.lastIndexOf.call(e,t,r):_(e,[t],r,n,i);throw TypeError("val must be string, number or Buffer")}function _(e,t,r,n,i){var o,u=1,l=e.length,c=t.length;if(void 0!==n&&("ucs2"===(n=String(n).toLowerCase())||"ucs-2"===n||"utf16le"===n||"utf-16le"===n)){if(e.length<2||t.length<2)return -1;u=2,l/=2,c/=2,r/=2}function f(e,t){return 1===u?e[t]:e.readUInt16BE(t*u)}if(i){var d=-1;for(o=r;o<l;o++)if(f(e,o)===f(t,-1===d?0:o-d)){if(-1===d&&(d=o),o-d+1===c)return d*u}else -1!==d&&(o-=o-d),d=-1}else for(r+c>l&&(r=l-c),o=r;o>=0;o--){for(var h=!0,p=0;p<c;p++)if(f(e,o+p)!==f(t,p)){h=!1;break}if(h)return o}return -1}function T(e,t,r){r=Math.min(e.length,r);for(var n=[],i=t;i<r;){var o,u,l,c,f=e[i],d=null,h=f>239?4:f>223?3:f>191?2:1;if(i+h<=r)switch(h){case 1:f<128&&(d=f);break;case 2:128==(192&(o=e[i+1]))&&(c=(31&f)<<6|63&o)>127&&(d=c);break;case 3:o=e[i+1],u=e[i+2],128==(192&o)&&128==(192&u)&&(c=(15&f)<<12|(63&o)<<6|63&u)>2047&&(c<55296||c>57343)&&(d=c);break;case 4:o=e[i+1],u=e[i+2],l=e[i+3],128==(192&o)&&128==(192&u)&&128==(192&l)&&(c=(15&f)<<18|(63&o)<<12|(63&u)<<6|63&l)>65535&&c<1114112&&(d=c)}null===d?(d=65533,h=1):d>65535&&(d-=65536,n.push(d>>>10&1023|55296),d=56320|1023&d),n.push(d),i+=h}return function(e){var t=e.length;if(t<=E)return String.fromCharCode.apply(String,e);for(var r="",n=0;n<t;)r+=String.fromCharCode.apply(String,e.slice(n,n+=E));return r}(n)}t.Buffer=c,t.SlowBuffer=function(e){return+e!=e&&(e=0),c.alloc(+e)},t.INSPECT_MAX_BYTES=50,c.TYPED_ARRAY_SUPPORT=void 0!==e.TYPED_ARRAY_SUPPORT?e.TYPED_ARRAY_SUPPORT:function(){try{var e=new Uint8Array(1);return e.__proto__={__proto__:Uint8Array.prototype,foo:function(){return 42}},42===e.foo()&&"function"==typeof e.subarray&&0===e.subarray(1,1).byteLength}catch(e){return!1}}(),t.kMaxLength=u(),c.poolSize=8192,c._augment=function(e){return e.__proto__=c.prototype,e},c.from=function(e,t,r){return f(null,e,t,r)},c.TYPED_ARRAY_SUPPORT&&(c.prototype.__proto__=Uint8Array.prototype,c.__proto__=Uint8Array,"undefined"!=typeof Symbol&&Symbol.species&&c[Symbol.species]===c&&Object.defineProperty(c,Symbol.species,{value:null,configurable:!0})),c.alloc=function(e,t,r){return d(e),e<=0?l(null,e):void 0!==t?"string"==typeof r?l(null,e).fill(t,r):l(null,e).fill(t):l(null,e)},c.allocUnsafe=function(e){return h(null,e)},c.allocUnsafeSlow=function(e){return h(null,e)},c.isBuffer=function(e){return!(null==e||!e._isBuffer)},c.compare=function(e,t){if(!c.isBuffer(e)||!c.isBuffer(t))throw TypeError("Arguments must be Buffers");if(e===t)return 0;for(var r=e.length,n=t.length,i=0,o=Math.min(r,n);i<o;++i)if(e[i]!==t[i]){r=e[i],n=t[i];break}return r<n?-1:n<r?1:0},c.isEncoding=function(e){switch(String(e).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},c.concat=function(e,t){if(!o(e))throw TypeError('"list" argument must be an Array of Buffers');if(0===e.length)return c.alloc(0);if(void 0===t)for(t=0,r=0;r<e.length;++r)t+=e[r].length;var r,n=c.allocUnsafe(t),i=0;for(r=0;r<e.length;++r){var u=e[r];if(!c.isBuffer(u))throw TypeError('"list" argument must be an Array of Buffers');u.copy(n,i),i+=u.length}return n},c.byteLength=g,c.prototype._isBuffer=!0,c.prototype.swap16=function(){var e=this.length;if(e%2!=0)throw RangeError("Buffer size must be a multiple of 16-bits");for(var t=0;t<e;t+=2)v(this,t,t+1);return this},c.prototype.swap32=function(){var e=this.length;if(e%4!=0)throw RangeError("Buffer size must be a multiple of 32-bits");for(var t=0;t<e;t+=4)v(this,t,t+3),v(this,t+1,t+2);return this},c.prototype.swap64=function(){var e=this.length;if(e%8!=0)throw RangeError("Buffer size must be a multiple of 64-bits");for(var t=0;t<e;t+=8)v(this,t,t+7),v(this,t+1,t+6),v(this,t+2,t+5),v(this,t+3,t+4);return this},c.prototype.toString=function(){var e=0|this.length;return 0===e?"":0==arguments.length?T(this,0,e):y.apply(this,arguments)},c.prototype.equals=function(e){if(!c.isBuffer(e))throw TypeError("Argument must be a Buffer");return this===e||0===c.compare(this,e)},c.prototype.inspect=function(){var e="",r=t.INSPECT_MAX_BYTES;return this.length>0&&(e=this.toString("hex",0,r).match(/.{2}/g).join(" "),this.length>r&&(e+=" ... ")),"<Buffer "+e+">"},c.prototype.compare=function(e,t,r,n,i){if(!c.isBuffer(e))throw TypeError("Argument must be a Buffer");if(void 0===t&&(t=0),void 0===r&&(r=e?e.length:0),void 0===n&&(n=0),void 0===i&&(i=this.length),t<0||r>e.length||n<0||i>this.length)throw RangeError("out of range index");if(n>=i&&t>=r)return 0;if(n>=i)return -1;if(t>=r)return 1;if(this===e)return 0;for(var o=(i>>>=0)-(n>>>=0),u=(r>>>=0)-(t>>>=0),l=Math.min(o,u),f=this.slice(n,i),d=e.slice(t,r),h=0;h<l;++h)if(f[h]!==d[h]){o=f[h],u=d[h];break}return o<u?-1:u<o?1:0},c.prototype.includes=function(e,t,r){return -1!==this.indexOf(e,t,r)},c.prototype.indexOf=function(e,t,r){return b(this,e,t,r,!0)},c.prototype.lastIndexOf=function(e,t,r){return b(this,e,t,r,!1)},c.prototype.write=function(e,t,r,n){if(void 0===t)n="utf8",r=this.length,t=0;else if(void 0===r&&"string"==typeof t)n=t,r=this.length,t=0;else{if(!isFinite(t))throw Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");t|=0,isFinite(r)?(r|=0,void 0===n&&(n="utf8")):(n=r,r=void 0)}var i,o,u,l,c,f,d,h,p,m,g=this.length-t;if((void 0===r||r>g)&&(r=g),e.length>0&&(r<0||t<0)||t>this.length)throw RangeError("Attempt to write outside buffer bounds");n||(n="utf8");for(var y=!1;;)switch(n){case"hex":return function(e,t,r,n){r=Number(r)||0;var i=e.length-r;n?(n=Number(n))>i&&(n=i):n=i;var o=t.length;if(o%2!=0)throw TypeError("Invalid hex string");n>o/2&&(n=o/2);for(var u=0;u<n;++u){var l=parseInt(t.substr(2*u,2),16);if(isNaN(l))break;e[r+u]=l}return u}(this,e,t,r);case"utf8":case"utf-8":return c=t,f=r,N(k(e,this.length-c),this,c,f);case"ascii":case"latin1":case"binary":return i=this,o=e,u=t,l=r,N(function(e){for(var t=[],r=0;r<e.length;++r)t.push(255&e.charCodeAt(r));return t}(o),i,u,l);case"base64":return d=t,h=r,N(D(e),this,d,h);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return p=t,m=r,N(function(e,t){for(var r,n,i=[],o=0;o<e.length&&!((t-=2)<0);++o)n=(r=e.charCodeAt(o))>>8,i.push(r%256),i.push(n);return i}(e,this.length-p),this,p,m);default:if(y)throw TypeError("Unknown encoding: "+n);n=(""+n).toLowerCase(),y=!0}},c.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};var E=4096;function S(e,t,r){if(e%1!=0||e<0)throw RangeError("offset is not uint");if(e+t>r)throw RangeError("Trying to access beyond buffer length")}function w(e,t,r,n,i,o){if(!c.isBuffer(e))throw TypeError('"buffer" argument must be a Buffer instance');if(t>i||t<o)throw RangeError('"value" argument is out of bounds');if(r+n>e.length)throw RangeError("Index out of range")}function A(e,t,r,n){t<0&&(t=65535+t+1);for(var i=0,o=Math.min(e.length-r,2);i<o;++i)e[r+i]=(t&255<<8*(n?i:1-i))>>>8*(n?i:1-i)}function C(e,t,r,n){t<0&&(t=4294967295+t+1);for(var i=0,o=Math.min(e.length-r,4);i<o;++i)e[r+i]=t>>>8*(n?i:3-i)&255}function I(e,t,r,n,i,o){if(r+n>e.length||r<0)throw RangeError("Index out of range")}function O(e,t,r,n,o){return o||I(e,0,r,4),i.write(e,t,r,n,23,4),r+4}function R(e,t,r,n,o){return o||I(e,0,r,8),i.write(e,t,r,n,52,8),r+8}c.prototype.slice=function(e,t){var r,n=this.length;if((e=~~e)<0?(e+=n)<0&&(e=0):e>n&&(e=n),(t=void 0===t?n:~~t)<0?(t+=n)<0&&(t=0):t>n&&(t=n),t<e&&(t=e),c.TYPED_ARRAY_SUPPORT)(r=this.subarray(e,t)).__proto__=c.prototype;else{var i=t-e;r=new c(i,void 0);for(var o=0;o<i;++o)r[o]=this[o+e]}return r},c.prototype.readUIntLE=function(e,t,r){e|=0,t|=0,r||S(e,t,this.length);for(var n=this[e],i=1,o=0;++o<t&&(i*=256);)n+=this[e+o]*i;return n},c.prototype.readUIntBE=function(e,t,r){e|=0,t|=0,r||S(e,t,this.length);for(var n=this[e+--t],i=1;t>0&&(i*=256);)n+=this[e+--t]*i;return n},c.prototype.readUInt8=function(e,t){return t||S(e,1,this.length),this[e]},c.prototype.readUInt16LE=function(e,t){return t||S(e,2,this.length),this[e]|this[e+1]<<8},c.prototype.readUInt16BE=function(e,t){return t||S(e,2,this.length),this[e]<<8|this[e+1]},c.prototype.readUInt32LE=function(e,t){return t||S(e,4,this.length),(this[e]|this[e+1]<<8|this[e+2]<<16)+16777216*this[e+3]},c.prototype.readUInt32BE=function(e,t){return t||S(e,4,this.length),16777216*this[e]+(this[e+1]<<16|this[e+2]<<8|this[e+3])},c.prototype.readIntLE=function(e,t,r){e|=0,t|=0,r||S(e,t,this.length);for(var n=this[e],i=1,o=0;++o<t&&(i*=256);)n+=this[e+o]*i;return n>=(i*=128)&&(n-=Math.pow(2,8*t)),n},c.prototype.readIntBE=function(e,t,r){e|=0,t|=0,r||S(e,t,this.length);for(var n=t,i=1,o=this[e+--n];n>0&&(i*=256);)o+=this[e+--n]*i;return o>=(i*=128)&&(o-=Math.pow(2,8*t)),o},c.prototype.readInt8=function(e,t){return t||S(e,1,this.length),128&this[e]?-1*(255-this[e]+1):this[e]},c.prototype.readInt16LE=function(e,t){t||S(e,2,this.length);var r=this[e]|this[e+1]<<8;return 32768&r?4294901760|r:r},c.prototype.readInt16BE=function(e,t){t||S(e,2,this.length);var r=this[e+1]|this[e]<<8;return 32768&r?4294901760|r:r},c.prototype.readInt32LE=function(e,t){return t||S(e,4,this.length),this[e]|this[e+1]<<8|this[e+2]<<16|this[e+3]<<24},c.prototype.readInt32BE=function(e,t){return t||S(e,4,this.length),this[e]<<24|this[e+1]<<16|this[e+2]<<8|this[e+3]},c.prototype.readFloatLE=function(e,t){return t||S(e,4,this.length),i.read(this,e,!0,23,4)},c.prototype.readFloatBE=function(e,t){return t||S(e,4,this.length),i.read(this,e,!1,23,4)},c.prototype.readDoubleLE=function(e,t){return t||S(e,8,this.length),i.read(this,e,!0,52,8)},c.prototype.readDoubleBE=function(e,t){return t||S(e,8,this.length),i.read(this,e,!1,52,8)},c.prototype.writeUIntLE=function(e,t,r,n){e=+e,t|=0,r|=0,n||w(this,e,t,r,Math.pow(2,8*r)-1,0);var i=1,o=0;for(this[t]=255&e;++o<r&&(i*=256);)this[t+o]=e/i&255;return t+r},c.prototype.writeUIntBE=function(e,t,r,n){e=+e,t|=0,r|=0,n||w(this,e,t,r,Math.pow(2,8*r)-1,0);var i=r-1,o=1;for(this[t+i]=255&e;--i>=0&&(o*=256);)this[t+i]=e/o&255;return t+r},c.prototype.writeUInt8=function(e,t,r){return e=+e,t|=0,r||w(this,e,t,1,255,0),c.TYPED_ARRAY_SUPPORT||(e=Math.floor(e)),this[t]=255&e,t+1},c.prototype.writeUInt16LE=function(e,t,r){return e=+e,t|=0,r||w(this,e,t,2,65535,0),c.TYPED_ARRAY_SUPPORT?(this[t]=255&e,this[t+1]=e>>>8):A(this,e,t,!0),t+2},c.prototype.writeUInt16BE=function(e,t,r){return e=+e,t|=0,r||w(this,e,t,2,65535,0),c.TYPED_ARRAY_SUPPORT?(this[t]=e>>>8,this[t+1]=255&e):A(this,e,t,!1),t+2},c.prototype.writeUInt32LE=function(e,t,r){return e=+e,t|=0,r||w(this,e,t,4,4294967295,0),c.TYPED_ARRAY_SUPPORT?(this[t+3]=e>>>24,this[t+2]=e>>>16,this[t+1]=e>>>8,this[t]=255&e):C(this,e,t,!0),t+4},c.prototype.writeUInt32BE=function(e,t,r){return e=+e,t|=0,r||w(this,e,t,4,4294967295,0),c.TYPED_ARRAY_SUPPORT?(this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=255&e):C(this,e,t,!1),t+4},c.prototype.writeIntLE=function(e,t,r,n){if(e=+e,t|=0,!n){var i=Math.pow(2,8*r-1);w(this,e,t,r,i-1,-i)}var o=0,u=1,l=0;for(this[t]=255&e;++o<r&&(u*=256);)e<0&&0===l&&0!==this[t+o-1]&&(l=1),this[t+o]=(e/u>>0)-l&255;return t+r},c.prototype.writeIntBE=function(e,t,r,n){if(e=+e,t|=0,!n){var i=Math.pow(2,8*r-1);w(this,e,t,r,i-1,-i)}var o=r-1,u=1,l=0;for(this[t+o]=255&e;--o>=0&&(u*=256);)e<0&&0===l&&0!==this[t+o+1]&&(l=1),this[t+o]=(e/u>>0)-l&255;return t+r},c.prototype.writeInt8=function(e,t,r){return e=+e,t|=0,r||w(this,e,t,1,127,-128),c.TYPED_ARRAY_SUPPORT||(e=Math.floor(e)),e<0&&(e=255+e+1),this[t]=255&e,t+1},c.prototype.writeInt16LE=function(e,t,r){return e=+e,t|=0,r||w(this,e,t,2,32767,-32768),c.TYPED_ARRAY_SUPPORT?(this[t]=255&e,this[t+1]=e>>>8):A(this,e,t,!0),t+2},c.prototype.writeInt16BE=function(e,t,r){return e=+e,t|=0,r||w(this,e,t,2,32767,-32768),c.TYPED_ARRAY_SUPPORT?(this[t]=e>>>8,this[t+1]=255&e):A(this,e,t,!1),t+2},c.prototype.writeInt32LE=function(e,t,r){return e=+e,t|=0,r||w(this,e,t,4,2147483647,-2147483648),c.TYPED_ARRAY_SUPPORT?(this[t]=255&e,this[t+1]=e>>>8,this[t+2]=e>>>16,this[t+3]=e>>>24):C(this,e,t,!0),t+4},c.prototype.writeInt32BE=function(e,t,r){return e=+e,t|=0,r||w(this,e,t,4,2147483647,-2147483648),e<0&&(e=4294967295+e+1),c.TYPED_ARRAY_SUPPORT?(this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=255&e):C(this,e,t,!1),t+4},c.prototype.writeFloatLE=function(e,t,r){return O(this,e,t,!0,r)},c.prototype.writeFloatBE=function(e,t,r){return O(this,e,t,!1,r)},c.prototype.writeDoubleLE=function(e,t,r){return R(this,e,t,!0,r)},c.prototype.writeDoubleBE=function(e,t,r){return R(this,e,t,!1,r)},c.prototype.copy=function(e,t,r,n){if(r||(r=0),n||0===n||(n=this.length),t>=e.length&&(t=e.length),t||(t=0),n>0&&n<r&&(n=r),n===r||0===e.length||0===this.length)return 0;if(t<0)throw RangeError("targetStart out of bounds");if(r<0||r>=this.length)throw RangeError("sourceStart out of bounds");if(n<0)throw RangeError("sourceEnd out of bounds");n>this.length&&(n=this.length),e.length-t<n-r&&(n=e.length-t+r);var i,o=n-r;if(this===e&&r<t&&t<n)for(i=o-1;i>=0;--i)e[i+t]=this[i+r];else if(o<1e3||!c.TYPED_ARRAY_SUPPORT)for(i=0;i<o;++i)e[i+t]=this[i+r];else Uint8Array.prototype.set.call(e,this.subarray(r,r+o),t);return o},c.prototype.fill=function(e,t,r,n){if("string"==typeof e){if("string"==typeof t?(n=t,t=0,r=this.length):"string"==typeof r&&(n=r,r=this.length),1===e.length){var i,o=e.charCodeAt(0);o<256&&(e=o)}if(void 0!==n&&"string"!=typeof n)throw TypeError("encoding must be a string");if("string"==typeof n&&!c.isEncoding(n))throw TypeError("Unknown encoding: "+n)}else"number"==typeof e&&(e&=255);if(t<0||this.length<t||this.length<r)throw RangeError("Out of range index");if(r<=t)return this;if(t>>>=0,r=void 0===r?this.length:r>>>0,e||(e=0),"number"==typeof e)for(i=t;i<r;++i)this[i]=e;else{var u=c.isBuffer(e)?e:k(new c(e,n).toString()),l=u.length;for(i=0;i<r-t;++i)this[i+t]=u[i%l]}return this};var P=/[^+\/0-9A-Za-z-_]/g;function k(e,t){var r;t=t||1/0;for(var n=e.length,i=null,o=[],u=0;u<n;++u){if((r=e.charCodeAt(u))>55295&&r<57344){if(!i){if(r>56319||u+1===n){(t-=3)>-1&&o.push(239,191,189);continue}i=r;continue}if(r<56320){(t-=3)>-1&&o.push(239,191,189),i=r;continue}r=65536+(i-55296<<10|r-56320)}else i&&(t-=3)>-1&&o.push(239,191,189);if(i=null,r<128){if((t-=1)<0)break;o.push(r)}else if(r<2048){if((t-=2)<0)break;o.push(r>>6|192,63&r|128)}else if(r<65536){if((t-=3)<0)break;o.push(r>>12|224,r>>6&63|128,63&r|128)}else{if(!(r<1114112))throw Error("Invalid code point");if((t-=4)<0)break;o.push(r>>18|240,r>>12&63|128,r>>6&63|128,63&r|128)}}return o}function D(e){return n.toByteArray(function(e){var t;if((e=((t=e).trim?t.trim():t.replace(/^\s+|\s+$/g,"")).replace(P,"")).length<2)return"";for(;e.length%4!=0;)e+="=";return e}(e))}function N(e,t,r,n){for(var i=0;i<n&&!(i+r>=t.length||i>=e.length);++i)t[i+r]=e[i];return i}}).call(this,r("./node_modules/webpack/buildin/global.js"))},"./node_modules/codem-isoboxer/dist/iso_boxer.js":function(e,t,r){var n={parseBuffer:function(e){return new i(e).parse()},addBoxProcessor:function(e,t){"string"==typeof e&&"function"==typeof t&&(o.prototype._boxProcessors[e]=t)},createFile:function(){return new i},createBox:function(e,t,r){var n=o.create(e);return t&&t.append(n,r),n},createFullBox:function(e,t,r){var i=n.createBox(e,t,r);return i.version=0,i.flags=0,i},Utils:{}};n.Utils.dataViewToString=function(e,t){var r=t||"utf-8";if("undefined"!=typeof TextDecoder)return new TextDecoder(r).decode(e);var n=[],i=0;if("utf-8"===r)for(;i<e.byteLength;){var o=e.getUint8(i++);o<128||(o=o<224?(31&o)<<6|63&e.getUint8(i++):o<240?(15&o)<<12|(63&e.getUint8(i++))<<6|63&e.getUint8(i++):(7&o)<<18|(63&e.getUint8(i++))<<12|(63&e.getUint8(i++))<<6|63&e.getUint8(i++)),n.push(String.fromCharCode(o))}else for(;i<e.byteLength;)n.push(String.fromCharCode(e.getUint8(i++)));return n.join("")},n.Utils.utf8ToByteArray=function(e){var t,r;if("undefined"!=typeof TextEncoder)t=(new TextEncoder).encode(e);else for(t=[],r=0;r<e.length;++r){var n=e.charCodeAt(r);n<128?t.push(n):(n<2048?t.push(192|n>>6):(n<65536?t.push(224|n>>12):(t.push(240|n>>18),t.push(128|63&n>>12)),t.push(128|63&n>>6)),t.push(128|63&n))}return t},n.Utils.appendBox=function(e,t,r){if(t._offset=e._cursor.offset,t._root=e._root?e._root:e,t._raw=e._raw,t._parent=e,-1!==r){if(null!=r){var n,i=-1;if("number"==typeof r)i=r;else{if("string"==typeof r)n=r;else{if("object"!=typeof r||!r.type)return void e.boxes.push(t);n=r.type}for(var o=0;o<e.boxes.length;o++)if(n===e.boxes[o].type){i=o+1;break}}e.boxes.splice(i,0,t)}else e.boxes.push(t)}},t.parseBuffer=n.parseBuffer,t.addBoxProcessor=n.addBoxProcessor,t.createFile=n.createFile,t.createBox=n.createBox,t.createFullBox=n.createFullBox,t.Utils=n.Utils,n.Cursor=function(e){this.offset=void 0===e?0:e};var i=function(e){this._cursor=new n.Cursor,this.boxes=[],e&&(this._raw=new DataView(e))};i.prototype.fetch=function(e){var t=this.fetchAll(e,!0);return t.length?t[0]:null},i.prototype.fetchAll=function(e,t){var r=[];return i._sweep.call(this,e,r,t),r},i.prototype.parse=function(){for(this._cursor.offset=0,this.boxes=[];this._cursor.offset<this._raw.byteLength;){var e=o.parse(this);if(void 0===e.type)break;this.boxes.push(e)}return this},i._sweep=function(e,t,r){for(var n in this.type&&this.type==e&&t.push(this),this.boxes){if(t.length&&r)return;i._sweep.call(this.boxes[n],e,t,r)}},i.prototype.write=function(){var e,t=0;for(e=0;e<this.boxes.length;e++)t+=this.boxes[e].getLength(!1);var r=new Uint8Array(t);for(this._rawo=new DataView(r.buffer),this.bytes=r,this._cursor.offset=0,e=0;e<this.boxes.length;e++)this.boxes[e].write();return r.buffer},i.prototype.append=function(e,t){n.Utils.appendBox(this,e,t)};var o=function(){this._cursor=new n.Cursor};o.parse=function(e){var t=new o;return t._offset=e._cursor.offset,t._root=e._root?e._root:e,t._raw=e._raw,t._parent=e,t._parseBox(),e._cursor.offset=t._raw.byteOffset+t._raw.byteLength,t},o.create=function(e){var t=new o;return t.type=e,t.boxes=[],t},o.prototype._boxContainers=["dinf","edts","mdia","meco","mfra","minf","moof","moov","mvex","stbl","strk","traf","trak","tref","udta","vttc","sinf","schi","encv","enca"],o.prototype._boxProcessors={},o.prototype._procField=function(e,t,r){this._parsing?this[e]=this._readField(t,r):this._writeField(t,r,this[e])},o.prototype._procFieldArray=function(e,t,r,n){var i;if(this._parsing)for(this[e]=[],i=0;i<t;i++)this[e][i]=this._readField(r,n);else for(i=0;i<this[e].length;i++)this._writeField(r,n,this[e][i])},o.prototype._procFullBox=function(){this._procField("version","uint",8),this._procField("flags","uint",24)},o.prototype._procEntries=function(e,t,r){var n;if(this._parsing)for(this[e]=[],n=0;n<t;n++)this[e].push({}),r.call(this,this[e][n]);else for(n=0;n<t;n++)r.call(this,this[e][n])},o.prototype._procSubEntries=function(e,t,r,n){var i;if(this._parsing)for(e[t]=[],i=0;i<r;i++)e[t].push({}),n.call(this,e[t][i]);else for(i=0;i<r;i++)n.call(this,e[t][i])},o.prototype._procEntryField=function(e,t,r,n){this._parsing?e[t]=this._readField(r,n):this._writeField(r,n,e[t])},o.prototype._procSubBoxes=function(e,t){var r;if(this._parsing)for(this[e]=[],r=0;r<t;r++)this[e].push(o.parse(this));else for(r=0;r<t;r++)this._rawo?this[e][r].write():this.size+=this[e][r].getLength()},o.prototype._readField=function(e,t){switch(e){case"uint":return this._readUint(t);case"int":return this._readInt(t);case"template":return this._readTemplate(t);case"string":return -1===t?this._readTerminatedString():this._readString(t);case"data":return this._readData(t);case"utf8":return this._readUTF8String();default:return -1}},o.prototype._readInt=function(e){var t=null,r=this._cursor.offset-this._raw.byteOffset;switch(e){case 8:t=this._raw.getInt8(r);break;case 16:t=this._raw.getInt16(r);break;case 32:t=this._raw.getInt32(r);break;case 64:t=4294967296*this._raw.getInt32(r)+this._raw.getInt32(r+4)}return this._cursor.offset+=e>>3,t},o.prototype._readUint=function(e){var t,r=null,n=this._cursor.offset-this._raw.byteOffset;switch(e){case 8:r=this._raw.getUint8(n);break;case 16:r=this._raw.getUint16(n);break;case 24:r=(this._raw.getUint16(n)<<8)+this._raw.getUint8(n+2);break;case 32:r=this._raw.getUint32(n);break;case 64:r=4294967296*this._raw.getUint32(n)+this._raw.getUint32(n+4)}return this._cursor.offset+=e>>3,r},o.prototype._readString=function(e){for(var t="",r=0;r<e;r++)t+=String.fromCharCode(this._readUint(8));return t},o.prototype._readTemplate=function(e){return this._readUint(e/2)+this._readUint(e/2)/Math.pow(2,e/2)},o.prototype._readTerminatedString=function(){for(var e="";this._cursor.offset-this._offset<this._raw.byteLength;){var t=this._readUint(8);if(0===t)break;e+=String.fromCharCode(t)}return e},o.prototype._readData=function(e){var t=e>0?e:this._raw.byteLength-(this._cursor.offset-this._offset);if(t>0){var r=new Uint8Array(this._raw.buffer,this._cursor.offset,t);return this._cursor.offset+=t,r}return null},o.prototype._readUTF8String=function(){var e=this._raw.byteLength-(this._cursor.offset-this._offset),t=null;return e>0&&(t=new DataView(this._raw.buffer,this._cursor.offset,e),this._cursor.offset+=e),t?n.Utils.dataViewToString(t):t},o.prototype._parseBox=function(){if(this._parsing=!0,this._cursor.offset=this._offset,this._offset+8>this._raw.buffer.byteLength)this._root._incomplete=!0;else{switch(this._procField("size","uint",32),this._procField("type","string",4),1===this.size&&this._procField("largesize","uint",64),"uuid"===this.type&&this._procFieldArray("usertype",16,"uint",8),this.size){case 0:this._raw=new DataView(this._raw.buffer,this._offset,this._raw.byteLength-this._cursor.offset+8);break;case 1:this._offset+this.size>this._raw.buffer.byteLength?(this._incomplete=!0,this._root._incomplete=!0):this._raw=new DataView(this._raw.buffer,this._offset,this.largesize);break;default:this._offset+this.size>this._raw.buffer.byteLength?(this._incomplete=!0,this._root._incomplete=!0):this._raw=new DataView(this._raw.buffer,this._offset,this.size)}this._incomplete||(this._boxProcessors[this.type]&&this._boxProcessors[this.type].call(this),-1!==this._boxContainers.indexOf(this.type)?this._parseContainerBox():this._data=this._readData())}},o.prototype._parseFullBox=function(){this.version=this._readUint(8),this.flags=this._readUint(24)},o.prototype._parseContainerBox=function(){for(this.boxes=[];this._cursor.offset-this._raw.byteOffset<this._raw.byteLength;)this.boxes.push(o.parse(this))},o.prototype.append=function(e,t){n.Utils.appendBox(this,e,t)},o.prototype.getLength=function(){if(this._parsing=!1,this._rawo=null,this.size=0,this._procField("size","uint",32),this._procField("type","string",4),1===this.size&&this._procField("largesize","uint",64),"uuid"===this.type&&this._procFieldArray("usertype",16,"uint",8),this._boxProcessors[this.type]&&this._boxProcessors[this.type].call(this),-1!==this._boxContainers.indexOf(this.type))for(var e=0;e<this.boxes.length;e++)this.size+=this.boxes[e].getLength();return this._data&&this._writeData(this._data),this.size},o.prototype.write=function(){switch(this._parsing=!1,this._cursor.offset=this._parent._cursor.offset,this.size){case 0:this._rawo=new DataView(this._parent._rawo.buffer,this._cursor.offset,this.parent._rawo.byteLength-this._cursor.offset);break;case 1:this._rawo=new DataView(this._parent._rawo.buffer,this._cursor.offset,this.largesize);break;default:this._rawo=new DataView(this._parent._rawo.buffer,this._cursor.offset,this.size)}if(this._procField("size","uint",32),this._procField("type","string",4),1===this.size&&this._procField("largesize","uint",64),"uuid"===this.type&&this._procFieldArray("usertype",16,"uint",8),this._boxProcessors[this.type]&&this._boxProcessors[this.type].call(this),-1!==this._boxContainers.indexOf(this.type))for(var e=0;e<this.boxes.length;e++)this.boxes[e].write();return this._data&&this._writeData(this._data),this._parent._cursor.offset+=this.size,this.size},o.prototype._writeInt=function(e,t){if(this._rawo){var r=this._cursor.offset-this._rawo.byteOffset;switch(e){case 8:this._rawo.setInt8(r,t);break;case 16:this._rawo.setInt16(r,t);break;case 32:this._rawo.setInt32(r,t);break;case 64:var n=Math.floor(t/4294967296),i=t-4294967296*n;this._rawo.setUint32(r,n),this._rawo.setUint32(r+4,i)}this._cursor.offset+=e>>3}else this.size+=e>>3},o.prototype._writeUint=function(e,t){if(this._rawo){var r,n,i=this._cursor.offset-this._rawo.byteOffset;switch(e){case 8:this._rawo.setUint8(i,t);break;case 16:this._rawo.setUint16(i,t);break;case 24:r=(16776960&t)>>8,n=255&t,this._rawo.setUint16(i,r),this._rawo.setUint8(i+2,n);break;case 32:this._rawo.setUint32(i,t);break;case 64:n=t-4294967296*(r=Math.floor(t/4294967296)),this._rawo.setUint32(i,r),this._rawo.setUint32(i+4,n)}this._cursor.offset+=e>>3}else this.size+=e>>3},o.prototype._writeString=function(e,t){for(var r=0;r<e;r++)this._writeUint(8,t.charCodeAt(r))},o.prototype._writeTerminatedString=function(e){if(0!==e.length){for(var t=0;t<e.length;t++)this._writeUint(8,e.charCodeAt(t));this._writeUint(8,0)}},o.prototype._writeTemplate=function(e,t){var r=Math.floor(t),n=(t-r)*Math.pow(2,e/2);this._writeUint(e/2,r),this._writeUint(e/2,n)},o.prototype._writeData=function(e){if(e){if(this._rawo){if(e instanceof Array){for(var t=this._cursor.offset-this._rawo.byteOffset,r=0;r<e.length;r++)this._rawo.setInt8(t+r,e[r]);this._cursor.offset+=e.length}e instanceof Uint8Array&&(this._root.bytes.set(e,this._cursor.offset),this._cursor.offset+=e.length)}else this.size+=e.length}},o.prototype._writeUTF8String=function(e){var t=n.Utils.utf8ToByteArray(e);if(this._rawo)for(var r=new DataView(this._rawo.buffer,this._cursor.offset,t.length),i=0;i<t.length;i++)r.setUint8(i,t[i]);else this.size+=t.length},o.prototype._writeField=function(e,t,r){switch(e){case"uint":this._writeUint(t,r);break;case"int":this._writeInt(t,r);break;case"template":this._writeTemplate(t,r);break;case"string":-1==t?this._writeTerminatedString(r):this._writeString(t,r);break;case"data":this._writeData(r);break;case"utf8":this._writeUTF8String(r)}},o.prototype._boxProcessors.avc1=o.prototype._boxProcessors.encv=function(){this._procFieldArray("reserved1",6,"uint",8),this._procField("data_reference_index","uint",16),this._procField("pre_defined1","uint",16),this._procField("reserved2","uint",16),this._procFieldArray("pre_defined2",3,"uint",32),this._procField("width","uint",16),this._procField("height","uint",16),this._procField("horizresolution","template",32),this._procField("vertresolution","template",32),this._procField("reserved3","uint",32),this._procField("frame_count","uint",16),this._procFieldArray("compressorname",32,"uint",8),this._procField("depth","uint",16),this._procField("pre_defined3","int",16),this._procField("config","data",-1)},o.prototype._boxProcessors.dref=function(){this._procFullBox(),this._procField("entry_count","uint",32),this._procSubBoxes("entries",this.entry_count)},o.prototype._boxProcessors.elst=function(){this._procFullBox(),this._procField("entry_count","uint",32),this._procEntries("entries",this.entry_count,function(e){this._procEntryField(e,"segment_duration","uint",1===this.version?64:32),this._procEntryField(e,"media_time","int",1===this.version?64:32),this._procEntryField(e,"media_rate_integer","int",16),this._procEntryField(e,"media_rate_fraction","int",16)})},o.prototype._boxProcessors.emsg=function(){this._procFullBox(),1==this.version?(this._procField("timescale","uint",32),this._procField("presentation_time","uint",64),this._procField("event_duration","uint",32),this._procField("id","uint",32),this._procField("scheme_id_uri","string",-1),this._procField("value","string",-1)):(this._procField("scheme_id_uri","string",-1),this._procField("value","string",-1),this._procField("timescale","uint",32),this._procField("presentation_time_delta","uint",32),this._procField("event_duration","uint",32),this._procField("id","uint",32)),this._procField("message_data","data",-1)},o.prototype._boxProcessors.free=o.prototype._boxProcessors.skip=function(){this._procField("data","data",-1)},o.prototype._boxProcessors.frma=function(){this._procField("data_format","uint",32)},o.prototype._boxProcessors.ftyp=o.prototype._boxProcessors.styp=function(){this._procField("major_brand","string",4),this._procField("minor_version","uint",32);var e=-1;this._parsing&&(e=(this._raw.byteLength-(this._cursor.offset-this._raw.byteOffset))/4),this._procFieldArray("compatible_brands",e,"string",4)},o.prototype._boxProcessors.hdlr=function(){this._procFullBox(),this._procField("pre_defined","uint",32),this._procField("handler_type","string",4),this._procFieldArray("reserved",3,"uint",32),this._procField("name","string",-1)},o.prototype._boxProcessors.mdat=function(){this._procField("data","data",-1)},o.prototype._boxProcessors.mdhd=function(){this._procFullBox(),this._procField("creation_time","uint",1==this.version?64:32),this._procField("modification_time","uint",1==this.version?64:32),this._procField("timescale","uint",32),this._procField("duration","uint",1==this.version?64:32),this._parsing||"string"!=typeof this.language||(this.language=this.language.charCodeAt(0)-96<<10|this.language.charCodeAt(1)-96<<5|this.language.charCodeAt(2)-96),this._procField("language","uint",16),this._parsing&&(this.language=String.fromCharCode(96+(this.language>>10&31),96+(this.language>>5&31),96+(31&this.language))),this._procField("pre_defined","uint",16)},o.prototype._boxProcessors.mehd=function(){this._procFullBox(),this._procField("fragment_duration","uint",1==this.version?64:32)},o.prototype._boxProcessors.mfhd=function(){this._procFullBox(),this._procField("sequence_number","uint",32)},o.prototype._boxProcessors.mfro=function(){this._procFullBox(),this._procField("mfra_size","uint",32)},o.prototype._boxProcessors.mp4a=o.prototype._boxProcessors.enca=function(){this._procFieldArray("reserved1",6,"uint",8),this._procField("data_reference_index","uint",16),this._procFieldArray("reserved2",2,"uint",32),this._procField("channelcount","uint",16),this._procField("samplesize","uint",16),this._procField("pre_defined","uint",16),this._procField("reserved3","uint",16),this._procField("samplerate","template",32),this._procField("esds","data",-1)},o.prototype._boxProcessors.mvhd=function(){this._procFullBox(),this._procField("creation_time","uint",1==this.version?64:32),this._procField("modification_time","uint",1==this.version?64:32),this._procField("timescale","uint",32),this._procField("duration","uint",1==this.version?64:32),this._procField("rate","template",32),this._procField("volume","template",16),this._procField("reserved1","uint",16),this._procFieldArray("reserved2",2,"uint",32),this._procFieldArray("matrix",9,"template",32),this._procFieldArray("pre_defined",6,"uint",32),this._procField("next_track_ID","uint",32)},o.prototype._boxProcessors.payl=function(){this._procField("cue_text","utf8")},o.prototype._boxProcessors.pssh=function(){this._procFullBox(),this._procFieldArray("SystemID",16,"uint",8),this._procField("DataSize","uint",32),this._procFieldArray("Data",this.DataSize,"uint",8)},o.prototype._boxProcessors.schm=function(){this._procFullBox(),this._procField("scheme_type","uint",32),this._procField("scheme_version","uint",32),1&this.flags&&this._procField("scheme_uri","string",-1)},o.prototype._boxProcessors.sdtp=function(){this._procFullBox();var e=-1;this._parsing&&(e=this._raw.byteLength-(this._cursor.offset-this._raw.byteOffset)),this._procFieldArray("sample_dependency_table",e,"uint",8)},o.prototype._boxProcessors.sidx=function(){this._procFullBox(),this._procField("reference_ID","uint",32),this._procField("timescale","uint",32),this._procField("earliest_presentation_time","uint",1==this.version?64:32),this._procField("first_offset","uint",1==this.version?64:32),this._procField("reserved","uint",16),this._procField("reference_count","uint",16),this._procEntries("references",this.reference_count,function(e){this._parsing||(e.reference=(1&e.reference_type)<<31,e.reference|=2147483647&e.referenced_size,e.sap=(1&e.starts_with_SAP)<<31,e.sap|=(3&e.SAP_type)<<28,e.sap|=268435455&e.SAP_delta_time),this._procEntryField(e,"reference","uint",32),this._procEntryField(e,"subsegment_duration","uint",32),this._procEntryField(e,"sap","uint",32),this._parsing&&(e.reference_type=e.reference>>31&1,e.referenced_size=2147483647&e.reference,e.starts_with_SAP=e.sap>>31&1,e.SAP_type=e.sap>>28&7,e.SAP_delta_time=268435455&e.sap)})},o.prototype._boxProcessors.smhd=function(){this._procFullBox(),this._procField("balance","uint",16),this._procField("reserved","uint",16)},o.prototype._boxProcessors.ssix=function(){this._procFullBox(),this._procField("subsegment_count","uint",32),this._procEntries("subsegments",this.subsegment_count,function(e){this._procEntryField(e,"ranges_count","uint",32),this._procSubEntries(e,"ranges",e.ranges_count,function(e){this._procEntryField(e,"level","uint",8),this._procEntryField(e,"range_size","uint",24)})})},o.prototype._boxProcessors.stsd=function(){this._procFullBox(),this._procField("entry_count","uint",32),this._procSubBoxes("entries",this.entry_count)},o.prototype._boxProcessors.subs=function(){this._procFullBox(),this._procField("entry_count","uint",32),this._procEntries("entries",this.entry_count,function(e){this._procEntryField(e,"sample_delta","uint",32),this._procEntryField(e,"subsample_count","uint",16),this._procSubEntries(e,"subsamples",e.subsample_count,function(e){this._procEntryField(e,"subsample_size","uint",1===this.version?32:16),this._procEntryField(e,"subsample_priority","uint",8),this._procEntryField(e,"discardable","uint",8),this._procEntryField(e,"codec_specific_parameters","uint",32)})})},o.prototype._boxProcessors.tenc=function(){this._procFullBox(),this._procField("default_IsEncrypted","uint",24),this._procField("default_IV_size","uint",8),this._procFieldArray("default_KID",16,"uint",8)},o.prototype._boxProcessors.tfdt=function(){this._procFullBox(),this._procField("baseMediaDecodeTime","uint",1==this.version?64:32)},o.prototype._boxProcessors.tfhd=function(){this._procFullBox(),this._procField("track_ID","uint",32),1&this.flags&&this._procField("base_data_offset","uint",64),2&this.flags&&this._procField("sample_description_offset","uint",32),8&this.flags&&this._procField("default_sample_duration","uint",32),16&this.flags&&this._procField("default_sample_size","uint",32),32&this.flags&&this._procField("default_sample_flags","uint",32)},o.prototype._boxProcessors.tfra=function(){this._procFullBox(),this._procField("track_ID","uint",32),this._parsing||(this.reserved=0,this.reserved|=(48&this.length_size_of_traf_num)<<4,this.reserved|=(12&this.length_size_of_trun_num)<<2,this.reserved|=3&this.length_size_of_sample_num),this._procField("reserved","uint",32),this._parsing&&(this.length_size_of_traf_num=(48&this.reserved)>>4,this.length_size_of_trun_num=(12&this.reserved)>>2,this.length_size_of_sample_num=3&this.reserved),this._procField("number_of_entry","uint",32),this._procEntries("entries",this.number_of_entry,function(e){this._procEntryField(e,"time","uint",1===this.version?64:32),this._procEntryField(e,"moof_offset","uint",1===this.version?64:32),this._procEntryField(e,"traf_number","uint",8*(this.length_size_of_traf_num+1)),this._procEntryField(e,"trun_number","uint",8*(this.length_size_of_trun_num+1)),this._procEntryField(e,"sample_number","uint",8*(this.length_size_of_sample_num+1))})},o.prototype._boxProcessors.tkhd=function(){this._procFullBox(),this._procField("creation_time","uint",1==this.version?64:32),this._procField("modification_time","uint",1==this.version?64:32),this._procField("track_ID","uint",32),this._procField("reserved1","uint",32),this._procField("duration","uint",1==this.version?64:32),this._procFieldArray("reserved2",2,"uint",32),this._procField("layer","uint",16),this._procField("alternate_group","uint",16),this._procField("volume","template",16),this._procField("reserved3","uint",16),this._procFieldArray("matrix",9,"template",32),this._procField("width","template",32),this._procField("height","template",32)},o.prototype._boxProcessors.trex=function(){this._procFullBox(),this._procField("track_ID","uint",32),this._procField("default_sample_description_index","uint",32),this._procField("default_sample_duration","uint",32),this._procField("default_sample_size","uint",32),this._procField("default_sample_flags","uint",32)},o.prototype._boxProcessors.trun=function(){this._procFullBox(),this._procField("sample_count","uint",32),1&this.flags&&this._procField("data_offset","int",32),4&this.flags&&this._procField("first_sample_flags","uint",32),this._procEntries("samples",this.sample_count,function(e){256&this.flags&&this._procEntryField(e,"sample_duration","uint",32),512&this.flags&&this._procEntryField(e,"sample_size","uint",32),1024&this.flags&&this._procEntryField(e,"sample_flags","uint",32),2048&this.flags&&this._procEntryField(e,"sample_composition_time_offset",1===this.version?"int":"uint",32)})},o.prototype._boxProcessors["url "]=o.prototype._boxProcessors["urn "]=function(){this._procFullBox(),"urn "===this.type&&this._procField("name","string",-1),this._procField("location","string",-1)},o.prototype._boxProcessors.vlab=function(){this._procField("source_label","utf8")},o.prototype._boxProcessors.vmhd=function(){this._procFullBox(),this._procField("graphicsmode","uint",16),this._procFieldArray("opcolor",3,"uint",16)},o.prototype._boxProcessors.vttC=function(){this._procField("config","utf8")},o.prototype._boxProcessors.vtte=function(){}},"./node_modules/core-util-is/lib/util.js":function(e,t,r){function n(e){return Object.prototype.toString.call(e)}t.isArray=function(e){return Array.isArray?Array.isArray(e):"[object Array]"===n(e)},t.isBoolean=function(e){return"boolean"==typeof e},t.isNull=function(e){return null===e},t.isNullOrUndefined=function(e){return null==e},t.isNumber=function(e){return"number"==typeof e},t.isString=function(e){return"string"==typeof e},t.isSymbol=function(e){return"symbol"==typeof e},t.isUndefined=function(e){return void 0===e},t.isRegExp=function(e){return"[object RegExp]"===n(e)},t.isObject=function(e){return"object"==typeof e&&null!==e},t.isDate=function(e){return"[object Date]"===n(e)},t.isError=function(e){return"[object Error]"===n(e)||e instanceof Error},t.isFunction=function(e){return"function"==typeof e},t.isPrimitive=function(e){return null===e||"boolean"==typeof e||"number"==typeof e||"string"==typeof e||"symbol"==typeof e||void 0===e},t.isBuffer=r("./node_modules/buffer/index.js").Buffer.isBuffer},"./node_modules/es6-promise/auto.js":function(e,t,r){e.exports=r("./node_modules/es6-promise/dist/es6-promise.js").polyfill()},"./node_modules/es6-promise/dist/es6-promise.js":function(e,t,r){(function(t,r){e.exports=function(){function e(e){return"function"==typeof e}var n=Array.isArray?Array.isArray:function(e){return"[object Array]"===Object.prototype.toString.call(e)},i=0,o=void 0,u=void 0,l=function(e,t){g[i]=e,g[i+1]=t,2===(i+=2)&&(u?u(y):E())},c="undefined"!=typeof window?window:void 0,f=c||{},d=f.MutationObserver||f.WebKitMutationObserver,h="undefined"==typeof self&&void 0!==t&&"[object process]"===({}).toString.call(t),p="undefined"!=typeof Uint8ClampedArray&&"undefined"!=typeof importScripts&&"undefined"!=typeof MessageChannel;function m(){var e=setTimeout;return function(){return e(y,1)}}var g=Array(1e3);function y(){for(var e=0;e<i;e+=2)(0,g[e])(g[e+1]),g[e]=void 0,g[e+1]=void 0;i=0}var v,b,_,T,E=void 0;function S(e,t){var r=this,n=new this.constructor(C);void 0===n[A]&&M(n);var i=r._state;if(i){var o=arguments[i-1];l(function(){return x(i,n,o,r._result)})}else N(r,n,e,t);return n}function w(e){if(e&&"object"==typeof e&&e.constructor===this)return e;var t=new this(C);return R(t,e),t}h?E=function(){return t.nextTick(y)}:d?(b=0,_=new d(y),T=document.createTextNode(""),_.observe(T,{characterData:!0}),E=function(){T.data=b=++b%2}):p?((v=new MessageChannel).port1.onmessage=y,E=function(){return v.port2.postMessage(0)}):E=void 0===c?function(){try{var e=Function("return this")().require("vertx");return void 0!==(o=e.runOnLoop||e.runOnContext)?function(){o(y)}:m()}catch(e){return m()}}():m();var A=Math.random().toString(36).substring(2);function C(){}var I=void 0;function O(t,r,n){r.constructor===t.constructor&&n===S&&r.constructor.resolve===w?1===r._state?k(t,r._result):2===r._state?D(t,r._result):N(r,void 0,function(e){return R(t,e)},function(e){return D(t,e)}):void 0===n?k(t,r):e(n)?l(function(e){var t=!1,i=function(n,i,o,u){try{n.call(i,function(n){t||(t=!0,r!==n?R(e,n):k(e,n))},function(r){t||(t=!0,D(e,r))})}catch(e){return e}}(n,r,0,0,e._label);!t&&i&&(t=!0,D(e,i))},t):k(t,r)}function R(e,t){if(e===t)D(e,TypeError("You cannot resolve a promise with itself"));else if(r=typeof t,null===t||"object"!==r&&"function"!==r)k(e,t);else{var r,n=void 0;try{n=t.then}catch(t){return void D(e,t)}O(e,t,n)}}function P(e){e._onerror&&e._onerror(e._result),L(e)}function k(e,t){e._state===I&&(e._result=t,e._state=1,0!==e._subscribers.length&&l(L,e))}function D(e,t){e._state===I&&(e._state=2,e._result=t,l(P,e))}function N(e,t,r,n){var i=e._subscribers,o=i.length;e._onerror=null,i[o]=t,i[o+1]=r,i[o+2]=n,0===o&&e._state&&l(L,e)}function L(e){var t=e._subscribers,r=e._state;if(0!==t.length){for(var n=void 0,i=void 0,o=e._result,u=0;u<t.length;u+=3)n=t[u],i=t[u+r],n?x(r,n,i,o):i(o);e._subscribers.length=0}}function x(t,r,n,i){var o=e(n),u=void 0,l=void 0,c=!0;if(o){try{u=n(i)}catch(e){c=!1,l=e}if(r===u)return void D(r,TypeError("A promises callback cannot return that same promise."))}else u=i;r._state!==I||(o&&c?R(r,u):!1===c?D(r,l):1===t?k(r,u):2===t&&D(r,u))}var j=0;function M(e){e[A]=j++,e._state=void 0,e._result=void 0,e._subscribers=[]}var F=function(){function e(e,t){this._instanceConstructor=e,this.promise=new e(C),this.promise[A]||M(this.promise),n(t)?(this.length=t.length,this._remaining=t.length,this._result=Array(this.length),0===this.length?k(this.promise,this._result):(this.length=this.length||0,this._enumerate(t),0===this._remaining&&k(this.promise,this._result))):D(this.promise,Error("Array Methods must be provided an Array"))}return e.prototype._enumerate=function(e){for(var t=0;this._state===I&&t<e.length;t++)this._eachEntry(e[t],t)},e.prototype._eachEntry=function(e,t){var r=this._instanceConstructor,n=r.resolve;if(n===w){var i=void 0,o=void 0,u=!1;try{i=e.then}catch(e){u=!0,o=e}if(i===S&&e._state!==I)this._settledAt(e._state,t,e._result);else if("function"!=typeof i)this._remaining--,this._result[t]=e;else if(r===B){var l=new r(C);u?D(l,o):O(l,e,i),this._willSettleAt(l,t)}else this._willSettleAt(new r(function(t){return t(e)}),t)}else this._willSettleAt(n(e),t)},e.prototype._settledAt=function(e,t,r){var n=this.promise;n._state===I&&(this._remaining--,2===e?D(n,r):this._result[t]=r),0===this._remaining&&k(n,this._result)},e.prototype._willSettleAt=function(e,t){var r=this;N(e,void 0,function(e){return r._settledAt(1,t,e)},function(e){return r._settledAt(2,t,e)})},e}(),B=function(){function t(e){this[A]=j++,this._result=this._state=void 0,this._subscribers=[],C!==e&&("function"!=typeof e&&function(){throw TypeError("You must pass a resolver function as the first argument to the promise constructor")}(),this instanceof t?function(e,t){try{t(function(t){R(e,t)},function(t){D(e,t)})}catch(t){D(e,t)}}(this,e):function(){throw TypeError("Failed to construct 'Promise': Please use the 'new' operator, this object constructor cannot be called as a function.")}())}return t.prototype.catch=function(e){return this.then(null,e)},t.prototype.finally=function(t){var r=this.constructor;return e(t)?this.then(function(e){return r.resolve(t()).then(function(){return e})},function(e){return r.resolve(t()).then(function(){throw e})}):this.then(t,t)},t}();return B.prototype.then=S,B.all=function(e){return new F(this,e).promise},B.race=function(e){var t=this;return new t(n(e)?function(r,n){for(var i=e.length,o=0;o<i;o++)t.resolve(e[o]).then(r,n)}:function(e,t){return t(TypeError("You must pass an array to race."))})},B.resolve=w,B.reject=function(e){var t=new this(C);return D(t,e),t},B._setScheduler=function(e){u=e},B._setAsap=function(e){l=e},B._asap=l,B.polyfill=function(){var e=void 0;if(void 0!==r)e=r;else if("undefined"!=typeof self)e=self;else try{e=Function("return this")()}catch(e){throw Error("polyfill failed because global object is unavailable in this environment")}var t=e.Promise;if(t){var n=null;try{n=Object.prototype.toString.call(t.resolve())}catch(e){}if("[object Promise]"===n&&!t.cast)return}e.Promise=B},B.Promise=B,B}()}).call(this,r("./node_modules/process/browser.js"),r("./node_modules/webpack/buildin/global.js"))},"./node_modules/events/events.js":function(e,t,r){var n,i="object"==typeof Reflect?Reflect:null,o=i&&"function"==typeof i.apply?i.apply:function(e,t,r){return Function.prototype.apply.call(e,t,r)};n=i&&"function"==typeof i.ownKeys?i.ownKeys:Object.getOwnPropertySymbols?function(e){return Object.getOwnPropertyNames(e).concat(Object.getOwnPropertySymbols(e))}:function(e){return Object.getOwnPropertyNames(e)};var u=Number.isNaN||function(e){return e!=e};function l(){l.init.call(this)}e.exports=l,e.exports.once=function(e,t){return new Promise(function(r,n){function i(r){e.removeListener(t,o),n(r)}function o(){"function"==typeof e.removeListener&&e.removeListener("error",i),r([].slice.call(arguments))}b(e,t,o,{once:!0}),"error"!==t&&"function"==typeof e.on&&b(e,"error",i,{once:!0})})},l.EventEmitter=l,l.prototype._events=void 0,l.prototype._eventsCount=0,l.prototype._maxListeners=void 0;var c=10;function f(e){if("function"!=typeof e)throw TypeError('The "listener" argument must be of type Function. Received type '+typeof e)}function d(e){return void 0===e._maxListeners?l.defaultMaxListeners:e._maxListeners}function h(e,t,r,n){var i,o,u;if(f(r),void 0===(o=e._events)?(o=e._events=Object.create(null),e._eventsCount=0):(void 0!==o.newListener&&(e.emit("newListener",t,r.listener?r.listener:r),o=e._events),u=o[t]),void 0===u)u=o[t]=r,++e._eventsCount;else if("function"==typeof u?u=o[t]=n?[r,u]:[u,r]:n?u.unshift(r):u.push(r),(i=d(e))>0&&u.length>i&&!u.warned){u.warned=!0;var l=Error("Possible EventEmitter memory leak detected. "+u.length+" "+String(t)+" listeners added. Use emitter.setMaxListeners() to increase limit");l.name="MaxListenersExceededWarning",l.emitter=e,l.type=t,l.count=u.length,console&&console.warn&&console.warn(l)}return e}function p(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,0==arguments.length?this.listener.call(this.target):this.listener.apply(this.target,arguments)}function m(e,t,r){var n={fired:!1,wrapFn:void 0,target:e,type:t,listener:r},i=p.bind(n);return i.listener=r,n.wrapFn=i,i}function g(e,t,r){var n=e._events;if(void 0===n)return[];var i=n[t];return void 0===i?[]:"function"==typeof i?r?[i.listener||i]:[i]:r?function(e){for(var t=Array(e.length),r=0;r<t.length;++r)t[r]=e[r].listener||e[r];return t}(i):v(i,i.length)}function y(e){var t=this._events;if(void 0!==t){var r=t[e];if("function"==typeof r)return 1;if(void 0!==r)return r.length}return 0}function v(e,t){for(var r=Array(t),n=0;n<t;++n)r[n]=e[n];return r}function b(e,t,r,n){if("function"==typeof e.on)n.once?e.once(t,r):e.on(t,r);else{if("function"!=typeof e.addEventListener)throw TypeError('The "emitter" argument must be of type EventEmitter. Received type '+typeof e);e.addEventListener(t,function i(o){n.once&&e.removeEventListener(t,i),r(o)})}}Object.defineProperty(l,"defaultMaxListeners",{enumerable:!0,get:function(){return c},set:function(e){if("number"!=typeof e||e<0||u(e))throw RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+e+".");c=e}}),l.init=function(){void 0!==this._events&&this._events!==Object.getPrototypeOf(this)._events||(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0},l.prototype.setMaxListeners=function(e){if("number"!=typeof e||e<0||u(e))throw RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+e+".");return this._maxListeners=e,this},l.prototype.getMaxListeners=function(){return d(this)},l.prototype.emit=function(e){for(var t=[],r=1;r<arguments.length;r++)t.push(arguments[r]);var n="error"===e,i=this._events;if(void 0!==i)n=n&&void 0===i.error;else if(!n)return!1;if(n){if(t.length>0&&(u=t[0]),u instanceof Error)throw u;var u,l=Error("Unhandled error."+(u?" ("+u.message+")":""));throw l.context=u,l}var c=i[e];if(void 0===c)return!1;if("function"==typeof c)o(c,this,t);else{var f=c.length,d=v(c,f);for(r=0;r<f;++r)o(d[r],this,t)}return!0},l.prototype.addListener=function(e,t){return h(this,e,t,!1)},l.prototype.on=l.prototype.addListener,l.prototype.prependListener=function(e,t){return h(this,e,t,!0)},l.prototype.once=function(e,t){return f(t),this.on(e,m(this,e,t)),this},l.prototype.prependOnceListener=function(e,t){return f(t),this.prependListener(e,m(this,e,t)),this},l.prototype.removeListener=function(e,t){var r,n,i,o,u;if(f(t),void 0===(n=this._events)||void 0===(r=n[e]))return this;if(r===t||r.listener===t)0==--this._eventsCount?this._events=Object.create(null):(delete n[e],n.removeListener&&this.emit("removeListener",e,r.listener||t));else if("function"!=typeof r){for(i=-1,o=r.length-1;o>=0;o--)if(r[o]===t||r[o].listener===t){u=r[o].listener,i=o;break}if(i<0)return this;0===i?r.shift():function(e,t){for(;t+1<e.length;t++)e[t]=e[t+1];e.pop()}(r,i),1===r.length&&(n[e]=r[0]),void 0!==n.removeListener&&this.emit("removeListener",e,u||t)}return this},l.prototype.off=l.prototype.removeListener,l.prototype.removeAllListeners=function(e){var t,r,n;if(void 0===(r=this._events))return this;if(void 0===r.removeListener)return 0==arguments.length?(this._events=Object.create(null),this._eventsCount=0):void 0!==r[e]&&(0==--this._eventsCount?this._events=Object.create(null):delete r[e]),this;if(0==arguments.length){var i,o=Object.keys(r);for(n=0;n<o.length;++n)"removeListener"!==(i=o[n])&&this.removeAllListeners(i);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if("function"==typeof(t=r[e]))this.removeListener(e,t);else if(void 0!==t)for(n=t.length-1;n>=0;n--)this.removeListener(e,t[n]);return this},l.prototype.listeners=function(e){return g(this,e,!0)},l.prototype.rawListeners=function(e){return g(this,e,!1)},l.listenerCount=function(e,t){return"function"==typeof e.listenerCount?e.listenerCount(t):y.call(e,t)},l.prototype.listenerCount=y,l.prototype.eventNames=function(){return this._eventsCount>0?n(this._events):[]}},"./node_modules/fast-deep-equal/index.js":function(e,t,r){var n=Array.isArray,i=Object.keys,o=Object.prototype.hasOwnProperty;e.exports=function e(t,r){if(t===r)return!0;if(t&&r&&"object"==typeof t&&"object"==typeof r){var u,l,c,f=n(t),d=n(r);if(f&&d){if((l=t.length)!=r.length)return!1;for(u=l;0!=u--;)if(!e(t[u],r[u]))return!1;return!0}if(f!=d)return!1;var h=t instanceof Date,p=r instanceof Date;if(h!=p)return!1;if(h&&p)return t.getTime()==r.getTime();var m=t instanceof RegExp,g=r instanceof RegExp;if(m!=g)return!1;if(m&&g)return t.toString()==r.toString();var y=i(t);if((l=y.length)!==i(r).length)return!1;for(u=l;0!=u--;)if(!o.call(r,y[u]))return!1;for(u=l;0!=u--;)if(!e(t[c=y[u]],r[c]))return!1;return!0}return t!=t&&r!=r}},"./node_modules/ieee754/index.js":function(e,t){t.read=function(e,t,r,n,i){var o,u,l=8*i-n-1,c=(1<<l)-1,f=c>>1,d=-7,h=r?i-1:0,p=r?-1:1,m=e[t+h];for(h+=p,o=m&(1<<-d)-1,m>>=-d,d+=l;d>0;o=256*o+e[t+h],h+=p,d-=8);for(u=o&(1<<-d)-1,o>>=-d,d+=n;d>0;u=256*u+e[t+h],h+=p,d-=8);if(0===o)o=1-f;else{if(o===c)return u?NaN:1/0*(m?-1:1);u+=Math.pow(2,n),o-=f}return(m?-1:1)*u*Math.pow(2,o-n)},t.write=function(e,t,r,n,i,o){var u,l,c,f=8*o-i-1,d=(1<<f)-1,h=d>>1,p=23===i?5960464477539062e-23:0,m=n?0:o-1,g=n?1:-1,y=t<0||0===t&&1/t<0?1:0;for(isNaN(t=Math.abs(t))||t===1/0?(l=isNaN(t)?1:0,u=d):(u=Math.floor(Math.log(t)/Math.LN2),t*(c=Math.pow(2,-u))<1&&(u--,c*=2),(t+=u+h>=1?p/c:p*Math.pow(2,1-h))*c>=2&&(u++,c/=2),u+h>=d?(l=0,u=d):u+h>=1?(l=(t*c-1)*Math.pow(2,i),u+=h):(l=t*Math.pow(2,h-1)*Math.pow(2,i),u=0));i>=8;e[r+m]=255&l,m+=g,l/=256,i-=8);for(u=u<<i|l,f+=i;f>0;e[r+m]=255&u,m+=g,u/=256,f-=8);e[r+m-g]|=128*y}},"./node_modules/imsc/src/main/js/doc.js":function(e,t,r){!function(e,t,r,n,i){function o(e,t,r,n){var i=n&&"seq"===n.timeContainer,u=0;n&&(u=i&&r?r.end:n.begin),t.begin=t.explicit_begin?t.explicit_begin+u:u;var l=t.begin,c=null;if("sets"in t)for(var f=0;f<t.sets.length;f++)o(e,t.sets[f],c,t),l="seq"===t.timeContainer?t.sets[f].end:Math.max(l,t.sets[f].end),c=t.sets[f];if("contents"in t){if("contents"in t)for(var d=0;d<t.contents.length;d++)o(e,t.contents[d],c,t),l="seq"===t.timeContainer?t.contents[d].end:Math.max(l,t.contents[d].end),c=t.contents[d]}else l=i?t.begin:Number.POSITIVE_INFINITY;null!==t.explicit_end&&null!==t.explicit_dur?t.end=Math.min(t.begin+t.explicit_dur,u+t.explicit_end):null===t.explicit_end&&null!==t.explicit_dur?t.end=t.begin+t.explicit_dur:null!==t.explicit_end&&null===t.explicit_dur?t.end=u+t.explicit_end:t.end=l,delete t.explicit_begin,delete t.explicit_dur,delete t.explicit_end,e._registerEvent(t)}function u(e){this.node=e}function l(){this.events=[],this.head=new c,this.body=null}function c(){this.styling=new f,this.layout=new p}function f(){this.styles={},this.initials={}}function d(){this.id=null,this.styleAttrs=null,this.styleRefs=null}function h(){this.styleAttrs=null}function p(){this.regions={}}function m(e,t){g.call(this,"image"),this.src=e,this.type=t}function g(e){this.kind=e}function y(e){this.id=e}function v(e){this.regionID=e}function b(e){this.styleAttrs=e}function _(e){this.sets=e}function T(e){this.contents=e}function E(e,t,r){this.explicit_begin=e,this.explicit_end=t,this.explicit_dur=r}function S(){g.call(this,"body")}function w(){g.call(this,"div")}function A(){g.call(this,"p")}function C(){g.call(this,"span")}function I(){g.call(this,"span")}function O(){g.call(this,"br")}function R(){}function P(){}function k(e){return e&&"xml:id"in e.attributes&&e.attributes["xml:id"].value||null}function D(e){return e&&"style"in e.attributes?e.attributes.style.value.split(" "):[]}function N(e,t){var r={};if(null!==e)for(var i in e.attributes){var o=e.attributes[i].uri+" "+e.attributes[i].local,u=n.byQName[o];if(void 0!==u){var l=u.parse(e.attributes[i].value);null!==l?(r[o]=l,u===n.byName.zIndex&&F(t,"zIndex attribute present but not used by IMSC1 since regions do not overlap")):B(t,"Cannot parse styling attribute "+o+" --> "+e.attributes[i].value)}}return r}function L(e,t,r){for(var n in e.attributes)if(e.attributes[n].uri===t&&e.attributes[n].local===r)return e.attributes[n].value;return null}function x(e,t,r){var n,i=null;return null!==(n=/^(\d+(?:\.\d+)?)f$/.exec(r))?null!==t&&(i=parseFloat(n[1])/t):null!==(n=/^(\d+(?:\.\d+)?)t$/.exec(r))?null!==e&&(i=parseFloat(n[1])/e):null!==(n=/^(\d+(?:\.\d+)?)ms$/.exec(r))?i=parseFloat(n[1])/1e3:null!==(n=/^(\d+(?:\.\d+)?)s$/.exec(r))?i=parseFloat(n[1]):null!==(n=/^(\d+(?:\.\d+)?)h$/.exec(r))?i=3600*parseFloat(n[1]):null!==(n=/^(\d+(?:\.\d+)?)m$/.exec(r))?i=60*parseFloat(n[1]):null!==(n=/^(\d{2,}):(\d\d):(\d\d(?:\.\d+)?)$/.exec(r))?i=3600*parseInt(n[1])+60*parseInt(n[2])+parseFloat(n[3]):null!==(n=/^(\d{2,}):(\d\d):(\d\d)\:(\d{2,})$/.exec(r))&&null!==t&&(i=3600*parseInt(n[1])+60*parseInt(n[2])+parseInt(n[3])+(null===n[4]?0:parseInt(n[4])/t)),i}function j(e,t,r,n){for(var i=t.length-1;i>=0;i--){var o=t[i];o in e.styles?M(e.styles[o].styleAttrs,r):B(n,"Non-existant style id referenced")}}function M(e,t){for(var r in e)e.hasOwnProperty(r)&&(r in t||(t[r]=e[r]))}function F(e,t){if(e&&e.warn&&e.warn(t))throw t}function B(e,t){if(e&&e.error&&e.error(t))throw t}function U(e,t){throw e&&e.fatal&&e.fatal(t),t}function q(e,t){for(var r,n=0,i=e.length-1;n<=i;){var o=e[r=Math.floor((n+i)/2)];if(o<t)n=r+1;else{if(!(o>t))return{found:!0,index:r};i=r-1}}return{found:!1,index:n}}e.fromXML=function(e,i,g){var y=t.parser(!0,{xmlns:!0}),v=[],b=[],_=[],T=0,E=null;y.onclosetag=function(e){if(v[0]instanceof R)null!==E.head&&null!==E.head.styling&&j(E.head.styling,v[0].styleRefs,v[0].styleAttrs,i),delete v[0].styleRefs;else if(v[0]instanceof f)for(var t in v[0].styles)v[0].styles.hasOwnProperty(t)&&function e(t,r,n){for(;r.styleRefs.length>0;){var i=r.styleRefs.pop();i in t.styles?(e(t,t.styles[i],n),M(t.styles[i].styleAttrs,r.styleAttrs)):B(n,"Non-existant style id referenced")}}(v[0],v[0].styles[t],i);else if(v[0]instanceof A||v[0]instanceof C){if(v[0].contents.length>1){var n,o=[v[0].contents[0]];for(n=1;n<v[0].contents.length;n++)v[0].contents[n]instanceof I&&o[o.length-1]instanceof I?o[o.length-1].text+=v[0].contents[n].text:o.push(v[0].contents[n]);v[0].contents=o}v[0]instanceof C&&1===v[0].contents.length&&v[0].contents[0]instanceof I&&(v[0].text=v[0].contents[0].text,delete v[0].contents)}else v[0]instanceof u&&(v[0].node.uri===r.ns_tt&&"metadata"===v[0].node.local?T--:T>0&&g&&"onCloseTag"in g&&g.onCloseTag());_.shift(),b.shift(),v.shift()},y.ontext=function(e){if(void 0===v[0]);else if(v[0]instanceof C||v[0]instanceof A){if(v[0]instanceof C){var t=v[0].styleAttrs[n.byName.ruby.qname];if("container"===t||"textContainer"===t||"baseContainer"===t)return}var r=new I;r.initFromText(E,v[0],e,b[0],_[0],i),v[0].contents.push(r)}else v[0]instanceof u&&T>0&&g&&"onText"in g&&g.onText(e)},y.onopentag=function(e){var t=e.attributes["xml:space"];t?_.unshift(t.value):0===_.length?_.unshift("default"):_.unshift(_[0]);var o=e.attributes["xml:lang"];if(o?b.unshift(o.value):0===b.length?b.unshift(""):b.unshift(b[0]),e.uri===r.ns_tt){if("tt"===e.local)null!==E&&U(i,"Two <tt> elements at ("+this.line+","+this.column+")"),(E=new l).initFromNode(e,b[0],i),v.unshift(E);else if("head"===e.local)v[0]instanceof l||U(i,"Parent of <head> element is not <tt> at ("+this.line+","+this.column+")"),v.unshift(E.head);else if("styling"===e.local)v[0]instanceof c||U(i,"Parent of <styling> element is not <head> at ("+this.line+","+this.column+")"),v.unshift(E.head.styling);else if("style"===e.local)v[0]instanceof f?((I=new d).initFromNode(e,i),I.id?E.head.styling.styles[I.id]=I:B(i,"<style> element missing @id attribute"),v.unshift(I)):v[0]instanceof R?((I=new d).initFromNode(e,i),M(I.styleAttrs,v[0].styleAttrs),v.unshift(I)):U(i,"Parent of <style> element is not <styling> or <region> at ("+this.line+","+this.column+")");else if("initial"===e.local){if(v[0]instanceof f){for(var y in(k=new h).initFromNode(e,i),k.styleAttrs)k.styleAttrs.hasOwnProperty(y)&&(E.head.styling.initials[y]=k.styleAttrs[y]);v.unshift(k)}else U(i,"Parent of <initial> element is not <styling> at ("+this.line+","+this.column+")")}else if("layout"===e.local)v[0]instanceof c||U(i,"Parent of <layout> element is not <head> at "+this.line+","+this.column+")"),v.unshift(E.head.layout);else if("region"===e.local){v[0]instanceof p||U(i,"Parent of <region> element is not <layout> at "+this.line+","+this.column+")");var I,k,D=new R;D.initFromNode(E,e,b[0],i),!D.id||D.id in E.head.layout.regions?B(i,"Ignoring <region> with duplicate or missing @id at "+this.line+","+this.column+")"):E.head.layout.regions[D.id]=D,v.unshift(D)}else if("body"===e.local){v[0]instanceof l||U(i,"Parent of <body> element is not <tt> at "+this.line+","+this.column+")"),null!==E.body&&U(i,"Second <body> element at "+this.line+","+this.column+")");var N=new S;N.initFromNode(E,e,b[0],i),E.body=N,v.unshift(N)}else if("div"===e.local){v[0]instanceof w||v[0]instanceof S||U(i,"Parent of <div> element is not <body> or <div> at "+this.line+","+this.column+")");var L=new w;L.initFromNode(E,v[0],e,b[0],i);var x=L.styleAttrs[n.byName.backgroundImage.qname];x&&(L.contents.push(new m(x)),delete L.styleAttrs[n.byName.backgroundImage.qname]),v[0].contents.push(L),v.unshift(L)}else if("image"===e.local){v[0]instanceof w||U(i,"Parent of <image> element is not <div> at "+this.line+","+this.column+")");var j=new m;j.initFromNode(E,v[0],e,b[0],i),v[0].contents.push(j),v.unshift(j)}else if("p"===e.local){v[0]instanceof w||U(i,"Parent of <p> element is not <div> at "+this.line+","+this.column+")");var F=new A;F.initFromNode(E,v[0],e,b[0],i),v[0].contents.push(F),v.unshift(F)}else if("span"===e.local){v[0]instanceof C||v[0]instanceof A||U(i,"Parent of <span> element is not <span> or <p> at "+this.line+","+this.column+")");var q=new C;q.initFromNode(E,v[0],e,b[0],_[0],i),v[0].contents.push(q),v.unshift(q)}else if("br"===e.local){v[0]instanceof C||v[0]instanceof A||U(i,"Parent of <br> element is not <span> or <p> at "+this.line+","+this.column+")");var H=new O;H.initFromNode(E,v[0],e,b[0],i),v[0].contents.push(H),v.unshift(H)}else if("set"===e.local){v[0]instanceof C||v[0]instanceof A||v[0]instanceof w||v[0]instanceof S||v[0]instanceof R||v[0]instanceof O||U(i,"Parent of <set> element is not a content element or a region at "+this.line+","+this.column+")");var V=new P;V.initFromNode(E,v[0],e,i),v[0].sets.push(V),v.unshift(V)}else v.unshift(new u(e))}else v.unshift(new u(e));if(v[0]instanceof u){if(e.uri===r.ns_tt&&"metadata"===e.local)T++;else if(T>0&&g&&"onOpenTag"in g){var G=[];for(var Y in e.attributes)G[e.attributes[Y].uri+" "+e.attributes[Y].local]={uri:e.attributes[Y].uri,local:e.attributes[Y].local,value:e.attributes[Y].value};g.onOpenTag(e.uri,e.local,G)}}},y.write(e).close(),delete E.head.styling.styles;var k=!1;for(var D in E.head.layout.regions)if(E.head.layout.regions.hasOwnProperty(D)){k=!0;break}if(!k){var N=R.prototype.createDefaultRegion(E.lang);E.head.layout.regions[N.id]=N}for(var L in E.head.layout.regions)E.head.layout.regions.hasOwnProperty(L)&&o(E,E.head.layout.regions[L],null,null);return E.body&&o(E,E.body,null,null),E.body&&function e(t){if("contents"in t)for(var r=("styleAttrs"in t)?t.styleAttrs[n.byName.ruby.qname]:null,i="span"===t.kind&&("container"===r||"textContainer"===r||"baseContainer"===r),o=t.contents.length-1;o>=0;o--)!i||"styleAttrs"in t.contents[o]&&n.byName.ruby.qname in t.contents[o].styleAttrs?e(t.contents[o]):delete t.contents[o]}(E.body),E},l.prototype.initFromNode=function(e,t,n){var o,u,l,c,f,d,h,p,m=function(e,t){var n=L(e,r.ns_ttp,"cellResolution"),i=15,o=32;if(null!==n){var u=/(\d+) (\d+)/.exec(n);null!==u?(o=parseInt(u[1]),i=parseInt(u[2])):F(t,"Malformed cellResolution value (using initial value instead)")}return{w:o,h:i}}(e,n);this.cellLength={h:new i.ComputedLength(0,1/m.h),w:new i.ComputedLength(1/m.w,0)};var g=(u=L(e,r.ns_ttp,"frameRate"),l=30,null!==u&&(null!==(o=/(\d+)/.exec(u))?l=parseInt(o[1]):F(n,"Malformed frame rate attribute (using initial value instead)")),c=L(e,r.ns_ttp,"frameRateMultiplier"),f=1,null!==c&&(null!==(o=/(\d+) (\d+)/.exec(c))?f=parseInt(o[1])/parseInt(o[2]):F(n,"Malformed frame rate multiplier attribute (using initial value instead)")),d=f*l,h=1,null===(p=L(e,r.ns_ttp,"tickRate"))?null!==u&&(h=d):null!==(o=/(\d+)/.exec(p))?h=parseInt(o[1]):F(n,"Malformed tick rate attribute (using initial value instead)"),{effectiveFrameRate:d,tickRate:h});this.effectiveFrameRate=g.effectiveFrameRate,this.tickRate=g.tickRate,this.aspectRatio=function(e,t){var n=L(e,r.ns_ittp,"aspectRatio");null===n&&(n=L(e,r.ns_ttp,"displayAspectRatio"));var i=null;if(null!==n){var o=/(\d+)\s+(\d+)/.exec(n);if(null!==o){var u=parseInt(o[1]),l=parseInt(o[2]);0!==u&&0!==l?i=u/l:B(t,"Illegal aspectRatio values (ignoring)")}else B(t,"Malformed aspectRatio attribute (ignoring)")}return i}(e,n);var y=L(e,r.ns_ttp,"timeBase");null!==y&&"media"!==y&&U(n,"Unsupported time base");var v=function(e,t){var n=L(e,r.ns_tts,"extent");if(null===n)return null;var o=n.split(" ");if(2!==o.length)return F(t,"Malformed extent (ignoring)"),null;var u=i.parseLength(o[0]),l=i.parseLength(o[1]);return l&&u?{h:l,w:u}:(F(t,"Malformed extent values (ignoring)"),null)}(e,n);null===v?this.pxLength={h:null,w:null}:("px"===v.h.unit&&"px"===v.w.unit||U(n,"Extent on TT must be in px or absent"),this.pxLength={h:new i.ComputedLength(0,1/v.h.value),w:new i.ComputedLength(1/v.w.value,0)}),this.dimensions={h:new i.ComputedLength(0,1),w:new i.ComputedLength(1,0)},this.lang=t},l.prototype._registerEvent=function(e){if(!(e.end<=e.begin)){var t=q(this.events,e.begin);if(t.found||this.events.splice(t.index,0,e.begin),e.end!==Number.POSITIVE_INFINITY){var r=q(this.events,e.end);r.found||this.events.splice(r.index,0,e.end)}}},l.prototype.getMediaTimeRange=function(){return[this.events[0],this.events[this.events.length-1]]},l.prototype.getMediaTimeEvents=function(){return this.events},d.prototype.initFromNode=function(e,t){this.id=k(e),this.styleAttrs=N(e,t),this.styleRefs=D(e)},h.prototype.initFromNode=function(e,t){for(var n in this.styleAttrs={},e.attributes)if(e.attributes[n].uri===r.ns_itts||e.attributes[n].uri===r.ns_ebutts||e.attributes[n].uri===r.ns_tts){var i=e.attributes[n].uri+" "+e.attributes[n].local;this.styleAttrs[i]=e.attributes[n].value}},m.prototype.initFromNode=function(e,t,r,n,i){this.src="src"in r.attributes?r.attributes.src.value:null,this.src||B(i,"Invalid image@src attribute"),this.type="type"in r.attributes?r.attributes.type.value:null,this.type||B(i,"Invalid image@type attribute"),b.prototype.initFromNode.call(this,e,t,r,i),E.prototype.initFromNode.call(this,e,t,r,i),_.prototype.initFromNode.call(this,e,t,r,i),v.prototype.initFromNode.call(this,e,t,r,i),this.lang=n},y.prototype.initFromNode=function(e,t,r,n){this.id=k(r)},v.prototype.initFromNode=function(e,t,r,n){this.regionID=r&&"region"in r.attributes?r.attributes.region.value:""},b.prototype.initFromNode=function(e,t,r,n){this.styleAttrs=N(r,n),null!==e.head&&null!==e.head.styling&&j(e.head.styling,D(r),this.styleAttrs,n)},_.prototype.initFromNode=function(e,t,r,n){this.sets=[]},T.prototype.initFromNode=function(e,t,r,n){this.contents=[]},E.prototype.initFromNode=function(e,t,r,n){var i,o,u,l,c=(i=null,r&&"begin"in r.attributes&&null===(i=x(e.tickRate,e.effectiveFrameRate,r.attributes.begin.value))&&F(n,"Malformed begin value "+r.attributes.begin.value+" (using 0)"),o=null,r&&"dur"in r.attributes&&null===(o=x(e.tickRate,e.effectiveFrameRate,r.attributes.dur.value))&&F(n,"Malformed dur value "+r.attributes.dur.value+" (ignoring)"),u=null,r&&"end"in r.attributes&&null===(u=x(e.tickRate,e.effectiveFrameRate,r.attributes.end.value))&&F(n,"Malformed end value (ignoring)"),{explicit_begin:i,explicit_end:u,explicit_dur:o});this.explicit_begin=c.explicit_begin,this.explicit_end=c.explicit_end,this.explicit_dur=c.explicit_dur,this.timeContainer=(l=r&&"timeContainer"in r.attributes?r.attributes.timeContainer.value:null)&&"par"!==l?"seq"===l?"seq":(B(n,"Illegal value of timeContainer (assuming 'par')"),"par"):"par"},S.prototype.initFromNode=function(e,t,r,n){b.prototype.initFromNode.call(this,e,null,t,n),E.prototype.initFromNode.call(this,e,null,t,n),_.prototype.initFromNode.call(this,e,null,t,n),v.prototype.initFromNode.call(this,e,null,t,n),T.prototype.initFromNode.call(this,e,null,t,n),this.lang=r},w.prototype.initFromNode=function(e,t,r,n,i){b.prototype.initFromNode.call(this,e,t,r,i),E.prototype.initFromNode.call(this,e,t,r,i),_.prototype.initFromNode.call(this,e,t,r,i),v.prototype.initFromNode.call(this,e,t,r,i),T.prototype.initFromNode.call(this,e,t,r,i),this.lang=n},A.prototype.initFromNode=function(e,t,r,n,i){b.prototype.initFromNode.call(this,e,t,r,i),E.prototype.initFromNode.call(this,e,t,r,i),_.prototype.initFromNode.call(this,e,t,r,i),v.prototype.initFromNode.call(this,e,t,r,i),T.prototype.initFromNode.call(this,e,t,r,i),this.lang=n},C.prototype.initFromNode=function(e,t,r,n,i,o){b.prototype.initFromNode.call(this,e,t,r,o),E.prototype.initFromNode.call(this,e,t,r,o),_.prototype.initFromNode.call(this,e,t,r,o),v.prototype.initFromNode.call(this,e,t,r,o),T.prototype.initFromNode.call(this,e,t,r,o),this.space=i,this.lang=n},I.prototype.initFromText=function(e,t,r,n,i,o){E.prototype.initFromNode.call(this,e,t,null,o),this.text=r,this.space=i,this.lang=n},O.prototype.initFromNode=function(e,t,r,n,i){v.prototype.initFromNode.call(this,e,t,r,i),E.prototype.initFromNode.call(this,e,t,r,i),this.lang=n},R.prototype.createDefaultRegion=function(e){var t=new R;return y.call(t,""),b.call(t,{}),_.call(t,[]),E.call(t,0,Number.POSITIVE_INFINITY,null),this.lang=e,t},R.prototype.initFromNode=function(e,t,r,n){y.prototype.initFromNode.call(this,e,null,t,n),E.prototype.initFromNode.call(this,e,null,t,n),_.prototype.initFromNode.call(this,e,null,t,n),this.styleAttrs=N(t,n),this.styleRefs=D(t),this.lang=r},P.prototype.initFromNode=function(e,t,r,n){E.prototype.initFromNode.call(this,e,t,r,n);var i=N(r,n);for(var o in this.qname=null,this.value=null,i)if(i.hasOwnProperty(o)){if(this.qname){B(n,"More than one style specified on set");break}this.qname=o,this.value=i[o]}}}(t,"undefined"==typeof sax?r("./node_modules/sax/lib/sax.js"):sax,"undefined"==typeof imscNames?r("./node_modules/imsc/src/main/js/names.js"):imscNames,"undefined"==typeof imscStyles?r("./node_modules/imsc/src/main/js/styles.js"):imscStyles,"undefined"==typeof imscUtils?r("./node_modules/imsc/src/main/js/utils.js"):imscUtils)},"./node_modules/imsc/src/main/js/html.js":function(e,t,r){!function(e,t,r){function n(e,t){this.id=e,this.plist=t}function i(e,t){var r={before:null,after:null,start:null,end:null};return"tb"===t.bpd?(r.before=e.top,r.after=e.bottom,"lr"===t.ipd?(r.start=e.left,r.end=e.right):(r.start=e.right,r.end=e.left)):"lr"===t.bpd?(r.before=e.left,r.after=e.right,r.start=e.top,r.end=e.bottom):"rl"===t.bpd&&(r.before=e.right,r.after=e.left,r.start=e.top,r.end=e.bottom),r}function o(e,t,r,n){if("rt"!==t.localName&&"rtc"!==t.localName){var u,l,c,f,d=t.style.backgroundColor||n;if(0===t.childElementCount){if("span"===t.localName||"rb"===t.localName){var h=i(t.getBoundingClientRect(),e);if(0!==r.length&&(u=h.before,l=h.after,c=r[r.length-1].before,l<(f=r[r.length-1].after)&&u>c||f<=l&&c>=u)){var p=Math.sign(h.after-h.before),g=Math.sign(h.end-h.start);p*(h.before-r[r.length-1].before)<0&&(r[r.length-1].before=h.before),p*(h.after-r[r.length-1].after)>0&&(r[r.length-1].after=h.after),g*(h.start-r[r.length-1].start)<0&&(r[r.length-1].start=h.start,r[r.length-1].start_elem=r[r.length-1].elements.length),g*(h.end-r[r.length-1].end)>0&&(r[r.length-1].end=h.end,r[r.length-1].end_elem=r[r.length-1].elements.length)}else r.push({before:h.before,after:h.after,start:h.start,end:h.end,start_elem:0,end_elem:0,elements:[],rbc:[],te:[],text:"",br:!1});r[r.length-1].text+=t.textContent,r[r.length-1].elements.push({node:t,bgcolor:d,before:h.before,after:h.after})}else"br"===t.localName&&0!==r.length&&(r[r.length-1].br=!0)}else for(var y=t.firstChild;y;)y.nodeType===Node.ELEMENT_NODE&&(o(e,y,r,d),"ruby"===y.localName||"rtc"===y.localName?r.length>0&&r[r.length-1].rbc.push(y):"span"===y.localName&&y.style[m]&&"none"!==y.style[m]&&r.length>0&&r[r.length-1].te.push(y)),y=y.nextSibling}}function u(e,t,r,n){var i;"none"!==n.style&&("auto"===n.style?t.style[m]="filled":t.style[m]=n.style+" "+n.symbol,("before"===n.position||"after"===n.position)&&(i="tb"===e.bpd?"before"===n.position?"left over":"left under":"rl"===e.bpd?"before"===n.position?"right under":"left under":"before"===n.position?"left under":"right under",t.style[g]=i))}function l(e,t){this.qname=e,this.map=t}e.render=function(e,t,l,f,d,m,y,v,b){var _=f||t.clientHeight,T=d||t.clientWidth;if(null!==e.aspectRatio){var E=_*e.aspectRatio;E>T?_=Math.round(T/e.aspectRatio):T=E}var S=document.createElement("div");S.style.position="relative",S.style.width=T+"px",S.style.height=_+"px",S.style.margin="auto",S.style.top=0,S.style.bottom=0,S.style.left=0,S.style.right=0,S.style.zIndex=0;var w={h:_,w:T,regionH:null,regionW:null,imgResolver:l,displayForcedOnlyMode:m||!1,isd:e,errorHandler:y,previousISDState:v,enableRollUp:b||!1,currentISDState:{},flg:null,lp:null,mra:null,ipd:null,bpd:null,ruby:null,textEmphasis:null,rubyReserve:null};if(t.appendChild(S),"contents"in e)for(var A=0;A<e.contents.length;A++)(function e(t,l,f,d){var m;if("region"===f.kind)(m=document.createElement("div")).style.position="absolute";else if("body"===f.kind)m=document.createElement("div");else if("div"===f.kind)m=document.createElement("div");else if("image"===f.kind){if(m=document.createElement("img"),null!==t.imgResolver&&null!==f.src){var y=t.imgResolver(f.src,m);y&&(m.src=y),m.height=t.regionH,m.width=t.regionW}}else if("p"===f.kind)m=document.createElement("p");else if("span"===f.kind){if("container"===f.styleAttrs[r.byName.ruby.qname])m=document.createElement("ruby"),t.ruby=!0;else if("base"===f.styleAttrs[r.byName.ruby.qname])m=document.createElement("rb");else if("text"===f.styleAttrs[r.byName.ruby.qname])m=document.createElement("rt");else if("baseContainer"===f.styleAttrs[r.byName.ruby.qname])m=document.createElement("rbc");else if("textContainer"===f.styleAttrs[r.byName.ruby.qname])m=document.createElement("rtc");else{if("delimiter"===f.styleAttrs[r.byName.ruby.qname])return;m=document.createElement("span")}}else"br"===f.kind&&(m=document.createElement("br"));if(m){if(f.lang&&("region"!==f.kind&&f.lang===d.lang||(m.lang=f.lang)),l.appendChild(m),m.style.margin="0","region"===f.kind){var v=f.styleAttrs[r.byName.writingMode.qname];"lrtb"===v||"lr"===v?(t.ipd="lr",t.bpd="tb"):"rltb"===v||"rl"===v?(t.ipd="rl",t.bpd="tb"):"tblr"===v?(t.ipd="tb",t.bpd="lr"):"tbrl"!==v&&"tb"!==v||(t.ipd="tb",t.bpd="rl")}else if("p"===f.kind&&"tb"===t.bpd){var b=f.styleAttrs[r.byName.direction.qname];t.ipd="ltr"===b?"lr":"rl"}for(var _=0;_<c.length;_++){var T=c[_],E=f.styleAttrs[T.qname];void 0!==E&&null!==T.map&&T.map(t,m,f,E)}var S=m,w=f.styleAttrs[r.byName.linePadding.qname];if(w&&!w.isZero()){var A=w.toUsedLength(t.w,t.h);if(A>0){var C=Math.ceil(A)+"px";"tb"===t.bpd?(S.style.paddingLeft=C,S.style.paddingRight=C):(S.style.paddingTop=C,S.style.paddingBottom=C),t.lp=w}}var I=f.styleAttrs[r.byName.multiRowAlign.qname];if(I&&"auto"!==I){var O=document.createElement("span");O.style.display="inline-block",O.style.textAlign=I,m.appendChild(O),S=O,t.mra=I}var R=f.styleAttrs[r.byName.rubyReserve.qname];if(R&&"none"!==R[0]&&(t.rubyReserve=R),f.styleAttrs[r.byName.fillLineGap.qname]&&(t.flg=!0),"span"===f.kind&&f.text){var P=f.styleAttrs[r.byName.textEmphasis.qname];if(P&&"none"!==P.style&&(t.textEmphasis=!0),r.byName.textCombine.qname in f.styleAttrs&&"all"===f.styleAttrs[r.byName.textCombine.qname])m.textContent=f.text,P&&u(t,m,0,P);else for(var k="",D=0;D<f.text.length;D++){k+=f.text.charAt(D);var N=f.text.charCodeAt(D);if(N<55296||N>56319||D===f.text.length-1){var L=document.createElement("span");L.textContent=k,P&&u(t,L,0,P),m.appendChild(L),k="",L._isd_element=f}}}if("contents"in f)for(var x=0;x<f.contents.length;x++)e(t,S,f.contents[x],f);var j=[];if("p"===f.kind&&(o(t,S,j,null),t.rubyReserve&&(function(e,t){for(var r=0;r<e.length;r++){var n,i,o=document.createElement("ruby"),u=document.createElement("rb");u.textContent="​",o.appendChild(u);var l,c=t.rubyReserve[1].toUsedLength(t.w,t.h)+"px";"both"===t.rubyReserve[0]||"outside"===t.rubyReserve[0]&&1==e.length?((n=document.createElement("rtc")).style[p]=h?"after":"under",n.textContent="​",n.style.fontSize=c,(i=document.createElement("rtc")).style[p]=h?"before":"over",i.textContent="​",i.style.fontSize=c,o.appendChild(n),o.appendChild(i)):((n=document.createElement("rtc")).textContent="​",n.style.fontSize=c,l="after"===t.rubyReserve[0]||"outside"===t.rubyReserve[0]&&r>0?h?"after":"tb"===t.bpd||"rl"===t.bpd?"under":"over":h?"before":"tb"===t.bpd||"rl"===t.bpd?"over":"under",n.style[p]=l,o.appendChild(n));for(var f=null,d=0;d<e[r].rbc.length;d++)if("ruby"===e[r].rbc[d].localName){f=e[r].rbc[d];for(var m=0;m<f.style.length;m++)o.style.setProperty(f.style.item(m),f.style.getPropertyValue(f.style.item(m)));break}(f=f||e[r].elements[0].node).parentElement.insertBefore(o,f)}}(j,t),t.rubyReserve=null),(t.ruby||t.rubyReserve)&&(function(e,t){for(var r,n=0;n<e.length;n++)for(var i=0;i<e[n].rbc.length;i++)e[n].rbc[i].style[p]||(r=h?0===n?"before":"after":"tb"===t.bpd||"rl"===t.bpd?0===n?"over":"under":0===n?"under":"over",e[n].rbc[i].style[p]=r)}(j,t),t.ruby=null),t.textEmphasis&&(function(e,t){for(var r,n=0;n<e.length;n++)for(var i=0;i<e[n].te.length;i++)e[n].te[i].style[g]&&"none"!==e[n].te[i].style[g]||(r="tb"===t.bpd?0===n?"left over":"left under":"rl"===t.bpd?0===n?"right under":"left under":0===n?"left under":"right under",e[n].te[i].style[g]=r)}(j,t),t.textEmphasis=null),t.mra&&(function(e){for(var t=0;t<e.length-1;t++){var r=e[t].elements.length;if(0!==r&&!1===e[t].br){var n=document.createElement("br"),i=e[t].elements[r-1].node;i.parentElement.insertBefore(n,i.nextSibling)}}}(j),t.mra=null),t.lp&&(function(e,t,r){if(null!==e)for(var n=0;n<e.length;n++){var i=e[n].elements.length,o=Math.ceil(t)+"px",u="-"+Math.ceil(t)+"px";if(0!==i){var l=e[n].elements[e[n].start_elem],c=e[n].elements[e[n].end_elem];if(l===c&&(0==(elementBoundingRect=l.node.getBoundingClientRect()).width||0==elementBoundingRect.height))continue;"lr"===r.ipd?(l.node.style.marginLeft=u,l.node.style.paddingLeft=o):"rl"===r.ipd?(l.node.style.paddingRight=o,l.node.style.marginRight=u):"tb"===r.ipd&&(l.node.style.paddingTop=o,l.node.style.marginTop=u),"lr"===r.ipd?(c.node.style.marginRight=u,c.node.style.paddingRight=o):"rl"===r.ipd?(c.node.style.paddingLeft=o,c.node.style.marginLeft=u):"tb"===r.ipd&&(c.node.style.paddingBottom=o,c.node.style.marginBottom=u)}}}(j,t.lp.toUsedLength(t.w,t.h),t),t.lp=null),function(e){for(var t=0;t<e.length;t++)for(var r=e[t],n=1;n<r.elements.length;){var i=r.elements[n-1],o=r.elements[n];(function(e,t){if("SPAN"===e.tagName&&"SPAN"===t.tagName&&e._isd_element===t._isd_element){e.textContent+=t.textContent;for(var r=0;r<t.style.length;r++){var n=t.style[r];(n.indexOf("border")>=0||n.indexOf("padding")>=0||n.indexOf("margin")>=0)&&(e.style[n]=t.style[n])}return t.parentElement.removeChild(t),!0}return!1})(i.node,o.node)?r.elements.splice(n,1):n++}for(var u,l,c=[],f=0;f<e.length;f++)for(var d=0;d<e[f].elements.length;d++)(l=function e(t,r,n){return t.style.backgroundColor?(n&&!r.includes(t)&&r.push(t),t.style.backgroundColor):"SPAN"===t.parentElement.nodeName?e(t.parentElement,r,!0):void 0}(u=e[f].elements[d].node,c,!1))&&(u.style.backgroundColor=l);for(var h=0;h<c.length;h++)c[h].style.backgroundColor=""}(j),t.flg)){var M=i(S.getBoundingClientRect(),t);(function(e,t,r,n,i){for(var o,u,l,c,f=Math.sign(r-t),d=0;d<=e.length;d++){if(o=0===d?Math.round(t):d===e.length?Math.round(r):Math.round((e[d-1].after+e[d].before)/2),d>0&&e[d-1])for(l=0;l<e[d-1].elements.length;l++)u=f*(o-(c=e[d-1].elements[l]).after)+"px","lr"===n.bpd?c.node.style.paddingRight=u:"rl"===n.bpd?c.node.style.paddingLeft=u:"tb"===n.bpd&&(c.node.style.paddingBottom=u);if(d<e.length)for(l=0;l<e[d].elements.length;l++)u=f*((c=e[d].elements[l]).before-o)+"px","lr"===n.bpd?c.node.style.paddingLeft=u:"rl"===n.bpd?c.node.style.paddingRight=u:"tb"===n.bpd&&(c.node.style.paddingTop=u)}})(j,M.before,M.after,t),t.flg=null}if("region"===f.kind&&"tb"===t.bpd&&t.enableRollUp&&f.contents.length>0&&"after"===f.styleAttrs[r.byName.displayAlign.qname]){o(t,S,j,null);var F=new n(""===f.id?"_":f.id,j);if(t.currentISDState[F.id]=F,t.previousISDState&&F.id in t.previousISDState&&t.previousISDState[F.id].plist.length>0&&F.plist.length>1&&F.plist[F.plist.length-2].text===t.previousISDState[F.id].plist[t.previousISDState[F.id].plist.length-1].text){var B=m.firstElementChild,U=F.plist[F.plist.length-1].after-F.plist[F.plist.length-1].before;B.style.bottom="-"+U+"px",B.style.transition="transform 0.4s",B.style.position="relative",B.style.transform="translateY(-"+U+"px)"}}}else!function(e,t){if(e&&e.error&&e.error(t))throw t}(t.errorHandler,"Error processing ISD element kind: "+f.kind)})(w,S,e.contents[A],e);return w.currentISDState};for(var c=[new l("http://www.w3.org/ns/ttml#styling backgroundColor",function(e,t,r,n){0!==n[3]&&(t.style.backgroundColor="rgba("+n[0].toString()+","+n[1].toString()+","+n[2].toString()+","+(n[3]/255).toString()+")")}),new l("http://www.w3.org/ns/ttml#styling color",function(e,t,r,n){t.style.color="rgba("+n[0].toString()+","+n[1].toString()+","+n[2].toString()+","+(n[3]/255).toString()+")"}),new l("http://www.w3.org/ns/ttml#styling direction",function(e,t,r,n){t.style.direction=n}),new l("http://www.w3.org/ns/ttml#styling display",function(e,t,r,n){}),new l("http://www.w3.org/ns/ttml#styling displayAlign",function(e,t,r,n){t.style.display="flex",t.style.flexDirection="column","before"===n?t.style.justifyContent="flex-start":"center"===n?t.style.justifyContent="center":"after"===n&&(t.style.justifyContent="flex-end")}),new l("http://www.w3.org/ns/ttml#styling extent",function(e,t,r,n){e.regionH=n.h.toUsedLength(e.w,e.h),e.regionW=n.w.toUsedLength(e.w,e.h);var i=0,o=0,u=r.styleAttrs["http://www.w3.org/ns/ttml#styling padding"];u&&(i=u[0].toUsedLength(e.w,e.h)+u[2].toUsedLength(e.w,e.h),o=u[1].toUsedLength(e.w,e.h)+u[3].toUsedLength(e.w,e.h)),t.style.height=e.regionH-i+"px",t.style.width=e.regionW-o+"px"}),new l("http://www.w3.org/ns/ttml#styling fontFamily",function(e,t,r,n){for(var i=[],o=0;o<n.length;o++)"monospaceSerif"===n[o]?(i.push("Courier New"),i.push('"Liberation Mono"'),i.push("Courier"),i.push("monospace")):"proportionalSansSerif"===n[o]?(i.push("Arial"),i.push("Helvetica"),i.push('"Liberation Sans"'),i.push("sans-serif")):"monospace"===n[o]?i.push("monospace"):"sansSerif"===n[o]?i.push("sans-serif"):"serif"===n[o]?i.push("serif"):"monospaceSansSerif"===n[o]?(i.push("Consolas"),i.push("monospace")):"proportionalSerif"===n[o]?i.push("serif"):i.push(n[o]);if(i.length>0){for(var u=[i[0]],l=1;l<i.length;l++)-1==u.indexOf(i[l])&&u.push(i[l]);i=u}t.style.fontFamily=i.join(",")}),new l("http://www.w3.org/ns/ttml#styling shear",function(e,t,r,n){if(0!==n){var i=-.9*n;"tb"===e.bpd?t.style.transform="skewX("+i+"deg)":t.style.transform="skewY("+i+"deg)"}}),new l("http://www.w3.org/ns/ttml#styling fontSize",function(e,t,r,n){t.style.fontSize=n.toUsedLength(e.w,e.h)+"px"}),new l("http://www.w3.org/ns/ttml#styling fontStyle",function(e,t,r,n){t.style.fontStyle=n}),new l("http://www.w3.org/ns/ttml#styling fontWeight",function(e,t,r,n){t.style.fontWeight=n}),new l("http://www.w3.org/ns/ttml#styling lineHeight",function(e,t,r,n){t.style.lineHeight="normal"===n?"normal":n.toUsedLength(e.w,e.h)+"px"}),new l("http://www.w3.org/ns/ttml#styling opacity",function(e,t,r,n){t.style.opacity=n}),new l("http://www.w3.org/ns/ttml#styling origin",function(e,t,r,n){t.style.top=n.h.toUsedLength(e.w,e.h)+"px",t.style.left=n.w.toUsedLength(e.w,e.h)+"px"}),new l("http://www.w3.org/ns/ttml#styling overflow",function(e,t,r,n){t.style.overflow=n}),new l("http://www.w3.org/ns/ttml#styling padding",function(e,t,r,n){var i=[];i[0]=n[0].toUsedLength(e.w,e.h)+"px",i[1]=n[3].toUsedLength(e.w,e.h)+"px",i[2]=n[2].toUsedLength(e.w,e.h)+"px",i[3]=n[1].toUsedLength(e.w,e.h)+"px",t.style.padding=i.join(" ")}),new l("http://www.w3.org/ns/ttml#styling position",function(e,t,r,n){t.style.top=n.h.toUsedLength(e.w,e.h)+"px",t.style.left=n.w.toUsedLength(e.w,e.h)+"px"}),new l("http://www.w3.org/ns/ttml#styling rubyAlign",function(e,t,r,n){t.style.rubyAlign="spaceAround"===n?"space-around":"center"}),new l("http://www.w3.org/ns/ttml#styling rubyPosition",function(e,t,r,n){var i;"before"!==n&&"after"!==n||(i=h?n:"tb"===e.bpd||"rl"===e.bpd?"before"===n?"over":"under":"before"===n?"under":"over",t.parentElement.style[p]=i)}),new l("http://www.w3.org/ns/ttml#styling showBackground",null),new l("http://www.w3.org/ns/ttml#styling textAlign",function(e,t,r,n){var i;i="start"===n?"rl"===e.ipd?"right":"left":"end"===n?"rl"===e.ipd?"left":"right":n,t.style.textAlign=i}),new l("http://www.w3.org/ns/ttml#styling textDecoration",function(e,t,r,n){t.style.textDecoration=n.join(" ").replace("lineThrough","line-through")}),new l("http://www.w3.org/ns/ttml#styling textOutline",function(e,t,r,n){}),new l("http://www.w3.org/ns/ttml#styling textShadow",function(e,t,n,i){var o=n.styleAttrs[r.byName.textOutline.qname];if("none"===i&&"none"===o)t.style.textShadow="";else{var u=[];if("none"!==o){var l="rgba("+o.color[0].toString()+","+o.color[1].toString()+","+o.color[2].toString()+","+(o.color[3]/255).toString()+")";u.push("1px 1px 1px "+l),u.push("-1px 1px 1px "+l),u.push("1px -1px 1px "+l),u.push("-1px -1px 1px "+l)}if("none"!==i)for(var c=0;c<i.length;c++)u.push(i[c].x_off.toUsedLength(e.w,e.h)+"px "+i[c].y_off.toUsedLength(e.w,e.h)+"px "+i[c].b_radius.toUsedLength(e.w,e.h)+"px rgba("+i[c].color[0].toString()+","+i[c].color[1].toString()+","+i[c].color[2].toString()+","+(i[c].color[3]/255).toString()+")");t.style.textShadow=u.join(",")}}),new l("http://www.w3.org/ns/ttml#styling textCombine",function(e,t,r,n){t.style.textCombineUpright=n}),new l("http://www.w3.org/ns/ttml#styling textEmphasis",function(e,t,r,n){}),new l("http://www.w3.org/ns/ttml#styling unicodeBidi",function(e,t,r,n){t.style.unicodeBidi="bidiOverride"===n?"bidi-override":n}),new l("http://www.w3.org/ns/ttml#styling visibility",function(e,t,r,n){t.style.visibility=n}),new l("http://www.w3.org/ns/ttml#styling wrapOption",function(e,t,r,n){"wrap"===n?"preserve"===r.space?t.style.whiteSpace="pre-wrap":t.style.whiteSpace="normal":"preserve"===r.space?t.style.whiteSpace="pre":t.style.whiteSpace="noWrap"}),new l("http://www.w3.org/ns/ttml#styling writingMode",function(e,t,r,n){"lrtb"===n||"lr"===n||"rltb"===n||"rl"===n?t.style.writingMode="horizontal-tb":"tblr"===n?t.style.writingMode="vertical-lr":"tbrl"!==n&&"tb"!==n||(t.style.writingMode="vertical-rl")}),new l("http://www.w3.org/ns/ttml#styling zIndex",function(e,t,r,n){t.style.zIndex=n}),new l("http://www.w3.org/ns/ttml/profile/imsc1#styling forcedDisplay",function(e,t,r,n){e.displayForcedOnlyMode&&!1===n&&(t.style.visibility="hidden")})],f={},d=0;d<c.length;d++)f[c[d].qname]=c[d];var h="webkitRubyPosition"in window.getComputedStyle(document.documentElement),p=h?"webkitRubyPosition":"rubyPosition",m="webkitTextEmphasisStyle"in window.getComputedStyle(document.documentElement)?"webkitTextEmphasisStyle":"textEmphasisStyle",g="webkitTextEmphasisPosition"in window.getComputedStyle(document.documentElement)?"webkitTextEmphasisPosition":"textEmphasisPosition"}(t,"undefined"==typeof imscNames?r("./node_modules/imsc/src/main/js/names.js"):imscNames,"undefined"==typeof imscStyles?r("./node_modules/imsc/src/main/js/styles.js"):imscStyles,"undefined"==typeof imscUtils?r("./node_modules/imsc/src/main/js/utils.js"):imscUtils)},"./node_modules/imsc/src/main/js/isd.js":function(e,t,r){!function(e,t,r,n){e.generateISD=function(e,t,c){var f,d=new o(e),h={},p={},m=e.head.styling.initials[r.byName.showBackground.qname],g=e.head.styling.initials[r.byName.backgroundColor.qname];for(var y in e.head.layout.regions)if(e.head.layout.regions.hasOwnProperty(y)){var v=e.head.layout.regions[y],b=v.styleAttrs[r.byName.showBackground.qname]||m,_=v.styleAttrs[r.byName.backgroundColor.qname]||g;p[v.id]=("always"===b||void 0===b)&&void 0!==_&&!(t<v.begin||t>=v.end)}for(var T in e.body&&e.body.regionID&&(p[e.body.regionID]=!0),f=null!==e.body?function e(t,r){if(r.contents){var n={};for(var i in r)r.hasOwnProperty(i)&&(n[i]=r[i]);return n.contents=[],r.contents.filter(function(e){return!(t<e.begin||t>=e.end)}).forEach(function(r){var i=e(t,r);i.regionID&&(p[i.regionID]=!0),null!==i&&n.contents.push(i)}),n}return r}(t,e.body):null,void 0!==p[""]&&(p[""]=!0),p)if(p[T]){var E=function e(t,o,c,f,d,h,p,m,g){if(o<p.begin||o>=p.end)return null;var y="regionID"in p&&""!==p.regionID?p.regionID:h;if(null!==d&&y!==c.id&&(!("contents"in p)||"contents"in p&&0===p.contents.length||""!==y))return null;var v=new u(p);if("sets"in p)for(var b=0;b<p.sets.length;b++)o<p.sets[b].begin||o>=p.sets[b].end||(v.styleAttrs[p.sets[b].qname]=p.sets[b].value);var _={};for(var T in v.styleAttrs)if(v.styleAttrs.hasOwnProperty(T)&&(_[T]=!0,"region"===v.kind&&T===r.byName.writingMode.qname&&!(r.byName.direction.qname in v.styleAttrs))){var E=v.styleAttrs[T];"lrtb"===E||"lr"===E?v.styleAttrs[r.byName.direction.qname]="ltr":"rltb"!==E&&"rl"!==E||(v.styleAttrs[r.byName.direction.qname]="rtl")}if(null!==d)for(var S=0;S<r.all.length;S++){var w=r.all[S];if(w.qname===r.byName.textDecoration.qname){var A=d.styleAttrs[w.qname],C=v.styleAttrs[w.qname],I=[];void 0===C?I=A:-1===C.indexOf("none")?((-1===C.indexOf("noUnderline")&&-1!==A.indexOf("underline")||-1!==C.indexOf("underline"))&&I.push("underline"),(-1===C.indexOf("noLineThrough")&&-1!==A.indexOf("lineThrough")||-1!==C.indexOf("lineThrough"))&&I.push("lineThrough"),(-1===C.indexOf("noOverline")&&-1!==A.indexOf("overline")||-1!==C.indexOf("overline"))&&I.push("overline")):I.push("none"),v.styleAttrs[w.qname]=I}else if(w.qname!==r.byName.fontSize.qname||w.qname in v.styleAttrs||"span"!==v.kind||"textContainer"!==v.styleAttrs[r.byName.ruby.qname]){if(w.qname!==r.byName.fontSize.qname||w.qname in v.styleAttrs||"span"!==v.kind||"text"!==v.styleAttrs[r.byName.ruby.qname])w.inherit&&w.qname in d.styleAttrs&&!(w.qname in v.styleAttrs)&&(v.styleAttrs[w.qname]=d.styleAttrs[w.qname]);else{var O=d.styleAttrs[r.byName.fontSize.qname];"textContainer"===d.styleAttrs[r.byName.ruby.qname]?v.styleAttrs[w.qname]=O:v.styleAttrs[w.qname]=new n.ComputedLength(.5*O.rw,.5*O.rh)}}else{var R=d.styleAttrs[r.byName.fontSize.qname];v.styleAttrs[w.qname]=new n.ComputedLength(.5*R.rw,.5*R.rh)}}for(var P=0;P<r.all.length;P++){var k=r.all[P];if(!(k.qname in v.styleAttrs)&&!(k.qname===r.byName.position.qname&&r.byName.origin.qname in v.styleAttrs||k.qname===r.byName.origin.qname&&r.byName.position.qname in v.styleAttrs)){var D=t.head.styling.initials[k.qname]||k.initial;if(null!==D&&("region"===v.kind||!1===k.inherit&&null!==D)){var N=k.parse(D);null!==N?(v.styleAttrs[k.qname]=N,_[k.qname]=!0):l(m,"Invalid initial value for '"+k.qname+"' on element '"+v.kind)}}}for(var L=0;L<r.all.length;L++){var x=r.all[L];if(x.qname in _&&null!==x.compute){var j=x.compute(t,d,v,v.styleAttrs[x.qname],g);null!==j?v.styleAttrs[x.qname]=j:(v.styleAttrs[x.qname]=x.compute(t,d,v,x.parse(x.initial),g),l(m,"Style '"+x.qname+"' on element '"+v.kind+"' cannot be computed"))}}if("none"===v.styleAttrs[r.byName.display.qname])return null;var M=null;null===d?M=null===f?[]:[f]:"contents"in p&&(M=p.contents);for(var F=0;null!==M&&F<M.length;F++){var B=e(t,o,c,f,v,y,M[F],m,g);null!==B&&v.contents.push(B.element)}for(var U in v.styleAttrs)if(v.styleAttrs.hasOwnProperty(U)){var q=!1;if("span"===v.kind){var H=v.styleAttrs[r.byName.ruby.qname];(q=("container"===H||"textContainer"===H||"baseContainer"===H)&&-1!==i.indexOf(U))||(q="container"!==H&&U===r.byName.rubyAlign.qname),q||(q=!("textContainer"===H||"text"===H)&&U===r.byName.rubyPosition.qname)}if(!q){var V=r.byQName[U];"applies"in V&&(q=-1===V.applies.indexOf(v.kind))}q&&delete v.styleAttrs[U]}var G=v.styleAttrs[r.byName.ruby.qname];if("p"===v.kind||"span"===v.kind&&("textContainer"===G||"text"===G)){var Y=[];(function e(t,n){if("contents"in t)for(var i=0;i<t.contents.length;i++){var o=t.contents[i],u=o.styleAttrs[r.byName.ruby.qname];("span"!==o.kind||"textContainer"!==u&&"text"!==u)&&("contents"in o?e(o,n):("span"===o.kind&&0!==o.text.length||"br"===o.kind)&&n.push(o))}})(v,Y),function(e){for(var t,r,n,i=0;i<e.length;)if("br"!==(n=e[i]).kind&&"preserve"!==n.space){var o=n.text.replace(/[\t\r\n ]+/g," ");/^[ ]/.test(o)&&(0===i||"br"===(t=e[i-1]).kind||/[\r\n\t ]$/.test(t.text))&&(o=o.substring(1)),n.text=o,0===o.length?e.splice(i,1):i++}else i++;for(i=0;i<e.length;i++)"br"!==(n=e[i]).kind&&"preserve"!==n.space?/[ ]$/.test(n.text)&&(i===e.length-1||"br"===(r=e[i+1]).kind||"preserve"===r.space&&/^[\r\n]/.test(r.text))&&(n.text=n.text.slice(0,-1)):i++}(Y),function e(t){if("br"===t.kind)return!1;if("text"in t)return 0===t.text.length;if("contents"in t){for(var r=t.contents.length;r--;)e(t.contents[r])&&t.contents.splice(r,1);return 0===t.contents.length}}(v)}return"div"===v.kind&&r.byName.backgroundImage.qname in v.styleAttrs||"br"===v.kind||"image"===v.kind||"contents"in v&&v.contents.length>0||"span"===v.kind&&null!==v.text||"region"===v.kind&&"always"===v.styleAttrs[r.byName.showBackground.qname]?{region_id:y,element:v}:null}(e,t,e.head.layout.regions[T],f,null,"",e.head.layout.regions[T],c,h);null!==E&&d.contents.push(E.element)}return d};var i=[r.byName.color.qname,r.byName.textCombine.qname,r.byName.textDecoration.qname,r.byName.textEmphasis.qname,r.byName.textOutline.qname,r.byName.textShadow.qname];function o(e){this.contents=[],this.aspectRatio=e.aspectRatio,this.lang=e.lang}function u(e){for(var t in this.kind=e.kind||"region",this.lang=e.lang,e.id&&(this.id=e.id),this.styleAttrs={},e.styleAttrs)e.styleAttrs.hasOwnProperty(t)&&(this.styleAttrs[t]=e.styleAttrs[t]);"src"in e&&(this.src=e.src),"type"in e&&(this.type=e.type),"text"in e?this.text=e.text:("region"===this.kind||"contents"in e)&&(this.contents=[]),"space"in e&&(this.space=e.space)}function l(e,t){if(e&&e.error&&e.error(t))throw t}}(t,"undefined"==typeof imscNames?r("./node_modules/imsc/src/main/js/names.js"):imscNames,"undefined"==typeof imscStyles?r("./node_modules/imsc/src/main/js/styles.js"):imscStyles,"undefined"==typeof imscUtils?r("./node_modules/imsc/src/main/js/utils.js"):imscUtils)},"./node_modules/imsc/src/main/js/main.js":function(e,t,r){t.generateISD=r("./node_modules/imsc/src/main/js/isd.js").generateISD,t.fromXML=r("./node_modules/imsc/src/main/js/doc.js").fromXML,t.renderHTML=r("./node_modules/imsc/src/main/js/html.js").render},"./node_modules/imsc/src/main/js/names.js":function(e,t,r){t.ns_tt="http://www.w3.org/ns/ttml",t.ns_tts="http://www.w3.org/ns/ttml#styling",t.ns_ttp="http://www.w3.org/ns/ttml#parameter",t.ns_xml="http://www.w3.org/XML/1998/namespace",t.ns_itts="http://www.w3.org/ns/ttml/profile/imsc1#styling",t.ns_ittp="http://www.w3.org/ns/ttml/profile/imsc1#parameter",t.ns_smpte="http://www.smpte-ra.org/schemas/2052-1/2010/smpte-tt",t.ns_ebutts="urn:ebu:tt:style"},"./node_modules/imsc/src/main/js/styles.js":function(e,t,r){!function(e,t,r){function n(e,t,r,n,i,o,u,l){this.name=t,this.ns=e,this.qname=e+" "+t,this.inherit=i,this.animatable=o,this.initial=r,this.applies=n,this.parse=u,this.compute=l}for(var i in e.all=[new n(t.ns_tts,"backgroundColor","transparent",["body","div","p","region","span"],!1,!0,r.parseColor,null),new n(t.ns_tts,"color","white",["span"],!0,!0,r.parseColor,null),new n(t.ns_tts,"direction","ltr",["p","span"],!0,!0,function(e){return e},null),new n(t.ns_tts,"display","auto",["body","div","p","region","span"],!1,!0,function(e){return e},null),new n(t.ns_tts,"displayAlign","before",["region"],!1,!0,function(e){return e},null),new n(t.ns_tts,"extent","auto",["tt","region"],!1,!0,function(e){if("auto"===e)return e;var t=e.split(" ");if(2!==t.length)return null;var n=r.parseLength(t[0]),i=r.parseLength(t[1]);return i&&n?{h:i,w:n}:null},function(e,t,n,i,o){var u,l;if("auto"===i)u=new r.ComputedLength(0,1);else if(null===(u=r.toComputedLength(i.h.value,i.h.unit,null,e.dimensions.h,null,e.pxLength.h)))return null;if("auto"===i)l=new r.ComputedLength(1,0);else if(null===(l=r.toComputedLength(i.w.value,i.w.unit,null,e.dimensions.w,null,e.pxLength.w)))return null;return{h:u,w:l}}),new n(t.ns_tts,"fontFamily","default",["span","p"],!0,!0,function(e){for(var t=e.split(","),r=[],n=0;n<t.length;n++)"'"!==t[n].charAt(0)&&'"'!==t[n].charAt(0)&&"default"===t[n]?r.push("monospaceSerif"):r.push(t[n]);return r},null),new n(t.ns_tts,"shear","0%",["p"],!0,!0,r.parseLength,function(e,t,r,n){return"%"!==n.unit?null:Math.abs(n.value)>100?100*Math.sign(n.value):n.value}),new n(t.ns_tts,"fontSize","1c",["span","p"],!0,!0,r.parseLength,function(t,n,i,o,u){return r.toComputedLength(o.value,o.unit,null!==n?n.styleAttrs[e.byName.fontSize.qname]:t.cellLength.h,null!==n?n.styleAttrs[e.byName.fontSize.qname]:t.cellLength.h,t.cellLength.h,t.pxLength.h)}),new n(t.ns_tts,"fontStyle","normal",["span","p"],!0,!0,function(e){return e},null),new n(t.ns_tts,"fontWeight","normal",["span","p"],!0,!0,function(e){return e},null),new n(t.ns_tts,"lineHeight","normal",["p"],!0,!0,function(e){return"normal"===e?e:r.parseLength(e)},function(t,n,i,o,u){var l;if("normal"===o)l=o;else if(null===(l=r.toComputedLength(o.value,o.unit,i.styleAttrs[e.byName.fontSize.qname],i.styleAttrs[e.byName.fontSize.qname],t.cellLength.h,t.pxLength.h)))return null;return l}),new n(t.ns_tts,"opacity",1,["region"],!1,!0,parseFloat,null),new n(t.ns_tts,"origin","auto",["region"],!1,!0,function(e){if("auto"===e)return e;var t=e.split(" ");if(2!==t.length)return null;var n=r.parseLength(t[0]),i=r.parseLength(t[1]);return i&&n?{h:i,w:n}:null},function(e,t,n,i,o){var u,l;if("auto"===i)u=new r.ComputedLength(0,0);else if(null===(u=r.toComputedLength(i.h.value,i.h.unit,null,e.dimensions.h,null,e.pxLength.h)))return null;if("auto"===i)l=new r.ComputedLength(0,0);else if(null===(l=r.toComputedLength(i.w.value,i.w.unit,null,e.dimensions.w,null,e.pxLength.w)))return null;return{h:u,w:l}}),new n(t.ns_tts,"overflow","hidden",["region"],!1,!0,function(e){return e},null),new n(t.ns_tts,"padding","0px",["region"],!1,!0,function(e){var t=e.split(" ");if(t.length>4)return null;for(var n=[],i=0;i<t.length;i++){var o=r.parseLength(t[i]);if(!o)return null;n.push(o)}return n},function(t,n,i,o,u){if(1===o.length)l=[o[0],o[0],o[0],o[0]];else if(2===o.length)l=[o[0],o[1],o[0],o[1]];else if(3===o.length)l=[o[0],o[1],o[2],o[1]];else{if(4!==o.length)return null;l=[o[0],o[1],o[2],o[3]]}var l,c=i.styleAttrs[e.byName.writingMode.qname];if("lrtb"===c||"lr"===c)l=[l[0],l[3],l[2],l[1]];else if("rltb"===c||"rl"===c)l=[l[0],l[1],l[2],l[3]];else if("tblr"===c)l=[l[3],l[0],l[1],l[2]];else{if("tbrl"!==c&&"tb"!==c)return null;l=[l[3],l[2],l[1],l[0]]}for(var f=[],d=0;d<l.length;d++)if(0===l[d].value)f[d]=new r.ComputedLength(0,0);else if(f[d]=r.toComputedLength(l[d].value,l[d].unit,i.styleAttrs[e.byName.fontSize.qname],0===d||2===d?i.styleAttrs[e.byName.extent.qname].h:i.styleAttrs[e.byName.extent.qname].w,0===d||2===d?t.cellLength.h:t.cellLength.w,0===d||2===d?t.pxLength.h:t.pxLength.w),null===f[d])return null;return f}),new n(t.ns_tts,"position","top left",["region"],!1,!0,function(e){return r.parsePosition(e)},function(t,n,i,o){var u,l;return null===(u=r.toComputedLength(o.v.offset.value,o.v.offset.unit,null,new r.ComputedLength(-i.styleAttrs[e.byName.extent.qname].h.rw,t.dimensions.h.rh-i.styleAttrs[e.byName.extent.qname].h.rh),null,t.pxLength.h))?null:("bottom"===o.v.edge&&(u=new r.ComputedLength(-u.rw-i.styleAttrs[e.byName.extent.qname].h.rw,t.dimensions.h.rh-u.rh-i.styleAttrs[e.byName.extent.qname].h.rh)),l=r.toComputedLength(o.h.offset.value,o.h.offset.unit,null,new r.ComputedLength(t.dimensions.w.rw-i.styleAttrs[e.byName.extent.qname].w.rw,-i.styleAttrs[e.byName.extent.qname].w.rh),null,t.pxLength.w),null===u?null:("right"===o.h.edge&&(l=new r.ComputedLength(t.dimensions.w.rw-l.rw-i.styleAttrs[e.byName.extent.qname].w.rw,-l.rh-i.styleAttrs[e.byName.extent.qname].w.rh)),{h:u,w:l}))}),new n(t.ns_tts,"ruby","none",["span"],!1,!0,function(e){return e},null),new n(t.ns_tts,"rubyAlign","center",["span"],!0,!0,function(e){return"center"!==e&&"spaceAround"!==e?null:e},null),new n(t.ns_tts,"rubyPosition","outside",["span"],!0,!0,function(e){return e},null),new n(t.ns_tts,"rubyReserve","none",["p"],!0,!0,function(e){var t=e.split(" "),n=[null,null];if(0===t.length||t.length>2||"none"!==t[0]&&"both"!==t[0]&&"after"!==t[0]&&"before"!==t[0]&&"outside"!==t[0])return null;if(n[0]=t[0],2===t.length&&"none"!==t[0]){var i=r.parseLength(t[1]);if(!i)return null;n[1]=i}return n},function(t,n,i,o,u){var l;return"none"===o[0]?o:null===(l=null===o[1]?new r.ComputedLength(.5*i.styleAttrs[e.byName.fontSize.qname].rw,.5*i.styleAttrs[e.byName.fontSize.qname].rh):r.toComputedLength(o[1].value,o[1].unit,i.styleAttrs[e.byName.fontSize.qname],i.styleAttrs[e.byName.fontSize.qname],t.cellLength.h,t.pxLength.h))?null:[o[0],l]}),new n(t.ns_tts,"showBackground","always",["region"],!1,!0,function(e){return e},null),new n(t.ns_tts,"textAlign","start",["p"],!0,!0,function(e){return e},function(e,t,r,n,i){return"left"===n?"start":"right"===n?"end":n}),new n(t.ns_tts,"textCombine","none",["span"],!0,!0,function(e){return"none"===e||"all"===e?e:null},null),new n(t.ns_tts,"textDecoration","none",["span"],!0,!0,function(e){return e.split(" ")},null),new n(t.ns_tts,"textEmphasis","none",["span"],!0,!0,function(e){for(var t=e.split(" "),n={style:null,symbol:null,color:null,position:null},i=0;i<t.length;i++)if("none"===t[i]||"auto"===t[i])n.style=t[i];else if("filled"===t[i]||"open"===t[i])n.style=t[i];else if("circle"===t[i]||"dot"===t[i]||"sesame"===t[i])n.symbol=t[i];else if("current"===t[i])n.color=t[i];else if("outside"===t[i]||"before"===t[i]||"after"===t[i])n.position=t[i];else if(n.color=r.parseColor(t[i]),null===n.color)return null;return null==n.style&&null==n.symbol?n.style="auto":(n.symbol=n.symbol||"circle",n.style=n.style||"filled"),n.position=n.position||"outside",n.color=n.color||"current",n},null),new n(t.ns_tts,"textOutline","none",["span"],!0,!0,function(e){if("none"===e)return e;var t={},n=e.split(" ");if(0===n.length||n.length>2)return null;var i=r.parseColor(n[0]);if(t.color=i,null!==i&&n.shift(),1!==n.length)return null;var o=r.parseLength(n[0]);return o?(t.thickness=o,t):null},function(t,n,i,o,u){if("none"===o)return o;var l={};return null===o.color?l.color=i.styleAttrs[e.byName.color.qname]:l.color=o.color,l.thickness=r.toComputedLength(o.thickness.value,o.thickness.unit,i.styleAttrs[e.byName.fontSize.qname],i.styleAttrs[e.byName.fontSize.qname],t.cellLength.h,t.pxLength.h),null===l.thickness?null:l}),new n(t.ns_tts,"textShadow","none",["span"],!0,!0,r.parseTextShadow,function(t,n,i,o){if("none"===o)return o;for(var u=[],l=0;l<o.length;l++){var c={};if(c.x_off=r.toComputedLength(o[l][0].value,o[l][0].unit,null,i.styleAttrs[e.byName.fontSize.qname],null,t.pxLength.w),null===c.x_off||(c.y_off=r.toComputedLength(o[l][1].value,o[l][1].unit,null,i.styleAttrs[e.byName.fontSize.qname],null,t.pxLength.h),null===c.y_off))return null;if(null===o[l][2])c.b_radius=0;else if(c.b_radius=r.toComputedLength(o[l][2].value,o[l][2].unit,null,i.styleAttrs[e.byName.fontSize.qname],null,t.pxLength.h),null===c.b_radius)return null;null===o[l][3]?c.color=i.styleAttrs[e.byName.color.qname]:c.color=o[l][3],u.push(c)}return u}),new n(t.ns_tts,"unicodeBidi","normal",["span","p"],!1,!0,function(e){return e},null),new n(t.ns_tts,"visibility","visible",["body","div","p","region","span"],!0,!0,function(e){return e},null),new n(t.ns_tts,"wrapOption","wrap",["span"],!0,!0,function(e){return e},null),new n(t.ns_tts,"writingMode","lrtb",["region"],!1,!0,function(e){return e},null),new n(t.ns_tts,"zIndex","auto",["region"],!1,!0,function(e){var t;return"auto"===e?t=e:isNaN(t=parseInt(e))&&(t=null),t},null),new n(t.ns_ebutts,"linePadding","0c",["p"],!0,!1,r.parseLength,function(e,t,n,i,o){return r.toComputedLength(i.value,i.unit,null,null,e.cellLength.w,null)}),new n(t.ns_ebutts,"multiRowAlign","auto",["p"],!0,!1,function(e){return e},null),new n(t.ns_smpte,"backgroundImage",null,["div"],!1,!1,function(e){return e},null),new n(t.ns_itts,"forcedDisplay","false",["body","div","p","region","span"],!0,!0,function(e){return"true"===e},null),new n(t.ns_itts,"fillLineGap","false",["p"],!0,!0,function(e){return"true"===e},null)],e.byQName={},e.all)e.byQName[e.all[i].qname]=e.all[i];for(var o in e.byName={},e.all)e.byName[e.all[o].name]=e.all[o]}(t,"undefined"==typeof imscNames?r("./node_modules/imsc/src/main/js/names.js"):imscNames,"undefined"==typeof imscUtils?r("./node_modules/imsc/src/main/js/utils.js"):imscUtils)},"./node_modules/imsc/src/main/js/utils.js":function(e,t,r){var n,i,o,u,l;n=/#([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})?/,i=/rgb\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*\)/,o=/rgba\(\s*(\d+),\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*\)/,u={transparent:[0,0,0,0],black:[0,0,0,255],silver:[192,192,192,255],gray:[128,128,128,255],white:[255,255,255,255],maroon:[128,0,0,255],red:[255,0,0,255],purple:[128,0,128,255],fuchsia:[255,0,255,255],magenta:[255,0,255,255],green:[0,128,0,255],lime:[0,255,0,255],olive:[128,128,0,255],yellow:[255,255,0,255],navy:[0,0,128,255],blue:[0,0,255,255],teal:[0,128,128,255],aqua:[0,255,255,255],cyan:[0,255,255,255]},t.parseColor=function(e){var t,r=null,l=u[e.toLowerCase()];return void 0!==l?r=l:null!==(t=n.exec(e))?r=[parseInt(t[1],16),parseInt(t[2],16),parseInt(t[3],16),void 0!==t[4]?parseInt(t[4],16):255]:null!==(t=i.exec(e))?r=[parseInt(t[1]),parseInt(t[2]),parseInt(t[3]),255]:null!==(t=o.exec(e))&&(r=[parseInt(t[1]),parseInt(t[2]),parseInt(t[3]),parseInt(t[4])]),r},l=/^((?:\+|\-)?\d*(?:\.\d+)?)(px|em|c|%|rh|rw)$/,t.parseLength=function(e){var t,r=null;return null!==(t=l.exec(e))&&(r={value:parseFloat(t[1]),unit:t[2]}),r},t.parseTextShadow=function(e){for(var r=e.match(/([^\(,\)]|\([^\)]+\))+/g),n=[],i=0;i<r.length;i++){var o=r[i].split(" ");if(1===o.length&&"none"===o[0])return"none";if(o.length>1&&o.length<5){var u=[null,null,null,null],l=t.parseLength(o.shift());if(null===l||(u[0]=l,null===(l=t.parseLength(o.shift()))))return null;if(u[1]=l,0===o.length||(null!==(l=t.parseLength(o[0]))&&(u[2]=l,o.shift()),0===o.length)){n.push(u);continue}var c=t.parseColor(o[0]);if(null===c)return null;u[3]=c,n.push(u)}}return n},t.parsePosition=function(e){var r=e.split(" "),n=function(e){return"center"===e||"left"===e||"top"===e||"bottom"===e||"right"===e};if(r.length>4)return null;for(var i=0;i<r.length;i++)if(!n(r[i])){var o=t.parseLength(r[i]);if(null===o)return null;r[i]=o}for(var u={h:{edge:"left",offset:{value:50,unit:"%"}},v:{edge:"top",offset:{value:50,unit:"%"}}},l=0;l<r.length;){var c=r[l++];if(n(c)){var f={value:0,unit:"%"};2!==r.length&&l<r.length&&!n(r[l])&&(f=r[l++]),"right"===c?(u.h.edge=c,u.h.offset=f):"bottom"===c?(u.v.edge=c,u.v.offset=f):"left"===c?u.h.offset=f:"top"===c&&(u.v.offset=f)}else{if(1!==r.length&&2!==r.length)return null;1===l?u.h.offset=c:u.v.offset=c}}return u},t.ComputedLength=function(e,t){this.rw=e,this.rh=t},t.ComputedLength.prototype.toUsedLength=function(e,t){return e*this.rw+t*this.rh},t.ComputedLength.prototype.isZero=function(){return 0===this.rw&&0===this.rh},t.toComputedLength=function(e,r,n,i,o,u){return"%"===r&&i?new t.ComputedLength(i.rw*e/100,i.rh*e/100):"em"===r&&n?new t.ComputedLength(n.rw*e,n.rh*e):"c"===r&&o?new t.ComputedLength(e*o.rw,e*o.rh):"px"===r&&u?new t.ComputedLength(e*u.rw,e*u.rh):"rh"===r?new t.ComputedLength(0,e/100):"rw"===r?new t.ComputedLength(e/100,0):null}},"./node_modules/inherits/inherits_browser.js":function(e,t){"function"==typeof Object.create?e.exports=function(e,t){t&&(e.super_=t,e.prototype=Object.create(t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}))}:e.exports=function(e,t){if(t){e.super_=t;var r=function(){};r.prototype=t.prototype,e.prototype=new r,e.prototype.constructor=e}}},"./node_modules/is-alphabetical/index.js":function(e,t,r){e.exports=function(e){var t="string"==typeof e?e.charCodeAt(0):e;return t>=97&&t<=122||t>=65&&t<=90}},"./node_modules/is-alphanumerical/index.js":function(e,t,r){var n=r("./node_modules/is-alphabetical/index.js"),i=r("./node_modules/is-decimal/index.js");e.exports=function(e){return n(e)||i(e)}},"./node_modules/is-decimal/index.js":function(e,t,r){e.exports=function(e){var t="string"==typeof e?e.charCodeAt(0):e;return t>=48&&t<=57}},"./node_modules/isarray/index.js":function(e,t){var r={}.toString;e.exports=Array.isArray||function(e){return"[object Array]"==r.call(e)}},"./node_modules/path-browserify/index.js":function(e,t,r){(function(e){function r(e,t){for(var r=0,n=e.length-1;n>=0;n--){var i=e[n];"."===i?e.splice(n,1):".."===i?(e.splice(n,1),r++):r&&(e.splice(n,1),r--)}if(t)for(;r--;r)e.unshift("..");return e}function n(e,t){if(e.filter)return e.filter(t);for(var r=[],n=0;n<e.length;n++)t(e[n],n,e)&&r.push(e[n]);return r}t.resolve=function(){for(var t="",i=!1,o=arguments.length-1;o>=-1&&!i;o--){var u=o>=0?arguments[o]:e.cwd();if("string"!=typeof u)throw TypeError("Arguments to path.resolve must be strings");u&&(t=u+"/"+t,i="/"===u.charAt(0))}return(i?"/":"")+(t=r(n(t.split("/"),function(e){return!!e}),!i).join("/"))||"."},t.normalize=function(e){var o=t.isAbsolute(e),u="/"===i(e,-1);return(e=r(n(e.split("/"),function(e){return!!e}),!o).join("/"))||o||(e="."),e&&u&&(e+="/"),(o?"/":"")+e},t.isAbsolute=function(e){return"/"===e.charAt(0)},t.join=function(){var e=Array.prototype.slice.call(arguments,0);return t.normalize(n(e,function(e,t){if("string"!=typeof e)throw TypeError("Arguments to path.join must be strings");return e}).join("/"))},t.relative=function(e,r){function n(e){for(var t=0;t<e.length&&""===e[t];t++);for(var r=e.length-1;r>=0&&""===e[r];r--);return t>r?[]:e.slice(t,r-t+1)}e=t.resolve(e).substr(1),r=t.resolve(r).substr(1);for(var i=n(e.split("/")),o=n(r.split("/")),u=Math.min(i.length,o.length),l=u,c=0;c<u;c++)if(i[c]!==o[c]){l=c;break}var f=[];for(c=l;c<i.length;c++)f.push("..");return(f=f.concat(o.slice(l))).join("/")},t.sep="/",t.delimiter=":",t.dirname=function(e){if("string"!=typeof e&&(e+=""),0===e.length)return".";for(var t=e.charCodeAt(0),r=47===t,n=-1,i=!0,o=e.length-1;o>=1;--o)if(47===(t=e.charCodeAt(o))){if(!i){n=o;break}}else i=!1;return -1===n?r?"/":".":r&&1===n?"/":e.slice(0,n)},t.basename=function(e,t){var r=function(e){"string"!=typeof e&&(e+="");var t,r=0,n=-1,i=!0;for(t=e.length-1;t>=0;--t)if(47===e.charCodeAt(t)){if(!i){r=t+1;break}}else -1===n&&(i=!1,n=t+1);return -1===n?"":e.slice(r,n)}(e);return t&&r.substr(-1*t.length)===t&&(r=r.substr(0,r.length-t.length)),r},t.extname=function(e){"string"!=typeof e&&(e+="");for(var t=-1,r=0,n=-1,i=!0,o=0,u=e.length-1;u>=0;--u){var l=e.charCodeAt(u);if(47!==l)-1===n&&(i=!1,n=u+1),46===l?-1===t?t=u:1!==o&&(o=1):-1!==t&&(o=-1);else if(!i){r=u+1;break}}return -1===t||-1===n||0===o||1===o&&t===n-1&&t===r+1?"":e.slice(t,n)};var i=function(e,t,r){return e.substr(t,r)}}).call(this,r("./node_modules/process/browser.js"))},"./node_modules/process-nextick-args/index.js":function(e,t,r){(function(t){void 0!==t&&t.version&&0!==t.version.indexOf("v0.")&&(0!==t.version.indexOf("v1.")||0===t.version.indexOf("v1.8."))?e.exports=t:e.exports={nextTick:function(e,r,n,i){if("function"!=typeof e)throw TypeError('"callback" argument must be a function');var o,u,l=arguments.length;switch(l){case 0:case 1:return t.nextTick(e);case 2:return t.nextTick(function(){e.call(null,r)});case 3:return t.nextTick(function(){e.call(null,r,n)});case 4:return t.nextTick(function(){e.call(null,r,n,i)});default:for(o=Array(l-1),u=0;u<o.length;)o[u++]=arguments[u];return t.nextTick(function(){e.apply(null,o)})}}}}).call(this,r("./node_modules/process/browser.js"))},"./node_modules/process/browser.js":function(e,t){var r,n,i=e.exports={};function o(){throw Error("setTimeout has not been defined")}function u(){throw Error("clearTimeout has not been defined")}function l(e){if(r===setTimeout)return setTimeout(e,0);if((r===o||!r)&&setTimeout)return r=setTimeout,setTimeout(e,0);try{return r(e,0)}catch(t){try{return r.call(null,e,0)}catch(t){return r.call(this,e,0)}}}!function(){try{r="function"==typeof setTimeout?setTimeout:o}catch(e){r=o}try{n="function"==typeof clearTimeout?clearTimeout:u}catch(e){n=u}}();var c,f=[],d=!1,h=-1;function p(){d&&c&&(d=!1,c.length?f=c.concat(f):h=-1,f.length&&m())}function m(){if(!d){var e=l(p);d=!0;for(var t=f.length;t;){for(c=f,f=[];++h<t;)c&&c[h].run();h=-1,t=f.length}c=null,d=!1,function(e){if(n===clearTimeout)return clearTimeout(e);if((n===u||!n)&&clearTimeout)return n=clearTimeout,clearTimeout(e);try{n(e)}catch(t){try{return n.call(null,e)}catch(t){return n.call(this,e)}}}(e)}}function g(e,t){this.fun=e,this.array=t}function y(){}i.nextTick=function(e){var t=Array(arguments.length-1);if(arguments.length>1)for(var r=1;r<arguments.length;r++)t[r-1]=arguments[r];f.push(new g(e,t)),1!==f.length||d||l(m)},g.prototype.run=function(){this.fun.apply(null,this.array)},i.title="browser",i.browser=!0,i.env={},i.argv=[],i.version="",i.versions={},i.on=y,i.addListener=y,i.once=y,i.off=y,i.removeListener=y,i.removeAllListeners=y,i.emit=y,i.prependListener=y,i.prependOnceListener=y,i.listeners=function(e){return[]},i.binding=function(e){throw Error("process.binding is not supported")},i.cwd=function(){return"/"},i.chdir=function(e){throw Error("process.chdir is not supported")},i.umask=function(){return 0}},"./node_modules/readable-stream/duplex-browser.js":function(e,t,r){e.exports=r("./node_modules/readable-stream/lib/_stream_duplex.js")},"./node_modules/readable-stream/lib/_stream_duplex.js":function(e,t,r){var n=r("./node_modules/process-nextick-args/index.js"),i=Object.keys||function(e){var t=[];for(var r in e)t.push(r);return t};e.exports=h;var o=Object.create(r("./node_modules/core-util-is/lib/util.js"));o.inherits=r("./node_modules/inherits/inherits_browser.js");var u=r("./node_modules/readable-stream/lib/_stream_readable.js"),l=r("./node_modules/readable-stream/lib/_stream_writable.js");o.inherits(h,u);for(var c=i(l.prototype),f=0;f<c.length;f++){var d=c[f];h.prototype[d]||(h.prototype[d]=l.prototype[d])}function h(e){if(!(this instanceof h))return new h(e);u.call(this,e),l.call(this,e),e&&!1===e.readable&&(this.readable=!1),e&&!1===e.writable&&(this.writable=!1),this.allowHalfOpen=!0,e&&!1===e.allowHalfOpen&&(this.allowHalfOpen=!1),this.once("end",p)}function p(){this.allowHalfOpen||this._writableState.ended||n.nextTick(m,this)}function m(e){e.end()}Object.defineProperty(h.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}}),Object.defineProperty(h.prototype,"destroyed",{get:function(){return void 0!==this._readableState&&void 0!==this._writableState&&this._readableState.destroyed&&this._writableState.destroyed},set:function(e){void 0!==this._readableState&&void 0!==this._writableState&&(this._readableState.destroyed=e,this._writableState.destroyed=e)}}),h.prototype._destroy=function(e,t){this.push(null),this.end(),n.nextTick(t,e)}},"./node_modules/readable-stream/lib/_stream_passthrough.js":function(e,t,r){e.exports=o;var n=r("./node_modules/readable-stream/lib/_stream_transform.js"),i=Object.create(r("./node_modules/core-util-is/lib/util.js"));function o(e){if(!(this instanceof o))return new o(e);n.call(this,e)}i.inherits=r("./node_modules/inherits/inherits_browser.js"),i.inherits(o,n),o.prototype._transform=function(e,t,r){r(null,e)}},"./node_modules/readable-stream/lib/_stream_readable.js":function(e,t,r){(function(t,n){var i=r("./node_modules/process-nextick-args/index.js");e.exports=T;var o,u=r("./node_modules/isarray/index.js");T.ReadableState=_,r("./node_modules/events/events.js").EventEmitter;var l=function(e,t){return e.listeners(t).length},c=r("./node_modules/readable-stream/lib/internal/streams/stream-browser.js"),f=r("./node_modules/readable-stream/node_modules/safe-buffer/index.js").Buffer,d=t.Uint8Array||function(){},h=Object.create(r("./node_modules/core-util-is/lib/util.js"));h.inherits=r("./node_modules/inherits/inherits_browser.js");var p=r(0),m=void 0;m=p&&p.debuglog?p.debuglog("stream"):function(){};var g,y=r("./node_modules/readable-stream/lib/internal/streams/BufferList.js"),v=r("./node_modules/readable-stream/lib/internal/streams/destroy.js");h.inherits(T,c);var b=["error","close","destroy","pause","resume"];function _(e,t){e=e||{};var n=t instanceof(o=o||r("./node_modules/readable-stream/lib/_stream_duplex.js"));this.objectMode=!!e.objectMode,n&&(this.objectMode=this.objectMode||!!e.readableObjectMode);var i=e.highWaterMark,u=e.readableHighWaterMark,l=this.objectMode?16:16384;this.highWaterMark=i||0===i?i:n&&(u||0===u)?u:l,this.highWaterMark=Math.floor(this.highWaterMark),this.buffer=new y,this.length=0,this.pipes=null,this.pipesCount=0,this.flowing=null,this.ended=!1,this.endEmitted=!1,this.reading=!1,this.sync=!0,this.needReadable=!1,this.emittedReadable=!1,this.readableListening=!1,this.resumeScheduled=!1,this.destroyed=!1,this.defaultEncoding=e.defaultEncoding||"utf8",this.awaitDrain=0,this.readingMore=!1,this.decoder=null,this.encoding=null,e.encoding&&(g||(g=r("./node_modules/string_decoder/lib/string_decoder.js").StringDecoder),this.decoder=new g(e.encoding),this.encoding=e.encoding)}function T(e){if(o=o||r("./node_modules/readable-stream/lib/_stream_duplex.js"),!(this instanceof T))return new T(e);this._readableState=new _(e,this),this.readable=!0,e&&("function"==typeof e.read&&(this._read=e.read),"function"==typeof e.destroy&&(this._destroy=e.destroy)),c.call(this)}function E(e,t,r,n,i){var o,u,l,c,h=e._readableState;return null===t?(h.reading=!1,function(e,t){if(!t.ended){if(t.decoder){var r=t.decoder.end();r&&r.length&&(t.buffer.push(r),t.length+=t.objectMode?1:r.length)}t.ended=!0,A(e)}}(e,h)):(i||(o=t,f.isBuffer(o)||o instanceof d||"string"==typeof o||void 0===o||h.objectMode||(u=TypeError("Invalid non-string/buffer chunk")),c=u),c?e.emit("error",c):h.objectMode||t&&t.length>0?("string"==typeof t||h.objectMode||Object.getPrototypeOf(t)===f.prototype||(l=t,t=f.from(l)),n?h.endEmitted?e.emit("error",Error("stream.unshift() after end event")):S(e,h,t,!0):h.ended?e.emit("error",Error("stream.push() after EOF")):(h.reading=!1,h.decoder&&!r?(t=h.decoder.write(t),h.objectMode||0!==t.length?S(e,h,t,!1):I(e,h)):S(e,h,t,!1))):n||(h.reading=!1)),!h.ended&&(h.needReadable||h.length<h.highWaterMark||0===h.length)}function S(e,t,r,n){t.flowing&&0===t.length&&!t.sync?(e.emit("data",r),e.read(0)):(t.length+=t.objectMode?1:r.length,n?t.buffer.unshift(r):t.buffer.push(r),t.needReadable&&A(e)),I(e,t)}function w(e,t){var r;return e<=0||0===t.length&&t.ended?0:t.objectMode?1:e!=e?t.flowing&&t.length?t.buffer.head.data.length:t.length:(e>t.highWaterMark&&(t.highWaterMark=((r=e)>=8388608?r=8388608:(r--,r|=r>>>1,r|=r>>>2,r|=r>>>4,r|=r>>>8,r|=r>>>16,r++),r)),e<=t.length?e:t.ended?t.length:(t.needReadable=!0,0))}function A(e){var t=e._readableState;t.needReadable=!1,t.emittedReadable||(m("emitReadable",t.flowing),t.emittedReadable=!0,t.sync?i.nextTick(C,e):C(e))}function C(e){m("emit readable"),e.emit("readable"),k(e)}function I(e,t){t.readingMore||(t.readingMore=!0,i.nextTick(O,e,t))}function O(e,t){for(var r=t.length;!t.reading&&!t.flowing&&!t.ended&&t.length<t.highWaterMark&&(m("maybeReadMore read 0"),e.read(0),r!==t.length);)r=t.length;t.readingMore=!1}function R(e){m("readable nexttick read 0"),e.read(0)}function P(e,t){t.reading||(m("resume read 0"),e.read(0)),t.resumeScheduled=!1,t.awaitDrain=0,e.emit("resume"),k(e),t.flowing&&!t.reading&&e.read(0)}function k(e){var t=e._readableState;for(m("flow",t.flowing);t.flowing&&null!==e.read(););}function D(e,t){var r,n,i,o;return 0===t.length?null:(t.objectMode?r=t.buffer.shift():!e||e>=t.length?(r=t.decoder?t.buffer.join(""):1===t.buffer.length?t.buffer.head.data:t.buffer.concat(t.length),t.buffer.clear()):(n=t.buffer,i=t.decoder,e<n.head.data.length?(o=n.head.data.slice(0,e),n.head.data=n.head.data.slice(e)):o=e===n.head.data.length?n.shift():i?function(e,t){var r=t.head,n=1,i=r.data;for(e-=i.length;r=r.next;){var o=r.data,u=e>o.length?o.length:e;if(u===o.length?i+=o:i+=o.slice(0,e),0==(e-=u)){u===o.length?(++n,r.next?t.head=r.next:t.head=t.tail=null):(t.head=r,r.data=o.slice(u));break}++n}return t.length-=n,i}(e,n):function(e,t){var r=f.allocUnsafe(e),n=t.head,i=1;for(n.data.copy(r),e-=n.data.length;n=n.next;){var o=n.data,u=e>o.length?o.length:e;if(o.copy(r,r.length-e,0,u),0==(e-=u)){u===o.length?(++i,n.next?t.head=n.next:t.head=t.tail=null):(t.head=n,n.data=o.slice(u));break}++i}return t.length-=i,r}(e,n),r=o),r)}function N(e){var t=e._readableState;if(t.length>0)throw Error('"endReadable()" called on non-empty stream');t.endEmitted||(t.ended=!0,i.nextTick(L,t,e))}function L(e,t){e.endEmitted||0!==e.length||(e.endEmitted=!0,t.readable=!1,t.emit("end"))}function x(e,t){for(var r=0,n=e.length;r<n;r++)if(e[r]===t)return r;return -1}Object.defineProperty(T.prototype,"destroyed",{get:function(){return void 0!==this._readableState&&this._readableState.destroyed},set:function(e){this._readableState&&(this._readableState.destroyed=e)}}),T.prototype.destroy=v.destroy,T.prototype._undestroy=v.undestroy,T.prototype._destroy=function(e,t){this.push(null),t(e)},T.prototype.push=function(e,t){var r,n=this._readableState;return n.objectMode?r=!0:"string"==typeof e&&((t=t||n.defaultEncoding)!==n.encoding&&(e=f.from(e,t),t=""),r=!0),E(this,e,t,!1,r)},T.prototype.unshift=function(e){return E(this,e,null,!0,!1)},T.prototype.isPaused=function(){return!1===this._readableState.flowing},T.prototype.setEncoding=function(e){return g||(g=r("./node_modules/string_decoder/lib/string_decoder.js").StringDecoder),this._readableState.decoder=new g(e),this._readableState.encoding=e,this},T.prototype.read=function(e){m("read",e),e=parseInt(e,10);var t=this._readableState,r=e;if(0!==e&&(t.emittedReadable=!1),0===e&&t.needReadable&&(t.length>=t.highWaterMark||t.ended))return m("read: emitReadable",t.length,t.ended),0===t.length&&t.ended?N(this):A(this),null;if(0===(e=w(e,t))&&t.ended)return 0===t.length&&N(this),null;var n,i=t.needReadable;return m("need readable",i),(0===t.length||t.length-e<t.highWaterMark)&&m("length less than watermark",i=!0),t.ended||t.reading?m("reading or ended",i=!1):i&&(m("do read"),t.reading=!0,t.sync=!0,0===t.length&&(t.needReadable=!0),this._read(t.highWaterMark),t.sync=!1,t.reading||(e=w(r,t))),null===(n=e>0?D(e,t):null)?(t.needReadable=!0,e=0):t.length-=e,0===t.length&&(t.ended||(t.needReadable=!0),r!==e&&t.ended&&N(this)),null!==n&&this.emit("data",n),n},T.prototype._read=function(e){this.emit("error",Error("_read() is not implemented"))},T.prototype.pipe=function(e,t){var r=this,o=this._readableState;switch(o.pipesCount){case 0:o.pipes=e;break;case 1:o.pipes=[o.pipes,e];break;default:o.pipes.push(e)}o.pipesCount+=1,m("pipe count=%d opts=%j",o.pipesCount,t);var c=t&&!1===t.end||e===n.stdout||e===n.stderr?_:f;function f(){m("onend"),e.end()}o.endEmitted?i.nextTick(c):r.once("end",c),e.on("unpipe",function t(n,i){m("onunpipe"),n===r&&i&&!1===i.hasUnpiped&&(i.hasUnpiped=!0,m("cleanup"),e.removeListener("close",v),e.removeListener("finish",b),e.removeListener("drain",d),e.removeListener("error",y),e.removeListener("unpipe",t),r.removeListener("end",f),r.removeListener("end",_),r.removeListener("data",g),h=!0,o.awaitDrain&&(!e._writableState||e._writableState.needDrain)&&d())});var d=function(){var e=r._readableState;m("pipeOnDrain",e.awaitDrain),e.awaitDrain&&e.awaitDrain--,0===e.awaitDrain&&l(r,"data")&&(e.flowing=!0,k(r))};e.on("drain",d);var h=!1,p=!1;function g(t){m("ondata"),p=!1,!1!==e.write(t)||p||((1===o.pipesCount&&o.pipes===e||o.pipesCount>1&&-1!==x(o.pipes,e))&&!h&&(m("false write response, pause",r._readableState.awaitDrain),r._readableState.awaitDrain++,p=!0),r.pause())}function y(t){m("onerror",t),_(),e.removeListener("error",y),0===l(e,"error")&&e.emit("error",t)}function v(){e.removeListener("finish",b),_()}function b(){m("onfinish"),e.removeListener("close",v),_()}function _(){m("unpipe"),r.unpipe(e)}return r.on("data",g),function(e,t,r){if("function"==typeof e.prependListener)return e.prependListener(t,r);e._events&&e._events[t]?u(e._events[t])?e._events[t].unshift(r):e._events[t]=[r,e._events[t]]:e.on(t,r)}(e,"error",y),e.once("close",v),e.once("finish",b),e.emit("pipe",r),o.flowing||(m("pipe resume"),r.resume()),e},T.prototype.unpipe=function(e){var t=this._readableState,r={hasUnpiped:!1};if(0===t.pipesCount)return this;if(1===t.pipesCount)return e&&e!==t.pipes||(e||(e=t.pipes),t.pipes=null,t.pipesCount=0,t.flowing=!1,e&&e.emit("unpipe",this,r)),this;if(!e){var n=t.pipes,i=t.pipesCount;t.pipes=null,t.pipesCount=0,t.flowing=!1;for(var o=0;o<i;o++)n[o].emit("unpipe",this,r);return this}var u=x(t.pipes,e);return -1===u||(t.pipes.splice(u,1),t.pipesCount-=1,1===t.pipesCount&&(t.pipes=t.pipes[0]),e.emit("unpipe",this,r)),this},T.prototype.on=function(e,t){var r=c.prototype.on.call(this,e,t);if("data"===e)!1!==this._readableState.flowing&&this.resume();else if("readable"===e){var n=this._readableState;n.endEmitted||n.readableListening||(n.readableListening=n.needReadable=!0,n.emittedReadable=!1,n.reading?n.length&&A(this):i.nextTick(R,this))}return r},T.prototype.addListener=T.prototype.on,T.prototype.resume=function(){var e=this._readableState;return e.flowing||(m("resume"),e.flowing=!0,e.resumeScheduled||(e.resumeScheduled=!0,i.nextTick(P,this,e))),this},T.prototype.pause=function(){return m("call pause flowing=%j",this._readableState.flowing),!1!==this._readableState.flowing&&(m("pause"),this._readableState.flowing=!1,this.emit("pause")),this},T.prototype.wrap=function(e){var t=this,r=this._readableState,n=!1;for(var i in e.on("end",function(){if(m("wrapped end"),r.decoder&&!r.ended){var e=r.decoder.end();e&&e.length&&t.push(e)}t.push(null)}),e.on("data",function(i){m("wrapped data"),r.decoder&&(i=r.decoder.write(i)),r.objectMode&&null==i||(r.objectMode||i&&i.length)&&(t.push(i)||(n=!0,e.pause()))}),e)void 0===this[i]&&"function"==typeof e[i]&&(this[i]=function(t){return function(){return e[t].apply(e,arguments)}}(i));for(var o=0;o<b.length;o++)e.on(b[o],this.emit.bind(this,b[o]));return this._read=function(t){m("wrapped _read",t),n&&(n=!1,e.resume())},this},Object.defineProperty(T.prototype,"readableHighWaterMark",{enumerable:!1,get:function(){return this._readableState.highWaterMark}}),T._fromList=D}).call(this,r("./node_modules/webpack/buildin/global.js"),r("./node_modules/process/browser.js"))},"./node_modules/readable-stream/lib/_stream_transform.js":function(e,t,r){e.exports=u;var n=r("./node_modules/readable-stream/lib/_stream_duplex.js"),i=Object.create(r("./node_modules/core-util-is/lib/util.js"));function o(e,t){var r=this._transformState;r.transforming=!1;var n=r.writecb;if(!n)return this.emit("error",Error("write callback called multiple times"));r.writechunk=null,r.writecb=null,null!=t&&this.push(t),n(e);var i=this._readableState;i.reading=!1,(i.needReadable||i.length<i.highWaterMark)&&this._read(i.highWaterMark)}function u(e){if(!(this instanceof u))return new u(e);n.call(this,e),this._transformState={afterTransform:o.bind(this),needTransform:!1,transforming:!1,writecb:null,writechunk:null,writeencoding:null},this._readableState.needReadable=!0,this._readableState.sync=!1,e&&("function"==typeof e.transform&&(this._transform=e.transform),"function"==typeof e.flush&&(this._flush=e.flush)),this.on("prefinish",l)}function l(){var e=this;"function"==typeof this._flush?this._flush(function(t,r){c(e,t,r)}):c(this,null,null)}function c(e,t,r){if(t)return e.emit("error",t);if(null!=r&&e.push(r),e._writableState.length)throw Error("Calling transform done when ws.length != 0");if(e._transformState.transforming)throw Error("Calling transform done when still transforming");return e.push(null)}i.inherits=r("./node_modules/inherits/inherits_browser.js"),i.inherits(u,n),u.prototype.push=function(e,t){return this._transformState.needTransform=!1,n.prototype.push.call(this,e,t)},u.prototype._transform=function(e,t,r){throw Error("_transform() is not implemented")},u.prototype._write=function(e,t,r){var n=this._transformState;if(n.writecb=r,n.writechunk=e,n.writeencoding=t,!n.transforming){var i=this._readableState;(n.needTransform||i.needReadable||i.length<i.highWaterMark)&&this._read(i.highWaterMark)}},u.prototype._read=function(e){var t=this._transformState;null!==t.writechunk&&t.writecb&&!t.transforming?(t.transforming=!0,this._transform(t.writechunk,t.writeencoding,t.afterTransform)):t.needTransform=!0},u.prototype._destroy=function(e,t){var r=this;n.prototype._destroy.call(this,e,function(e){t(e),r.emit("close")})}},"./node_modules/readable-stream/lib/_stream_writable.js":function(e,t,r){(function(t,n,i){var o=r("./node_modules/process-nextick-args/index.js");function u(e){var t=this;this.next=null,this.entry=null,this.finish=function(){!function(e,t,r){var n=e.entry;for(e.entry=null;n;){var i=n.callback;t.pendingcb--,i(void 0),n=n.next}t.corkedRequestsFree?t.corkedRequestsFree.next=e:t.corkedRequestsFree=e}(t,e)}}e.exports=_;var l,c=!t.browser&&["v0.10","v0.9."].indexOf(t.version.slice(0,5))>-1?n:o.nextTick;_.WritableState=b;var f=Object.create(r("./node_modules/core-util-is/lib/util.js"));f.inherits=r("./node_modules/inherits/inherits_browser.js");var d,h={deprecate:r("./node_modules/util-deprecate/browser.js")},p=r("./node_modules/readable-stream/lib/internal/streams/stream-browser.js"),m=r("./node_modules/readable-stream/node_modules/safe-buffer/index.js").Buffer,g=i.Uint8Array||function(){},y=r("./node_modules/readable-stream/lib/internal/streams/destroy.js");function v(){}function b(e,t){l=l||r("./node_modules/readable-stream/lib/_stream_duplex.js"),e=e||{};var n=t instanceof l;this.objectMode=!!e.objectMode,n&&(this.objectMode=this.objectMode||!!e.writableObjectMode);var i=e.highWaterMark,f=e.writableHighWaterMark,d=this.objectMode?16:16384;this.highWaterMark=i||0===i?i:n&&(f||0===f)?f:d,this.highWaterMark=Math.floor(this.highWaterMark),this.finalCalled=!1,this.needDrain=!1,this.ending=!1,this.ended=!1,this.finished=!1,this.destroyed=!1;var h=!1===e.decodeStrings;this.decodeStrings=!h,this.defaultEncoding=e.defaultEncoding||"utf8",this.length=0,this.writing=!1,this.corked=0,this.sync=!0,this.bufferProcessing=!1,this.onwrite=function(e){!function(e,t){var r=e._writableState,n=r.sync,i=r.writecb;if(r.writing=!1,r.writecb=null,r.length-=r.writelen,r.writelen=0,t)--r.pendingcb,n?(o.nextTick(i,t),o.nextTick(C,e,r),e._writableState.errorEmitted=!0,e.emit("error",t)):(i(t),e._writableState.errorEmitted=!0,e.emit("error",t),C(e,r));else{var u=w(r);u||r.corked||r.bufferProcessing||!r.bufferedRequest||S(e,r),n?c(E,e,r,u,i):E(e,r,u,i)}}(t,e)},this.writecb=null,this.writelen=0,this.bufferedRequest=null,this.lastBufferedRequest=null,this.pendingcb=0,this.prefinished=!1,this.errorEmitted=!1,this.bufferedRequestCount=0,this.corkedRequestsFree=new u(this)}function _(e){if(l=l||r("./node_modules/readable-stream/lib/_stream_duplex.js"),!(d.call(_,this)||this instanceof l))return new _(e);this._writableState=new b(e,this),this.writable=!0,e&&("function"==typeof e.write&&(this._write=e.write),"function"==typeof e.writev&&(this._writev=e.writev),"function"==typeof e.destroy&&(this._destroy=e.destroy),"function"==typeof e.final&&(this._final=e.final)),p.call(this)}function T(e,t,r,n,i,o,u){t.writelen=n,t.writecb=u,t.writing=!0,t.sync=!0,r?e._writev(i,t.onwrite):e._write(i,o,t.onwrite),t.sync=!1}function E(e,t,r,n){r||0===t.length&&t.needDrain&&(t.needDrain=!1,e.emit("drain")),t.pendingcb--,n(),C(e,t)}function S(e,t){t.bufferProcessing=!0;var r=t.bufferedRequest;if(e._writev&&r&&r.next){var n=Array(t.bufferedRequestCount),i=t.corkedRequestsFree;i.entry=r;for(var o=0,l=!0;r;)n[o]=r,r.isBuf||(l=!1),r=r.next,o+=1;n.allBuffers=l,T(e,t,!0,t.length,n,"",i.finish),t.pendingcb++,t.lastBufferedRequest=null,i.next?(t.corkedRequestsFree=i.next,i.next=null):t.corkedRequestsFree=new u(t),t.bufferedRequestCount=0}else{for(;r;){var c=r.chunk,f=r.encoding,d=r.callback;if(T(e,t,!1,t.objectMode?1:c.length,c,f,d),r=r.next,t.bufferedRequestCount--,t.writing)break}null===r&&(t.lastBufferedRequest=null)}t.bufferedRequest=r,t.bufferProcessing=!1}function w(e){return e.ending&&0===e.length&&null===e.bufferedRequest&&!e.finished&&!e.writing}function A(e,t){e._final(function(r){t.pendingcb--,r&&e.emit("error",r),t.prefinished=!0,e.emit("prefinish"),C(e,t)})}function C(e,t){var r=w(t);return r&&(t.prefinished||t.finalCalled||("function"==typeof e._final?(t.pendingcb++,t.finalCalled=!0,o.nextTick(A,e,t)):(t.prefinished=!0,e.emit("prefinish"))),0===t.pendingcb&&(t.finished=!0,e.emit("finish"))),r}f.inherits(_,p),b.prototype.getBuffer=function(){for(var e=this.bufferedRequest,t=[];e;)t.push(e),e=e.next;return t},function(){try{Object.defineProperty(b.prototype,"buffer",{get:h.deprecate(function(){return this.getBuffer()},"_writableState.buffer is deprecated. Use _writableState.getBuffer instead.","DEP0003")})}catch(e){}}(),"function"==typeof Symbol&&Symbol.hasInstance&&"function"==typeof Function.prototype[Symbol.hasInstance]?(d=Function.prototype[Symbol.hasInstance],Object.defineProperty(_,Symbol.hasInstance,{value:function(e){return!!d.call(this,e)||this===_&&e&&e._writableState instanceof b}})):d=function(e){return e instanceof this},_.prototype.pipe=function(){this.emit("error",Error("Cannot pipe, not readable"))},_.prototype.write=function(e,t,r){var n,i,u,l,c,f,d,h,p=this._writableState,y=!1,b=!p.objectMode&&(h=e,m.isBuffer(h)||h instanceof g);return b&&!m.isBuffer(e)&&(n=e,e=m.from(n)),"function"==typeof t&&(r=t,t=null),b?t="buffer":t||(t=p.defaultEncoding),"function"!=typeof r&&(r=v),p.ended?(i=r,u=Error("write after end"),this.emit("error",u),o.nextTick(i,u)):(b||(l=e,c=r,f=!0,d=!1,null===l?d=TypeError("May not write null values to stream"):"string"==typeof l||void 0===l||p.objectMode||(d=TypeError("Invalid non-string/buffer chunk")),d&&(this.emit("error",d),o.nextTick(c,d),f=!1),f))&&(p.pendingcb++,y=function(e,t,r,n,i,o){if(!r){var u,l,c=(u=n,l=i,t.objectMode||!1===t.decodeStrings||"string"!=typeof u||(u=m.from(u,l)),u);n!==c&&(r=!0,i="buffer",n=c)}var f=t.objectMode?1:n.length;t.length+=f;var d=t.length<t.highWaterMark;if(d||(t.needDrain=!0),t.writing||t.corked){var h=t.lastBufferedRequest;t.lastBufferedRequest={chunk:n,encoding:i,isBuf:r,callback:o,next:null},h?h.next=t.lastBufferedRequest:t.bufferedRequest=t.lastBufferedRequest,t.bufferedRequestCount+=1}else T(e,t,!1,f,n,i,o);return d}(this,p,b,e,t,r)),y},_.prototype.cork=function(){this._writableState.corked++},_.prototype.uncork=function(){var e=this._writableState;e.corked&&(e.corked--,e.writing||e.corked||e.finished||e.bufferProcessing||!e.bufferedRequest||S(this,e))},_.prototype.setDefaultEncoding=function(e){if("string"==typeof e&&(e=e.toLowerCase()),!(["hex","utf8","utf-8","ascii","binary","base64","ucs2","ucs-2","utf16le","utf-16le","raw"].indexOf((e+"").toLowerCase())>-1))throw TypeError("Unknown encoding: "+e);return this._writableState.defaultEncoding=e,this},Object.defineProperty(_.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}}),_.prototype._write=function(e,t,r){r(Error("_write() is not implemented"))},_.prototype._writev=null,_.prototype.end=function(e,t,r){var n,i=this._writableState;"function"==typeof e?(r=e,e=null,t=null):"function"==typeof t&&(r=t,t=null),null!=e&&this.write(e,t),i.corked&&(i.corked=1,this.uncork()),i.ending||i.finished||(n=r,i.ending=!0,C(this,i),n&&(i.finished?o.nextTick(n):this.once("finish",n)),i.ended=!0,this.writable=!1)},Object.defineProperty(_.prototype,"destroyed",{get:function(){return void 0!==this._writableState&&this._writableState.destroyed},set:function(e){this._writableState&&(this._writableState.destroyed=e)}}),_.prototype.destroy=y.destroy,_.prototype._undestroy=y.undestroy,_.prototype._destroy=function(e,t){this.end(),t(e)}}).call(this,r("./node_modules/process/browser.js"),r("./node_modules/timers-browserify/main.js").setImmediate,r("./node_modules/webpack/buildin/global.js"))},"./node_modules/readable-stream/lib/internal/streams/BufferList.js":function(e,t,r){var n=r("./node_modules/readable-stream/node_modules/safe-buffer/index.js").Buffer,i=r(1);e.exports=function(){function e(){(function(e,t){if(!(e instanceof t))throw TypeError("Cannot call a class as a function")})(this,e),this.head=null,this.tail=null,this.length=0}return e.prototype.push=function(e){var t={data:e,next:null};this.length>0?this.tail.next=t:this.head=t,this.tail=t,++this.length},e.prototype.unshift=function(e){var t={data:e,next:this.head};0===this.length&&(this.tail=t),this.head=t,++this.length},e.prototype.shift=function(){if(0!==this.length){var e=this.head.data;return 1===this.length?this.head=this.tail=null:this.head=this.head.next,--this.length,e}},e.prototype.clear=function(){this.head=this.tail=null,this.length=0},e.prototype.join=function(e){if(0===this.length)return"";for(var t=this.head,r=""+t.data;t=t.next;)r+=e+t.data;return r},e.prototype.concat=function(e){if(0===this.length)return n.alloc(0);if(1===this.length)return this.head.data;for(var t,r=n.allocUnsafe(e>>>0),i=this.head,o=0;i;)t=o,i.data.copy(r,t),o+=i.data.length,i=i.next;return r},e}(),i&&i.inspect&&i.inspect.custom&&(e.exports.prototype[i.inspect.custom]=function(){var e=i.inspect({length:this.length});return this.constructor.name+" "+e})},"./node_modules/readable-stream/lib/internal/streams/destroy.js":function(e,t,r){var n=r("./node_modules/process-nextick-args/index.js");function i(e,t){e.emit("error",t)}e.exports={destroy:function(e,t){var r=this,o=this._readableState&&this._readableState.destroyed,u=this._writableState&&this._writableState.destroyed;return o||u?t?t(e):!e||this._writableState&&this._writableState.errorEmitted||n.nextTick(i,this,e):(this._readableState&&(this._readableState.destroyed=!0),this._writableState&&(this._writableState.destroyed=!0),this._destroy(e||null,function(e){!t&&e?(n.nextTick(i,r,e),r._writableState&&(r._writableState.errorEmitted=!0)):t&&t(e)})),this},undestroy:function(){this._readableState&&(this._readableState.destroyed=!1,this._readableState.reading=!1,this._readableState.ended=!1,this._readableState.endEmitted=!1),this._writableState&&(this._writableState.destroyed=!1,this._writableState.ended=!1,this._writableState.ending=!1,this._writableState.finished=!1,this._writableState.errorEmitted=!1)}}},"./node_modules/readable-stream/lib/internal/streams/stream-browser.js":function(e,t,r){e.exports=r("./node_modules/events/events.js").EventEmitter},"./node_modules/readable-stream/node_modules/safe-buffer/index.js":function(e,t,r){var n=r("./node_modules/buffer/index.js"),i=n.Buffer;function o(e,t){for(var r in e)t[r]=e[r]}function u(e,t,r){return i(e,t,r)}i.from&&i.alloc&&i.allocUnsafe&&i.allocUnsafeSlow?e.exports=n:(o(n,t),t.Buffer=u),o(i,u),u.from=function(e,t,r){if("number"==typeof e)throw TypeError("Argument must not be a number");return i(e,t,r)},u.alloc=function(e,t,r){if("number"!=typeof e)throw TypeError("Argument must be a number");var n=i(e);return void 0!==t?"string"==typeof r?n.fill(t,r):n.fill(t):n.fill(0),n},u.allocUnsafe=function(e){if("number"!=typeof e)throw TypeError("Argument must be a number");return i(e)},u.allocUnsafeSlow=function(e){if("number"!=typeof e)throw TypeError("Argument must be a number");return n.SlowBuffer(e)}},"./node_modules/readable-stream/passthrough.js":function(e,t,r){e.exports=r("./node_modules/readable-stream/readable-browser.js").PassThrough},"./node_modules/readable-stream/readable-browser.js":function(e,t,r){(t=e.exports=r("./node_modules/readable-stream/lib/_stream_readable.js")).Stream=t,t.Readable=t,t.Writable=r("./node_modules/readable-stream/lib/_stream_writable.js"),t.Duplex=r("./node_modules/readable-stream/lib/_stream_duplex.js"),t.Transform=r("./node_modules/readable-stream/lib/_stream_transform.js"),t.PassThrough=r("./node_modules/readable-stream/lib/_stream_passthrough.js")},"./node_modules/readable-stream/transform.js":function(e,t,r){e.exports=r("./node_modules/readable-stream/readable-browser.js").Transform},"./node_modules/readable-stream/writable-browser.js":function(e,t,r){e.exports=r("./node_modules/readable-stream/lib/_stream_writable.js")},"./node_modules/safe-buffer/index.js":function(e,t,r){var n=r("./node_modules/buffer/index.js"),i=n.Buffer;function o(e,t){for(var r in e)t[r]=e[r]}function u(e,t,r){return i(e,t,r)}i.from&&i.alloc&&i.allocUnsafe&&i.allocUnsafeSlow?e.exports=n:(o(n,t),t.Buffer=u),u.prototype=Object.create(i.prototype),o(i,u),u.from=function(e,t,r){if("number"==typeof e)throw TypeError("Argument must not be a number");return i(e,t,r)},u.alloc=function(e,t,r){if("number"!=typeof e)throw TypeError("Argument must be a number");var n=i(e);return void 0!==t?"string"==typeof r?n.fill(t,r):n.fill(t):n.fill(0),n},u.allocUnsafe=function(e){if("number"!=typeof e)throw TypeError("Argument must be a number");return i(e)},u.allocUnsafeSlow=function(e){if("number"!=typeof e)throw TypeError("Argument must be a number");return n.SlowBuffer(e)}},"./node_modules/sax/lib/sax.js":function(e,t,r){(function(e){!function(t){t.parser=function(e,t){return new o(e,t)},t.SAXParser=o,t.SAXStream=l,t.createStream=function(e,t){return new l(e,t)},t.MAX_BUFFER_LENGTH=65536;var n,i=["comment","sgmlDecl","textNode","tagName","doctype","procInstName","procInstBody","entity","attribName","attribValue","cdata","script"];function o(e,r){if(!(this instanceof o))return new o(e,r);(function(e){for(var t=0,r=i.length;t<r;t++)e[i[t]]=""})(this),this.q=this.c="",this.bufferCheckPosition=t.MAX_BUFFER_LENGTH,this.opt=r||{},this.opt.lowercase=this.opt.lowercase||this.opt.lowercasetags,this.looseCase=this.opt.lowercase?"toLowerCase":"toUpperCase",this.tags=[],this.closed=this.closedRoot=this.sawRoot=!1,this.tag=this.error=null,this.strict=!!e,this.noscript=!(!e&&!this.opt.noscript),this.state=I.BEGIN,this.strictEntities=this.opt.strictEntities,this.ENTITIES=this.strictEntities?Object.create(t.XML_ENTITIES):Object.create(t.ENTITIES),this.attribList=[],this.opt.xmlns&&(this.ns=Object.create(y)),this.trackPosition=!1!==this.opt.position,this.trackPosition&&(this.position=this.line=this.column=0),R(this,"onready")}t.EVENTS=["text","processinginstruction","sgmldeclaration","doctype","comment","opentagstart","attribute","opentag","closetag","opencdata","cdata","closecdata","error","end","ready","script","opennamespace","closenamespace"],Object.create||(Object.create=function(e){function t(){}return t.prototype=e,new t}),Object.keys||(Object.keys=function(e){var t=[];for(var r in e)e.hasOwnProperty(r)&&t.push(r);return t}),o.prototype={end:function(){L(this)},write:function(e){if(this.error)throw this.error;if(this.closed)return N(this,"Cannot write after close. Assign an onready handler.");if(null===e)return L(this);"object"==typeof e&&(e=e.toString());for(var r,n,o,u,l,f,d,m=0,g="";g=q(e,m++),this.c=g,g;)switch(this.trackPosition&&(this.position++,"\n"===g?(this.line++,this.column=0):this.column++),this.state){case I.BEGIN:if(this.state=I.BEGIN_WHITESPACE,"\uFEFF"===g)continue;U(this,g);continue;case I.BEGIN_WHITESPACE:U(this,g);continue;case I.TEXT:if(this.sawRoot&&!this.closedRoot){for(var y,E,w,A,C=m-1;g&&"<"!==g&&"&"!==g;)(g=q(e,m++))&&this.trackPosition&&(this.position++,"\n"===g?(this.line++,this.column=0):this.column++);this.textNode+=e.substring(C,m-1)}"<"!==g||this.sawRoot&&this.closedRoot&&!this.strict?(S(c,g)||this.sawRoot&&!this.closedRoot||x(this,"Text data outside of root node."),"&"===g?this.state=I.TEXT_ENTITY:this.textNode+=g):(this.state=I.OPEN_WAKA,this.startTagPosition=this.position);continue;case I.SCRIPT:"<"===g?this.state=I.SCRIPT_ENDING:this.script+=g;continue;case I.SCRIPT_ENDING:"/"===g?this.state=I.CLOSE_TAG:(this.script+="<"+g,this.state=I.SCRIPT);continue;case I.OPEN_WAKA:"!"===g?(this.state=I.SGML_DECL,this.sgmlDecl=""):S(c,g)||(S(v,g)?(this.state=I.OPEN_TAG,this.tagName=g):"/"===g?(this.state=I.CLOSE_TAG,this.tagName=""):"?"===g?(this.state=I.PROC_INST,this.procInstName=this.procInstBody=""):(x(this,"Unencoded <"),this.startTagPosition+1<this.position&&(g=Array(this.position-this.startTagPosition).join(" ")+g),this.textNode+="<"+g,this.state=I.TEXT));continue;case I.SGML_DECL:"[CDATA["===(this.sgmlDecl+g).toUpperCase()?(P(this,"onopencdata"),this.state=I.CDATA,this.sgmlDecl="",this.cdata=""):this.sgmlDecl+g==="--"?(this.state=I.COMMENT,this.comment="",this.sgmlDecl=""):"DOCTYPE"===(this.sgmlDecl+g).toUpperCase()?(this.state=I.DOCTYPE,(this.doctype||this.sawRoot)&&x(this,"Inappropriately located doctype declaration"),this.doctype="",this.sgmlDecl=""):">"===g?(P(this,"onsgmldeclaration",this.sgmlDecl),this.sgmlDecl="",this.state=I.TEXT):(S(h,g)&&(this.state=I.SGML_DECL_QUOTED),this.sgmlDecl+=g);continue;case I.SGML_DECL_QUOTED:g===this.q&&(this.state=I.SGML_DECL,this.q=""),this.sgmlDecl+=g;continue;case I.DOCTYPE:">"===g?(this.state=I.TEXT,P(this,"ondoctype",this.doctype),this.doctype=!0):(this.doctype+=g,"["===g?this.state=I.DOCTYPE_DTD:S(h,g)&&(this.state=I.DOCTYPE_QUOTED,this.q=g));continue;case I.DOCTYPE_QUOTED:this.doctype+=g,g===this.q&&(this.q="",this.state=I.DOCTYPE);continue;case I.DOCTYPE_DTD:this.doctype+=g,"]"===g?this.state=I.DOCTYPE:S(h,g)&&(this.state=I.DOCTYPE_DTD_QUOTED,this.q=g);continue;case I.DOCTYPE_DTD_QUOTED:this.doctype+=g,g===this.q&&(this.state=I.DOCTYPE_DTD,this.q="");continue;case I.COMMENT:"-"===g?this.state=I.COMMENT_ENDING:this.comment+=g;continue;case I.COMMENT_ENDING:"-"===g?(this.state=I.COMMENT_ENDED,this.comment=D(this.opt,this.comment),this.comment&&P(this,"oncomment",this.comment),this.comment=""):(this.comment+="-"+g,this.state=I.COMMENT);continue;case I.COMMENT_ENDED:">"!==g?(x(this,"Malformed comment"),this.comment+="--"+g,this.state=I.COMMENT):this.state=I.TEXT;continue;case I.CDATA:"]"===g?this.state=I.CDATA_ENDING:this.cdata+=g;continue;case I.CDATA_ENDING:"]"===g?this.state=I.CDATA_ENDING_2:(this.cdata+="]"+g,this.state=I.CDATA);continue;case I.CDATA_ENDING_2:">"===g?(this.cdata&&P(this,"oncdata",this.cdata),P(this,"onclosecdata"),this.cdata="",this.state=I.TEXT):"]"===g?this.cdata+="]":(this.cdata+="]]"+g,this.state=I.CDATA);continue;case I.PROC_INST:"?"===g?this.state=I.PROC_INST_ENDING:S(c,g)?this.state=I.PROC_INST_BODY:this.procInstName+=g;continue;case I.PROC_INST_BODY:if(!this.procInstBody&&S(c,g))continue;"?"===g?this.state=I.PROC_INST_ENDING:this.procInstBody+=g;continue;case I.PROC_INST_ENDING:">"===g?(P(this,"onprocessinginstruction",{name:this.procInstName,body:this.procInstBody}),this.procInstName=this.procInstBody="",this.state=I.TEXT):(this.procInstBody+="?"+g,this.state=I.PROC_INST_BODY);continue;case I.OPEN_TAG:S(b,g)?this.tagName+=g:(function(e){e.strict||(e.tagName=e.tagName[e.looseCase]());var t=e.tags[e.tags.length-1]||e,r=e.tag={name:e.tagName,attributes:{}};e.opt.xmlns&&(r.ns=t.ns),e.attribList.length=0,P(e,"onopentagstart",r)}(this),">"===g?F(this):"/"===g?this.state=I.OPEN_TAG_SLASH:(S(c,g)||x(this,"Invalid character in tag name"),this.state=I.ATTRIB));continue;case I.OPEN_TAG_SLASH:">"===g?(F(this,!0),B(this)):(x(this,"Forward-slash in opening tag not followed by >"),this.state=I.ATTRIB);continue;case I.ATTRIB:if(S(c,g))continue;">"===g?F(this):"/"===g?this.state=I.OPEN_TAG_SLASH:S(v,g)?(this.attribName=g,this.attribValue="",this.state=I.ATTRIB_NAME):x(this,"Invalid attribute name");continue;case I.ATTRIB_NAME:"="===g?this.state=I.ATTRIB_VALUE:">"===g?(x(this,"Attribute without value"),this.attribValue=this.attribName,M(this),F(this)):S(c,g)?this.state=I.ATTRIB_NAME_SAW_WHITE:S(b,g)?this.attribName+=g:x(this,"Invalid attribute name");continue;case I.ATTRIB_NAME_SAW_WHITE:if("="===g)this.state=I.ATTRIB_VALUE;else{if(S(c,g))continue;x(this,"Attribute without value"),this.tag.attributes[this.attribName]="",this.attribValue="",P(this,"onattribute",{name:this.attribName,value:""}),this.attribName="",">"===g?F(this):S(v,g)?(this.attribName=g,this.state=I.ATTRIB_NAME):(x(this,"Invalid attribute name"),this.state=I.ATTRIB)}continue;case I.ATTRIB_VALUE:if(S(c,g))continue;S(h,g)?(this.q=g,this.state=I.ATTRIB_VALUE_QUOTED):(x(this,"Unquoted attribute value"),this.state=I.ATTRIB_VALUE_UNQUOTED,this.attribValue=g);continue;case I.ATTRIB_VALUE_QUOTED:if(g!==this.q){"&"===g?this.state=I.ATTRIB_VALUE_ENTITY_Q:this.attribValue+=g;continue}M(this),this.q="",this.state=I.ATTRIB_VALUE_CLOSED;continue;case I.ATTRIB_VALUE_CLOSED:S(c,g)?this.state=I.ATTRIB:">"===g?F(this):"/"===g?this.state=I.OPEN_TAG_SLASH:S(v,g)?(x(this,"No whitespace between attributes"),this.attribName=g,this.attribValue="",this.state=I.ATTRIB_NAME):x(this,"Invalid attribute name");continue;case I.ATTRIB_VALUE_UNQUOTED:if(!S(p,g)){"&"===g?this.state=I.ATTRIB_VALUE_ENTITY_U:this.attribValue+=g;continue}M(this),">"===g?F(this):this.state=I.ATTRIB;continue;case I.CLOSE_TAG:if(this.tagName)">"===g?B(this):S(b,g)?this.tagName+=g:this.script?(this.script+="</"+this.tagName,this.tagName="",this.state=I.SCRIPT):(S(c,g)||x(this,"Invalid tagname in closing tag"),this.state=I.CLOSE_TAG_SAW_WHITE);else{if(S(c,g))continue;S(v,g)?this.tagName=g:this.script?(this.script+="</"+g,this.state=I.SCRIPT):x(this,"Invalid tagname in closing tag.")}continue;case I.CLOSE_TAG_SAW_WHITE:if(S(c,g))continue;">"===g?B(this):x(this,"Invalid characters in closing tag");continue;case I.TEXT_ENTITY:case I.ATTRIB_VALUE_ENTITY_Q:case I.ATTRIB_VALUE_ENTITY_U:switch(this.state){case I.TEXT_ENTITY:y=I.TEXT,E="textNode";break;case I.ATTRIB_VALUE_ENTITY_Q:y=I.ATTRIB_VALUE_QUOTED,E="attribValue";break;case I.ATTRIB_VALUE_ENTITY_U:y=I.ATTRIB_VALUE_UNQUOTED,E="attribValue"}";"===g?(this[E]+=function(e){var t,r=e.entity,n=r.toLowerCase(),i="";return e.ENTITIES[r]?e.ENTITIES[r]:e.ENTITIES[n]?e.ENTITIES[n]:("#"===(r=n).charAt(0)&&(i="x"===r.charAt(1)?(t=parseInt(r=r.slice(2),16)).toString(16):(t=parseInt(r=r.slice(1),10)).toString(10)),r=r.replace(/^0+/,""),i.toLowerCase()!==r?(x(e,"Invalid character entity"),"&"+e.entity+";"):String.fromCodePoint(t))}(this),this.entity="",this.state=y):S(this.entity.length?T:_,g)?this.entity+=g:(x(this,"Invalid character in entity name"),this[E]+="&"+this.entity+g,this.entity="",this.state=y);continue;default:throw Error(this,"Unknown state: "+this.state)}return this.position>=this.bufferCheckPosition&&function(e){for(var r=Math.max(t.MAX_BUFFER_LENGTH,10),n=0,o=0,u=i.length;o<u;o++){var l=e[i[o]].length;if(l>r)switch(i[o]){case"textNode":k(e);break;case"cdata":P(e,"oncdata",e.cdata),e.cdata="";break;case"script":P(e,"onscript",e.script),e.script="";break;default:N(e,"Max buffer length exceeded: "+i[o])}n=Math.max(n,l)}var c=t.MAX_BUFFER_LENGTH-n;e.bufferCheckPosition=c+e.position}(this),this},resume:function(){return this.error=null,this},close:function(){return this.write(null)},flush:function(){k(this),""!==this.cdata&&(P(this,"oncdata",this.cdata),this.cdata=""),""!==this.script&&(P(this,"onscript",this.script),this.script="")}};try{n=r("./node_modules/stream-browserify/index.js").Stream}catch(e){n=function(){}}var u=t.EVENTS.filter(function(e){return"error"!==e&&"end"!==e});function l(e,t){if(!(this instanceof l))return new l(e,t);n.apply(this),this._parser=new o(e,t),this.writable=!0,this.readable=!0;var r=this;this._parser.onend=function(){r.emit("end")},this._parser.onerror=function(e){r.emit("error",e),r._parser.error=null},this._decoder=null,u.forEach(function(e){Object.defineProperty(r,"on"+e,{get:function(){return r._parser["on"+e]},set:function(t){if(!t)return r.removeAllListeners(e),r._parser["on"+e]=t,t;r.on(e,t)},enumerable:!0,configurable:!1})})}l.prototype=Object.create(n.prototype,{constructor:{value:l}}),l.prototype.write=function(t){if("function"==typeof e&&"function"==typeof e.isBuffer&&e.isBuffer(t)){if(!this._decoder){var n=r("./node_modules/string_decoder/lib/string_decoder.js").StringDecoder;this._decoder=new n("utf8")}t=this._decoder.write(t)}return this._parser.write(t.toString()),this.emit("data",t),!0},l.prototype.end=function(e){return e&&e.length&&this.write(e),this._parser.end(),!0},l.prototype.on=function(e,t){var r=this;return r._parser["on"+e]||-1===u.indexOf(e)||(r._parser["on"+e]=function(){var t=1==arguments.length?[arguments[0]]:Array.apply(null,arguments);t.splice(0,0,e),r.emit.apply(r,t)}),n.prototype.on.call(r,e,t)};var c="\r\n	 ",f="0124356789",d="abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ",h="'\"",p=c+">",m="http://www.w3.org/XML/1998/namespace",g="http://www.w3.org/2000/xmlns/",y={xml:m,xmlns:g};c=E(c),f=E(f),d=E(d);var v=/[:_A-Za-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD]/,b=/[:_A-Za-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\u00B7\u0300-\u036F\u203F-\u2040\.\d-]/,_=/[#:_A-Za-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD]/,T=/[#:_A-Za-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\u00B7\u0300-\u036F\u203F-\u2040\.\d-]/;function E(e){return e.split("").reduce(function(e,t){return e[t]=!0,e},{})}function S(e,t){return"[object RegExp]"===Object.prototype.toString.call(e)?!!t.match(e):e[t]}h=E(h),p=E(p);var w,A,C,I=0;for(var O in t.STATE={BEGIN:I++,BEGIN_WHITESPACE:I++,TEXT:I++,TEXT_ENTITY:I++,OPEN_WAKA:I++,SGML_DECL:I++,SGML_DECL_QUOTED:I++,DOCTYPE:I++,DOCTYPE_QUOTED:I++,DOCTYPE_DTD:I++,DOCTYPE_DTD_QUOTED:I++,COMMENT_STARTING:I++,COMMENT:I++,COMMENT_ENDING:I++,COMMENT_ENDED:I++,CDATA:I++,CDATA_ENDING:I++,CDATA_ENDING_2:I++,PROC_INST:I++,PROC_INST_BODY:I++,PROC_INST_ENDING:I++,OPEN_TAG:I++,OPEN_TAG_SLASH:I++,ATTRIB:I++,ATTRIB_NAME:I++,ATTRIB_NAME_SAW_WHITE:I++,ATTRIB_VALUE:I++,ATTRIB_VALUE_QUOTED:I++,ATTRIB_VALUE_CLOSED:I++,ATTRIB_VALUE_UNQUOTED:I++,ATTRIB_VALUE_ENTITY_Q:I++,ATTRIB_VALUE_ENTITY_U:I++,CLOSE_TAG:I++,CLOSE_TAG_SAW_WHITE:I++,SCRIPT:I++,SCRIPT_ENDING:I++},t.XML_ENTITIES={amp:"&",gt:">",lt:"<",quot:'"',apos:"'"},t.ENTITIES={amp:"&",gt:">",lt:"<",quot:'"',apos:"'",AElig:198,Aacute:193,Acirc:194,Agrave:192,Aring:197,Atilde:195,Auml:196,Ccedil:199,ETH:208,Eacute:201,Ecirc:202,Egrave:200,Euml:203,Iacute:205,Icirc:206,Igrave:204,Iuml:207,Ntilde:209,Oacute:211,Ocirc:212,Ograve:210,Oslash:216,Otilde:213,Ouml:214,THORN:222,Uacute:218,Ucirc:219,Ugrave:217,Uuml:220,Yacute:221,aacute:225,acirc:226,aelig:230,agrave:224,aring:229,atilde:227,auml:228,ccedil:231,eacute:233,ecirc:234,egrave:232,eth:240,euml:235,iacute:237,icirc:238,igrave:236,iuml:239,ntilde:241,oacute:243,ocirc:244,ograve:242,oslash:248,otilde:245,ouml:246,szlig:223,thorn:254,uacute:250,ucirc:251,ugrave:249,uuml:252,yacute:253,yuml:255,copy:169,reg:174,nbsp:160,iexcl:161,cent:162,pound:163,curren:164,yen:165,brvbar:166,sect:167,uml:168,ordf:170,laquo:171,not:172,shy:173,macr:175,deg:176,plusmn:177,sup1:185,sup2:178,sup3:179,acute:180,micro:181,para:182,middot:183,cedil:184,ordm:186,raquo:187,frac14:188,frac12:189,frac34:190,iquest:191,times:215,divide:247,OElig:338,oelig:339,Scaron:352,scaron:353,Yuml:376,fnof:402,circ:710,tilde:732,Alpha:913,Beta:914,Gamma:915,Delta:916,Epsilon:917,Zeta:918,Eta:919,Theta:920,Iota:921,Kappa:922,Lambda:923,Mu:924,Nu:925,Xi:926,Omicron:927,Pi:928,Rho:929,Sigma:931,Tau:932,Upsilon:933,Phi:934,Chi:935,Psi:936,Omega:937,alpha:945,beta:946,gamma:947,delta:948,epsilon:949,zeta:950,eta:951,theta:952,iota:953,kappa:954,lambda:955,mu:956,nu:957,xi:958,omicron:959,pi:960,rho:961,sigmaf:962,sigma:963,tau:964,upsilon:965,phi:966,chi:967,psi:968,omega:969,thetasym:977,upsih:978,piv:982,ensp:8194,emsp:8195,thinsp:8201,zwnj:8204,zwj:8205,lrm:8206,rlm:8207,ndash:8211,mdash:8212,lsquo:8216,rsquo:8217,sbquo:8218,ldquo:8220,rdquo:8221,bdquo:8222,dagger:8224,Dagger:8225,bull:8226,hellip:8230,permil:8240,prime:8242,Prime:8243,lsaquo:8249,rsaquo:8250,oline:8254,frasl:8260,euro:8364,image:8465,weierp:8472,real:8476,trade:8482,alefsym:8501,larr:8592,uarr:8593,rarr:8594,darr:8595,harr:8596,crarr:8629,lArr:8656,uArr:8657,rArr:8658,dArr:8659,hArr:8660,forall:8704,part:8706,exist:8707,empty:8709,nabla:8711,isin:8712,notin:8713,ni:8715,prod:8719,sum:8721,minus:8722,lowast:8727,radic:8730,prop:8733,infin:8734,ang:8736,and:8743,or:8744,cap:8745,cup:8746,int:8747,there4:8756,sim:8764,cong:8773,asymp:8776,ne:8800,equiv:8801,le:8804,ge:8805,sub:8834,sup:8835,nsub:8836,sube:8838,supe:8839,oplus:8853,otimes:8855,perp:8869,sdot:8901,lceil:8968,rceil:8969,lfloor:8970,rfloor:8971,lang:9001,rang:9002,loz:9674,spades:9824,clubs:9827,hearts:9829,diams:9830},Object.keys(t.ENTITIES).forEach(function(e){var r=t.ENTITIES[e],n="number"==typeof r?String.fromCharCode(r):r;t.ENTITIES[e]=n}),t.STATE)t.STATE[t.STATE[O]]=O;function R(e,t,r){e[t]&&e[t](r)}function P(e,t,r){e.textNode&&k(e),R(e,t,r)}function k(e){e.textNode=D(e.opt,e.textNode),e.textNode&&R(e,"ontext",e.textNode),e.textNode=""}function D(e,t){return e.trim&&(t=t.trim()),e.normalize&&(t=t.replace(/\s+/g," ")),t}function N(e,t){return k(e),e.trackPosition&&(t+="\nLine: "+e.line+"\nColumn: "+e.column+"\nChar: "+e.c),t=Error(t),e.error=t,R(e,"onerror",t),e}function L(e){return e.sawRoot&&!e.closedRoot&&x(e,"Unclosed root tag"),e.state!==I.BEGIN&&e.state!==I.BEGIN_WHITESPACE&&e.state!==I.TEXT&&N(e,"Unexpected end"),k(e),e.c="",e.closed=!0,R(e,"onend"),o.call(e,e.strict,e.opt),e}function x(e,t){if("object"!=typeof e||!(e instanceof o))throw Error("bad call to strictFail");e.strict&&N(e,t)}function j(e,t){var r=0>e.indexOf(":")?["",e]:e.split(":"),n=r[0],i=r[1];return t&&"xmlns"===e&&(n="xmlns",i=""),{prefix:n,local:i}}function M(e){if(e.strict||(e.attribName=e.attribName[e.looseCase]()),-1!==e.attribList.indexOf(e.attribName)||e.tag.attributes.hasOwnProperty(e.attribName))e.attribName=e.attribValue="";else{if(e.opt.xmlns){var t=j(e.attribName,!0),r=t.prefix,n=t.local;if("xmlns"===r){if("xml"===n&&e.attribValue!==m)x(e,"xml: prefix must be bound to "+m+"\nActual: "+e.attribValue);else if("xmlns"===n&&e.attribValue!==g)x(e,"xmlns: prefix must be bound to "+g+"\nActual: "+e.attribValue);else{var i=e.tag,o=e.tags[e.tags.length-1]||e;i.ns===o.ns&&(i.ns=Object.create(o.ns)),i.ns[n]=e.attribValue}}e.attribList.push([e.attribName,e.attribValue])}else e.tag.attributes[e.attribName]=e.attribValue,P(e,"onattribute",{name:e.attribName,value:e.attribValue});e.attribName=e.attribValue=""}}function F(e,t){if(e.opt.xmlns){var r=e.tag,n=j(e.tagName);r.prefix=n.prefix,r.local=n.local,r.uri=r.ns[n.prefix]||"",r.prefix&&!r.uri&&(x(e,"Unbound namespace prefix: "+JSON.stringify(e.tagName)),r.uri=n.prefix);var i=e.tags[e.tags.length-1]||e;r.ns&&i.ns!==r.ns&&Object.keys(r.ns).forEach(function(t){P(e,"onopennamespace",{prefix:t,uri:r.ns[t]})});for(var o=0,u=e.attribList.length;o<u;o++){var l=e.attribList[o],c=l[0],f=l[1],d=j(c,!0),h=d.prefix,p=d.local,m=""===h?"":r.ns[h]||"",g={name:c,value:f,prefix:h,local:p,uri:m};h&&"xmlns"!==h&&!m&&(x(e,"Unbound namespace prefix: "+JSON.stringify(h)),g.uri=h),e.tag.attributes[c]=g,P(e,"onattribute",g)}e.attribList.length=0}e.tag.isSelfClosing=!!t,e.sawRoot=!0,e.tags.push(e.tag),P(e,"onopentag",e.tag),t||(e.noscript||"script"!==e.tagName.toLowerCase()?e.state=I.TEXT:e.state=I.SCRIPT,e.tag=null,e.tagName=""),e.attribName=e.attribValue="",e.attribList.length=0}function B(e){if(!e.tagName)return x(e,"Weird empty close tag."),e.textNode+="</>",void(e.state=I.TEXT);if(e.script){if("script"!==e.tagName)return e.script+="</"+e.tagName+">",e.tagName="",void(e.state=I.SCRIPT);P(e,"onscript",e.script),e.script=""}var t=e.tags.length,r=e.tagName;e.strict||(r=r[e.looseCase]());for(var n=r;t--&&e.tags[t].name!==n;)x(e,"Unexpected close tag");if(t<0)return x(e,"Unmatched closing tag: "+e.tagName),e.textNode+="</"+e.tagName+">",void(e.state=I.TEXT);e.tagName=r;for(var i=e.tags.length;i-- >t;){var o=e.tag=e.tags.pop();e.tagName=e.tag.name,P(e,"onclosetag",e.tagName);var u={};for(var l in o.ns)u[l]=o.ns[l];var c=e.tags[e.tags.length-1]||e;e.opt.xmlns&&o.ns!==c.ns&&Object.keys(o.ns).forEach(function(t){var r=o.ns[t];P(e,"onclosenamespace",{prefix:t,uri:r})})}0===t&&(e.closedRoot=!0),e.tagName=e.attribValue=e.attribName="",e.attribList.length=0,e.state=I.TEXT}function U(e,t){"<"===t?(e.state=I.OPEN_WAKA,e.startTagPosition=e.position):S(c,t)||(x(e,"Non-whitespace before first tag."),e.textNode=t,e.state=I.TEXT)}function q(e,t){var r="";return t<e.length&&(r=e.charAt(t)),r}I=t.STATE,String.fromCodePoint||(w=String.fromCharCode,A=Math.floor,C=function(){var e,t,r=[],n=-1,i=arguments.length;if(!i)return"";for(var o="";++n<i;){var u=Number(arguments[n]);if(!isFinite(u)||u<0||u>1114111||A(u)!==u)throw RangeError("Invalid code point: "+u);u<=65535?r.push(u):(e=55296+((u-=65536)>>10),t=u%1024+56320,r.push(e,t)),(n+1===i||r.length>16384)&&(o+=w.apply(null,r),r.length=0)}return o},Object.defineProperty?Object.defineProperty(String,"fromCodePoint",{value:C,configurable:!0,writable:!0}):String.fromCodePoint=C)}(t)}).call(this,r("./node_modules/buffer/index.js").Buffer)},"./node_modules/setimmediate/setImmediate.js":function(e,t,r){(function(e,t){!function(e,r){if(!e.setImmediate){var n,i,o,u,l,c=1,f={},d=!1,h=e.document,p=Object.getPrototypeOf&&Object.getPrototypeOf(e);p=p&&p.setTimeout?p:e,"[object process]"===({}).toString.call(e.process)?n=function(e){t.nextTick(function(){g(e)})}:function(){if(e.postMessage&&!e.importScripts){var t=!0,r=e.onmessage;return e.onmessage=function(){t=!1},e.postMessage("","*"),e.onmessage=r,t}}()?(u="setImmediate$"+Math.random()+"$",l=function(t){t.source===e&&"string"==typeof t.data&&0===t.data.indexOf(u)&&g(+t.data.slice(u.length))},e.addEventListener?e.addEventListener("message",l,!1):e.attachEvent("onmessage",l),n=function(t){e.postMessage(u+t,"*")}):e.MessageChannel?((o=new MessageChannel).port1.onmessage=function(e){g(e.data)},n=function(e){o.port2.postMessage(e)}):h&&"onreadystatechange"in h.createElement("script")?(i=h.documentElement,n=function(e){var t=h.createElement("script");t.onreadystatechange=function(){g(e),t.onreadystatechange=null,i.removeChild(t),t=null},i.appendChild(t)}):n=function(e){setTimeout(g,0,e)},p.setImmediate=function(e){"function"!=typeof e&&(e=Function(""+e));for(var t=Array(arguments.length-1),r=0;r<t.length;r++)t[r]=arguments[r+1];var i={callback:e,args:t};return f[c]=i,n(c),c++},p.clearImmediate=m}function m(e){delete f[e]}function g(e){if(d)setTimeout(g,0,e);else{var t=f[e];if(t){d=!0;try{!function(e){var t=e.callback,r=e.args;switch(r.length){case 0:t();break;case 1:t(r[0]);break;case 2:t(r[0],r[1]);break;case 3:t(r[0],r[1],r[2]);break;default:t.apply(void 0,r)}}(t)}finally{m(e),d=!1}}}}}("undefined"==typeof self?void 0===e?this:e:self)}).call(this,r("./node_modules/webpack/buildin/global.js"),r("./node_modules/process/browser.js"))},"./node_modules/stream-browserify/index.js":function(e,t,r){e.exports=i;var n=r("./node_modules/events/events.js").EventEmitter;function i(){n.call(this)}r("./node_modules/inherits/inherits_browser.js")(i,n),i.Readable=r("./node_modules/readable-stream/readable-browser.js"),i.Writable=r("./node_modules/readable-stream/writable-browser.js"),i.Duplex=r("./node_modules/readable-stream/duplex-browser.js"),i.Transform=r("./node_modules/readable-stream/transform.js"),i.PassThrough=r("./node_modules/readable-stream/passthrough.js"),i.Stream=i,i.prototype.pipe=function(e,t){var r=this;function i(t){e.writable&&!1===e.write(t)&&r.pause&&r.pause()}function o(){r.readable&&r.resume&&r.resume()}r.on("data",i),e.on("drain",o),e._isStdio||t&&!1===t.end||(r.on("end",l),r.on("close",c));var u=!1;function l(){u||(u=!0,e.end())}function c(){u||(u=!0,"function"==typeof e.destroy&&e.destroy())}function f(e){if(d(),0===n.listenerCount(this,"error"))throw e}function d(){r.removeListener("data",i),e.removeListener("drain",o),r.removeListener("end",l),r.removeListener("close",c),r.removeListener("error",f),e.removeListener("error",f),r.removeListener("end",d),r.removeListener("close",d),e.removeListener("close",d)}return r.on("error",f),e.on("error",f),r.on("end",d),r.on("close",d),e.on("close",d),e.emit("pipe",r),e}},"./node_modules/string_decoder/lib/string_decoder.js":function(e,t,r){var n=r("./node_modules/safe-buffer/index.js").Buffer,i=n.isEncoding||function(e){switch((e=""+e)&&e.toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":case"raw":return!0;default:return!1}};function o(e){var t;switch(this.encoding=function(e){var t=function(e){if(!e)return"utf8";for(var t;;)switch(e){case"utf8":case"utf-8":return"utf8";case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return"utf16le";case"latin1":case"binary":return"latin1";case"base64":case"ascii":case"hex":return e;default:if(t)return;e=(""+e).toLowerCase(),t=!0}}(e);if("string"!=typeof t&&(n.isEncoding===i||!i(e)))throw Error("Unknown encoding: "+e);return t||e}(e),this.encoding){case"utf16le":this.text=c,this.end=f,t=4;break;case"utf8":this.fillLast=l,t=4;break;case"base64":this.text=d,this.end=h,t=3;break;default:return this.write=p,void(this.end=m)}this.lastNeed=0,this.lastTotal=0,this.lastChar=n.allocUnsafe(t)}function u(e){return e<=127?0:e>>5==6?2:e>>4==14?3:e>>3==30?4:e>>6==2?-1:-2}function l(e){var t=this.lastTotal-this.lastNeed,r=function(e,t,r){if(128!=(192&t[0]))return e.lastNeed=0,"�";if(e.lastNeed>1&&t.length>1){if(128!=(192&t[1]))return e.lastNeed=1,"�";if(e.lastNeed>2&&t.length>2&&128!=(192&t[2]))return e.lastNeed=2,"�"}}(this,e);return void 0!==r?r:this.lastNeed<=e.length?(e.copy(this.lastChar,t,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal)):(e.copy(this.lastChar,t,0,e.length),void(this.lastNeed-=e.length))}function c(e,t){if((e.length-t)%2==0){var r=e.toString("utf16le",t);if(r){var n=r.charCodeAt(r.length-1);if(n>=55296&&n<=56319)return this.lastNeed=2,this.lastTotal=4,this.lastChar[0]=e[e.length-2],this.lastChar[1]=e[e.length-1],r.slice(0,-1)}return r}return this.lastNeed=1,this.lastTotal=2,this.lastChar[0]=e[e.length-1],e.toString("utf16le",t,e.length-1)}function f(e){var t=e&&e.length?this.write(e):"";if(this.lastNeed){var r=this.lastTotal-this.lastNeed;return t+this.lastChar.toString("utf16le",0,r)}return t}function d(e,t){var r=(e.length-t)%3;return 0===r?e.toString("base64",t):(this.lastNeed=3-r,this.lastTotal=3,1===r?this.lastChar[0]=e[e.length-1]:(this.lastChar[0]=e[e.length-2],this.lastChar[1]=e[e.length-1]),e.toString("base64",t,e.length-r))}function h(e){var t=e&&e.length?this.write(e):"";return this.lastNeed?t+this.lastChar.toString("base64",0,3-this.lastNeed):t}function p(e){return e.toString(this.encoding)}function m(e){return e&&e.length?this.write(e):""}t.StringDecoder=o,o.prototype.write=function(e){var t,r;if(0===e.length)return"";if(this.lastNeed){if(void 0===(t=this.fillLast(e)))return"";r=this.lastNeed,this.lastNeed=0}else r=0;return r<e.length?t?t+this.text(e,r):this.text(e,r):t||""},o.prototype.end=function(e){var t=e&&e.length?this.write(e):"";return this.lastNeed?t+"�":t},o.prototype.text=function(e,t){var r=function(e,t,r){var n=t.length-1;if(n<r)return 0;var i=u(t[n]);return i>=0?(i>0&&(e.lastNeed=i-1),i):--n<r||-2===i?0:(i=u(t[n]))>=0?(i>0&&(e.lastNeed=i-2),i):--n<r||-2===i?0:(i=u(t[n]))>=0?(i>0&&(2===i?i=0:e.lastNeed=i-3),i):0}(this,e,t);if(!this.lastNeed)return e.toString("utf8",t);this.lastTotal=r;var n=e.length-(r-this.lastNeed);return e.copy(this.lastChar,0,n),e.toString("utf8",t,n)},o.prototype.fillLast=function(e){if(this.lastNeed<=e.length)return e.copy(this.lastChar,this.lastTotal-this.lastNeed,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal);e.copy(this.lastChar,this.lastTotal-this.lastNeed,0,e.length),this.lastNeed-=e.length}},"./node_modules/timers-browserify/main.js":function(e,t,r){(function(e){var n=void 0!==e&&e||"undefined"!=typeof self&&self||window,i=Function.prototype.apply;function o(e,t){this._id=e,this._clearFn=t}t.setTimeout=function(){return new o(i.call(setTimeout,n,arguments),clearTimeout)},t.setInterval=function(){return new o(i.call(setInterval,n,arguments),clearInterval)},t.clearTimeout=t.clearInterval=function(e){e&&e.close()},o.prototype.unref=o.prototype.ref=function(){},o.prototype.close=function(){this._clearFn.call(n,this._id)},t.enroll=function(e,t){clearTimeout(e._idleTimeoutId),e._idleTimeout=t},t.unenroll=function(e){clearTimeout(e._idleTimeoutId),e._idleTimeout=-1},t._unrefActive=t.active=function(e){clearTimeout(e._idleTimeoutId);var t=e._idleTimeout;t>=0&&(e._idleTimeoutId=setTimeout(function(){e._onTimeout&&e._onTimeout()},t))},r("./node_modules/setimmediate/setImmediate.js"),t.setImmediate="undefined"!=typeof self&&self.setImmediate||void 0!==e&&e.setImmediate||this&&this.setImmediate,t.clearImmediate="undefined"!=typeof self&&self.clearImmediate||void 0!==e&&e.clearImmediate||this&&this.clearImmediate}).call(this,r("./node_modules/webpack/buildin/global.js"))},"./node_modules/ua-parser-js/src/ua-parser.js":function(e,t,r){var n;!function(i,o){var u="function",l="undefined",c="object",f="string",d="model",h="name",p="type",m="vendor",g="version",y="architecture",v="console",b="mobile",_="tablet",T="smarttv",E="wearable",S="embedded",w="Amazon",A="Apple",C="ASUS",I="BlackBerry",O="Browser",R="Chrome",P="Firefox",k="Google",D="Huawei",N="Microsoft",L="Motorola",x="Opera",j="Samsung",M="Sharp",F="Sony",B="Xiaomi",U="Zebra",q="Facebook",H=function(e){for(var t={},r=0;r<e.length;r++)t[e[r].toUpperCase()]=e[r];return t},V=function(e,t){return typeof e===f&&-1!==G(t).indexOf(G(e))},G=function(e){return e.toLowerCase()},Y=function(e,t){if(typeof e===f)return e=e.replace(/^\s\s*/,"").replace(/\s\s*$/,""),typeof t===l?e:e.substring(0,350)},z=function(e,t){for(var r,n,i,l,f,d,h=0;h<t.length&&!f;){var p=t[h],m=t[h+1];for(r=n=0;r<p.length&&!f;)if(f=p[r++].exec(e))for(i=0;i<m.length;i++)d=f[++n],typeof(l=m[i])===c&&l.length>0?2===l.length?typeof l[1]==u?this[l[0]]=l[1].call(this,d):this[l[0]]=l[1]:3===l.length?typeof l[1]!==u||l[1].exec&&l[1].test?this[l[0]]=d?d.replace(l[1],l[2]):o:this[l[0]]=d?l[1].call(this,d,l[2]):o:4===l.length&&(this[l[0]]=d?l[3].call(this,d.replace(l[1],l[2])):o):this[l]=d||o;h+=2}},K=function(e,t){for(var r in t)if(typeof t[r]===c&&t[r].length>0){for(var n=0;n<t[r].length;n++)if(V(t[r][n],e))return"?"===r?o:r}else if(V(t[r],e))return"?"===r?o:r;return e},W={ME:"4.90","NT 3.11":"NT3.51","NT 4.0":"NT4.0",2e3:"NT 5.0",XP:["NT 5.1","NT 5.2"],Vista:"NT 6.0",7:"NT 6.1",8:"NT 6.2",8.1:"NT 6.3",10:["NT 6.4","NT 10.0"],RT:"ARM"},X={browser:[[/\b(?:crmo|crios)\/([\w\.]+)/i],[g,[h,"Chrome"]],[/edg(?:e|ios|a)?\/([\w\.]+)/i],[g,[h,"Edge"]],[/(opera mini)\/([-\w\.]+)/i,/(opera [mobiletab]{3,6})\b.+version\/([-\w\.]+)/i,/(opera)(?:.+version\/|[\/ ]+)([\w\.]+)/i],[h,g],[/opios[\/ ]+([\w\.]+)/i],[g,[h,x+" Mini"]],[/\bopr\/([\w\.]+)/i],[g,[h,x]],[/(kindle)\/([\w\.]+)/i,/(lunascape|maxthon|netfront|jasmine|blazer)[\/ ]?([\w\.]*)/i,/(avant |iemobile|slim)(?:browser)?[\/ ]?([\w\.]*)/i,/(ba?idubrowser)[\/ ]?([\w\.]+)/i,/(?:ms|\()(ie) ([\w\.]+)/i,/(flock|rockmelt|midori|epiphany|silk|skyfire|ovibrowser|bolt|iron|vivaldi|iridium|phantomjs|bowser|quark|qupzilla|falkon|rekonq|puffin|brave|whale|qqbrowserlite|qq|duckduckgo)\/([-\w\.]+)/i,/(weibo)__([\d\.]+)/i],[h,g],[/(?:\buc? ?browser|(?:juc.+)ucweb)[\/ ]?([\w\.]+)/i],[g,[h,"UC"+O]],[/microm.+\bqbcore\/([\w\.]+)/i,/\bqbcore\/([\w\.]+).+microm/i],[g,[h,"WeChat(Win) Desktop"]],[/micromessenger\/([\w\.]+)/i],[g,[h,"WeChat"]],[/konqueror\/([\w\.]+)/i],[g,[h,"Konqueror"]],[/trident.+rv[: ]([\w\.]{1,9})\b.+like gecko/i],[g,[h,"IE"]],[/yabrowser\/([\w\.]+)/i],[g,[h,"Yandex"]],[/(avast|avg)\/([\w\.]+)/i],[[h,/(.+)/,"$1 Secure "+O],g],[/\bfocus\/([\w\.]+)/i],[g,[h,P+" Focus"]],[/\bopt\/([\w\.]+)/i],[g,[h,x+" Touch"]],[/coc_coc\w+\/([\w\.]+)/i],[g,[h,"Coc Coc"]],[/dolfin\/([\w\.]+)/i],[g,[h,"Dolphin"]],[/coast\/([\w\.]+)/i],[g,[h,x+" Coast"]],[/miuibrowser\/([\w\.]+)/i],[g,[h,"MIUI "+O]],[/fxios\/([-\w\.]+)/i],[g,[h,P]],[/\bqihu|(qi?ho?o?|360)browser/i],[[h,"360 "+O]],[/(oculus|samsung|sailfish|huawei)browser\/([\w\.]+)/i],[[h,/(.+)/,"$1 "+O],g],[/(comodo_dragon)\/([\w\.]+)/i],[[h,/_/g," "],g],[/(electron)\/([\w\.]+) safari/i,/(tesla)(?: qtcarbrowser|\/(20\d\d\.[-\w\.]+))/i,/m?(qqbrowser|baiduboxapp|2345Explorer)[\/ ]?([\w\.]+)/i],[h,g],[/(metasr)[\/ ]?([\w\.]+)/i,/(lbbrowser)/i,/\[(linkedin)app\]/i],[h],[/((?:fban\/fbios|fb_iab\/fb4a)(?!.+fbav)|;fbav\/([\w\.]+);)/i],[[h,q],g],[/safari (line)\/([\w\.]+)/i,/\b(line)\/([\w\.]+)\/iab/i,/(chromium|instagram)[\/ ]([-\w\.]+)/i],[h,g],[/\bgsa\/([\w\.]+) .*safari\//i],[g,[h,"GSA"]],[/headlesschrome(?:\/([\w\.]+)| )/i],[g,[h,R+" Headless"]],[/ wv\).+(chrome)\/([\w\.]+)/i],[[h,R+" WebView"],g],[/droid.+ version\/([\w\.]+)\b.+(?:mobile safari|safari)/i],[g,[h,"Android "+O]],[/(chrome|omniweb|arora|[tizenoka]{5} ?browser)\/v?([\w\.]+)/i],[h,g],[/version\/([\w\.\,]+) .*mobile\/\w+ (safari)/i],[g,[h,"Mobile Safari"]],[/version\/([\w(\.|\,)]+) .*(mobile ?safari|safari)/i],[g,h],[/webkit.+?(mobile ?safari|safari)(\/[\w\.]+)/i],[h,[g,K,{"1.0":"/8",1.2:"/1",1.3:"/3","2.0":"/412","2.0.2":"/416","2.0.3":"/417","2.0.4":"/419","?":"/"}]],[/(webkit|khtml)\/([\w\.]+)/i],[h,g],[/(navigator|netscape\d?)\/([-\w\.]+)/i],[[h,"Netscape"],g],[/mobile vr; rv:([\w\.]+)\).+firefox/i],[g,[h,P+" Reality"]],[/ekiohf.+(flow)\/([\w\.]+)/i,/(swiftfox)/i,/(icedragon|iceweasel|camino|chimera|fennec|maemo browser|minimo|conkeror|klar)[\/ ]?([\w\.\+]+)/i,/(seamonkey|k-meleon|icecat|iceape|firebird|phoenix|palemoon|basilisk|waterfox)\/([-\w\.]+)$/i,/(firefox)\/([\w\.]+)/i,/(mozilla)\/([\w\.]+) .+rv\:.+gecko\/\d+/i,/(polaris|lynx|dillo|icab|doris|amaya|w3m|netsurf|sleipnir|obigo|mosaic|(?:go|ice|up)[\. ]?browser)[-\/ ]?v?([\w\.]+)/i,/(links) \(([\w\.]+)/i],[h,g]],cpu:[[/(?:(amd|x(?:(?:86|64)[-_])?|wow|win)64)[;\)]/i],[[y,"amd64"]],[/(ia32(?=;))/i],[[y,G]],[/((?:i[346]|x)86)[;\)]/i],[[y,"ia32"]],[/\b(aarch64|arm(v?8e?l?|_?64))\b/i],[[y,"arm64"]],[/\b(arm(?:v[67])?ht?n?[fl]p?)\b/i],[[y,"armhf"]],[/windows (ce|mobile); ppc;/i],[[y,"arm"]],[/((?:ppc|powerpc)(?:64)?)(?: mac|;|\))/i],[[y,/ower/,"",G]],[/(sun4\w)[;\)]/i],[[y,"sparc"]],[/((?:avr32|ia64(?=;))|68k(?=\))|\barm(?=v(?:[1-7]|[5-7]1)l?|;|eabi)|(?=atmel )avr|(?:irix|mips|sparc)(?:64)?\b|pa-risc)/i],[[y,G]]],device:[[/\b(sch-i[89]0\d|shw-m380s|sm-[ptx]\w{2,4}|gt-[pn]\d{2,4}|sgh-t8[56]9|nexus 10)/i],[d,[m,j],[p,_]],[/\b((?:s[cgp]h|gt|sm)-\w+|galaxy nexus)/i,/samsung[- ]([-\w]+)/i,/sec-(sgh\w+)/i],[d,[m,j],[p,b]],[/\((ip(?:hone|od)[\w ]*);/i],[d,[m,A],[p,b]],[/\((ipad);[-\w\),; ]+apple/i,/applecoremedia\/[\w\.]+ \((ipad)/i,/\b(ipad)\d\d?,\d\d?[;\]].+ios/i],[d,[m,A],[p,_]],[/\b((?:ag[rs][23]?|bah2?|sht?|btv)-a?[lw]\d{2})\b(?!.+d\/s)/i],[d,[m,D],[p,_]],[/(?:huawei|honor)([-\w ]+)[;\)]/i,/\b(nexus 6p|\w{2,4}e?-[atu]?[ln][\dx][012359c][adn]?)\b(?!.+d\/s)/i],[d,[m,D],[p,b]],[/\b(poco[\w ]+)(?: bui|\))/i,/\b; (\w+) build\/hm\1/i,/\b(hm[-_ ]?note?[_ ]?(?:\d\w)?) bui/i,/\b(redmi[\-_ ]?(?:note|k)?[\w_ ]+)(?: bui|\))/i,/\b(mi[-_ ]?(?:a\d|one|one[_ ]plus|note lte|max|cc)?[_ ]?(?:\d?\w?)[_ ]?(?:plus|se|lite)?)(?: bui|\))/i],[[d,/_/g," "],[m,B],[p,b]],[/\b(mi[-_ ]?(?:pad)(?:[\w_ ]+))(?: bui|\))/i],[[d,/_/g," "],[m,B],[p,_]],[/; (\w+) bui.+ oppo/i,/\b(cph[12]\d{3}|p(?:af|c[al]|d\w|e[ar])[mt]\d0|x9007|a101op)\b/i],[d,[m,"OPPO"],[p,b]],[/vivo (\w+)(?: bui|\))/i,/\b(v[12]\d{3}\w?[at])(?: bui|;)/i],[d,[m,"Vivo"],[p,b]],[/\b(rmx[12]\d{3})(?: bui|;|\))/i],[d,[m,"Realme"],[p,b]],[/\b(milestone|droid(?:[2-4x]| (?:bionic|x2|pro|razr))?:?( 4g)?)\b[\w ]+build\//i,/\bmot(?:orola)?[- ](\w*)/i,/((?:moto[\w\(\) ]+|xt\d{3,4}|nexus 6)(?= bui|\)))/i],[d,[m,L],[p,b]],[/\b(mz60\d|xoom[2 ]{0,2}) build\//i],[d,[m,L],[p,_]],[/((?=lg)?[vl]k\-?\d{3}) bui| 3\.[-\w; ]{10}lg?-([06cv9]{3,4})/i],[d,[m,"LG"],[p,_]],[/(lm(?:-?f100[nv]?|-[\w\.]+)(?= bui|\))|nexus [45])/i,/\blg[-e;\/ ]+((?!browser|netcast|android tv)\w+)/i,/\blg-?([\d\w]+) bui/i],[d,[m,"LG"],[p,b]],[/(ideatab[-\w ]+)/i,/lenovo ?(s[56]000[-\w]+|tab(?:[\w ]+)|yt[-\d\w]{6}|tb[-\d\w]{6})/i],[d,[m,"Lenovo"],[p,_]],[/(?:maemo|nokia).*(n900|lumia \d+)/i,/nokia[-_ ]?([-\w\.]*)/i],[[d,/_/g," "],[m,"Nokia"],[p,b]],[/(pixel c)\b/i],[d,[m,k],[p,_]],[/droid.+; (pixel[\daxl ]{0,6})(?: bui|\))/i],[d,[m,k],[p,b]],[/droid.+ (a?\d[0-2]{2}so|[c-g]\d{4}|so[-gl]\w+|xq-a\w[4-7][12])(?= bui|\).+chrome\/(?![1-6]{0,1}\d\.))/i],[d,[m,F],[p,b]],[/sony tablet [ps]/i,/\b(?:sony)?sgp\w+(?: bui|\))/i],[[d,"Xperia Tablet"],[m,F],[p,_]],[/ (kb2005|in20[12]5|be20[12][59])\b/i,/(?:one)?(?:plus)? (a\d0\d\d)(?: b|\))/i],[d,[m,"OnePlus"],[p,b]],[/(alexa)webm/i,/(kf[a-z]{2}wi)( bui|\))/i,/(kf[a-z]+)( bui|\)).+silk\//i],[d,[m,w],[p,_]],[/((?:sd|kf)[0349hijorstuw]+)( bui|\)).+silk\//i],[[d,/(.+)/g,"Fire Phone $1"],[m,w],[p,b]],[/(playbook);[-\w\),; ]+(rim)/i],[d,m,[p,_]],[/\b((?:bb[a-f]|st[hv])100-\d)/i,/\(bb10; (\w+)/i],[d,[m,I],[p,b]],[/(?:\b|asus_)(transfo[prime ]{4,10} \w+|eeepc|slider \w+|nexus 7|padfone|p00[cj])/i],[d,[m,C],[p,_]],[/ (z[bes]6[027][012][km][ls]|zenfone \d\w?)\b/i],[d,[m,C],[p,b]],[/(nexus 9)/i],[d,[m,"HTC"],[p,_]],[/(htc)[-;_ ]{1,2}([\w ]+(?=\)| bui)|\w+)/i,/(zte)[- ]([\w ]+?)(?: bui|\/|\))/i,/(alcatel|geeksphone|nexian|panasonic|sony(?!-bra))[-_ ]?([-\w]*)/i],[m,[d,/_/g," "],[p,b]],[/droid.+; ([ab][1-7]-?[0178a]\d\d?)/i],[d,[m,"Acer"],[p,_]],[/droid.+; (m[1-5] note) bui/i,/\bmz-([-\w]{2,})/i],[d,[m,"Meizu"],[p,b]],[/\b(sh-?[altvz]?\d\d[a-ekm]?)/i],[d,[m,M],[p,b]],[/(blackberry|benq|palm(?=\-)|sonyericsson|acer|asus|dell|meizu|motorola|polytron)[-_ ]?([-\w]*)/i,/(hp) ([\w ]+\w)/i,/(asus)-?(\w+)/i,/(microsoft); (lumia[\w ]+)/i,/(lenovo)[-_ ]?([-\w]+)/i,/(jolla)/i,/(oppo) ?([\w ]+) bui/i],[m,d,[p,b]],[/(archos) (gamepad2?)/i,/(hp).+(touchpad(?!.+tablet)|tablet)/i,/(kindle)\/([\w\.]+)/i,/(nook)[\w ]+build\/(\w+)/i,/(dell) (strea[kpr\d ]*[\dko])/i,/(le[- ]+pan)[- ]+(\w{1,9}) bui/i,/(trinity)[- ]*(t\d{3}) bui/i,/(gigaset)[- ]+(q\w{1,9}) bui/i,/(vodafone) ([\w ]+)(?:\)| bui)/i],[m,d,[p,_]],[/(surface duo)/i],[d,[m,N],[p,_]],[/droid [\d\.]+; (fp\du?)(?: b|\))/i],[d,[m,"Fairphone"],[p,b]],[/(u304aa)/i],[d,[m,"AT&T"],[p,b]],[/\bsie-(\w*)/i],[d,[m,"Siemens"],[p,b]],[/\b(rct\w+) b/i],[d,[m,"RCA"],[p,_]],[/\b(venue[\d ]{2,7}) b/i],[d,[m,"Dell"],[p,_]],[/\b(q(?:mv|ta)\w+) b/i],[d,[m,"Verizon"],[p,_]],[/\b(?:barnes[& ]+noble |bn[rt])([\w\+ ]*) b/i],[d,[m,"Barnes & Noble"],[p,_]],[/\b(tm\d{3}\w+) b/i],[d,[m,"NuVision"],[p,_]],[/\b(k88) b/i],[d,[m,"ZTE"],[p,_]],[/\b(nx\d{3}j) b/i],[d,[m,"ZTE"],[p,b]],[/\b(gen\d{3}) b.+49h/i],[d,[m,"Swiss"],[p,b]],[/\b(zur\d{3}) b/i],[d,[m,"Swiss"],[p,_]],[/\b((zeki)?tb.*\b) b/i],[d,[m,"Zeki"],[p,_]],[/\b([yr]\d{2}) b/i,/\b(dragon[- ]+touch |dt)(\w{5}) b/i],[[m,"Dragon Touch"],d,[p,_]],[/\b(ns-?\w{0,9}) b/i],[d,[m,"Insignia"],[p,_]],[/\b((nxa|next)-?\w{0,9}) b/i],[d,[m,"NextBook"],[p,_]],[/\b(xtreme\_)?(v(1[045]|2[015]|[3469]0|7[05])) b/i],[[m,"Voice"],d,[p,b]],[/\b(lvtel\-)?(v1[12]) b/i],[[m,"LvTel"],d,[p,b]],[/\b(ph-1) /i],[d,[m,"Essential"],[p,b]],[/\b(v(100md|700na|7011|917g).*\b) b/i],[d,[m,"Envizen"],[p,_]],[/\b(trio[-\w\. ]+) b/i],[d,[m,"MachSpeed"],[p,_]],[/\btu_(1491) b/i],[d,[m,"Rotor"],[p,_]],[/(shield[\w ]+) b/i],[d,[m,"Nvidia"],[p,_]],[/(sprint) (\w+)/i],[m,d,[p,b]],[/(kin\.[onetw]{3})/i],[[d,/\./g," "],[m,N],[p,b]],[/droid.+; (cc6666?|et5[16]|mc[239][23]x?|vc8[03]x?)\)/i],[d,[m,U],[p,_]],[/droid.+; (ec30|ps20|tc[2-8]\d[kx])\)/i],[d,[m,U],[p,b]],[/(ouya)/i,/(nintendo) ([wids3utch]+)/i],[m,d,[p,v]],[/droid.+; (shield) bui/i],[d,[m,"Nvidia"],[p,v]],[/(playstation [345portablevi]+)/i],[d,[m,F],[p,v]],[/\b(xbox(?: one)?(?!; xbox))[\); ]/i],[d,[m,N],[p,v]],[/smart-tv.+(samsung)/i],[m,[p,T]],[/hbbtv.+maple;(\d+)/i],[[d,/^/,"SmartTV"],[m,j],[p,T]],[/(nux; netcast.+smarttv|lg (netcast\.tv-201\d|android tv))/i],[[m,"LG"],[p,T]],[/(apple) ?tv/i],[m,[d,A+" TV"],[p,T]],[/crkey/i],[[d,R+"cast"],[m,k],[p,T]],[/droid.+aft(\w)( bui|\))/i],[d,[m,w],[p,T]],[/\(dtv[\);].+(aquos)/i,/(aquos-tv[\w ]+)\)/i],[d,[m,M],[p,T]],[/(bravia[\w ]+)( bui|\))/i],[d,[m,F],[p,T]],[/(mitv-\w{5}) bui/i],[d,[m,B],[p,T]],[/\b(roku)[\dx]*[\)\/]((?:dvp-)?[\d\.]*)/i,/hbbtv\/\d+\.\d+\.\d+ +\([\w ]*; *(\w[^;]*);([^;]*)/i],[[m,Y],[d,Y],[p,T]],[/\b(android tv|smart[- ]?tv|opera tv|tv; rv:)\b/i],[[p,T]],[/((pebble))app/i],[m,d,[p,E]],[/droid.+; (glass) \d/i],[d,[m,k],[p,E]],[/droid.+; (wt63?0{2,3})\)/i],[d,[m,U],[p,E]],[/(quest( 2)?)/i],[d,[m,q],[p,E]],[/(tesla)(?: qtcarbrowser|\/[-\w\.]+)/i],[m,[p,S]],[/droid .+?; ([^;]+?)(?: bui|\) applew).+? mobile safari/i],[d,[p,b]],[/droid .+?; ([^;]+?)(?: bui|\) applew).+?(?! mobile) safari/i],[d,[p,_]],[/\b((tablet|tab)[;\/]|focus\/\d(?!.+mobile))/i],[[p,_]],[/(phone|mobile(?:[;\/]| [ \w\/\.]*safari)|pda(?=.+windows ce))/i],[[p,b]],[/(android[-\w\. ]{0,9});.+buil/i],[d,[m,"Generic"]]],engine:[[/windows.+ edge\/([\w\.]+)/i],[g,[h,"EdgeHTML"]],[/webkit\/537\.36.+chrome\/(?!27)([\w\.]+)/i],[g,[h,"Blink"]],[/(presto)\/([\w\.]+)/i,/(webkit|trident|netfront|netsurf|amaya|lynx|w3m|goanna)\/([\w\.]+)/i,/ekioh(flow)\/([\w\.]+)/i,/(khtml|tasman|links)[\/ ]\(?([\w\.]+)/i,/(icab)[\/ ]([23]\.[\d\.]+)/i],[h,g],[/rv\:([\w\.]{1,9})\b.+(gecko)/i],[g,h]],os:[[/microsoft (windows) (vista|xp)/i],[h,g],[/(windows) nt 6\.2; (arm)/i,/(windows (?:phone(?: os)?|mobile))[\/ ]?([\d\.\w ]*)/i,/(windows)[\/ ]?([ntce\d\. ]+\w)(?!.+xbox)/i],[h,[g,K,W]],[/(win(?=3|9|n)|win 9x )([nt\d\.]+)/i],[[h,"Windows"],[g,K,W]],[/ip[honead]{2,4}\b(?:.*os ([\w]+) like mac|; opera)/i,/cfnetwork\/.+darwin/i],[[g,/_/g,"."],[h,"iOS"]],[/(mac os x) ?([\w\. ]*)/i,/(macintosh|mac_powerpc\b)(?!.+haiku)/i],[[h,"Mac OS"],[g,/_/g,"."]],[/droid ([\w\.]+)\b.+(android[- ]x86|harmonyos)/i],[g,h],[/(android|webos|qnx|bada|rim tablet os|maemo|meego|sailfish)[-\/ ]?([\w\.]*)/i,/(blackberry)\w*\/([\w\.]*)/i,/(tizen|kaios)[\/ ]([\w\.]+)/i,/\((series40);/i],[h,g],[/\(bb(10);/i],[g,[h,I]],[/(?:symbian ?os|symbos|s60(?=;)|series60)[-\/ ]?([\w\.]*)/i],[g,[h,"Symbian"]],[/mozilla\/[\d\.]+ \((?:mobile|tablet|tv|mobile; [\w ]+); rv:.+ gecko\/([\w\.]+)/i],[g,[h,P+" OS"]],[/web0s;.+rt(tv)/i,/\b(?:hp)?wos(?:browser)?\/([\w\.]+)/i],[g,[h,"webOS"]],[/crkey\/([\d\.]+)/i],[g,[h,R+"cast"]],[/(cros) [\w]+ ([\w\.]+\w)/i],[[h,"Chromium OS"],g],[/(nintendo|playstation) ([wids345portablevuch]+)/i,/(xbox); +xbox ([^\);]+)/i,/\b(joli|palm)\b ?(?:os)?\/?([\w\.]*)/i,/(mint)[\/\(\) ]?(\w*)/i,/(mageia|vectorlinux)[; ]/i,/([kxln]?ubuntu|debian|suse|opensuse|gentoo|arch(?= linux)|slackware|fedora|mandriva|centos|pclinuxos|red ?hat|zenwalk|linpus|raspbian|plan 9|minix|risc os|contiki|deepin|manjaro|elementary os|sabayon|linspire)(?: gnu\/linux)?(?: enterprise)?(?:[- ]linux)?(?:-gnu)?[-\/ ]?(?!chrom|package)([-\w\.]*)/i,/(hurd|linux) ?([\w\.]*)/i,/(gnu) ?([\w\.]*)/i,/\b([-frentopcghs]{0,5}bsd|dragonfly)[\/ ]?(?!amd|[ix346]{1,2}86)([\w\.]*)/i,/(haiku) (\w+)/i],[h,g],[/(sunos) ?([\w\.\d]*)/i],[[h,"Solaris"],g],[/((?:open)?solaris)[-\/ ]?([\w\.]*)/i,/(aix) ((\d)(?=\.|\)| )[\w\.])*/i,/\b(beos|os\/2|amigaos|morphos|openvms|fuchsia|hp-ux)/i,/(unix) ?([\w\.]*)/i],[h,g]]},Q=function(e,t){if(typeof e===c&&(t=e,e=o),!(this instanceof Q))return new Q(e,t).getResult();var r=e||(typeof i!==l&&i.navigator&&i.navigator.userAgent?i.navigator.userAgent:""),n=t?function(e,t){var r={};for(var n in e)t[n]&&t[n].length%2==0?r[n]=t[n].concat(e[n]):r[n]=e[n];return r}(X,t):X;return this.getBrowser=function(){var e,t={};return t[h]=o,t[g]=o,z.call(t,r,n.browser),t.major=typeof(e=t.version)===f?e.replace(/[^\d\.]/g,"").split(".")[0]:o,t},this.getCPU=function(){var e={};return e[y]=o,z.call(e,r,n.cpu),e},this.getDevice=function(){var e={};return e[m]=o,e[d]=o,e[p]=o,z.call(e,r,n.device),e},this.getEngine=function(){var e={};return e[h]=o,e[g]=o,z.call(e,r,n.engine),e},this.getOS=function(){var e={};return e[h]=o,e[g]=o,z.call(e,r,n.os),e},this.getResult=function(){return{ua:this.getUA(),browser:this.getBrowser(),engine:this.getEngine(),os:this.getOS(),device:this.getDevice(),cpu:this.getCPU()}},this.getUA=function(){return r},this.setUA=function(e){return r=typeof e===f&&e.length>350?Y(e,350):e,this},this.setUA(r),this};Q.VERSION="1.0.32",Q.BROWSER=H([h,g,"major"]),Q.CPU=H([y]),Q.DEVICE=H([d,m,p,v,b,T,_,E,S]),Q.ENGINE=Q.OS=H([h,g]),typeof t!==l?(typeof e!==l&&e.exports&&(t=e.exports=Q),t.UAParser=Q):r("./node_modules/webpack/buildin/amd-options.js")?(n=(function(){return Q}).call(t,r,t,e))===o||(e.exports=n):typeof i!==l&&(i.UAParser=Q);var $=typeof i!==l&&(i.jQuery||i.Zepto);if($&&!$.ua){var J=new Q;$.ua=J.getResult(),$.ua.get=function(){return J.getUA()},$.ua.set=function(e){J.setUA(e);var t=J.getResult();for(var r in t)$.ua[r]=t[r]}}}("object"==typeof window?window:this)},"./node_modules/util-deprecate/browser.js":function(e,t,r){(function(t){function r(e){try{if(!t.localStorage)return!1}catch(e){return!1}var r=t.localStorage[e];return null!=r&&"true"===String(r).toLowerCase()}e.exports=function(e,t){if(r("noDeprecation"))return e;var n=!1;return function(){if(!n){if(r("throwDeprecation"))throw Error(t);r("traceDeprecation")?console.trace(t):console.warn(t),n=!0}return e.apply(this,arguments)}}}).call(this,r("./node_modules/webpack/buildin/global.js"))},"./node_modules/webpack/buildin/amd-options.js":function(e,t){(function(t){e.exports=t}).call(this,{})},"./node_modules/webpack/buildin/global.js":function(e,t){var r;r=function(){return this}();try{r=r||Function("return this")()}catch(e){"object"==typeof window&&(r=window)}e.exports=r},"./src/core/Debug.js":function(e,t,r){r.r(t);var n=r("./src/core/EventBus.js"),i=r("./src/core/events/Events.js"),o=r("./src/core/FactoryMaker.js");function u(e){e=e||{};var t,r,o,u=this.context,l=Object(n.default)(u).getInstance(),c=e.settings,f=[];function d(e){return e&&e.bind?e.bind(window.console):window.console.log.bind(window.console)}function h(){for(var e=arguments.length,t=Array(e),r=0;r<e;r++)t[r]=arguments[r];v.apply(void 0,[1,this].concat(t))}function p(){for(var e=arguments.length,t=Array(e),r=0;r<e;r++)t[r]=arguments[r];v.apply(void 0,[2,this].concat(t))}function m(){for(var e=arguments.length,t=Array(e),r=0;r<e;r++)t[r]=arguments[r];v.apply(void 0,[3,this].concat(t))}function g(){for(var e=arguments.length,t=Array(e),r=0;r<e;r++)t[r]=arguments[r];v.apply(void 0,[4,this].concat(t))}function y(){for(var e=arguments.length,t=Array(e),r=0;r<e;r++)t[r]=arguments[r];v.apply(void 0,[5,this].concat(t))}function v(e,n){var u="";t&&(u+="["+((new Date).getTime()-o)+"]"),r&&n&&n.getClassName&&(u+="["+n.getClassName()+"]",n.getType&&(u+="["+n.getType()+"]")),u.length>0&&(u+=" ");for(var d=arguments.length,h=Array(d>2?d-2:0),p=2;p<d;p++)h[p-2]=arguments[p];Array.apply(null,h).forEach(function(e){u+=e+" "}),f[e]&&c.get().debug.logLevel>=e&&f[e](u),c&&c.get().debug.dispatchEvent&&l.trigger(i.default.LOG,{message:u,level:e})}return t=!0,r=!0,o=(new Date).getTime(),"undefined"!=typeof window&&window.console&&(f[1]=d(window.console.error),f[2]=d(window.console.error),f[3]=d(window.console.warn),f[4]=d(window.console.info),f[5]=d(window.console.debug)),{getLogger:function(e){return{fatal:h.bind(e),error:p.bind(e),warn:m.bind(e),info:g.bind(e),debug:y.bind(e)}},setLogTimestampVisible:function(e){t=e},setCalleeNameVisible:function(e){r=e}}}u.__dashjs_factory_name="Debug";var l=o.default.getSingletonFactory(u);l.LOG_LEVEL_NONE=0,l.LOG_LEVEL_FATAL=1,l.LOG_LEVEL_ERROR=2,l.LOG_LEVEL_WARNING=3,l.LOG_LEVEL_INFO=4,l.LOG_LEVEL_DEBUG=5,o.default.updateSingletonFactory(u.__dashjs_factory_name,l),t.default=l},"./src/core/EventBus.js":function(e,t,r){r.r(t);var n=r("./src/core/FactoryMaker.js"),i=r("./src/streaming/MediaPlayerEvents.js");function o(){var e={};function t(t,r,n){var i=-1;return e[t]&&e[t].some(function(e,t){if(e&&e.callback===r&&(!n||n===e.scope))return i=t,!0}),i}return{on:function(r,n,i){var o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};if(!r)throw Error("event type cannot be null or undefined");if(!n||"function"!=typeof n)throw Error("listener must be a function: "+n);var u=o.priority||0;if(!(t(r,n,i)>=0)){e[r]=e[r]||[];var l={callback:n,scope:i,priority:u};i&&i.getStreamId&&(l.streamId=i.getStreamId()),i&&i.getType&&(l.mediaType=i.getType()),o&&o.mode&&(l.mode=o.mode),e[r].some(function(t,n){if(t&&u>t.priority)return e[r].splice(n,0,l),!0})||e[r].push(l)}},off:function(r,n,i){if(r&&n&&e[r]){var o=t(r,n,i);o<0||(e[r][o]=null)}},trigger:function(t){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if(t&&e[t]){if((r=r||{}).hasOwnProperty("type"))throw Error("'type' is a reserved word for event dispatching");r.type=t,n.streamId&&(r.streamId=n.streamId),n.mediaType&&(r.mediaType=n.mediaType),e[t].filter(function(e){return!(!e||n.streamId&&e.streamId&&e.streamId!==n.streamId||n.mediaType&&e.mediaType&&e.mediaType!==n.mediaType||n.mode&&e.mode&&e.mode!==n.mode||!e.mode&&n.mode&&n.mode===i.default.EVENT_MODE_ON_RECEIVE)}).forEach(function(e){return e&&e.callback.call(e.scope,r)})}},reset:function(){e={}}}}o.__dashjs_factory_name="EventBus";var u=n.default.getSingletonFactory(o);u.EVENT_PRIORITY_LOW=0,u.EVENT_PRIORITY_HIGH=5e3,n.default.updateSingletonFactory(o.__dashjs_factory_name,u),t.default=u},"./src/core/FactoryMaker.js":function(e,t,r){r.r(t);var n=function(){var e,t=[],r={},n={};function i(e,r){for(var n in t){var i=t[n];if(i.context===e&&i.name===r)return i.instance}return null}function o(t,r,n){var i,o=t.__dashjs_factory_name,u=r[o];if(u){var l=u.instance;if(!u.override)return l.apply({context:r,factory:e},n);for(var c in i=t.apply({context:r},n),l=l.apply({context:r,factory:e,parent:i},n))i.hasOwnProperty(c)&&(i[c]=l[c])}else i=t.apply({context:r},n);return i.getClassName=function(){return o},i}return e={extend:function(e,t,r,n){!n[e]&&t&&(n[e]={instance:t,override:r})},getSingletonInstance:i,setSingletonInstance:function(e,r,n){for(var i in t){var o=t[i];if(o.context===e&&o.name===r)return void(t[i].instance=n)}t.push({name:r,context:e,instance:n})},deleteSingletonInstances:function(e){t=t.filter(function(t){return t.context!==e})},getSingletonFactory:function(e){var n=r[e.__dashjs_factory_name];return n||(n=function(r){var n;return void 0===r&&(r={}),{getInstance:function(){return n||(n=i(r,e.__dashjs_factory_name)),n||(n=o(e,r,arguments),t.push({name:e.__dashjs_factory_name,context:r,instance:n})),n}}},r[e.__dashjs_factory_name]=n),n},getSingletonFactoryByName:function(e){return r[e]},updateSingletonFactory:function(e,t){e in r&&(r[e]=t)},getClassFactory:function(e){var t=n[e.__dashjs_factory_name];return t||(t=function(t){return void 0===t&&(t={}),{create:function(){return o(e,t,arguments)}}},n[e.__dashjs_factory_name]=t),t},getClassFactoryByName:function(e){return n[e]},updateClassFactory:function(e,t){e in n&&(n[e]=t)}}}();t.default=n},"./src/core/Settings.js":function(e,t,r){r.r(t);var n=r("./src/core/FactoryMaker.js"),i=r("./src/core/Utils.js"),o=r("./src/core/Debug.js"),u=r("./src/streaming/constants/Constants.js"),l=r("./src/streaming/vo/metrics/HTTPRequest.js"),c=r("./src/core/EventBus.js"),f=r("./src/core/events/Events.js");function d(e){return(d="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function h(e,t,r){var n;return(n=function(e,t){if("object"!==d(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,"string");if("object"!==d(n))return n;throw TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(t),(t="symbol"===d(n)?n:String(n))in e)?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function p(){var e,t,r=this.context,n=Object(c.default)(r).getInstance(),p={"streaming.delay.liveDelay":f.default.SETTING_UPDATED_LIVE_DELAY,"streaming.delay.liveDelayFragmentCount":f.default.SETTING_UPDATED_LIVE_DELAY_FRAGMENT_COUNT,"streaming.liveCatchup.enabled":f.default.SETTING_UPDATED_CATCHUP_ENABLED,"streaming.liveCatchup.playbackRate.min":f.default.SETTING_UPDATED_PLAYBACK_RATE_MIN,"streaming.liveCatchup.playbackRate.max":f.default.SETTING_UPDATED_PLAYBACK_RATE_MAX},m={debug:{logLevel:o.default.LOG_LEVEL_WARNING,dispatchEvent:!1},streaming:{abandonLoadTimeout:1e4,wallclockTimeUpdateInterval:100,manifestUpdateRetryInterval:100,cacheInitSegments:!1,applyServiceDescription:!0,applyProducerReferenceTime:!0,applyContentSteering:!0,eventControllerRefreshDelay:100,enableManifestDurationMismatchFix:!0,capabilities:{filterUnsupportedEssentialProperties:!0,useMediaCapabilitiesApi:!1},timeShiftBuffer:{calcFromSegmentTimeline:!1,fallbackToSegmentTimeline:!0},metrics:{maxListDepth:100},delay:{liveDelayFragmentCount:NaN,liveDelay:NaN,useSuggestedPresentationDelay:!0},protection:{keepProtectionMediaKeys:!1,ignoreEmeEncryptedEvent:!1,detectPlayreadyMessageFormat:!0},buffer:{enableSeekDecorrelationFix:!1,fastSwitchEnabled:!0,flushBufferAtTrackSwitch:!1,reuseExistingSourceBuffers:!0,bufferPruningInterval:10,bufferToKeep:20,bufferTimeAtTopQuality:30,bufferTimeAtTopQualityLongForm:60,initialBufferLevel:NaN,stableBufferTime:12,longFormContentDurationThreshold:600,stallThreshold:.3,useAppendWindow:!0,setStallState:!0,avoidCurrentTimeRangePruning:!1,useChangeTypeForTrackSwitch:!0},gaps:{jumpGaps:!0,jumpLargeGaps:!0,smallGapLimit:1.5,threshold:.3,enableSeekFix:!0,enableStallFix:!1,stallSeek:.1},utcSynchronization:{enabled:!0,useManifestDateHeaderTimeSource:!0,backgroundAttempts:2,timeBetweenSyncAttempts:30,maximumTimeBetweenSyncAttempts:600,minimumTimeBetweenSyncAttempts:2,timeBetweenSyncAttemptsAdjustmentFactor:2,maximumAllowedDrift:100,enableBackgroundSyncAfterSegmentDownloadError:!0,defaultTimingSource:{scheme:"urn:mpeg:dash:utc:http-xsdate:2014",value:"https://time.akamai.com/?iso&ms"}},scheduling:{defaultTimeout:500,lowLatencyTimeout:0,scheduleWhilePaused:!0},text:{defaultEnabled:!0,webvtt:{customRenderingEnabled:!1}},liveCatchup:{maxDrift:NaN,playbackRate:{min:NaN,max:NaN},playbackBufferMin:.5,enabled:null,mode:u.default.LIVE_CATCHUP_MODE_DEFAULT},lastBitrateCachingInfo:{enabled:!0,ttl:36e4},lastMediaSettingsCachingInfo:{enabled:!0,ttl:36e4},cacheLoadThresholds:{video:50,audio:5},trackSwitchMode:{audio:u.default.TRACK_SWITCH_MODE_ALWAYS_REPLACE,video:u.default.TRACK_SWITCH_MODE_NEVER_REPLACE},selectionModeForInitialTrack:u.default.TRACK_SELECTION_MODE_HIGHEST_SELECTION_PRIORITY,fragmentRequestTimeout:2e4,manifestRequestTimeout:1e4,retryIntervals:(h(e={},l.HTTPRequest.MPD_TYPE,500),h(e,l.HTTPRequest.XLINK_EXPANSION_TYPE,500),h(e,l.HTTPRequest.MEDIA_SEGMENT_TYPE,1e3),h(e,l.HTTPRequest.INIT_SEGMENT_TYPE,1e3),h(e,l.HTTPRequest.BITSTREAM_SWITCHING_SEGMENT_TYPE,1e3),h(e,l.HTTPRequest.INDEX_SEGMENT_TYPE,1e3),h(e,l.HTTPRequest.MSS_FRAGMENT_INFO_SEGMENT_TYPE,1e3),h(e,l.HTTPRequest.LICENSE,1e3),h(e,l.HTTPRequest.OTHER_TYPE,1e3),h(e,"lowLatencyReductionFactor",10),e),retryAttempts:(h(t={},l.HTTPRequest.MPD_TYPE,3),h(t,l.HTTPRequest.XLINK_EXPANSION_TYPE,1),h(t,l.HTTPRequest.MEDIA_SEGMENT_TYPE,3),h(t,l.HTTPRequest.INIT_SEGMENT_TYPE,3),h(t,l.HTTPRequest.BITSTREAM_SWITCHING_SEGMENT_TYPE,3),h(t,l.HTTPRequest.INDEX_SEGMENT_TYPE,3),h(t,l.HTTPRequest.MSS_FRAGMENT_INFO_SEGMENT_TYPE,3),h(t,l.HTTPRequest.LICENSE,3),h(t,l.HTTPRequest.OTHER_TYPE,3),h(t,"lowLatencyMultiplyFactor",5),t),abr:{movingAverageMethod:u.default.MOVING_AVERAGE_SLIDING_WINDOW,ABRStrategy:u.default.ABR_STRATEGY_DYNAMIC,additionalAbrRules:{insufficientBufferRule:!0,switchHistoryRule:!0,droppedFramesRule:!0,abandonRequestsRule:!0},bandwidthSafetyFactor:.9,useDefaultABRRules:!0,useDeadTimeLatency:!0,limitBitrateByPortal:!1,usePixelRatioInLimitBitrateByPortal:!1,maxBitrate:{audio:-1,video:-1},minBitrate:{audio:-1,video:-1},maxRepresentationRatio:{audio:1,video:1},initialBitrate:{audio:-1,video:-1},initialRepresentationRatio:{audio:-1,video:-1},autoSwitchBitrate:{audio:!0,video:!0},fetchThroughputCalculationMode:u.default.ABR_FETCH_THROUGHPUT_CALCULATION_MOOF_PARSING},cmcd:{enabled:!1,sid:null,cid:null,rtp:null,rtpSafetyFactor:5,mode:u.default.CMCD_MODE_QUERY,enabledKeys:["br","d","ot","tb","bl","dl","mtp","nor","nrr","su","bs","rtp","cid","pr","sf","sid","st","v"]}},errors:{recoverAttempts:{mediaErrorDecode:5}}},g=i.default.clone(m);return{get:function(){return g},update:function(e){"object"===d(e)&&function e(t,r,o){for(var u in t)t.hasOwnProperty(u)&&(r.hasOwnProperty(u)?"object"!==d(t[u])||t[u]instanceof Array||null===t[u]?(r[u]=i.default.clone(t[u]),p[o+u]&&n.trigger(p[o+u])):e(t[u],r[u],o.slice()+u+"."):console.error("Settings parameter "+o+u+" is not supported"))}(e,g,"")},reset:function(){g=i.default.clone(m)}}}p.__dashjs_factory_name="Settings";var m=n.default.getSingletonFactory(p);t.default=m},"./src/core/Utils.js":function(e,t,r){r.r(t);var n=r("./node_modules/path-browserify/index.js"),i=r.n(n),o=r("./node_modules/ua-parser-js/src/ua-parser.js");function u(e){return(u="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var l=function(){var e;function t(){!function(e,t){if(!(e instanceof t))throw TypeError("Cannot call a class as a function")}(this,t)}return e=[{key:"mixin",value:function(e,r,n){var i,o={};if(e)for(var l in r)r.hasOwnProperty(l)&&(i=r[l],l in e&&(e[l]===i||l in o&&o[l]===i)||("object"===u(e[l])&&null!==e[l]?e[l]=t.mixin(e[l],i,n):e[l]=n(i)));return e}},{key:"clone",value:function(e){if(!e||"object"!==u(e))return e;if(e instanceof Array){r=[];for(var r,n=0,i=e.length;n<i;++n)n in e&&r.push(t.clone(e[n]))}else r={};return t.mixin(r,e,t.clone)}},{key:"addAditionalQueryParameterToUrl",value:function(e,t){try{if(!t||0===t.length)return e;var r=new URL(e);return t.forEach(function(e){e.key&&e.value&&r.searchParams.set(e.key,e.value)}),r.href}catch(t){return e}}},{key:"parseHttpHeaders",value:function(e){var t={};if(!e)return t;for(var r=e.trim().split("\r\n"),n=0,i=r.length;n<i;n++){var o=r[n],u=o.indexOf(": ");u>0&&(t[o.substring(0,u)]=o.substring(u+2))}return t}},{key:"generateUuid",value:function(){var e=(new Date).getTime();return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(t){var r=(e+16*Math.random())%16|0;return e=Math.floor(e/16),("x"==t?r:3&r|8).toString(16)})}},{key:"generateHashCode",value:function(e){var t=0;if(0===e.length)return t;for(var r=0;r<e.length;r++)t=(t<<5)-t+e.charCodeAt(r)|0;return t}},{key:"getRelativeUrl",value:function(e,t){try{var r=new URL(e),n=new URL(t);if(r.protocol=n.protocol,r.origin!==n.origin)return t;var o=i.a.relative(r.pathname.substr(0,r.pathname.lastIndexOf("/")),n.pathname.substr(0,n.pathname.lastIndexOf("/"))),u=0===o.length?1:0;return o+=n.pathname.substr(n.pathname.lastIndexOf("/")+u,n.pathname.length-1),n.pathname.length<o.length?n.pathname:o}catch(e){return t}}},{key:"parseUserAgent",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;try{var t=null===e&&"undefined"!=typeof navigator?navigator.userAgent.toLowerCase():"";return Object(o.UAParser)(t)}catch(e){return{}}}}],function(e,t){for(var r,n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,(r=function(e,t){if("object"!==u(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,"string");if("object"!==u(n))return n;throw TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(i.key),"symbol"===u(r)?r:String(r)),i)}}(t,e),Object.defineProperty(t,"prototype",{writable:!1}),t}();t.default=l},"./src/core/Version.js":function(e,t,r){function n(){return"4.5.2"}r.r(t),r.d(t,"getVersionString",function(){return n})},"./src/core/errors/Errors.js":function(e,t,r){function n(e){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function i(e,t){return(i=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function o(e){return(o=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}r.r(t);var u=new(function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&i(e,t)}(u,e);var t,r=(t=function(){if("undefined"==typeof Reflect||!Reflect.construct||Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}(),function(){var e,r=o(u);if(t){var i=o(this).constructor;e=Reflect.construct(r,arguments,i)}else e=r.apply(this,arguments);return function(e,t){if(t&&("object"===n(t)||"function"==typeof t))return t;if(void 0!==t)throw TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,e)});function u(){var e;return function(e,t){if(!(e instanceof t))throw TypeError("Cannot call a class as a function")}(this,u),(e=r.call(this)).MANIFEST_LOADER_PARSING_FAILURE_ERROR_CODE=10,e.MANIFEST_LOADER_LOADING_FAILURE_ERROR_CODE=11,e.XLINK_LOADER_LOADING_FAILURE_ERROR_CODE=12,e.SEGMENT_BASE_LOADER_ERROR_CODE=15,e.TIME_SYNC_FAILED_ERROR_CODE=16,e.FRAGMENT_LOADER_LOADING_FAILURE_ERROR_CODE=17,e.FRAGMENT_LOADER_NULL_REQUEST_ERROR_CODE=18,e.URL_RESOLUTION_FAILED_GENERIC_ERROR_CODE=19,e.APPEND_ERROR_CODE=20,e.REMOVE_ERROR_CODE=21,e.DATA_UPDATE_FAILED_ERROR_CODE=22,e.CAPABILITY_MEDIASOURCE_ERROR_CODE=23,e.CAPABILITY_MEDIAKEYS_ERROR_CODE=24,e.DOWNLOAD_ERROR_ID_MANIFEST_CODE=25,e.DOWNLOAD_ERROR_ID_SIDX_CODE=26,e.DOWNLOAD_ERROR_ID_CONTENT_CODE=27,e.DOWNLOAD_ERROR_ID_INITIALIZATION_CODE=28,e.DOWNLOAD_ERROR_ID_XLINK_CODE=29,e.MANIFEST_ERROR_ID_PARSE_CODE=31,e.MANIFEST_ERROR_ID_NOSTREAMS_CODE=32,e.TIMED_TEXT_ERROR_ID_PARSE_CODE=33,e.MANIFEST_ERROR_ID_MULTIPLEXED_CODE=34,e.MEDIASOURCE_TYPE_UNSUPPORTED_CODE=35,e.MANIFEST_LOADER_PARSING_FAILURE_ERROR_MESSAGE="parsing failed for ",e.MANIFEST_LOADER_LOADING_FAILURE_ERROR_MESSAGE="Failed loading manifest: ",e.XLINK_LOADER_LOADING_FAILURE_ERROR_MESSAGE="Failed loading Xlink element: ",e.SEGMENTS_UPDATE_FAILED_ERROR_MESSAGE="Segments update failed",e.SEGMENTS_UNAVAILABLE_ERROR_MESSAGE="no segments are available yet",e.SEGMENT_BASE_LOADER_ERROR_MESSAGE="error loading segment ranges from sidx",e.TIME_SYNC_FAILED_ERROR_MESSAGE="Failed to synchronize client and server time",e.FRAGMENT_LOADER_NULL_REQUEST_ERROR_MESSAGE="request is null",e.URL_RESOLUTION_FAILED_GENERIC_ERROR_MESSAGE="Failed to resolve a valid URL",e.APPEND_ERROR_MESSAGE="chunk is not defined",e.REMOVE_ERROR_MESSAGE="Removing data from the SourceBuffer",e.DATA_UPDATE_FAILED_ERROR_MESSAGE="Data update failed",e.CAPABILITY_MEDIASOURCE_ERROR_MESSAGE="mediasource is not supported",e.CAPABILITY_MEDIAKEYS_ERROR_MESSAGE="mediakeys is not supported",e.TIMED_TEXT_ERROR_MESSAGE_PARSE="parsing error :",e.MEDIASOURCE_TYPE_UNSUPPORTED_MESSAGE="Error creating source buffer of type : ",e}return Object.defineProperty(u,"prototype",{writable:!1}),u}(r("./src/core/errors/ErrorsBase.js").default));t.default=u},"./src/core/errors/ErrorsBase.js":function(e,t,r){function n(e){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}r.r(t);var i=function(){var e;function t(){!function(e,t){if(!(e instanceof t))throw TypeError("Cannot call a class as a function")}(this,t)}return e=[{key:"extend",value:function(e,t){if(e){var r=!!t&&t.override,n=!!t&&t.publicOnly;for(var i in e)!e.hasOwnProperty(i)||this[i]&&!r||n&&-1===e[i].indexOf("public_")||(this[i]=e[i])}}}],function(e,t){for(var r,i=0;i<t.length;i++){var o=t[i];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,(r=function(e,t){if("object"!==n(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var i=r.call(e,"string");if("object"!==n(i))return i;throw TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(o.key),"symbol"===n(r)?r:String(r)),o)}}(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t}();t.default=i},"./src/core/events/CoreEvents.js":function(e,t,r){function n(e){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function i(e,t){return(i=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function o(e){return(o=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}r.r(t);var u=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&i(e,t)}(u,e);var t,r=(t=function(){if("undefined"==typeof Reflect||!Reflect.construct||Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}(),function(){var e,r=o(u);if(t){var i=o(this).constructor;e=Reflect.construct(r,arguments,i)}else e=r.apply(this,arguments);return function(e,t){if(t&&("object"===n(t)||"function"==typeof t))return t;if(void 0!==t)throw TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,e)});function u(){var e;return function(e,t){if(!(e instanceof t))throw TypeError("Cannot call a class as a function")}(this,u),(e=r.call(this)).ATTEMPT_BACKGROUND_SYNC="attemptBackgroundSync",e.BUFFERING_COMPLETED="bufferingCompleted",e.BUFFER_CLEARED="bufferCleared",e.BYTES_APPENDED_END_FRAGMENT="bytesAppendedEndFragment",e.BUFFER_REPLACEMENT_STARTED="bufferReplacementStarted",e.CHECK_FOR_EXISTENCE_COMPLETED="checkForExistenceCompleted",e.CURRENT_TRACK_CHANGED="currentTrackChanged",e.DATA_UPDATE_COMPLETED="dataUpdateCompleted",e.INBAND_EVENTS="inbandEvents",e.INITIAL_STREAM_SWITCH="initialStreamSwitch",e.INIT_FRAGMENT_LOADED="initFragmentLoaded",e.INIT_FRAGMENT_NEEDED="initFragmentNeeded",e.INTERNAL_MANIFEST_LOADED="internalManifestLoaded",e.ORIGINAL_MANIFEST_LOADED="originalManifestLoaded",e.LOADING_COMPLETED="loadingCompleted",e.LOADING_PROGRESS="loadingProgress",e.LOADING_DATA_PROGRESS="loadingDataProgress",e.LOADING_ABANDONED="loadingAborted",e.MANIFEST_UPDATED="manifestUpdated",e.MEDIA_FRAGMENT_LOADED="mediaFragmentLoaded",e.MEDIA_FRAGMENT_NEEDED="mediaFragmentNeeded",e.QUOTA_EXCEEDED="quotaExceeded",e.SEGMENT_LOCATION_BLACKLIST_ADD="segmentLocationBlacklistAdd",e.SEGMENT_LOCATION_BLACKLIST_CHANGED="segmentLocationBlacklistChanged",e.SERVICE_LOCATION_BLACKLIST_ADD="serviceLocationBlacklistAdd",e.SERVICE_LOCATION_BLACKLIST_CHANGED="serviceLocationBlacklistChanged",e.SET_FRAGMENTED_TEXT_AFTER_DISABLED="setFragmentedTextAfterDisabled",e.SET_NON_FRAGMENTED_TEXT="setNonFragmentedText",e.SOURCE_BUFFER_ERROR="sourceBufferError",e.STREAMS_COMPOSED="streamsComposed",e.STREAM_BUFFERING_COMPLETED="streamBufferingCompleted",e.STREAM_REQUESTING_COMPLETED="streamRequestingCompleted",e.TEXT_TRACKS_QUEUE_INITIALIZED="textTracksQueueInitialized",e.TIME_SYNCHRONIZATION_COMPLETED="timeSynchronizationComplete",e.UPDATE_TIME_SYNC_OFFSET="updateTimeSyncOffset",e.URL_RESOLUTION_FAILED="urlResolutionFailed",e.VIDEO_CHUNK_RECEIVED="videoChunkReceived",e.WALLCLOCK_TIME_UPDATED="wallclockTimeUpdated",e.XLINK_ELEMENT_LOADED="xlinkElementLoaded",e.XLINK_READY="xlinkReady",e.SEEK_TARGET="seekTarget",e.SETTING_UPDATED_LIVE_DELAY="settingUpdatedLiveDelay",e.SETTING_UPDATED_LIVE_DELAY_FRAGMENT_COUNT="settingUpdatedLiveDelayFragmentCount",e.SETTING_UPDATED_CATCHUP_ENABLED="settingUpdatedCatchupEnabled",e.SETTING_UPDATED_PLAYBACK_RATE_MIN="settingUpdatedPlaybackRateMin",e.SETTING_UPDATED_PLAYBACK_RATE_MAX="settingUpdatedPlaybackRateMax",e}return Object.defineProperty(u,"prototype",{writable:!1}),u}(r("./src/core/events/EventsBase.js").default);t.default=u},"./src/core/events/Events.js":function(e,t,r){function n(e){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function i(e,t){return(i=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function o(e){return(o=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}r.r(t);var u=new(function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&i(e,t)}(u,e);var t,r=(t=function(){if("undefined"==typeof Reflect||!Reflect.construct||Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}(),function(){var e,r=o(u);if(t){var i=o(this).constructor;e=Reflect.construct(r,arguments,i)}else e=r.apply(this,arguments);return function(e,t){if(t&&("object"===n(t)||"function"==typeof t))return t;if(void 0!==t)throw TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,e)});function u(){return function(e,t){if(!(e instanceof t))throw TypeError("Cannot call a class as a function")}(this,u),r.apply(this,arguments)}return Object.defineProperty(u,"prototype",{writable:!1}),u}(r("./src/core/events/CoreEvents.js").default));t.default=u},"./src/core/events/EventsBase.js":function(e,t,r){function n(e){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}r.r(t);var i=function(){var e;function t(){!function(e,t){if(!(e instanceof t))throw TypeError("Cannot call a class as a function")}(this,t)}return e=[{key:"extend",value:function(e,t){if(e){var r=!!t&&t.override,n=!!t&&t.publicOnly;for(var i in e)!e.hasOwnProperty(i)||this[i]&&!r||n&&-1===e[i].indexOf("public_")||(this[i]=e[i])}}}],function(e,t){for(var r,i=0;i<t.length;i++){var o=t[i];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,(r=function(e,t){if("object"!==n(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var i=r.call(e,"string");if("object"!==n(i))return i;throw TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(o.key),"symbol"===n(r)?r:String(r)),o)}}(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t}();t.default=i},"./src/dash/DashAdapter.js":function(e,t,r){r.r(t);var n=r("./src/dash/constants/DashConstants.js"),i=r("./src/dash/vo/RepresentationInfo.js"),o=r("./src/dash/vo/MediaInfo.js"),u=r("./src/dash/vo/StreamInfo.js"),l=r("./src/dash/vo/ManifestInfo.js"),c=r("./src/dash/vo/Event.js"),f=r("./src/core/FactoryMaker.js"),d=r("./src/dash/models/DashManifestModel.js"),h=r("./src/dash/models/PatchManifestModel.js"),p=r("./node_modules/bcp-47-normalize/index.js"),m=r.n(p);function g(){var e,t,r,f,p,g,y=this.context;function v(t,i,o){var u,l=e.getAdaptationsForType(r[0].mpd.manifest,t,i);if(!l||0===l.length)return null;if(l.length>1&&o){var c=T(o,i);if(f[o.id]&&f[o.id][i]){for(var d=0,h=l.length;d<h;d++)if(b(f[o.id][i],c[d]))return l[d]}for(var p=0,m=l.length;p<m;p++)if(u=l[p],e.getRolesForAdaptation(u).filter(function(e){return e.value===n.default.MAIN})[0])return l[p]}return l[0]}function b(e,t){if(!e||!t)return!1;var r=e.id===t.id,n=e.codec===t.codec,i=e.viewpoint===t.viewpoint,o=e.lang===t.lang,u=e.roles.toString()===t.roles.toString(),l=e.accessibility.toString()===t.accessibility.toString(),c=e.audioChannelConfiguration.toString()===t.audioChannelConfiguration.toString();return r&&n&&i&&o&&u&&l&&c}function _(t,r,n,i,o,u){var l,c,f,d,h,m,g=[];if(!i||0===i.length)return[];var y=e.getAdaptationsForPeriod(r);for(d=0,m=i.length;d<m;d++)if(l=i[d],c=O(y[f=e.getIndexForAdaptation(l,t,n.index)]),u){var v=c.accessibility.length;for(h=0;h<v;h++)if(c){var b=c.accessibility[h];if(0===b.indexOf("cea-608:")){var _=b.substring(8).split(";");if("CC"===_[0].substring(0,2))for(h=0;h<_.length;h++)c||(c=O.call(this,y[f])),R(c,_[h].substring(0,3),_[h].substring(4)),g.push(c),c=null;else for(h=0;h<_.length;h++)c||(c=O.call(this,y[f])),R(c,"CC"+(h+1),_[h]),g.push(c),c=null}else 0===b.indexOf("cea-608")&&(R(c,p.CC1,"eng"),g.push(c),c=null)}}else o===p.IMAGE?(c.type=p.IMAGE,g.push(c),c=null):c&&g.push(c);return g}function T(t,n,i){var o=r,u=i,l=[];if(u)k(),o=E(u);else{if(!(r.length>0))return l;u=r[0].mpd.manifest}var c=I(t,o),f=e.getAdaptationsForType(u,t?t.index:null,n);return l=_(u,c,t,f,n),n===p.TEXT&&(f=e.getAdaptationsForType(u,t?t.index:null,p.VIDEO),l=l.concat(_(u,c,t,f,n,!0))),l}function E(t){var r=S(t);return e.getRegularPeriods(r)}function S(t){var r=A(t);return e.getMpd(r)}function w(){r=[],f={}}function A(e){return e||(r.length>0?r[0].mpd.manifest:null)}function C(t){try{var n=I(t.streamInfo,r),i=e.getAdaptationsForPeriod(n);return t&&t.streamInfo&&void 0!==t.streamInfo.id&&i?i[t.index]:null}catch(e){return null}}function I(e,t){for(var r=t.length,n=0;n<r;n++){var i=t[n];if(e&&e.id===i.id)return i}return null}function O(t){if(!t)return null;var r,n=new o.default,i=t.period.mpd.manifest.Period_asArray[t.period.index].AdaptationSet_asArray[t.index];if(n.id=t.id,n.index=t.index,n.type=t.type,n.streamInfo=P(t.period),n.representationCount=e.getRepresentationCount(i),n.labels=e.getLabelsForAdaptation(i),n.lang=e.getLanguageForAdaptation(i),r=e.getViewpointForAdaptation(i),n.viewpoint=r?r.value:void 0,n.accessibility=e.getAccessibilityForAdaptation(i).map(function(e){var t=e.value,r=t;return e.schemeIdUri&&e.schemeIdUri.search("cea-608")>=0&&void 0!==g&&(r=t?"cea-608:"+t:"cea-608",n.embeddedCaptions=!0),r}),n.audioChannelConfiguration=e.getAudioChannelConfigurationForAdaptation(i).map(function(e){return e.value}),0===n.audioChannelConfiguration.length&&Array.isArray(i.Representation_asArray)&&i.Representation_asArray.length>0&&(n.audioChannelConfiguration=e.getAudioChannelConfigurationForRepresentation(i.Representation_asArray[0]).map(function(e){return e.value})),n.roles=e.getRolesForAdaptation(i).map(function(e){return e.value}),n.codec=e.getCodec(i),n.mimeType=e.getMimeType(i),n.contentProtection=e.getContentProtectionData(i),n.bitrateList=e.getBitrateListForAdaptation(i),n.selectionPriority=e.getSelectionPriority(i),n.contentProtection){var u=n.contentProtection.map(function(t){return e.getKID(t)}).filter(function(e){return null!==e});if(u.length){var l=u[0];n.contentProtection.forEach(function(e){e.keyId=l})}}return n.isText=e.getIsText(i),n.supplementalProperties=e.getSupplementalProperties(i),n.isFragmented=e.getIsFragmented(i),n.isEmbedded=!1,n}function R(e,t,r){e.id=t,e.index=100+parseInt(t.substring(2,3)),e.type=p.TEXT,e.codec="cea-608-in-SEI",e.isEmbedded=!0,e.isFragmented=!1,e.lang=m()(r),e.roles=["caption"]}function P(t){var r,n,i=new u.default;return i.id=t.id,i.index=t.index,i.start=t.start,i.duration=t.duration,i.manifestInfo=(r=t.mpd,(n=new l.default).dvrWindowSize=r.timeShiftBufferDepth,n.loadedTime=r.manifest.loadedTime,n.availableFrom=r.availabilityStartTime,n.minBufferTime=r.manifest.minBufferTime,n.maxFragmentDuration=r.maxSegmentDuration,n.duration=e.getDuration(r.manifest),n.isDynamic=e.getIsDynamic(r.manifest),n.serviceDescriptions=e.getServiceDescriptions(r.manifest),n.protocol=r.manifest.protocol,n),i.isLast=1===t.mpd.manifest.Period_asArray.length||1>Math.abs(i.start+i.duration-i.manifestInfo.duration),i}function k(){if(!p)throw Error("setConfig function has to be called previously")}function D(e){return r.length>0?r[0].mpd.manifest.Period_asArray[e]:null}function N(e,t,r){var n,i,o,u,l;if(e){for(n=e.AdaptationSet_asArray,u=0;u<n.length;u+=1)for(o=n[u].Representation_asArray,l=0;l<o.length;l+=1)if(t===(i=o[l]).id)return r?l:i}return null}return e=Object(d.default)(y).getInstance(),t=Object(h.default)(y).getInstance(),w(),{getBandwidthForRepresentation:function(e,t){var r;return(r=N(D(t),e))?r.bandwidth:null},getIndexForRepresentation:function(e,t){var r;return null!==(r=N(D(t),e,!0))?r:-1},getMaxIndexForBufferType:function(t,r){return function(t,r){var n,i,o,u;if(!t||!r)return -1;for(i=t.AdaptationSet_asArray,u=0;u<i.length;u+=1)if(o=(n=i[u]).Representation_asArray,e.getIsTypeOf(n,r))return o.length;return -1}(D(r),t)},convertRepresentationToRepresentationInfo:function(t){if(t){var r=new i.default,n=t.adaptation.period.mpd.manifest.Period_asArray[t.adaptation.period.index].AdaptationSet_asArray[t.adaptation.index],o=e.getRepresentationFor(t.index,n);return r.id=t.id,r.quality=t.index,r.bandwidth=e.getBandwidth(o),r.fragmentDuration=t.segmentDuration||(t.segments&&t.segments.length>0?t.segments[0].duration:NaN),r.MSETimeOffset=t.MSETimeOffset,r.mediaInfo=O(t.adaptation),r}return null},getStreamsInfo:function(e,t){var n=[],i=r;if(e&&(k(),i=E(e)),i.length>0){(!t||t>i.length)&&(t=i.length);for(var o=0;o<t;o++)n.push(P(i[o]))}return n},getMediaInfoForType:function(t,n){if(0===r.length||!t)return null;var i=I(t,r);if(!i)return null;var o=e.getAdaptationsForPeriod(i),u=v(t.index,n,t);return u?O(o[e.getIndexForAdaptation(u,r[0].mpd.manifest,t.index)]):null},getAllMediaInfoForType:T,getAdaptationForType:v,getRealAdaptation:function(t,n){var i,o,u=I(t,r);return i=n?n.id:null,r.length>0&&u&&(o=i?e.getAdaptationForId(i,r[0].mpd.manifest,u.index):e.getAdaptationForIndex(n?n.index:null,r[0].mpd.manifest,u.index)),o},getProducerReferenceTimes:function(t,n){var i,o,u=I(t,r);return i=n?n.id:null,r.length>0&&u&&(o=i?e.getAdaptationForId(i,r[0].mpd.manifest,u.index):e.getAdaptationForIndex(n?n.index:null,r[0].mpd.manifest,u.index)),o?e.getProducerReferenceTimesForAdaptation(o):[]},getRealPeriodByIndex:function(t){return e.getRealPeriodForIndex(t,r[0].mpd.manifest)},getEssentialPropertiesForRepresentation:function(t){try{return e.getEssentialPropertiesForRepresentation(t)}catch(e){return[]}},getVoRepresentations:function(t){var r=C(t);return e.getRepresentationsForAdaptation(r)},getEventsFor:function(t,n,l){var c=[];if(r.length>0){var f=r[0].mpd.manifest;if(t instanceof u.default){var d=I(t,r);c=e.getEventsForPeriod(d)}else if(t instanceof o.default){var h=I(l,r);c=e.getEventStreamForAdaptationSet(f,C(t),h)}else if(t instanceof i.default){var p=I(l,r);c=e.getEventStreamForRepresentation(f,n,p)}}return c},getEvent:function(e,t,r,n){try{if(!e||!t||isNaN(r)||!n)return null;var i=e.scheme_id_uri,o=e.value;if(!t[i+"/"+o])return null;var u,l=new c.default,f=e.timescale||1,d=n.adaptation.period.start,h=t[i+"/"+o],p=isNaN(n.presentationTimeOffset)?isNaN(h.presentationTimeOffset)?0:h.presentationTimeOffset:n.presentationTimeOffset,m=e.presentation_time_delta/f;u=0===e.version?d+r-p+m:d-p+m;var g=e.event_duration/f,y=e.id,v=e.message_data;return l.eventStream=h,l.eventStream.value=o,l.eventStream.timescale=f,l.duration=g,l.id=y,l.calculatedPresentationTime=u,l.messageData=v,l.presentationTimeDelta=m,l}catch(e){return null}},getMpd:S,setConfig:function(t){t&&(t.constants&&(p=t.constants),t.cea608parser&&(g=t.cea608parser),t.errHandler&&e.setConfig({errHandler:t.errHandler}),t.BASE64&&e.setConfig({BASE64:t.BASE64}))},updatePeriods:function(e){if(!e)return null;k(),r=E(e)},getIsTextTrack:function(t){return e.getIsText(t)},getUTCTimingSources:function(){var t=A();return e.getUTCTimingSources(t)},getSuggestedPresentationDelay:function(){var t=r.length>0?r[0].mpd:null;return e.getSuggestedPresentationDelay(t)},getAvailabilityStartTime:function(t){var r=S(t);return e.getAvailabilityStartTime(r)},getIsTypeOf:function(t,r){return e.getIsTypeOf(t,r)},getIsDynamic:function(t){var r=A(t);return e.getIsDynamic(r)},getDuration:function(t){var r=A(t);return e.getDuration(r)},getRegularPeriods:E,getContentSteering:function(t){return e.getContentSteering(t)},getLocation:function(t){return e.getLocation(t)},getPatchLocation:function(t){var r=e.getPatchLocation(t),n=e.getPublishTime(t);if(!r||!n)return null;if(r.hasOwnProperty("ttl")&&n){var i=1e3*parseFloat(r.ttl);if(n.getTime()+i<=(new Date).getTime())return null}return r.__text},getManifestUpdatePeriod:function(t){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return e.getManifestUpdatePeriod(t,r)},getPublishTime:function(t){return e.getPublishTime(t)},getIsDVB:function(t){return e.hasProfile(t,"urn:dvb:dash:profile:dvb-dash:2014")},getIsPatch:function(e){return t.getIsPatch(e)},getBaseURLsFromElement:function(t){return e.getBaseURLsFromElement(t)},getRepresentationSortFunction:function(){return e.getRepresentationSortFunction()},getCodec:function(t,r,n){return e.getCodec(t,r,n)},getPeriodById:function(e){if(!e||0===r.length)return null;var t=r.filter(function(t){return t.id===e});return t&&t.length>0?t[0]:null},setCurrentMediaInfo:function(e,t,r){f[e]=f[e]||{},f[e][t]=f[e][t]||{},f[e][t]=r},isPatchValid:function(r,n){var i=e.getId(r),o=t.getMpdId(n),u=e.getPublishTime(r),l=t.getPublishTime(n),c=t.getOriginalPublishTime(n);return!!(i&&o&&i==o&&u&&c&&u.getTime()==c.getTime()&&l&&u.getTime()<l.getTime())},applyPatchToManifest:function(e,r){t.getPatchOperations(r).forEach(function(t){var r=t.getMpdTarget(e);if(null!==r){var n=r.name,i=r.target,o=r.leaf;if(t.xpath.findsAttribute())switch(t.action){case"add":case"replace":i[n]=t.value;break;case"remove":delete i[n]}else{var u=(i[n+"_asArray"]||[]).indexOf(o),l="prepend"===t.position||"before"===t.position;if(("remove"===t.action||"replace"===t.action)&&(delete i[n],-1!=u)){var c=i[n+"_asArray"];c.splice(u,1),c.length>1?i[n]=c:1==c.length?i[n]=c[0]:delete i[n+"_asArray"]}"add"!==t.action&&"replace"!==t.action||Object.keys(t.value).forEach(function(e){var r=t.value[e],o=i[e+"_asArray"]||[];if(0===o.length&&i[e]&&o.push(i[e]),0===o.length)o=r;else{var c=o.length;c=e==n&&-1!=u?u+(l?0:1)+("replace"==t.action?-1:0):l?0:o.length,o.splice.apply(o,[c,0].concat(r))}i[e+"_asArray"]=o,i[e]=1==o.length?o[0]:o})}}})},areMediaInfosEqual:b,reset:w}}g.__dashjs_factory_name="DashAdapter",t.default=f.default.getSingletonFactory(g)},"./src/dash/DashHandler.js":function(e,t,r){r.r(t);var n=r("./src/streaming/vo/FragmentRequest.js"),i=r("./src/streaming/vo/metrics/HTTPRequest.js"),o=r("./src/core/FactoryMaker.js"),u=r("./src/streaming/MediaPlayerEvents.js"),l=r("./src/dash/utils/SegmentsUtils.js"),c=r("./src/dash/constants/DashConstants.js");function f(e){var t,r,o,f,d,h=(e=e||{}).eventBus,p=e.debug,m=e.urlUtils,g=e.type,y=e.streamInfo,v=e.segmentsController,b=e.timelineConverter,_=e.baseURLController;function T(e,t,r){var n,i,o=_.resolve(r.path);return o&&t!==o.url&&m.isRelative(t)?(n=o.url,i=o.serviceLocation,t&&(n=m.resolve(t,n))):n=t,!m.isRelative(n)&&(e.url=n,e.serviceLocation=i,!0)}function E(e,t){if(null==t)return null;var r=new n.default,o=t.representation,u=o.adaptation.period.mpd.manifest.Period_asArray[o.adaptation.period.index].AdaptationSet_asArray[o.adaptation.index].Representation_asArray[o.index].bandwidth,c=t.media;return c=Object(l.replaceTokenForTemplate)(c,"Number",t.replacementNumber),c=Object(l.replaceTokenForTemplate)(c,"Time",t.replacementTime),c=Object(l.replaceTokenForTemplate)(c,"Bandwidth",u),c=Object(l.replaceIDForTemplate)(c,o.id),c=Object(l.unescapeDollarsInTemplate)(c),r.mediaType=g,r.type=i.HTTPRequest.MEDIA_SEGMENT_TYPE,r.range=t.mediaRange,r.startTime=t.presentationStartTime,r.mediaStartTime=t.mediaStartTime,r.duration=t.duration,r.timescale=o.timescale,r.availabilityStartTime=t.availabilityStartTime,r.availabilityEndTime=t.availabilityEndTime,r.availabilityTimeComplete=o.availabilityTimeComplete,r.wallStartTime=t.wallStartTime,r.quality=o.index,r.index=t.index,r.mediaInfo=e,r.adaptationIndex=o.adaptation.index,r.representationId=o.id,T(r,c,o)?r:void 0}function S(e,t,n){var i=null;if(!t||!t.segmentInfoType)return i;var u=v.getSegmentByTime(t,n);return u&&(o=u,r.debug("Index for time "+n+" is "+u.index),i=E(e,u)),i}function w(){r.debug("Dynamic stream complete"),d=!0}return t={initialize:function(e){f=e,d=!1,v.initialize(e)},getStreamId:function(){return y.id},getType:function(){return g},getStreamInfo:function(){return y},getInitRequest:function(e,t){return t?function(e,t,r){var o=new n.default,u=t.adaptation.period,c=u.start;if(o.mediaType=r,o.type=i.HTTPRequest.INIT_SEGMENT_TYPE,o.range=t.range,o.availabilityStartTime=b.calcAvailabilityStartTimeFromPresentationTime(c,t,f),o.availabilityEndTime=b.calcAvailabilityEndTimeFromPresentationTime(c+u.duration,t,f),o.quality=t.index,o.mediaInfo=e,o.representationId=t.id,T(o,t.initialization,t))return o.url=Object(l.replaceTokenForTemplate)(o.url,"Bandwidth",t.bandwidth),o}(e,t,g):null},getSegmentRequestForTime:S,getCurrentIndex:function(){return o?o.index:-1},getNextSegmentRequest:function(e,t){var n=null;if(!t||!t.segmentInfoType)return null;var i=o?o.index+1:0,u=v.getSegmentByIndex(t,i,o?o.mediaStartTime:-1);if(u)n=E(e,u),o=u;else{if(f&&!d)return r.debug(g+" No segment found at index: "+i+". Wait for next loop"),null;d=!0}return n},isLastSegmentRequested:function(e,t){return!!e&&!!o&&(!!d||!!isFinite(e.adaptation.period.duration)&&!(o.presentationStartTime+o.duration>t)&&(!!e.mediaFinishedInformation&&!isNaN(e.mediaFinishedInformation.numberOfSegments)&&!isNaN(o.index)&&o.index>=e.mediaFinishedInformation.numberOfSegments-1&&(!f||e.segmentInfoType===c.default.SEGMENT_TEMPLATE||!!f&&e.segmentInfoType===c.default.SEGMENT_LIST&&!!e.adaptation.period.nextPeriodId)||!!(f&&e.adaptation.period.nextPeriodId&&e.segmentInfoType===c.default.SEGMENT_TIMELINE&&e.mediaFinishedInformation&&!isNaN(e.mediaFinishedInformation.mediaTimeOfLastSignaledSegment)&&o&&!isNaN(o.mediaStartTime)&&!isNaN(o.duration)&&o.mediaStartTime+o.duration>=e.mediaFinishedInformation.mediaTimeOfLastSignaledSegment-.05)))},reset:function(){o=null,h.off(u.default.DYNAMIC_TO_STATIC,w,t)},getNextSegmentRequestIdempotent:function(e,t){var r=o?o.index+1:0,n=v.getSegmentByIndex(t,r,o?o.mediaStartTime:-1);return n?E(e,n):null},getValidTimeAheadOfTargetTime:function(e,t,r,n){try{if(isNaN(e)||!t||!r)return NaN;if(e<0&&(e=0),isNaN(n)&&(n=.5),S(t,r,e))return e;if(r.adaptation.period.start+r.adaptation.period.duration<e)return NaN;for(var i=isFinite(r.adaptation.period.duration)?r.adaptation.period.start+r.adaptation.period.duration:e+30,o=Math.min(e+n,i),u=NaN,l=null;o<=i;){var c=null;if(o<=i&&(c=S(t,r,o)),c){u=o,l=c;break}o+=n}if(l){var f=l.startTime+l.duration;return e>l.startTime&&f-e>n?e:!isNaN(l.startTime)&&e<l.startTime&&u>l.startTime?l.startTime+.001:Math.min(f-n,u)}return u}catch(e){return NaN}}},r=p.getLogger(t),o=null,h.on(u.default.DYNAMIC_TO_STATIC,w,t),t}f.__dashjs_factory_name="DashHandler",t.default=o.default.getClassFactory(f)},"./src/dash/DashMetrics.js":function(e,t,r){r.r(t);var n=r("./src/streaming/constants/Constants.js"),i=r("./src/streaming/vo/metrics/HTTPRequest.js"),o=r("./src/core/FactoryMaker.js"),u=r("./src/streaming/constants/MetricsConstants.js"),l=r("./src/dash/utils/Round10.js"),c=r("./src/streaming/models/MetricsModel.js"),f=r("./src/core/Utils.js"),d=r("./src/streaming/vo/metrics/PlayList.js");function h(e){e=e||{};var t,r,o,h=this.context,p=e.metricsModel;function m(e){var t=p.getMetricsFor(e,!0);if(!t)return null;var r,n=t.HttpList,i=null;if(!n||n.length<=0)return null;for(r=n.length-1;r>=0;){if(n[r].responsecode){i=n[r];break}r--}return i}function g(e){var t=p.getMetricsFor(e,!0);return t&&t.HttpList?t.HttpList:[]}function y(e,t){if(!e)return null;var r=e[t];return r&&0!==r.length?r[r.length-1]:null}return p=p||Object(c.default)(h).getInstance({settings:e.settings}),t=!0,r=null,o=null,{getCurrentRepresentationSwitch:function(e){return y(p.getMetricsFor(e,!0),u.default.TRACK_SWITCH)},getCurrentBufferState:function(e){return y(p.getMetricsFor(e,!0),u.default.BUFFER_STATE)},getCurrentBufferLevel:function(e){var t=y(p.getMetricsFor(e,!0),u.default.BUFFER_LEVEL);return t?l.default.round10(t.level/1e3,-3):0},getCurrentHttpRequest:m,getHttpRequests:g,getCurrentDroppedFrames:function(){return y(p.getMetricsFor(n.default.VIDEO,!0),u.default.DROPPED_FRAMES)},getCurrentSchedulingInfo:function(e){return y(p.getMetricsFor(e,!0),u.default.SCHEDULING_INFO)},getCurrentDVRInfo:function(e){return y(e?p.getMetricsFor(e,!0):p.getMetricsFor(n.default.VIDEO,!0)||p.getMetricsFor(n.default.AUDIO,!0),u.default.DVR_INFO)},getCurrentManifestUpdate:function(){return y(p.getMetricsFor(n.default.STREAM),u.default.MANIFEST_UPDATE)},getLatestFragmentRequestHeaderValueByID:function(e,t){if(!t)return null;var r={},n=m(e);n&&(r=f.default.parseHttpHeaders(n._responseHeaders));var i=r[t.toLowerCase()];return void 0===i?null:i},getLatestMPDRequestHeaderValueByID:function(e){if(!e)return null;var t,r,o,u={};for(o=(t=g(n.default.STREAM)).length-1;o>=0;o--)if((r=t[o]).type===i.HTTPRequest.MPD_TYPE){u=f.default.parseHttpHeaders(r._responseHeaders);break}var l=u[e.toLowerCase()];return void 0===l?null:l},addRepresentationSwitch:function(e,t,r,n,i){p.addRepresentationSwitch(e,t,r,n,i)},addDVRInfo:function(e,t,r,n){p.addDVRInfo(e,t,r,n)},updateManifestUpdateInfo:function(e){var t=this.getCurrentManifestUpdate();p.updateManifestUpdateInfo(t,e)},addManifestUpdateStreamInfo:function(e){if(e){var t=this.getCurrentManifestUpdate();p.addManifestUpdateStreamInfo(t,e.id,e.index,e.start,e.duration)}},addManifestUpdateRepresentationInfo:function(e,t){if(e){var r=this.getCurrentManifestUpdate();p.addManifestUpdateRepresentationInfo(r,e.id,e.index,e.streamIndex,t,e.presentationTimeOffset,e.startNumber,e.fragmentInfoType)}},addManifestUpdate:function(e){p.addManifestUpdate(n.default.STREAM,e.type,e.requestStartDate,e.requestEndDate)},addHttpRequest:function(e,t,r,n,i){p.addHttpRequest(e.mediaType,null,e.type,e.url,e.quality,t,e.serviceLocation||null,e.range||null,e.requestStartDate,e.firstByteDate,e.requestEndDate,r,e.duration,n,i,e.fileLoaderType)},addSchedulingInfo:function(e,t){p.addSchedulingInfo(e.mediaType,new Date,e.type,e.startTime,e.availabilityStartTime,e.duration,e.quality,e.range,t)},addRequestsQueue:function(e,t,r){p.addRequestsQueue(e,t,r)},addBufferLevel:function(e,t,r){p.addBufferLevel(e,t,r)},addBufferState:function(e,t,r){p.addBufferState(e,t,r)},addDroppedFrames:function(e){p.addDroppedFrames(n.default.VIDEO,e)},addPlayList:function(){o&&(p.addPlayList(o),o=null)},addDVBErrors:function(e){p.addDVBErrors(e)},createPlaylistMetrics:function(e,t){(o=new d.PlayList).start=new Date,o.mstart=e,o.starttype=t},createPlaylistTraceMetrics:function(e,n,i){!0===t&&(t=!1,(r=new d.PlayListTrace).representationid=e,r.start=new Date,r.mstart=n,r.playbackspeed=null!==i?i.toString():null)},updatePlayListTraceMetrics:function(e){if(r)for(var t in r)r[t]=e[t]},pushPlayListTraceMetrics:function(e,n){if(!1===t&&o&&r&&r.start){var i=r.start,u=e.getTime()-i.getTime();r.duration=u,r.stopreason=n,o.trace.push(r),t=!0}},clearAllCurrentMetrics:function(){p.clearAllCurrentMetrics()}}}h.__dashjs_factory_name="DashMetrics",t.default=o.default.getSingletonFactory(h)},"./src/dash/SegmentBaseLoader.js":function(e,t,r){r.r(t);var n=r("./src/dash/vo/Segment.js"),i=r("./src/streaming/vo/DashJSError.js"),o=r("./src/core/FactoryMaker.js"),u=r("./src/streaming/vo/FragmentRequest.js"),l=r("./src/streaming/net/URLLoader.js");function c(){var e,t,r,o,c,f,d,h,p,m,g,y,v,b=this.context;function _(e,t,r){r({segments:e,representation:t,error:e?void 0:new i.default(p.SEGMENT_BASE_LOADER_ERROR_CODE,p.SEGMENT_BASE_LOADER_ERROR_MESSAGE)})}function T(e){if(e.url){var t=new u.default;return t.setInfo(e),t}}return e={setConfig:function(n){n.baseURLController&&(v=n.baseURLController),n.dashMetrics&&(f=n.dashMetrics),n.mediaPlayerModel&&(d=n.mediaPlayerModel),n.errHandler&&(r=n.errHandler),n.boxParser&&(o=n.boxParser),n.debug&&(t=n.debug.getLogger(e)),n.requestModifier&&(c=n.requestModifier),n.errors&&(p=n.errors),n.urlUtils&&(y=n.urlUtils),n.constants&&(m=n.constants),n.dashConstants&&(g=n.dashConstants)},initialize:function(){h=Object(l.default)(b).create({errHandler:r,dashMetrics:f,mediaPlayerModel:d,requestModifier:c,boxParser:o,errors:p,urlUtils:y,constants:m,dashConstants:g})},loadInitialization:function(e,r){return new Promise(function(n){(function e(r,n,i,u){var l=null,c=r?v.resolve(r.path):null,f=u||{init:!0,url:c?c.url:void 0,range:{start:0,end:1500},searching:!1,bytesLoaded:0,bytesToLoad:1500,mediaType:n};t.debug("Start searching for initialization.");var d=T(f);h.load({request:d,success:function(t){if(f.bytesLoaded=f.range.end,!(l=o.findInitRange(t)))return f.range.end=f.bytesLoaded+f.bytesToLoad,e(r,n,i,f);r.range=l,i(r)},error:function(){i(r)}}),t.debug("Perform init search: "+f.url)})(e,r,n)})},loadSegments:function(e,r,i){return new Promise(function(u){(function e(r,i,u,l,c,f){if(u&&(void 0===u.start||void 0===u.end)){var d=u?u.toString().split("-"):null;u=d?{start:parseFloat(d[0]),end:parseFloat(d[1])}:null}c=c||_;var p=null,m=null,g=!!u,y=r?v.resolve(r.path):null,b={init:!1,url:y?y.url:void 0,range:g?u:{start:0,end:1500},searching:!g,bytesLoaded:f?f.bytesLoaded:0,bytesToLoad:1500,mediaType:i},E=T(b);h.load({request:E,success:function(u){var f=b.bytesToLoad,d=u.byteLength;if(b.bytesLoaded=b.range.end-b.range.start,(m=(p=o.parse(u)).getBox("sidx"))&&m.isComplete){var h,g=m.references;if(null!=g&&g.length>0&&(h=1===g[0].reference_type),h){t.debug("Initiate multiple SIDX load."),b.range.end=b.range.start+m.size;var y,v,_,T,E=[],S=0,w=(m.offset||b.range.start)+m.size,A=function(e){e?(E=E.concat(e),++S>=v&&(E.sort(function(e,t){return e.startTime-t.startTime<0?-1:0}),c(E,r,l))):c(null,r,l)};for(y=0,v=g.length;y<v;y++)_=w,T=w+g[y].referenced_size-1,w+=g[y].referenced_size,e(r,i,{start:_,end:T},l,A,b)}else t.debug("Parsing segments from SIDX. representation "+i+" - id: "+r.id+" for range : "+b.range.start+" - "+b.range.end),c(function(e,t){for(var r,i,o,u,l=e.references,c=l.length,f=e.timescale,d=e.earliest_presentation_time,h=t.range.start+e.offset+e.first_offset+e.size,p=[],m=0;m<c;m++)o=l[m].subsegment_duration,u=l[m].referenced_size,(r=new n.default).duration=o,r.startTime=d,r.timescale=f,i=h+u-1,r.mediaRange=h+"-"+i,p.push(r),d+=o,h+=u;return p}(m,b),r,l)}else{if(m)b.range.start=m.offset||b.range.start,b.range.end=b.range.start+(m.size||f);else{if(d<b.bytesLoaded)return void c(null,r,l);var C=p.getLastBox();C&&C.size?(b.range.start=C.offset+C.size,b.range.end=b.range.start+f):b.range.end+=f}e(r,i,b.range,l,null,b)}},error:function(){c(null,r,l)}}),t.debug("Perform SIDX load for type ".concat(i," : ").concat(b.url," with range ").concat(b.range.start," - ").concat(b.range.end))})(e,r,i,u)})},reset:function(){h&&(h.abort(),h=null)}}}c.__dashjs_factory_name="SegmentBaseLoader",t.default=o.default.getSingletonFactory(c)},"./src/dash/WebmSegmentBaseLoader.js":function(e,t,r){r.r(t);var n=r("./src/streaming/utils/EBMLParser.js"),i=r("./src/streaming/constants/Constants.js"),o=r("./src/core/FactoryMaker.js"),u=r("./src/dash/vo/Segment.js"),l=r("./src/streaming/vo/FragmentRequest.js"),c=r("./src/streaming/net/URLLoader.js"),f=r("./src/streaming/vo/DashJSError.js");function d(){var e,t,r,o,d,h,p,m,g,y,v=this.context;function b(e){var t=new l.default;return t.setInfo(e),t}return e={setConfig:function(r){if(!(r.baseURLController&&r.dashMetrics&&r.mediaPlayerModel&&r.errHandler))throw Error(i.default.MISSING_CONFIG_ERROR);y=r.baseURLController,h=r.dashMetrics,p=r.mediaPlayerModel,o=r.errHandler,g=r.errors,t=r.debug.getLogger(e),d=r.requestModifier},initialize:function(){m=Object(c.default)(v).create({errHandler:o,dashMetrics:h,mediaPlayerModel:p,requestModifier:d,errors:g})},loadInitialization:function(e,r){return new Promise(function(n){var i=null,o=e?y.resolve(e.path):null,u=e?e.range.split("-"):null,l={range:{start:u?parseFloat(u[0]):null,end:u?parseFloat(u[1]):null},request:i,url:o?o.url:void 0,init:!0,mediaType:r};t.info("Start loading initialization."),i=b(l),m.load({request:i,success:function(){n(e)},error:function(){n(e)}}),t.debug("Perform init load: "+l.url)})},loadSegments:function(e,i,o){return new Promise(function(l){var c=null,d=e?y.resolve(e.path):null,h=d?d.url:void 0;c=b({bytesLoaded:0,bytesToLoad:8192,range:{start:0,end:8192},request:c,url:h,init:!1,mediaType:i}),t.debug("Parsing ebml header"),m.load({request:c,success:function(i){!function(e,i,o,l){if(e&&0!==e.byteLength){var c,f,d,h=Object(n.default)(v).create({data:e}),p=o?o.split("-"):null,g=null,y={url:i,range:{start:p?parseFloat(p[0]):null,end:p?parseFloat(p[1]):null},request:g};for(t.debug("Parse EBML header: "+y.url),h.skipOverElement(r.EBML),h.consumeTag(r.Segment),f=h.getMatroskaCodedNum()+h.getPos(),d=h.getPos();h.moreData()&&!h.consumeTagAndSize(r.Segment.Info,!0);)if(!(h.skipOverElement(r.Segment.SeekHead,!0)||h.skipOverElement(r.Segment.Tracks,!0)||h.skipOverElement(r.Segment.Cues,!0)||h.skipOverElement(r.Void,!0)))throw Error("no valid top level element found");for(;void 0===c;){var _=h.getMatroskaCodedNum(!0),T=h.getMatroskaCodedNum();_===r.Segment.Info.Duration.tag?c=h[r.Segment.Info.Duration.parse](T):h.setPos(h.getPos()+T)}g=b(y),m.load({request:g,success:function(e){l(function(e,i,o,l){var c,f,d,h,p,m,g,y;for(d=[],p=0,m=(f=function(e){var t,i,o=[],u=Object(n.default)(v).create({data:e});for(u.consumeTagAndSize(r.Segment.Cues);u.moreData()&&u.consumeTagAndSize(r.Segment.Cues.CuePoint,!0);){for((t={}).CueTime=u.parseTag(r.Segment.Cues.CuePoint.CueTime),t.CueTracks=[];u.moreData()&&u.consumeTag(r.Segment.Cues.CuePoint.CueTrackPositions,!0);){var l=u.getMatroskaCodedNum(),c=u.getPos();if((i={}).Track=u.parseTag(r.Segment.Cues.CuePoint.CueTrackPositions.CueTrack),0===i.Track)throw Error("Cue track cannot be 0");i.ClusterPosition=u.parseTag(r.Segment.Cues.CuePoint.CueTrackPositions.CueClusterPosition),t.CueTracks.push(i),u.setPos(c+l)}if(0===t.CueTracks.length)throw Error("Mandatory cuetrack not found");o.push(t)}if(0===o.length)throw Error("mandatory cuepoint not found");return o}(e)).length;p<m;p+=1)h=new u.default,c=p<f.length-1?f[p+1].CueTime-f[p].CueTime:l-f[p].CueTime,h.duration=c,h.startTime=f[p].CueTime,h.timescale=1e3,g=f[p].CueTracks[0].ClusterPosition+i,y=p<f.length-1?f[p+1].CueTracks[0].ClusterPosition+i-1:o-1,h.mediaRange=g+"-"+y,d.push(h);return t.debug("Parsed cues: "+d.length+" cues."),d}(e,d,f,c))},error:function(){t.error("Download Error: Cues "+y.url),l(null)}}),t.debug("Perform cues load: "+y.url+" bytes="+y.range.start+"-"+y.range.end)}else l(null)}(i,h,o,function(t){l({segments:t,representation:e,error:t?void 0:new f.default(g.SEGMENT_BASE_LOADER_ERROR_CODE,g.SEGMENT_BASE_LOADER_ERROR_MESSAGE)})})},error:function(){l({representation:e,error:new f.default(g.SEGMENT_BASE_LOADER_ERROR_CODE,g.SEGMENT_BASE_LOADER_ERROR_MESSAGE)})}})})},reset:function(){m&&(m.abort(),m=null)}},r={EBML:{tag:440786851,required:!0},Segment:{tag:408125543,required:!0,SeekHead:{tag:290298740,required:!0},Info:{tag:357149030,required:!0,TimecodeScale:{tag:2807729,required:!0,parse:"getMatroskaUint"},Duration:{tag:17545,required:!0,parse:"getMatroskaFloat"}},Tracks:{tag:374648427,required:!0},Cues:{tag:475249515,required:!0,CuePoint:{tag:187,required:!0,CueTime:{tag:179,required:!0,parse:"getMatroskaUint"},CueTrackPositions:{tag:183,required:!0,CueTrack:{tag:247,required:!0,parse:"getMatroskaUint"},CueClusterPosition:{tag:241,required:!0,parse:"getMatroskaUint"}}}}},Void:{tag:236,required:!0}},e}d.__dashjs_factory_name="WebmSegmentBaseLoader",t.default=o.default.getSingletonFactory(d)},"./src/dash/constants/DashConstants.js":function(e,t,r){function n(e){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}r.r(t);var i=new(function(){function e(){(function(e,t){if(!(e instanceof t))throw TypeError("Cannot call a class as a function")})(this,e),this.init()}return function(e,t){for(var r,i=0;i<t.length;i++){var o=t[i];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,(r=function(e,t){if("object"!==n(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var i=r.call(e,"string");if("object"!==n(i))return i;throw TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(o.key),"symbol"===n(r)?r:String(r)),o)}}(e.prototype,[{key:"init",value:function(){this.BASE_URL="BaseURL",this.SEGMENT_BASE="SegmentBase",this.SEGMENT_TEMPLATE="SegmentTemplate",this.SEGMENT_LIST="SegmentList",this.SEGMENT_URL="SegmentURL",this.SEGMENT_TIMELINE="SegmentTimeline",this.SEGMENT_PROFILES="segmentProfiles",this.ADAPTATION_SET="AdaptationSet",this.REPRESENTATION="Representation",this.REPRESENTATION_INDEX="RepresentationIndex",this.SUB_REPRESENTATION="SubRepresentation",this.INITIALIZATION="Initialization",this.INITIALIZATION_MINUS="initialization",this.MPD="MPD",this.PERIOD="Period",this.ASSET_IDENTIFIER="AssetIdentifier",this.EVENT_STREAM="EventStream",this.ID="id",this.PROFILES="profiles",this.SERVICE_LOCATION="serviceLocation",this.RANGE="range",this.INDEX="index",this.MEDIA="media",this.BYTE_RANGE="byteRange",this.INDEX_RANGE="indexRange",this.MEDIA_RANGE="mediaRange",this.VALUE="value",this.CONTENT_TYPE="contentType",this.MIME_TYPE="mimeType",this.BITSTREAM_SWITCHING="BitstreamSwitching",this.BITSTREAM_SWITCHING_MINUS="bitstreamSwitching",this.CODECS="codecs",this.DEPENDENCY_ID="dependencyId",this.MEDIA_STREAM_STRUCTURE_ID="mediaStreamStructureId",this.METRICS="Metrics",this.METRICS_MINUS="metrics",this.REPORTING="Reporting",this.WIDTH="width",this.HEIGHT="height",this.SAR="sar",this.FRAMERATE="frameRate",this.AUDIO_SAMPLING_RATE="audioSamplingRate",this.MAXIMUM_SAP_PERIOD="maximumSAPPeriod",this.START_WITH_SAP="startWithSAP",this.MAX_PLAYOUT_RATE="maxPlayoutRate",this.CODING_DEPENDENCY="codingDependency",this.SCAN_TYPE="scanType",this.FRAME_PACKING="FramePacking",this.AUDIO_CHANNEL_CONFIGURATION="AudioChannelConfiguration",this.CONTENT_PROTECTION="ContentProtection",this.ESSENTIAL_PROPERTY="EssentialProperty",this.SUPPLEMENTAL_PROPERTY="SupplementalProperty",this.INBAND_EVENT_STREAM="InbandEventStream",this.PRODUCER_REFERENCE_TIME="ProducerReferenceTime",this.ACCESSIBILITY="Accessibility",this.ROLE="Role",this.RATING="Rating",this.CONTENT_COMPONENT="ContentComponent",this.SUBSET="Subset",this.LANG="lang",this.VIEWPOINT="Viewpoint",this.ROLE_ASARRAY="Role_asArray",this.REPRESENTATION_ASARRAY="Representation_asArray",this.PRODUCERREFERENCETIME_ASARRAY="ProducerReferenceTime_asArray",this.ACCESSIBILITY_ASARRAY="Accessibility_asArray",this.AUDIOCHANNELCONFIGURATION_ASARRAY="AudioChannelConfiguration_asArray",this.CONTENTPROTECTION_ASARRAY="ContentProtection_asArray",this.MAIN="main",this.DYNAMIC="dynamic",this.STATIC="static",this.MEDIA_PRESENTATION_DURATION="mediaPresentationDuration",this.MINIMUM_UPDATE_PERIOD="minimumUpdatePeriod",this.CODEC_PRIVATE_DATA="codecPrivateData",this.BANDWITH="bandwidth",this.SOURCE_URL="sourceURL",this.TIMESCALE="timescale",this.DURATION="duration",this.START_NUMBER="startNumber",this.PRESENTATION_TIME_OFFSET="presentationTimeOffset",this.AVAILABILITY_START_TIME="availabilityStartTime",this.AVAILABILITY_END_TIME="availabilityEndTime",this.TIMESHIFT_BUFFER_DEPTH="timeShiftBufferDepth",this.MAX_SEGMENT_DURATION="maxSegmentDuration",this.PRESENTATION_TIME="presentationTime",this.MIN_BUFFER_TIME="minBufferTime",this.MAX_SUBSEGMENT_DURATION="maxSubsegmentDuration",this.START="start",this.AVAILABILITY_TIME_OFFSET="availabilityTimeOffset",this.AVAILABILITY_TIME_COMPLETE="availabilityTimeComplete",this.CENC_DEFAULT_KID="cenc:default_KID",this.DVB_PRIORITY="dvb:priority",this.DVB_WEIGHT="dvb:weight",this.SUGGESTED_PRESENTATION_DELAY="suggestedPresentationDelay",this.SERVICE_DESCRIPTION="ServiceDescription",this.SERVICE_DESCRIPTION_SCOPE="Scope",this.SERVICE_DESCRIPTION_LATENCY="Latency",this.SERVICE_DESCRIPTION_PLAYBACK_RATE="PlaybackRate",this.SERVICE_DESCRIPTION_OPERATING_QUALITY="OperatingQuality",this.SERVICE_DESCRIPTION_OPERATING_BANDWIDTH="OperatingBandwidth",this.PATCH_LOCATION="PatchLocation",this.PUBLISH_TIME="publishTime",this.ORIGINAL_PUBLISH_TIME="originalPublishTime",this.ORIGINAL_MPD_ID="mpdId",this.WALL_CLOCK_TIME="wallClockTime",this.PRESENTATION_TIME="presentationTime",this.LABEL="Label",this.GROUP_LABEL="GroupLabel",this.CONTENT_STEERING="ContentSteering",this.CONTENT_STEERING_AS_ARRAY="ContentSteering_asArray",this.DEFAULT_SERVICE_LOCATION="defaultServiceLocation",this.QUERY_BEFORE_START="queryBeforeStart",this.PROXY_SERVER_URL="proxyServerURL",this.CONTENT_STEERING_RESPONSE={VERSION:"VERSION",TTL:"TTL",RELOAD_URI:"RELOAD-URI",SERVICE_LOCATION_PRIORITY:"SERVICE-LOCATION-PRIORITY"}}}]),Object.defineProperty(e,"prototype",{writable:!1}),e}());t.default=i},"./src/dash/controllers/ContentSteeringController.js":function(e,t,r){r.r(t);var n=r("./src/core/FactoryMaker.js"),i=r("./src/core/Debug.js"),o=r("./src/streaming/net/URLLoader.js"),u=r("./src/core/errors/Errors.js"),l=r("./src/dash/vo/ContentSteeringRequest.js"),c=r("./src/dash/vo/ContentSteeringResponse.js"),f=r("./src/dash/constants/DashConstants.js"),d=r("./src/streaming/MediaPlayerEvents.js"),h=r("./src/core/events/Events.js"),p=r("./src/streaming/constants/Constants.js"),m=r("./src/core/Utils.js"),g=r("./src/streaming/utils/URLUtils.js");function y(){var e,t,r,n,y,v,b,_,T,E,S,w,A,C,I,O=this.context,R=Object(g.default)(O).getInstance();function P(e){e&&e.toStreamInfo&&(n=e.toStreamInfo)}function k(e){e&&e.request&&e.request.serviceLocation&&(y=e.request.serviceLocation)}function D(){var e=S.getValue();return I.getContentSteering(e)}function N(){return new Promise(function(e){try{var i=D();if(!i||!i.serverUrl)return void e();var o=function(e){var t=e.proxyServerUrl?e.proxyServerUrl:e.serverUrl;r&&r.reloadUri&&(t=R.isRelative(r.reloadUri)?R.resolve(r.reloadUri,e.serverUrl):r.reloadUri);var i=[];if(n){var o=I.getIsDynamic(),u=I.getAllMediaInfoForType(n,p.default.VIDEO).length>0?p.default.VIDEO:p.default.AUDIO,l=A.getThroughputHistory(),c=l?l.getAverageThroughput(u,o):NaN;isNaN(c)||i.push({key:"_DASH_throughput",value:1e3*c})}return y&&i.push({key:"_DASH_pathway",value:y}),e.proxyServerUrl&&e.proxyServerUrl===t&&e.serverUrl&&i.push({key:"url",value:encodeURI(e.serverUrl)}),m.default.addAditionalQueryParameterToUrl(t,i)}(i),u=new l.default(o);b.load({request:u,success:function(t){t&&t[f.default.CONTENT_STEERING_RESPONSE.VERSION]&&1===parseInt(t[f.default.CONTENT_STEERING_RESPONSE.VERSION])&&((r=new c.default).version=t[f.default.CONTENT_STEERING_RESPONSE.VERSION],t[f.default.CONTENT_STEERING_RESPONSE.TTL]&&!isNaN(t[f.default.CONTENT_STEERING_RESPONSE.TTL])&&(r.ttl=t[f.default.CONTENT_STEERING_RESPONSE.TTL]),t[f.default.CONTENT_STEERING_RESPONSE.RELOAD_URI]&&(r.reloadUri=t[f.default.CONTENT_STEERING_RESPONSE.RELOAD_URI]),t[f.default.CONTENT_STEERING_RESPONSE.SERVICE_LOCATION_PRIORITY]&&(r.serviceLocationPriority=t[f.default.CONTENT_STEERING_RESPONSE.SERVICE_LOCATION_PRIORITY]),L()),C.trigger(d.default.CONTENT_STEERING_REQUEST_COMPLETED,{currentSteeringResponseData:r,url:o}),e()},error:function(r){t.warn("Error fetching data from content steering server",r),L(),e(r)}})}catch(t){e(t)}})}function L(){r&&r.ttl&&!isNaN(r.ttl)&&(v&&clearTimeout(v),v=setTimeout(function(){N()},1e3*r.ttl))}function x(){v&&clearTimeout(v),v=null}function j(){r=null,n=null,y=null,x()}return e={reset:function(){j(),C.off(d.default.PERIOD_SWITCH_COMPLETED,P,e),C.off(h.default.FRAGMENT_LOADING_STARTED,k,e)},setConfig:function(e){e&&(e.adapter&&(I=e.adapter),e.errHandler&&(_=e.errHandler),e.dashMetrics&&(T=e.dashMetrics),e.mediaPlayerModel&&(E=e.mediaPlayerModel),e.requestModifier&&(w=e.requestModifier),e.manifestModel&&(S=e.manifestModel),e.abrController&&(A=e.abrController),e.eventBus&&(C=e.eventBus))},loadSteeringData:N,getCurrentSteeringResponseData:function(){return r},shouldQueryBeforeStart:function(){var e=D();return e&&e.queryBeforeStart},getSteeringDataFromManifest:D,stopSteeringRequestTimer:x,initialize:function(){b=Object(o.default)(O).create({errHandler:_,dashMetrics:T,mediaPlayerModel:E,requestModifier:w,errors:u.default}),C.on(d.default.PERIOD_SWITCH_COMPLETED,P,e),C.on(h.default.FRAGMENT_LOADING_STARTED,k,e)}},t=Object(i.default)(O).getInstance().getLogger(e),j(),e}y.__dashjs_factory_name="ContentSteeringController",t.default=n.default.getSingletonFactory(y)},"./src/dash/controllers/RepresentationController.js":function(e,t,r){r.r(t);var n=r("./src/streaming/constants/Constants.js"),i=r("./src/core/FactoryMaker.js"),o=r("./src/streaming/MediaPlayerEvents.js"),u=r("./src/dash/utils/SegmentsUtils.js");function l(e){var t,r,i,l,c,f=(e=e||{}).eventBus,d=e.events,h=e.abrController,p=e.dashMetrics,m=e.playbackController,g=e.timelineConverter,y=e.type,v=e.streamInfo,b=e.dashConstants,_=e.segmentsController,T=e.isDynamic;function E(){if(!(h&&p&&m&&g))throw Error(n.default.MISSING_CONFIG_ERROR)}function S(){r=null,i=!0,l=[]}function w(){E();var e=new Date,t=c,r=1e3*m.getTime();t&&p.addRepresentationSwitch(t.adaptation.type,e,r,t.id),f.trigger(o.default.REPRESENTATION_SWITCH,{mediaType:y,streamId:v.id,currentRepresentation:t,numberOfRepresentations:l.length},{streamId:v.id,mediaType:y})}function A(e){return null==e||e>=l.length?null:l[e]}function C(e){i=!1,f.trigger(d.DATA_UPDATE_COMPLETED,{data:r,currentRepresentation:c,error:e},{streamId:v.id,mediaType:y})}function I(e){if(e.newDuration){var t=c;t&&t.adaptation.period&&(t.adaptation.period.duration=e.newDuration)}}return t={getStreamId:function(){return v.id},getType:function(){return y},getData:function(){return r},isUpdating:function(){return i},updateData:function(e,t,o,f,d){if(E(),i=!0,l=t,c=A(d),r=e,o!==n.default.VIDEO&&o!==n.default.AUDIO&&(o!==n.default.TEXT||!f))return C(),Promise.resolve();for(var S=[],I=0,O=l.length;I<O;I++){var R=l[I];S.push(function(e){return new Promise(function(t,r){var n=e.hasInitialization(),o=e.hasSegments(),f=[];f.push(_.updateInitData(e,n)),f.push(_.updateSegmentData(e,o)),Promise.all(f).then(function(r){var n,o,f;r[0]&&!r[0].error&&(o=e,e=(f=r[0])&&!f.error&&f.representation?f.representation:o),r[1]&&!r[1].error&&(e=function(e,t){if(t&&!t.error){var r,n,i,o,l=t.segments,c=[],f=0;for(r=0,n=l?l.length:0;r<n;r++)i=l[r],(o=Object(u.getTimeBasedSegment)(g,T,e,i.startTime,i.duration,i.timescale,i.media,i.mediaRange,f))&&(c.push(o),o=null,f++);return c.length>0&&(e.segments=c),e}}(e,r[1])),(n=e).mediaFinishedInformation=_.getMediaFinishedInformation(n),function(e){if(i){var t,r,n=p.getCurrentManifestUpdate(),o=!1;if(n){for(var u=0;u<n.representationInfo.length;u++)if((t=n.representationInfo[u]).index===e.index&&t.mediaType===y){o=!0;break}o||p.addManifestUpdateRepresentationInfo(e,y)}if(function(){for(var e=0,t=l.length;e<t;e++){var r=l[e].segmentInfoType;if(!l[e].hasInitialization()||(r===b.SEGMENT_BASE||r===b.BASE_URL)&&!l[e].segments)return!1}return!0}()){h.setPlaybackQuality(y,v,(r=c,l.indexOf(r)));var f=p.getCurrentDVRInfo(y);f&&p.updateManifestUpdateInfo({latency:f.range.end-m.getTime()}),p.getCurrentRepresentationSwitch(c.adaptation.type)||w(),C()}}}(e),t()}).catch(function(e){r(e)})})}(R))}return Promise.all(S)},getCurrentRepresentation:function(){return c},getRepresentationForQuality:A,prepareQualityChange:function(e){c=A(e),w()},reset:function(){f.off(o.default.MANIFEST_VALIDITY_CHANGED,I,t),S()}},S(),f.on(o.default.MANIFEST_VALIDITY_CHANGED,I,t),t}l.__dashjs_factory_name="RepresentationController",t.default=i.default.getClassFactory(l)},"./src/dash/controllers/SegmentBaseController.js":function(e,t,r){r.r(t);var n=r("./src/core/FactoryMaker.js"),i=r("./src/dash/SegmentBaseLoader.js"),o=r("./src/dash/WebmSegmentBaseLoader.js");function u(e){e=e||{};var t,r,n=this.context,u=e.eventBus,l=e.events,c=e.dashMetrics,f=e.mediaPlayerModel,d=e.errHandler,h=e.baseURLController,p=e.debug,m=e.boxParser,g=e.requestModifier,y=e.errors;function v(e){return"webm"===(e?e.split("/")[1]:"").toLowerCase()}return t=Object(i.default)(n).getInstance(),r=Object(o.default)(n).getInstance(),t.setConfig({baseURLController:h,dashMetrics:c,mediaPlayerModel:f,errHandler:d,eventBus:u,events:l,errors:y,debug:p,boxParser:m,requestModifier:g}),r.setConfig({baseURLController:h,dashMetrics:c,mediaPlayerModel:f,errHandler:d,eventBus:u,events:l,errors:y,debug:p,requestModifier:g}),{initialize:function(){t.initialize(),r.initialize()},getSegmentBaseInitSegment:function(e){return v(e.representation.mimeType)?r.loadInitialization(e.representation,e.mediaType):t.loadInitialization(e.representation,e.mediaType)},getSegmentList:function(e){return v(e.mimeType)?r.loadSegments(e.representation,e.mediaType,e.representation?e.representation.indexRange:null):t.loadSegments(e.representation,e.mediaType,e.representation?e.representation.indexRange:null)},reset:function(){t.reset(),r.reset()}}}u.__dashjs_factory_name="SegmentBaseController";var l=n.default.getSingletonFactory(u);t.default=l},"./src/dash/controllers/SegmentsController.js":function(e,t,r){r.r(t);var n=r("./src/core/FactoryMaker.js"),i=r("./src/dash/utils/TimelineSegmentsGetter.js"),o=r("./src/dash/utils/TemplateSegmentsGetter.js"),u=r("./src/dash/utils/ListSegmentsGetter.js"),l=r("./src/dash/utils/SegmentBaseGetter.js");function c(e){e=e||{};var t,r=this.context,n=e.dashConstants,c=e.type,f=e.segmentBaseController;function d(e){return e?e.segments?t[n.SEGMENT_BASE]:t[e.segmentInfoType]:null}return t={},{initialize:function(c){t[n.SEGMENT_TIMELINE]=Object(i.default)(r).create(e,c),t[n.SEGMENT_TEMPLATE]=Object(o.default)(r).create(e,c),t[n.SEGMENT_LIST]=Object(u.default)(r).create(e,c),t[n.SEGMENT_BASE]=Object(l.default)(r).create(e,c)},updateInitData:function(e,t){return t?Promise.resolve():f.getSegmentBaseInitSegment({representation:e,mediaType:c})},updateSegmentData:function(e,t){return t?Promise.resolve():f.getSegmentList({mimeType:e.mimeType,representation:e,mediaType:c})},getSegmentByIndex:function(e,t,r){var n=d(e);return n?n.getSegmentByIndex(e,t,r):null},getSegmentByTime:function(e,t){var r=d(e);return r?r.getSegmentByTime(e,t):null},getMediaFinishedInformation:function(e){var t=d(e);return t?t.getMediaFinishedInformation(e):{numberOfSegments:0,mediaTimeOfLastSignaledSegment:NaN}}}}c.__dashjs_factory_name="SegmentsController";var f=n.default.getClassFactory(c);t.default=f},"./src/dash/controllers/ServiceDescriptionController.js":function(e,t,r){r.r(t);var n=r("./src/core/FactoryMaker.js"),i=r("./src/core/Debug.js"),o=r("./src/streaming/constants/Constants.js"),u=r("./src/dash/constants/DashConstants.js"),l=[o.default.SERVICE_DESCRIPTION_DVB_LL_SCHEME],c="video",f="audio";function d(){var e,t,r,n,d,h=this.context;function p(){t={liveDelay:NaN,liveCatchup:{maxDrift:NaN,playbackRate:{min:NaN,max:NaN}},minBitrate:{},maxBitrate:{},initialBitrate:{}},r=[]}function m(e,r,i){try{t[e][r]=i/1e3}catch(e){n.error(e)}}return e={getServiceDescriptionSettings:function(){return t},getProducerReferenceTimeOffsets:function(){return r},calculateProducerReferenceTimeOffsets:function(e){try{var t=[];if(e&&e.length>0){var i=[o.default.VIDEO,o.default.AUDIO,o.default.TEXT],l=d.getAvailabilityStartTime()/1e3;e.forEach(function(e){var r=i.reduce(function(t,r){return t.concat(d.getAllMediaInfoForType(e,r))},[]).reduce(function(t,r){return d.getProducerReferenceTimes(e,r).forEach(function(n){var i=d.getVoRepresentations(r);if(i&&i.length>0&&i[0].adaptation&&i[0].segmentInfoType===u.default.SEGMENT_TEMPLATE){var o=i[0],c=new Date(n[u.default.WALL_CLOCK_TIME]).getTime()/1e3-(n[u.default.PRESENTATION_TIME]/o[u.default.TIMESCALE]-o[u.default.PRESENTATION_TIME_OFFSET]+e.start);t.push({id:n[u.default.ID],to:l-c})}}),t},[]);t=t.concat(r)})}r=t}catch(e){n.error(e),r=[]}},applyServiceDescription:function(e){if(e&&e.serviceDescriptions){var i,u,d=e.serviceDescriptions.filter(function(e){return l.includes(e.schemeIdUri)}),h=e.serviceDescriptions.filter(function(e){return null==e.schemeIdUri}),p=d.length>0?d[d.length-1]:h[h.length-1];p&&(p.latency&&p.latency.target>0&&function(e){if(e.schemeIdUri,o.default.SERVICE_DESCRIPTION_DVB_LL_SCHEME,i={liveDelay:e.latency.target/1e3,maxDrift:!isNaN(e.latency.max)&&e.latency.max>e.latency.target?(e.latency.max-e.latency.target+500)/1e3:NaN,referenceId:e.latency.referenceId||NaN},r.length>0){var i,u,l,c,f=(l=0,0===(c=r.filter(function(e){return e.id===i.referenceId})).length?(l=r.length>0?r[0].to:0,u=r[0].id||NaN):(l=c[0].to||0,u=c[0].id||NaN),{to:l,id:u}),d=f.to,h=f.id;t.liveDelay=i.liveDelay-d,t.liveCatchup.maxDrift=i.maxDrift,n.debug("\n                Found latency properties coming from service description. Applied time offset of ".concat(d," from ProducerReferenceTime element with id ").concat(h,".\n                Live Delay: ").concat(i.liveDelay-d,", Live catchup max drift: ").concat(i.maxDrift,"\n            "))}else t.liveDelay=i.liveDelay,t.liveCatchup.maxDrift=i.maxDrift,n.debug("Found latency properties coming from service description: Live Delay: ".concat(i.liveDelay,", Live catchup max drift: ").concat(i.maxDrift))}(p),p.playbackRate&&(i=p.playbackRate.min?Math.round(1e3*(p.playbackRate.min-1))/1e3:NaN,u=p.playbackRate.max?Math.round(1e3*(p.playbackRate.max-1))/1e3:NaN,t.liveCatchup.playbackRate.min=i,t.liveCatchup.playbackRate.max=u,n.debug("Found latency properties coming from service description: Live catchup min playback rate: ".concat(i)),n.debug("Found latency properties coming from service description: Live catchup max playback rate: ".concat(u))),p.operatingQuality,p.operatingBandwidth&&function(e){if(e&&e.operatingBandwidth&&e.operatingBandwidth.mediaType&&"all"!==e.operatingBandwidth.mediaType){var t={};t.minBandwidth=e.operatingBandwidth.min,t.maxBandwidth=e.operatingBandwidth.max,t.targetBandwidth=e.operatingBandwidth.target;var r=[];e.operatingBandwidth.mediaType===c||e.operatingBandwidth.mediaType===f?r.push(e.operatingBandwidth.mediaType):"any"===e.operatingBandwidth.mediaType&&(r.push(f),r.push(c)),r.forEach(function(e){isNaN(t.minBandwidth)||m("minBitrate",e,t.minBandwidth),isNaN(t.maxBandwidth)||m("maxBitrate",e,t.maxBandwidth),isNaN(t.targetBandwidth)||m("initialBitrate",e,t.targetBandwidth)})}}(p))}},reset:function(){p()},setConfig:function(e){e&&e.adapter&&(d=e.adapter)}},n=Object(i.default)(h).getInstance().getLogger(e),p(),e}d.__dashjs_factory_name="ServiceDescriptionController",t.default=n.default.getSingletonFactory(d)},"./src/dash/models/DashManifestModel.js":function(e,t,r){r.r(t);var n=r("./src/streaming/constants/Constants.js"),i=r("./src/dash/constants/DashConstants.js"),o=r("./src/dash/vo/Representation.js"),u=r("./src/dash/vo/AdaptationSet.js"),l=r("./src/dash/vo/Period.js"),c=r("./src/dash/vo/Mpd.js"),f=r("./src/dash/vo/UTCTiming.js"),d=r("./src/dash/vo/Event.js"),h=r("./src/dash/vo/BaseURL.js"),p=r("./src/dash/vo/EventStream.js"),m=r("./src/dash/vo/ProducerReferenceTime.js"),g=r("./src/dash/vo/ContentSteering.js"),y=r("./src/streaming/utils/ObjectUtils.js"),v=r("./src/streaming/utils/URLUtils.js"),b=r("./src/core/FactoryMaker.js"),_=r("./src/core/Debug.js"),T=r("./src/streaming/vo/DashJSError.js"),E=r("./src/core/errors/Errors.js"),S=r("./src/streaming/thumbnail/ThumbnailTracks.js");function w(e,t){var r="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!r){if(Array.isArray(e)||(r=A(e))||t&&e&&"number"==typeof e.length){r&&(e=r);var n=0,i=function(){};return{s:i,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:i}}throw TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,u=!0,l=!1;return{s:function(){r=r.call(e)},n:function(){var e=r.next();return u=e.done,e},e:function(e){l=!0,o=e},f:function(){try{u||null==r.return||r.return()}finally{if(l)throw o}}}}function A(e,t){if(e){if("string"==typeof e)return C(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?C(e,t):void 0}}function C(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}function I(){var e,t,r,b,I=this.context,O=Object(v.default)(I).getInstance(),R=Number.isInteger||function(e){return"number"==typeof e&&isFinite(e)&&Math.floor(e)===e};function P(e,t){if(!e)throw Error("adaptation is not defined");if(!t)throw Error("type is not defined");if(e.Representation_asArray&&e.Representation_asArray.length){var r=M(e.Representation_asArray[0]);if(r&&r.length>0&&S.THUMBNAILS_SCHEME_ID_URIS.indexOf(r[0].schemeIdUri)>=0)return t===n.default.IMAGE}if(e.ContentComponent_asArray&&e.ContentComponent_asArray.length>0){if(e.ContentComponent_asArray.length>1)return t===n.default.MUXED;if(e.ContentComponent_asArray[0].contentType===t)return!0}var o=t===n.default.TEXT?RegExp("(ttml|vtt|wvtt|stpp)"):new RegExp(t);if(e.Representation_asArray&&e.Representation_asArray.length){var u=e.Representation_asArray[0].codecs;if(o.test(u))return!0}if(e.hasOwnProperty(i.default.MIME_TYPE))return o.test(e.mimeType);if(e.Representation_asArray){for(var l,c=0;c<e.Representation_asArray.length;c++)if((l=e.Representation_asArray[c]).hasOwnProperty(i.default.MIME_TYPE))return o.test(l.mimeType)}return!1}function k(e){if(!e)throw Error("adaptation is not defined");if(e.hasOwnProperty(i.default.SEGMENT_TEMPLATE)||e.hasOwnProperty(i.default.SEGMENT_TIMELINE)||e.hasOwnProperty(i.default.SEGMENT_LIST)||e.hasOwnProperty(i.default.SEGMENT_BASE))return!0;if(e.Representation_asArray&&e.Representation_asArray.length>0){var t=e.Representation_asArray[0];if(t.hasOwnProperty(i.default.SEGMENT_TEMPLATE)||t.hasOwnProperty(i.default.SEGMENT_TIMELINE)||t.hasOwnProperty(i.default.SEGMENT_LIST)||t.hasOwnProperty(i.default.SEGMENT_BASE))return!0}return!1}function D(e){return P(e,n.default.TEXT)}function N(e){return e&&Array.isArray(e.Representation_asArray)&&e.Representation_asArray.sort(function(e,t){return e.bandwidth-t.bandwidth}),e}function L(e,t){return e&&e.Period_asArray&&R(t)&&e.Period_asArray[t]?e.Period_asArray[t].AdaptationSet_asArray:[]}function x(e){return e&&e.Period_asArray?e.Period_asArray:[]}function j(e){var t=!1;return e&&e.hasOwnProperty("type")&&(t=e.type===i.default.DYNAMIC),t}function M(e){return e&&e.EssentialProperty_asArray&&e.EssentialProperty_asArray.length?e.EssentialProperty_asArray.map(function(e){return{schemeIdUri:e.schemeIdUri,value:e.value}}):null}function F(e,t,r){var o,u=[];if(!e)return u;for(o=0;o<e.length;o++){var l=new p.default;if(l.timescale=1,l.representation=t,!e[o].hasOwnProperty(n.default.SCHEME_ID_URI))throw Error("Invalid EventStream. SchemeIdUri has to be set");l.schemeIdUri=e[o].schemeIdUri,e[o].hasOwnProperty(i.default.TIMESCALE)&&(l.timescale=e[o].timescale),e[o].hasOwnProperty(i.default.VALUE)&&(l.value=e[o].value),u.push(l),l.period=r}return u}function B(e){var t=[],r=e.BaseURL_asArray||[e.baseUri],n=!1;return r.some(function(r){if(r){var o=new h.default,u=r.__text||r;return O.isRelative(u)&&(n=!0,e.baseUri&&(u=O.resolve(u,e.baseUri))),o.url=u,r.hasOwnProperty(i.default.SERVICE_LOCATION)&&r.serviceLocation.length?o.serviceLocation=r.serviceLocation:o.serviceLocation=u,r.hasOwnProperty(i.default.DVB_PRIORITY)&&(o.dvb_priority=r[i.default.DVB_PRIORITY]),r.hasOwnProperty(i.default.DVB_WEIGHT)&&(o.dvb_weight=r[i.default.DVB_WEIGHT]),r.hasOwnProperty(i.default.AVAILABILITY_TIME_OFFSET)&&(o.availabilityTimeOffset=r[i.default.AVAILABILITY_TIME_OFFSET]),r.hasOwnProperty(i.default.AVAILABILITY_TIME_COMPLETE)&&(o.availabilityTimeComplete="false"!==r[i.default.AVAILABILITY_TIME_COMPLETE]),t.push(o),n}}),t}return e={getIsTypeOf:P,getIsText:D,getIsFragmented:k,getProducerReferenceTimesForAdaptation:function(e){var t=e&&e.hasOwnProperty(i.default.PRODUCERREFERENCETIME_ASARRAY)?e[i.default.PRODUCERREFERENCETIME_ASARRAY]:[];(e&&e.hasOwnProperty(i.default.REPRESENTATION_ASARRAY)?e[i.default.REPRESENTATION_ASARRAY]:[]).forEach(function(e){var r;e.hasOwnProperty(i.default.PRODUCERREFERENCETIME_ASARRAY)&&t.push.apply(t,function(e){if(Array.isArray(e))return C(e)}(r=e[i.default.PRODUCERREFERENCETIME_ASARRAY])||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(r)||A(r)||function(){throw TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}())});var r=[];return t.forEach(function(e){var t=new m.default;e.hasOwnProperty(i.default.ID)&&(t[i.default.ID]=e[i.default.ID],e.hasOwnProperty(i.default.WALL_CLOCK_TIME)&&(t[i.default.WALL_CLOCK_TIME]=e[i.default.WALL_CLOCK_TIME],e.hasOwnProperty(i.default.PRESENTATION_TIME)&&(t[i.default.PRESENTATION_TIME]=e[i.default.PRESENTATION_TIME],r.push(t))))}),r},getLanguageForAdaptation:function(e){var t="";return e&&e.hasOwnProperty(i.default.LANG)&&(t=e.lang),t},getViewpointForAdaptation:function(e){return e&&e.hasOwnProperty(i.default.VIEWPOINT)?e.Viewpoint:null},getRolesForAdaptation:function(e){return e&&e.hasOwnProperty(i.default.ROLE_ASARRAY)?e.Role_asArray:[]},getAccessibilityForAdaptation:function(e){return e&&e.hasOwnProperty(i.default.ACCESSIBILITY_ASARRAY)?e.Accessibility_asArray:[]},getAudioChannelConfigurationForAdaptation:function(e){return e&&e.hasOwnProperty(i.default.AUDIOCHANNELCONFIGURATION_ASARRAY)?e.AudioChannelConfiguration_asArray:[]},getAudioChannelConfigurationForRepresentation:function(e){return e&&e.hasOwnProperty(i.default.AUDIOCHANNELCONFIGURATION_ASARRAY)?e.AudioChannelConfiguration_asArray:[]},getAdaptationForIndex:function(e,t,r){var n=L(t,r);return n.length>0&&R(e)?n[e]:null},getIndexForAdaptation:function(e,t,r){if(!e)return -1;for(var n=L(t,r),i=0;i<n.length;i++)if(Object(y.default)(I).getInstance().areEqual(n[i],e))return i;return -1},getAdaptationForId:function(e,t,r){var n,o,u=L(t,r);for(n=0,o=u.length;n<o;n++)if(u[n].hasOwnProperty(i.default.ID)&&u[n].id===e)return u[n];return null},getAdaptationsForType:function(e,t,r){var n,i,o=L(e,t),u=[];for(n=0,i=o.length;n<i;n++)P(o[n],r)&&u.push(N(o[n]));return u},getRealPeriods:x,getRealPeriodForIndex:function(e,t){var r=x(t);return r.length>0&&R(e)?r[e]:null},getCodec:function(e,t,r){var n=null;if(e&&e.Representation_asArray&&e.Representation_asArray.length>0){var i=R(t)&&t>=0&&t<e.Representation_asArray.length?e.Representation_asArray[t]:e.Representation_asArray[0];i&&(n=i.mimeType+';codecs="'+i.codecs+'"',r&&void 0!==i.width&&(n+=';width="'+i.width+'";height="'+i.height+'"'))}return n&&(n=n.replace(/\sprofiles=[^;]*/g,"")),n},getSelectionPriority:function(e){try{var t=e&&void 0!==e.selectionPriority?parseInt(e.selectionPriority):1;return isNaN(t)?1:t}catch(e){return 1}},getMimeType:function(e){return e&&e.Representation_asArray&&e.Representation_asArray.length>0?e.Representation_asArray[0].mimeType:null},getKID:function(e){return e&&e.hasOwnProperty(i.default.CENC_DEFAULT_KID)?e[i.default.CENC_DEFAULT_KID]:null},getLabelsForAdaptation:function(e){if(!e||!Array.isArray(e.Label_asArray))return[];for(var t=[],r=0;r<e.Label_asArray.length;r++)t.push({lang:e.Label_asArray[r].lang,text:e.Label_asArray[r].__text||e.Label_asArray[r]});return t},getContentProtectionData:function(e){return e&&e.hasOwnProperty(i.default.CONTENTPROTECTION_ASARRAY)&&0!==e.ContentProtection_asArray.length?e.ContentProtection_asArray:null},getIsDynamic:j,getId:function(e){return e&&e[i.default.ID]||null},hasProfile:function(e,t){var r=!1;return e&&e.profiles&&e.profiles.length>0&&(r=-1!==e.profiles.indexOf(t)),r},getDuration:function(e){return e&&e.hasOwnProperty(i.default.MEDIA_PRESENTATION_DURATION)?e.mediaPresentationDuration:e&&"dynamic"==e.type?Number.POSITIVE_INFINITY:Number.MAX_SAFE_INTEGER||Number.MAX_VALUE},getBandwidth:function(e){return e&&e.bandwidth?e.bandwidth:NaN},getManifestUpdatePeriod:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,r=NaN;return e&&e.hasOwnProperty(i.default.MINIMUM_UPDATE_PERIOD)&&(r=e.minimumUpdatePeriod),isNaN(r)?r:Math.max(r-t,1)},getPublishTime:function(e){return e&&e.hasOwnProperty(i.default.PUBLISH_TIME)?new Date(e[i.default.PUBLISH_TIME]):null},getRepresentationCount:function(e){return e&&Array.isArray(e.Representation_asArray)?e.Representation_asArray.length:0},getBitrateListForAdaptation:function(e){var t=N(e);return(t&&Array.isArray(t.Representation_asArray)?t.Representation_asArray:[]).map(function(e){return{bandwidth:e.bandwidth,width:e.width||0,height:e.height||0,scanType:e.scanType||null,id:e.id||null}})},getRepresentationFor:function(e,t){return t&&t.Representation_asArray&&t.Representation_asArray.length>0&&R(e)?t.Representation_asArray[e]:null},getRepresentationsForAdaptation:function(e){var t,r,n,u=[],l=function(e){if(e&&e.period&&R(e.period.index)){var t=e.period.mpd.manifest.Period_asArray[e.period.index];if(t&&t.AdaptationSet_asArray&&R(e.index))return N(t.AdaptationSet_asArray[e.index])}}(e);if(l&&l.Representation_asArray){if(e&&e.period&&R(e.period.index)){var c=B(e.period.mpd.manifest);c&&(r=c[0])}for(var f=0,d=l.Representation_asArray.length;f<d;++f){var h=l.Representation_asArray[f],p=new o.default;if(p.index=f,p.adaptation=e,h.hasOwnProperty(i.default.ID)&&(p.id=h.id),h.hasOwnProperty(i.default.CODECS)&&(p.codecs=h.codecs),h.hasOwnProperty(i.default.MIME_TYPE)&&(p.mimeType=h[i.default.MIME_TYPE]),h.hasOwnProperty(i.default.CODEC_PRIVATE_DATA)&&(p.codecPrivateData=h.codecPrivateData),h.hasOwnProperty(i.default.BANDWITH)&&(p.bandwidth=h.bandwidth),h.hasOwnProperty(i.default.WIDTH)&&(p.width=h.width),h.hasOwnProperty(i.default.HEIGHT)&&(p.height=h.height),h.hasOwnProperty(i.default.SCAN_TYPE)&&(p.scanType=h.scanType),h.hasOwnProperty(i.default.MAX_PLAYOUT_RATE)&&(p.maxPlayoutRate=h.maxPlayoutRate),h.hasOwnProperty(i.default.SEGMENT_BASE)?(t=h.SegmentBase,p.segmentInfoType=i.default.SEGMENT_BASE):h.hasOwnProperty(i.default.SEGMENT_LIST)?(t=h.SegmentList).hasOwnProperty(i.default.SEGMENT_TIMELINE)?p.segmentInfoType=i.default.SEGMENT_TIMELINE:p.segmentInfoType=i.default.SEGMENT_LIST:h.hasOwnProperty(i.default.SEGMENT_TEMPLATE)?((t=h.SegmentTemplate).hasOwnProperty(i.default.SEGMENT_TIMELINE)?p.segmentInfoType=i.default.SEGMENT_TIMELINE:p.segmentInfoType=i.default.SEGMENT_TEMPLATE,t.hasOwnProperty(i.default.INITIALIZATION_MINUS)&&(p.initialization=t.initialization.split("$Bandwidth$").join(h.bandwidth).split("$RepresentationID$").join(h.id))):p.segmentInfoType=i.default.BASE_URL,p.essentialProperties=M(h),t){if(t.hasOwnProperty(i.default.INITIALIZATION)){var m=t.Initialization;m.hasOwnProperty(i.default.SOURCE_URL)&&(p.initialization=m.sourceURL),m.hasOwnProperty(i.default.RANGE)&&(p.range=m.range)}else D(l)&&k(l)&&l.mimeType&&-1===l.mimeType.indexOf("application/mp4")&&(p.range=0);t.hasOwnProperty(i.default.TIMESCALE)&&(p.timescale=t.timescale),t.hasOwnProperty(i.default.DURATION)?p.segmentDuration=t.duration/p.timescale:h.hasOwnProperty(i.default.SEGMENT_TEMPLATE)&&(t=h.SegmentTemplate).hasOwnProperty(i.default.SEGMENT_TIMELINE)&&(p.segmentDuration=function(e){if(!e||!e.S_asArray)return NaN;var t=e.S_asArray[0],r=e.S_asArray[1];return t.hasOwnProperty("d")?t.d:r.t-t.t}(t.SegmentTimeline)/p.timescale),t.hasOwnProperty(i.default.MEDIA)&&(p.media=t.media),t.hasOwnProperty(i.default.START_NUMBER)&&(p.startNumber=t.startNumber),t.hasOwnProperty(i.default.INDEX_RANGE)&&(p.indexRange=t.indexRange),t.hasOwnProperty(i.default.PRESENTATION_TIME_OFFSET)&&(p.presentationTimeOffset=t.presentationTimeOffset/p.timescale),t.hasOwnProperty(i.default.AVAILABILITY_TIME_OFFSET)?p.availabilityTimeOffset=t.availabilityTimeOffset:r&&void 0!==r.availabilityTimeOffset&&(p.availabilityTimeOffset=r.availabilityTimeOffset),t.hasOwnProperty(i.default.AVAILABILITY_TIME_COMPLETE)?p.availabilityTimeComplete="false"!==t.availabilityTimeComplete:r&&void 0!==r.availabilityTimeComplete&&(p.availabilityTimeComplete=r.availabilityTimeComplete)}p.MSETimeOffset=(n=p.presentationTimeOffset,p.adaptation.period.start-n),p.path=[e.period.index,e.index,f],u.push(p)}}return u},getAdaptationsForPeriod:function(e){var r,o,l,c=e&&R(e.index)?e.mpd.manifest.Period_asArray[e.index]:null,f=[];if(c&&c.AdaptationSet_asArray)for(l=0;l<c.AdaptationSet_asArray.length;l++)o=c.AdaptationSet_asArray[l],r=new u.default,o.hasOwnProperty(i.default.ID)&&(r.id=o.id),r.index=l,r.period=e,P(o,n.default.MUXED)?r.type=n.default.MUXED:P(o,n.default.AUDIO)?r.type=n.default.AUDIO:P(o,n.default.VIDEO)?r.type=n.default.VIDEO:D(o)?r.type=n.default.TEXT:P(o,n.default.IMAGE)?r.type=n.default.IMAGE:t.warn("Unknown Adaptation stream type"),f.push(r);return f},getRegularPeriods:function(e){var o,u,c,f,d,h=!!e&&j(e.manifest),p=[],m=null,g=null,y=null,v=null;for(d=0,f=e&&e.manifest&&e.manifest.Period_asArray?e.manifest.Period_asArray.length:0;d<f;d++)(g=e.manifest.Period_asArray[d]).hasOwnProperty(i.default.START)?(v=new l.default).start=g.start:null!==m&&m.hasOwnProperty(i.default.DURATION)&&null!==y?(v=new l.default).start=parseFloat((y.start+y.duration).toFixed(5)):0!==d||h||((v=new l.default).start=0),null!==y&&isNaN(y.duration)&&(null!==v?y.duration=parseFloat((v.start-y.start).toFixed(5)):t.warn("First period duration could not be calculated because lack of start and duration period properties. This will cause timing issues during playback")),null!==v&&(v.id=function(e,t){if(!e)throw Error("Period cannot be null or undefined");var r=l.default.DEFAULT_ID+"_"+t;return e.hasOwnProperty(i.default.ID)&&e.id.length>0&&"__proto__"!==e.id&&(r=e.id),r}(g,d),v.index=d,v.mpd=e,g.hasOwnProperty(i.default.DURATION)&&(v.duration=g.duration),y&&(y.nextPeriodId=v.id),p.push(v),m=g,y=v),g=null,v=null;return 0===p.length||null!==y&&isNaN(y.duration)&&(y.duration=parseFloat((o=y,function(){if(!r||!r.hasOwnProperty("error"))throw Error(n.default.MISSING_CONFIG_ERROR)}(),c=j(o.mpd.manifest),o.mpd.manifest.mediaPresentationDuration?u=o.mpd.manifest.mediaPresentationDuration:o.duration?u=o.duration:c?u=Number.POSITIVE_INFINITY:r.error(new T.default(E.default.MANIFEST_ERROR_ID_PARSE_CODE,"Must have @mediaPresentationDuration on MPD or an explicit @duration on the last period.",o)),u-y.start).toFixed(5))),p},getMpd:function(e){var t=new c.default;return e&&(t.manifest=e,e.hasOwnProperty(i.default.AVAILABILITY_START_TIME)?t.availabilityStartTime=new Date(e.availabilityStartTime.getTime()):e.loadedTime&&(t.availabilityStartTime=new Date(e.loadedTime.getTime())),e.hasOwnProperty(i.default.AVAILABILITY_END_TIME)&&(t.availabilityEndTime=new Date(e.availabilityEndTime.getTime())),e.hasOwnProperty(i.default.MINIMUM_UPDATE_PERIOD)&&(t.minimumUpdatePeriod=e.minimumUpdatePeriod),e.hasOwnProperty(i.default.MEDIA_PRESENTATION_DURATION)&&(t.mediaPresentationDuration=e.mediaPresentationDuration),e.hasOwnProperty(i.default.SUGGESTED_PRESENTATION_DELAY)&&(t.suggestedPresentationDelay=e.suggestedPresentationDelay),e.hasOwnProperty(i.default.TIMESHIFT_BUFFER_DEPTH)&&(t.timeShiftBufferDepth=e.timeShiftBufferDepth),e.hasOwnProperty(i.default.MAX_SEGMENT_DURATION)&&(t.maxSegmentDuration=e.maxSegmentDuration),e.hasOwnProperty(i.default.PUBLISH_TIME)&&(t.publishTime=new Date(e.publishTime))),t},getEventsForPeriod:function(e){var t,r,o=e&&e.mpd&&e.mpd.manifest?e.mpd.manifest:null,u=o?o.Period_asArray:null,l=u&&e&&R(e.index)?u[e.index].EventStream_asArray:null,c=[];if(l)for(t=0;t<l.length;t++){var f=new p.default;if(f.period=e,f.timescale=1,!l[t].hasOwnProperty(n.default.SCHEME_ID_URI))throw Error("Invalid EventStream. SchemeIdUri has to be set");for(f.schemeIdUri=l[t][n.default.SCHEME_ID_URI],l[t].hasOwnProperty(i.default.TIMESCALE)&&(f.timescale=l[t][i.default.TIMESCALE]),l[t].hasOwnProperty(i.default.VALUE)&&(f.value=l[t][i.default.VALUE]),l[t].hasOwnProperty(i.default.PRESENTATION_TIME_OFFSET)&&(f.presentationTimeOffset=l[t][i.default.PRESENTATION_TIME_OFFSET]),r=0;l[t].Event_asArray&&r<l[t].Event_asArray.length;r++){var h=l[t].Event_asArray[r],m=new d.default;m.presentationTime=0,m.eventStream=f,h.hasOwnProperty(i.default.PRESENTATION_TIME)&&(m.presentationTime=h.presentationTime);var g=f.presentationTimeOffset?f.presentationTimeOffset/f.timescale:0;m.calculatedPresentationTime=m.presentationTime/f.timescale+e.start-g,h.hasOwnProperty(i.default.DURATION)&&(m.duration=h.duration/f.timescale),h.hasOwnProperty(i.default.ID)?m.id=h.id:m.id=null,h.Signal&&h.Signal.Binary?m.messageData=b.decodeArray(h.Signal.Binary.toString()):m.messageData=h.messageData||h.__cdata||h.__text,c.push(m)}}return c},getEssentialPropertiesForRepresentation:M,getEventStreamForAdaptationSet:function(e,t,r){var n,i,o;return e&&e.Period_asArray&&t&&t.period&&R(t.period.index)&&(i=e.Period_asArray[t.period.index])&&i.AdaptationSet_asArray&&R(t.index)&&(o=i.AdaptationSet_asArray[t.index])&&(n=o.InbandEventStream_asArray),F(n,null,r)},getEventStreamForRepresentation:function(e,t,r){var n,i,o,u;return e&&e.Period_asArray&&t&&t.adaptation&&t.adaptation.period&&R(t.adaptation.period.index)&&(i=e.Period_asArray[t.adaptation.period.index])&&i.AdaptationSet_asArray&&R(t.adaptation.index)&&(o=i.AdaptationSet_asArray[t.adaptation.index])&&o.Representation_asArray&&R(t.index)&&(u=o.Representation_asArray[t.index])&&(n=u.InbandEventStream_asArray),F(n,t,r)},getUTCTimingSources:function(e){var t=j(e),r=!!e&&e.hasOwnProperty(i.default.AVAILABILITY_START_TIME),o=e?e.UTCTiming_asArray:null,u=[];return(t||r)&&o&&o.forEach(function(e){var t=new f.default;e.hasOwnProperty(n.default.SCHEME_ID_URI)&&(t.schemeIdUri=e.schemeIdUri,e.hasOwnProperty(i.default.VALUE)&&(t.value=e.value.toString(),u.push(t)))}),u},getBaseURLsFromElement:B,getRepresentationSortFunction:function(){return function(e,t){return e.bandwidth-t.bandwidth}},getContentSteering:function(e){if(e&&e.hasOwnProperty(i.default.CONTENT_STEERING_AS_ARRAY)){var t=e[i.default.CONTENT_STEERING_AS_ARRAY][0],r=new g.default;return r.serverUrl=t.__text,t.hasOwnProperty(i.default.DEFAULT_SERVICE_LOCATION)&&(r.defaultServiceLocation=t[i.default.DEFAULT_SERVICE_LOCATION]),t.hasOwnProperty(i.default.QUERY_BEFORE_START)&&(r.queryBeforeStart="true"===t[i.default.QUERY_BEFORE_START].toLowerCase()),t.hasOwnProperty(i.default.PROXY_SERVER_URL)&&(r.proxyServerUrl=t[i.default.PROXY_SERVER_URL]),r}},getLocation:function(e){if(e&&e.hasOwnProperty(n.default.LOCATION))return e.Location=e.Location_asArray[0],e.Location},getPatchLocation:function(e){if(e&&e.hasOwnProperty(i.default.PATCH_LOCATION))return e.PatchLocation=e.PatchLocation_asArray[0],e.PatchLocation},getSuggestedPresentationDelay:function(e){return e&&e.hasOwnProperty(i.default.SUGGESTED_PRESENTATION_DELAY)?e.suggestedPresentationDelay:null},getAvailabilityStartTime:function(e){return e&&e.hasOwnProperty(i.default.AVAILABILITY_START_TIME)&&null!==e.availabilityStartTime?e.availabilityStartTime.getTime():null},getServiceDescriptions:function(e){var t=[];if(e&&e.hasOwnProperty(i.default.SERVICE_DESCRIPTION)){var r,n=w(e.ServiceDescription_asArray);try{for(n.s();!(r=n.n()).done;){var o=r.value,u=null,l=null,c=null,f=null,d=null,h=null;for(var p in o)o.hasOwnProperty(p)&&(p===i.default.ID?u=o[p]:p===i.default.SERVICE_DESCRIPTION_SCOPE?l=o[p].schemeIdUri:p===i.default.SERVICE_DESCRIPTION_LATENCY?c={target:parseInt(o[p].target),max:parseInt(o[p].max),min:parseInt(o[p].min),referenceId:parseInt(o[p].referenceId)}:p===i.default.SERVICE_DESCRIPTION_PLAYBACK_RATE?f={max:parseFloat(o[p].max),min:parseFloat(o[p].min)}:p===i.default.SERVICE_DESCRIPTION_OPERATING_QUALITY?d={mediaType:o[p].mediaType,max:parseInt(o[p].max),min:parseInt(o[p].min),target:parseInt(o[p].target),type:o[p].type,maxQualityDifference:parseInt(o[p].maxQualityDifference)}:p===i.default.SERVICE_DESCRIPTION_OPERATING_BANDWIDTH&&(h={mediaType:o[p].mediaType,max:parseInt(o[p].max),min:parseInt(o[p].min),target:parseInt(o[p].target)}));t.push({id:u,schemeIdUri:l,latency:c,playbackRate:f,operatingQuality:d,operatingBandwidth:h})}}catch(e){n.e(e)}finally{n.f()}}return t},getSupplementalProperties:function(e){var t={};if(e&&e.hasOwnProperty(i.default.SUPPLEMENTAL_PROPERTY)){var r,o=w(e.SupplementalProperty_asArray);try{for(o.s();!(r=o.n()).done;){var u=r.value;u.hasOwnProperty(n.default.SCHEME_ID_URI)&&u.hasOwnProperty(i.default.VALUE)&&(t[u[n.default.SCHEME_ID_URI]]=u[i.default.VALUE])}}catch(e){o.e(e)}finally{o.f()}}return t},setConfig:function(e){e&&(e.errHandler&&(r=e.errHandler),e.BASE64&&(b=e.BASE64))}},t=Object(_.default)(I).getInstance().getLogger(e),e}I.__dashjs_factory_name="DashManifestModel",t.default=b.default.getSingletonFactory(I)},"./src/dash/models/PatchManifestModel.js":function(e,t,r){r.r(t);var n=r("./src/dash/constants/DashConstants.js"),i=r("./src/core/FactoryMaker.js"),o=r("./src/core/Debug.js"),u=r("./src/dash/vo/SimpleXPath.js"),l=r("./src/dash/vo/PatchOperation.js");function c(){var e,t,r=this.context;return e={getIsPatch:function(e){return e&&e.hasOwnProperty(n.default.ORIGINAL_MPD_ID)||!1},getPublishTime:function(e){return e&&e.hasOwnProperty(n.default.PUBLISH_TIME)?new Date(e[n.default.PUBLISH_TIME]):null},getOriginalPublishTime:function(e){return e&&e.hasOwnProperty(n.default.ORIGINAL_PUBLISH_TIME)?new Date(e[n.default.ORIGINAL_PUBLISH_TIME]):null},getMpdId:function(e){return e&&e[n.default.ORIGINAL_MPD_ID]||null},getPatchOperations:function(e){return e?(e.__children||[]).map(function(e){var r=Object.keys(e)[0];if("add"!==r&&"remove"!==r&&"replace"!==r)return t.warn("Ignoring node of invalid action: ".concat(r)),null;var n=e[r],i=n.sel;if("add"===r&&n.type){if(!n.type.startsWith("@"))return t.warn("Ignoring add action for prefixed namespace declaration: ".concat(n.type,"=").concat(n.__text)),null;i="".concat(i,"/").concat(n.type)}var o=new u.default(i);if(!o.isValid())return t.warn("Ignoring action with invalid selector: ".concat(r," - ").concat(i)),null;var c=null;o.findsAttribute()?c=n.__text||"":"remove"!==r&&(c=n.__children.reduce(function(e,t){var r=Object.keys(t)[0];return"#text"!==r&&(e[r]=e[r]||[],e[r].push(t[r])),e},{}));var f=new l.default(r,o,c);return"add"===r&&(f.position=n.pos),f}).filter(function(e){return!!e}):[]}},t=Object(o.default)(r).getInstance().getLogger(e),e}c.__dashjs_factory_name="PatchManifestModel",t.default=i.default.getSingletonFactory(c)},"./src/dash/parser/DashParser.js":function(e,t,r){r.r(t);var n=r("./src/core/FactoryMaker.js"),i=r("./src/dash/parser/objectiron.js"),o=r("./externals/xml2json.js"),u=r("./src/dash/parser/matchers/StringMatcher.js"),l=r("./src/dash/parser/matchers/DurationMatcher.js"),c=r("./src/dash/parser/matchers/DateTimeMatcher.js"),f=r("./src/dash/parser/matchers/NumericMatcher.js"),d=r("./src/dash/parser/matchers/LangMatcher.js"),h=r("./src/dash/parser/maps/RepresentationBaseValuesMap.js"),p=r("./src/dash/parser/maps/SegmentValuesMap.js");function m(e){e=e||{};var t,r,n,m,g,y=this.context,v=e.debug;return t={parse:function(e){var t,n=window.performance.now();if(!(t=m.xml_str2json(e)))throw Error("parsing the manifest failed");var i=window.performance.now();t.Patch?((t=t.Patch).add_asArray&&t.add_asArray.forEach(function(e){return g.run(e)}),t.replace_asArray&&t.replace_asArray.forEach(function(e){return g.run(e)})):(t=t.MPD,g.run(t));var o=window.performance.now();return r.info("Parsing complete: ( xml2json: "+(i-n).toPrecision(3)+"ms, objectiron: "+(o-i).toPrecision(3)+"ms, total: "+((o-n)/1e3).toPrecision(3)+"s)"),t.protocol="DASH",t},getMatchers:function(){return n},getIron:function(){return g}},r=v.getLogger(t),n=[new l.default,new c.default,new f.default,new d.default,new u.default],m=new o.default({escapeMode:!1,attributePrefix:"",arrayAccessForm:"property",emptyNodeForm:"object",stripWhitespaces:!1,enableToStringFunc:!0,ignoreRoot:!1,matchers:n}),g=Object(i.default)(y).create({adaptationset:new h.default,period:new p.default}),t}m.__dashjs_factory_name="DashParser",t.default=n.default.getClassFactory(m)},"./src/dash/parser/maps/CommonProperty.js":function(e,t,r){function n(e){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}r.r(t);var i=function(){function e(t){(function(e,t){if(!(e instanceof t))throw TypeError("Cannot call a class as a function")})(this,e),this._name=t,this._merge=t&&t.length&&t.charAt(0)===t.charAt(0).toUpperCase()}return function(e,t){for(var r,i=0;i<t.length;i++){var o=t[i];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,(r=function(e,t){if("object"!==n(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var i=r.call(e,"string");if("object"!==n(i))return i;throw TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(o.key),"symbol"===n(r)?r:String(r)),o)}}(e.prototype,[{key:"name",get:function(){return this._name}},{key:"merge",get:function(){return this._merge}}]),Object.defineProperty(e,"prototype",{writable:!1}),e}();t.default=i},"./src/dash/parser/maps/MapNode.js":function(e,t,r){r.r(t);var n=r("./src/dash/parser/maps/CommonProperty.js");function i(e){return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var o=function(){function e(t,r,i){var o=this;(function(e,t){if(!(e instanceof t))throw TypeError("Cannot call a class as a function")})(this,e),this._name=t||"",this._properties=[],this._children=i||[],Array.isArray(r)&&r.forEach(function(e){o._properties.push(new n.default(e))})}return function(e,t){for(var r,n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,(r=function(e,t){if("object"!==i(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,"string");if("object"!==i(n))return n;throw TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(o.key),"symbol"===i(r)?r:String(r)),o)}}(e.prototype,[{key:"name",get:function(){return this._name}},{key:"children",get:function(){return this._children}},{key:"properties",get:function(){return this._properties}}]),Object.defineProperty(e,"prototype",{writable:!1}),e}();t.default=o},"./src/dash/parser/maps/RepresentationBaseValuesMap.js":function(e,t,r){r.r(t);var n=r("./src/dash/parser/maps/MapNode.js"),i=r("./src/dash/constants/DashConstants.js");function o(e){return(o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function u(e,t){return(u=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function l(e){return(l=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var c=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&u(e,t)}(c,e);var t,r=(t=function(){if("undefined"==typeof Reflect||!Reflect.construct||Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}(),function(){var e,r=l(c);if(t){var n=l(this).constructor;e=Reflect.construct(r,arguments,n)}else e=r.apply(this,arguments);return function(e,t){if(t&&("object"===o(t)||"function"==typeof t))return t;if(void 0!==t)throw TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,e)});function c(){!function(e,t){if(!(e instanceof t))throw TypeError("Cannot call a class as a function")}(this,c);var e=[i.default.PROFILES,i.default.WIDTH,i.default.HEIGHT,i.default.SAR,i.default.FRAMERATE,i.default.AUDIO_SAMPLING_RATE,i.default.MIME_TYPE,i.default.SEGMENT_PROFILES,i.default.CODECS,i.default.MAXIMUM_SAP_PERIOD,i.default.START_WITH_SAP,i.default.MAX_PLAYOUT_RATE,i.default.CODING_DEPENDENCY,i.default.SCAN_TYPE,i.default.FRAME_PACKING,i.default.AUDIO_CHANNEL_CONFIGURATION,i.default.CONTENT_PROTECTION,i.default.ESSENTIAL_PROPERTY,i.default.SUPPLEMENTAL_PROPERTY,i.default.INBAND_EVENT_STREAM];return r.call(this,i.default.ADAPTATION_SET,e,[new n.default(i.default.REPRESENTATION,e,[new n.default(i.default.SUB_REPRESENTATION,e)])])}return Object.defineProperty(c,"prototype",{writable:!1}),c}(n.default);t.default=c},"./src/dash/parser/maps/SegmentValuesMap.js":function(e,t,r){r.r(t);var n=r("./src/dash/parser/maps/MapNode.js"),i=r("./src/dash/constants/DashConstants.js");function o(e){return(o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function u(e,t){return(u=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function l(e){return(l=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var c=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&u(e,t)}(c,e);var t,r=(t=function(){if("undefined"==typeof Reflect||!Reflect.construct||Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}(),function(){var e,r=l(c);if(t){var n=l(this).constructor;e=Reflect.construct(r,arguments,n)}else e=r.apply(this,arguments);return function(e,t){if(t&&("object"===o(t)||"function"==typeof t))return t;if(void 0!==t)throw TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,e)});function c(){!function(e,t){if(!(e instanceof t))throw TypeError("Cannot call a class as a function")}(this,c);var e=[i.default.SEGMENT_BASE,i.default.SEGMENT_TEMPLATE,i.default.SEGMENT_LIST];return r.call(this,i.default.PERIOD,e,[new n.default(i.default.ADAPTATION_SET,e,[new n.default(i.default.REPRESENTATION,e)])])}return Object.defineProperty(c,"prototype",{writable:!1}),c}(n.default);t.default=c},"./src/dash/parser/matchers/BaseMatcher.js":function(e,t,r){function n(e){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}r.r(t);var i=function(){function e(t,r){(function(e,t){if(!(e instanceof t))throw TypeError("Cannot call a class as a function")})(this,e),this._test=t,this._converter=r}return function(e,t){for(var r,i=0;i<t.length;i++){var o=t[i];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,(r=function(e,t){if("object"!==n(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var i=r.call(e,"string");if("object"!==n(i))return i;throw TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(o.key),"symbol"===n(r)?r:String(r)),o)}}(e.prototype,[{key:"test",get:function(){return this._test}},{key:"converter",get:function(){return this._converter}}]),Object.defineProperty(e,"prototype",{writable:!1}),e}();t.default=i},"./src/dash/parser/matchers/DateTimeMatcher.js":function(e,t,r){r.r(t);var n=r("./src/dash/parser/matchers/BaseMatcher.js");function i(e){return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function o(e,t){return(o=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function u(e){return(u=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var l=/^([0-9]{4})-([0-9]{2})-([0-9]{2})T([0-9]{2}):([0-9]{2})(?::([0-9]*)(\.[0-9]*)?)?(?:([+-])([0-9]{2})(?::?)([0-9]{2}))?/,c=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&o(e,t)}(n,e);var t,r=(t=function(){if("undefined"==typeof Reflect||!Reflect.construct||Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}(),function(){var e,r=u(n);if(t){var o=u(this).constructor;e=Reflect.construct(r,arguments,o)}else e=r.apply(this,arguments);return function(e,t){if(t&&("object"===i(t)||"function"==typeof t))return t;if(void 0!==t)throw TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,e)});function n(){return function(e,t){if(!(e instanceof t))throw TypeError("Cannot call a class as a function")}(this,n),r.call(this,function(e){return l.test(e.value)},function(e){var t,r=l.exec(e);if(t=Date.UTC(parseInt(r[1],10),parseInt(r[2],10)-1,parseInt(r[3],10),parseInt(r[4],10),parseInt(r[5],10),r[6]&&parseInt(r[6],10)||0,r[7]&&1e3*parseFloat(r[7])||0),r[9]&&r[10]){var n=60*parseInt(r[9],10)+parseInt(r[10],10);t+=("+"===r[8]?-1:1)*n*6e4}return new Date(t)})}return Object.defineProperty(n,"prototype",{writable:!1}),n}(n.default);t.default=c},"./src/dash/parser/matchers/DurationMatcher.js":function(e,t,r){r.r(t);var n=r("./src/dash/parser/matchers/BaseMatcher.js"),i=r("./src/streaming/constants/Constants.js"),o=r("./src/dash/constants/DashConstants.js");function u(e){return(u="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function l(e,t){return(l=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function c(e){return(c=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var f=/^([-])?P(([\d.]*)Y)?(([\d.]*)M)?(([\d.]*)D)?T?(([\d.]*)H)?(([\d.]*)M)?(([\d.]*)S)?/,d=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&l(e,t)}(n,e);var t,r=(t=function(){if("undefined"==typeof Reflect||!Reflect.construct||Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}(),function(){var e,r=c(n);if(t){var i=c(this).constructor;e=Reflect.construct(r,arguments,i)}else e=r.apply(this,arguments);return function(e,t){if(t&&("object"===u(t)||"function"==typeof t))return t;if(void 0!==t)throw TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,e)});function n(){return function(e,t){if(!(e instanceof t))throw TypeError("Cannot call a class as a function")}(this,n),r.call(this,function(e){for(var t=[o.default.MIN_BUFFER_TIME,o.default.MEDIA_PRESENTATION_DURATION,o.default.MINIMUM_UPDATE_PERIOD,o.default.TIMESHIFT_BUFFER_DEPTH,o.default.MAX_SEGMENT_DURATION,o.default.MAX_SUBSEGMENT_DURATION,o.default.SUGGESTED_PRESENTATION_DELAY,o.default.START,i.default.START_TIME,o.default.DURATION],r=t.length,n=0;n<r;n++)if(e.nodeName===t[n])return f.test(e.value);return!1},function(e){var t=f.exec(e),r=31536e3*parseFloat(t[3]||0)+2592e3*parseFloat(t[5]||0)+86400*parseFloat(t[7]||0)+3600*parseFloat(t[9]||0)+60*parseFloat(t[11]||0)+parseFloat(t[13]||0);return void 0!==t[1]&&(r=-r),r})}return Object.defineProperty(n,"prototype",{writable:!1}),n}(n.default);t.default=d},"./src/dash/parser/matchers/LangMatcher.js":function(e,t,r){r.r(t);var n=r("./src/dash/parser/matchers/BaseMatcher.js"),i=r("./src/dash/constants/DashConstants.js"),o=r("./node_modules/bcp-47-normalize/index.js"),u=r.n(o);function l(e){return(l="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function c(e,t,r){var n;return(n=function(e,t){if("object"!==l(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,"string");if("object"!==l(n))return n;throw TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(t),(t="symbol"===l(n)?n:String(n))in e)?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function f(e,t){return(f=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function d(e){return(d=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var h=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&f(e,t)}(n,e);var t,r=(t=function(){if("undefined"==typeof Reflect||!Reflect.construct||Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}(),function(){var e,r=d(n);if(t){var i=d(this).constructor;e=Reflect.construct(r,arguments,i)}else e=r.apply(this,arguments);return function(e,t){if(t&&("object"===l(t)||"function"==typeof t))return t;if(void 0!==t)throw TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,e)});function n(){return function(e,t){if(!(e instanceof t))throw TypeError("Cannot call a class as a function")}(this,n),r.call(this,function(e,t){var r,n=(c(r={},i.default.ADAPTATION_SET,[i.default.LANG]),c(r,i.default.REPRESENTATION,[i.default.LANG]),c(r,i.default.CONTENT_COMPONENT,[i.default.LANG]),c(r,i.default.LABEL,[i.default.LANG]),c(r,i.default.GROUP_LABEL,[i.default.LANG]),r);if(n.hasOwnProperty(t)){var o=n[t];return void 0!==o&&o.indexOf(e.name)>=0}return!1},function(e){var t=u()(e);return void 0!==t?t:String(e)})}return Object.defineProperty(n,"prototype",{writable:!1}),n}(n.default);t.default=h},"./src/dash/parser/matchers/NumericMatcher.js":function(e,t,r){r.r(t);var n=r("./src/dash/parser/matchers/BaseMatcher.js");function i(e){return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function o(e,t){return(o=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function u(e){return(u=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var l=/^[-+]?[0-9]+[.]?[0-9]*([eE][-+]?[0-9]+)?$/,c=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&o(e,t)}(n,e);var t,r=(t=function(){if("undefined"==typeof Reflect||!Reflect.construct||Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}(),function(){var e,r=u(n);if(t){var o=u(this).constructor;e=Reflect.construct(r,arguments,o)}else e=r.apply(this,arguments);return function(e,t){if(t&&("object"===i(t)||"function"==typeof t))return t;if(void 0!==t)throw TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,e)});function n(){return function(e,t){if(!(e instanceof t))throw TypeError("Cannot call a class as a function")}(this,n),r.call(this,function(e){return l.test(e.value)},function(e){return parseFloat(e)})}return Object.defineProperty(n,"prototype",{writable:!1}),n}(n.default);t.default=c},"./src/dash/parser/matchers/StringMatcher.js":function(e,t,r){r.r(t);var n=r("./src/dash/parser/matchers/BaseMatcher.js"),i=r("./src/dash/constants/DashConstants.js");function o(e){return(o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function u(e,t,r){var n;return(n=function(e,t){if("object"!==o(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,"string");if("object"!==o(n))return n;throw TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(t),(t="symbol"===o(n)?n:String(n))in e)?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function l(e,t){return(l=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function c(e){return(c=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var f=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&l(e,t)}(n,e);var t,r=(t=function(){if("undefined"==typeof Reflect||!Reflect.construct||Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}(),function(){var e,r=c(n);if(t){var i=c(this).constructor;e=Reflect.construct(r,arguments,i)}else e=r.apply(this,arguments);return function(e,t){if(t&&("object"===o(t)||"function"==typeof t))return t;if(void 0!==t)throw TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,e)});function n(){return function(e,t){if(!(e instanceof t))throw TypeError("Cannot call a class as a function")}(this,n),r.call(this,function(e,t){var r,n=(u(r={},i.default.MPD,[i.default.ID,i.default.PROFILES]),u(r,i.default.PERIOD,[i.default.ID]),u(r,i.default.BASE_URL,[i.default.SERVICE_LOCATION,i.default.BYTE_RANGE]),u(r,i.default.SEGMENT_BASE,[i.default.INDEX_RANGE]),u(r,i.default.INITIALIZATION,[i.default.RANGE]),u(r,i.default.REPRESENTATION_INDEX,[i.default.RANGE]),u(r,i.default.SEGMENT_LIST,[i.default.INDEX_RANGE]),u(r,i.default.BITSTREAM_SWITCHING,[i.default.RANGE]),u(r,i.default.SEGMENT_URL,[i.default.MEDIA_RANGE,i.default.INDEX_RANGE]),u(r,i.default.SEGMENT_TEMPLATE,[i.default.INDEX_RANGE,i.default.MEDIA,i.default.INDEX,i.default.INITIALIZATION_MINUS,i.default.BITSTREAM_SWITCHING_MINUS]),u(r,i.default.ASSET_IDENTIFIER,[i.default.VALUE,i.default.ID]),u(r,i.default.EVENT_STREAM,[i.default.VALUE]),u(r,i.default.ADAPTATION_SET,[i.default.PROFILES,i.default.MIME_TYPE,i.default.SEGMENT_PROFILES,i.default.CODECS,i.default.CONTENT_TYPE]),u(r,i.default.FRAME_PACKING,[i.default.VALUE,i.default.ID]),u(r,i.default.AUDIO_CHANNEL_CONFIGURATION,[i.default.VALUE,i.default.ID]),u(r,i.default.CONTENT_PROTECTION,[i.default.VALUE,i.default.ID]),u(r,i.default.ESSENTIAL_PROPERTY,[i.default.VALUE,i.default.ID]),u(r,i.default.SUPPLEMENTAL_PROPERTY,[i.default.VALUE,i.default.ID]),u(r,i.default.INBAND_EVENT_STREAM,[i.default.VALUE,i.default.ID]),u(r,i.default.ACCESSIBILITY,[i.default.VALUE,i.default.ID]),u(r,i.default.ROLE,[i.default.VALUE,i.default.ID]),u(r,i.default.RATING,[i.default.VALUE,i.default.ID]),u(r,i.default.VIEWPOINT,[i.default.VALUE,i.default.ID]),u(r,i.default.CONTENT_COMPONENT,[i.default.CONTENT_TYPE]),u(r,i.default.REPRESENTATION,[i.default.ID,i.default.DEPENDENCY_ID,i.default.MEDIA_STREAM_STRUCTURE_ID]),u(r,i.default.SUBSET,[i.default.ID]),u(r,i.default.METRICS,[i.default.METRICS_MINUS]),u(r,i.default.REPORTING,[i.default.VALUE,i.default.ID]),r);if(n.hasOwnProperty(t)){var o=n[t];return void 0!==o&&o.indexOf(e.name)>=0}return!1},function(e){return String(e)})}return Object.defineProperty(n,"prototype",{writable:!1}),n}(n.default);t.default=f},"./src/dash/parser/objectiron.js":function(e,t,r){r.r(t);var n=r("./src/core/FactoryMaker.js");function i(e){return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function o(e){function t(e,r){for(var n=0,o=e.children.length;n<o;++n){var u=e.children[n],l=r[u.name+"_asArray"];if(l)for(var c=0,f=l.length;c<f;++c){var d=l[c];(function(e,t,r){for(var n=0,o=e.length;n<o;++n){var u=e[n];if(t[u.name]){if(r[u.name]){if(u.merge){var l=t[u.name],c=r[u.name];"object"===i(l)&&"object"===i(c)?function(e,t){for(var r in e)t.hasOwnProperty(r)||(t[r]=e[r])}(l,c):r[u.name]=l+c}}else r[u.name]=t[u.name]}}})(e.properties,r,d),t(u,d)}}}return{run:function(r){if(null===r||"object"!==i(r))return r;if(r.Period_asArray&&"period"in e)for(var n=e.period,o=r.Period_asArray,u=0,l=o.length;u<l;++u){var c=o[u];if(t(n,c),"adaptationset"in e){var f=c.AdaptationSet_asArray;if(f)for(var d=e.adaptationset,h=0,p=f.length;h<p;++h)t(d,f[h])}}return r}}}o.__dashjs_factory_name="ObjectIron";var u=n.default.getClassFactory(o);t.default=u},"./src/dash/utils/ListSegmentsGetter.js":function(e,t,r){r.r(t);var n=r("./src/core/FactoryMaker.js"),i=r("./src/streaming/constants/Constants.js"),o=r("./src/dash/utils/SegmentsUtils.js");function u(e,t){var r=(e=e||{}).timelineConverter;function n(){if(!r||!r.hasOwnProperty("calcPeriodRelativeTimeFromMpdRelativeTime"))throw Error(i.default.MISSING_CONFIG_ERROR)}function u(e,i){if(n(),!e)return null;var u=e.adaptation.period.mpd.manifest.Period_asArray[e.adaptation.period.index].AdaptationSet_asArray[e.adaptation.index].Representation_asArray[e.index].SegmentList,l=u.SegmentURL_asArray.length,c=e&&!isNaN(e.startNumber)?e.startNumber:1,f=Math.max(i-Math.max(c-1,0),0),d=null;if(f<l){var h=u.SegmentURL_asArray[f];(d=Object(o.getIndexBasedSegment)(r,t,e,i))&&(d.replacementTime=(c+i-1)*e.segmentDuration,d.media=h.media?h.media:"",d.mediaRange=h.mediaRange,d.indexRange=h.indexRange)}return d}return{getSegmentByIndex:u,getSegmentByTime:function(e,t){if(n(),!e)return null;var i=e.segmentDuration;if(isNaN(i))return null;var o=r.calcPeriodRelativeTimeFromMpdRelativeTime(e,t);return u(e,Math.floor(o/i))},getMediaFinishedInformation:function(e){var t={numberOfSegments:0,mediaTimeOfLastSignaledSegment:NaN};if(!e)return t;var r=e.adaptation.period.mpd.manifest.Period_asArray[e.adaptation.period.index].AdaptationSet_asArray[e.adaptation.index].Representation_asArray[e.index].SegmentList,n=Math.max((e&&!isNaN(e.startNumber)?e.startNumber:1)-1,0);return t.numberOfSegments=n+r.SegmentURL_asArray.length,t}}}u.__dashjs_factory_name="ListSegmentsGetter";var l=n.default.getClassFactory(u);t.default=l},"./src/dash/utils/Round10.js":function(e,t,r){function n(e){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}r.r(t),r.d(t,"default",function(){return i});var i=function(){function e(){!function(e,t){if(!(e instanceof t))throw TypeError("Cannot call a class as a function")}(this,e)}return function(e,t){for(var r,i=0;i<t.length;i++){var o=t[i];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,(r=function(e,t){if("object"!==n(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var i=r.call(e,"string");if("object"!==n(i))return i;throw TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(o.key),"symbol"===n(r)?r:String(r)),o)}}(e,[{key:"round10",value:function(e,t){var r,n,i;return r="round",n=e,void 0===(i=t)||0==+i?Math[r](n):(i=+i,isNaN(n=+n)||"number"!=typeof i||i%1!=0?NaN:+((n=(n=Math[r](+((n=n.toString().split("e"))[0]+"e"+(n[1]?+n[1]-i:-i)))).toString().split("e"))[0]+"e"+(n[1]?+n[1]+i:i)))}}]),Object.defineProperty(e,"prototype",{writable:!1}),e}()},"./src/dash/utils/SegmentBaseGetter.js":function(e,t,r){r.r(t);var n=r("./src/core/FactoryMaker.js"),i=r("./src/streaming/constants/Constants.js");function o(e){var t=(e=e||{}).timelineConverter;function r(){if(!t||!t.hasOwnProperty("calcPeriodRelativeTimeFromMpdRelativeTime"))throw Error(i.default.MISSING_CONFIG_ERROR)}function n(e,t){if(r(),!e)return null;var n,i=e.segments?e.segments.length:-1;if(t<i&&(n=e.segments[t])&&n.index===t)return n;for(var o=0;o<i;o++)if((n=e.segments[o])&&n.index===t)return n;return null}return{getSegmentByIndex:n,getSegmentByTime:function(e,t){r();var i=function(e,t){if(!e)return -1;var r,n,i,o,u,l=e.segments,c=l?l.length:null,f=-1;if(l&&c>0){for(u=0;u<c;u++)if(i=(n=l[u]).presentationStartTime,t+(r=(o=n.duration)/2)>=i&&t-r<i+o){f=n.index;break}}return f}(e,t);return n(e,i)},getMediaFinishedInformation:function(e){var t={numberOfSegments:0,mediaTimeOfLastSignaledSegment:NaN};return e&&e.segments&&(t.numberOfSegments=e.segments.length),t}}}o.__dashjs_factory_name="SegmentBaseGetter";var u=n.default.getClassFactory(o);t.default=u},"./src/dash/utils/SegmentsUtils.js":function(e,t,r){r.r(t),r.d(t,"unescapeDollarsInTemplate",function(){return o}),r.d(t,"replaceIDForTemplate",function(){return u}),r.d(t,"replaceTokenForTemplate",function(){return l}),r.d(t,"getIndexBasedSegment",function(){return d}),r.d(t,"getTimeBasedSegment",function(){return h});var n=r("./src/dash/vo/Segment.js");function i(e,t){for(;e.length<t;)e="0"+e;return e}function o(e){return e?e.split("$$").join("$"):e}function u(e,t){if(!t||!e||-1===e.indexOf("$RepresentationID$"))return e;var r=t.toString();return e.split("$RepresentationID$").join(r)}function l(e,t,r){var n,o,u,l,c,f,d=t.length;if(!e)return e;for(;;){if((n=e.indexOf("$"+t))<0||(o=e.indexOf("$",n+d))<0)return e;if((u=e.indexOf("%0",n+d))>n&&u<o)switch(l=e.charAt(o-1),c=parseInt(e.substring(u+2,o-1),10),l){case"d":case"i":case"u":f=i(r.toString(),c);break;case"x":f=i(r.toString(16),c);break;case"X":f=i(r.toString(16),c).toUpperCase();break;case"o":f=i(r.toString(8),c);break;default:return e}else f=r;e=e.substring(0,n)+f+e.substring(o+1)}}function c(e,t,r,i,o,u,l,c){var f=new n.default;return f.representation=e,f.duration=t,f.presentationStartTime=r,f.mediaStartTime=i,f.availabilityStartTime=o.calcAvailabilityStartTimeFromPresentationTime(u,e,l),f.availabilityEndTime=o.calcAvailabilityEndTimeFromPresentationTime(u+t,e,l),f.wallStartTime=o.calcWallTimeForSegment(f,l),f.replacementNumber=f.representation.startNumber+c,f.index=c,f}function f(e,t,r,n){var i=t.adaptation.period;if(isFinite(i.duration)&&i.start+i.duration<=r.presentationStartTime)return!1;if(n){if("INF"===t.availabilityTimeOffset)return!0;var o=e.getClientReferenceTime();return r.availabilityStartTime.getTime()<=o&&(!isFinite(r.availabilityEndTime)||r.availabilityEndTime.getTime()>=o)}return!0}function d(e,t,r,n){isNaN(i=r.segmentDuration)&&(i=r.adaptation.period.duration),u=parseFloat(((o=parseFloat((r.adaptation.period.start+n*i).toFixed(5)))+i).toFixed(5));var i,o,u,l=c(r,i,o,e.calcMediaTimeFromPresentationTime(o,r),e,u,t,n);return f(e,r,l,t)?l:null}function h(e,t,r,n,i,o,u,d,h,p){var m,g,y=n/o,v=i/o;return m=e.calcPresentationTimeFromMediaTime(y,r),f(e,r,g=c(r,v,m,y,e,m+v,t,h),t)?(g.replacementTime=p||n,u=l(u,"Number",g.replacementNumber),u=l(u,"Time",g.replacementTime),g.media=u,g.mediaRange=d,g):null}},"./src/dash/utils/TemplateSegmentsGetter.js":function(e,t,r){r.r(t);var n=r("./src/core/FactoryMaker.js"),i=r("./src/streaming/constants/Constants.js"),o=r("./src/dash/utils/SegmentsUtils.js");function u(e,t){var r=(e=e||{}).timelineConverter;function n(){if(!r||!r.hasOwnProperty("calcPeriodRelativeTimeFromMpdRelativeTime"))throw Error(i.default.MISSING_CONFIG_ERROR)}function u(e,i){if(n(),!e)return null;var u=e.adaptation.period.mpd.manifest.Period_asArray[e.adaptation.period.index].AdaptationSet_asArray[e.adaptation.index].Representation_asArray[e.index].SegmentTemplate;i=Math.max(i,0);var l=Object(o.getIndexBasedSegment)(r,t,e,i);if(l){l.replacementTime=Math.round((i-1)*e.segmentDuration*e.timescale,10);var c=u.media;c=Object(o.replaceTokenForTemplate)(c,"Number",l.replacementNumber),c=Object(o.replaceTokenForTemplate)(c,"Time",l.replacementTime),l.media=c}return l}return{getSegmentByIndex:u,getSegmentByTime:function(e,t){if(n(),!e)return null;var i=e.segmentDuration;if(isNaN(i))return null;var o=r.calcPeriodRelativeTimeFromMpdRelativeTime(e,t);return u(e,Math.floor(o/i))},getMediaFinishedInformation:function(e){var t={numberOfSegments:0,mediaTimeOfLastSignaledSegment:NaN};if(!e)return t;var r=e.segmentDuration;return isNaN(r)?t.numberOfSegments=1:t.numberOfSegments=Math.ceil(e.adaptation.period.duration/r),t}}}u.__dashjs_factory_name="TemplateSegmentsGetter";var l=n.default.getClassFactory(u);t.default=l},"./src/dash/utils/TimelineConverter.js":function(e,t,r){r.r(t);var n=r("./src/core/EventBus.js"),i=r("./src/core/events/Events.js"),o=r("./src/core/FactoryMaker.js"),u=r("./src/dash/constants/DashConstants.js"),l=r("./src/dash/models/DashManifestModel.js"),c=r("./src/core/Settings.js"),f=r("./src/streaming/constants/Constants.js"),d=r("./src/streaming/MediaPlayerEvents.js"),h=r("./src/streaming/constants/ConformanceViolationConstants.js");function p(){var e,t,r,o=this.context,p=Object(n.default)(o).getInstance(),m=Object(c.default)(o).getInstance();function g(e,t,r,n){var i,o=t.adaptation.period.mpd,u=o.availabilityStartTime;if(n)i=r&&o.timeShiftBufferDepth!==Number.POSITIVE_INFINITY?new Date(u.getTime()+1e3*(e+o.timeShiftBufferDepth)):o.availabilityEndTime;else if(r){var l=t.availabilityTimeOffset;i=new Date(u.getTime()+1e3*(e-l))}else i=u;return i}function y(e,t){return(e.getTime()-t.mpd.availabilityStartTime.getTime()+1e3*r)/1e3}function v(e,t){return e+(t.adaptation.period.start-t.presentationTimeOffset)}function b(t){var r={start:NaN,end:NaN},n=t[0].getAdapter().getRegularPeriods()[0],i=y(new Date,n);if(!t||0===t.length)return{range:r,now:i};t.forEach(function(t){var n=t.getAdapter(),o=n.getMediaInfoForType(t.getStreamInfo(),f.default.VIDEO)||n.getMediaInfoForType(t.getStreamInfo(),f.default.AUDIO),l=n.getVoRepresentations(o)[0],c={start:NaN,end:NaN};if(l){if(l.segmentInfoType===u.default.SEGMENT_TIMELINE)c=function(t){var r,n,i,o,u=t.adaptation.period.mpd.manifest.Period_asArray[t.adaptation.period.index].AdaptationSet_asArray[t.adaptation.index],l=e.getRepresentationFor(t.index,u),c=l.SegmentTemplate.SegmentTimeline,f=l.SegmentTemplate.timescale,d=c.S_asArray,h={start:0,end:0},p=0;for(h.start=v(d[0].t/f,t),i=0,o=d.length;i<o;i++)n=0,(r=d[i]).hasOwnProperty("r")&&(n=r.r),p+=r.d*(1+n);return h.end=v((d[0].t+p)/f,t),h}(l);else{var d=l.adaptation.period;c.start=d.start,c.end=Math.max(i,d.start+d.duration)}}!isNaN(c.start)&&(isNaN(r.start)||r.start>c.start)&&(r.start=c.start),!isNaN(c.end)&&(isNaN(r.end)||r.end<c.end)&&(r.end=c.end)}),r.end=Math.min(i,r.end);var o=_(t,r.end,!0);return r.end=isNaN(o)?r.end:o,r.start=n&&n.mpd&&n.mpd.timeShiftBufferDepth&&!isNaN(n.mpd.timeShiftBufferDepth)&&!isNaN(r.end)?Math.max(r.end-n.mpd.timeShiftBufferDepth,r.start):r.start,r.start=_(t,r.start),{range:r,now:i}}function _(e,t){var r=arguments.length>2&&void 0!==arguments[2]&&arguments[2];try{for(var n=0,i=!1,o=NaN;!i&&n<e.length;){var u=e[n].getStreamInfo();u.start<=t&&(!isFinite(u.duration)||u.start+u.duration>=t)?(o=t,i=!0):!r&&u.start>t&&(isNaN(o)||u.start<o)?o=u.start:r&&u.start+u.duration<t&&(isNaN(o)||u.start+u.duration>o)&&(o=u.start+u.duration),n+=1}return o}catch(e){return t}}function T(e){void 0===e.offset||isNaN(e.offset)||(r=e.offset/1e3)}function E(){p.off(i.default.UPDATE_TIME_SYNC_OFFSET,T,this),r=0,t=0}return e=Object(l.default)(o).getInstance(),E(),{initialize:function(){r=0,t=0,p.on(i.default.UPDATE_TIME_SYNC_OFFSET,T,this)},getClientTimeOffset:function(){return r},setClientTimeOffset:function(e){r=e},getClientReferenceTime:function(){return Date.now()-1e3*t+1e3*r},calcAvailabilityStartTimeFromPresentationTime:function(e,t,r){return g(e,t,r)},calcAvailabilityEndTimeFromPresentationTime:function(e,t,r){return g(e,t,r,!0)},calcPresentationTimeFromWallTime:y,calcPresentationTimeFromMediaTime:v,calcPeriodRelativeTimeFromMpdRelativeTime:function(e,t){return t-e.adaptation.period.start},calcMediaTimeFromPresentationTime:function(e,t){return e-t.adaptation.period.start+t.presentationTimeOffset},calcWallTimeForSegment:function(e,t){var r,n,i;return t&&(r=e.representation.adaptation.period.mpd.suggestedPresentationDelay,n=e.presentationStartTime+r,i=new Date(e.availabilityStartTime.getTime()+1e3*n)),i},calcTimeShiftBufferWindow:function(e,r){if(!r){var n,i,o;return n={start:NaN,end:NaN},i=0,o=NaN,e.forEach(function(e){var t=e.getStreamInfo();i+=t.duration,(isNaN(o)||t.start<o)&&(o=t.start)}),n.start=o,n.end=o+i,n}if(m.get().streaming.timeShiftBuffer.calcFromSegmentTimeline){var u=b(e);return t=u.now-u.range.end,u.range}return function(e){var r={start:NaN,end:NaN};if(!e||0===e.length)return r;var n=e[0].getAdapter().getRegularPeriods()[0],i=y(new Date,n),o=n.mpd.timeShiftBufferDepth,u=isNaN(o)?0:i-o;if(r.start=_(e,u),r.end=!isNaN(r.start)&&i<r.start?i:_(e,i,!0),!isNaN(o)&&r.end<i-o&&(r.end=NaN),m.get().streaming.timeShiftBuffer.fallbackToSegmentTimeline){var l=b(e);if(l.range.end<r.start)return p.trigger(d.default.CONFORMANCE_VIOLATION,{level:h.default.LEVELS.WARNING,event:h.default.EVENTS.INVALID_DVR_WINDOW}),t=l.now-l.range.end,l.range}return r}(e)},reset:E}}p.__dashjs_factory_name="TimelineConverter",t.default=o.default.getSingletonFactory(p)},"./src/dash/utils/TimelineSegmentsGetter.js":function(e,t,r){r.r(t);var n=r("./src/core/FactoryMaker.js"),i=r("./src/streaming/constants/Constants.js"),o=r("./src/dash/utils/SegmentsUtils.js");function u(e,t){var r=(e=e||{}).timelineConverter,n=e.dashMetrics;function u(){if(!r)throw Error(i.default.MISSING_CONFIG_ERROR)}function l(e,t){var r,n,i,o,u,l,f,d=e.adaptation.period.mpd.manifest.Period_asArray[e.adaptation.period.index].AdaptationSet_asArray[e.adaptation.index].Representation_asArray[e.index].SegmentTemplate||e.adaptation.period.mpd.manifest.Period_asArray[e.adaptation.period.index].AdaptationSet_asArray[e.adaptation.index].Representation_asArray[e.index].SegmentList,h=d.SegmentTimeline,p=d.SegmentURL_asArray,m=0,g=-1;f=e.timescale;var y=!1;for(i=0,o=(r=h.S_asArray).length;i<o&&!y;i++)for(l=0,(n=r[i]).hasOwnProperty("r")&&(l=n.r),n.hasOwnProperty("t")&&(m=n.t),l<0&&(l=c(e,r[i+1],n,f,m/f)),u=0;u<=l&&!y;u++)(y=t(m,d,p,n,f,++g,i))&&(e.segmentDuration=n.d/f),m+=n.d}function c(e,t,i,o,u){var l;if(t&&t.hasOwnProperty("t"))l=t.t/o;else try{var c=0;if(isNaN(e.adaptation.period.start)||isNaN(e.adaptation.period.duration)||!isFinite(e.adaptation.period.duration)){var f=n.getCurrentDVRInfo();c=isNaN(f.end)?0:f.end}else c=e.adaptation.period.start+e.adaptation.period.duration;l=r.calcMediaTimeFromPresentationTime(c,e),e.segmentDuration=i.d/o}catch(e){l=0}return Math.max(Math.ceil((l-u)/(i.d/o))-1,0)}return{getSegmentByIndex:function(e,n,i){if(u(),!e)return null;var c=null,f=!1;return l(e,function(n,u,l,d,h,p,m){if(f||i<0){var g=u.media,y=d.mediaRange;return l&&(g=l[m].media||"",y=l[m].mediaRange),c=Object(o.getTimeBasedSegment)(r,t,e,n,d.d,h,g,y,p,d.tManifest),!0}return n>=i*h-.5*d.d&&(f=!0),!1}),c},getSegmentByTime:function(e,n){if(u(),!e)return null;void 0===n&&(n=null);var i=null,c=r.calcMediaTimeFromPresentationTime(n,e);return l(e,function(n,u,l,f,d,h,p){var m=parseFloat((c*d).toPrecision(15));if(m<n+f.d&&m>=n){var g=u.media,y=f.mediaRange;return l&&(g=l[p].media||"",y=l[p].mediaRange),i=Object(o.getTimeBasedSegment)(r,t,e,n,f.d,d,g,y,h,f.tManifest),!0}return!1}),i},getMediaFinishedInformation:function(e){if(!e)return 0;var t,r,n,i,o,u,l,f=(e.adaptation.period.mpd.manifest.Period_asArray[e.adaptation.period.index].AdaptationSet_asArray[e.adaptation.index].Representation_asArray[e.index].SegmentTemplate||e.adaptation.period.mpd.manifest.Period_asArray[e.adaptation.period.index].AdaptationSet_asArray[e.adaptation.index].Representation_asArray[e.index].SegmentList).SegmentTimeline,d=0,h=0,p=0;for(l=e.timescale,i=(t=f.S_asArray).length,n=0;n<i;n++)for(u=0,(r=t[n]).hasOwnProperty("r")&&(u=r.r),r.hasOwnProperty("t")&&(h=(d=r.t)/l),u<0&&(u=c(e,t[n+1],r,l,h)),o=0;o<=u;o++)p++,h=(d+=r.d)/l;return{numberOfSegments:p,mediaTimeOfLastSignaledSegment:h}}}}u.__dashjs_factory_name="TimelineSegmentsGetter";var l=n.default.getClassFactory(u);t.default=l},"./src/dash/vo/AdaptationSet.js":function(e,t,r){function n(e){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function i(e,t){for(var r,i=0;i<t.length;i++){var o=t[i];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,(r=function(e,t){if("object"!==n(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var i=r.call(e,"string");if("object"!==n(i))return i;throw TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(o.key),"symbol"===n(r)?r:String(r)),o)}}r.r(t);var o,u,l,c=(o=function e(){(function(e,t){if(!(e instanceof t))throw TypeError("Cannot call a class as a function")})(this,e),this.period=null,this.index=-1,this.type=null},u&&i(o.prototype,u),l&&i(o,l),Object.defineProperty(o,"prototype",{writable:!1}),o);t.default=c},"./src/dash/vo/BaseURL.js":function(e,t,r){function n(e){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function i(e,t){for(var r,i=0;i<t.length;i++){var o=t[i];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,(r=function(e,t){if("object"!==n(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var i=r.call(e,"string");if("object"!==n(i))return i;throw TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(o.key),"symbol"===n(r)?r:String(r)),o)}}r.r(t);var o,u,l,c=(o=function e(t,r,n,i){(function(e,t){if(!(e instanceof t))throw TypeError("Cannot call a class as a function")})(this,e),this.url=t||"",this.serviceLocation=r||t||"",this.dvb_priority=n||1,this.dvb_weight=i||1,this.availabilityTimeOffset=0,this.availabilityTimeComplete=!0},u&&i(o.prototype,u),l&&i(o,l),Object.defineProperty(o,"prototype",{writable:!1}),o);c.DEFAULT_DVB_PRIORITY=1,c.DEFAULT_DVB_WEIGHT=1,t.default=c},"./src/dash/vo/ContentSteering.js":function(e,t,r){function n(e){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function i(e,t){for(var r,i=0;i<t.length;i++){var o=t[i];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,(r=function(e,t){if("object"!==n(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var i=r.call(e,"string");if("object"!==n(i))return i;throw TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(o.key),"symbol"===n(r)?r:String(r)),o)}}r.r(t);var o,u,l,c=(o=function e(){(function(e,t){if(!(e instanceof t))throw TypeError("Cannot call a class as a function")})(this,e),this.defaultServiceLocation=null,this.queryBeforeStart=!1,this.proxyServerUrl=null,this.serverUrl=null},u&&i(o.prototype,u),l&&i(o,l),Object.defineProperty(o,"prototype",{writable:!1}),o);t.default=c},"./src/dash/vo/ContentSteeringRequest.js":function(e,t,r){r.r(t);var n,i,o,u=r("./src/streaming/vo/metrics/HTTPRequest.js");function l(e){return(l="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function c(e,t){for(var r,n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,(r=function(e,t){if("object"!==l(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,"string");if("object"!==l(n))return n;throw TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(i.key),"symbol"===l(r)?r:String(r)),i)}}var f=(n=function e(t){(function(e,t){if(!(e instanceof t))throw TypeError("Cannot call a class as a function")})(this,e),this.url=t||null,this.type=u.HTTPRequest.CONTENT_STEERING_TYPE,this.responseType="json"},i&&c(n.prototype,i),o&&c(n,o),Object.defineProperty(n,"prototype",{writable:!1}),n);t.default=f},"./src/dash/vo/ContentSteeringResponse.js":function(e,t,r){function n(e){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function i(e,t){for(var r,i=0;i<t.length;i++){var o=t[i];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,(r=function(e,t){if("object"!==n(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var i=r.call(e,"string");if("object"!==n(i))return i;throw TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(o.key),"symbol"===n(r)?r:String(r)),o)}}r.r(t);var o,u,l,c=(o=function e(){(function(e,t){if(!(e instanceof t))throw TypeError("Cannot call a class as a function")})(this,e),this.version=null,this.ttl=300,this.reloadUri=null,this.serviceLocationPriority=[]},u&&i(o.prototype,u),l&&i(o,l),Object.defineProperty(o,"prototype",{writable:!1}),o);t.default=c},"./src/dash/vo/Event.js":function(e,t,r){function n(e){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function i(e,t){for(var r,i=0;i<t.length;i++){var o=t[i];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,(r=function(e,t){if("object"!==n(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var i=r.call(e,"string");if("object"!==n(i))return i;throw TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(o.key),"symbol"===n(r)?r:String(r)),o)}}r.r(t);var o,u,l,c=(o=function e(){(function(e,t){if(!(e instanceof t))throw TypeError("Cannot call a class as a function")})(this,e),this.duration=NaN,this.presentationTime=NaN,this.id=NaN,this.messageData="",this.eventStream=null,this.presentationTimeDelta=NaN},u&&i(o.prototype,u),l&&i(o,l),Object.defineProperty(o,"prototype",{writable:!1}),o);t.default=c},"./src/dash/vo/EventStream.js":function(e,t,r){function n(e){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function i(e,t){for(var r,i=0;i<t.length;i++){var o=t[i];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,(r=function(e,t){if("object"!==n(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var i=r.call(e,"string");if("object"!==n(i))return i;throw TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(o.key),"symbol"===n(r)?r:String(r)),o)}}r.r(t);var o,u,l,c=(o=function e(){(function(e,t){if(!(e instanceof t))throw TypeError("Cannot call a class as a function")})(this,e),this.adaptionSet=null,this.representation=null,this.period=null,this.timescale=1,this.value="",this.schemeIdUri="",this.presentationTimeOffset=0},u&&i(o.prototype,u),l&&i(o,l),Object.defineProperty(o,"prototype",{writable:!1}),o);t.default=c},"./src/dash/vo/ManifestInfo.js":function(e,t,r){function n(e){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function i(e,t){for(var r,i=0;i<t.length;i++){var o=t[i];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,(r=function(e,t){if("object"!==n(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var i=r.call(e,"string");if("object"!==n(i))return i;throw TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(o.key),"symbol"===n(r)?r:String(r)),o)}}r.r(t);var o,u,l,c=(o=function e(){(function(e,t){if(!(e instanceof t))throw TypeError("Cannot call a class as a function")})(this,e),this.dvrWindowSize=NaN,this.loadedTime=null,this.availableFrom=null,this.minBufferTime=NaN,this.duration=NaN,this.isDynamic=!1,this.maxFragmentDuration=null},u&&i(o.prototype,u),l&&i(o,l),Object.defineProperty(o,"prototype",{writable:!1}),o);t.default=c},"./src/dash/vo/MediaInfo.js":function(e,t,r){function n(e){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function i(e,t){for(var r,i=0;i<t.length;i++){var o=t[i];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,(r=function(e,t){if("object"!==n(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var i=r.call(e,"string");if("object"!==n(i))return i;throw TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(o.key),"symbol"===n(r)?r:String(r)),o)}}r.r(t);var o,u,l,c=(o=function e(){(function(e,t){if(!(e instanceof t))throw TypeError("Cannot call a class as a function")})(this,e),this.id=null,this.index=null,this.type=null,this.streamInfo=null,this.representationCount=0,this.labels=null,this.lang=null,this.viewpoint=null,this.accessibility=null,this.audioChannelConfiguration=null,this.roles=null,this.codec=null,this.mimeType=null,this.contentProtection=null,this.KID=null,this.bitrateList=null,this.isFragmented=null,this.isEmbedded=null,this.selectionPriority=1,this.supplementalProperties={}},u&&i(o.prototype,u),l&&i(o,l),Object.defineProperty(o,"prototype",{writable:!1}),o);t.default=c},"./src/dash/vo/Mpd.js":function(e,t,r){function n(e){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function i(e,t){for(var r,i=0;i<t.length;i++){var o=t[i];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,(r=function(e,t){if("object"!==n(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var i=r.call(e,"string");if("object"!==n(i))return i;throw TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(o.key),"symbol"===n(r)?r:String(r)),o)}}r.r(t);var o,u,l,c=(o=function e(){(function(e,t){if(!(e instanceof t))throw TypeError("Cannot call a class as a function")})(this,e),this.manifest=null,this.suggestedPresentationDelay=0,this.availabilityStartTime=null,this.availabilityEndTime=Number.POSITIVE_INFINITY,this.timeShiftBufferDepth=Number.POSITIVE_INFINITY,this.maxSegmentDuration=Number.POSITIVE_INFINITY,this.publishTime=null,this.minimumUpdatePeriod=NaN,this.mediaPresentationDuration=NaN},u&&i(o.prototype,u),l&&i(o,l),Object.defineProperty(o,"prototype",{writable:!1}),o);t.default=c},"./src/dash/vo/PatchOperation.js":function(e,t,r){function n(e){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}r.r(t);var i=function(){var e;function t(e,r,n){(function(e,t){if(!(e instanceof t))throw TypeError("Cannot call a class as a function")})(this,t),this.action=e,this.xpath=r,this.value=n,this.position=null}return e=[{key:"getMpdTarget",value:function(e){var t="remove"===this.action||"replace"===this.action||"before"===this.position||"after"===this.position;return this.xpath.getMpdTarget(e,t)}}],function(e,t){for(var r,i=0;i<t.length;i++){var o=t[i];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,(r=function(e,t){if("object"!==n(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var i=r.call(e,"string");if("object"!==n(i))return i;throw TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(o.key),"symbol"===n(r)?r:String(r)),o)}}(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t}();t.default=i},"./src/dash/vo/Period.js":function(e,t,r){function n(e){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function i(e,t){for(var r,i=0;i<t.length;i++){var o=t[i];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,(r=function(e,t){if("object"!==n(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var i=r.call(e,"string");if("object"!==n(i))return i;throw TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(o.key),"symbol"===n(r)?r:String(r)),o)}}r.r(t);var o,u,l,c=(o=function e(){(function(e,t){if(!(e instanceof t))throw TypeError("Cannot call a class as a function")})(this,e),this.id=null,this.index=-1,this.duration=NaN,this.start=NaN,this.mpd=null,this.nextPeriodId=null},u&&i(o.prototype,u),l&&i(o,l),Object.defineProperty(o,"prototype",{writable:!1}),o);c.DEFAULT_ID="defaultId",t.default=c},"./src/dash/vo/ProducerReferenceTime.js":function(e,t,r){function n(e){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function i(e,t){for(var r,i=0;i<t.length;i++){var o=t[i];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,(r=function(e,t){if("object"!==n(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var i=r.call(e,"string");if("object"!==n(i))return i;throw TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(o.key),"symbol"===n(r)?r:String(r)),o)}}r.r(t);var o,u,l,c=(o=function e(){(function(e,t){if(!(e instanceof t))throw TypeError("Cannot call a class as a function")})(this,e),this.id=null,this.inband=!1,this.type="encoder",this.applicationScheme=null,this.wallClockTime=null,this.presentationTime=NaN,this.UTCTiming=null},u&&i(o.prototype,u),l&&i(o,l),Object.defineProperty(o,"prototype",{writable:!1}),o);t.default=c},"./src/dash/vo/Representation.js":function(e,t,r){r.r(t);var n=r("./src/dash/constants/DashConstants.js");function i(e){return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var o=function(){function e(){(function(e,t){if(!(e instanceof t))throw TypeError("Cannot call a class as a function")})(this,e),this.id=null,this.index=-1,this.adaptation=null,this.segmentInfoType=null,this.initialization=null,this.codecs=null,this.mimeType=null,this.codecPrivateData=null,this.segmentDuration=NaN,this.timescale=1,this.startNumber=1,this.indexRange=null,this.range=null,this.presentationTimeOffset=0,this.MSETimeOffset=NaN,this.mediaFinishedInformation={numberOfSegments:0,mediaTimeOfLastSignaledSegment:NaN},this.bandwidth=NaN,this.width=NaN,this.height=NaN,this.scanType=null,this.maxPlayoutRate=NaN,this.availabilityTimeOffset=0,this.availabilityTimeComplete=!0}return function(e,t){for(var r,n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,(r=function(e,t){if("object"!==i(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,"string");if("object"!==i(n))return n;throw TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(o.key),"symbol"===i(r)?r:String(r)),o)}}(e.prototype,[{key:"hasInitialization",value:function(){return null!==this.initialization||null!==this.range}},{key:"hasSegments",value:function(){return this.segmentInfoType!==n.default.BASE_URL&&this.segmentInfoType!==n.default.SEGMENT_BASE&&!this.indexRange}}]),Object.defineProperty(e,"prototype",{writable:!1}),e}();t.default=o},"./src/dash/vo/RepresentationInfo.js":function(e,t,r){function n(e){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function i(e,t){for(var r,i=0;i<t.length;i++){var o=t[i];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,(r=function(e,t){if("object"!==n(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var i=r.call(e,"string");if("object"!==n(i))return i;throw TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(o.key),"symbol"===n(r)?r:String(r)),o)}}r.r(t);var o,u,l,c=(o=function e(){(function(e,t){if(!(e instanceof t))throw TypeError("Cannot call a class as a function")})(this,e),this.id=null,this.quality=null,this.fragmentDuration=null,this.mediaInfo=null,this.MSETimeOffset=null},u&&i(o.prototype,u),l&&i(o,l),Object.defineProperty(o,"prototype",{writable:!1}),o);t.default=c},"./src/dash/vo/Segment.js":function(e,t,r){function n(e){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function i(e,t){for(var r,i=0;i<t.length;i++){var o=t[i];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,(r=function(e,t){if("object"!==n(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var i=r.call(e,"string");if("object"!==n(i))return i;throw TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(o.key),"symbol"===n(r)?r:String(r)),o)}}r.r(t);var o,u,l,c=(o=function e(){(function(e,t){if(!(e instanceof t))throw TypeError("Cannot call a class as a function")})(this,e),this.indexRange=null,this.index=null,this.mediaRange=null,this.media=null,this.duration=NaN,this.replacementTime=null,this.replacementNumber=NaN,this.mediaStartTime=NaN,this.presentationStartTime=NaN,this.availabilityStartTime=NaN,this.availabilityEndTime=NaN,this.wallStartTime=NaN,this.representation=null},u&&i(o.prototype,u),l&&i(o,l),Object.defineProperty(o,"prototype",{writable:!1}),o);t.default=c},"./src/dash/vo/SimpleXPath.js":function(e,t,r){function n(e){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}r.r(t);var i=function(){var e;function t(e){var r=this;(function(e,t){if(!(e instanceof t))throw TypeError("Cannot call a class as a function")})(this,t),this.valid="/"==e[0],this.path=e.split("/").filter(function(e){return 0!==e.length}).map(function(e){var t={name:e},n=e.indexOf("[");if(-1!=n){t.name=e.substring(0,n);var i=e.substring(n+1,e.length-1);r.valid=r.valid&&-1==i.indexOf("[");var o=i.indexOf("=");-1!=o?(t.attribute={name:i.substring(1,o),value:i.substring(o+1)},-1!=["'",'"'].indexOf(t.attribute.value[0])&&(t.attribute.value=t.attribute.value.substring(1,t.attribute.value.length-1))):t.position=parseInt(i,10)-1}return t})}return e=[{key:"isValid",value:function(){return this.valid}},{key:"findsElement",value:function(){return!this.findsAttribute()}},{key:"findsAttribute",value:function(){return this.path[this.path.length-1].name.startsWith("@")}},{key:"getMpdTarget",value:function(e,t){for(var r=null,n=e,i=1,o="MPD";i<this.path.length&&null!==n;){r=n;var u=this.path[i];if(o=u.name,i!==this.path.length-1||!o.startsWith("@")){var l=r[o+"_asArray"]||[];0===l.length&&r[o]&&l.push(r[o]),u.position?n=l[u.position]||null:u.attribute?function(){var e=u.attribute;n=l.filter(function(t){return t[e.name]==e.value})[0]||null}():n=l[0]||null}i++}return null===n?null:o.startsWith("@")?{name:o.substring(1),leaf:n,target:n}:{name:o,leaf:n,target:t?r:n}}}],function(e,t){for(var r,i=0;i<t.length;i++){var o=t[i];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,(r=function(e,t){if("object"!==n(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var i=r.call(e,"string");if("object"!==n(i))return i;throw TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(o.key),"symbol"===n(r)?r:String(r)),o)}}(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t}();t.default=i},"./src/dash/vo/StreamInfo.js":function(e,t,r){function n(e){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function i(e,t){for(var r,i=0;i<t.length;i++){var o=t[i];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,(r=function(e,t){if("object"!==n(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var i=r.call(e,"string");if("object"!==n(i))return i;throw TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(o.key),"symbol"===n(r)?r:String(r)),o)}}r.r(t);var o,u,l,c=(o=function e(){(function(e,t){if(!(e instanceof t))throw TypeError("Cannot call a class as a function")})(this,e),this.id=null,this.index=null,this.start=NaN,this.duration=NaN,this.manifestInfo=null,this.isLast=!0},u&&i(o.prototype,u),l&&i(o,l),Object.defineProperty(o,"prototype",{writable:!1}),o);t.default=c},"./src/dash/vo/UTCTiming.js":function(e,t,r){function n(e){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function i(e,t){for(var r,i=0;i<t.length;i++){var o=t[i];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,(r=function(e,t){if("object"!==n(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var i=r.call(e,"string");if("object"!==n(i))return i;throw TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(o.key),"symbol"===n(r)?r:String(r)),o)}}r.r(t);var o,u,l,c=(o=function e(){(function(e,t){if(!(e instanceof t))throw TypeError("Cannot call a class as a function")})(this,e),this.schemeIdUri="",this.value=""},u&&i(o.prototype,u),l&&i(o,l),Object.defineProperty(o,"prototype",{writable:!1}),o);t.default=c},"./src/streaming/FragmentLoader.js":function(e,t,r){r.r(t);var n=r("./src/streaming/constants/Constants.js"),i=r("./src/streaming/net/URLLoader.js"),o=r("./src/streaming/vo/HeadRequest.js"),u=r("./src/streaming/vo/DashJSError.js"),l=r("./src/core/FactoryMaker.js");function c(e){e=e||{};var t,r,l=this.context,c=e.eventBus,f=e.events,d=e.urlUtils,h=e.errors,p=e.streamId;return t={checkForExistence:function(e){var t=function(t){c.trigger(f.CHECK_FOR_EXISTENCE_COMPLETED,{request:e,exists:t})};if(e){var n=new o.default(e.url);r.load({request:n,success:function(){t(!0)},error:function(){t(!1)}})}else t(!1)},load:function(e){var n=function(r,n){c.trigger(f.LOADING_COMPLETED,{request:e,response:r||null,error:n||null,sender:t})};e?r.load({request:e,progress:function(r){c.trigger(f.LOADING_PROGRESS,{request:e,stream:r.stream,streamId:p}),r.data&&c.trigger(f.LOADING_DATA_PROGRESS,{request:e,response:r.data||null,error:null,sender:t})},success:function(e){n(e)},error:function(e,t,r){n(void 0,new u.default(h.FRAGMENT_LOADER_LOADING_FAILURE_ERROR_CODE,r,t))},abort:function(e){e&&c.trigger(f.LOADING_ABANDONED,{mediaType:e.mediaType,request:e,sender:t})}}):n(void 0,new u.default(h.FRAGMENT_LOADER_NULL_REQUEST_ERROR_CODE,h.FRAGMENT_LOADER_NULL_REQUEST_ERROR_MESSAGE))},abort:function(){r&&r.abort()},reset:function(){r&&(r.abort(),r=null)}},r=Object(i.default)(l).create({errHandler:e.errHandler,errors:h,dashMetrics:e.dashMetrics,mediaPlayerModel:e.mediaPlayerModel,requestModifier:e.requestModifier,urlUtils:d,constants:n.default,boxParser:e.boxParser,dashConstants:e.dashConstants,requestTimeout:e.settings.get().streaming.fragmentRequestTimeout}),t}c.__dashjs_factory_name="FragmentLoader",t.default=l.default.getClassFactory(c)},"./src/streaming/ManifestLoader.js":function(e,t,r){r.r(t);var n=r("./src/streaming/constants/Constants.js"),i=r("./src/dash/constants/DashConstants.js"),o=r("./src/streaming/controllers/XlinkController.js"),u=r("./src/streaming/net/URLLoader.js"),l=r("./src/streaming/utils/URLUtils.js"),c=r("./src/streaming/vo/TextRequest.js"),f=r("./src/streaming/vo/DashJSError.js"),d=r("./src/streaming/vo/metrics/HTTPRequest.js"),h=r("./src/core/EventBus.js"),p=r("./src/core/events/Events.js"),m=r("./src/core/errors/Errors.js"),g=r("./src/core/FactoryMaker.js"),y=r("./src/dash/parser/DashParser.js");function v(e){e=e||{};var t,r,g,v,b,_=this.context,T=e.debug,E=e.settings,S=Object(h.default)(_).getInstance(),w=Object(l.default)(_).getInstance(),A=e.mssHandler,C=e.errHandler;function I(e){S.trigger(p.default.INTERNAL_MANIFEST_LOADED,{manifest:e.manifest})}return t={load:function(e){var t=new c.default(e,d.HTTPRequest.MPD_TYPE);g.load({request:t,success:function(t,i,o){var u,l,c;if(v){if(o&&o!==e?(l=w.parseBaseUrl(o),u=o):(w.isRelative(e)&&(e=w.resolve(e,window.location.href)),l=w.parseBaseUrl(e)),"No Content"!=i){if(null===b&&(d=null,b=t.indexOf("SmoothStreamingMedia")>-1?(A&&(d=A.createMssParser(),A.registerEvents()),d):t.indexOf("MPD")>-1||t.indexOf("Patch")>-1?Object(y.default)(_).create({debug:T}):d),null!==b){v.setMatchers(b.getMatchers()),v.setIron(b.getIron());try{c=b.parse(t)}catch(t){return void S.trigger(p.default.INTERNAL_MANIFEST_LOADED,{manifest:null,error:new f.default(m.default.MANIFEST_LOADER_PARSING_FAILURE_ERROR_CODE,m.default.MANIFEST_LOADER_PARSING_FAILURE_ERROR_MESSAGE+"".concat(e))})}if(c){if(c.url=u||e,c.originalUrl||(c.originalUrl=c.url),c.hasOwnProperty(n.default.LOCATION)&&(l=w.parseBaseUrl(c.Location_asArray[0]),r.debug("BaseURI set by Location to: "+l)),E&&E.get().streaming.enableManifestDurationMismatchFix&&c.mediaPresentationDuration&&c.Period_asArray.length>1){var d,h=c.Period_asArray.reduce(function(e,t){return e+t.duration},0);!isNaN(h)&&c.mediaPresentationDuration>h&&(r.warn("Media presentation duration greater than duration of all periods. Setting duration to total period duration"),c.mediaPresentationDuration=h)}c.baseUri=l,c.loadedTime=new Date,v.resolveManifestOnLoad(c),S.trigger(p.default.ORIGINAL_MANIFEST_LOADED,{originalManifest:t})}else S.trigger(p.default.INTERNAL_MANIFEST_LOADED,{manifest:null,error:new f.default(m.default.MANIFEST_LOADER_PARSING_FAILURE_ERROR_CODE,m.default.MANIFEST_LOADER_PARSING_FAILURE_ERROR_MESSAGE+"".concat(e))})}else S.trigger(p.default.INTERNAL_MANIFEST_LOADED,{manifest:null,error:new f.default(m.default.MANIFEST_LOADER_PARSING_FAILURE_ERROR_CODE,m.default.MANIFEST_LOADER_PARSING_FAILURE_ERROR_MESSAGE+"".concat(e))})}else S.trigger(p.default.INTERNAL_MANIFEST_LOADED,{manifest:null})}},error:function(t,r,n){S.trigger(p.default.INTERNAL_MANIFEST_LOADED,{manifest:null,error:new f.default(m.default.MANIFEST_LOADER_LOADING_FAILURE_ERROR_CODE,m.default.MANIFEST_LOADER_LOADING_FAILURE_ERROR_MESSAGE+"".concat(e,", ").concat(n))})}})},reset:function(){S.off(p.default.XLINK_READY,I,t),A&&A.reset(),v&&(v.reset(),v=null),g&&(g.abort(),g=null)}},r=T.getLogger(t),S.on(p.default.XLINK_READY,I,t),g=Object(u.default)(_).create({errHandler:e.errHandler,dashMetrics:e.dashMetrics,mediaPlayerModel:e.mediaPlayerModel,requestModifier:e.requestModifier,urlUtils:w,constants:n.default,dashConstants:i.default,errors:m.default,requestTimeout:e.settings.get().streaming.manifestRequestTimeout}),v=Object(o.default)(_).create({errHandler:C,dashMetrics:e.dashMetrics,mediaPlayerModel:e.mediaPlayerModel,requestModifier:e.requestModifier,settings:e.settings}),b=null,t}v.__dashjs_factory_name="ManifestLoader";var b=g.default.getClassFactory(v);t.default=b},"./src/streaming/ManifestUpdater.js":function(e,t,r){r.r(t);var n=r("./src/core/EventBus.js"),i=r("./src/core/events/Events.js"),o=r("./src/streaming/MediaPlayerEvents.js"),u=r("./src/core/FactoryMaker.js"),l=r("./src/core/Debug.js"),c=r("./src/core/errors/Errors.js"),f=r("./src/dash/constants/DashConstants.js"),d=r("./src/streaming/utils/URLUtils.js");function h(){var e,t,r,u,h,p,m,g,y,v,b,_,T=this.context,E=Object(n.default)(T).getInstance(),S=Object(d.default)(T).getInstance();function w(){r=NaN,m=!1,h=!0,p=!1,A()}function A(){null!==u&&(clearTimeout(u),u=null)}function C(e){A(),p||(isNaN(e)&&!isNaN(r)&&(e=1e3*r),isNaN(e)||(t.debug("Refresh manifest in "+e+" milliseconds."),u=setTimeout(R,e)))}function I(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];m=!0;var t=y.getValue(),r=t.url,n=v.getPatchLocation(t),i=v.getLocation(t);n&&!e?r=n:i&&(r=i),S.isRelative(r)&&(r=S.resolve(r,t.url)),g.load(r)}function O(e){if(e){if(v.getIsPatch(e)){var n=e;e=y.getValue();var o=v.isPatchValid(e,n),u=o;if(o){var l=v.getPublishTime(e);u=v.applyPatchToManifest(e,n);var c=v.getPublishTime(e);u=l.getTime()!=c.getTime()}if(!u)return t.debug("Patch provided is invalid, performing full manifest refresh"),void I(!0);e.loadedTime=new Date}}else(e=y.getValue()).loadedTime=new Date;if(y.getValue()&&y.getValue().type===f.default.DYNAMIC&&e.type===f.default.STATIC)return E.trigger(i.default.DYNAMIC_TO_STATIC),m=!1,void(p=!0);y.setValue(e);var d=new Date,g=(d.getTime()-e.loadedTime.getTime())/1e3;1e3*(r=v.getManifestUpdatePeriod(e,g))>2147483647&&(r=2147483.647),E.trigger(i.default.MANIFEST_UPDATED,{manifest:e}),t.info("Manifest has been refreshed at "+d+"["+d.getTime()/1e3+"] "),h||C()}function R(){h||(m?C(_.get().streaming.manifestUpdateRetryInterval):I())}function P(e){e.error?e.error.code===c.default.MANIFEST_LOADER_PARSING_FAILURE_ERROR_CODE&&b.error(e.error):O(e.manifest)}function k(){h=!1,C()}function D(){(h=!_.get().streaming.scheduling.scheduleWhilePaused)&&A()}function N(){m=!1}return e={initialize:function(){w(),E.on(i.default.STREAMS_COMPOSED,N,this),E.on(o.default.PLAYBACK_STARTED,k,this),E.on(o.default.PLAYBACK_PAUSED,D,this),E.on(i.default.INTERNAL_MANIFEST_LOADED,P,this)},setManifest:function(e){O(e)},refreshManifest:I,getIsUpdating:function(){return m},setConfig:function(e){e&&(e.manifestModel&&(y=e.manifestModel),e.adapter&&(v=e.adapter),e.manifestLoader&&(g=e.manifestLoader),e.errHandler&&(b=e.errHandler),e.settings&&(_=e.settings))},reset:function(){E.off(o.default.PLAYBACK_STARTED,k,this),E.off(o.default.PLAYBACK_PAUSED,D,this),E.off(i.default.STREAMS_COMPOSED,N,this),E.off(i.default.INTERNAL_MANIFEST_LOADED,P,this),w()}},t=Object(l.default)(T).getInstance().getLogger(e),e}h.__dashjs_factory_name="ManifestUpdater",t.default=u.default.getClassFactory(h)},"./src/streaming/MediaPlayer.js":function(e,t,r){r.r(t);var n=r("./externals/cea608-parser.js"),i=r.n(n),o=r("./src/streaming/constants/Constants.js"),u=r("./src/dash/constants/DashConstants.js"),l=r("./src/streaming/constants/MetricsConstants.js"),c=r("./src/streaming/controllers/PlaybackController.js"),f=r("./src/streaming/controllers/StreamController.js"),d=r("./src/streaming/controllers/GapController.js"),h=r("./src/streaming/controllers/CatchupController.js"),p=r("./src/dash/controllers/ServiceDescriptionController.js"),m=r("./src/dash/controllers/ContentSteeringController.js"),g=r("./src/streaming/controllers/MediaController.js"),y=r("./src/streaming/controllers/BaseURLController.js"),v=r("./src/streaming/ManifestLoader.js"),b=r("./src/streaming/utils/ErrorHandler.js"),_=r("./src/streaming/utils/Capabilities.js"),T=r("./src/streaming/utils/CapabilitiesFilter.js"),E=r("./src/streaming/utils/RequestModifier.js"),S=r("./src/streaming/models/URIFragmentModel.js"),w=r("./src/streaming/models/ManifestModel.js"),A=r("./src/streaming/models/MediaPlayerModel.js"),C=r("./src/streaming/controllers/AbrController.js"),I=r("./src/streaming/net/SchemeLoaderFactory.js"),O=r("./src/streaming/models/VideoModel.js"),R=r("./src/streaming/models/CmcdModel.js"),P=r("./src/streaming/utils/DOMStorage.js"),k=r("./src/core/Debug.js"),D=r("./src/core/errors/Errors.js"),N=r("./src/core/EventBus.js"),L=r("./src/core/events/Events.js"),x=r("./src/streaming/MediaPlayerEvents.js"),j=r("./src/core/FactoryMaker.js"),M=r("./src/core/Settings.js"),F=r("./src/core/Version.js"),B=r("./src/dash/controllers/SegmentBaseController.js"),U=r("./src/dash/DashAdapter.js"),q=r("./src/dash/DashMetrics.js"),H=r("./src/dash/utils/TimelineConverter.js"),V=r("./src/streaming/vo/metrics/HTTPRequest.js"),G=r("./externals/base64.js"),Y=r.n(G),z=r("./node_modules/codem-isoboxer/dist/iso_boxer.js"),K=r.n(z),W=r("./src/streaming/vo/DashJSError.js"),X=r("./src/streaming/utils/SupervisorTools.js"),Q=r("./src/streaming/ManifestUpdater.js"),$=r("./src/streaming/utils/URLUtils.js"),J=r("./src/streaming/utils/BoxParser.js"),Z=r("./src/streaming/text/TextController.js"),ee=r("./src/streaming/models/CustomParametersModel.js");function et(){var e,t,r,n,G,z,et,er,en,ei,eo,ea,es,eu,el,ec,ef,ed,eh,ep,em,eg,ey,ev,eb,e_,eT,eE,eS,ew,eA,eC,eI,eO,eR,eP,ek,eD="You must first call initialize() and set a source before calling this method",eN="You must first call initialize() and set a valid source and view before calling this method",eL="You must first call attachView() to set the video element before calling this method",ex="MediaPlayer not initialized!",ej=this.context,eM=Object(N.default)(ej).getInstance(),eF=Object(M.default)(ej).getInstance(),eB=Object(k.default)(ej).getInstance({settings:eF});function eU(){eZ(null),e$(null),n=null,es&&(es.reset(),es=null),eu&&(eu.reset(),eu=null),eh&&eh.reset(),eF.reset(),ec&&(ec.reset(),ec=null)}function eq(){return!!r&&!!eO.getElement()}function eH(){return Object(F.getVersionString)()}function eV(){if(!et)throw eN;return eT.isPaused()}function eG(){if(!et)throw eN;return eT.getIsDynamic()}function eY(e){var t=ev&&ev.hasVideoTrack()?o.default.VIDEO:o.default.AUDIO,r=eA.getCurrentDVRInfo(t);if(!r)return 0;var n=eT.getOriginalLiveDelay(),i=r.range.start+e;return i>r.range.end-n&&(i=r.range.end-n),i}function ez(e){if(!et)throw eN;var t=eQ().currentTime;if(void 0!==e)t=ev.getTimeRelativeToStreamId(t,e);else if(eT.getIsDynamic()){var r=ev&&ev.hasVideoTrack()?o.default.VIDEO:o.default.AUDIO,n=eA.getCurrentDVRInfo(r);t=null===n||0===t?0:Math.max(0,t-n.range.start)}return t}function eK(){if(!et)throw eN;var e=eQ().duration;if(eT.getIsDynamic()){var t=ev&&ev.hasVideoTrack()?o.default.VIDEO:o.default.AUDIO,r=eA.getCurrentDVRInfo(t);e=r?r.range.end-r.range.start:0}return e}function eW(e){Object(X.checkParameterType)(e,"boolean"),er=e}function eX(){eh.restoreDefaultUTCTimingSources()}function eQ(){if(!eO.getElement())throw eL;return eO.getElement()}function e$(e){if(!G)throw ex;eO.setElement(e),e&&(e3(),function(){if(!eu){var e=dashjs.MetricsReporting;"function"==typeof e&&(eu=e(ej).create().createMetricsReporting({debug:eB,eventBus:eM,mediaElement:eQ(),adapter:ef,dashMetrics:eA,mediaPlayerModel:ed,events:L.default,constants:o.default,metricsConstants:l.default}))}}(),function(){if(!el){var e=dashjs.MssHandler;"function"==typeof e&&(D.default.extend(e.errors),el=e(ej).create({eventBus:eM,mediaPlayerModel:ed,dashMetrics:eA,manifestModel:eC,playbackController:eT,streamController:ev,protectionController:es,baseURLController:em,errHandler:ep,events:L.default,constants:o.default,debug:eB,initSegmentType:V.HTTPRequest.INIT_SEGMENT_TYPE,BASE64:Y.a,ISOBoxer:K.a,settings:eF}))}}(),ev&&ev.switchToVideoElement()),et&&e1(),e8()}function eJ(e){if(!z)throw eD;var t=ev.getActiveStreamInfo();return t?ea.getTracksFor(e,t.id):[]}function eZ(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:NaN;if(!G)throw ex;"string"==typeof e&&eR.initialize(e),(null==t||isNaN(t))&&(t=NaN),t=Math.max(0,t),r=e,(z||et)&&e1(),eq()&&e8(t)}function e0(){if(!z)throw eD;var e=ev.getActiveStreamInfo();return e?ev.getStreamById(e.id):null}function e1(){et=!1,z=!1,ef.reset(),ev.reset(),e_.reset(),ew.reset(),eT.reset(),eE.reset(),eS.reset(),en.reset(),ea.reset(),ek.reset(),es&&(eF.get().streaming.protection.keepProtectionMediaKeys?es.stop():(es.reset(),es=null,e3())),eb.reset(),eI.reset()}function e2(){return Object(v.default)(ej).create({debug:eB,errHandler:ep,dashMetrics:eA,mediaPlayerModel:ed,requestModifier:Object(E.default)(ej).getInstance(),mssHandler:el,settings:eF})}function e3(){if(es)return es;var e=dashjs.Protection;if("function"==typeof e){var t=e(ej).create();return L.default.extend(e.events),x.default.extend(e.events,{publicOnly:!0}),D.default.extend(e.errors),eg||(eg=Object(_.default)(ej).getInstance()),es=t.createProtectionSystem({debug:eB,errHandler:ep,videoModel:eO,customParametersModel:eh,capabilities:eg,eventBus:eM,events:L.default,BASE64:Y.a,constants:o.default,cmcdModel:eI,settings:eF})}return null}function e4(){if(!G)throw ex;if(ec)return ec;var e=dashjs.OfflineController;if("function"==typeof e){L.default.extend(e.events),x.default.extend(e.events,{publicOnly:!0}),D.default.extend(e.errors);var t=e2(),r=Object(Q.default)(ej).create();return r.setConfig({manifestModel:eC,adapter:ef,manifestLoader:t,errHandler:ep}),ec=e(ej).create({debug:eB,manifestUpdater:r,baseURLController:em,manifestLoader:t,manifestModel:eC,mediaPlayerModel:ed,abrController:en,playbackController:eT,adapter:ef,errHandler:ep,dashMetrics:eA,timelineConverter:eo,segmentBaseController:ek,schemeLoaderFactory:ei,eventBus:eM,events:L.default,errors:D.default,constants:o.default,settings:eF,dashConstants:u.default,urlUtils:Object($.default)(ej).getInstance()})}return null}function e6(e){var t=ev&&ev.hasVideoTrack()?o.default.VIDEO:o.default.AUDIO,r=eA.getCurrentDVRInfo(t);return r?e+(r.manifestInfo.availableFrom.getTime()/1e3+r.range.start):0}function e8(){var e,i=arguments.length>0&&void 0!==arguments[0]?arguments[0]:NaN;ec&&ec.resetRecords(),!z&&r&&(z=!0,t.info("Streaming Initialized"),e=e2(),ev||(ev=Object(f.default)(ej).getInstance()),eb||(eb=Object(Z.default)(ej).create({errHandler:ep,manifestModel:eC,adapter:ef,mediaController:ea,videoModel:eO,settings:eF})),ey.setConfig({capabilities:eg,customParametersModel:eh,adapter:ef,settings:eF,manifestModel:eC,errHandler:ep}),ev.setConfig({capabilities:eg,capabilitiesFilter:ey,manifestLoader:e,manifestModel:eC,mediaPlayerModel:ed,customParametersModel:eh,protectionController:es,textController:eb,adapter:ef,dashMetrics:eA,errHandler:ep,timelineConverter:eo,videoModel:eO,playbackController:eT,serviceDescriptionController:eE,contentSteeringController:eS,abrController:en,mediaController:ea,settings:eF,baseURLController:em,uriFragmentModel:eR,segmentBaseController:ek}),e_.setConfig({settings:eF,playbackController:eT,streamController:ev,videoModel:eO,timelineConverter:eo,adapter:ef}),eT.setConfig({streamController:ev,serviceDescriptionController:eE,dashMetrics:eA,adapter:ef,videoModel:eO,timelineConverter:eo,settings:eF}),ew.setConfig({streamController:ev,playbackController:eT,mediaPlayerModel:ed,videoModel:eO,settings:eF}),en.setConfig({streamController:ev,domStorage:eP,mediaPlayerModel:ed,customParametersModel:eh,dashMetrics:eA,adapter:ef,videoModel:eO,settings:eF}),eI.setConfig({abrController:en,dashMetrics:eA,playbackController:eT}),eS.setConfig({adapter:ef,errHandler:ep,dashMetrics:eA,mediaPlayerModel:ed,manifestModel:eC,abrController:en,eventBus:eM,requestModifier:Object(E.default)(ej).getInstance()}),en.initialize(),ev.initialize(er,n),eb.initialize(),e_.initialize(),ew.initialize(),eI.initialize(),eS.initialize(),ek.initialize(),"string"==typeof r?ev.load(r,i):ev.loadWithManifest(r,i)),!et&&eq()&&(et=!0,t.info("Playback Initialized"))}return e={initialize:function(e,r,n){var u=arguments.length>3&&void 0!==arguments[3]?arguments[3]:NaN;eg||(eg=Object(_.default)(ej).getInstance()).setConfig({settings:eF}),ep||(ep=Object(b.default)(ej).getInstance()),eg.supportsMediaSource()?(G||(G=!0,eo=Object(H.default)(ej).getInstance(),en||(en=Object(C.default)(ej).getInstance()).setConfig({settings:eF}),ei||(ei=Object(I.default)(ej).getInstance()),eT||(eT=Object(c.default)(ej).getInstance()),ea||(ea=Object(g.default)(ej).getInstance()),ev||(ev=Object(f.default)(ej).getInstance()),e_||(e_=Object(d.default)(ej).getInstance()),ew||(ew=Object(h.default)(ej).getInstance()),eE||(eE=Object(p.default)(ej).getInstance()),eS||(eS=Object(m.default)(ej).getInstance()),ey||(ey=Object(T.default)(ej).getInstance()),ef=Object(U.default)(ej).getInstance(),eC=Object(w.default)(ej).getInstance(),eI=Object(R.default)(ej).getInstance(),eA=Object(q.default)(ej).getInstance({settings:eF}),eP=Object(P.default)(ej).getInstance({settings:eF}),ef.setConfig({constants:o.default,cea608parser:i.a,errHandler:ep,BASE64:Y.a}),em||(em=Object(y.default)(ej).create()),em.setConfig({adapter:ef}),eE.setConfig({adapter:ef}),ek||(ek=Object(B.default)(ej).getInstance({dashMetrics:eA,mediaPlayerModel:ed,errHandler:ep,baseURLController:em,events:L.default,eventBus:eM,debug:eB,boxParser:Object(J.default)(ej).getInstance(),requestModifier:Object(E.default)(ej).getInstance(),errors:D.default})),ea.setConfig({domStorage:eP,settings:eF,customParametersModel:eh}),ed.setConfig({playbackController:eT,serviceDescriptionController:eE}),eX(),eW(void 0===n||n),e4()),e&&e$(e),r&&eZ(r,u),t.info("[dash.js "+eH()+"] MediaPlayer has been initialized")):ep.error(new W.default(D.default.CAPABILITY_MEDIASOURCE_ERROR_CODE,D.default.CAPABILITY_MEDIASOURCE_ERROR_MESSAGE))},setConfig:function(e){e&&(e.capabilities&&(eg=e.capabilities),e.capabilitiesFilter&&(ey=e.capabilitiesFilter),e.streamController&&(ev=e.streamController),e.textController&&(eb=e.textController),e.gapController&&(e_=e.gapController),e.playbackController&&(eT=e.playbackController),e.serviceDescriptionController&&(eE=e.serviceDescriptionController),e.contentSteeringController&&(eS=e.contentSteeringController),e.catchupController&&(ew=e.catchupController),e.mediaPlayerModel&&(ed=e.mediaPlayerModel),e.customParametersModel&&(eh=e.customParametersModel),e.abrController&&(en=e.abrController),e.schemeLoaderFactory&&(ei=e.schemeLoaderFactory),e.mediaController&&(ea=e.mediaController),e.settings&&(eF=e.settings))},on:function(e,t,r,n){eM.on(e,t,r,n)},off:function(e,t,r){eM.off(e,t,r)},extend:function(e,t,r){j.default.extend(e,t,r,ej)},attachView:e$,attachSource:eZ,isReady:eq,play:function(){if(!et)throw eN;(!er||eV()&&et)&&eT.play(!0)},isPaused:eV,pause:function(){if(!et)throw eN;eT.pause()},isSeeking:function(){if(!et)throw eN;return eT.isSeeking()},isDynamic:eG,getLowLatencyModeEnabled:function(){if(!et)throw eN;return eT.getLowLatencyModeEnabled()},seek:function(e){if(!et)throw eN;if(Object(X.checkParameterType)(e,"number"),isNaN(e))throw o.default.BAD_ARGUMENT_ERROR;e<0&&(e=0);var t=eT.getIsDynamic()?eY(e):e,r=eQ();!eT.getIsDynamic()&&r.duration&&(t=Math.min(r.duration,t)),eT.seek(t,!1,!1,!0)},seekToOriginalLive:function(){et&&eG()&&eT.seekToOriginalLive()},setPlaybackRate:function(e){eQ().playbackRate=e},getPlaybackRate:function(){return eQ().playbackRate},setMute:function(e){Object(X.checkParameterType)(e,"boolean"),eQ().muted=e},isMuted:function(){return eQ().muted},setVolume:function(e){if("number"!=typeof e||isNaN(e)||e<0||e>1)throw o.default.BAD_ARGUMENT_ERROR;eQ().volume=e},getVolume:function(){return eQ().volume},time:ez,duration:eK,timeAsUTC:function(){if(!et)throw eN;return 0>ez()?NaN:e6(ez())},durationAsUTC:function(){if(!et)throw eN;return e6(eK())},getActiveStream:e0,getDVRWindowSize:function(){var e=ev&&ev.hasVideoTrack()?o.default.VIDEO:o.default.AUDIO,t=eA.getCurrentDVRInfo(e);return t?t.manifestInfo.dvrWindowSize:0},getDVRSeekOffset:eY,getTargetLiveDelay:function(){if(!et)throw eN;return eT.getOriginalLiveDelay()},convertToTimeCode:function(e){var t=Math.floor((e=Math.max(e,0))/3600),r=Math.floor(e%3600/60),n=Math.floor(e%3600%60);return(0===t?"":t<10?"0"+t.toString()+":":t.toString()+":")+(r<10?"0"+r.toString():r.toString())+":"+(n<10?"0"+n.toString():n.toString())},formatUTC:function(e,t,r){var n=arguments.length>3&&void 0!==arguments[3]&&arguments[3],i=new Date(1e3*e),o=i.toLocaleDateString(t),u=i.toLocaleTimeString(t,{hour12:r});return n?u+" "+o:u},getVersion:eH,getDebug:function(){return eB},getBufferLength:function(e){var r=[o.default.VIDEO,o.default.AUDIO,o.default.TEXT];if(e)return -1!==r.indexOf(e)?eA.getCurrentBufferLevel(e)||NaN:(t.warn("getBufferLength requested for invalid type"),NaN);var n=r.map(function(e){return eJ(e).length>0?eA.getCurrentBufferLevel(e):Number.MAX_VALUE}).reduce(function(e,t){return Math.min(e,t)});return n===Number.MAX_VALUE?NaN:n},getTTMLRenderingDiv:function(){return eO?eO.getTTMLRenderingDiv():null},getVideoElement:eQ,getSource:function(){if(!r)throw"You must first call attachSource() with a valid source before calling this method";return r},updateSource:function(e){r=e,ev.load(r)},getCurrentLiveLatency:function(){if(!G)throw ex;return et?eT.getCurrentLiveLatency():NaN},getTopBitrateInfoFor:function(e){if(!z)throw eD;return en.getTopBitrateInfoFor(e)},setAutoPlay:eW,getAutoPlay:function(){return er},getDashMetrics:function(){return eA},getQualityFor:function(e){if(!z)throw eD;if(e===o.default.IMAGE){var t=e0();if(!t)return -1;var r=t.getThumbnailController();return r?r.getCurrentTrackIndex():-1}return en.getQualityFor(e)},setQualityFor:function(e,t){var r=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(!z)throw eD;if(e===o.default.IMAGE){var n=e0();if(!n)return;var i=n.getThumbnailController();i&&i.setTrackByIndex(t)}en.setPlaybackQuality(e,ev.getActiveStreamInfo(),t,{forceReplace:r})},updatePortalSize:function(){en.setElementSize(),en.setWindowResizeEventCalled(!0)},enableText:function(e){var t=ev.getActiveStreamInfo();return!(!t||!eb)&&eb.enableText(t.id,e)},enableForcedTextStreaming:function(e){return!(!ev.getActiveStreamInfo()||!eb)&&eb.enableForcedTextStreaming(e)},isTextEnabled:function(){var e=ev.getActiveStreamInfo();return!(!e||!eb)&&eb.isTextEnabled(e)},setTextTrack:function(e){if(!et)throw eN;var t=ev.getActiveStreamInfo();t&&eb&&eb.setTextTrack(t.id,e)},getBitrateInfoListFor:function(e){if(!z)throw eD;var t=e0();return t?t.getBitrateListFor(e):[]},getStreamsFromManifest:function(e){if(!z)throw eD;return ef.getStreamsInfo(e)},getTracksFor:eJ,getTracksForTypeFromManifest:function(e,t,r){if(!z)throw eD;return(r=r||ef.getStreamsInfo(t,1)[0])?ef.getAllMediaInfoForType(r,e,t):[]},getCurrentTrackFor:function(e){if(!z)throw eD;var t=ev.getActiveStreamInfo();return ea.getCurrentTrackFor(e,t.id)},setInitialMediaSettingsFor:function(e,t){if(!G)throw ex;ea.setInitialSettings(e,t)},getInitialMediaSettingsFor:function(e){if(!G)throw ex;return ea.getInitialSettings(e)},setCurrentTrack:function(e){if(!z)throw eD;ea.setTrack(e)},addABRCustomRule:function(e,t,r){eh.addAbrCustomRule(e,t,r)},removeABRCustomRule:function(e){eh.removeAbrCustomRule(e)},removeAllABRCustomRule:function(){eh.removeAllAbrCustomRule()},getABRCustomRules:function(){return eh.getAbrCustomRules()},getAverageThroughput:function(e){var t=en.getThroughputHistory(),r=eT.getIsDynamic();return t?t.getAverageThroughput(e,r):0},retrieveManifest:function(e,t){var r=e2(),n=this;eM.on(L.default.INTERNAL_MANIFEST_LOADED,function e(i){i.error?t(null,i.error):t(i.manifest),eM.off(L.default.INTERNAL_MANIFEST_LOADED,e,n),r.reset()},n),eR.initialize(e),r.load(e)},addUTCTimingSource:function(e,t){eh.addUTCTimingSource(e,t)},removeUTCTimingSource:function(e,t){eh.removeUTCTimingSource(e,t)},clearDefaultUTCTimingSources:function(){eh.clearDefaultUTCTimingSources()},restoreDefaultUTCTimingSources:eX,setXHRWithCredentialsForType:function(e,t){eh.setXHRWithCredentialsForType(e,t)},getXHRWithCredentialsForType:function(e){return eh.getXHRWithCredentialsForType(e)},getProtectionController:function(){return e3()},attachProtectionController:function(e){es=e},setProtectionData:function(e){n=e,ev&&ev.setProtectionData(n)},registerLicenseRequestFilter:function(e){eh.registerLicenseRequestFilter(e)},registerLicenseResponseFilter:function(e){eh.registerLicenseResponseFilter(e)},unregisterLicenseRequestFilter:function(e){eh.unregisterLicenseRequestFilter(e)},unregisterLicenseResponseFilter:function(e){eh.unregisterLicenseResponseFilter(e)},registerCustomCapabilitiesFilter:function(e){eh.registerCustomCapabilitiesFilter(e)},unregisterCustomCapabilitiesFilter:function(e){eh.unregisterCustomCapabilitiesFilter(e)},setCustomInitialTrackSelectionFunction:function(e){eh.setCustomInitialTrackSelectionFunction(e)},resetCustomInitialTrackSelectionFunction:function(){eh.resetCustomInitialTrackSelectionFunction(null)},attachTTMLRenderingDiv:function(e){if(!eO.getElement())throw eL;eO.setTTMLRenderingDiv(e)},attachVttRenderingDiv:function(e){if(!eO.getElement())throw eL;eO.setVttRenderingDiv(e)},getCurrentTextTrackIndex:function(){var e=ev.getActiveStreamInfo();if(e&&eb)return eb.getCurrentTrackIdx(e.id)},provideThumbnail:function(e,t){if("function"==typeof t){if(e<0)t(null);else{var r=eT.getIsDynamic()?eY(e):e,n=ev.getStreamForTime(r);if(null!==n){var i=n.getThumbnailController();if(i)return i.provide(r,t);t(null)}else t(null)}}},getDashAdapter:function(){return ef},getOfflineController:function(){return e4()},triggerSteeringRequest:function(){if(eS)return eS.loadSteeringData()},getCurrentSteeringResponseData:function(){if(eS)return eS.getCurrentSteeringResponseData()},getSettings:function(){return eF.get()},updateSettings:function(e){eF.update(e)},resetSettings:function(){eF.reset()},reset:eU,destroy:function(){eU(),j.default.deleteSingletonInstances(ej)}},t=eB.getLogger(e),G=!1,et=!1,z=!1,er=!0,es=null,ec=null,n=null,ef=null,ek=null,L.default.extend(x.default),ed=Object(A.default)(ej).getInstance(),eh=Object(ee.default)(ej).getInstance(),eO=Object(O.default)(ej).getInstance(),eR=Object(S.default)(ej).getInstance(),e}et.__dashjs_factory_name="MediaPlayer";var er=j.default.getClassFactory(et);er.events=x.default,er.errors=D.default,j.default.updateClassFactory(et.__dashjs_factory_name,er),t.default=er},"./src/streaming/MediaPlayerEvents.js":function(e,t,r){function n(e){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function i(e,t){return(i=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function o(e){return(o=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}r.r(t);var u=new(function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&i(e,t)}(u,e);var t,r=(t=function(){if("undefined"==typeof Reflect||!Reflect.construct||Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}(),function(){var e,r=o(u);if(t){var i=o(this).constructor;e=Reflect.construct(r,arguments,i)}else e=r.apply(this,arguments);return function(e,t){if(t&&("object"===n(t)||"function"==typeof t))return t;if(void 0!==t)throw TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,e)});function u(){var e;return function(e,t){if(!(e instanceof t))throw TypeError("Cannot call a class as a function")}(this,u),(e=r.call(this)).AST_IN_FUTURE="astInFuture",e.BUFFER_EMPTY="bufferStalled",e.BUFFER_LOADED="bufferLoaded",e.BUFFER_LEVEL_STATE_CHANGED="bufferStateChanged",e.BUFFER_LEVEL_UPDATED="bufferLevelUpdated",e.DYNAMIC_TO_STATIC="dynamicToStatic",e.ERROR="error",e.FRAGMENT_LOADING_COMPLETED="fragmentLoadingCompleted",e.FRAGMENT_LOADING_PROGRESS="fragmentLoadingProgress",e.FRAGMENT_LOADING_STARTED="fragmentLoadingStarted",e.FRAGMENT_LOADING_ABANDONED="fragmentLoadingAbandoned",e.LOG="log",e.MANIFEST_LOADED="manifestLoaded",e.METRICS_CHANGED="metricsChanged",e.METRIC_CHANGED="metricChanged",e.METRIC_ADDED="metricAdded",e.METRIC_UPDATED="metricUpdated",e.PERIOD_SWITCH_STARTED="periodSwitchStarted",e.PERIOD_SWITCH_COMPLETED="periodSwitchCompleted",e.QUALITY_CHANGE_REQUESTED="qualityChangeRequested",e.QUALITY_CHANGE_RENDERED="qualityChangeRendered",e.TRACK_CHANGE_RENDERED="trackChangeRendered",e.STREAM_INITIALIZING="streamInitializing",e.STREAM_UPDATED="streamUpdated",e.STREAM_ACTIVATED="streamActivated",e.STREAM_DEACTIVATED="streamDeactivated",e.STREAM_INITIALIZED="streamInitialized",e.STREAM_TEARDOWN_COMPLETE="streamTeardownComplete",e.TEXT_TRACKS_ADDED="allTextTracksAdded",e.TEXT_TRACK_ADDED="textTrackAdded",e.TTML_PARSED="ttmlParsed",e.TTML_TO_PARSE="ttmlToParse",e.CAPTION_RENDERED="captionRendered",e.CAPTION_CONTAINER_RESIZE="captionContainerResize",e.CAN_PLAY="canPlay",e.CAN_PLAY_THROUGH="canPlayThrough",e.PLAYBACK_ENDED="playbackEnded",e.PLAYBACK_ERROR="playbackError",e.PLAYBACK_NOT_ALLOWED="playbackNotAllowed",e.PLAYBACK_METADATA_LOADED="playbackMetaDataLoaded",e.PLAYBACK_LOADED_DATA="playbackLoadedData",e.PLAYBACK_PAUSED="playbackPaused",e.PLAYBACK_PLAYING="playbackPlaying",e.PLAYBACK_PROGRESS="playbackProgress",e.PLAYBACK_RATE_CHANGED="playbackRateChanged",e.PLAYBACK_SEEKED="playbackSeeked",e.PLAYBACK_SEEKING="playbackSeeking",e.PLAYBACK_STALLED="playbackStalled",e.PLAYBACK_STARTED="playbackStarted",e.PLAYBACK_TIME_UPDATED="playbackTimeUpdated",e.PLAYBACK_VOLUME_CHANGED="playbackVolumeChanged",e.PLAYBACK_WAITING="playbackWaiting",e.MANIFEST_VALIDITY_CHANGED="manifestValidityChanged",e.EVENT_MODE_ON_START="eventModeOnStart",e.EVENT_MODE_ON_RECEIVE="eventModeOnReceive",e.CONFORMANCE_VIOLATION="conformanceViolation",e.REPRESENTATION_SWITCH="representationSwitch",e.ADAPTATION_SET_REMOVED_NO_CAPABILITIES="adaptationSetRemovedNoCapabilities",e.CONTENT_STEERING_REQUEST_COMPLETED="contentSteeringRequestCompleted",e}return Object.defineProperty(u,"prototype",{writable:!1}),u}(r("./src/core/events/EventsBase.js").default));t.default=u},"./src/streaming/MediaPlayerFactory.js":function(e,t,r){r.r(t);var n,i=r("./src/streaming/MediaPlayer.js"),o=function(){var e,t="application/dash+xml";function r(r,n,o){if(!r||!/^VIDEO$/i.test(r.nodeName))return null;if(r._dashjs_player)return r._dashjs_player;var u,l=r.id||r.name||"video element";if((n=n||[].slice.call(r.querySelectorAll("source")).filter(function(e){return e.type==t})[0])||!r.src){if(!n&&!r.src)return null}else(n=document.createElement("source")).src=r.src;return o=o||{},(u=Object(i.default)(o).create()).initialize(r,n.src,r.autoplay),e||(e=u.getDebug().getLogger()),e.debug("Converted "+l+" to dash.js player and added content: "+n.src),r._dashjs_player=u,u}return{create:r,createAll:function(e,n){var i=[];e=e||"[data-dashjs-player]";for(var o=(n=n||document).querySelectorAll(e),u=0;u<o.length;u++){var l=r(o[u],null);i.push(l)}for(var c=n.querySelectorAll('source[type="'+t+'"]'),f=0;f<c.length;f++){var d=r(function e(t){return/^VIDEO$/i.test(t.nodeName)?t:e(t.parentNode)}(c[f]),null);i.push(d)}return i}}}();!("undefined"!=typeof window&&window&&window.dashjs&&window.dashjs.skipAutoCreate)&&"undefined"!=typeof window&&window&&window.addEventListener&&("complete"===window.document.readyState?window.dashjs?o.createAll():n=window.setInterval(function(){window.dashjs&&(window.clearInterval(n),o.createAll())},500):window.addEventListener("load",function e(){window.removeEventListener("load",e),o.createAll()})),t.default=o},"./src/streaming/SourceBufferSink.js":function(e,t,r){r.r(t);var n=r("./src/core/Debug.js"),i=r("./src/streaming/vo/DashJSError.js"),o=r("./src/core/FactoryMaker.js"),u=r("./src/core/errors/Errors.js"),l=r("./src/core/Settings.js"),c=r("./src/streaming/constants/Constants.js"),f=r("./src/streaming/vo/metrics/HTTPRequest.js"),d=r("./src/core/events/Events.js");function h(e){var t,r,o,h,p,m,g=this.context,y=Object(l.default)(g).getInstance(),v=e.textController,b=e.eventBus,_=[],T=[],E=!1,S=e.mediaSource,w=null;function A(e){return new Promise(function(t){N(function(){h.changeType&&h.changeType(e),t()})})}function C(e){return h=v.getTextSourceBuffer(e),Promise.resolve()}function I(){if("function"==typeof h.addEventListener)try{h.addEventListener("updateend",k,!1),h.addEventListener("error",D,!1),h.addEventListener("abort",D,!1)}catch(e){m=setInterval(k,50)}else m=setInterval(k,50)}function O(e){return new Promise(function(t){h&&y.get().streaming.buffer.useAppendWindow?N(function(){try{if(!h)return void t();var r=S.duration,n=0;e&&!isNaN(e.start)&&!isNaN(e.duration)&&isFinite(e.duration)&&(r=e.start+e.duration),e&&!isNaN(e.start)&&(n=e.start),h.appendWindowEnd===r&&h.appendWindowStart===n||(h.appendWindowStart=0,h.appendWindowEnd=r+.01,h.appendWindowStart=Math.max(n-.1,0),o.debug("Updated append window for ".concat(p.type,". Set start to ").concat(h.appendWindowStart," and end to ").concat(h.appendWindowEnd))),t()}catch(e){o.warn("Failed to set append window"),t()}}):t()})}function R(e){return new Promise(function(t){h?N(function(){try{h.timestampOffset===e||isNaN(e)||(h.timestampOffset=e,o.debug("Set MSE timestamp offset to ".concat(e))),t()}catch(e){t()}}):t()})}function P(){_.length>0&&(h.updating||(_.shift()(),P()))}function k(){h.updating||P()}function D(e){var t,n,i=e.target||{};t=d.default.SOURCE_BUFFER_ERROR,n={error:i,lastRequestAppended:w},b.trigger(t,n,{streamId:p.streamInfo.id,mediaType:r})}function N(e){_.push(e),h.updating||P()}return t={getType:function(){return r},getAllBufferRanges:function(){try{return h.buffered}catch(e){return o.error("getAllBufferRanges exception: "+e.message),null}},getBuffer:function(){return h},append:function(e){var t=this,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return new Promise(function(n,l){e?(T.push({data:e,promise:{resolve:n,reject:l},request:r}),N((function e(){if(!E&&T.length>0){E=!0;var t=T[0];T.splice(0,1);var r=function(){E=!1,T.length>0&&e.call(this),t&&t.data&&t.data.segmentType&&t.data.segmentType!==f.HTTPRequest.INIT_SEGMENT_TYPE&&delete t.data.bytes,t.promise.resolve({chunk:t.data})};try{w=t.request,0===t.data.bytes.byteLength?r.call(this):(h.appendBuffer?h.appendBuffer(t.data.bytes):h.append(t.data.bytes,t.data),N(r.bind(this)))}catch(r){o.fatal('SourceBuffer append failed "'+r+'"'),T.length>0?e():E=!1,delete t.data.bytes,t.promise.reject({chunk:t.data,error:new i.default(r.code,r.message)})}}}).bind(t))):l({chunk:e,error:new i.default(u.default.APPEND_ERROR_CODE,u.default.APPEND_ERROR_MESSAGE)})})},remove:function(e){return new Promise(function(t,r){var n=e.start,o=e.end;n>=0&&o>n?N(function(){try{h.remove(n,o),N(function(){t({from:n,to:o,unintended:!1}),e.resolve&&e.resolve()})}catch(t){r({from:n,to:o,unintended:!1,error:new i.default(u.default.REMOVE_ERROR_CODE,u.default.REMOVE_ERROR_MESSAGE)}),e.reject&&e.reject(t)}}):t()})},abort:function(){return new Promise(function(e){try{T=[],"open"===S.readyState?N(function(){try{h&&h.abort(),e()}catch(t){e()}}):(h&&h.setTextTrack&&"ended"===S.readyState&&h.abort(),e())}catch(t){e()}})},reset:function(){if(h){try{_=[],function(){try{"function"==typeof h.removeEventListener&&(h.removeEventListener("updateend",k,!1),h.removeEventListener("error",D,!1),h.removeEventListener("abort",D,!1)),clearInterval(m)}catch(e){o.error(e)}}(),E=!1,T=[],h.getClassName&&"TextSourceBuffer"===h.getClassName()||(o.debug("Removing sourcebuffer from media source"),S.removeSourceBuffer(h))}catch(e){}h=null}w=null},updateTimestampOffset:R,initializeForStreamSwitch:function(e,t,n){r=(p=e).type;var i=p.codec;h=n.getBuffer(),I();var o=[];return o.push(new Promise(function(e){N(function(){var t=h.appendWindowStart,r=h.appendWindowEnd;h&&(h.abort(),h.appendWindowStart=t,h.appendWindowEnd=r),e()})})),o.push(O(p.streamInfo)),o.push(A(i)),t&&void 0!==t.MSETimeOffset&&o.push(R(t.MSETimeOffset)),Promise.all(o)},initializeForFirstUse:function(e,t,n){r=(p=t).type;var i=p.codec;try{if(i.match(/application\/mp4;\s*codecs="(stpp|wvtt).*"/i))return C(e);h=S.addSourceBuffer(i),I();var o=[];return o.push(O(p.streamInfo)),n&&void 0!==n.MSETimeOffset&&o.push(R(n.MSETimeOffset)),Promise.all(o)}catch(t){return(p.type!=c.default.TEXT||p.isFragmented)&&-1===i.indexOf('codecs="stpp')&&-1===i.indexOf('codecs="vtt')?Promise.reject(t):C(e)}},updateAppendWindow:O,changeType:A},o=Object(n.default)(g).getInstance().getLogger(t),t}h.__dashjs_factory_name="SourceBufferSink";var p=o.default.getClassFactory(h);t.default=p},"./src/streaming/Stream.js":function(e,t,r){r.r(t);var n=r("./src/streaming/constants/Constants.js"),i=r("./src/dash/constants/DashConstants.js"),o=r("./src/streaming/StreamProcessor.js"),u=r("./src/streaming/controllers/FragmentController.js"),l=r("./src/streaming/thumbnail/ThumbnailController.js"),c=r("./src/core/EventBus.js"),f=r("./src/core/events/Events.js"),d=r("./src/core/Debug.js"),h=r("./src/core/errors/Errors.js"),p=r("./src/core/FactoryMaker.js"),m=r("./src/streaming/vo/DashJSError.js"),g=r("./src/streaming/utils/BoxParser.js"),y=r("./src/streaming/utils/URLUtils.js"),v=r("./src/streaming/controllers/BlacklistController.js"),b=[n.default.VIDEO,n.default.AUDIO,n.default.TEXT,n.default.MUXED,n.default.IMAGE];function _(e){e=e||{};var t,r,p,_,T,E,S,w,A,C,I,O,R,P,k,D,N,L,x=this.context,j=Object(c.default)(x).getInstance(),M=Object(y.default)(x).getInstance(),F=e.manifestModel,B=e.mediaPlayerModel,U=e.dashMetrics,q=e.manifestUpdater,H=e.adapter,V=e.timelineConverter,G=e.capabilities,Y=e.errHandler,z=e.abrController,K=e.playbackController,W=e.eventController,X=e.mediaController,Q=e.protectionController,$=e.textController,J=e.videoModel,Z=e.streamInfo,ee=e.settings;function et(t,u){return new Promise(function(c,d){es(),C=!0,el();var g=J.getElement();b.forEach(function(u){(u!==n.default.VIDEO||!g||g&&/^VIDEO$/i.test(g.nodeName))&&function(t,u){var c,d=H.getAllMediaInfoForType(Z,t),h=[],m=null;if(d&&0!==d.length){t===n.default.VIDEO&&(S=!0),t===n.default.AUDIO&&(w=!0);for(var g=0,y=d.length;g<y;g++)m=d[g],t===n.default.TEXT&&m.isEmbedded&&($.addEmbeddedTrack(Z,m),h.push(m)),er(m)&&X.addTrack(m);if(h.length>0&&(X.setInitialMediaSettingsForType(t,Z),$.addMediaInfosToBuffer(Z,t,h)),0!==(d=d.filter(function(e){return!e.isEmbedded})).length){if(t!==n.default.IMAGE){j.trigger(f.default.STREAM_INITIALIZING,{streamInfo:Z,mediaInfo:m}),X.setInitialMediaSettingsForType(t,Z);var v=function(t,r){var i=t&&t.length>0?t[0]:null,u=I.getModel(i?i.type:null),l=i?i.type:null,c=i?i.mimeType:null,f=i?i.isFragmented:null,d=Object(o.default)(x).create({streamInfo:Z,type:l,mimeType:c,timelineConverter:V,adapter:H,manifestModel:F,mediaPlayerModel:B,fragmentModel:u,dashMetrics:e.dashMetrics,baseURLController:e.baseURLController,segmentBaseController:e.segmentBaseController,abrController:z,playbackController:K,mediaController:X,textController:$,errHandler:Y,settings:ee,boxParser:k,segmentBlacklistController:R});d.initialize(r,S,f),p.push(d);for(var h=0;h<t.length;h++)d.addMediaInfo(t[h]);return l===n.default.TEXT&&$.addMediaInfosToBuffer(Z,l,t,u),d}(d,u);(c=X.getCurrentTrackFor(t,Z.id))&&(z.updateTopQualityIndex(c),v.selectMediaInfo(t===n.default.TEXT&&c.isEmbedded?d[0]:c))}else(O=Object(l.default)(x).create({streamInfo:Z,adapter:H,baseURLController:e.baseURLController,timelineConverter:e.timelineConverter,debug:D,eventBus:j,events:f.default,dashConstants:i.default,dashMetrics:e.dashMetrics,segmentBaseController:e.segmentBaseController})).initialize()}}else r.info("No "+t+" data.")}(u,t)}),new Promise(function(e){var t={};Promise.all(p.map(function(e){return e.createBufferSinks(u)})).then(function(r){r.forEach(function(e){e&&(t[e.getType()]=e)}),e(t)}).catch(function(){e(t)})}).then(function(e){if(C=!1,0===p.length){var t="No streams to play.";Y.error(new m.default(h.default.MANIFEST_ERROR_ID_NOSTREAMS_CODE,t,F.getValue())),r.fatal(t)}else ec();$.createTracks(Z),c(e)}).catch(function(e){d(e)})})}function er(e){var t,i=e?e.type:null;return i===n.default.MUXED?(t="Multiplexed representations are intentionally not supported, as they are not compliant with the DASH-AVC/264 guidelines",r.fatal(t),Y.error(new m.default(h.default.MANIFEST_ERROR_ID_MULTIPLEXED_CODE,t,F.getValue())),!1):!(i!==n.default.TEXT&&i!==n.default.IMAGE&&e.contentProtection&&!G.supportsEncryptedMedia()&&(Y.error(new m.default(h.default.CAPABILITY_MEDIAKEYS_ERROR_CODE,h.default.CAPABILITY_MEDIAKEYS_ERROR_MESSAGE)),1))}function en(e){for(var t=p?p.length:0,r=0;r<t;r++){var n=p[r].getFragmentModel();n.abortRequests(),n.resetInitialSettings(),p[r].reset(!1,e)}$&&$.deactivateStream(Z),p=[],T=!1,E=!1,P=!1,N=!1,j.trigger(f.default.STREAM_DEACTIVATED,{streamInfo:Z})}function ei(e){en(e),_=!1,S=!1,w=!1,A={},C=!1,N=!1,L=[]}function eo(){return Z?Z.start:NaN}function ea(){return Z?Z.id:null}function es(){if(!J||!z)throw Error(n.default.MISSING_CONFIG_ERROR)}function eu(e){e.error&&(Y.error(e.error),r.fatal(e.error.message))}function el(){if(W){var e=H.getEventsFor(Z);e&&e.length>0&&W.addInlineEvents(e,Z.id)}}function ec(){for(var e=p.length,t=A.audio||A.video?new m.default(h.default.DATA_UPDATE_FAILED_ERROR_CODE,h.default.DATA_UPDATE_FAILED_ERROR_MESSAGE):null,r=0;r<e;r++)if(p[r].isUpdating()||C)return;if(Q){Q.clearMediaInfoArray();for(var i=0;i<e&&p[i];i++){var o=p[i].getType(),u=p[i].getMediaInfo();if(o===n.default.AUDIO||o===n.default.VIDEO||o===n.default.TEXT&&u.isFragmented){var l=p[i].getMediaInfo();l&&Q.initializeForMedia(l)}}Q.handleKeySystemFromManifest()}t?Y.error(t):_||(_=!0,J.waitForReadyState(n.default.VIDEO_ELEMENT_READY_STATES.HAVE_METADATA,function(){j.trigger(f.default.STREAM_INITIALIZED,{streamInfo:Z})}))}function ef(){var e=eg(),t=e.length;if(0!==t){for(var i=0;i<t;i++)if(!e[i].isBufferingCompleted()&&(e[i].getType()===n.default.AUDIO||e[i].getType()===n.default.VIDEO))return void r.debug("onBufferingCompleted - One streamProcessor has finished but",e[i].getType(),"one is not buffering completed");r.debug("onBufferingCompleted - trigger STREAM_BUFFERING_COMPLETED"),E=!0,j.trigger(f.default.STREAM_BUFFERING_COMPLETED,{streamInfo:Z},{streamInfo:Z})}else r.warn("onBufferingCompleted - can't trigger STREAM_BUFFERING_COMPLETED because no streamProcessor is defined")}function ed(e){A[e.mediaType]=e.error,ec()}function eh(e){W&&W.addInbandEvents(e.events,Z.id)}function ep(e){return e&&e.type?em(e.type):null}function em(e){return e?eg().filter(function(t){return t.getType()===e})[0]:null}function eg(){for(var e,t,r=[],i=0;i<p.length;i++)(e=(t=p[i]).getType())!==n.default.AUDIO&&e!==n.default.VIDEO&&e!==n.default.TEXT||r.push(t);return r}function ey(e,t){var r=Z,n=t.getStreamInfo();if(!n||!r)return!0;var i=H.getAdaptationForType(n.index,e,n),o=H.getAdaptationForType(r.index,e,r);return i&&o?!(!ev(o)&&ev(i)):!i&&!o}function ev(e){return!!e&&!!(e.ContentProtection||e.Representation&&e.Representation.length>0&&e.Representation[0].ContentProtection)}function eb(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;if(!e||!e.hasOwnProperty("getStreamInfo"))return!1;var n=e.getStreamInfo(),i=r?r.getStreamInfo():Z;if(!n||!i)return!1;var o=H.getAdaptationForType(n.index,t,n),u=H.getAdaptationForType(i.index,t,i);if(!o||!u)return!o&&!u;var l=o&&u&&o.mimeType===u.mimeType,c=u.Representation_asArray.map(function(e){return e.codecs}),f=o.Representation_asArray.map(function(e){return e.codecs}),d=f.some(function(e){return c.indexOf(e)>-1}),h=f.some(function(e){return c.some(function(t){return G.codecRootCompatibleWithCodec(t,e)})});return d||h&&l}return t={initialize:function(){j.on(f.default.BUFFERING_COMPLETED,ef,t),j.on(f.default.DATA_UPDATE_COMPLETED,ed,t),j.on(f.default.INBAND_EVENTS,eh,t),Q&&(j.on(f.default.KEY_ERROR,eu,t),j.on(f.default.SERVER_CERTIFICATE_UPDATED,eu,t),j.on(f.default.LICENSE_REQUEST_COMPLETE,eu,t),j.on(f.default.KEY_SYSTEM_SELECTED,eu,t),j.on(f.default.KEY_SESSION_CREATED,eu,t),j.on(f.default.KEY_STATUSES_CHANGED,eu,t)),$.initializeForStream(Z),j.trigger(f.default.STREAM_UPDATED,{streamInfo:Z})},getStreamId:function(){return Z?Z.id:null},activate:function(e,t){return new Promise(function(r,n){if(!T)return P?(T=!0,j.trigger(f.default.STREAM_ACTIVATED,{streamInfo:Z}),void r(t)):void et(e,t).then(function(e){T=!0,j.trigger(f.default.STREAM_ACTIVATED,{streamInfo:Z}),r(e)}).catch(function(e){n(e)});r(t)})},deactivate:en,getIsActive:function(){return T},getDuration:function(){return Z?Z.duration:NaN},getStartTime:eo,getId:ea,getStreamInfo:function(){return Z},getHasAudioTrack:function(){return w},getHasVideoTrack:function(){return S},startPreloading:function(e,t){return new Promise(function(n,i){P?i():(r.info("[startPreloading] Preloading next stream with id ".concat(ea())),P=!0,et(e,t).then(function(){for(var e=0;e<p.length&&p[e];e++)p[e].setExplicitBufferingTime(eo()),p[e].getScheduleController().startScheduleTimer();n()}).catch(function(){P=!1,i()}))})},getThumbnailController:function(){return O},getBitrateListFor:function(e){if(es(),e===n.default.IMAGE)return O?O.getBitrateList():[];var t=function(e){for(var t=null,r=0;r<p.length;r++)if((t=p[r]).getType()===e)return t.getMediaInfo();return null}(e);return z.getBitrateList(t)},updateData:function(e){return new Promise(function(t){C=!0,Z=e,W&&el();for(var r=[],n=0,i=p.length;n<i;n++){var o=p[n],u=o.getMediaInfo();r.push(o.updateStreamInfo(Z));var l=H.getAllMediaInfoForType(Z,o.getType());if(l){o.clearMediaInfoArray();for(var c=0;c<l.length;c++){var d=l[c];o.addMediaInfo(l[c]),H.areMediaInfosEqual(u,d)&&(z.updateTopQualityIndex(d),r.push(o.selectMediaInfo(d)))}}}Promise.all(r).then(function(){for(r=[];L.length>0;){var e=L.pop(),t=e.newMediaInfo,n=ep(e.oldMediaInfo);if(!n)return;r.push(n.prepareTrackSwitch()),n.selectMediaInfo(t)}return Promise.all(r)}).then(function(){C=!1,ec(),j.trigger(f.default.STREAM_UPDATED,{streamInfo:Z}),t()})})},reset:function(e){I&&(I.reset(),I=null),z&&Z&&z.clearDataForStream(Z.id),R&&(R.reset(),R=null),ei(e),Z=null,j.off(f.default.DATA_UPDATE_COMPLETED,ed,t),j.off(f.default.BUFFERING_COMPLETED,ef,t),j.off(f.default.INBAND_EVENTS,eh,t),Q&&(j.off(f.default.KEY_ERROR,eu,t),j.off(f.default.SERVER_CERTIFICATE_UPDATED,eu,t),j.off(f.default.LICENSE_REQUEST_COMPLETE,eu,t),j.off(f.default.KEY_SYSTEM_SELECTED,eu,t),j.off(f.default.KEY_SESSION_CREATED,eu,t),j.off(f.default.KEY_STATUSES_CHANGED,eu,t))},getProcessors:eg,setMediaSource:function(e){for(var t=0;t<p.length;)er(p[t].getMediaInfo())?(p[t].setMediaSource(e),t++):(p[t].reset(),p.splice(t,1));if(0===p.length){var n="No streams to play.";Y.error(new m.default(h.default.MANIFEST_ERROR_ID_NOSTREAMS_CODE,n+"nostreams",F.getValue())),r.fatal(n)}},isMediaCodecCompatible:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return eb(e,n.default.VIDEO,t)&&eb(e,n.default.AUDIO,t)},isProtectionCompatible:function(e){return!e||ey(n.default.VIDEO,e)&&ey(n.default.AUDIO,e)},getPreloaded:function(){return P},getIsEndedEventSignaled:function(){return N},setIsEndedEventSignaled:function(e){N=e},getAdapter:function(){return H},getHasFinishedBuffering:function(){return E},setPreloaded:function(e){P=e},startScheduleControllers:function(){for(var e=p.length,t=0;t<e&&p[t];t++)p[t].getScheduleController().startScheduleTimer()},prepareTrackChange:function(e){if(T&&Z){E=!1;var t=e.newMediaInfo,i=F.getValue();H.setCurrentMediaInfo(Z.id,t.type,t);var o=ep(t);if(o){var u=K.getTime();r.info("Stream -  Process track changed at current time "+u),i.refreshManifestOnSwitchTrack?(L.push(e),q.getIsUpdating()||(r.debug("Stream -  Refreshing manifest for switch track"),q.refreshManifest())):o.selectMediaInfo(t).then(function(){t.type!==n.default.VIDEO&&t.type!==n.default.AUDIO||z.updateTopQualityIndex(t),o.prepareTrackSwitch()})}}},prepareQualityChange:function(e){var t=em(e.mediaType);t&&t.prepareQualityChange(e)}},function(){try{r=(D=Object(d.default)(x).getInstance()).getLogger(t),ei(),k=Object(g.default)(x).getInstance(),R=Object(v.default)(x).create({updateEventName:f.default.SEGMENT_LOCATION_BLACKLIST_CHANGED,addBlacklistEventName:f.default.SEGMENT_LOCATION_BLACKLIST_ADD}),I=Object(u.default)(x).create({streamInfo:Z,mediaPlayerModel:B,dashMetrics:U,errHandler:Y,settings:ee,boxParser:k,dashConstants:i.default,urlUtils:M})}catch(e){throw e}}(),t}_.__dashjs_factory_name="Stream",t.default=p.default.getClassFactory(_)},"./src/streaming/StreamProcessor.js":function(e,t,r){r.r(t);var n=r("./src/streaming/constants/Constants.js"),i=r("./src/dash/constants/DashConstants.js"),o=r("./src/streaming/constants/MetricsConstants.js"),u=r("./src/streaming/models/FragmentModel.js"),l=r("./src/streaming/controllers/BufferController.js"),c=r("./src/streaming/text/NotFragmentedTextBufferController.js"),f=r("./src/streaming/controllers/ScheduleController.js"),d=r("./src/dash/controllers/RepresentationController.js"),h=r("./src/core/FactoryMaker.js"),p=r("./src/streaming/utils/SupervisorTools.js"),m=r("./src/core/EventBus.js"),g=r("./src/core/events/Events.js"),y=r("./src/dash/DashHandler.js"),v=r("./src/core/errors/Errors.js"),b=r("./src/streaming/vo/DashJSError.js"),_=r("./src/core/Debug.js"),T=r("./src/streaming/utils/RequestModifier.js"),E=r("./src/streaming/utils/URLUtils.js"),S=r("./src/streaming/utils/BoxParser.js"),w=r("./src/streaming/vo/metrics/PlayList.js"),A=r("./src/dash/controllers/SegmentsController.js"),C=r("./src/streaming/vo/metrics/HTTPRequest.js");function I(e){e=e||{};var t,r,h,I,O,R,P,k,D,N,L,x,j,M=this.context,F=Object(m.default)(M).getInstance(),B=e.streamInfo,U=e.type,q=e.errHandler,H=e.mimeType,V=e.timelineConverter,G=e.adapter,Y=e.manifestModel,z=e.mediaPlayerModel,K=e.fragmentModel,W=e.abrController,X=e.playbackController,Q=e.mediaController,$=e.textController,J=e.dashMetrics,Z=e.settings,ee=e.boxParser,et=e.segmentBlacklistController;function er(){return B.id}function en(){return G.getIsTextTrack(k.getData())}function ei(){O=[],I=null,j=0,D=!1,N=!1}function eo(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];if(e.sender){if(X.getIsManifestUpdateInProgress())es();else if((!en()||$.isTextEnabled())&&R&&e.representationId&&!R.appendInitSegmentFromCache(e.representationId)){var r=k.getCurrentRepresentation();if(0===r.range)return void ea();var n=L?L.getInitRequest(I,r):null;n?K.executeRequest(n):t&&(P.setInitSegmentRequired(!0),es())}}}function ea(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];if(X.getIsManifestUpdateInProgress()||R.getIsPruningInProgress())es();else{var o,u,l=function(){var e,t=eb();if(isNaN(j)||U===n.default.TEXT&&!$.isTextEnabled())return null;var r=D;if(L){var i=k&&t?k.getRepresentationForQuality(t.quality):null;e=r?L.getSegmentRequestForTime(I,i,j):L.getNextSegmentRequest(I,i)}return e}();l?(D=!1,isNaN((o=l).startTime+o.duration)||(j=o.startTime+o.duration),o.delayLoadingTime=(new Date).getTime()+P.getTimeToLoadDelay(),P.setTimeToLoadDelay(0),(u=o.url,o.range&&(u=u.concat("_",o.range)),et.contains(u))?(r.warn("Fragment request url ".concat(o.url," for stream id ").concat(B.id," and media type ").concat(U," is on the ignore list and will be skipped")),es()):(r.debug("Next fragment request url for stream id ".concat(B.id," and media type ").concat(U," is ").concat(o.url)),K.executeRequest(o))):function(e){var t,n=k.getCurrentRepresentation();if(!Z.get().streaming.gaps.enableSeekFix||!D&&0!==X.getTime()||(h?h&&n.segmentInfoType===i.default.SEGMENT_TIMELINE&&(t=L.getValidTimeAheadOfTargetTime(j,I,n,Z.get().streaming.gaps.threshold)):t=L.getValidTimeAheadOfTargetTime(j,I,n,Z.get().streaming.gaps.threshold),isNaN(t)||t===j)){if(L.isLastSegmentRequested(n,j)){var o=L.getCurrentIndex();return r.debug("Segment requesting for stream ".concat(B.id," has finished")),F.trigger(g.default.STREAM_REQUESTING_COMPLETED,{segmentIndex:o},{streamId:B.id,mediaType:U}),R.segmentRequestingCompleted(o),void P.clearScheduleTimer()}e&&es()}else X.isSeeking()||0===X.getTime()?(r.warn("Adjusting playback time ".concat(t," because of gap in the manifest. Seeking by ").concat(t-j)),X.seek(t,!1,!1)):(r.warn("Adjusting buffering time ".concat(t," because of gap in the manifest. Adjusting time by ").concat(t-j)),eA(t),e&&es())}(t)}}function es(){P.startScheduleTimer(X.getLowLatencyModeEnabled()?Z.get().streaming.scheduling.lowLatencyTimeout:Z.get().streaming.scheduling.defaultTimeout)}function eu(e){e.error||(P.setCurrentRepresentation(G.convertRepresentationToRepresentationInfo(e.currentRepresentation)),R.getIsBufferingCompleted()||R.updateBufferTimestampOffset(e.currentRepresentation))}function el(e){J.addBufferState(U,e.state,P.getBufferTarget()),e.state!==o.default.BUFFER_EMPTY||X.isSeeking()||(r.info("Buffer is empty! Stalling!"),J.pushPlayListTraceMetrics(new Date,w.PlayListTrace.REBUFFERING_REASON))}function ec(e){K.syncExecutedRequestsWithBufferedRange(R.getBuffer().getAllBufferRanges(),B.duration),e.quotaExceeded&&e.from>X.getTime()&&eA(e.from),e.hasEnoughSpaceToAppend&&e.quotaExceeded&&P.startScheduleTimer()}function ef(e){if(e&&e.lastRequestAppended&&e.lastRequestAppended.url){var t=e.lastRequestAppended.url;e.lastRequestAppended.range&&(t=t.concat("_",e.lastRequestAppended.range)),r.warn("Blacklisting segment with url ".concat(t)),et.add(t)}}function ed(e){r.info("onFragmentLoadingAbandoned request: "+e.request.url+" has been aborted"),X.isSeeking()||P.getSwitchStrack()||N||(r.info("onFragmentLoadingAbandoned request: "+e.request.url+" has to be downloaded again, origin is not seeking process or switch track call"),e.request&&e.request.isInitializationRequest()?P.setInitSegmentRequired(!0):eA(e.request.startTime+e.request.duration/2),P.startScheduleTimer(0))}function eh(e){r.info("OnFragmentLoadingCompleted for stream id "+B.id+" and media type "+U+" - Url:",e.request?e.request.url:"undefined",e.request.range?", Range:"+e.request.range:""),en()&&P.startScheduleTimer(0),e.error&&e.request.serviceLocation&&(r.info("Fragment loading completed with an error"),e&&e.request&&e.request.type&&(e.request.type===C.HTTPRequest.INIT_SEGMENT_TYPE?eo({representationId:e.request.representationId,sender:{}},!1):e.request.type===C.HTTPRequest.MEDIA_SEGMENT_TYPE&&(eA(e.request.startTime+e.request.duration/2),ea({},!1))))}function ep(){eA(X.getTime()),P.startScheduleTimer()}function em(e){var t=e.currentTrackInfo;if(t){var r=O.find(function(e){return e.index===t.index&&e.lang===t.lang});r&&ev(r).then(function(){R.setIsBufferingCompleted(!1),eA(X.getTime()),P.setInitSegmentRequired(!0),P.startScheduleTimer()})}}function eg(e){eA(e.quotaExceededTime),P.clearScheduleTimer()}function ey(){return R?R.getBuffer():null}function ev(e){e===I||e&&I&&e.type!==I.type||(I=e);var t=G.getRealAdaptation(B,I),r=G.getVoRepresentations(I);if(k){var i,o=k.getData(),u=W.getMaxAllowedIndexFor(U,B.id),l=W.getMinAllowedIndexFor(U,B.id),c=null;return null!==o&&o.id===t.id||U===n.default.TEXT?i=W.getQualityFor(U,B.id):(c=W.getThroughputHistory().getAverageThroughput(U,h)||W.getInitialBitrateFor(U,B.id),i=W.getQualityForBitrate(I,c,B.id)),void 0!==l&&i<l&&(i=l),i>u&&(i=u),k.updateData(t,r,U,I.isFragmented,i)}return Promise.resolve()}function eb(e){var t;return void 0!==e?(Object(p.checkInteger)(e),t=k?k.getRepresentationForQuality(e):null):t=k?k.getCurrentRepresentation():null,G.convertRepresentationToRepresentationInfo(t)}function e_(){return!!R&&R.getIsBufferingCompleted()}function eT(e){var t=e.chunk,r=t.bytes,n=t.quality,i=eb(n),o=k&&i?k.getRepresentationForQuality(i.quality):null;if(i&&o){var l=G.getEventsFor(i.mediaInfo,null,B),c=G.getEventsFor(i,o,B);if(l&&l.length>0||c&&c.length>0){var f=function(e,t,r,n){try{for(var i={},o=[],u=r.concat(n),l=0,c=u.length;l<c;l++)i[u[l].schemeIdUri+"/"+u[l].value]=u[l];var f=Object(S.default)(M).getInstance().parse(e),d=f.getBoxes("emsg");if(!d||0===d.length)return o;for(var h=f.getBox("sidx"),p=!h||isNaN(h.earliest_presentation_time)||isNaN(h.timescale)?t&&!isNaN(t.mediaStartTime)?t.mediaStartTime:0:h.earliest_presentation_time/h.timescale,m=Math.max(p,0),g=k.getCurrentRepresentation(),y=0,v=d.length;y<v;y++){var b=G.getEvent(d[y],i,m,g);b&&o.push(b)}return o}catch(e){return[]}}(r,K.getRequests({state:u.default.FRAGMENT_MODEL_EXECUTED,quality:n,index:t.index})[0],l,c);F.trigger(g.default.INBAND_EVENTS,{events:f},{streamId:B.id})}}}function eE(){var e=X.getTime();Z.get().streaming.buffer.flushBufferAtTrackSwitch&&X.seek(e+.001,!1,!0),eA(e),R.setSeekTarget(e),P.startScheduleTimer()}function eS(){var e=X.getTime(),t=R.getContinuousBufferTimeForTargetTime(e);eA(isNaN(t)?e:t),P.startScheduleTimer()}function ew(e){e&&!isNaN(e.time)&&(eA(e.time),R.setSeekTarget(e.time))}function eA(e){j=e,D=!0}return t={initialize:function(r,o,u){var p;x=Object(A.default)(M).create({events:g.default,eventBus:F,streamInfo:B,timelineConverter:V,dashConstants:i.default,segmentBaseController:e.segmentBaseController,type:U}),L=Object(y.default)(M).create({streamInfo:B,type:U,timelineConverter:V,dashMetrics:J,mediaPlayerModel:z,baseURLController:e.baseURLController,errHandler:q,segmentsController:x,settings:Z,boxParser:ee,events:g.default,eventBus:F,errors:v.default,debug:Object(_.default)(M).getInstance(),requestModifier:Object(T.default)(M).getInstance(),dashConstants:i.default,constants:n.default,urlUtils:Object(E.default)(M).getInstance()}),h=B.manifestInfo.isDynamic,L.initialize(h),W.registerStreamType(U,t),k=Object(d.default)(M).create({streamInfo:B,type:U,abrController:W,dashMetrics:J,playbackController:X,timelineConverter:V,dashConstants:i.default,events:g.default,eventBus:F,errors:v.default,isDynamic:h,segmentsController:x}),(R=(p=U)?p!==n.default.TEXT||u?Object(l.default)(M).create({streamInfo:B,type:p,mediaPlayerModel:z,manifestModel:Y,fragmentModel:K,errHandler:q,mediaController:Q,representationController:k,adapter:G,textController:$,abrController:W,playbackController:X,settings:Z}):Object(c.default)(M).create({streamInfo:B,type:p,mimeType:H,fragmentModel:K,textController:$,errHandler:q,settings:Z}):(q.error(new b.default(v.default.MEDIASOURCE_TYPE_UNSUPPORTED_CODE,v.default.MEDIASOURCE_TYPE_UNSUPPORTED_MESSAGE+"not properly defined")),null))&&R.initialize(r),(P=Object(f.default)(M).create({streamInfo:B,type:U,mimeType:H,adapter:G,dashMetrics:J,mediaPlayerModel:z,fragmentModel:K,abrController:W,playbackController:X,textController:$,mediaController:Q,bufferController:R,settings:Z})).initialize(o),j=0,D=!1},getStreamId:er,getType:function(){return U},isUpdating:function(){return!!k&&k.isUpdating()},getBufferController:function(){return R},getFragmentModel:function(){return K},getScheduleController:function(){return P},getRepresentationController:function(){return k},getRepresentationInfo:eb,getBufferLevel:function(){return R?R.getBufferLevel():0},isBufferingCompleted:e_,createBufferSinks:function(e){var t=ey();return t?Promise.resolve(t):R?R.createBufferSink(I,e):Promise.resolve(null)},updateStreamInfo:function(e){return B=e,e_()?Promise.resolve():R.updateAppendWindow()},getStreamInfo:function(){return B},selectMediaInfo:ev,clearMediaInfoArray:function(){O=[]},addMediaInfo:function(e){-1===O.indexOf(e)&&O.push(e)},prepareTrackSwitch:function(){return new Promise(function(e){r.debug("Preparing track switch for type ".concat(U));var t=U===n.default.TEXT||Z.get().streaming.trackSwitchMode[U]===n.default.TRACK_SWITCH_MODE_ALWAYS_REPLACE&&X.getTimeToStreamEnd(B)>Z.get().streaming.buffer.stallThreshold;if(R.getIsBufferingCompleted()&&!t)return R.prepareForNonReplacementTrackSwitch(I.codec).then(function(){F.trigger(g.default.BUFFERING_COMPLETED,{},{streamId:B.id,mediaType:U})}).catch(function(){F.trigger(g.default.BUFFERING_COMPLETED,{},{streamId:B.id,mediaType:U})}),void e();P.clearScheduleTimer(),P.setSwitchTrack(!0),t?(F.trigger(g.default.BUFFER_REPLACEMENT_STARTED,{mediaType:U,streamId:B.id},{mediaType:U,streamId:B.id}),K.abortRequests(),R.prepareForReplacementTrackSwitch(I.codec).then(function(){var e=eb();return R.updateBufferTimestampOffset(e)}).then(function(){eE(),e()}).catch(function(){eE(),e()})):R.prepareForNonReplacementTrackSwitch(I.codec).then(function(){eS(),e()}).catch(function(){eS(),e()})})},prepareQualityChange:function(e){r.debug("Preparing quality switch for type ".concat(U));var t=e.newQuality;N=!0,P.clearScheduleTimer();var n=eb(t);P.setCurrentRepresentation(n),k.prepareQualityChange(t),K.abortRequests(),R.updateBufferTimestampOffset(n).then(function(){e.reason&&e.reason.forceReplace?(F.trigger(g.default.BUFFER_REPLACEMENT_STARTED,{mediaType:U,streamId:B.id},{mediaType:U,streamId:B.id}),R.prepareForReplacementQualitySwitch().then(function(){eE(),N=!1}).catch(function(){eE(),N=!1})):Z.get().streaming.buffer.fastSwitchEnabled?function(e){var t=X.getTime(),r=1.5*(isNaN(e.fragmentDuration)?1:e.fragmentDuration),n=K.getRequests({state:u.default.FRAGMENT_MODEL_EXECUTED,time:t+r,threshold:0})[0];if(n&&!en()){var i=R.getBufferLevel(),l=W.getAbandonmentStateFor(B.id,U);n.quality<e.quality&&i>=r&&l!==o.default.ABANDON_LOAD?(eA(t+r),P.setCheckPlaybackQuality(!1),P.startScheduleTimer()):(eS(),N=!1)}else P.startScheduleTimer();N=!1}(n):(eS(),N=!1),J.pushPlayListTraceMetrics(new Date,w.PlayListTrace.REPRESENTATION_SWITCH_STOP_REASON),J.createPlaylistTraceMetrics(n.id,1e3*X.getTime(),X.getPlaybackRate())})},getMediaInfo:function(){return I},getMediaSource:function(){return R.getMediaSource()},setMediaSource:function(e){R.setMediaSource(e)},getBuffer:ey,setExplicitBufferingTime:eA,finalisePlayList:function(e,t){J.pushPlayListTraceMetrics(e,t)},probeNextRequest:function(){var e=eb(),t=k&&e?k.getRepresentationForQuality(e.quality):null;return L.getNextSegmentRequestIdempotent(I,t)},prepareInnerPeriodPlaybackSeeking:function(e){return new Promise(function(t){if(R.hasBufferAtTime(e.seekTime))return R.pruneBuffer(),void t();P.clearScheduleTimer(),K.abortRequests(),R.prepareForPlaybackSeek().then(function(){var t=R.getAllRangesWithSafetyFactor(e.seekTime);return R.clearBuffers(t)}).then(function(){var r=R.getContinuousBufferTimeForTargetTime(e.seekTime);if(!isNaN(r)&&!isNaN(B.duration)&&isFinite(B.duration)&&r>=B.start+B.duration)R.setIsBufferingCompleted(!0),t();else{var n=isNaN(r)?e.seekTime:r;eA(n),R.setSeekTarget(n);var i=[];i.push(R.updateAppendWindow());var o=eb();i.push(R.updateBufferTimestampOffset(o)),Promise.all(i).then(function(){P.setInitSegmentRequired(!0),P.setCheckPlaybackQuality(!1),P.startScheduleTimer(),t()})}}).catch(function(e){r.error(e)})})},prepareOuterPeriodPlaybackSeeking:function(){return new Promise(function(e,t){try{P.clearScheduleTimer(),K.abortRequests(),R.prepareForPlaybackSeek().then(function(){return R.pruneAllSafely()}).then(function(){e()})}catch(e){t(e)}})},reset:function(e,r){L&&L.reset(),R&&(R.reset(e,r),R=null),P&&(P.reset(),P=null),k&&(k.reset(),k=null),x&&(x=null),W&&W.unRegisterStreamType(er(),U),F.off(g.default.DATA_UPDATE_COMPLETED,eu,t),F.off(g.default.INIT_FRAGMENT_NEEDED,eo,t),F.off(g.default.MEDIA_FRAGMENT_NEEDED,ea,t),F.off(g.default.MEDIA_FRAGMENT_LOADED,eT,t),F.off(g.default.BUFFER_LEVEL_STATE_CHANGED,el,t),F.off(g.default.BUFFER_CLEARED,ec,t),F.off(g.default.SEEK_TARGET,ew,t),F.off(g.default.FRAGMENT_LOADING_ABANDONED,ed,t),F.off(g.default.FRAGMENT_LOADING_COMPLETED,eh,t),F.off(g.default.SET_FRAGMENTED_TEXT_AFTER_DISABLED,ep,t),F.off(g.default.SET_NON_FRAGMENTED_TEXT,em,t),F.off(g.default.QUOTA_EXCEEDED,eg,t),F.off(g.default.SOURCE_BUFFER_ERROR,ef,t),ei(),U=null,B=null}},r=Object(_.default)(M).getInstance().getLogger(t),ei(),F.on(g.default.DATA_UPDATE_COMPLETED,eu,t,{priority:m.default.EVENT_PRIORITY_HIGH}),F.on(g.default.INIT_FRAGMENT_NEEDED,eo,t),F.on(g.default.MEDIA_FRAGMENT_NEEDED,ea,t),F.on(g.default.MEDIA_FRAGMENT_LOADED,eT,t),F.on(g.default.BUFFER_LEVEL_STATE_CHANGED,el,t),F.on(g.default.BUFFER_CLEARED,ec,t),F.on(g.default.SEEK_TARGET,ew,t),F.on(g.default.FRAGMENT_LOADING_ABANDONED,ed,t),F.on(g.default.FRAGMENT_LOADING_COMPLETED,eh,t),F.on(g.default.QUOTA_EXCEEDED,eg,t),F.on(g.default.SET_FRAGMENTED_TEXT_AFTER_DISABLED,ep,t),F.on(g.default.SET_NON_FRAGMENTED_TEXT,em,t),F.on(g.default.SOURCE_BUFFER_ERROR,ef,t),t}I.__dashjs_factory_name="StreamProcessor",t.default=h.default.getClassFactory(I)},"./src/streaming/XlinkLoader.js":function(e,t,r){r.r(t);var n=r("./src/streaming/vo/DashJSError.js"),i=r("./src/streaming/net/URLLoader.js"),o=r("./src/streaming/vo/metrics/HTTPRequest.js"),u=r("./src/streaming/vo/TextRequest.js"),l=r("./src/core/EventBus.js"),c=r("./src/core/events/Events.js"),f=r("./src/core/FactoryMaker.js"),d=r("./src/core/errors/Errors.js");function h(e){e=e||{};var t=this.context,r=Object(l.default)(t).getInstance(),f=Object(i.default)(t).create({errHandler:e.errHandler,dashMetrics:e.dashMetrics,mediaPlayerModel:e.mediaPlayerModel,requestModifier:e.requestModifier,errors:d.default});return{load:function(e,t,i){var l=function(o,u){t.resolved=!0,t.resolvedContent=o||null,r.trigger(c.default.XLINK_ELEMENT_LOADED,{element:t,resolveObject:i,error:o||u?null:new n.default(d.default.XLINK_LOADER_LOADING_FAILURE_ERROR_CODE,d.default.XLINK_LOADER_LOADING_FAILURE_ERROR_MESSAGE+e)})};if("urn:mpeg:dash:resolve-to-zero:2013"===e)l(null,!0);else{var h=new u.default(e,o.HTTPRequest.XLINK_EXPANSION_TYPE);f.load({request:h,success:function(e){l(e)},error:function(){l(null)}})}},reset:function(){f&&(f.abort(),f=null)}}}h.__dashjs_factory_name="XlinkLoader",t.default=f.default.getClassFactory(h)},"./src/streaming/constants/ConformanceViolationConstants.js":function(e,t,r){r.r(t),t.default={LEVELS:{SUGGESTION:"Suggestion",WARNING:"Warning",ERROR:"Error"},EVENTS:{NO_UTC_TIMING_ELEMENT:{key:"NO_UTC_TIMING_ELEMENT",message:"No UTCTiming element is present in the manifest. You may experience playback failures. For a detailed validation use https://conformance.dashif.org/"},NON_COMPLIANT_SMPTE_IMAGE_ATTRIBUTE:{key:"NON_COMPLIANT_SMPTE_IMAGE_ATTRIBUTE",message:'SMPTE 2052-1:2013 defines the attribute name as "imageType" and does not define "imagetype"'},INVALID_DVR_WINDOW:{key:"INVALID_DVR_WINDOW",message:"No valid segment found when applying a specification compliant DVR window calculation. Using SegmentTimeline entries as a fallback."}}}},"./src/streaming/constants/Constants.js":function(e,t,r){function n(e){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}r.r(t);var i=new(function(){function e(){(function(e,t){if(!(e instanceof t))throw TypeError("Cannot call a class as a function")})(this,e),this.init()}return function(e,t){for(var r,i=0;i<t.length;i++){var o=t[i];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,(r=function(e,t){if("object"!==n(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var i=r.call(e,"string");if("object"!==n(i))return i;throw TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(o.key),"symbol"===n(r)?r:String(r)),o)}}(e.prototype,[{key:"init",value:function(){this.STREAM="stream",this.VIDEO="video",this.AUDIO="audio",this.TEXT="text",this.MUXED="muxed",this.IMAGE="image",this.STPP="stpp",this.TTML="ttml",this.VTT="vtt",this.WVTT="wvtt",this.CONTENT_STEERING="contentSteering",this.ABR_STRATEGY_DYNAMIC="abrDynamic",this.ABR_STRATEGY_BOLA="abrBola",this.ABR_STRATEGY_L2A="abrL2A",this.ABR_STRATEGY_LoLP="abrLoLP",this.ABR_STRATEGY_THROUGHPUT="abrThroughput",this.ABR_FETCH_THROUGHPUT_CALCULATION_DOWNLOADED_DATA="abrFetchThroughputCalculationDownloadedData",this.ABR_FETCH_THROUGHPUT_CALCULATION_MOOF_PARSING="abrFetchThroughputCalculationMoofParsing",this.ABR_FETCH_THROUGHPUT_CALCULATION_AAST="abrFetchThroughputCalculationAAST",this.LIVE_CATCHUP_MODE_DEFAULT="liveCatchupModeDefault",this.LIVE_CATCHUP_MODE_LOLP="liveCatchupModeLoLP",this.MOVING_AVERAGE_SLIDING_WINDOW="slidingWindow",this.MOVING_AVERAGE_EWMA="ewma",this.BAD_ARGUMENT_ERROR="Invalid Arguments",this.MISSING_CONFIG_ERROR="Missing config parameter(s)",this.TRACK_SWITCH_MODE_ALWAYS_REPLACE="alwaysReplace",this.TRACK_SWITCH_MODE_NEVER_REPLACE="neverReplace",this.TRACK_SELECTION_MODE_FIRST_TRACK="firstTrack",this.TRACK_SELECTION_MODE_HIGHEST_BITRATE="highestBitrate",this.TRACK_SELECTION_MODE_HIGHEST_EFFICIENCY="highestEfficiency",this.TRACK_SELECTION_MODE_WIDEST_RANGE="widestRange",this.TRACK_SELECTION_MODE_HIGHEST_SELECTION_PRIORITY="highestSelectionPriority",this.CMCD_MODE_QUERY="query",this.CMCD_MODE_HEADER="header",this.LOCATION="Location",this.INITIALIZE="initialize",this.TEXT_SHOWING="showing",this.TEXT_HIDDEN="hidden",this.CC1="CC1",this.CC3="CC3",this.UTF8="utf-8",this.SCHEME_ID_URI="schemeIdUri",this.START_TIME="starttime",this.SERVICE_DESCRIPTION_DVB_LL_SCHEME="urn:dvb:dash:lowlatency:scope:2019",this.SUPPLEMENTAL_PROPERTY_DVB_LL_SCHEME="urn:dvb:dash:lowlatency:critical:2019",this.XML="XML",this.ARRAY_BUFFER="ArrayBuffer",this.DVB_REPORTING_URL="dvb:reportingUrl",this.DVB_PROBABILITY="dvb:probability",this.VIDEO_ELEMENT_READY_STATES={HAVE_NOTHING:0,HAVE_METADATA:1,HAVE_CURRENT_DATA:2,HAVE_FUTURE_DATA:3,HAVE_ENOUGH_DATA:4},this.FILE_LOADER_TYPES={FETCH:"fetch_loader",XHR:"xhr_loader"}}}]),Object.defineProperty(e,"prototype",{writable:!1}),e}());t.default=i},"./src/streaming/constants/MetricsConstants.js":function(e,t,r){function n(e){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}r.r(t);var i=new(function(){function e(){(function(e,t){if(!(e instanceof t))throw TypeError("Cannot call a class as a function")})(this,e),this.init()}return function(e,t){for(var r,i=0;i<t.length;i++){var o=t[i];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,(r=function(e,t){if("object"!==n(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var i=r.call(e,"string");if("object"!==n(i))return i;throw TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(o.key),"symbol"===n(r)?r:String(r)),o)}}(e.prototype,[{key:"init",value:function(){this.TCP_CONNECTION="TcpList",this.HTTP_REQUEST="HttpList",this.TRACK_SWITCH="RepSwitchList",this.BUFFER_LEVEL="BufferLevel",this.BUFFER_LOADED="bufferLoaded",this.ABANDON_LOAD="abandonload",this.ALLOW_LOAD="allowload",this.BUFFER_EMPTY="bufferStalled",this.BUFFER_STATE="BufferState",this.DVR_INFO="DVRInfo",this.DROPPED_FRAMES="DroppedFrames",this.SCHEDULING_INFO="SchedulingInfo",this.REQUESTS_QUEUE="RequestsQueue",this.MANIFEST_UPDATE="ManifestUpdate",this.MANIFEST_UPDATE_STREAM_INFO="ManifestUpdatePeriodInfo",this.MANIFEST_UPDATE_TRACK_INFO="ManifestUpdateRepresentationInfo",this.PLAY_LIST="PlayList",this.DVB_ERRORS="DVBErrors",this.HTTP_REQUEST_DVB_REPORTING_TYPE="DVBReporting"}}]),Object.defineProperty(e,"prototype",{writable:!1}),e}());t.default=i},"./src/streaming/constants/ProtectionConstants.js":function(e,t,r){function n(e){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}r.r(t);var i=new(function(){function e(){(function(e,t){if(!(e instanceof t))throw TypeError("Cannot call a class as a function")})(this,e),this.init()}return function(e,t){for(var r,i=0;i<t.length;i++){var o=t[i];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,(r=function(e,t){if("object"!==n(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var i=r.call(e,"string");if("object"!==n(i))return i;throw TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(o.key),"symbol"===n(r)?r:String(r)),o)}}(e.prototype,[{key:"init",value:function(){this.CLEARKEY_KEYSTEM_STRING="org.w3.clearkey",this.WIDEVINE_KEYSTEM_STRING="com.widevine.alpha",this.PLAYREADY_KEYSTEM_STRING="com.microsoft.playready",this.PLAYREADY_RECOMMENDATION_KEYSTEM_STRING="com.microsoft.playready.recommendation",this.INITIALIZATION_DATA_TYPE_CENC="cenc",this.INITIALIZATION_DATA_TYPE_KEYIDS="keyids",this.INITIALIZATION_DATA_TYPE_WEBM="webm"}}]),Object.defineProperty(e,"prototype",{writable:!1}),e}());t.default=i},"./src/streaming/controllers/AbrController.js":function(e,t,r){r.r(t);var n=r("./src/streaming/rules/abr/ABRRulesCollection.js"),i=r("./src/streaming/constants/Constants.js"),o=r("./src/streaming/constants/MetricsConstants.js"),u=r("./src/streaming/vo/BitrateInfo.js"),l=r("./src/streaming/models/FragmentModel.js"),c=r("./src/core/EventBus.js"),f=r("./src/core/events/Events.js"),d=r("./src/core/FactoryMaker.js"),h=r("./src/streaming/rules/RulesContext.js"),p=r("./src/streaming/rules/SwitchRequest.js"),m=r("./src/streaming/rules/SwitchRequestHistory.js"),g=r("./src/streaming/rules/DroppedFramesHistory.js"),y=r("./src/streaming/rules/ThroughputHistory.js"),v=r("./src/core/Debug.js"),b=r("./src/streaming/vo/metrics/HTTPRequest.js"),_=r("./src/streaming/utils/SupervisorTools.js"),T=r("./src/streaming/MediaPlayerEvents.js");function E(){var e,t,r,d,E,S,w,A,C,I,O,R,P,k,D,N,L,x,j,M,F,B,U,q,H,V,G=this.context,Y=Object(v.default)(G).getInstance(),z=Object(c.default)(G).getInstance();function K(){E={},S={},A={},w={},j={},B={},U={},q={},void 0===I&&(I=!1),M&&M.reset(),x=void 0,M=void 0,F=void 0,clearTimeout(C),C=null}function W(t){var n=t.request.mediaType,i=t.streamId;if(n&&i&&w[i]&&V.get().streaming.abr.autoSwitchBitrate[n]){var u=w[i][n];if(u){var c=Object(h.default)(G).create({abrController:e,streamProcessor:u,currentRequest:t.request,useBufferOccupancyABR:B[n],useL2AABR:U[n],useLoLPABR:q[n],videoModel:k}),f=r.shouldAbandonFragment(c,i);f.quality>p.default.NO_CHANGE&&u.getFragmentModel().getRequests({state:l.default.FRAGMENT_MODEL_LOADING,index:t.request.index})[0]&&(A[i][n].state=o.default.ABANDON_LOAD,j[i][n].reset(),j[i][n].push({oldValue:Z(n,i),newValue:f.quality,confidence:1,reason:f.reason}),ee(n,d.getActiveStreamInfo(),f.quality,f.reason),clearTimeout(C),C=setTimeout(function(){A[i][n].state=o.default.ALLOW_LOAD,C=null},V.get().streaming.abandonLoadTimeout))}}}function X(e){e.mediaType===i.default.VIDEO&&(void 0!==x&&M.push(e.streamId,x,k.getPlaybackQuality()),x=e.newQuality)}function Q(e){var r,n;e.metric===o.default.HTTP_REQUEST&&e.value&&e.value.type===b.HTTPRequest.MEDIA_SEGMENT_TYPE&&(e.mediaType===i.default.AUDIO||e.mediaType===i.default.VIDEO)&&F.push(e.mediaType,e.value,V.get().streaming.abr.useDeadTimeLatency),e.metric!==o.default.BUFFER_LEVEL||e.mediaType!==i.default.AUDIO&&e.mediaType!==i.default.VIDEO||(r=e.mediaType,n=.001*e.value.level,V.get().streaming.abr.ABRStrategy===i.default.ABR_STRATEGY_DYNAMIC&&function(e,r){try{var n=D.getStableBufferTime(),i=B[e],o=r>(i?.5*n:n);B[e]=o,o!==i&&(o?t.info("["+e+"] switching from throughput to buffer occupancy ABR rule (buffer: "+r.toFixed(3)+")."):t.info("["+e+"] switching from buffer occupancy to throughput ABR rule (buffer: "+r.toFixed(3)+")."))}catch(e){t.error(e)}}(r,n))}function $(e,t){try{var r,n,o,u;return E[t]=E[t]||{},E[t].hasOwnProperty(e)||(E[t][e]=0),n=r=function(e,t){var r=E[t][e],n=r;if(!w[t]||!w[t][e])return n;var i=J(e,t);void 0!==i&&(n=Math.max(r,i));var o=function(e,t){try{var r=D.getAbrBitrateParameter("maxBitrate",e);return r>-1?er(w[t][e].getMediaInfo(),r,t):void 0}catch(e){return}}(e,t);return void 0!==o&&(n=Math.min(n,o)),n}(e,t),o=E[t][e],u=V.get().streaming.abr.maxRepresentationRatio[e],r=isNaN(u)||u>=1||u<0?n:Math.min(n,Math.round(o*u)),r=function(e,t,r){if(t!==i.default.VIDEO||!V.get().streaming.abr.limitBitrateByPortal||!w[r]||!w[r][t])return e;I||ei();var n=w[r][t].getStreamInfo(),o=P.getAdaptationForType(n.index,t,n).Representation_asArray,u=e;if(O>0&&R>0){for(;u>0&&o[u]&&O<o[u].width&&O-o[u-1].width<o[u].width-O;)u-=1;for(;u<o.length-1&&o[u].width===o[u+1].width;)u+=1}return u}(r,e,t)}catch(e){return}}function J(e,t){try{return function(e,t){try{var r=D.getAbrBitrateParameter("minBitrate",e);if(r>-1){var n=w[t][e].getMediaInfo(),i=en(n),o=er(n,r,t);return i[o]&&o<i.length-1&&i[o].bitrate<1e3*r&&o++,o}return}catch(e){return}}(e,t)}catch(e){return}}function Z(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;try{return t||(t=d.getActiveStreamInfo().id),e&&w[t]&&w[t][e]&&t?(S[t]=S[t]||{},S[t].hasOwnProperty(e)||(S[t][e]=0),S[t][e]):0}catch(e){return 0}}function ee(e,t,r){var n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;if(t&&t.id&&e){var i=t.id,o=Z(e,i);Object(_.checkInteger)(r);var u=$(e,i);r!==o&&r>=0&&r<=u&&et(e,o,r,u,n,i)}}function et(e,r,n,i,o,u){if(e&&w[u]&&w[u][e]){var l=w[u][e].getStreamInfo(),c=l&&l.manifestInfo&&l.manifestInfo.isDynamic,d=H.getCurrentBufferLevel(e);t.info("Stream ID: "+u+" ["+e+"] switch from "+r+" to "+n+"/"+i+" (buffer: "+d+") "+(o?JSON.stringify(o):".")),S[u]=S[u]||{},S[u][e]=n;var h=function(e,t,r){if(t&&w&&w[e]&&w[e][t]){var n=en(w[e][t].getMediaInfo());return n[r]?n[r]:null}return null}(u,e,n);z.trigger(f.default.QUALITY_CHANGE_REQUESTED,{oldQuality:r,newQuality:n,reason:o,streamInfo:l,bitrateInfo:h,maxIdx:i,mediaType:e},{streamId:l.id,mediaType:e});var p=F.getAverageThroughput(e,c);isNaN(p)||L.setSavedBitrateSettings(e,p)}}function er(e,t,r){var n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null,i=e&&e.type?w[r][e.type].getRepresentationInfo():null;if(V.get().streaming.abr.useDeadTimeLatency&&n&&i&&i.fragmentDuration){n/=1e3;var o=i.fragmentDuration;if(n>o)return 0;t*=1-n/o}for(var u=en(e),l=u.length-1;l>=0;l--)if(1e3*t>=u[l].bitrate)return l;return 0}function en(e){var t=[];if(!e||!e.bitrateList)return t;for(var r,n=e.bitrateList,i=e.type,o=0,l=n.length;o<l;o++)(r=new u.default).mediaType=i,r.qualityIndex=o,r.bitrate=n[o].bandwidth,r.width=n[o].width,r.height=n[o].height,r.scanType=n[o].scanType,t.push(r);return t}function ei(){if(k){var e=V.get().streaming.abr.usePixelRatioInLimitBitrateByPortal&&window.hasOwnProperty("devicePixelRatio")?window.devicePixelRatio:1;O=k.getClientWidth()*e,R=k.getClientHeight()*e}}return e={initialize:function(){M=Object(g.default)(G).create(),F=Object(y.default)(G).create({settings:V}),(r=Object(n.default)(G).create({dashMetrics:H,customParametersModel:N,mediaPlayerModel:D,settings:V})).initialize(),z.on(T.default.QUALITY_CHANGE_RENDERED,X,e),z.on(T.default.METRIC_ADDED,Q,e),z.on(f.default.LOADING_PROGRESS,W,e)},isPlayingAtTopQuality:function(e){var t=e?e.id:null,r=Z(i.default.AUDIO,t),n=Z(i.default.VIDEO,t);return r===$(i.default.AUDIO,t)&&n===$(i.default.VIDEO,t)},updateTopQualityIndex:function(e){var t=e.type,r=e.streamInfo.id,n=e.representationCount-1;return E[r]=E[r]||{},E[r][t]=n,n},clearDataForStream:function(e){M&&M.clearForStream(e),w[e]&&delete w[e],j[e]&&delete j[e],A[e]&&delete A[e]},getThroughputHistory:function(){return F},getBitrateList:en,getQualityForBitrate:er,getTopBitrateInfoFor:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;if(t||(t=d.getActiveStreamInfo().id),e&&w&&w[t]&&w[t][e]){var r=$(e,t),n=en(w[t][e].getMediaInfo());return n[r]?n[r]:null}return null},getMinAllowedIndexFor:J,getMaxAllowedIndexFor:$,getInitialBitrateFor:function(e,t){if(function(){if(!L||!L.hasOwnProperty("getSavedBitrateSettings"))throw Error(i.default.MISSING_CONFIG_ERROR)}(),e===i.default.TEXT)return NaN;var r=L.getSavedBitrateSettings(e),n=D.getAbrBitrateParameter("initialBitrate",e),o=V.get().streaming.abr.initialRepresentationRatio[e];if(-1===n){if(o>-1){var u=w[t][e].getStreamInfo(),l=P.getAdaptationForType(u.index,e,u).Representation_asArray;n=Array.isArray(l)?l[Math.max(Math.round(l.length*o)-1,0)].bandwidth/1e3:0}else n=isNaN(r)?e===i.default.VIDEO?1e3:100:r}return n},getQualityFor:Z,getAbandonmentStateFor:function(e,t){return A[e]&&A[e][t]?A[e][t].state:null},setPlaybackQuality:ee,checkPlaybackQuality:function(t,n){try{if(!(t&&w&&w[n]&&w[n][t]))return!1;if(M){var i=k.getPlaybackQuality();i&&M.push(n,x,i)}if(!V.get().streaming.abr.autoSwitchBitrate[t])return!1;var u=Z(t,n),l=Object(h.default)(G).create({abrController:e,switchHistory:j[n][t],droppedFramesHistory:M,streamProcessor:w[n][t],currentValue:u,useBufferOccupancyABR:B[t],useL2AABR:U[t],useLoLPABR:q[t],videoModel:k}),c=J(t,n),f=$(t,n),d=r.getMaxQuality(l),m=d.quality;return void 0!==c&&(m>p.default.NO_CHANGE?m:u)<c&&(m=c),m>f&&(m=f),j[n][t].push({oldValue:u,newValue:m}),m>p.default.NO_CHANGE&&m!==u&&(A[n][t].state===o.default.ALLOW_LOAD||m<u)&&(et(t,u,m,f,d.reason,n),!0)}catch(e){return!1}},setElementSize:ei,setWindowResizeEventCalled:function(e){I=e},registerStreamType:function(e,t){var r,n=t.getStreamInfo().id;w[n]||(w[n]={}),j[n]||(j[n]={}),A[n]||(A[n]={}),j[n][e]=Object(m.default)(G).create(),w[n][e]=t,A[n][e]={},A[n][e].state=o.default.ALLOW_LOAD,(r=V.get().streaming.abr.ABRStrategy)===i.default.ABR_STRATEGY_L2A?(B[e]=!1,q[e]=!1,U[e]=!0):r===i.default.ABR_STRATEGY_LoLP?(B[e]=!1,q[e]=!0,U[e]=!1):r===i.default.ABR_STRATEGY_BOLA?(B[e]=!0,q[e]=!1,U[e]=!1):r===i.default.ABR_STRATEGY_THROUGHPUT?(B[e]=!1,q[e]=!1,U[e]=!1):r===i.default.ABR_STRATEGY_DYNAMIC&&(B[e]=!(!B||!B[e])&&B[e],q[e]=!1,U[e]=!1),e===i.default.VIDEO&&ei()},unRegisterStreamType:function(e,t){try{w[e]&&w[e][t]&&delete w[e][t],j[e]&&j[e][t]&&delete j[e][t],A[e]&&A[e][t]&&delete A[e][t]}catch(e){}},setConfig:function(e){e&&(e.streamController&&(d=e.streamController),e.domStorage&&(L=e.domStorage),e.mediaPlayerModel&&(D=e.mediaPlayerModel),e.customParametersModel&&(N=e.customParametersModel),e.dashMetrics&&(H=e.dashMetrics),e.adapter&&(P=e.adapter),e.videoModel&&(k=e.videoModel),e.settings&&(V=e.settings))},reset:function(){K(),z.off(f.default.LOADING_PROGRESS,W,e),z.off(T.default.QUALITY_CHANGE_RENDERED,X,e),z.off(T.default.METRIC_ADDED,Q,e),r&&r.reset()}},t=Y.getLogger(e),K(),e}E.__dashjs_factory_name="AbrController";var S=d.default.getSingletonFactory(E);S.QUALITY_DEFAULT=0,d.default.updateSingletonFactory(E.__dashjs_factory_name,S),t.default=S},"./src/streaming/controllers/BaseURLController.js":function(e,t,r){r.r(t);var n=r("./src/streaming/models/BaseURLTreeModel.js"),i=r("./src/streaming/utils/BaseURLSelector.js"),o=r("./src/streaming/utils/URLUtils.js"),u=r("./src/dash/vo/BaseURL.js"),l=r("./src/core/FactoryMaker.js"),c=r("./src/core/EventBus.js"),f=r("./src/core/events/Events.js");function d(){var e,t,r,l,d=this.context,h=Object(c.default)(d).getInstance(),p=Object(o.default)(d).getInstance();return e={reset:function(){r.reset(),l.reset()},initialize:function(e){r.setConfig({adapter:t}),r.update(e),l.chooseSelector(t.getIsDVB(e))},resolve:function(e){var t=r.getForPath(e).reduce(function(e,t){var r=l.select(t);return r?(p.isRelative(r.url)?e.url=p.resolve(r.url,e.url):(e.url=r.url,e.serviceLocation=r.serviceLocation),e.availabilityTimeOffset=r.availabilityTimeOffset,e.availabilityTimeComplete=r.availabilityTimeComplete,e):new u.default},new u.default);if(!p.isRelative(t.url))return t},setConfig:function(e){e.baseURLTreeModel&&(r=e.baseURLTreeModel),e.baseURLSelector&&(l=e.baseURLSelector),e.adapter&&(t=e.adapter)}},r=Object(n.default)(d).create(),l=Object(i.default)(d).create(),h.on(f.default.SERVICE_LOCATION_BLACKLIST_CHANGED,function(e){r.invalidateSelectedIndexes(e.entry)},e),e}d.__dashjs_factory_name="BaseURLController",t.default=l.default.getClassFactory(d)},"./src/streaming/controllers/BlacklistController.js":function(e,t,r){r.r(t);var n=r("./src/core/FactoryMaker.js"),i=r("./src/core/EventBus.js");function o(e){e=e||{};var t,r=[],n=Object(i.default)(this.context).getInstance(),o=e.updateEventName,u=e.addBlacklistEventName;function l(e){-1===r.indexOf(e)&&(r.push(e),n.trigger(o,{entry:e}))}return t={add:l,contains:function(e){return!!(r.length&&e&&e.length)&&-1!==r.indexOf(e)},reset:function(){r=[]}},u&&n.on(u,function(e){l(e.entry)},t),t}o.__dashjs_factory_name="BlackListController",t.default=n.default.getClassFactory(o)},"./src/streaming/controllers/BufferController.js":function(e,t,r){r.r(t);var n=r("./src/streaming/constants/Constants.js"),i=r("./src/streaming/constants/MetricsConstants.js"),o=r("./src/streaming/models/FragmentModel.js"),u=r("./src/streaming/SourceBufferSink.js"),l=r("./src/core/EventBus.js"),c=r("./src/core/events/Events.js"),f=r("./src/core/FactoryMaker.js"),d=r("./src/core/Debug.js"),h=r("./src/streaming/utils/InitCache.js"),p=r("./src/streaming/vo/DashJSError.js"),m=r("./src/core/errors/Errors.js"),g=r("./src/streaming/vo/metrics/HTTPRequest.js"),y=r("./src/streaming/MediaPlayerEvents.js"),v="BufferController";function b(e){e=e||{};var t,r,f,b,_,T,E,S,w,A,C,I,O,R,P,k,D,N,L=this.context,x=Object(l.default)(L).getInstance(),j=e.errHandler,M=e.fragmentModel,F=e.representationController,B=e.adapter,U=e.textController,q=e.abrController,H=e.playbackController,V=e.streamInfo,G=e.type,Y=e.settings;function z(e){return B.convertRepresentationToRepresentationInfo(F.getRepresentationForQuality(e))}function K(e){Y.get().streaming.cacheInitSegments&&(r.info("Init fragment finished loading saving to",G+"'s init cache"),P.save(e.chunk)),r.debug("Append Init fragment",G," with representationId:",e.chunk.representationId," and quality:",e.chunk.quality,", data size:",e.chunk.bytes.byteLength),X(e.chunk)}function W(e){X(e.chunk,e.request)}function X(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;w.append(e,t).then(function(e){$(e)}).catch(function(e){$(e)}),e.mediaInfo.type===n.default.VIDEO&&eT(c.default.VIDEO_CHUNK_RECEIVED,{chunk:e})}function Q(e){if(e&&e.length>0)for(var t=0,n=e.length;t<n;t++)r.debug("Buffered range: "+e.start(t)+" - "+e.end(t)+", currentTime = ",H.getTime())}function $(e){if(e.error)return 22===e.error.code&&function(){if(R=!0,_=.8*ev(),r.warn("Quota exceeded, Critical Buffer: "+_),_>0){var e=Math.max(.2*_,1),t=_-e,n=Math.min(Y.get().streaming.buffer.bufferTimeAtTopQuality,.9*t),i=Math.min(Y.get().streaming.buffer.bufferTimeAtTopQualityLongForm,.9*t),o={streaming:{buffer:{bufferToKeep:parseFloat(e.toFixed(5)),bufferTimeAtTopQuality:parseFloat(n.toFixed(5)),bufferTimeAtTopQualityLongForm:parseFloat(i.toFixed(5))}}};Y.update(o)}}(),void(22!==e.error.code&&e_()||(r.warn("Clearing playback buffer to overcome quota exceed situation"),eT(c.default.QUOTA_EXCEEDED,{criticalBufferLevel:_,quotaExceededTime:e.chunk.start}),ec(el())));if(w&&(ei(),R=!1,(C=e.chunk)&&C.endFragment)){C&&!isNaN(C.index)&&(E=Math.max(C.index,E),eo());var t=w.getAllBufferRanges();C.segmentType===g.HTTPRequest.MEDIA_SEGMENT_TYPE&&(Q(t),ee(),function(){if(!isNaN(N)){if(G===n.default.AUDIO||G===n.default.VIDEO){var e=H.getTime(),t=en(e,0),r=en(N,0);if(t&&r&&t.start===r.start)N=NaN;else{var i=F.getCurrentRepresentation().segmentDuration,o=en(N,i);o&&(Y.get().streaming.buffer.enableSeekDecorrelationFix&&Math.abs(e-N)>i?N<=o.end&&H.seek(Math.max(N,o.start),!1,!0):e<o.start&&H.seek(o.start,!1,!0))}}else N=NaN}}()),C&&eT(c.default.BYTES_APPENDED_END_FRAGMENT,{quality:C.quality,startTime:C.start,index:C.index,bufferedRanges:t,segmentType:C.segmentType,mediaType:G})}}function J(){return new Promise(function(e,t){var r=Z();if(!r||0===r.length)return ee(),void e();ec(r).then(function(){e()}).catch(function(e){t(e)})})}function Z(e){var t=[],n=w.getAllBufferRanges();if(!n||0===n.length)return t;if(!e&&0!==e||isNaN(e))t.push({start:n.start(0),end:n.end(n.length-1)+.5});else{var i=function(e,t){var r=Y.get().streaming.buffer.bufferToKeep,n=t.start(0);if(e-n>r){var i=Math.max(0,e-r),u=M.getRequests({state:o.default.FRAGMENT_MODEL_EXECUTED,time:e,threshold:.01})[0];if(u&&(i=Math.min(u.startTime,i)),i>0)return{start:n,end:i}}return null}(e,n),u=function(e,t){var n=t.end(t.length-1)+.5,i=eb(e),u=V.manifestInfo.duration>=Y.get().streaming.buffer.longFormContentDurationThreshold?Y.get().streaming.buffer.bufferTimeAtTopQualityLongForm:Y.get().streaming.buffer.bufferTimeAtTopQuality,l=isNaN(i)?e:Math.min(i,e+u);if(l>=t.end(t.length-1))return null;var c=M.getRequests({state:o.default.FRAGMENT_MODEL_EXECUTED,time:e,threshold:.01})[0];if(c&&(l=Math.max(c.startTime+c.duration,l)),Y.get().streaming.buffer.avoidCurrentTimeRangePruning){for(var f=0;f<t.length;f++)if(t.start(f)<=e&&e<=t.end(f)&&t.start(f)<=l&&l<=t.end(f)){var d=l;l=f+1<t.length?t.start(f+1):t.end(f)+1,r.debug("Buffered range ["+t.start(f)+", "+t.end(f)+"] overlaps with targetTime "+e+" and range to be pruned ["+d+", "+n+"], using ["+l+", "+n+"] instead"+(l<n?"":" (no actual pruning)"));break}}return l<t.end(t.length-1)?{start:l,end:n}:null}(e,n);i&&t.push(i),u&&t.push(u)}return t}function ee(){(!D||G===n.default.TEXT&&U.isTextEnabled())&&ei()}function et(){ea()}function er(){ea(),N=NaN}function en(e,t){var r,n,i=w.getAllBufferRanges(),o=0,u=0,l=null,c=null,f=0,d=isNaN(t)?.15:t;if(null!=i){for(n=0,r=i.length;n<r;n++)if(o=i.start(n),u=i.end(n),null===l)f=Math.abs(o-e),(e>=o&&e<u||f<=d)&&(l=o,c=u);else{if(!((f=o-c)<=d))break;c=u}if(null!==l)return{start:l,end:c}}return null}function ei(){if(H){var e,t,r,n=Y.get().streaming.gaps.jumpGaps&&!isNaN(Y.get().streaming.gaps.smallGapLimit)?Y.get().streaming.gaps.smallGapLimit:NaN;b=Math.max((e=H.getTime()||0,t=n,Y.get().streaming.gaps.jumpGaps&&(t=Y.get().streaming.gaps.smallGapLimit),null===(r=en(e,t))?0:r.end-e),0),eT(c.default.BUFFER_LEVEL_UPDATED,{mediaType:G,bufferLevel:b}),ea()}}function eo(){var e=E>=S-1,t=H.getTimeToStreamEnd(V)-b<1e-5;(e||t)&&!f&&(ey(!0),r.debug("checkIfBufferingCompleted trigger BUFFERING_COMPLETED for stream id ".concat(V.id," and type ").concat(G)))}function ea(){G!==n.default.AUDIO&&G!==n.default.VIDEO||((H.getLowLatencyModeEnabled()||!(b<Y.get().streaming.buffer.stallThreshold))&&0!==b||f?(f||b>=Y.get().streaming.buffer.stallThreshold||H.getLowLatencyModeEnabled()&&b>0)&&es(i.default.BUFFER_LOADED):es(i.default.BUFFER_EMPTY))}function es(e){A!==e&&(e!==i.default.BUFFER_EMPTY||0!==H.getTime())&&(G!==n.default.TEXT||U.isTextEnabled())&&(A=e,eT(c.default.BUFFER_LEVEL_STATE_CHANGED,{state:e}),eT(e===i.default.BUFFER_LOADED?c.default.BUFFER_LOADED:c.default.BUFFER_EMPTY),r.debug(e===i.default.BUFFER_LOADED?"Got enough buffer to start":"Waiting for more buffer before starting playback"))}function eu(){w&&G!==n.default.TEXT&&(f||ec(el()))}function el(){var e=[],t=w.getAllBufferRanges();if(!t||0===t.length)return e;var r=H.getTime(),n=Math.max(0,r-Y.get().streaming.buffer.bufferToKeep),i=M.getRequests({state:o.default.FRAGMENT_MODEL_EXECUTED,time:r,threshold:.01})[0];if(i)n=Math.min(i.startTime,n);else if(0===r&&H.getIsDynamic())return[];if(t.start(0)<=n){for(var u={start:0,end:n},l=0;l<t.length&&t.end(l)<=n;l++)u.end=t.end(l);u.start<u.end&&e.push(u)}return e}function ec(e){return new Promise(function(t,r){if(e&&w&&0!==e.length){var n=[];e.forEach(function(e){n.push(new Promise(function(t,r){e.resolve=t,e.reject=r,k.push(e)}))}),O||ef(),Promise.all(n).then(function(){t()}).catch(function(e){r(e)})}else t()})}function ef(){try{if(0===k.length||!w)return r.debug("Nothing to prune, halt pruning"),k=[],void(O=!1);var e=w.getBuffer();if(!e||!e.buffered||0===e.buffered.length)return r.debug("SourceBuffer is empty (or does not exist), halt pruning"),k=[],void(O=!1);var t=k.shift();r.debug("".concat(G,": Removing buffer from: ").concat(t.start," to ").concat(t.end)),O=!0,H.getTime()<t.end&&ey(!1),w.remove(t).then(function(e){ed(e)}).catch(function(e){ed(e)})}catch(e){O=!1}}function ed(e){r.debug("onRemoved buffer from:",e.from,"to",e.to),Q(w.getAllBufferRanges()),0===k.length&&(O=!1,ei()),e.unintended&&(r.warn("Detected unintended removal from:",e.from,"to",e.to,"setting streamprocessor time to",e.from),eT(c.default.SEEK_TARGET,{time:e.from})),O?ef():(D?D=!1:ei(),eT(c.default.BUFFER_CLEARED,{from:e.from,to:e.to,unintended:e.unintended,hasEnoughSpaceToAppend:e_(),quotaExceeded:R}))}function eh(e){return new Promise(function(t){e&&void 0!==e.MSETimeOffset&&w&&w.updateTimestampOffset?w.updateTimestampOffset(e.MSETimeOffset).then(function(){t()}).catch(function(){t()}):t()})}function ep(){return w&&!f?w.updateAppendWindow(V):Promise.resolve()}function em(){++I*(Y.get().streaming.wallclockTimeUpdateInterval/1e3)>=Y.get().streaming.buffer.bufferPruningInterval&&(I=0,eu())}function eg(){ea()}function ey(e){f!==e&&((f=e)?eT(c.default.BUFFERING_COMPLETED):S=Number.POSITIVE_INFINITY)}function ev(){try{var e,t,r=w.getAllBufferRanges(),n=0;if(!r)return n;for(t=0,e=r.length;t<e;t++)n+=r.end(t)-r.start(t);return n}catch(e){return 0}}function eb(e){try{var t=e,r=w.getAllBufferRanges();if(!r||0===r.length)return NaN;for(var n=0;t===e&&n<r.length;){var i=r.start(n),o=r.end(n);t>=i&&t<=o&&(t=o),n+=1}return t===e?NaN:t}catch(e){}}function e_(){var e=ev();return isNaN(e)||e<_}function eT(e,t){var r=t||{};x.trigger(e,r,{streamId:V.id,mediaType:G})}function eE(e,t){if(_=Number.POSITIVE_INFINITY,A=void 0,S=Number.POSITIVE_INFINITY,E=0,C=null,f=!1,O=!1,R=!1,b=0,I=0,k=[],N=NaN,w){var r=w;w=null,e||t||r.abort().then(function(){r.reset(t),r=null})}D=!1}return t={initialize:function(e){T=e,x.on(c.default.INIT_FRAGMENT_LOADED,K,t),x.on(c.default.MEDIA_FRAGMENT_LOADED,W,t),x.on(c.default.WALLCLOCK_TIME_UPDATED,em,t),x.on(y.default.PLAYBACK_PLAYING,er,t),x.on(y.default.PLAYBACK_PROGRESS,ee,t),x.on(y.default.PLAYBACK_TIME_UPDATED,ee,t),x.on(y.default.PLAYBACK_RATE_CHANGED,eg,t),x.on(y.default.PLAYBACK_STALLED,et,t)},getStreamId:function(){return V.id},getType:function(){return G},getBufferControllerType:function(){return v},createBufferSink:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];return new Promise(function(i,o){if(P&&e&&T){var l,c=q.getQualityFor(G,V.id);w=Object(u.default)(L).create({mediaSource:T,textController:U,eventBus:x}),(l=z(c),t&&t[G]&&(G===n.default.VIDEO||G===n.default.AUDIO)?w.initializeForStreamSwitch(e,l,t[G]):w.initializeForFirstUse(V,e,l)).then(function(){return eh(z(c))}).then(function(){i(w)}).catch(function(e){r.fatal("Caught error on create SourceBuffer: "+e),j.error(new p.default(m.default.MEDIASOURCE_TYPE_UNSUPPORTED_CODE,m.default.MEDIASOURCE_TYPE_UNSUPPORTED_MESSAGE+G)),o(e)})}else i(null)})},getBuffer:function(){return w},getBufferLevel:function(){return b},getRangeAt:en,hasBufferAtTime:function(e){try{var t=w.getAllBufferRanges();if(!t||0===t.length)return!1;for(var n=0;n<t.length;){var i=t.start(n),o=t.end(n);if(e>=i&&e<=o)return!0;n+=1}return!1}catch(e){return r.error(e),!1}},pruneBuffer:eu,setMediaSource:function(e){T=e},getMediaSource:function(){return T},appendInitSegmentFromCache:function(e){var t=P.extract(V.id,e);return!!t&&(r.info("Append Init fragment",G," with representationId:",t.representationId," and quality:",t.quality,", data size:",t.bytes.byteLength),X(t),!0)},getIsBufferingCompleted:function(){return f},setIsBufferingCompleted:ey,getIsPruningInProgress:function(){return O},reset:function(e,t){x.off(c.default.INIT_FRAGMENT_LOADED,K,this),x.off(c.default.MEDIA_FRAGMENT_LOADED,W,this),x.off(c.default.WALLCLOCK_TIME_UPDATED,em,this),x.off(y.default.PLAYBACK_PLAYING,er,this),x.off(y.default.PLAYBACK_PROGRESS,ee,this),x.off(y.default.PLAYBACK_TIME_UPDATED,ee,this),x.off(y.default.PLAYBACK_RATE_CHANGED,eg,this),x.off(y.default.PLAYBACK_STALLED,et,this),eE(e,t)},prepareForPlaybackSeek:function(){return f&&ey(!1),w.abort()},prepareForReplacementTrackSwitch:function(e){return new Promise(function(t,r){w.abort().then(function(){return ep()}).then(function(){return Y.get().streaming.buffer.useChangeTypeForTrackSwitch?w.changeType(e):Promise.resolve()}).then(function(){return J()}).then(function(){ey(!1),t()}).catch(function(e){r(e)})})},prepareForNonReplacementTrackSwitch:function(e){return new Promise(function(t,r){ep().then(function(){return Y.get().streaming.buffer.useChangeTypeForTrackSwitch?w.changeType(e):Promise.resolve()}).then(function(){t()}).catch(function(e){r(e)})})},prepareForReplacementQualitySwitch:function(){return new Promise(function(e,t){w.abort().then(function(){return ep()}).then(function(){return J()}).then(function(){ey(!1),e()}).catch(function(e){t(e)})})},updateAppendWindow:ep,getAllRangesWithSafetyFactor:Z,getContinuousBufferTimeForTargetTime:eb,clearBuffers:ec,pruneAllSafely:J,updateBufferTimestampOffset:eh,setSeekTarget:function(e){N=e},segmentRequestingCompleted:function(e){isNaN(e)||(S=e,eo())}},r=Object(d.default)(L).getInstance().getLogger(t),P=Object(h.default)(L).getInstance(),eE(),t}b.__dashjs_factory_name=v,t.default=f.default.getClassFactory(b)},"./src/streaming/controllers/CatchupController.js":function(e,t,r){r.r(t);var n=r("./src/core/FactoryMaker.js"),i=r("./src/core/Debug.js"),o=r("./src/core/EventBus.js"),u=r("./src/streaming/constants/Constants.js"),l=r("./src/streaming/MediaPlayerEvents.js"),c=r("./src/core/events/Events.js"),f=r("./src/streaming/constants/MetricsConstants.js"),d=r("./src/core/Utils.js");function h(){var e,t,r,n,h,p,m,g,y,v,b=this.context,_=Object(o.default)(b).getInstance();function T(){t=!1;var e=d.default.parseUserAgent();r=e&&e.browser&&e.browser.name&&"safari"===e.browser.name.toLowerCase()}function E(){t=!1}function S(e){if(e.streamId===p.getActiveStreamInfo().id&&y){var t=m.getLiveDelay();m.getBufferLevel()>t/2&&(y=!1)}}function w(e){e.streamId===p.getActiveStreamInfo().id&&(y=e.state===f.default.BUFFER_EMPTY)}function A(){g.getCatchupModeEnabled()||n.setPlaybackRate(1)}function C(){m.getIsDynamic()&&g.getCatchupModeEnabled()&&(g.getCatchupPlaybackRates().max>0||g.getCatchupPlaybackRates().min<0)&&!m.isPaused()&&!m.isSeeking()&&function(){try{return!(!m.getTime()>0||t)&&(O()===u.default.LIVE_CATCHUP_MODE_LOLP?function(e,t){try{return Math.abs(I())>0||e<t}catch(e){return!1}}(m.getBufferLevel(),h.get().streaming.liveCatchup.playbackBufferMin):function(){try{return Math.abs(I())>0}catch(e){return!1}}())}catch(e){return!1}}()&&function(){if(!t&&n){var e,i=n.getPlaybackRate(),o=g.getCatchupPlaybackRates(),l=m.getBufferLevel(),c=I(),f=g.getCatchupMaxDrift();if(!isNaN(f)&&f>0&&c>f)v.info("[CatchupController]: Low Latency catchup mechanism. Latency too high, doing a seek to live point"),t=!0,m.seekToCurrentLive(!0,!1);else{var d=m.getCurrentLiveLatency(),p=m.getLiveDelay();e=O()===u.default.LIVE_CATCHUP_MODE_LOLP?function(e,t,r,n,i){var o;if(i<n){var u=Math.abs(e.min);o=1-u+2*u/(1+Math.pow(Math.E,-(5*(i-n)))),v.debug("[LoL+ playback control_buffer-based] bufferLevel: "+i+", newRate: "+o)}else{var l=e.max;o=Math.abs(t-r)<=.02*r?1:1-l+2*l/(1+Math.pow(Math.E,-(5*(t-r)))),v.debug("[LoL+ playback control_latency-based] latency: "+t+", newRate: "+o)}return o}(o,d,p,h.get().streaming.liveCatchup.playbackBufferMin,l):function(e,t,r,n){if(y)return 1;var i=t-r,o=i<0?Math.abs(e.min):e.max,u=1-o+2*o/(1+Math.pow(Math.E,-(5*i)));return m.getPlaybackStalled()&&n<=r/2&&i>0&&(u=1),u}(o,d,p,l);var b=r?.25:.02/(.5/o.max);e&&Math.abs(i-e)>=b&&(v.debug("[CatchupController]: Setting playback rate to ".concat(e)),n.setPlaybackRate(e))}}}()}function I(){return m.getCurrentLiveLatency()-m.getLiveDelay()}function O(){var e=h.get().streaming.liveCatchup.playbackBufferMin;return h.get().streaming.liveCatchup.mode!==u.default.LIVE_CATCHUP_MODE_LOLP||null===e||isNaN(e)?u.default.LIVE_CATCHUP_MODE_DEFAULT:u.default.LIVE_CATCHUP_MODE_LOLP}function R(){g.getCatchupPlaybackRates(!0)}return e={reset:function(){_.off(l.default.BUFFER_LEVEL_UPDATED,S,e),_.off(l.default.BUFFER_LEVEL_STATE_CHANGED,w,e),_.off(l.default.PLAYBACK_PROGRESS,C,e),_.off(l.default.PLAYBACK_TIME_UPDATED,C,e),_.off(l.default.PLAYBACK_SEEKED,C,e),_.off(c.default.SETTING_UPDATED_CATCHUP_ENABLED,A,e),_.off(c.default.SETTING_UPDATED_PLAYBACK_RATE_MIN,R,e),_.off(c.default.SETTING_UPDATED_PLAYBACK_RATE_MAX,R,e),_.off(l.default.STREAM_INITIALIZED,R,e),T(),n.setPlaybackRate(1,!0)},setConfig:function(e){e&&(e.settings&&(h=e.settings),e.videoModel&&(n=e.videoModel),e.streamController&&(p=e.streamController),e.playbackController&&(m=e.playbackController),e.mediaPlayerModel&&(g=e.mediaPlayerModel))},initialize:function(){_.on(l.default.BUFFER_LEVEL_UPDATED,S,e),_.on(l.default.BUFFER_LEVEL_STATE_CHANGED,w,e),_.on(l.default.PLAYBACK_PROGRESS,C,e),_.on(l.default.PLAYBACK_TIME_UPDATED,C,e),_.on(l.default.PLAYBACK_SEEKED,E,e),_.on(c.default.SETTING_UPDATED_CATCHUP_ENABLED,A,e),_.on(c.default.SETTING_UPDATED_PLAYBACK_RATE_MIN,R,e),_.on(c.default.SETTING_UPDATED_PLAYBACK_RATE_MAX,R,e),_.on(l.default.STREAM_INITIALIZED,R,e),R()}},v=Object(i.default)(b).getInstance().getLogger(e),T(),e}h.__dashjs_factory_name="CatchupController",t.default=n.default.getSingletonFactory(h)},"./src/streaming/controllers/EventController.js":function(e,t,r){r.r(t);var n=r("./src/core/FactoryMaker.js"),i=r("./src/core/Debug.js"),o=r("./src/core/EventBus.js"),u=r("./src/streaming/MediaPlayerEvents.js"),l=r("./src/streaming/net/XHRLoader.js");function c(){var e,t,r,n,c,f,d,h,p,m,g,y="urn:mpeg:dash:event:2012",v="updated",b="added",_=this.context,T=Object(o.default)(_).getInstance();function E(){if(!d||!h)throw Error("setConfig function has to be called previously")}function S(){g=!1,r={},n={},c=null,m=!1,f=Date.now()/1e3}function w(){try{if(!m){m=!0;var e=h.getTime(),i=e-f;i=f>0?Math.max(0,i):0,A(n,i,e),A(r,i,e),C(n),C(r),f=e,m=!1}}catch(e){m=!1,t.error(e)}}function A(e,r,n){try{R(e,function(i){if(void 0!==i){var o=isNaN(i.duration)?0:i.duration;i.calculatedPresentationTime<=n&&i.calculatedPresentationTime+r+o>=n?k(i,u.default.EVENT_MODE_ON_START):(P(n,o+r,i.calculatedPresentationTime)||function(e){try{var r=e.eventStream.period.start+e.eventStream.period.duration;return e.calculatedPresentationTime>r}catch(e){return t.error(e),!1}}(i))&&(t.debug("Removing event ".concat(i.id," from period ").concat(i.eventStream.period.id," as it is expired or invalid")),function(e,r){try{var n=r.eventStream.schemeIdUri,i=r.eventStream.period.id,o=r.eventStream.value,u=r.id;e[i][n]=e[i][n].filter(function(e){return o&&e.eventStream.value&&e.eventStream.value!==o||e.id!==u}),0===e[i][n].length&&delete e[i][n]}catch(e){t.error(e)}}(e,i))}})}catch(e){t.error(e)}}function C(e){try{for(var r in e)e.hasOwnProperty(r)&&0===Object.keys(e[r]).length&&delete e[r]}catch(e){t.error(e)}}function I(e,t){var r=arguments.length>2&&void 0!==arguments[2]&&arguments[2],n=e.eventStream.schemeIdUri,i=e.eventStream.value,o=e.id,u="discarded";t[n]||(t[n]=[]);var l=t[n].findIndex(function(e){return(!i||e.eventStream.value&&e.eventStream.value===i)&&e.id===o});if(-1===l)t[n].push(e),e.triggeredReceivedEvent=!1,e.triggeredStartEvent=!1,u=b;else if(r){var c=t[n][l];e.triggeredReceivedEvent=c.triggeredReceivedEvent,e.triggeredStartEvent=c.triggeredStartEvent,t[n][l]=e,u=v}return u}function O(e){try{var r=h.getTime();R(e,function(e){var t=e.eventStream&&e.eventStream.period&&!isNaN(e.eventStream.period.duration)?e.eventStream.period.duration:NaN,n=e.eventStream&&e.eventStream.period&&!isNaN(e.eventStream.period.start)?e.eventStream.period.start:NaN;if(!isNaN(t)&&!isNaN(n)){var i=e.calculatedPresentationTime;300>Math.abs(i-r)&&k(e,u.default.EVENT_MODE_ON_START)}})}catch(e){t.error(e)}}function R(e,r){try{if(e)for(var n=Object.keys(e),i=0;i<n.length;i++)for(var o=e[n[i]],u=Object.keys(o),l=0;l<u.length;l++)o[u[l]].forEach(function(e){void 0!==e&&r(e)})}catch(e){t.error(e)}}function P(e,r,n){try{return e-r>n}catch(e){return t.error(e),!1}}function k(e,r){try{var n=h.getTime(),i=e.id;if(r===u.default.EVENT_MODE_ON_RECEIVE&&!e.triggeredReceivedEvent)return t.debug("Received event ".concat(i)),e.triggeredReceivedEvent=!0,void T.trigger(e.eventStream.schemeIdUri,{event:e},{mode:r});e.triggeredStartEvent||(e.eventStream.schemeIdUri===y&&1==e.eventStream.value?0===e.duration&&0===e.presentationTimeDelta||(t.debug("Starting manifest refresh event ".concat(i," at ").concat(n)),function(){try{E(),d.refreshManifest()}catch(e){t.error(e)}}()):"urn:mpeg:dash:event:callback:2015"===e.eventStream.schemeIdUri&&1==e.eventStream.value?(t.debug("Starting callback event ".concat(i," at ").concat(n)),function(e){try{Object(l.default)(_).create({}).load({method:"get",url:e,request:{responseType:"arraybuffer"}})}catch(e){t.error(e)}}(e.messageData)):(t.debug("Starting event ".concat(i," from period ").concat(e.eventStream.period.id," at ").concat(n)),T.trigger(e.eventStream.schemeIdUri,{event:e},{mode:r})),e.triggeredStartEvent=!0)}catch(e){t.error(e)}}return e={addInlineEvents:function(e,n){try{if(E(),r[n]||(r[n]={}),e)for(var i=0;i<e.length;i++){var o=e[i];if(!P(h.getTime(),isNaN(o.duration)?0:o.duration,o.calculatedPresentationTime)){var l=I(o,r[n],!0);l===b?(t.debug("Added inline event with id ".concat(o.id," from period ").concat(n)),k(o,u.default.EVENT_MODE_ON_RECEIVE)):l===v&&t.debug("Updated inline event with id ".concat(o.id," from period ").concat(n))}}}catch(e){throw e}},addInbandEvents:function(e,r){try{E(),n[r]||(n[r]={});for(var i=0;i<e.length;i++){var o=e[i];P(h.getTime(),isNaN(o.duration)?0:o.duration,o.calculatedPresentationTime)||(I(o,n[r],!1)===b?(o.eventStream.schemeIdUri===y&&function(e){try{if(1==e.eventStream.value){var r,n=e.calculatedPresentationTime;r=4294967295==e.calculatedPresentationTime?NaN:e.calculatedPresentationTime+e.duration,T.trigger(u.default.MANIFEST_VALIDITY_CHANGED,{id:e.id,validUntil:n,newDuration:r,newManifestValidAfter:NaN},{mode:u.default.EVENT_MODE_ON_START})}}catch(e){t.error(e)}}(o),t.debug("Added inband event with id ".concat(o.id," from period ").concat(r)),k(o,u.default.EVENT_MODE_ON_RECEIVE)):t.debug("Inband event with scheme_id_uri ".concat(o.eventStream.schemeIdUri,", value ").concat(o.eventStream.value,", period id ").concat(r," and event id ").concat(o.id," was ignored because it has been added before.")))}w()}catch(e){throw e}},getInbandEvents:function(){return n},getInlineEvents:function(){return r},start:function(){try{E(),t.debug("Start Event Controller");var e=p.get().streaming.eventControllerRefreshDelay;g||isNaN(e)||(g=!0,c=setInterval(w,e))}catch(e){throw e}},setConfig:function(e){try{if(!e)return;e.manifestUpdater&&(d=e.manifestUpdater),e.playbackController&&(h=e.playbackController),e.settings&&(p=e.settings)}catch(e){throw e}},reset:function(){(function(){try{null!==c&&g&&(clearInterval(c),c=null,g=!1,function(){try{O(n),O(r)}catch(e){t.error(e)}}())}catch(e){throw e}})(),S()}},t=Object(i.default)(_).getInstance().getLogger(e),S(),e}c.__dashjs_factory_name="EventController",t.default=n.default.getSingletonFactory(c)},"./src/streaming/controllers/FragmentController.js":function(e,t,r){r.r(t);var n=r("./src/streaming/constants/Constants.js"),i=r("./src/streaming/vo/DataChunk.js"),o=r("./src/streaming/models/FragmentModel.js"),u=r("./src/streaming/FragmentLoader.js"),l=r("./src/streaming/utils/RequestModifier.js"),c=r("./src/core/EventBus.js"),f=r("./src/core/events/Events.js"),d=r("./src/streaming/MediaPlayerEvents.js"),h=r("./src/core/errors/Errors.js"),p=r("./src/core/FactoryMaker.js"),m=r("./src/core/Debug.js");function g(e){e=e||{};var t,r,p,g=this.context,y=Object(c.default)(g).getInstance(),v=e.errHandler,b=e.mediaPlayerModel,_=e.dashMetrics,T=Object(m.default)(g).getInstance(),E=e.streamInfo;function S(){return E.id}function w(){for(var e in p)p[e].reset();p={}}function A(e){if(e.sender){var t=e.request,o=e.response,u=t.isInitializationRequest(),l=t.mediaInfo.streamInfo;if(e.error&&(t.mediaType===n.default.AUDIO||t.mediaType===n.default.VIDEO||t.mediaType===n.default.TEXT&&t.mediaInfo.isFragmented)&&y.trigger(f.default.SERVICE_LOCATION_BLACKLIST_ADD,{entry:e.request.serviceLocation}),o&&l){var c,d,h,p=(c=E.id,d=e.type!==f.default.FRAGMENT_LOADING_PROGRESS,(h=new i.default).streamId=c,h.mediaInfo=t.mediaInfo,h.segmentType=t.type,h.start=t.startTime,h.duration=t.duration,h.end=h.start+h.duration,h.bytes=o,h.index=t.index,h.quality=t.quality,h.representationId=t.representationId,h.endFragment=d,h);y.trigger(u?f.default.INIT_FRAGMENT_LOADED:f.default.MEDIA_FRAGMENT_LOADED,{chunk:p,request:t},{streamId:l.id,mediaType:t.mediaType})}else r.warn("No "+t.mediaType+" bytes to push or stream is inactive.")}}return t={getStreamId:S,getModel:function(t){var r=p[t];return r||(r=Object(o.default)(g).create({streamInfo:E,type:t,dashMetrics:_,fragmentLoader:Object(u.default)(g).create({dashMetrics:_,mediaPlayerModel:b,errHandler:v,requestModifier:Object(l.default)(g).getInstance(),settings:e.settings,boxParser:e.boxParser,eventBus:y,events:f.default,errors:h.default,dashConstants:e.dashConstants,urlUtils:e.urlUtils,streamId:S()}),debug:T,eventBus:y,events:f.default}),p[t]=r),r},reset:function(){y.off(d.default.FRAGMENT_LOADING_COMPLETED,A,this),y.off(d.default.FRAGMENT_LOADING_PROGRESS,A,this),w()}},r=T.getLogger(t),w(),y.on(d.default.FRAGMENT_LOADING_COMPLETED,A,t),y.on(d.default.FRAGMENT_LOADING_PROGRESS,A,t),t}g.__dashjs_factory_name="FragmentController",t.default=p.default.getClassFactory(g)},"./src/streaming/controllers/GapController.js":function(e,t,r){r.r(t);var n=r("./src/core/FactoryMaker.js"),i=r("./src/core/Debug.js"),o=r("./src/core/events/Events.js"),u=r("./src/core/EventBus.js"),l=r("./src/streaming/constants/Constants.js");function c(){var e,t,r,n,c,f,d,h,p,m,g,y,v=this.context,b=Object(u.default)(v).getInstance();function _(){y.debug("Stopping the gap controller"),c&&(clearInterval(c),c=null),function(){b.off(o.default.WALLCLOCK_TIME_UPDATED,A,this),b.off(o.default.INITIAL_STREAM_SWITCH,w,this),b.off(o.default.PLAYBACK_SEEKING,T,this),b.off(o.default.BUFFER_REPLACEMENT_STARTED,E,e),b.off(o.default.TRACK_CHANGE_RENDERED,S,e)}(),c=null,f=NaN,n=0,m=null,g={}}function T(){m&&(clearTimeout(m),m=null)}function E(e){try{if(e.streamId!==h.getActiveStreamInfo().id||e.mediaType!==l.default.VIDEO&&e.mediaType!==l.default.AUDIO)return;e.streamId===h.getActiveStreamInfo().id&&(g[e.mediaType]=!0)}catch(e){y.error(e)}}function S(e){e&&e.mediaType&&(g[e.mediaType]=!1)}function w(){c||function(){try{c||(y.debug("Starting the gap controller"),c=setInterval(function(){C()&&I(d.getTime())},100))}catch(e){}}()}function A(){if(C(r.get().streaming.gaps.enableSeekFix)&&++n>=10){var e=d.getTime();t===e?I(e,!0):(t=e,f=NaN),n=0}}function C(){var e,t,n=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(!h.getActiveStream())return!1;var i=Object.keys(g).some(function(e){return g[e]}),o=!!n&&(t=parseFloat(((e=h.getActiveStream()).getStartTime()+e.getDuration()).toFixed(5)),d.getTime()+r.get().streaming.gaps.threshold>=t);return!i&&r.get().streaming.gaps.jumpGaps&&h.getActiveStreamProcessors().length>0&&(!d.isSeeking()||o)&&!d.isPaused()&&!h.getIsStreamSwitchInProgress()&&!h.getHasMediaOrInitialisationError()}function I(e){var t,n=arguments.length>1&&void 0!==arguments[1]&&arguments[1],i=r.get().streaming.gaps.enableStallFix,o=r.get().streaming.gaps.stallSeek,u=r.get().streaming.gaps.smallGapLimit,l=r.get().streaming.gaps.jumpLargeGaps,c=p.getBufferRange(),g=NaN,v=!1;if(!isNaN(t=function(e,t){try{if(!e||e.length<=1&&t>0)return NaN;for(var n=NaN,i=0;isNaN(n)&&i<e.length;){var o=i>0?e.end(i-1):0;t<e.start(i)&&o-t<r.get().streaming.gaps.threshold&&(n=i),i+=1}return n}catch(e){return null}}(c,e))){var b=c.start(t),_=b-e;_>0&&(_<=u||l)&&(g=b)}var T=d.getTimeToStreamEnd();if(isNaN(g)&&n&&isFinite(T)&&!isNaN(T)&&T<u&&(g=parseFloat(d.getStreamEndTime().toFixed(5)),v=!0),i&&isNaN(g)&&n&&isNaN(t)&&function(e,t){for(var r=0,n=e.length;r<n;r++)if(t>=e.start(r)&&t<=e.end(r))return!0;return!1}(c,e)&&(0===o?(y.warn("Toggle play pause to break stall"),p.pause(),p.play()):(y.warn("Jumping ".concat(o,"s to break stall")),g=e+o)),g>0&&f!==g&&g>e&&!m){var E=g-e;if(v){var S=h.getStreamForTime(g),w=S&&!!S.getPreloaded();y.warn("Jumping to end of stream because of gap from ".concat(e," to ").concat(g,". Gap duration: ").concat(E)),d.seek(g,!0,w)}else{var A=d.getIsDynamic(),C=t>0?c.end(t-1):e,I=A?1e3*Math.max(0,E-.1):0;m=window.setTimeout(function(){d.seek(g,!0,!0),y.warn("Jumping gap occuring in period ".concat(h.getActiveStream().getStreamId()," starting at ").concat(C," and ending at ").concat(g,". Jumping by: ").concat(g-C)),m=null},I)}f=g}}return e={reset:_,setConfig:function(e){e&&(e.settings&&(r=e.settings),e.playbackController&&(d=e.playbackController),e.streamController&&(h=e.streamController),e.videoModel&&(p=e.videoModel))},initialize:function(){!function(){b.on(o.default.WALLCLOCK_TIME_UPDATED,A,this),b.on(o.default.INITIAL_STREAM_SWITCH,w,this),b.on(o.default.PLAYBACK_SEEKING,T,this),b.on(o.default.BUFFER_REPLACEMENT_STARTED,E,e),b.on(o.default.TRACK_CHANGE_RENDERED,S,e)}()}},y=Object(i.default)(v).getInstance().getLogger(e),_(),e}c.__dashjs_factory_name="GapController",t.default=n.default.getSingletonFactory(c)},"./src/streaming/controllers/MediaController.js":function(e,t,r){r.r(t);var n=r("./src/streaming/constants/Constants.js"),i=r("./src/core/events/Events.js"),o=r("./src/core/EventBus.js"),u=r("./src/core/FactoryMaker.js"),l=r("./src/core/Debug.js"),c=r("./node_modules/bcp-47-normalize/index.js"),f=r.n(c),d=r("./node_modules/bcp-47-match/index.js");function h(){var e,t,r,u,c,h,p,m,g=this.context,y=Object(o.default)(g).getInstance();function v(e,t){return e&&r[t]&&r[t][e]?r[t][e].list:[]}function b(e,t){return e&&r[t]&&r[t][e]?r[t][e].current:null}function _(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(e&&e.streamInfo){var o=e.type,l=e.streamInfo.id,c=b(o,l);if(r[l]&&r[l][o]&&(r[l][o].current=e,r[l][o].current&&(o!==n.default.TEXT&&!S(e,c)||o===n.default.TEXT&&e.isFragmented)&&y.trigger(i.default.CURRENT_TRACK_CHANGED,{oldMediaInfo:c,newMediaInfo:e,switchMode:u.get().streaming.trackSwitchMode[o]},{streamId:l}),!t)){var f,d=(f={lang:e.lang,viewpoint:e.viewpoint,roles:e.roles,accessibility:e.accessibility,audioChannelConfiguration:e.audioChannelConfiguration}).lang||f.viewpoint||f.role&&f.role.length>0||f.accessibility&&f.accessibility.length>0||f.audioChannelConfiguration&&f.audioChannelConfiguration.length>0?f:null;if(!d||!r[l][o].storeLastSettings)return;d.roles&&(d.role=d.roles[0],delete d.roles),d.accessibility&&(d.accessibility=d.accessibility[0]),d.audioChannelConfiguration&&(d.audioChannelConfiguration=d.audioChannelConfiguration[0]),h[o]=d,m.setSavedMediaSettings(o,d)}}}function T(e,t){e&&t&&(c[e]=t)}function E(e){return e?c[e]:null}function S(e,t){if(!e&&!t)return!0;if(!e||!t)return!1;var r=e.id===t.id,n=e.viewpoint===t.viewpoint,i=e.lang===t.lang,o=e.codec===t.codec,u=e.roles.toString()===t.roles.toString(),l=e.accessibility.toString()===t.accessibility.toString(),c=e.audioChannelConfiguration.toString()===t.audioChannelConfiguration.toString();return r&&o&&n&&i&&u&&l&&c}function w(){r={},h={},c={audio:null,video:null,text:null}}function A(e,t,r){var n=[];return e.forEach(function(e){t(r,e)&&n.push(e)}),0!==n.length?n:e}function C(e,t){return!e.lang||e.lang instanceof RegExp?t.lang.match(e.lang):""!==t.lang&&Object(d.extendedFilter)(t.lang,f()(e.lang)).length>0}function I(e,t){return void 0===e.index||null===e.index||t.index===e.index}function O(e,t){return!e.viewpoint||e.viewpoint===t.viewpoint}function R(e,t){var r=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return!e.role||!!t.roles.filter(function(t){return t===e.role})[0]||t.type===n.default.AUDIO&&r}function P(e,t){return e.accessibility?!!t.accessibility.filter(function(t){return t===e.accessibility})[0]:!t.accessibility.length}function k(e,t){return!e.audioChannelConfiguration||!!t.audioChannelConfiguration.filter(function(t){return t===e.audioChannelConfiguration})[0]}function D(e){var t,r=0,n=[];return e.forEach(function(e){(t=Math.max.apply(Math,e.bitrateList.map(function(e){return e.bandwidth})))>r?(r=t,n=[e]):t===r&&n.push(e)}),n}function N(e){var t,r=1/0,n=[];return e.forEach(function(e){(t=e.bitrateList.reduce(function(e,t){var r=Math.max(1,t.width*t.height);return e+t.bandwidth/r},0)/e.bitrateList.length)<r?(r=t,n=[e]):t===r&&n.push(e)}),n}function L(e){var t,r=0,n=[];return e.forEach(function(e){(t=e.representationCount)>r?(r=t,n=[e]):t===r&&n.push(e)}),n}function x(e,r){if(e===n.default.TEXT)return r[0];var i,o,l,c,f,d,h,m=u.get().streaming.selectionModeForInitialTrack,g=p.getCustomInitialTrackSelectionFunction();if(g&&"function"==typeof g)h=g(r);else switch(m){case n.default.TRACK_SELECTION_MODE_HIGHEST_SELECTION_PRIORITY:i=0,o=[],r.forEach(function(e){isNaN(e.selectionPriority)||(e.selectionPriority>i?(i=e.selectionPriority,o=[e]):e.selectionPriority===i&&o.push(e))}),(l=o).length>1&&(l=D(l)),l.length>1&&(l=L(l)),h=l;break;case n.default.TRACK_SELECTION_MODE_HIGHEST_BITRATE:(c=D(r)).length>1&&(c=L(c)),h=c;break;case n.default.TRACK_SELECTION_MODE_FIRST_TRACK:h=r[0];break;case n.default.TRACK_SELECTION_MODE_HIGHEST_EFFICIENCY:(f=N(r)).length>1&&(f=D(f)),h=f;break;case n.default.TRACK_SELECTION_MODE_WIDEST_RANGE:(d=L(r)).length>1&&(d=D(r)),h=d;break;default:t.warn("Track selection mode ".concat(m," is not supported. Falling back to TRACK_SELECTION_MODE_FIRST_TRACK")),h=r[0]}return h.length>0?h[0]:r[0]}return e={setInitialMediaSettingsForType:function(e,t){var r=h[e]||E(e),i=v(e,t.id),o=[];r||T(e,r=m.getSavedMediaSettings(e)),i&&0!==i.length&&(r&&(o=A(o=Array.from(i),C,r),o=A(o,I,r),o=A(o,O,r),e===n.default.AUDIO&&h[e]||(o=A(o,R,r)),o=A(o,P,r),o=A(o,k,r)),0===o.length?_(x(e,i),!0):o.length>1?_(x(e,o,h[e])):_(o[0]))},addTrack:function(e){if(e){var t=e.type;if(t===n.default.AUDIO||t===n.default.VIDEO||t===n.default.TEXT||t===n.default.IMAGE){var i=e.streamInfo.id;r[i]||(r[i]={audio:{list:[],storeLastSettings:!0,current:null},video:{list:[],storeLastSettings:!0,current:null},text:{list:[],storeLastSettings:!0,current:null},image:{list:[],storeLastSettings:!0,current:null}});for(var o=r[i][t].list,u=0,l=o.length;u<l;++u)if(S(o[u],e))return;o.push(e)}}},getTracksFor:v,getCurrentTrackFor:b,isCurrentTrack:function(e){if(!e)return!1;var t=e.type,n=e.streamInfo.id;return r[n]&&r[n][t]&&S(r[n][t].current,e)},setTrack:_,selectInitialTrack:x,setInitialSettings:T,getInitialSettings:E,getTracksWithHighestBitrate:D,getTracksWithHighestEfficiency:N,getTracksWithWidestRange:L,isTracksEqual:S,matchSettings:function(e,t){var r=arguments.length>2&&void 0!==arguments[2]&&arguments[2];try{var i=!1;if(e.lang){if(e.lang instanceof RegExp)i=t.lang.match(e.lang);else if(""!==t.lang){var o=f()(e.lang);o&&(i=Object(d.extendedFilter)(t.lang,o).length>0)}}else i=!0;var u=void 0===e.index||null===e.index||t.index===e.index,l=!e.viewpoint||e.viewpoint===t.viewpoint,c=!e.role||!!t.roles.filter(function(t){return t===e.role})[0],h=!e.accessibility||!!t.accessibility.filter(function(t){return t===e.accessibility})[0],p=!e.audioChannelConfiguration||!!t.audioChannelConfiguration.filter(function(t){return t===e.audioChannelConfiguration})[0];return i&&u&&l&&(c||t.type===n.default.AUDIO&&r)&&h&&p}catch(e){return!1}},matchSettingsLang:C,matchSettingsIndex:I,matchSettingsViewPoint:O,matchSettingsRole:R,matchSettingsAccessibility:P,matchSettingsAudioChannelConfig:k,saveTextSettingsDisabled:function(){m.setSavedMediaSettings(n.default.TEXT,null)},setConfig:function(e){e&&(e.domStorage&&(m=e.domStorage),e.settings&&(u=e.settings),e.customParametersModel&&(p=e.customParametersModel))},reset:w},t=Object(l.default)(g).getInstance().getLogger(e),w(),e}h.__dashjs_factory_name="MediaController";var p=u.default.getSingletonFactory(h);u.default.updateSingletonFactory(h.__dashjs_factory_name,p),t.default=p},"./src/streaming/controllers/MediaSourceController.js":function(e,t,r){r.r(t);var n=r("./src/core/FactoryMaker.js"),i=r("./src/core/Debug.js");function o(){var e,t,r,n=this.context;return e={createMediaSource:function(){var e="WebKitMediaSource"in window;return"MediaSource"in window?t=new MediaSource:e&&(t=new WebKitMediaSource),t},attachMediaSource:function(e){var r=window.URL.createObjectURL(t);return e.setSource(r),r},detachMediaSource:function(e){e.setSource(null)},setDuration:function e(n){t&&"open"===t.readyState&&(null===n&&isNaN(n)||t.duration!==n&&(function(e){for(var t=e.sourceBuffers,r=0;r<t.length;r++)if(t[r].updating)return!0;return!1}(t)?setTimeout(e.bind(null,n),50):(r.info("Set MediaSource duration:"+n),t.duration=n)))},setSeekable:function(e,r){t&&"function"==typeof t.setLiveSeekableRange&&"function"==typeof t.clearLiveSeekableRange&&"open"===t.readyState&&e>=0&&e<r&&(t.clearLiveSeekableRange(),t.setLiveSeekableRange(e,r))},signalEndOfStream:function(e){if(e&&"open"===e.readyState){for(var t=e.sourceBuffers,n=0;n<t.length;n++)if(t[n].updating||0===t[n].buffered.length)return;r.info("call to mediaSource endOfStream"),e.endOfStream()}}},r=Object(i.default)(n).getInstance().getLogger(e),e}o.__dashjs_factory_name="MediaSourceController",t.default=n.default.getSingletonFactory(o)},"./src/streaming/controllers/PlaybackController.js":function(e,t,r){r.r(t);var n=r("./src/streaming/constants/Constants.js"),i=r("./src/core/EventBus.js"),o=r("./src/core/events/Events.js"),u=r("./src/core/FactoryMaker.js"),l=r("./src/core/Debug.js"),c=r("./src/streaming/MediaPlayerEvents.js"),f=r("./src/streaming/constants/MetricsConstants.js");function d(){var e,t,r,u,d,h,p,m,g,y,v,b,_,T,E,S,w,A,C,I,O,R,P,k=this.context,D=Object(i.default)(k).getInstance();function N(){M(),T=!1,y=0,v=0,S=0,O=!1,w=!1,R=!1,A=NaN,p&&(D.off(o.default.DATA_UPDATE_COMPLETED,Q,e),D.off(o.default.LOADING_PROGRESS,em,e),D.off(o.default.MANIFEST_UPDATED,eb,e),D.off(o.default.STREAMS_COMPOSED,e_,e),D.off(c.default.PLAYBACK_ENDED,eh,e),D.off(c.default.STREAM_INITIALIZING,ey,e),D.off(c.default.REPRESENTATION_SWITCH,ev,e),D.off(c.default.BUFFER_LEVEL_STATE_CHANGED,Z,e),X(),p.removeEventListener("canplay",$),p.removeEventListener("canplaythrough",J),p.removeEventListener("play",ee),p.removeEventListener("waiting",et),p.removeEventListener("playing",er),p.removeEventListener("pause",en),p.removeEventListener("error",ep),p.removeEventListener("seeking",ei),p.removeEventListener("seeked",eo),p.removeEventListener("timeupdate",ea),p.removeEventListener("progress",es),p.removeEventListener("ratechange",eu),p.removeEventListener("loadedmetadata",el),p.removeEventListener("loadeddata",ec),p.removeEventListener("stalled",eg),p.removeEventListener("ended",ef),p.removeEventListener("volumechange",ed)),g=null,p=null,b=null,_=null}function L(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;return parseFloat((x(e)-q()).toFixed(5))}function x(e){var t=e||b;return t.start+t.duration}function j(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];b&&p&&p.getElement()?(e&&_&&U(q()),p.play()):T=!0}function M(){b&&p&&p.pause()}function F(e){var r=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],i=arguments.length>3&&void 0!==arguments[3]&&arguments[3];if(b&&p){var o=isNaN(A)?p.getTime():A;e!==o&&((C=!0===n)||(A=e),t.info("Requesting seek to time: "+e+(C?" (internal)":"")),_&&i&&U(e),p.setCurrentTime(e,r))}}function B(){if(b&&p&&_){var e=r&&r.hasVideoTrack()?n.default.VIDEO:n.default.AUDIO,t=d.getCurrentDVRInfo(e);return t&&t.range?t.range.end:0}}function U(e){var t=new Date(m.getClientReferenceTime()),r=h.getRegularPeriods()[0];y=m.calcPresentationTimeFromWallTime(t,r)-e}function q(){return b&&p?p.getTime():null}function H(){return b&&p?p.isPaused():null}function V(){return b&&p?p.isSeeking():null}function G(){return b&&p?p.isStalled():null}function Y(){return b&&p?p.getPlaybackRate():null}function z(){return b&&p?p.getEnded():null}function K(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;if(!H()&&_&&0!==p.getReadyState()&&!V()&&!O){e||(e=r.hasVideoTrack()?n.default.VIDEO:n.default.AUDIO);var i,o,u,l=q(),c=(i=e,(u=(o=d.getCurrentDVRInfo(i))?o.range:null)?l>u.end?Math.max(u.end-y,u.start):l>0&&l+.25<u.start&&31536e4>Math.abs(l-u.start)?w?Math.max(u.end-y,u.start):u.start:l:NaN);!isNaN(c)&&c!==l&&!V()&&(G()||I||1===p.getReadyState())&&(t.debug("UpdateCurrentTime: Seek to actual time: ".concat(c," from currentTime: ").concat(l)),F(c,!1,!1))}}function W(){null===g&&(g=setInterval(function(){var e;D.trigger(o.default.WALLCLOCK_TIME_UPDATED,{isDynamic:_,time:new Date}),_&&(r.addDVRMetric(),H()?(e=Date.now(),(!E||e>E+500)&&(E=e,ea())):K())},P.get().streaming.wallclockTimeUpdateInterval))}function X(){clearInterval(g),g=null}function Q(e){var t=h.convertRepresentationToRepresentationInfo(e.currentRepresentation),r=t?t.mediaInfo.streamInfo:null;null!==r&&b.id===r.id&&(b=r)}function $(){D.trigger(o.default.CAN_PLAY)}function J(){D.trigger(o.default.CAN_PLAY_THROUGH)}function Z(e){e.streamId===r.getActiveStreamInfo().id&&(I=e.state===f.default.BUFFER_EMPTY,P.get().streaming.buffer.setStallState&&p.setStallState(e.mediaType,e.state===f.default.BUFFER_EMPTY))}function ee(){t.info("Native video element event: play"),K(),W(),D.trigger(o.default.PLAYBACK_STARTED,{startTime:q()})}function et(){t.info("Native video element event: waiting"),D.trigger(o.default.PLAYBACK_WAITING,{playingTime:q()})}function er(){t.info("Native video element event: playing"),C=!1,D.trigger(o.default.PLAYBACK_PLAYING,{playingTime:q()})}function en(){t.info("Native video element event: pause"),D.trigger(o.default.PLAYBACK_PAUSED,{ended:z()})}function ei(){if(!C){var e=q();isNaN(A)||A===e||(e=A),A=NaN,t.info("Seeking to: "+e),W(),D.trigger(o.default.PLAYBACK_SEEKING,{seekTime:e,streamId:b.id})}}function eo(){t.info("Native video element event: seeked"),C=!1,D.trigger(o.default.PLAYBACK_SEEKED)}function ea(){b&&D.trigger(o.default.PLAYBACK_TIME_UPDATED,{timeToEnd:L(),time:q(),streamId:b.id})}function es(){D.trigger(o.default.PLAYBACK_PROGRESS,{streamId:b.id})}function eu(){var e=Y();t.info("Native video element event: ratechange: ",e),D.trigger(o.default.PLAYBACK_RATE_CHANGED,{playbackRate:e})}function el(){t.info("Native video element event: loadedmetadata"),D.trigger(o.default.PLAYBACK_METADATA_LOADED),W()}function ec(){t.info("Native video element event: loadeddata"),D.trigger(o.default.PLAYBACK_LOADED_DATA)}function ef(){t.info("Native video element event: ended"),M(),X();var e=r?r.getActiveStreamInfo():null;e&&D.trigger(o.default.PLAYBACK_ENDED,{isLast:e.isLast})}function ed(){D.trigger(o.default.PLAYBACK_VOLUME_CHANGED)}function eh(e){if(g&&e.isLast){t.info("onPlaybackEnded -- PLAYBACK_ENDED but native video element didn't fire ended");var r=e.seekTime?e.seekTime:x();p.setCurrentTime(r),M(),X()}}function ep(e){var t=e.target||e.srcElement;D.trigger(o.default.PLAYBACK_ERROR,{error:t.error})}function em(e){if(!1===e.stream&&w&&!isNaN(e.request.duration)){var r=1.2*e.request.duration;r>y&&(t.warn("Browser does not support fetch API with StreamReader. Increasing live delay to be 20% higher than segment duration:",r.toFixed(2)),y=r,v=r)}}function eg(e){D.trigger(o.default.PLAYBACK_STALLED,{e:e})}function ey(e){var r;(r=e.mediaInfo)&&r.supplementalProperties&&"true"===r.supplementalProperties[n.default.SUPPLEMENTAL_PROPERTY_DVB_LL_SCHEME]&&(t.debug("Low Latency critical SupplementalProperty set: Enabling low Latency"),w=!0)}function ev(e){var t=r.getActiveStreamInfo();e&&t&&e.currentRepresentation&&e.streamId&&e.streamId===t.id&&e.mediaType&&(e.mediaType===n.default.VIDEO||e.mediaType===n.default.AUDIO)&&(w=!e.currentRepresentation.availabilityTimeComplete)&&!R&&(R=!0)}function eb(){O=!0}function e_(){O=!1}return e={initialize:function(t,r){b=t,!0!==r&&(p.addEventListener("canplay",$),p.addEventListener("canplaythrough",J),p.addEventListener("play",ee),p.addEventListener("waiting",et),p.addEventListener("playing",er),p.addEventListener("pause",en),p.addEventListener("error",ep),p.addEventListener("seeking",ei),p.addEventListener("seeked",eo),p.addEventListener("timeupdate",ea),p.addEventListener("progress",es),p.addEventListener("ratechange",eu),p.addEventListener("loadedmetadata",el),p.addEventListener("loadeddata",ec),p.addEventListener("stalled",eg),p.addEventListener("ended",ef),p.addEventListener("volumechange",ed),_=b.manifestInfo.isDynamic,I=!1,C=!1,D.on(o.default.DATA_UPDATE_COMPLETED,Q,e),D.on(o.default.LOADING_PROGRESS,em,e),D.on(o.default.MANIFEST_UPDATED,eb,e),D.on(o.default.STREAMS_COMPOSED,e_,e),D.on(c.default.PLAYBACK_ENDED,eh,e,{priority:i.default.EVENT_PRIORITY_HIGH}),D.on(c.default.STREAM_INITIALIZING,ey,e),D.on(c.default.REPRESENTATION_SWITCH,ev,e),D.on(c.default.BUFFER_LEVEL_STATE_CHANGED,Z,e),T&&(T=!1,j()))},setConfig:function(e){e&&(e.streamController&&(r=e.streamController),e.serviceDescriptionController&&(u=e.serviceDescriptionController),e.dashMetrics&&(d=e.dashMetrics),e.adapter&&(h=e.adapter),e.videoModel&&(p=e.videoModel),e.timelineConverter&&(m=e.timelineConverter),e.settings&&(P=e.settings))},getTimeToStreamEnd:L,getBufferLevel:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=null;return r.getActiveStreamProcessors().forEach(function(r){if(!e||0===e.length||-1===e.indexOf(r.getType())){var n=r.getBufferLevel();t=null===t?n:Math.min(t,n)}}),t},getPlaybackStalled:function(){return I},getTime:q,getLowLatencyModeEnabled:function(){return w},getInitialCatchupModeActivated:function(){return R},getIsManifestUpdateInProgress:function(){return O},getPlaybackRate:Y,getPlayedRanges:function(){return b&&p?p.getPlayedRanges():null},getEnded:z,getIsDynamic:function(){return _},getStreamController:function(){return r},computeAndSetLiveDelay:function(e,t){var r,n,i,o=!isNaN(e)&&isFinite(e)?e:NaN,l=h.getSuggestedPresentationDelay(),c=u.getServiceDescriptionSettings();return r=isNaN(P.get().streaming.delay.liveDelay)?null===P.get().streaming.delay.liveDelayFragmentCount||isNaN(P.get().streaming.delay.liveDelayFragmentCount)||isNaN(o)?c&&!isNaN(c.liveDelay)&&c.liveDelay>0?c.liveDelay:!0===P.get().streaming.delay.useSuggestedPresentationDelay&&null!==l&&!isNaN(l)&&l>0?l:isNaN(o)?t&&!isNaN(t.minBufferTime)?4*t.minBufferTime:4*b.manifestInfo.minBufferTime:4*o:o*P.get().streaming.delay.liveDelayFragmentCount:P.get().streaming.delay.liveDelay,null!==(i=h.getAvailabilityStartTime())&&(S=i),y=n=t&&t.dvrWindowSize>0?Math.min(r,t.dvrWindowSize):r,v=n,n},getLiveDelay:function(){return y},getOriginalLiveDelay:function(){return v},getCurrentLiveLatency:function(){if(!_||isNaN(S))return NaN;var e=q();return isNaN(e)||0===e?0:Math.max((((new Date).getTime()+1e3*m.getClientTimeOffset()-S-1e3*e)/1e3).toFixed(3),0)},play:j,isPaused:H,isStalled:G,pause:M,isSeeking:V,getStreamEndTime:x,seek:F,seekToOriginalLive:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],r=arguments.length>2&&void 0!==arguments[2]&&arguments[2],n=B();0!==n&&F(n-(y=v),e,t,r)},seekToCurrentLive:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],r=arguments.length>2&&void 0!==arguments[2]&&arguments[2],n=B();0!==n&&F(n-y,e,t,r)},reset:N,updateCurrentTime:K,getAvailabilityStartTime:function(){return S}},t=Object(l.default)(k).getInstance().getLogger(e),N(),e}d.__dashjs_factory_name="PlaybackController",t.default=u.default.getSingletonFactory(d)},"./src/streaming/controllers/ScheduleController.js":function(e,t,r){r.r(t);var n=r("./src/streaming/constants/Constants.js"),i=r("./src/streaming/models/FragmentModel.js"),o=r("./src/core/EventBus.js"),u=r("./src/core/events/Events.js"),l=r("./src/core/FactoryMaker.js"),c=r("./src/core/Debug.js"),f=r("./src/streaming/constants/MetricsConstants.js"),d=r("./src/streaming/MediaPlayerEvents.js");function h(e){e=e||{};var t,r,l,h,p,m,g,y,v,b,_,T,E,S=this.context,w=Object(o.default)(S).getInstance(),A=e.dashMetrics,C=e.mediaPlayerModel,I=e.fragmentModel,O=e.abrController,R=e.playbackController,P=e.textController,k=e.type,D=e.bufferController,N=e.settings;function L(e){D.getIsBufferingCompleted()||(x(),m=setTimeout(j,isNaN(e)?0:e))}function x(){m&&(clearTimeout(m),m=null)}function j(){try{if(function(){try{return k===n.default.TEXT&&!P.isTextEnabled()||R.isPaused()&&(!R.getStreamController().getInitialPlayback()||!R.getStreamController().getAutoPlay())&&!N.get().streaming.scheduling.scheduleWhilePaused}catch(e){return!1}}())return void x();if(function(){var e,t;try{return h&&(isNaN(b)||_||(e=r.id,t=O.getMaxAllowedIndexFor(k,e),!(!isNaN(v)&&v==t||(l.info("Top quality "+k+" index has changed from "+v+" to "+t),v=t,0)))||!k||!h||A.getCurrentBufferLevel(k)<M())}catch(e){return!1}}()){var e=!1;E&&(e=O.checkPlaybackQuality(k,r.id)),e||(T||h.quality!==b||_?(_?(l.debug("Switch track for "+k+", representation id = "+h.id),_=!1):l.debug("Quality has changed, get init request for representationid = "+h.id),w.trigger(u.default.INIT_FRAGMENT_NEEDED,{representationId:h.id,sender:t},{streamId:r.id,mediaType:k}),E=!1,T=!1):(l.debug("Media segment needed for ".concat(k," and stream id ").concat(r.id)),w.trigger(u.default.MEDIA_FRAGMENT_NEEDED,{},{streamId:r.id,mediaType:k}),E=!0))}else L(R.getLowLatencyModeEnabled()?N.get().streaming.scheduling.lowLatencyTimeout:N.get().streaming.scheduling.defaultTimeout)}catch(e){L(R.getLowLatencyModeEnabled()?N.get().streaming.scheduling.lowLatencyTimeout:N.get().streaming.scheduling.defaultTimeout)}}function M(){var e=NaN;return k&&h?e=k===n.default.TEXT?function(){try{if(P.isTextEnabled()){if(isNaN(h.fragmentDuration)){var e=A.getCurrentSchedulingInfo(f.default.SCHEDULING_INFO);return e?e.duration:0}return h.fragmentDuration}return 0}catch(e){return 0}}():k===n.default.AUDIO&&g?function(){try{var e=A.getCurrentBufferLevel(n.default.VIDEO);return isNaN(h.fragmentDuration)?e+1:Math.max(e+1,h.fragmentDuration)}catch(e){return 0}}():function(){try{var e=h.mediaInfo.streamInfo;return O.isPlayingAtTopQuality(e)?e.manifestInfo.duration>=N.get().streaming.buffer.longFormContentDurationThreshold?N.get().streaming.buffer.bufferTimeAtTopQualityLongForm:N.get().streaming.buffer.bufferTimeAtTopQuality:C.getStableBufferTime()}catch(e){return C.getStableBufferTime()}}():e}function F(){B(!0)}function B(e){if(R&&I){var t=I.getRequests({state:i.default.FRAGMENT_MODEL_EXECUTED,time:R.getTime(),threshold:0})[0];t&&R.getTime()>=t.startTime&&((!y.mediaInfo||t.mediaInfo.type===y.mediaInfo.type&&t.mediaInfo.id!==y.mediaInfo.id)&&e&&w.trigger(u.default.TRACK_CHANGE_RENDERED,{mediaType:k,oldMediaInfo:y.mediaInfo,newMediaInfo:t.mediaInfo,streamId:r.id}),(t.quality!==y.quality||t.adaptationIndex!==y.adaptationIndex)&&e&&(l.debug("Quality change rendered for streamId ".concat(r.id," and type ").concat(k)),w.trigger(u.default.QUALITY_CHANGE_RENDERED,{mediaType:k,oldQuality:y.quality,newQuality:t.quality,streamId:r.id})),y={mediaInfo:t.mediaInfo,quality:t.quality,adaptationIndex:t.adaptationIndex})}}function U(e){l.debug("Appended bytes for ".concat(e.mediaType," and stream id ").concat(r.id)),(isNaN(e.index)||isNaN(b))&&(b=e.quality,l.info("["+k+"] lastInitializedRepresentationInfo changed to "+e.quality)),L(0)}function q(){I.abortRequests(),x()}function H(){N.get().streaming.scheduling.scheduleWhilePaused||L()}function V(e){A.updatePlayListTraceMetrics({playbackspeed:e.playbackRate.toString()})}function G(){E=!0,p=0,b=NaN,y={mediaInfo:void 0,quality:NaN,adaptationIndex:NaN},v=NaN,_=!1,T=!1}return t={initialize:function(e){g=e,w.on(u.default.BYTES_APPENDED_END_FRAGMENT,U,t),w.on(u.default.URL_RESOLUTION_FAILED,q,t),w.on(d.default.PLAYBACK_STARTED,H,t),w.on(d.default.PLAYBACK_RATE_CHANGED,V,t),w.on(d.default.PLAYBACK_TIME_UPDATED,F,t)},getType:function(){return k},getStreamId:function(){return r.id},setCurrentRepresentation:function(e){h=e},setTimeToLoadDelay:function(e){p=e},getTimeToLoadDelay:function(){return p},setSwitchTrack:function(e){_=e},getSwitchStrack:function(){return _},startScheduleTimer:L,clearScheduleTimer:x,reset:function(){w.off(u.default.BYTES_APPENDED_END_FRAGMENT,U,t),w.off(u.default.URL_RESOLUTION_FAILED,q,t),w.off(d.default.PLAYBACK_STARTED,H,t),w.off(d.default.PLAYBACK_RATE_CHANGED,V,t),w.off(d.default.PLAYBACK_TIME_UPDATED,F,t),x(),B(!1),G(),r=null},getBufferTarget:M,getPlaybackController:function(){return R},setCheckPlaybackQuality:function(e){E=e},setInitSegmentRequired:function(e){T=e}},l=Object(c.default)(S).getInstance().getLogger(t),G(),r=e.streamInfo,t}h.__dashjs_factory_name="ScheduleController",t.default=l.default.getClassFactory(h)},"./src/streaming/controllers/StreamController.js":function(e,t,r){r.r(t);var n=r("./src/streaming/constants/Constants.js"),i=r("./src/streaming/constants/MetricsConstants.js"),o=r("./src/streaming/Stream.js"),u=r("./src/streaming/ManifestUpdater.js"),l=r("./src/core/EventBus.js"),c=r("./src/core/events/Events.js"),f=r("./src/core/FactoryMaker.js"),d=r("./src/streaming/vo/metrics/PlayList.js"),h=r("./src/core/Debug.js"),p=r("./src/streaming/utils/InitCache.js"),m=r("./src/streaming/utils/URLUtils.js"),g=r("./src/streaming/MediaPlayerEvents.js"),y=r("./src/streaming/controllers/TimeSyncController.js"),v=r("./src/streaming/controllers/MediaSourceController.js"),b=r("./src/streaming/vo/DashJSError.js"),_=r("./src/core/errors/Errors.js"),T=r("./src/streaming/controllers/EventController.js"),E=r("./src/streaming/constants/ConformanceViolationConstants.js");function S(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}function w(){var e,t,r,f,w,A,C,I,O,R,P,k,D,N,L,x,j,M,F,B,U,q,H,V,G,Y,z,K,W,X,Q,$,J,Z,ee,et,er,en,ei,eo,ea,es,eu,el,ec,ef,ed,eh,ep,em=this.context,eg=Object(l.default)(em).getInstance();function ey(){if(!(A&&A.hasOwnProperty("load")&&q&&q.hasOwnProperty("initialize")&&q.hasOwnProperty("reset")&&q.hasOwnProperty("getClientTimeOffset")&&C&&U&&O&&Z))throw Error(n.default.MISSING_CONFIG_ERROR)}function ev(){!function(){try{var e=I.getStreamsInfo();if(!V&&0===e.length)throw Error("There are no periods in the MPD");V&&e.length>0&&O.updateManifestUpdateInfo({currentTime:Z.getTime(),buffered:J.getBufferRange(),presentationStartTime:e[0].start,clientTimeOffset:q.getClientTimeOffset()}),H.length>0&&(0!==e.length?H=H.filter(function(r){var n=e.filter(function(e){return e.id===r.getId()}).length>0||r.getId()===V.getId();return n||(t.debug("Removing stream ".concat(r.getId())),r.reset(!0)),n}):t.warn("No periods included in the current manifest. Skipping the filtering of outdated stream objects."));for(var n=[],i=0,u=e.length;i<u;i++){var l=e[i];n.push(function(e){var t=eJ(e.id);return t?t.updateData(e):(t=Object(o.default)(em).create({manifestModel:C,mediaPlayerModel:et,dashMetrics:O,manifestUpdater:w,adapter:I,timelineConverter:q,capabilities:r,capabilitiesFilter:f,errHandler:U,baseURLController:D,segmentBaseController:N,textController:Y,abrController:x,playbackController:Z,eventController:M,mediaController:j,protectionController:G,videoModel:J,streamInfo:e,settings:ec}),H.push(t),t.initialize(),Promise.resolve())}(l)),O.addManifestUpdateStreamInfo(l)}Promise.all(n).then(function(){return ec.get().streaming.applyContentSteering&&!V&&k.shouldQueryBeforeStart()?k.loadSteeringData():Promise.resolve()}).then(function(){V||function e(r){eO();var n=O.getCurrentDVRInfo().range;if(n.end<n.start){ed&&clearTimeout(ed);var i=Math.min(1e3*(-1*(n.end-n.start)+2),2147483647);return t.debug("Waiting for ".concat(i," ms before playback can start")),eg.trigger(c.default.AST_IN_FUTURE,{delay:i}),void(ed=setTimeout(function(){e(r)},i))}ec.get().streaming.applyProducerReferenceTime&&ee.calculateProducerReferenceTimeOffsets(r);var o=r[0].manifestInfo;if(ec.get().streaming.applyServiceDescription&&ee.applyServiceDescription(o),I.getIsDynamic()){var u=eG(r,o);Z.computeAndSetLiveDelay(u,o)}var l=function(){var e;if(I.getIsDynamic()){var r=O.getCurrentDVRInfo();e=(r&&r.range?r.range.end:0)-Z.getOriginalLiveDelay();var n=r?r.range:null;if(n){if(isNaN(eh)&&-1===eh.toString().indexOf("posix:")){var i=eq(!0);isNaN(i)||(t.info("Start time from URI parameters: ".concat(i)),e=Math.min(e,i))}else{t.info("Start time provided by the app: ".concat(eh));var o=eH(!0,eh);isNaN(o)||(e=Math.min(e,o))}var u=ec.get().streaming.timeShiftBuffer.calcFromSegmentTimeline?.1:0;e=Math.max(e,n.start+u)}}else if(e=H[0].getStreamInfo().start,isNaN(eh)){var l=eq(!1);isNaN(l)||(t.info("Start time from URI parameters: ".concat(l)),e=Math.max(e,l))}else{t.info("Start time provided by the app: ".concat(eh));var c=eH(!1,eh);isNaN(c)||(e=Math.max(e,c))}return e}(),f=eI(l),d=null!==f?f:H[0];eg.trigger(c.default.INITIAL_STREAM_SWITCH,{startTime:l}),e_(d,null,l),ea||(ea=setInterval(function(){!W&&0>=Z.getTimeToStreamEnd()&&!Z.isSeeking()&&eg.trigger(c.default.PLAYBACK_ENDED,{isLast:e$().isLast})},200))}(e),eg.trigger(c.default.STREAMS_COMPOSED),ej()}).catch(function(e){throw e})}catch(e){U.error(new b.default(_.default.MANIFEST_ERROR_ID_NOSTREAMS_CODE,e.message+" nostreamscomposed",C.getValue())),Q=!0,e1()}}()}function eb(){ef=!0}function e_(e,r,n){try{if(W||!e||r===e&&e.getIsActive())return;W=!0,eg.trigger(c.default.PERIOD_SWITCH_STARTED,{fromStreamInfo:r?r.getStreamInfo():null,toStreamInfo:e.getStreamInfo()});var i=!1;V=e,r&&(i=eC(e,r),r.deactivate(i)),n=isNaN(n)?!i&&r?e.getStreamInfo().start:NaN:n,t.info("Switch to stream ".concat(e.getId(),". Seektime is ").concat(n,", current playback time is ").concat(Z.getTime(),". Seamless period switch is set to ").concat(i)),eu=eu.filter(function(e){return e.getId()!==V.getId()}),Z.initialize(e$(),!!r),J.getElement()&&eT(n,i)}catch(e){W=!1}}function eT(e,r){var n;function i(){if($&&"open"===$.readyState){t.debug("MediaSource is open!"),window.URL.revokeObjectURL(n),$.removeEventListener("sourceopen",i),$.removeEventListener("webkitsourceopen",i),eU();var o=O.getCurrentDVRInfo();R.setSeekable(o.range.start,o.range.end),eE(e,r)}}function o(){$.addEventListener("sourceopen",i,!1),$.addEventListener("webkitsourceopen",i,!1),n=R.attachMediaSource(J),t.debug("MediaSource attached to element.  Waiting on open...")}$?r?eE(e,r):(R.detachMediaSource(J),o()):($=R.createMediaSource(),o())}function eE(e,t){V.activate($,t?es:void 0,e).then(function(t){if(t){var r=Object.keys(t);r.length>0&&t[r[0]].getBuffer().changeType&&(el=!0),es=t}isNaN(e)||(eg.trigger(c.default.SEEK_TARGET,{time:e},{streamId:V.getId()}),Z.seek(e,!1,!0),V.startScheduleControllers()),W=!1,eg.trigger(c.default.PERIOD_SWITCH_COMPLETED,{toStreamInfo:e$()})})}function eS(e){var t=eI(e.seekTime);t&&t!==V?t&&t!==V&&(ew(),function(e,t){var r=e&&!isNaN(e.seekTime)?e.seekTime:NaN;Promise.all(V.getProcessors().map(function(t){return t.prepareOuterPeriodPlaybackSeeking(e)})).then(function(){e_(t,V,r)}).catch(function(e){U.error(e)})}(e,t)):(ew(),V.getProcessors().forEach(function(t){return t.prepareInnerPeriodPlaybackSeeking(e)}),eW(d.PlayListTrace.USER_REQUEST_STOP_REASON)),eX(d.PlayList.SEEK_START_REASON)}function ew(){eu&&eu.length>0&&(eu.forEach(function(e){e.deactivate(!0)}),eu=[])}function eA(e){e.newMediaInfo.streamInfo.id===V.getId()&&(ew(),V.prepareTrackChange(e))}function eC(e,t){try{return ec.get().streaming.buffer.reuseExistingSourceBuffers&&(t.isProtectionCompatible(e)||ef)&&(el||t.isMediaCodecCompatible(e,t))}catch(e){return!1}}function eI(e){if(isNaN(e))return null;for(var t=H.length,r=0;r<t;r++){var n=H[r];if(e<parseFloat((n.getStartTime()+n.getDuration()).toFixed(5)))return n}return null}function eO(){try{var e=I.getIsDynamic(),t=I.getStreamsInfo()[0].manifestInfo,r=Z.getTime(),i=q.calcTimeShiftBufferWindow(H,e),o=eF();if(void 0===i.start||void 0===i.end)return;o&&0!==o.length?o.forEach(function(e){O.addDVRInfo(e.getType(),r,t,i)}):O.addDVRInfo(n.default.VIDEO,r,t,i)}catch(e){}}function eR(e){if(ei&&K){var t=et.getInitialBufferLevel(),r=[n.default.TEXT];(isNaN(t)||t<=Z.getBufferLevel(r)||I.getIsDynamic()&&t>Z.getLiveDelay())&&(ei=!1,eX(d.PlayList.INITIAL_PLAYOUT_START_REASON),Z.play())}e&&e.mediaType&&O.addBufferLevel(e.mediaType,new Date,1e3*e.bufferLevel)}function eP(e){e.streamInfo.id===V.getId()&&e.reason&&e.reason.forceReplace&&ew(),eJ(e.streamInfo.id).prepareQualityChange(e)}function ek(){if(I.getIsDynamic()&&0!==Z.getOriginalLiveDelay()&&V){var e=I.getStreamsInfo();if(e.length>0){var t=e[0].manifestInfo,r=eG(e,t);Z.computeAndSetLiveDelay(r,t)}}}function eD(){if(ez()){var e=J.getPlaybackQuality();e&&O.addDroppedFrames(e)}}function eN(){t.debug("[onPlaybackStarted]"),!ei&&en&&eX(d.PlayList.RESUME_FROM_PAUSE_START_REASON),ei&&(ei=!1),eo&&(eo=!1,ec.get().streaming.applyContentSteering&&!k.shouldQueryBeforeStart()&&k.loadSteeringData()),en=!1}function eL(e){t.debug("[onPlaybackPaused]"),e.ended||(en=!0,eW(d.PlayListTrace.USER_REQUEST_STOP_REASON))}function ex(e){t.debug("Stream with id ".concat(e.streamInfo.id," finished buffering"));var r=e.streamInfo.isLast;$&&r?(t.info("[onStreamBufferingCompleted] calls signalEndOfStream of mediaSourceController."),R.signalEndOfStream($)):ej()}function ej(){if(V&&V.getHasFinishedBuffering())for(var e=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;try{var t=e||V||null;if(t){var r=t.getStreamInfo();return H.filter(function(e){var t=e.getStreamInfo();return t.start>r.start&&r.id!==t.id})}}catch(e){return[]}}(V),t=0;t<e.length;){var r=e[t],n=0===t?V:e[t-1];!r.getPreloaded()&&n.getHasFinishedBuffering()&&$&&function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;$&&!e.getPreloaded()&&eC(e,t)&&e.startPreloading($,es).then(function(){eu.push(e)})}(r,n),t+=1}}function eM(){ea&&(clearInterval(ea),ea=null)}function eF(){return V?V.getProcessors():[]}function eB(e){if(V&&!V.getIsEndedEventSignaled()){V.setIsEndedEventSignaled(!0);var r=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=e||V||null;if(!t)return null;for(var r=t.getStreamInfo(),n=r.start,i=0,o=-1,u=NaN;i<H.length;){var l=H[i].getStreamInfo(),c=l.start-n;c>0&&(isNaN(u)||c<u)&&r.id!==l.id&&(u=c,o=i),i+=1}return o>=0?H[o]:null}();r?(t.debug("StreamController onEnded, found next stream with id ".concat(r.getStreamInfo().id,". Switching from ").concat(V.getStreamInfo().id," to ").concat(r.getStreamInfo().id)),e_(r,V,NaN)):(t.debug("StreamController no next stream found"),V.setIsEndedEventSignaled(!1)),eW(r?d.PlayListTrace.END_OF_PERIOD_STOP_REASON:d.PlayListTrace.END_OF_CONTENT_STOP_REASON)}e&&e.isLast&&(eM(),k.stopSteeringRequestTimer())}function eU(e){var t=e||e$().manifestInfo.duration;R.setDuration(t)}function eq(e){var t=L.getURIFragmentData();if(!t||!t.t)return NaN;var r=H[0].getStreamInfo().start;return t.t=t.t.split(",")[0],eV(e,t.t,r)}function eH(e,t){var r=0;return e||(r=H[0].getStreamInfo().start),eV(e,t,r)}function eV(e,t,r){var n=I.getRegularPeriods()[0],i=t.toString(),o=-1!==i.indexOf("posix:")?"now"===i.substring(6)?Date.now()/1e3:parseFloat(i.substring(6)):NaN;return e&&!isNaN(o)?q.calcPresentationTimeFromWallTime(new Date(1e3*o),n):parseFloat(i)+r}function eG(e,t){try{var r=NaN;if(t&&!isNaN(t.maxFragmentDuration)&&isFinite(t.maxFragmentDuration))return t.maxFragmentDuration;if(e&&1===e.length){var i=e[0],o=[n.default.VIDEO,n.default.AUDIO,n.default.TEXT].reduce(function(e,t){var r=I.getMediaInfoForType(i,t);return r&&!1!==r.isFragmented&&e.push(r),e},[]).reduce(function(e,t){var r=I.getVoRepresentations(t);return r&&r.length>0&&r.forEach(function(t){t&&e.push(t)}),e},[]).reduce(function(e,t){var r=I.convertRepresentationToRepresentationInfo(t);return r&&r.fragmentDuration&&!isNaN(r.fragmentDuration)&&e.push(r.fragmentDuration),e},[]);r=Math.max.apply(Math,function(e){if(Array.isArray(e))return S(e)}(o)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(o)||function(e,t){if(e){if("string"==typeof e)return S(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?S(e,t):void 0}}(o)||function(){throw TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}())}return isFinite(r)?r:NaN}catch(e){return NaN}}function eY(e){if(e.error)Q=!0,e1();else{t.info("Manifest updated... updating data system wide.");var r=e.manifest;I.updatePeriods(r);var n=I.getUTCTimingSources();!I.getIsDynamic()||n&&0!==n.length||eg.trigger(g.default.CONFORMANCE_VIOLATION,{level:E.default.LEVELS.WARNING,event:E.default.EVENTS.NO_UTC_TIMING_ELEMENT});var i=I.getIsDynamic()?n.concat(er.getUTCTimingSources()):n,o=B.isHTTPS(e.manifest.url);i.forEach(function(e){e.value.replace(/.*?:\/\//g,"")===ec.get().streaming.utcSynchronization.defaultTimingSource.value.replace(/.*?:\/\//g,"")&&(e.value=e.value.replace(new RegExp(o?/^(http:)?\/\//i:/^(https:)?\/\//i),o?"https://":"http://"),t.debug("Matching default timing source protocol to manifest protocol: ",e.value))}),f.filterUnsupportedFeatures(r).then(function(){D.initialize(r),P.attemptSync(i,I.getIsDynamic())})}}function ez(){return!!V&&V.getHasVideoTrack()}function eK(){return!!V&&V.getHasAudioTrack()}function eW(e,t){t=t||new Date,eF().forEach(function(r){r.finalisePlayList(t,e)}),O.addPlayList()}function eX(e){O.createPlaylistMetrics(1e3*Z.getTime(),e)}function eQ(e){if(e.error){var r,n="";switch(e.error.code){case 1:n="MEDIA_ERR_ABORTED";break;case 2:n="MEDIA_ERR_NETWORK";break;case 3:n="MEDIA_ERR_DECODE",ep.counts.mediaErrorDecode+=1;break;case 4:n="MEDIA_ERR_SRC_NOT_SUPPORTED";break;case 5:n="MEDIA_ERR_ENCRYPTED";break;default:n="UNKNOWN"}"MEDIA_ERR_DECODE"===n&&ec.get().errors.recoverAttempts.mediaErrorDecode>=ep.counts.mediaErrorDecode?(t.warn("A MEDIA_ERR_DECODE occured: Resetting the MediaSource"),r=Z.getTime(),V.deactivate(!1),t.warn("MediaSource has been resetted. Resuming playback from time ".concat(r)),eT(r,!1)):(X=!0,e.error.message&&(n+=" ("+e.error.message+")"),e.error.msExtendedCode&&(n+=" (0x"+(e.error.msExtendedCode>>>0).toString(16).toUpperCase()+")"),t.fatal("Video Element Error: "+n),e.error&&t.fatal(e.error),U.error(new b.default(e.error.code,n)),e1())}}function e$(){return V?V.getStreamInfo():null}function eJ(e){for(var t=0,r=H.length;t<r;t++)if(H[t].getId()===e)return H[t];return null}function eZ(e){isNaN(e.newDuration)||eU(e.newDuration)}function e0(){H=[],eh=NaN,G=null,W=!1,V=null,X=!1,Q=!1,ei=!0,eo=!0,en=!1,K=!0,ea=null,ef=!1,el=!1,eu=[],ed=null,ep={counts:{mediaErrorDecode:0}}}function e1(){ey(),P.reset(),eW(X||Q?d.PlayListTrace.FAILURE_STOP_REASON:d.PlayListTrace.USER_REQUEST_STOP_REASON);for(var t=0,r=H?H.length:0;t<r;t++)H[t].reset(X);eg.off(g.default.PLAYBACK_TIME_UPDATED,eD,e),eg.off(g.default.PLAYBACK_SEEKING,eS,e),eg.off(g.default.PLAYBACK_ERROR,eQ,e),eg.off(g.default.PLAYBACK_STARTED,eN,e),eg.off(g.default.PLAYBACK_PAUSED,eL,e),eg.off(g.default.PLAYBACK_ENDED,eB,e),eg.off(g.default.METRIC_ADDED,e2,e),eg.off(g.default.MANIFEST_VALIDITY_CHANGED,eZ,e),eg.off(g.default.BUFFER_LEVEL_UPDATED,eR,e),eg.off(g.default.QUALITY_CHANGE_REQUESTED,eP,e),c.default.KEY_SESSION_UPDATED&&eg.off(c.default.KEY_SESSION_UPDATED,eb,e),eg.off(c.default.MANIFEST_UPDATED,eY,e),eg.off(c.default.STREAM_BUFFERING_COMPLETED,ex,e),eg.off(c.default.TIME_SYNCHRONIZATION_COMPLETED,ev,e),eg.off(c.default.CURRENT_TRACK_CHANGED,eA,e),eg.off(c.default.SETTING_UPDATED_LIVE_DELAY,ek,e),eg.off(c.default.SETTING_UPDATED_LIVE_DELAY_FRAGMENT_COUNT,ek,e),D.reset(),w.reset(),M.reset(),O.clearAllCurrentMetrics(),C.setValue(null),A.reset(),q.reset(),F.reset(),$&&(R.detachMediaSource(J),$=null),J=null,G&&(G=null,z=null,C.getValue()&&eg.trigger(c.default.PROTECTION_DESTROYED,{data:C.getValue().url})),eM(),eg.trigger(c.default.STREAM_TEARDOWN_COMPLETE),e0()}function e2(e){if(e.metric===i.default.DVR_INFO){var t=eK()?n.default.AUDIO:n.default.VIDEO;e.mediaType===t&&R.setSeekable(e.value.range.start,e.value.range.end)}}return e={initialize:function(t,r){ey(),K=t,z=r,q.initialize(),(w=Object(u.default)(em).create()).setConfig({manifestModel:C,adapter:I,manifestLoader:A,errHandler:U,settings:ec}),w.initialize(),(M=Object(T.default)(em).getInstance()).setConfig({manifestUpdater:w,playbackController:Z,settings:ec}),M.start(),P.setConfig({dashMetrics:O,baseURLController:D,errHandler:U,settings:ec}),P.initialize(),G&&(eg.trigger(c.default.PROTECTION_CREATED,{controller:G}),G.setMediaElement(J.getElement()),z&&G.setProtectionData(z)),eg.on(g.default.PLAYBACK_TIME_UPDATED,eD,e),eg.on(g.default.PLAYBACK_SEEKING,eS,e),eg.on(g.default.PLAYBACK_ERROR,eQ,e),eg.on(g.default.PLAYBACK_STARTED,eN,e),eg.on(g.default.PLAYBACK_PAUSED,eL,e),eg.on(g.default.PLAYBACK_ENDED,eB,e),eg.on(g.default.METRIC_ADDED,e2,e),eg.on(g.default.MANIFEST_VALIDITY_CHANGED,eZ,e),eg.on(g.default.BUFFER_LEVEL_UPDATED,eR,e),eg.on(g.default.QUALITY_CHANGE_REQUESTED,eP,e),c.default.KEY_SESSION_UPDATED&&eg.on(c.default.KEY_SESSION_UPDATED,eb,e),eg.on(c.default.MANIFEST_UPDATED,eY,e),eg.on(c.default.STREAM_BUFFERING_COMPLETED,ex,e),eg.on(c.default.TIME_SYNCHRONIZATION_COMPLETED,ev,e),eg.on(c.default.CURRENT_TRACK_CHANGED,eA,e),eg.on(c.default.SETTING_UPDATED_LIVE_DELAY,ek,e),eg.on(c.default.SETTING_UPDATED_LIVE_DELAY_FRAGMENT_COUNT,ek,e)},getActiveStreamInfo:e$,addDVRMetric:eO,hasVideoTrack:ez,hasAudioTrack:eK,getStreamById:eJ,getStreamForTime:eI,getTimeRelativeToStreamId:function(e,t){for(var r=null,n=0,i=0,o=null,u=0;u<H.length;u++){if(i=(r=H[u]).getStartTime(),o=r.getDuration(),Number.isFinite(i)&&(n=i),r.getId()===t)return e-n;Number.isFinite(o)&&(n+=o)}return null},load:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:NaN;ey(),eh=t,A.load(e)},loadWithManifest:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:NaN;(function(){if(!w||!w.hasOwnProperty("setManifest"))throw Error("initialize function has to be called previously")})(),eh=t,w.setManifest(e)},getActiveStreamProcessors:eF,setConfig:function(e){e&&(e.capabilities&&(r=e.capabilities),e.capabilitiesFilter&&(f=e.capabilitiesFilter),e.manifestLoader&&(A=e.manifestLoader),e.manifestModel&&(C=e.manifestModel),e.mediaPlayerModel&&(et=e.mediaPlayerModel),e.customParametersModel&&(er=e.customParametersModel),e.protectionController&&(G=e.protectionController),e.adapter&&(I=e.adapter),e.dashMetrics&&(O=e.dashMetrics),e.errHandler&&(U=e.errHandler),e.timelineConverter&&(q=e.timelineConverter),e.videoModel&&(J=e.videoModel),e.playbackController&&(Z=e.playbackController),e.serviceDescriptionController&&(ee=e.serviceDescriptionController),e.contentSteeringController&&(k=e.contentSteeringController),e.textController&&(Y=e.textController),e.abrController&&(x=e.abrController),e.mediaController&&(j=e.mediaController),e.settings&&(ec=e.settings),e.baseURLController&&(D=e.baseURLController),e.uriFragmentModel&&(L=e.uriFragmentModel),e.segmentBaseController&&(N=e.segmentBaseController))},setProtectionData:function(e){z=e,G&&G.setProtectionData(z)},getIsStreamSwitchInProgress:function(){return W},switchToVideoElement:function(e){V&&(Z.initialize(e$()),eT(e,!1))},getHasMediaOrInitialisationError:function(){return X||Q},getStreams:function(){return H},getActiveStream:function(){return V},getInitialPlayback:function(){return ei},getAutoPlay:function(){return K},reset:e1},t=Object(h.default)(em).getInstance().getLogger(e),P=Object(y.default)(em).getInstance(),R=Object(v.default)(em).getInstance(),F=Object(p.default)(em).getInstance(),B=Object(m.default)(em).getInstance(),e0(),e}w.__dashjs_factory_name="StreamController",t.default=f.default.getSingletonFactory(w)},"./src/streaming/controllers/TimeSyncController.js":function(e,t,r){r.r(t);var n=r("./src/streaming/vo/DashJSError.js"),i=r("./src/streaming/vo/metrics/HTTPRequest.js"),o=r("./src/core/EventBus.js"),u=r("./src/core/events/Events.js"),l=r("./src/core/errors/Errors.js"),c=r("./src/core/FactoryMaker.js"),f=r("./src/core/Debug.js"),d=r("./src/streaming/utils/URLUtils.js");function h(){var e,t,r,c,h,p,m,g,y,v,b,_,T,E,S,w,A=this.context,C=Object(o.default)(A).getInstance(),I=Object(d.default)(A).getInstance();function O(){g=[],y=[],v=null,b=null,T=null,_=NaN,r=!1,c=!1,E=h.get().streaming.utcSynchronization.timeBetweenSyncAttempts}function R(){h.get().streaming.utcSynchronization.enabled&&!r&&!c&&T&&T.value&&T.schemeIdUri&&!isNaN(_)&&!isNaN(h.get().streaming.utcSynchronization.backgroundAttempts)&&(b&&(Date.now()-b)/1e3<30||(g=[],c=!0,function e(t){try{if(t<=0)return void B();var r=Date.now();p[T.schemeIdUri](T.value,function(n){var i=Date.now(),o=n-(i-(i-r)/2);g.push(o),e(t-1)},function(){B()})}catch(e){B()}}(isNaN(h.get().streaming.utcSynchronization.backgroundAttempts)?2:h.get().streaming.utcSynchronization.backgroundAttempts)))}function P(){var e,t,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:NaN,n=isNaN(r);n&&h.get().streaming.utcSynchronization.useManifestDateHeaderTimeSource?isNaN(t=null!==(e=m.getLatestMPDRequestHeaderValueByID("Date"))?new Date(e).getTime():Number.NaN)?F(!0):F(!1,t-Date.now()):F(n,r)}function k(e){var t,r,n,i=Date.parse(e);return isNaN(i)&&(t=Date.UTC(parseInt((n=/^([0-9]{4})-([0-9]{2})-([0-9]{2})T([0-9]{2}):([0-9]{2})(?::([0-9]*)(\.[0-9]*)?)?(?:([+\-])([0-9]{2})([0-9]{2}))?/.exec(e))[1],10),parseInt(n[2],10)-1,parseInt(n[3],10),parseInt(n[4],10),parseInt(n[5],10),n[6]&&(parseInt(n[6],10)||0),n[7]&&1e3*parseFloat(n[7])||0),n[9]&&n[10]&&(r=60*parseInt(n[9],10)+parseInt(n[10],10),t+=("+"===n[8]?-1:1)*r*6e4),i=new Date(t).getTime()),i}function D(e){return Date.parse(e)}function N(e){return Date.parse(e)}function L(e,t,r){r()}function x(e,t,r){var n=k(e);isNaN(n)?r():t(n)}function j(e,t,r,n,o){var u=!1,l=new XMLHttpRequest,c=o?i.HTTPRequest.HEAD:i.HTTPRequest.GET,f=t.match(/\S+/g);if(t=f.shift(),I.isRelative(t)){var d=w.resolve();d&&(t=I.resolve(t,d.url))}l.open(c,t),l.timeout=5e3,l.onload=function(){var t,n;200===l.status&&(t=o?l.getResponseHeader("Date"):l.response,isNaN(n=e(t))||(r(n),u=!0))},l.onloadend=function(){u||(u=!0,f.length?j(e,f.join(" "),r,n,o):n())},l.send()}function M(e,t,r){j(N,e,t,r,!0)}function F(e,i){if(isNaN(_)||isNaN(i)||e||function(e){try{var r,n=U(e),i=isNaN(E)?30:E,o=isNaN(h.get().streaming.utcSynchronization.timeBetweenSyncAttemptsAdjustmentFactor)?2:h.get().streaming.utcSynchronization.timeBetweenSyncAttemptsAdjustmentFactor,u=isNaN(h.get().streaming.utcSynchronization.maximumTimeBetweenSyncAttempts)?600:h.get().streaming.utcSynchronization.maximumTimeBetweenSyncAttempts,l=isNaN(h.get().streaming.utcSynchronization.minimumTimeBetweenSyncAttempts)?2:h.get().streaming.utcSynchronization.minimumTimeBetweenSyncAttempts;n?(r=Math.min(i*o,u),t.debug("Increasing timeBetweenSyncAttempts to ".concat(r))):(r=Math.max(i/o,l),t.debug("Decreasing timeBetweenSyncAttempts to ".concat(r))),E=r}catch(e){}}(i),!e&&!isNaN(i)){v=Date.now(),r=!1;var o=isNaN(_);_=i,o&&R(),t.debug("Completed UTC sync. Setting client - server offset to ".concat(i))}e&&(T=null,r=!1,S.error(new n.default(l.default.TIME_SYNC_FAILED_ERROR_CODE,l.default.TIME_SYNC_FAILED_ERROR_MESSAGE))),C.trigger(u.default.UPDATE_TIME_SYNC_OFFSET,{offset:i}),C.trigger(u.default.TIME_SYNCHRONIZATION_COMPLETED)}function B(){if(g&&0!==g.length){var e=g.reduce(function(e,t){return e+t},0)/g.length;U(e)?t.debug("Completed background UTC sync. Offset is within allowed threshold and is not adjusted."):(t.debug("Completed background UTC sync. Setting client - server offset to ".concat(e)),_=e,C.trigger(u.default.UPDATE_TIME_SYNC_OFFSET,{offset:_})),c=!1,b=Date.now()}}function U(e){try{if(isNaN(_))return!0;var t=h.get().streaming.utcSynchronization.maximumAllowedDrift&&!isNaN(h.get().streaming.utcSynchronization.maximumAllowedDrift)?h.get().streaming.utcSynchronization.maximumAllowedDrift:100;return e>=_-t&&e<=_+t}catch(e){return!0}}return e={initialize:function(){O(),p={"urn:mpeg:dash:utc:http-head:2014":M,"urn:mpeg:dash:utc:http-xsdate:2014":j.bind(null,k),"urn:mpeg:dash:utc:http-iso:2014":j.bind(null,D),"urn:mpeg:dash:utc:direct:2014":x,"urn:mpeg:dash:utc:http-head:2012":M,"urn:mpeg:dash:utc:http-xsdate:2012":j.bind(null,k),"urn:mpeg:dash:utc:http-iso:2012":j.bind(null,D),"urn:mpeg:dash:utc:direct:2012":x,"urn:mpeg:dash:utc:http-ntp:2014":L,"urn:mpeg:dash:utc:ntp:2014":L,"urn:mpeg:dash:utc:sntp:2014":L}},attemptSync:function(e,t){y=e,r||(function(e){try{if(!e||!h.get().streaming.utcSynchronization.enabled)return!1;var t=isNaN(E)?30:E;return!(v&&t&&!isNaN(t))||(Date.now()-v)/1e3>=t}catch(e){return!0}}(t)?(r=!0,function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,r=t||0;if(!y||0===y.length||r>=y.length)P();else{var n=y[r];if(n){if(p.hasOwnProperty(n.schemeIdUri)){var i=(new Date).getTime();p[n.schemeIdUri](n.value,function(e){var t,r=e-((t=(new Date).getTime())-(t-i)/2);T=n,P(r)},function(){e(r+1)})}else e(r+1)}else P()}}()):C.trigger(u.default.TIME_SYNCHRONIZATION_COMPLETED))},setConfig:function(e){e&&(e.dashMetrics&&(m=e.dashMetrics),e.baseURLController&&(w=e.baseURLController),e.errHandler&&(S=e.errHandler),e.settings&&(h=e.settings))},reset:function(){O(),C.off(u.default.ATTEMPT_BACKGROUND_SYNC,R,e)}},t=Object(f.default)(A).getInstance().getLogger(e),C.on(u.default.ATTEMPT_BACKGROUND_SYNC,R,e),e}h.__dashjs_factory_name="TimeSyncController";var p=c.default.getSingletonFactory(h);p.HTTP_TIMEOUT_MS=5e3,c.default.updateSingletonFactory(h.__dashjs_factory_name,p),t.default=p},"./src/streaming/controllers/XlinkController.js":function(e,t,r){r.r(t);var n=r("./src/streaming/XlinkLoader.js"),i=r("./src/core/EventBus.js"),o=r("./src/core/events/Events.js"),u=r("./src/core/FactoryMaker.js"),l=r("./externals/xml2json.js"),c=r("./src/streaming/utils/URLUtils.js"),f=r("./src/dash/constants/DashConstants.js"),d="onLoad";function h(e){e=e||{};var t,r,u,h,p,m,g=this.context,y=Object(i.default)(g).getInstance(),v=Object(c.default)(g).getInstance();function b(e,t,r){var n,i,o={};o.elements=e,o.type=t,o.resolveType=r,0===o.elements.length&&T(o);for(var u=0;u<o.elements.length;u++)n=o.elements[u],i=v.isHTTPURL(n.url)?n.url:n.originalContent.BaseURL+n.url,m.load(i,n,o)}function _(e){var t,r,n="";if(t=e.element,r=e.resolveObject,t.resolvedContent){var i=0;0===t.resolvedContent.indexOf("<?xml")&&(i=t.resolvedContent.indexOf("?>")+2),n=t.resolvedContent.substr(0,i)+"<response>"+t.resolvedContent.substr(i)+"</response>",t.resolvedContent=p.xml_str2json(n)}(function(e){var t;for(t=0;t<e.elements.length;t++)if(!1===e.elements[t].resolved)return!1;return!0})(r)&&T(r)}function T(e){var t,r,n=[];if(function(e){var t,r,n,i,o,l,c=[];for(i=e.elements.length-1;i>=0;i--){if(r=(t=e.elements[i]).type+"_asArray",t.resolvedContent){if(t.resolvedContent)for(o=0;o<t.resolvedContent[r].length;o++)n=t.resolvedContent[r][o],c.push(n)}else delete t.originalContent["xlink:actuate"],delete t.originalContent["xlink:href"],c.push(t.originalContent);for(t.parentElement[r].splice(t.index,1),l=0;l<c.length;l++)t.parentElement[r].splice(t.index+l,0,c[l]);c=[]}e.elements.length>0&&u.run(h)}(e),"onActuate"===e.resolveType&&y.trigger(o.default.XLINK_READY,{manifest:h}),e.resolveType===d)switch(e.type){case f.default.PERIOD:for(t=0;t<h[f.default.PERIOD+"_asArray"].length;t++)(r=h[f.default.PERIOD+"_asArray"][t]).hasOwnProperty(f.default.ADAPTATION_SET+"_asArray")&&(n=n.concat(E(r[f.default.ADAPTATION_SET+"_asArray"],r,f.default.ADAPTATION_SET,d))),r.hasOwnProperty(f.default.EVENT_STREAM+"_asArray")&&(n=n.concat(E(r[f.default.EVENT_STREAM+"_asArray"],r,f.default.EVENT_STREAM,d)));b(n,f.default.ADAPTATION_SET,d);break;case f.default.ADAPTATION_SET:y.trigger(o.default.XLINK_READY,{manifest:h})}}function E(e,t,r,n){var i,o,u=[];for(o=e.length-1;o>=0;o--)(i=e[o]).hasOwnProperty("xlink:href")&&"urn:mpeg:dash:resolve-to-zero:2013"===i["xlink:href"]&&e.splice(o,1);for(o=0;o<e.length;o++)(i=e[o]).hasOwnProperty("xlink:href")&&i.hasOwnProperty("xlink:actuate")&&i["xlink:actuate"]===n&&u.push({url:i["xlink:href"],parentElement:t,type:r,index:o,resolveType:n,originalContent:i,resolvedContent:null,resolved:!1});return u}return t={resolveManifestOnLoad:function(e){p=new l.default({escapeMode:!1,attributePrefix:"",arrayAccessForm:"property",emptyNodeForm:"object",stripWhitespaces:!1,enableToStringFunc:!1,ignoreRoot:!0,matchers:r}),(h=e).Period_asArray?b(E(h.Period_asArray,h,f.default.PERIOD,d),f.default.PERIOD,d):y.trigger(o.default.XLINK_READY,{manifest:h})},setMatchers:function(e){e&&(r=e)},setIron:function(e){e&&(u=e)},reset:function(){y.off(o.default.XLINK_ELEMENT_LOADED,_,t),m&&(m.reset(),m=null)}},y.on(o.default.XLINK_ELEMENT_LOADED,_,t),m=Object(n.default)(g).create({errHandler:e.errHandler,dashMetrics:e.dashMetrics,mediaPlayerModel:e.mediaPlayerModel,requestModifier:e.requestModifier,settings:e.settings}),t}h.__dashjs_factory_name="XlinkController",t.default=u.default.getClassFactory(h)},"./src/streaming/metrics/MetricsReporting.js":function(e,t,r){r.r(t);var n=r("./src/streaming/metrics/utils/DVBErrorsTranslator.js"),i=r("./src/streaming/metrics/MetricsReportingEvents.js"),o=r("./src/streaming/metrics/controllers/MetricsCollectionController.js"),u=r("./src/streaming/metrics/metrics/MetricsHandlerFactory.js"),l=r("./src/streaming/metrics/reporting/ReportingFactory.js");function c(){var e=this.context;return{createMetricsReporting:function(t){return Object(n.default)(e).getInstance({eventBus:t.eventBus,dashMetrics:t.dashMetrics,metricsConstants:t.metricsConstants,events:t.events}).initialise(),Object(o.default)(e).create(t)},getReportingFactory:function(){return Object(l.default)(e).getInstance()},getMetricsHandlerFactory:function(){return Object(u.default)(e).getInstance()}}}c.__dashjs_factory_name="MetricsReporting";var f=dashjs.FactoryMaker.getClassFactory(c);f.events=i.default,dashjs.FactoryMaker.updateClassFactory(c.__dashjs_factory_name,f),t.default=f},"./src/streaming/metrics/MetricsReportingEvents.js":function(e,t,r){function n(e){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function i(e,t){return(i=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function o(e){return(o=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}r.r(t);var u=new(function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&i(e,t)}(u,e);var t,r=(t=function(){if("undefined"==typeof Reflect||!Reflect.construct||Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}(),function(){var e,r=o(u);if(t){var i=o(this).constructor;e=Reflect.construct(r,arguments,i)}else e=r.apply(this,arguments);return function(e,t){if(t&&("object"===n(t)||"function"==typeof t))return t;if(void 0!==t)throw TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,e)});function u(){var e;return function(e,t){if(!(e instanceof t))throw TypeError("Cannot call a class as a function")}(this,u),(e=r.call(this)).METRICS_INITIALISATION_COMPLETE="internal_metricsReportingInitialized",e.BECAME_REPORTING_PLAYER="internal_becameReportingPlayer",e.CMCD_DATA_GENERATED="cmcdDataGenerated",e}return Object.defineProperty(u,"prototype",{writable:!1}),u}(r("./src/core/events/EventsBase.js").default));t.default=u},"./src/streaming/metrics/controllers/MetricsCollectionController.js":function(e,t,r){r.r(t);var n=r("./src/streaming/metrics/controllers/MetricsController.js"),i=r("./src/streaming/metrics/utils/ManifestParsing.js"),o=r("./src/streaming/metrics/MetricsReportingEvents.js");function u(e){e=e||{};var t,r={},u=this.context,l=e.eventBus,c=e.events;function f(t){if(!t.error){var c=Object.keys(r);Object(i.default)(u).getInstance({adapter:e.adapter,constants:e.constants}).getMetrics(t.manifest).forEach(function(t){var i=JSON.stringify(t);if(r.hasOwnProperty(i))c.splice(i,1);else try{var o=Object(n.default)(u).create(e);o.initialize(t),r[i]=o}catch(e){}}),c.forEach(function(e){r[e].reset(),delete r[e]}),l.trigger(o.default.METRICS_INITIALISATION_COMPLETE)}}function d(){Object.keys(r).forEach(function(e){r[e].reset()}),r={}}return t={reset:function(){l.off(c.MANIFEST_UPDATED,f,t),l.off(c.STREAM_TEARDOWN_COMPLETE,d,t)}},l.on(c.MANIFEST_UPDATED,f,t),l.on(c.STREAM_TEARDOWN_COMPLETE,d,t),t}u.__dashjs_factory_name="MetricsCollectionController",t.default=dashjs.FactoryMaker.getClassFactory(u)},"./src/streaming/metrics/controllers/MetricsController.js":function(e,t,r){r.r(t);var n=r("./src/streaming/metrics/controllers/RangeController.js"),i=r("./src/streaming/metrics/controllers/ReportingController.js"),o=r("./src/streaming/metrics/controllers/MetricsHandlersController.js");function u(e){e=e||{};var t,r,u,l=this.context;function c(){t&&t.reset(),r&&r.reset(),u&&u.reset()}return{initialize:function(f){try{(u=Object(n.default)(l).create({mediaElement:e.mediaElement})).initialize(f.Range),(r=Object(i.default)(l).create({debug:e.debug,metricsConstants:e.metricsConstants,mediaPlayerModel:e.mediaPlayerModel})).initialize(f.Reporting,u),(t=Object(o.default)(l).create({debug:e.debug,eventBus:e.eventBus,metricsConstants:e.metricsConstants,events:e.events})).initialize(f.metrics,r)}catch(e){throw c(),e}},reset:c}}u.__dashjs_factory_name="MetricsController",t.default=dashjs.FactoryMaker.getClassFactory(u)},"./src/streaming/metrics/controllers/MetricsHandlersController.js":function(e,t,r){r.r(t);var n=r("./src/streaming/metrics/metrics/MetricsHandlerFactory.js");function i(e){e=e||{};var t,r=[],i=this.context,o=e.eventBus,u=e.events,l=Object(n.default)(i).getInstance({debug:e.debug,eventBus:e.eventBus,metricsConstants:e.metricsConstants});function c(e){r.forEach(function(t){t.handleNewMetric(e.metric,e.value,e.mediaType)})}return t={initialize:function(e,n){e.split(",").forEach(function(e,t,i){var o;if(-1!==e.indexOf("(")&&-1===e.indexOf(")")){var u=i[t+1];u&&-1===u.indexOf("(")&&-1!==u.indexOf(")")&&(e+=","+u,delete i[t+1])}(o=l.create(e,n))&&r.push(o)}),o.on(u.METRIC_ADDED,c,t),o.on(u.METRIC_UPDATED,c,t)},reset:function(){o.off(u.METRIC_ADDED,c,t),o.off(u.METRIC_UPDATED,c,t),r.forEach(function(e){return e.reset()}),r=[]}}}i.__dashjs_factory_name="MetricsHandlersController",t.default=dashjs.FactoryMaker.getClassFactory(i)},"./src/streaming/metrics/controllers/RangeController.js":function(e,t,r){r.r(t);var n=r("./src/streaming/utils/CustomTimeRanges.js");function i(e){e=e||{};var t,r=!1,i=this.context,o=e.mediaElement;return t=Object(n.default)(i).create(),{initialize:function(e){e&&e.length&&(e.forEach(function(e){var r=e.starttime,n=r+e.duration;t.add(r,n)}),r=!!e[0]._useWallClockTime)},reset:function(){t.clear()},isEnabled:function(){var e,n=t.length;if(!n)return!0;e=r?(new Date).getTime()/1e3:o.currentTime;for(var i=0;i<n;i+=1){var u=t.start(i),l=t.end(i);if(u<=e&&e<l)return!0}return!1}}}i.__dashjs_factory_name="RangeController",t.default=dashjs.FactoryMaker.getClassFactory(i)},"./src/streaming/metrics/controllers/ReportingController.js":function(e,t,r){r.r(t);var n=r("./src/streaming/metrics/reporting/ReportingFactory.js");function i(e){var t=[],r=Object(n.default)(this.context).getInstance(e);return{initialize:function(e,n){e.some(function(e){var i=r.create(e,n);if(i)return t.push(i),!0})},reset:function(){t.forEach(function(e){return e.reset()}),t=[]},report:function(e,r){t.forEach(function(t){return t.report(e,r)})}}}i.__dashjs_factory_name="ReportingController",t.default=dashjs.FactoryMaker.getClassFactory(i)},"./src/streaming/metrics/metrics/MetricsHandlerFactory.js":function(e,t,r){r.r(t);var n=r("./src/streaming/metrics/metrics/handlers/BufferLevelHandler.js"),i=r("./src/streaming/metrics/metrics/handlers/DVBErrorsHandler.js"),o=r("./src/streaming/metrics/metrics/handlers/HttpListHandler.js"),u=r("./src/streaming/metrics/metrics/handlers/GenericMetricHandler.js");function l(e){var t,r=(e=e||{}).debug?e.debug.getLogger(t):{},l=/([a-zA-Z]*)(\(([0-9]*)(\,\s*([a-zA-Z]*))?\))?/,c=this.context,f={BufferLevel:n.default,DVBErrors:i.default,HttpList:o.default,PlayList:u.default,RepSwitchList:u.default,TcpList:u.default};return{create:function(t,n){var i,o=t.match(l);if(o){try{(i=f[o[1]](c).create({eventBus:e.eventBus,metricsConstants:e.metricsConstants})).initialize(o[1],n,o[3],o[5])}catch(e){i=null,r.error("MetricsHandlerFactory: Could not create handler for type ".concat(o[1]," with args ").concat(o[3],", ").concat(o[5]," (").concat(e.message,")"))}return i}},register:function(e,t){f[e]=t},unregister:function(e){delete f[e]}}}l.__dashjs_factory_name="MetricsHandlerFactory",t.default=dashjs.FactoryMaker.getSingletonFactory(l)},"./src/streaming/metrics/metrics/handlers/BufferLevelHandler.js":function(e,t,r){r.r(t);var n=r("./src/streaming/metrics/utils/HandlerHelpers.js");function i(e){e=e||{};var t,r,i,o,u,l=this.context,c=Object(n.default)(l).getInstance(),f=[],d=e.metricsConstants;function h(){var e=function(){try{return Object.keys(f).map(function(e){return f[e]}).reduce(function(e,t){return e.level<t.level?e:t})}catch(e){return}}();e&&u!==e.t&&(u=e.t,t.report(i,e))}return{initialize:function(e,n,u){n&&(r=c.validateN(u),t=n,i=c.reconstructFullMetricName(e,u),o=setInterval(h,r))},reset:function(){clearInterval(o),o=null,r=0,t=null,u=null},handleNewMetric:function(e,t,r){e===d.BUFFER_LEVEL&&(f[r]=t)}}}i.__dashjs_factory_name="BufferLevelHandler",t.default=dashjs.FactoryMaker.getClassFactory(i)},"./src/streaming/metrics/metrics/handlers/DVBErrorsHandler.js":function(e,t,r){r.r(t);var n=r("./src/streaming/metrics/MetricsReportingEvents.js");t.default=dashjs.FactoryMaker.getClassFactory(function(e){var t,r=(e=e||{}).eventBus,i=e.metricsConstants;function o(){r.off(n.default.METRICS_INITIALISATION_COMPLETE,o,this),r.trigger(n.default.BECAME_REPORTING_PLAYER)}return{initialize:function(e,i){i&&(t=i,r.on(n.default.METRICS_INITIALISATION_COMPLETE,o,this))},reset:function(){t=null},handleNewMetric:function(e,r){e===i.DVB_ERRORS&&t&&t.report(e,r)}}})},"./src/streaming/metrics/metrics/handlers/GenericMetricHandler.js":function(e,t,r){function n(){var e,t;return{initialize:function(r,n){e=r,t=n},reset:function(){t=null,e=void 0},handleNewMetric:function(r,n){r===e&&t&&t.report(e,n)}}}r.r(t),n.__dashjs_factory_name="GenericMetricHandler",t.default=dashjs.FactoryMaker.getClassFactory(n)},"./src/streaming/metrics/metrics/handlers/HttpListHandler.js":function(e,t,r){r.r(t);var n=r("./src/streaming/metrics/utils/HandlerHelpers.js");function i(e){e=e||{};var t,r,i,o,u,l=[],c=Object(n.default)(this.context).getInstance(),f=e.metricsConstants;function d(){var e=l;e.length&&t&&t.report(o,e),l=[]}return{initialize:function(e,n,l,f){n&&(r=c.validateN(l),t=n,f&&f.length&&(i=f),o=c.reconstructFullMetricName(e,l,f),u=setInterval(d,r))},reset:function(){clearInterval(u),u=null,r=null,i=null,l=[],t=null},handleNewMetric:function(e,t){e===f.HTTP_REQUEST&&(i&&i!==t.type||l.push(t))}}}i.__dashjs_factory_name="HttpListHandler",t.default=dashjs.FactoryMaker.getClassFactory(i)},"./src/streaming/metrics/reporting/ReportingFactory.js":function(e,t,r){r.r(t);var n=r("./src/streaming/metrics/reporting/reporters/DVBReporting.js");function i(e){e=e||{};var t,r={"urn:dvb:dash:reporting:2014":n.default},i=this.context,o=e.debug?e.debug.getLogger(t):{},u=e.metricsConstants,l=e.mediaPlayerModel||{};return{create:function(e,t){var n;try{(n=r[e.schemeIdUri](i).create({metricsConstants:u,mediaPlayerModel:l})).initialize(e,t)}catch(t){n=null,o.error("ReportingFactory: could not create Reporting with schemeIdUri ".concat(e.schemeIdUri," (").concat(t.message,")"))}return n},register:function(e,t){r[e]=t},unregister:function(e){delete r[e]}}}i.__dashjs_factory_name="ReportingFactory",t.default=dashjs.FactoryMaker.getSingletonFactory(i)},"./src/streaming/metrics/reporting/reporters/DVBReporting.js":function(e,t,r){r.r(t);var n=r("./src/streaming/metrics/utils/MetricSerialiser.js"),i=r("./src/streaming/metrics/utils/RNG.js"),o=r("./src/streaming/models/CustomParametersModel.js");function u(e){e=e||{};var t,r,u,l,c,f,d,h=this.context,p=[],m=e.metricsConstants;function g(){l=!1,c=!1,f=null,d=null}return t=Object(n.default)(h).getInstance(),u=Object(i.default)(h).getInstance(),r=Object(o.default)(h).getInstance(),g(),{report:function(e,n){Array.isArray(n)||(n=[n]),c&&d.isEnabled()&&n.forEach(function(n){var i=t.serialise(n);e!==m.DVB_ERRORS&&(i="metricname=".concat(e,"&").concat(i)),function(e,t,n){var i=new XMLHttpRequest;i.withCredentials=r.getXHRWithCredentialsForType(m.HTTP_REQUEST_DVB_REPORTING_TYPE);var o=function(){var e=p.indexOf(i);-1!==e&&(p.splice(e,1),!(i.status>=200&&i.status<300)&&n&&n())};p.push(i);try{i.open("GET",e),i.onloadend=o,i.onerror=o,i.send()}catch(e){i.onerror()}}(i="".concat(f,"?").concat(i),0,function(){c=!1})})},initialize:function(e,t){var r;if(d=t,!(f=e.dvb_reportingUrl))throw Error("required parameter missing (dvb:reportingUrl)");l||((r=e.dvb_probability)&&(1e3===r||r/1e3>=u.random())&&(c=!0),l=!0)},reset:function(){g()}}}u.__dashjs_factory_name="DVBReporting",t.default=dashjs.FactoryMaker.getClassFactory(u)},"./src/streaming/metrics/utils/DVBErrorsTranslator.js":function(e,t,r){r.r(t);var n=r("./src/streaming/metrics/vo/DVBErrors.js"),i=r("./src/streaming/metrics/MetricsReportingEvents.js");function o(e){var t,r,o=(e=e||{}).eventBus,u=e.dashMetrics,l=e.metricsConstants,c=e.events;function f(e){var t=new n.default;if(r){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i]);t.mpdurl||(t.mpdurl=r.originalUrl||r.url),t.terror||(t.terror=new Date),u.addDVBErrors(t)}}function d(e){e.error||(r=e.manifest)}function h(e){f({errorcode:n.default.BASE_URL_CHANGED,servicelocation:e.entry})}function p(){f({errorcode:n.default.BECAME_REPORTER})}function m(e){var t;e.metric===l.HTTP_REQUEST&&(0===(t=e.value).responsecode||null==t.responsecode||t.responsecode>=400||t.responsecode<100||t.responsecode>=600)&&f({errorcode:t.responsecode||n.default.CONNECTION_ERROR,url:t.url,terror:t.tresponse,servicelocation:t._serviceLocation})}function g(e){var t;switch(e.error?e.error.code:0){case MediaError.MEDIA_ERR_NETWORK:t=n.default.CONNECTION_ERROR;break;case MediaError.MEDIA_ERR_DECODE:t=n.default.CORRUPT_MEDIA_OTHER;break;default:return}f({errorcode:t})}return t={initialise:function(){o.on(c.MANIFEST_UPDATED,d,t),o.on(c.SERVICE_LOCATION_BLACKLIST_CHANGED,h,t),o.on(c.METRIC_ADDED,m,t),o.on(c.METRIC_UPDATED,m,t),o.on(c.PLAYBACK_ERROR,g,t),o.on(i.default.BECAME_REPORTING_PLAYER,p,t)},reset:function(){o.off(c.MANIFEST_UPDATED,d,t),o.off(c.SERVICE_LOCATION_BLACKLIST_CHANGED,h,t),o.off(c.METRIC_ADDED,m,t),o.off(c.METRIC_UPDATED,m,t),o.off(c.PLAYBACK_ERROR,g,t),o.off(i.default.BECAME_REPORTING_PLAYER,p,t)}}}o.__dashjs_factory_name="DVBErrorsTranslator",t.default=dashjs.FactoryMaker.getSingletonFactory(o)},"./src/streaming/metrics/utils/HandlerHelpers.js":function(e,t,r){function n(){return{reconstructFullMetricName:function(e,t,r){var n=e;return t&&(n+="("+t,r&&r.length&&(n+=","+r),n+=")"),n},validateN:function(e){if(!e)throw Error("missing n");if(isNaN(e))throw Error("n is NaN");if(e<0)throw Error("n must be positive");return e}}}r.r(t),n.__dashjs_factory_name="HandlerHelpers",t.default=dashjs.FactoryMaker.getSingletonFactory(n)},"./src/streaming/metrics/utils/ManifestParsing.js":function(e,t,r){r.r(t);var n=r("./src/streaming/metrics/vo/Metrics.js"),i=r("./src/streaming/metrics/vo/Range.js"),o=r("./src/streaming/metrics/vo/Reporting.js");function u(e){var t=(e=e||{}).adapter,r=e.constants;return{getMetrics:function(e){var u=[];return e&&e.Metrics_asArray&&e.Metrics_asArray.forEach(function(l){var c=new n.default,f=t.getIsDynamic(e);l.hasOwnProperty("metrics")&&(c.metrics=l.metrics,l.Range_asArray&&l.Range_asArray.forEach(function(n){var o,u,l,d=new i.default;d.starttime=(l=0,f?l=t.getAvailabilityStartTime(e)/1e3:(o=t.getRegularPeriods(e)).length&&(l=o[0].start),u=l,n&&n.hasOwnProperty(r.START_TIME)&&(u+=n.starttime),u),n.hasOwnProperty("duration")?d.duration=n.duration:d.duration=t.getDuration(e),d._useWallClockTime=f,c.Range.push(d)}),l.Reporting_asArray&&(l.Reporting_asArray.forEach(function(e){var t=new o.default;e.hasOwnProperty(r.SCHEME_ID_URI)&&(t.schemeIdUri=e.schemeIdUri,e.hasOwnProperty("value")&&(t.value=e.value),e.hasOwnProperty(r.DVB_REPORTING_URL)&&(t.dvb_reportingUrl=e[r.DVB_REPORTING_URL]),e.hasOwnProperty(r.DVB_PROBABILITY)&&(t.dvb_probability=e[r.DVB_PROBABILITY]),c.Reporting.push(t))}),u.push(c)))}),u}}}u.__dashjs_factory_name="ManifestParsing",t.default=dashjs.FactoryMaker.getSingletonFactory(u)},"./src/streaming/metrics/utils/MetricSerialiser.js":function(e,t,r){function n(){return{serialise:function e(t){var r,n,i=[],o=[];for(r in t)if(t.hasOwnProperty(r)&&0!==r.indexOf("_")){if(null==(n=t[r])&&(n=""),Array.isArray(n)){if(!n.length)continue;o=[],n.forEach(function(t){var r="Object"!==Object.prototype.toString.call(t).slice(8,-1);o.push(r?t:e(t))}),n=o.map(encodeURIComponent).join(",")}else"string"==typeof n?n=encodeURIComponent(n):n instanceof Date?n=n.toISOString():"number"==typeof n&&(n=Math.round(n));i.push(r+"="+n)}return i.join("&")}}}r.r(t),n.__dashjs_factory_name="MetricSerialiser",t.default=dashjs.FactoryMaker.getSingletonFactory(n)},"./src/streaming/metrics/utils/RNG.js":function(e,t,r){function n(){var e,t,r=window.crypto||window.msCrypto,n=Uint32Array,i=Math.pow(2,8*n.BYTES_PER_ELEMENT)-1;function o(){r&&(e||(e=new n(10)),r.getRandomValues(e),t=0)}return o(),{random:function(n,u){var l;return n||(n=0),u||(u=1),r?(t===e.length&&o(),l=e[t]/i,t+=1):l=Math.random(),l*(u-n)+n}}}r.r(t),n.__dashjs_factory_name="RNG",t.default=dashjs.FactoryMaker.getSingletonFactory(n)},"./src/streaming/metrics/vo/DVBErrors.js":function(e,t,r){function n(e){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function i(e,t){for(var r,i=0;i<t.length;i++){var o=t[i];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,(r=function(e,t){if("object"!==n(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var i=r.call(e,"string");if("object"!==n(i))return i;throw TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(o.key),"symbol"===n(r)?r:String(r)),o)}}r.r(t);var o,u,l,c=(o=function e(){(function(e,t){if(!(e instanceof t))throw TypeError("Cannot call a class as a function")})(this,e),this.mpdurl=null,this.errorcode=null,this.terror=null,this.url=null,this.ipaddress=null,this.servicelocation=null},u&&i(o.prototype,u),l&&i(o,l),Object.defineProperty(o,"prototype",{writable:!1}),o);c.SSL_CONNECTION_FAILED_PREFIX="SSL",c.DNS_RESOLUTION_FAILED="C00",c.HOST_UNREACHABLE="C01",c.CONNECTION_REFUSED="C02",c.CONNECTION_ERROR="C03",c.CORRUPT_MEDIA_ISOBMFF="M00",c.CORRUPT_MEDIA_OTHER="M01",c.BASE_URL_CHANGED="F00",c.BECAME_REPORTER="S00",t.default=c},"./src/streaming/metrics/vo/Metrics.js":function(e,t,r){function n(e){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function i(e,t){for(var r,i=0;i<t.length;i++){var o=t[i];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,(r=function(e,t){if("object"!==n(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var i=r.call(e,"string");if("object"!==n(i))return i;throw TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(o.key),"symbol"===n(r)?r:String(r)),o)}}r.r(t);var o,u,l,c=(o=function e(){(function(e,t){if(!(e instanceof t))throw TypeError("Cannot call a class as a function")})(this,e),this.metrics="",this.Range=[],this.Reporting=[]},u&&i(o.prototype,u),l&&i(o,l),Object.defineProperty(o,"prototype",{writable:!1}),o);t.default=c},"./src/streaming/metrics/vo/Range.js":function(e,t,r){function n(e){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function i(e,t){for(var r,i=0;i<t.length;i++){var o=t[i];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,(r=function(e,t){if("object"!==n(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var i=r.call(e,"string");if("object"!==n(i))return i;throw TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(o.key),"symbol"===n(r)?r:String(r)),o)}}r.r(t);var o,u,l,c=(o=function e(){(function(e,t){if(!(e instanceof t))throw TypeError("Cannot call a class as a function")})(this,e),this.starttime=0,this.duration=1/0,this._useWallClockTime=!1},u&&i(o.prototype,u),l&&i(o,l),Object.defineProperty(o,"prototype",{writable:!1}),o);t.default=c},"./src/streaming/metrics/vo/Reporting.js":function(e,t,r){function n(e){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function i(e,t){for(var r,i=0;i<t.length;i++){var o=t[i];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,(r=function(e,t){if("object"!==n(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var i=r.call(e,"string");if("object"!==n(i))return i;throw TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(o.key),"symbol"===n(r)?r:String(r)),o)}}r.r(t);var o,u,l,c=(o=function e(){(function(e,t){if(!(e instanceof t))throw TypeError("Cannot call a class as a function")})(this,e),this.schemeIdUri="",this.value="",this.dvb_reportingUrl="",this.dvb_probability=1e3},u&&i(o.prototype,u),l&&i(o,l),Object.defineProperty(o,"prototype",{writable:!1}),o);t.default=c},"./src/streaming/models/BaseURLTreeModel.js":function(e,t,r){r.r(t);var n,i,o,u=r("./src/streaming/utils/ObjectUtils.js"),l=r("./src/core/FactoryMaker.js");function c(e){return(c="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function f(e,t){for(var r,n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,(r=function(e,t){if("object"!==c(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,"string");if("object"!==c(n))return n;throw TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(i.key),"symbol"===c(r)?r:String(r)),i)}}var d=NaN,h=(n=function e(t,r){(function(e,t){if(!(e instanceof t))throw TypeError("Cannot call a class as a function")})(this,e),this.data={baseUrls:t||null,selectedIdx:r||d},this.children=[]},i&&f(n.prototype,i),o&&f(n,o),Object.defineProperty(n,"prototype",{writable:!1}),n);function p(){var e,t,r=this.context,n=Object(u.default)(r).getInstance();function i(e,r,i){var o=t.getBaseURLsFromElement(i);e[r]?n.areEqual(o,e[r].data.baseUrls)||(e[r].data.baseUrls=o,e[r].data.selectedIdx=d):e[r]=new h(o)}function o(){e=new h}return o(),{reset:o,update:function(r){var o;(function(){if(!t||!t.hasOwnProperty("getBaseURLsFromElement")||!t.hasOwnProperty("getRepresentationSortFunction"))throw Error("setConfig function has to be called previously")})(),o=t.getBaseURLsFromElement(r),n.areEqual(o,e.data.baseUrls)||(e.data.baseUrls=o,e.data.selectedIdx=d),r&&r.Period_asArray&&r.Period_asArray.forEach(function(r,n){i(e.children,n,r),r.AdaptationSet_asArray&&r.AdaptationSet_asArray.forEach(function(r,o){i(e.children[n].children,o,r),r.Representation_asArray&&r.Representation_asArray.sort(t.getRepresentationSortFunction()).forEach(function(t,r){i(e.children[n].children[o].children,r,t)})})})},getForPath:function(t){var r=e,n=[r.data];return t&&t.forEach(function(e){(r=r.children[e])&&n.push(r.data)}),n.filter(function(e){return e.baseUrls.length})},invalidateSelectedIndexes:function(t){(function t(r,n){var i=n||e;r(i.data),i.children&&i.children.forEach(function(e){return t(r,e)})})(function(e){isNaN(e.selectedIdx)||t===e.baseUrls[e.selectedIdx].serviceLocation&&(e.selectedIdx=d)})},setConfig:function(e){e.adapter&&(t=e.adapter)}}}p.__dashjs_factory_name="BaseURLTreeModel",t.default=l.default.getClassFactory(p)},"./src/streaming/models/CmcdModel.js":function(e,t,r){r.r(t);var n=r("./src/core/EventBus.js"),i=r("./src/streaming/MediaPlayerEvents.js"),o=r("./src/streaming/metrics/MetricsReportingEvents.js"),u=r("./src/core/FactoryMaker.js"),l=r("./src/core/Settings.js"),c=r("./src/streaming/constants/Constants.js"),f=r("./src/streaming/vo/metrics/HTTPRequest.js"),d=r("./src/dash/models/DashManifestModel.js"),h=r("./src/core/Utils.js");function p(e,t){var r="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!r){if(Array.isArray(e)||(r=function(e,t){if(e){if("string"==typeof e)return m(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?m(e,t):void 0}}(e))||t&&e&&"number"==typeof e.length){r&&(e=r);var n=0,i=function(){};return{s:i,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:i}}throw TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,u=!0,l=!1;return{s:function(){r=r.call(e)},n:function(){var e=r.next();return u=e.done,e},e:function(e){l=!0,o=e},f:function(){try{u||null==r.return||r.return()}finally{if(l)throw o}}}}function m(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}function g(){var e,t,r,u,m,g,y,v,b,_,T=this.context,E=Object(n.default)(T).getInstance(),S=Object(l.default)(T).getInstance();function w(){r={pr:1,nor:null,st:null,sf:null,sid:"".concat(h.default.generateUuid()),cid:null},b={},v={},_={},C()}function A(){C()}function C(){if(g){var e=g.getStreamController();if(e&&"function"==typeof e.getActiveStream){var t=e.getActiveStream();t&&(y=t.getProcessors())}}}function I(e,t){var r,n={},i=p(t);try{for(i.s();!(r=i.n()).done;){var o=r.value;e[o]&&(n[o]=e[o])}}catch(e){i.e(e)}finally{i.f()}return n}function O(e){var t=S.get().streaming.cmcd.enabledKeys;return e.filter(function(e){return t.includes(e)})}function R(e){var t,n,i,o,l,d,T,E,w,A,C,I,O,R,D,N,L,x,j,M,F,B,U,q;try{return e.type===f.HTTPRequest.MPD_TYPE?((n=P()).ot="m",n):e.type===f.HTTPRequest.MEDIA_SEGMENT_TYPE?(t=e.mediaType,_.hasOwnProperty(t)||(_[t]=!1),v.hasOwnProperty(t)||(v[t]=!1),b.hasOwnProperty(t)||(b[t]=!1),o=P(),l=function(e){try{var t=e.quality,r=e.mediaInfo.bitrateList;return parseInt(r[t].bandwidth/1e3)}catch(e){return null}}(e),d=function(e){try{return isNaN(e.duration)?null:Math.round(1e3*e.duration)}catch(e){return null}}(e),T=function(e){try{return 100*parseInt(u.getThroughputHistory().getSafeAverageThroughput(e)/100)}catch(e){return null}}(e.mediaType),E=function(e){try{var t=r.pr,n=m.getCurrentBufferLevel(e);return isNaN(t)||isNaN(n)?null:100*parseInt(n/t*10)}catch(e){return null}}(e.mediaType),w=k(e.mediaType),A=function(e){try{var t=u.getTopBitrateInfoFor(e);return Math.round(t.bitrate/1e3)}catch(e){return null}}(e.mediaType),C=r.pr,I=function(e){if(y&&0!==y.length){var t,r=p(y);try{for(r.s();!(t=r.n()).done;){var n=t.value;if(n.getType()===e)return n.probeNextRequest()}}catch(e){r.e(e)}finally{r.f()}}}(e.mediaType),e.mediaType===c.default.VIDEO&&(i="v"),e.mediaType===c.default.AUDIO&&(i="a"),e.mediaType===c.default.TEXT&&(i="application/mp4"===e.mediaInfo.mimeType?"tt":"c"),(O=S.get().streaming.cmcd.rtp)||((R=g.getPlaybackRate())||(R=1),D=e.quality,N=e.mediaType,L=e.mediaInfo,x=e.duration,j=k(N),0===j&&(j=500),M=L.bitrateList[D].bandwidth*x/1e3/(j/R/1e3),F=S.get().streaming.cmcd.rtpSafetyFactor&&!isNaN(S.get().streaming.cmcd.rtpSafetyFactor)?S.get().streaming.cmcd.rtpSafetyFactor:5,O=100*(parseInt(M*F/100)+1)),o.rtp=O,I&&(e.url!==I.url?o.nor=encodeURIComponent(h.default.getRelativeUrl(e.url,I.url)):I.range&&(o.nrr=I.range)),l&&(o.br=l),i&&(o.ot=i),isNaN(d)||(o.d=d),isNaN(T)||(o.mtp=T),isNaN(E)||(o.dl=E),isNaN(w)||(o.bl=w),isNaN(A)||(o.tb=A),isNaN(C)||1===C||(o.pr=C),b[e.mediaType]&&(o.bs=!0,b[e.mediaType]=!1),!v[e.mediaType]&&_[e.mediaType]||(o.su=!0,v[e.mediaType]=!1,_[e.mediaType]=!0),o):e.type===f.HTTPRequest.INIT_SEGMENT_TYPE?((B=P()).ot="i",B.su=!0,B):e.type===f.HTTPRequest.OTHER_TYPE||e.type===f.HTTPRequest.XLINK_EXPANSION_TYPE?((U=P()).ot="o",U):e.type===f.HTTPRequest.LICENSE?((q=P()).ot="k",q):null}catch(e){return null}}function P(){var e={},t=S.get().streaming.cmcd.cid?S.get().streaming.cmcd.cid:r.cid;return e.v=1,e.sid=S.get().streaming.cmcd.sid?S.get().streaming.cmcd.sid:r.sid,e.sid="".concat(e.sid),t&&(e.cid="".concat(t)),isNaN(r.pr)||1===r.pr||null===r.pr||(e.pr=r.pr),r.st&&(e.st=r.st),r.sf&&(e.sf=r.sf),e}function k(e){try{var t=m.getCurrentBufferLevel(e);return isNaN(t)?null:100*parseInt(10*t)}catch(e){return null}}function D(e){try{r.pr=e.playbackRate}catch(e){}}function N(t){try{var n=e.getIsDynamic(t.data)?"l":"v",i=t.protocol&&"MSS"===t.protocol?"s":"d";r.st="".concat(n),r.sf="".concat(i)}catch(e){}}function L(e){try{e.state&&e.mediaType&&e.state===i.default.BUFFER_EMPTY&&(b[e.mediaType]||(b[e.mediaType]=!0),v[e.mediaType]||(v[e.mediaType]=!0))}catch(e){}}function x(){for(var e in b)b.hasOwnProperty(e)&&(b[e]=!0);for(var t in v)v.hasOwnProperty(t)&&(v[t]=!0)}function j(e){try{if(!e)return null;var t=Object.keys(e).sort(function(e,t){return e.localeCompare(t)}),r=t.length,n=t.reduce(function(t,n,i){return"v"===n&&1===e[n]||("string"==typeof e[n]&&"ot"!==n&&"sf"!==n&&"st"!==n?t+="".concat(n,"=").concat(JSON.stringify(e[n])):t+="".concat(n,"=").concat(e[n]),i<r-1&&(t+=",")),t},"");return(n=n.replace(/=true/g,"")).replace(/,\s*$/,"")}catch(e){return null}}return t={getQueryParameter:function(e){try{if(S.get().streaming.cmcd&&S.get().streaming.cmcd.enabled){var t=R(e),r=function(e){try{var t=S.get().streaming.cmcd.enabledKeys;return Object.keys(e).filter(function(e){return t.includes(e)}).reduce(function(t,r){return t[r]=e[r],t},{})}catch(t){return e}}(t),n=j(r);return E.trigger(o.default.CMCD_DATA_GENERATED,{url:e.url,mediaType:e.mediaType,cmcdData:t,cmcdString:n}),{key:"CMCD",value:n}}return null}catch(e){return null}},getHeaderParameters:function(e){try{if(S.get().streaming.cmcd&&S.get().streaming.cmcd.enabled){var t=R(e),r=I(t,O(["br","d","ot","tb"])),n=I(t,O(["bl","dl","mtp","nor","nrr","su"])),i=I(t,O(["bs","rtp"])),u=I(t,O(["cid","pr","sf","sid","st","v"])),l={"CMCD-Object":j(r),"CMCD-Request":j(n),"CMCD-Status":j(i),"CMCD-Session":j(u)};return E.trigger(o.default.CMCD_DATA_GENERATED,{url:e.url,mediaType:e.mediaType,cmcdData:t,headers:l}),l}return null}catch(e){return null}},setConfig:function(e){e&&(e.abrController&&(u=e.abrController),e.dashMetrics&&(m=e.dashMetrics),e.playbackController&&(g=e.playbackController))},reset:function(){E.off(i.default.PLAYBACK_RATE_CHANGED,D,this),E.off(i.default.MANIFEST_LOADED,N,this),E.off(i.default.BUFFER_LEVEL_STATE_CHANGED,L,t),E.off(i.default.PLAYBACK_SEEKED,x,t),w()},initialize:function(){E.on(i.default.PLAYBACK_RATE_CHANGED,D,t),E.on(i.default.MANIFEST_LOADED,N,t),E.on(i.default.BUFFER_LEVEL_STATE_CHANGED,L,t),E.on(i.default.PLAYBACK_SEEKED,x,t),E.on(i.default.PERIOD_SWITCH_COMPLETED,A,t)}},e=Object(d.default)(T).getInstance(),w(),t}g.__dashjs_factory_name="CmcdModel",t.default=u.default.getSingletonFactory(g)},"./src/streaming/models/CustomParametersModel.js":function(e,t,r){r.r(t);var n=r("./src/dash/vo/UTCTiming.js"),i=r("./src/core/FactoryMaker.js"),o=r("./src/core/Settings.js"),u=r("./src/streaming/utils/SupervisorTools.js"),l=r("./src/streaming/rules/abr/ABRRulesCollection.js"),c=r("./src/streaming/constants/Constants.js");function f(){var e,t,r,i,f,d,h,p=this.context,m=Object(o.default)(p).getInstance();function g(){r=[],i=[],f=[],h=[],d=null,e=[]}function y(e,t){var r=-1;e.some(function(e,n){if(e===t)return r=n,!0}),r<0||e.splice(r,1)}function v(e){var t;for(t=0;t<h.length;t++)if(h[t].rulename===e)return t;return -1}function b(t,r){_(t,r);var i=new n.default;i.schemeIdUri=t,i.value=r,e.push(i)}function _(t,r){Object(u.checkParameterType)(t,"string"),Object(u.checkParameterType)(r,"string"),e.forEach(function(n,i){n.schemeIdUri===t&&n.value===r&&e.splice(i,1)})}return t={default:!1},g(),{getCustomInitialTrackSelectionFunction:function(){return d},setCustomInitialTrackSelectionFunction:function(e){d=e},resetCustomInitialTrackSelectionFunction:function(){d=null},getLicenseResponseFilters:function(){return i},getLicenseRequestFilters:function(){return r},getCustomCapabilitiesFilters:function(){return f},registerCustomCapabilitiesFilter:function(e){f.push(e)},registerLicenseResponseFilter:function(e){i.push(e)},registerLicenseRequestFilter:function(e){r.push(e)},unregisterCustomCapabilitiesFilter:function(e){y(f,e)},unregisterLicenseResponseFilter:function(e){y(i,e)},unregisterLicenseRequestFilter:function(e){y(r,e)},addAbrCustomRule:function(e,t,r){if("string"!=typeof e||e!==l.default.ABANDON_FRAGMENT_RULES&&e!==l.default.QUALITY_SWITCH_RULES||"string"!=typeof t)throw c.default.BAD_ARGUMENT_ERROR;var n=v(t);-1===n?h.push({type:e,rulename:t,rule:r}):(h[n].type=e,h[n].rule=r)},removeAllAbrCustomRule:function(){h=[]},removeAbrCustomRule:function(e){if(e){var t=v(e);-1!==t&&h.splice(t,1)}else h=[]},getAbrCustomRules:function(){return h},addUTCTimingSource:b,removeUTCTimingSource:_,getUTCTimingSources:function(){return e},clearDefaultUTCTimingSources:function(){e=[]},restoreDefaultUTCTimingSources:function(){var e=m.get().streaming.utcSynchronization.defaultTimingSource;b(e.scheme,e.value)},setXHRWithCredentialsForType:function e(r,n){r?t[r]=!!n:Object.keys(t).forEach(function(t){e(t,n)})},getXHRWithCredentialsForType:function(e){var r=t[e];return void 0===r?t.default:r},setConfig:function(){},reset:function(){g()}}}f.__dashjs_factory_name="CustomParametersModel",t.default=i.default.getSingletonFactory(f)},"./src/streaming/models/FragmentModel.js":function(e,t,r){r.r(t);var n=r("./src/core/FactoryMaker.js"),i=r("./src/streaming/vo/FragmentRequest.js"),o="loading",u="executed",l="failed";function c(e){var t,r,n,c,f=(e=e||{}).eventBus,d=e.events,h=e.dashMetrics,p=e.fragmentLoader,m=e.debug,g=e.streamInfo,y=e.type;function v(e){var t;return!!e&&(t=!1,n.some(function(r){if(!isNaN(e.index)&&e.startTime===r.startTime&&e.adaptationIndex===r.adaptationIndex&&e.type===r.type||isNaN(e.index)&&isNaN(r.index)&&e.quality===r.quality||e.action===i.default.ACTION_COMPLETE&&e.action===r.action)return t=!0}),t)}function b(e){return isNaN(e.duration)?.25:Math.min(e.duration/8,.5)}function _(e){n=n.filter(function(t){var r=b(t);return isNaN(t.startTime)||void 0!==e&&t.startTime>=e-r})}function T(e,t){t<=e+.5||(n=n.filter(function(r){var n=b(r);return isNaN(r.startTime)||r.startTime>=t-n||isNaN(r.duration)||r.startTime+r.duration<=e+n}))}function E(e,t){h.addSchedulingInfo(e,t),h.addRequestsQueue(e.mediaType,c,n)}function S(e){e.sender===p&&(c.splice(c.indexOf(e.request),1),e.response&&!e.error&&n.push(e.request),E(e.request,e.error?l:u),f.trigger(d.FRAGMENT_LOADING_COMPLETED,{request:e.request,response:e.response,error:e.error,sender:this},{streamId:g.id,mediaType:y}))}function w(e){e.sender===p&&f.trigger(d.FRAGMENT_LOADING_PROGRESS,{request:e.request,response:e.response,error:e.error,sender:this},{streamId:g.id,mediaType:y})}function A(e){e.sender===p&&f.trigger(d.FRAGMENT_LOADING_ABANDONED,{request:e.request},{streamId:g.id,mediaType:y})}function C(){n=[],c=[]}return t={getStreamId:function(){return g.id},getType:function(){return y},getRequests:function(e){var t=e?e.state instanceof Array?e.state:[e.state]:[],r=[];return t.forEach(function(t){var i=function(e){var t;switch(e){case o:t=c;break;case u:t=n;break;default:t=[]}return t}(t);r=r.concat(e.hasOwnProperty("time")?[function(e,t,r){for(var n=e.length-1;n>=0;n--){var i=e[n],o=i.startTime,u=o+i.duration;if(r=isNaN(r)?b(i):r,!isNaN(o)&&!isNaN(u)&&t+r>=o&&t-r<u||isNaN(o)&&isNaN(t))return i}return null}(i,e.time,e.threshold)]:i.filter(function(t){for(var r in e)if("state"!==r&&e.hasOwnProperty(r)&&t[r]!=e[r])return!1;return!0}))}),r},isFragmentLoaded:v,isFragmentLoadedOrPending:function(e){var t,r=!1,n=0;if(!(r=v(e)))for(n=0;n<c.length;n++)t=c[n],e.url===t.url&&e.startTime===t.startTime&&(r=!0);return r},removeExecutedRequestsBeforeTime:_,removeExecutedRequestsAfterTime:function(e){n=n.filter(function(t){return isNaN(t.startTime)||void 0!==e&&t.startTime<e})},syncExecutedRequestsWithBufferedRange:function(e,t){if(e&&0!==e.length){for(var r=0,n=0,i=e.length;n<i;n++)T(r,e.start(n)),r=e.end(n);t>0&&T(r,t)}else _()},abortRequests:function(){r.debug("abort requests"),p.abort(),c=[]},executeRequest:function(e){e.action===i.default.ACTION_DOWNLOAD?(E(e,o),c.push(e),f.trigger(d.FRAGMENT_LOADING_STARTED,{request:e},{streamId:g.id,mediaType:y}),p.load(e)):r.warn("Unknown request action.")},reset:function(){f.off(d.LOADING_COMPLETED,S,this),f.off(d.LOADING_DATA_PROGRESS,w,this),f.off(d.LOADING_ABANDONED,A,this),p&&p.reset(),C()},resetInitialSettings:C,addExecutedRequest:function(e){n.push(e)}},r=m.getLogger(t),C(),f.on(d.LOADING_COMPLETED,S,t),f.on(d.LOADING_DATA_PROGRESS,w,t),f.on(d.LOADING_ABANDONED,A,t),t}c.__dashjs_factory_name="FragmentModel";var f=n.default.getClassFactory(c);f.FRAGMENT_MODEL_LOADING=o,f.FRAGMENT_MODEL_EXECUTED=u,f.FRAGMENT_MODEL_CANCELED="canceled",f.FRAGMENT_MODEL_FAILED=l,n.default.updateClassFactory(c.__dashjs_factory_name,f),t.default=f},"./src/streaming/models/LowLatencyThroughputModel.js":function(e,t,r){r.r(t);var n=r("./src/core/Debug.js"),i=r("./src/core/FactoryMaker.js");function o(){var e,t,r=this.context,i={};function o(){t=Object(n.default)(r).getInstance().getLogger(e)}function u(e){var t,r=!0,n=e.reduce(function(e,t){return e+t.bufferLevelAtSegmentEnd},0)/e.length;return e.forEach(function(e){.95>Math.abs(e.bufferLevelAtSegmentEnd/e.bufferLevelAtSegmentStart)&&(r=!1),e.bufferLevelAtSegmentEnd/n<.8&&(r=!1),t?t>e.bitrate&&(r=!1):t=e.bitrate}),r}return e={setup:o,addMeasurement:function(e,t,r,n,o){e&&e.mediaType&&!i[e.mediaType]&&(i[e.mediaType]=[]);var u=e.mediaInfo.bitrateList.find(function(t){return t.id===e.representationId});i[e.mediaType].push({index:e.index,repId:e.representationId,mediaType:e.mediaType,requestTimeMS:n,adjustedAvailabilityStartTimeMS:e.availabilityStartTime.getTime(),segDurationMS:1e3*e.duration,chunksDurationMS:r.reduce(function(e,t){return e+t.chunkDownloadDurationMS},0),segmentBytes:r.reduce(function(e,t){return e+t.chunkBytes},0),bitrate:u&&u.bandwidth,bitrateList:e.mediaInfo.bitrateList,chunkMeasurements:r,fetchDownloadDurationMS:t,throughputCapacityDelayMS:o,getEstimatedBufferLevel:function(e){for(var t={},r=0,n=0,i=0,o=0,u=e.length,l=0;l<u;++l)r+=e[l].chunkDownloadTimeRelativeMS,n+=e[l].bufferLevel,i+=e[l].chunkDownloadTimeRelativeMS*e[l].bufferLevel,o+=e[l].chunkDownloadTimeRelativeMS*e[l].chunkDownloadTimeRelativeMS;return t.m=(i-r*n/u)/(o-r*r/u),t.b=n/u-t.m*r/u,function(e){return t.m*e+t.b}}(r.slice(1))}),i[e.mediaType].length>10&&i[e.mediaType].shift()},getThroughputCapacityDelayMS:function(e,t){var r=i[e.mediaType]&&i[e.mediaType].slice(-3);return!r||r.length<3?0:u(r)?t/4>250?250:t/4:0},getEstimatedDownloadDurationMS:function(e){var r=i[e.mediaType].slice(-1).pop(),n=i[e.mediaType].slice(-3),o=r.chunkMeasurements.slice(-1).pop().chunkDownloadTimeRelativeMS;r.bufferLevelAtSegmentStart=r.getEstimatedBufferLevel(o/2),r.bufferLevelAtSegmentEnd=r.getEstimatedBufferLevel(o);var l=u(n),c=l?.6:.8;if(r.isBufferStable&&1.05*r.segDurationMS<r.fetchDownloadDurationMS)return r.fetchDownloadDurationMS;if(!l||r.segDurationMS<r.fetchDownloadDurationMS||r.adjustedAvailabilityStartTimeMS<=r.requestTimeMS+r.throughputCapacityDelayMS-r.segDurationMS)return .8*r.fetchDownloadDurationMS;for(var f=r.requestTimeMS+r.throughputCapacityDelayMS-r.adjustedAvailabilityStartTimeMS,d=0,h=0,p=0,m=0;m<r.chunkMeasurements.length;m++){var g=r.chunkMeasurements[m];if(f<h+g.chunkDownloadDurationMS)break;h+=g.chunkDownloadDurationMS,d+=g.chunkBytes,p++}if(f<0&&t.warn("request time was before adjusted availibitly start time"),d&&h&&p>.2*r.chunkMeasurements.length){var y=d/h,v=r.segmentBytes/y;return r.fetchDownloadDurationMS<v?r.fetchDownloadDurationMS*c:v*c}var b=r.bitrate;return r.bitrateList.some(function(e){if(e.bandwidth>r.bitrate)return b=e.bandwidth,!0}),b===r.bitrate?r.fetchDownloadDurationMS*c:c*r.segmentBytes*8e3/b}},o(),e}o.__dashjs_factory_name="LowLatencyThroughputModel",t.default=i.default.getSingletonFactory(o)},"./src/streaming/models/ManifestModel.js":function(e,t,r){r.r(t);var n=r("./src/core/EventBus.js"),i=r("./src/core/events/Events.js"),o=r("./src/core/FactoryMaker.js");function u(){var e,t=this.context,r=Object(n.default)(t).getInstance();return{getValue:function(){return e},setValue:function(t){e=t,t&&r.trigger(i.default.MANIFEST_LOADED,{data:t})}}}u.__dashjs_factory_name="ManifestModel",t.default=o.default.getSingletonFactory(u)},"./src/streaming/models/MediaPlayerModel.js":function(e,t,r){r.r(t);var n=r("./src/core/Debug.js"),i=r("./src/core/FactoryMaker.js"),o=r("./src/core/Settings.js");function u(){var e,t,r,i,u=this.context,l=Object(o.default)(u).getInstance();function c(e,r){return isNaN(e)?0:e>0?(r&&t.warn("Supplied minimum playback rate is a positive value when it should be negative or 0. The supplied rate will not be applied and set to 0: 100% playback speed."),0):e<-.5?(r&&t.warn("Supplied minimum playback rate is out of range and will be limited to ".concat(-.5,": ").concat(-50,"% playback speed.")),-.5):e}function f(e,r){return isNaN(e)?0:e<0?(r&&t.warn("Supplied maximum playback rate is a negative value when it should be negative or 0. The supplied rate will not be applied and set to 0: 100% playback speed."),0):e>1?(r&&t.warn("Supplied maximum playback rate is out of range and will be limited to ".concat(1,": ").concat(200,"% playback speed.")),1):e}function d(){var e=l.get().streaming.buffer.stableBufferTime>0?l.get().streaming.buffer.stableBufferTime:l.get().streaming.buffer.fastSwitchEnabled?20:12,t=r.getLiveDelay();return!isNaN(t)&&t>0?Math.min(e,t):e}return e={getCatchupMaxDrift:function(){if(!isNaN(l.get().streaming.liveCatchup.maxDrift)&&l.get().streaming.liveCatchup.maxDrift>0)return l.get().streaming.liveCatchup.maxDrift;var e=i.getServiceDescriptionSettings();return e&&e.liveCatchup&&!isNaN(e.liveCatchup.maxDrift)&&e.liveCatchup.maxDrift>0?e.liveCatchup.maxDrift:12},getCatchupModeEnabled:function(){return null!==l.get().streaming.liveCatchup.enabled?l.get().streaming.liveCatchup.enabled:r.getInitialCatchupModeActivated()},getStableBufferTime:d,getInitialBufferLevel:function(){var e=l.get().streaming.buffer.initialBufferLevel;return isNaN(e)||e<0?0:Math.min(d(),e)},getRetryAttemptsForType:function(e){var t=isNaN(l.get().streaming.retryAttempts.lowLatencyMultiplyFactor)?5:l.get().streaming.retryAttempts.lowLatencyMultiplyFactor;return r.getLowLatencyModeEnabled()?l.get().streaming.retryAttempts[e]*t:l.get().streaming.retryAttempts[e]},getRetryIntervalsForType:function(e){var t=isNaN(l.get().streaming.retryIntervals.lowLatencyReductionFactor)?10:l.get().streaming.retryIntervals.lowLatencyReductionFactor;return r.getLowLatencyModeEnabled()?l.get().streaming.retryIntervals[e]/t:l.get().streaming.retryIntervals[e]},getCatchupPlaybackRates:function(e){var t=l.get().streaming.liveCatchup.playbackRate;if(!isNaN(t.min)||!isNaN(t.max))return{min:c(t.min,e),max:f(t.max,e)};var r=i.getServiceDescriptionSettings();if(r&&r.liveCatchup&&(!isNaN(r.liveCatchup.playbackRate.min)||!isNaN(r.liveCatchup.playbackRate.max))){var n=r.liveCatchup.playbackRate;return{min:c(n.min,e),max:f(n.max,e)}}return{min:-.5,max:.5}},getAbrBitrateParameter:function(e,t){try{var r=l.get().streaming.abr[e][t];if(!isNaN(r)&&-1!==r)return r;var n=i.getServiceDescriptionSettings();return n&&n[e]&&!isNaN(n[e][t])?n[e][t]:-1}catch(e){return -1}},setConfig:function(e){e.playbackController&&(r=e.playbackController),e.serviceDescriptionController&&(i=e.serviceDescriptionController)},reset:function(){}},t=Object(n.default)(u).getInstance().getLogger(e),e}u.__dashjs_factory_name="MediaPlayerModel",t.default=i.default.getSingletonFactory(u)},"./src/streaming/models/MetricsModel.js":function(e,t,r){r.r(t);var n=r("./src/streaming/constants/Constants.js"),i=r("./src/streaming/constants/MetricsConstants.js"),o=r("./src/streaming/vo/MetricsList.js"),u=r("./src/streaming/vo/metrics/HTTPRequest.js"),l=r("./src/streaming/vo/metrics/RepresentationSwitch.js"),c=r("./src/streaming/vo/metrics/BufferLevel.js"),f=r("./src/streaming/vo/metrics/BufferState.js"),d=r("./src/streaming/vo/metrics/DVRInfo.js"),h=r("./src/streaming/vo/metrics/DroppedFrames.js"),p=r("./src/streaming/vo/metrics/ManifestUpdate.js"),m=r("./src/streaming/vo/metrics/SchedulingInfo.js"),g=r("./src/core/EventBus.js"),y=r("./src/streaming/vo/metrics/RequestsQueue.js"),v=r("./src/core/events/Events.js"),b=r("./src/core/FactoryMaker.js");function _(e){var t,r=(e=e||{}).settings,b=this.context,_=Object(g.default)(b).getInstance();function T(){_.trigger(v.default.METRICS_CHANGED)}function E(e){_.trigger(v.default.METRIC_CHANGED,{mediaType:e}),T()}function S(e,t,r){_.trigger(v.default.METRIC_UPDATED,{mediaType:e,metric:t,value:r}),E(e)}function w(e,t,r){_.trigger(v.default.METRIC_ADDED,{mediaType:e,metric:t,value:r}),E(e)}function A(e,r){var n=null;return e&&(t.hasOwnProperty(e)?n=t[e]:r||(n=new o.default,t[e]=n)),n}function C(e,t,n){var i=A(e);null!==i&&(i[t].push(n),i[t].length>r.get().streaming.metrics.maxListDepth&&i[t].shift())}function I(e,t,r){C(e,t,r),w(e,t,r)}return t={},{clearCurrentMetricsForType:function(e){delete t[e],E(e)},clearAllCurrentMetrics:function(){t={},T()},getMetricsFor:A,addHttpRequest:function e(t,r,n,o,l,c,f,d,h,p,m,g,y,v,b,_){var T=new u.HTTPRequest;c&&c!==o&&(e(t,null,n,o,l,null,null,d,h,null,null,null,y,null,null,_),T.actualurl=c),T.tcpid=r,T.type=n,T.url=o,T.range=d,T.trequest=h,T.tresponse=p,T.responsecode=g,T._tfinish=m,T._stream=t,T._mediaduration=y,T._quality=l,T._responseHeaders=v,T._serviceLocation=f,T._fileLoaderType=_,b?b.forEach(function(e){var t,r,n,i;t=e.s,r=e.d,n=e.b,(i=new u.HTTPRequestTrace).s=t,i.d=r,i.b=n,T.trace.push(i),T.interval||(T.interval=0),T.interval+=r}):(delete T.interval,delete T.trace),I(t,i.default.HTTP_REQUEST,T)},addRepresentationSwitch:function(e,t,r,n,o){var u=new l.default;u.t=t,u.mt=r,u.to=n,o?u.lto=o:delete u.lto,I(e,i.default.TRACK_SWITCH,u)},addBufferLevel:function(e,t,r){var n=new c.default;n.t=t,n.level=r,I(e,i.default.BUFFER_LEVEL,n)},addBufferState:function(e,t,r){var n=new f.default;n.target=r,n.state=t,I(e,i.default.BUFFER_STATE,n)},addDVRInfo:function(e,t,r,n){var o=new d.default;o.time=t,o.range=n,o.manifestInfo=r,I(e,i.default.DVR_INFO,o)},addDroppedFrames:function(e,t){var r=new h.default,n=A(e).DroppedFrames;t&&(r.time=t.creationTime,r.droppedFrames=t.droppedVideoFrames,n.length>0&&n[n.length-1]==r||I(e,i.default.DROPPED_FRAMES,r))},addSchedulingInfo:function(e,t,r,n,o,u,l,c,f){var d=new m.default;d.mediaType=e,d.t=t,d.type=r,d.startTime=n,d.availabilityStartTime=o,d.duration=u,d.quality=l,d.range=c,d.state=f,I(e,i.default.SCHEDULING_INFO,d)},addRequestsQueue:function(e,t,r){var n=new y.default;n.loadingRequests=t,n.executedRequests=r,A(e).RequestsQueue=n,w(e,i.default.REQUESTS_QUEUE,n)},addManifestUpdate:function(e,t,r,o,u,l,c,f,d,h){var m=new p.ManifestUpdate;m.mediaType=e,m.type=t,m.requestTime=r,m.fetchTime=o,m.availabilityStartTime=u,m.presentationStartTime=l,m.clientTimeOffset=c,m.currentTime=f,m.buffered=d,m.latency=h,C(n.default.STREAM,i.default.MANIFEST_UPDATE,m),w(e,i.default.MANIFEST_UPDATE,m)},updateManifestUpdateInfo:function(e,t){if(e){for(var r in t)e[r]=t[r];S(e.mediaType,i.default.MANIFEST_UPDATE,e)}},addManifestUpdateStreamInfo:function(e,t,r,n,o){if(e){var u=new p.ManifestUpdateStreamInfo;u.id=t,u.index=r,u.start=n,u.duration=o,e.streamInfo.push(u),S(e.mediaType,i.default.MANIFEST_UPDATE_STREAM_INFO,e)}},addManifestUpdateRepresentationInfo:function(e,t,r,n,o,u,l,c){if(e&&e.representationInfo){var f=new p.ManifestUpdateRepresentationInfo;f.id=t,f.index=r,f.streamIndex=n,f.mediaType=o,f.startNumber=l,f.fragmentInfoType=c,f.presentationTimeOffset=u,e.representationInfo.push(f),S(e.mediaType,i.default.MANIFEST_UPDATE_TRACK_INFO,e)}},addPlayList:function(e){e.trace&&Array.isArray(e.trace)?e.trace.forEach(function(e){e.hasOwnProperty("subreplevel")&&!e.subreplevel&&delete e.subreplevel}):delete e.trace,I(n.default.STREAM,i.default.PLAY_LIST,e)},addDVBErrors:function(e){I(n.default.STREAM,i.default.DVB_ERRORS,e)}}}_.__dashjs_factory_name="MetricsModel",t.default=b.default.getSingletonFactory(_)},"./src/streaming/models/URIFragmentModel.js":function(e,t,r){r.r(t);var n=r("./src/streaming/vo/URIFragmentData.js"),i=r("./src/core/FactoryMaker.js");function o(){var e;return{initialize:function(t){if(e=new n.default,!t)return null;var r=t.indexOf("#");if(-1!==r)for(var i=t.substr(r+1).split("&"),o=0,u=i.length;o<u;++o){var l=i[o],c=l.indexOf("=");if(-1!==c){var f=l.substring(0,c);e.hasOwnProperty(f)&&(e[f]=l.substr(c+1))}}},getURIFragmentData:function(){return e}}}o.__dashjs_factory_name="URIFragmentModel",t.default=i.default.getSingletonFactory(o)},"./src/streaming/models/VideoModel.js":function(e,t,r){r.r(t);var n=r("./src/core/FactoryMaker.js"),i=r("./src/core/EventBus.js"),o=r("./src/core/events/Events.js"),u=r("./src/core/Debug.js"),l=r("./src/streaming/constants/Constants.js"),c=new Map([[l.default.VIDEO_ELEMENT_READY_STATES.HAVE_METADATA,"loadedmetadata"],[l.default.VIDEO_ELEMENT_READY_STATES.HAVE_CURRENT_DATA,"loadeddata"],[l.default.VIDEO_ELEMENT_READY_STATES.HAVE_FUTURE_DATA,"canplay"],[l.default.VIDEO_ELEMENT_READY_STATES.HAVE_ENOUGH_DATA,"canplaythrough"]]);function f(){var e,t,r,n,f,d,h=this.context,p=Object(i.default)(h).getInstance(),m=[];function g(){r&&(r.playbackRate=1,r.removeEventListener("canplay",g))}function y(){return m.length>0}function v(){if(r&&y()&&0===r.playbackRate){var e=document.createEvent("Event");e.initEvent("waiting",!0,!1),r.dispatchEvent(e)}}function b(e,t){r&&r.addEventListener(e,t)}function _(e,t){r&&r.removeEventListener(e,t)}function T(){return r?r.readyState:NaN}function E(){return r?r.buffered:null}function S(e,t,n,i,o){if(r){for(var u=0;u<r.textTracks.length;u++)if(r.textTracks[u].kind===e&&(!t||r.textTracks[u].label==t)&&r.textTracks[u].language===n&&r.textTracks[u].isTTML===i&&r.textTracks[u].isEmbedded===o)return r.textTracks[u]}return null}function w(e,t){var r;e===l.default.VIDEO_ELEMENT_READY_STATES.HAVE_NOTHING||T()>=e?t():b(r=c.get(e),function e(){_(r,e),t(r)})}return e={initialize:function(){p.on(o.default.PLAYBACK_PLAYING,v,this)},setCurrentTime:function(e,t){n=e,w(l.default.VIDEO_ELEMENT_READY_STATES.HAVE_METADATA,function(){if(r){if(r.currentTime===n)return void(n=NaN);try{n=t?function(e){var t=E(),r=e,n=9999999999;if(t)for(var i=0;i<t.length;i++){var o=t.start(i),u=t.end(i),l=Math.abs(o-e),c=Math.abs(u-e);if(e>=o&&e<=u)return e;l<n&&(n=l,r=o),c<n&&(n=c,r=u)}return r}(n):n,r.currentTime=n,n=NaN}catch(e){0===r.readyState&&e.code===e.INVALID_STATE_ERR&&setTimeout(function(){r.currentTime=n,n=NaN},400)}}})},play:function(){if(r){r.autoplay=!0;var e=r.play();e&&e.catch&&"undefined"!=typeof Promise&&e.catch(function(e){"NotAllowedError"===e.name&&p.trigger(o.default.PLAYBACK_NOT_ALLOWED),t.warn("Caught pending play exception - continuing (".concat(e,")"))})}},isPaused:function(){return r?r.paused:null},pause:function(){r&&(r.pause(),r.autoplay=!1)},isStalled:y,isSeeking:function(){return r?r.seeking||!isNaN(n):null},getTime:function(){return r?isNaN(n)?r.currentTime:n:null},getPlaybackRate:function(){return r?r.playbackRate:null},setPlaybackRate:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];r&&(!t&&r.readyState<=2&&e>0?r.addEventListener("canplay",g):r.playbackRate=e)},getPlayedRanges:function(){return r?r.played:null},getEnded:function(){return r?r.ended:null},setStallState:function(e,t){var n;t?null!==e&&r&&!r.seeking&&-1===m.indexOf(e)&&m.push(e):(n=m.indexOf(e),null!==e&&-1!==n&&m.splice(n,1))},getElement:function(){return r},setElement:function(e){if(!(null==e||e&&/^(VIDEO|AUDIO)$/i.test(e.nodeName)))throw"element is not video or audio DOM type!";(r=e)&&(r.preload="auto")},setSource:function(e){r&&(e?r.src=e:(r.removeAttribute("src"),r.load()))},getSource:function(){return r?r.src:null},getTTMLRenderingDiv:function(){return f},setTTMLRenderingDiv:function(e){(f=e).style.position="absolute",f.style.display="flex",f.style.overflow="hidden",f.style.pointerEvents="none",f.style.top=0,f.style.left=0},getVttRenderingDiv:function(){return d},setVttRenderingDiv:function(e){d=e},getPlaybackQuality:function(){if(!r)return null;var e="webkitDroppedFrameCount"in r&&"webkitDecodedFrameCount"in r,t=null;return"getVideoPlaybackQuality"in r?t=r.getVideoPlaybackQuality():e&&(t={droppedVideoFrames:r.webkitDroppedFrameCount,totalVideoFrames:r.webkitDroppedFrameCount+r.webkitDecodedFrameCount,creationTime:new Date}),t},addEventListener:b,removeEventListener:_,getReadyState:T,getBufferRange:E,getClientWidth:function(){return r?r.clientWidth:NaN},getClientHeight:function(){return r?r.clientHeight:NaN},getTextTracks:function(){return r?r.textTracks:[]},getTextTrack:S,addTextTrack:function(e,t,n,i,o){if(!r)return null;var u=S(e,t,n,i,o);return u||((u=r.addTextTrack(e,t,n)).isEmbedded=o,u.isTTML=i),u},appendChild:function(e){r&&(r.appendChild(e),void 0!==e.isTTML&&(r.textTracks[r.textTracks.length-1].isTTML=e.isTTML,r.textTracks[r.textTracks.length-1].isEmbedded=e.isEmbedded))},removeChild:function(e){r&&r.removeChild(e)},getVideoWidth:function(){return r?r.videoWidth:NaN},getVideoHeight:function(){return r?r.videoHeight:NaN},getVideoRelativeOffsetTop:function(){var e=r.parentNode.host||r.parentNode;return e?r.getBoundingClientRect().top-e.getBoundingClientRect().top:NaN},getVideoRelativeOffsetLeft:function(){var e=r.parentNode.host||r.parentNode;return e?r.getBoundingClientRect().left-e.getBoundingClientRect().left:NaN},waitForReadyState:w,reset:function(){p.off(o.default.PLAYBACK_PLAYING,v,this)}},t=Object(u.default)(h).getInstance().getLogger(e),n=NaN,e}f.__dashjs_factory_name="VideoModel",t.default=n.default.getSingletonFactory(f)},"./src/streaming/net/FetchLoader.js":function(e,t,r){r.r(t);var n=r("./src/core/FactoryMaker.js"),i=r("./src/core/Settings.js"),o=r("./src/streaming/constants/Constants.js"),u=r("./src/streaming/utils/RequestModifier.js");function l(e,t){if(e){if("string"==typeof e)return c(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?c(e,t):void 0}}function c(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}function f(e){e=e||{};var t,r=this.context,n=e.requestModifier,c=e.lowLatencyThroughputModel,f=e.boxParser,d=Object(i.default)(r).getInstance();function h(e){var r,i=new Date,u=e.request,h=new Headers;if(u.range&&h.append("Range","bytes="+u.range),e.headers)for(var g in e.headers){var y=e.headers[g];y&&h.append(g,y)}u.requestStartDate||(u.requestStartDate=i),n&&n.modifyRequestHeader&&n.modifyRequestHeader({setRequestHeader:function(e,t){h.append(e,t)}},{url:e.url}),"function"==typeof window.AbortController&&(r=new AbortController,e.abortController=r,r.signal.onabort=e.onabort);var v={method:e.method,headers:h,credentials:e.withCredentials?"include":void 0,signal:r?r.signal:void 0},b=d.get().streaming.abr.fetchThroughputCalculationMode,_=Date.now(),T=0;new Promise(function(e){if(b===o.default.ABR_FETCH_THROUGHPUT_CALCULATION_AAST&&c&&(T=c.getThroughputCapacityDelayMS(u,1e3*t.getCurrentBufferLevel(u.mediaType))))return setTimeout(e,T);e()}).then(function(){var r=Date.now();fetch(e.url,v).then(function(n){e.response||(e.response={}),e.response.status=n.status,e.response.statusText=n.statusText,e.response.responseURL=n.url,n.ok||e.onerror();var i,d="",h=function(e,t){var r="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!r){if(Array.isArray(e)||(r=l(e))){r&&(e=r);var n=0,i=function(){};return{s:i,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:i}}throw TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,u=!0,c=!1;return{s:function(){r=r.call(e)},n:function(){var e=r.next();return u=e.done,e},e:function(e){c=!0,o=e},f:function(){try{u||null==r.return||r.return()}finally{if(c)throw o}}}}(n.headers.keys());try{for(h.s();!(i=h.n()).done;){var g=i.value;d+=g+": "+n.headers.get(g)+"\r\n"}}catch(e){h.e(e)}finally{h.f()}if(e.response.responseHeaders=d,!n.body)return n.arrayBuffer().then(function(t){e.response.response=t;var r={loaded:t.byteLength,total:t.byteLength,stream:!1};e.progress(r),e.onload(),e.onend()});var y,v,E,S=parseInt(n.headers.get("Content-Length"),10),w=0,A=!1,C=new Uint8Array,I=0;if(b===o.default.ABR_FETCH_THROUGHPUT_CALCULATION_AAST&&c){var O=r,R=0,P=function(e){if(Array.isArray(e))return e}(E=n.body.tee())||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,i,o,u,l=[],c=!0,f=!1;try{if(o=(r=r.call(e)).next,0===t){if(Object(r)!==r)return;c=!1}else for(;!(c=(n=o.call(r)).done)&&(l.push(n.value),l.length!==t);c=!0);}catch(e){f=!0,i=e}finally{try{if(!c&&null!=r.return&&(u=r.return(),Object(u)!==u))return}finally{if(f)throw i}}return l}}(E,2)||l(E,2)||function(){throw TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}(),k=P[0],D=P[1];y=k.getReader(),v=[],y.read().then(function n(i){var o=i.value,l=i.done;if(R=Date.now(),o&&o.length){var f=R-O,h=o.length;v.push({chunkDownloadTimeRelativeMS:R-r,chunkDownloadDurationMS:f,chunkBytes:h,kbps:Math.round(8*h/(f/1e3)),bufferLevel:t.getCurrentBufferLevel(u.mediaType)})}if(l){var p=R-r,m=v.reduce(function(e,t){return e+t.chunkBytes},0);return c.addMeasurement(u,p,v,_,T,d),void e.progress({loaded:m,total:m,lengthComputable:!0,time:c.getEstimatedDownloadDurationMS(u),stream:!0})}return O=Date.now(),y.read().then(n)}),e.reader=D.getReader()}else e.reader=n.body.getReader();var N=[],L=[],x=[],j=!0;p(e,function t(r){var n=r.value;if(r.done){if(C){if(b!==o.default.ABR_FETCH_THROUGHPUT_CALCULATION_AAST){var i=null,u=null;b===o.default.ABR_FETCH_THROUGHPUT_CALCULATION_MOOF_PARSING?(i=function(e,t){try{r=e.filter(function(t,r){return r<e.length-1}),n=t.filter(function(e,r){return r<t.length-1});var r,n,i=[];if(r.length>1){for(var o=0,u=0,l=0;l<r.length;l++)if(r[l]&&n[l]){var c=n[l].ts-r[l].ts;if(c>1)i.push(8*n[l].bytes/c);else{0===u&&(u=r[l].ts);var f=n[l].ts-u;f>1?(i.push(8*o/f),o=0,u=0):o+=n[l].bytes}}if(i.length>0)return i.reduce(function(e,t){return e+t},0)/i.length}return null}catch(e){return null}}(L,x))&&(u=8*w/i):b===o.default.ABR_FETCH_THROUGHPUT_CALCULATION_DOWNLOADED_DATA&&(u=m(N,w)),e.progress({loaded:w,total:isNaN(S)?w:S,lengthComputable:!0,time:u,stream:!0})}e.response.response=C.buffer}return e.onload(),void e.onend()}if(n&&n.length>0){C=function(e,t){if(0===e.length)return t;var r=new Uint8Array(e.length+t.length);return r.set(e),r.set(t,e.length),r}(C,n),w+=n.length,N.push({ts:Date.now(),bytes:n.length}),b===o.default.ABR_FETCH_THROUGHPUT_CALCULATION_MOOF_PARSING&&j&&f.findLastTopIsoBoxCompleted(["moof"],C,I).found&&(j=!1,L.push({ts:performance.now(),bytes:n.length}));var l=f.findLastTopIsoBoxCompleted(["moov","mdat"],C,I);if(l.found){var c,d=l.lastCompletedOffset+l.size;b!==o.default.ABR_FETCH_THROUGHPUT_CALCULATION_MOOF_PARSING||j||(j=!0,x.push({ts:performance.now(),bytes:C.length})),d===C.length?(c=C,C=new Uint8Array):(c=new Uint8Array(C.subarray(0,d)),C=C.subarray(d)),e.progress({data:c.buffer,lengthComputable:!1,noTrace:!0}),I=0}else I=l.lastCompletedOffset,A||(e.progress({lengthComputable:!1,noTrace:!0}),A=!0)}p(e,t)})}).catch(function(t){e.onerror&&e.onerror(t)})})}function p(e,t){e.reader.read().then(t).catch(function(t){e.onerror&&200===e.response.status&&e.onerror(t)})}function m(e,t){try{if((e=e.filter(function(r){return r.bytes>t/4/e.length})).length>1){var r=0,n=(e[e.length-1].ts-e[0].ts)/e.length;return e.forEach(function(t,i){var o=e[i+1];if(o){var u=o.ts-t.ts;r+=u<n?u:0}}),r}return null}catch(e){return null}}return{load:function(e){n&&n.modifyRequest?Object(u.modifyRequest)(e,n).then(function(){return h(e)}):h(e)},abort:function(e){if(e.abortController)e.abortController.abort();else if(e.reader)try{e.reader.cancel(),e.onabort()}catch(e){}},calculateDownloadedTime:m,setup:function(e){t=e.dashMetrics}}}f.__dashjs_factory_name="FetchLoader";var d=n.default.getClassFactory(f);t.default=d},"./src/streaming/net/HTTPLoader.js":function(e,t,r){r.r(t);var n=r("./src/streaming/net/XHRLoader.js"),i=r("./src/streaming/net/FetchLoader.js"),o=r("./src/streaming/vo/metrics/HTTPRequest.js"),u=r("./src/core/FactoryMaker.js"),l=r("./src/streaming/vo/DashJSError.js"),c=r("./src/streaming/models/CmcdModel.js"),f=r("./src/core/Utils.js"),d=r("./src/core/Debug.js"),h=r("./src/core/EventBus.js"),p=r("./src/core/events/Events.js"),m=r("./src/core/Settings.js"),g=r("./src/streaming/constants/Constants.js"),y=r("./src/streaming/models/LowLatencyThroughputModel.js"),v=r("./src/streaming/models/CustomParametersModel.js");function b(e){return(b="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function _(e,t,r){var n;return(n=function(e,t){if("object"!==b(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,"string");if("object"!==b(n))return n;throw TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(t),(t="symbol"===b(n)?n:String(n))in e)?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function T(e){e=e||{};var t,r,u,b,T,E,S,w,A,C,I=this.context,O=e.errHandler,R=e.dashMetrics,P=e.mediaPlayerModel,k=e.requestModifier,D=e.boxParser,N=e.errors,L=e.requestTimeout||0,x=Object(h.default)(I).getInstance(),j=Object(m.default)(I).getInstance();return t={load:function(e){e.request?function e(t,c){var d,h=t.request,m=[],y=!0,v=!0,_=new Date,C=_,N=0,M=null;if(!k||!R||!O)throw Error("config object is not correct or missing");var F,B=function(e){if(v=!1,h.requestStartDate=_,h.requestEndDate=new Date,h.firstByteDate=h.firstByteDate||_,h.fileLoaderType=M,!h.checkExistenceOnly){var t=d.response?d.response.responseURL:null,r=d.response?d.response.status:null,n=d.response&&d.response.getAllResponseHeaders?d.response.getAllResponseHeaders():d.response?d.response.responseHeaders:[];R.addHttpRequest(h,t,r,n,e?m:null),h.type===o.HTTPRequest.MPD_TYPE&&R.addManifestUpdate(h)}},U=function(){if(-1!==r.indexOf(d)&&(r.splice(r.indexOf(d),1),v)){if(B(!1),c>0){try{j.get().streaming.utcSynchronization.enableBackgroundSyncAfterSegmentDownloadError&&h.type===o.HTTPRequest.MEDIA_SEGMENT_TYPE&&P.getRetryAttemptsForType(o.HTTPRequest.MEDIA_SEGMENT_TYPE)===c&&x.trigger(p.default.ATTEMPT_BACKGROUND_SYNC)}catch(e){}c--;var n={config:t};b.push(n),n.timeout=setTimeout(function(){-1!==b.indexOf(n)&&(b.splice(b.indexOf(n),1),e(t,c))},P.getRetryIntervalsForType(h.type))}else{if(h.type===o.HTTPRequest.MSS_FRAGMENT_INFO_SEGMENT_TYPE)return;O.error(new l.default(T[h.type],h.url+" is not available",{request:h,response:d.response})),t.error&&t.error(h,"error",d.response.statusText),t.complete&&t.complete(h,d.response.statusText)}}};h.hasOwnProperty("availabilityTimeComplete")&&!1===h.availabilityTimeComplete&&window.fetch&&"arraybuffer"===h.responseType&&h.type===o.HTTPRequest.MEDIA_SEGMENT_TYPE?((F=Object(i.default)(I).create({requestModifier:k,lowLatencyThroughputModel:w,boxParser:D})).setup({dashMetrics:R}),M=g.default.FILE_LOADER_TYPES.FETCH):(F=Object(n.default)(I).create({requestModifier:k}),M=g.default.FILE_LOADER_TYPES.XHR);var q=null,H=k.modifyRequestURL?k.modifyRequestURL(h.url):h.url;if(j.get().streaming.cmcd&&j.get().streaming.cmcd.enabled){var V=j.get().streaming.cmcd.mode;if(V===g.default.CMCD_MODE_QUERY){var G=function(e){try{var t=[],r=E.getQueryParameter(e);return r&&t.push(r),t}catch(e){return[]}}(h);H=f.default.addAditionalQueryParameterToUrl(H,G)}else V===g.default.CMCD_MODE_HEADER&&(q=E.getHeaderParameters(h))}h.url=H;var Y=h.checkExistenceOnly?o.HTTPRequest.HEAD:o.HTTPRequest.GET,z=S.getXHRWithCredentialsForType(h.type);d={url:H,method:Y,withCredentials:z,request:h,onload:function(){d.response.status>=200&&d.response.status<=299&&(B(!0),t.success&&t.success(d.response.response,d.response.statusText,d.response.responseURL),t.complete&&t.complete(h,d.response.statusText))},onend:U,onerror:U,progress:function(e){var r=new Date;y&&(y=!1,(!e.lengthComputable||e.lengthComputable&&e.total!==e.loaded)&&(h.firstByteDate=r)),e.lengthComputable&&(h.bytesLoaded=e.loaded,h.bytesTotal=e.total),e.noTrace||(m.push({s:C,d:e.time?e.time:r.getTime()-C.getTime(),b:[e.loaded?e.loaded-N:0]}),C=r,N=e.loaded),t.progress&&e&&t.progress(e)},onabort:function(){t.abort&&t.abort(h)},ontimeout:function(e){var t;if(e.lengthComputable){var r=e.loaded/e.total*100;t="Request timeout: loaded: "+e.loaded+", out of: "+e.total+" : "+r.toFixed(3)+"% Completed"}else t="Request timeout: non-computable download size";A.warn(t)},loader:F,timeout:L,headers:q};var K=(new Date).getTime();if(isNaN(h.delayLoadingTime)||K>=h.delayLoadingTime)r.push(d),F.load(d);else{var W={httpRequest:d};u.push(W),W.delayTimeout=setTimeout(function(){if(-1!==u.indexOf(W)){u.splice(u.indexOf(W),1);try{C=_=new Date,r.push(W.httpRequest),F.load(W.httpRequest)}catch(e){W.httpRequest.onerror()}}},h.delayLoadingTime-K)}}(e,P.getRetryAttemptsForType(e.request.type)):e.error&&e.error(e.request,"error")},abort:function(){b.forEach(function(e){clearTimeout(e.timeout),e.config.request&&e.config.abort&&e.config.abort(e.config.request)}),b=[],u.forEach(function(e){return clearTimeout(e.delayTimeout)}),u=[],r.forEach(function(e){e.request.type!==o.HTTPRequest.MSS_FRAGMENT_INFO_SEGMENT_TYPE&&(e.onloadend=e.onerror=e.onprogress=void 0,e.loader.abort(e))}),r=[]}},A=Object(d.default)(I).getInstance().getLogger(t),r=[],u=[],b=[],E=Object(c.default)(I).getInstance(),w=Object(y.default)(I).getInstance(),S=Object(v.default)(I).getInstance(),_(C={},o.HTTPRequest.MPD_TYPE,N.DOWNLOAD_ERROR_ID_MANIFEST_CODE),_(C,o.HTTPRequest.XLINK_EXPANSION_TYPE,N.DOWNLOAD_ERROR_ID_XLINK_CODE),_(C,o.HTTPRequest.INIT_SEGMENT_TYPE,N.DOWNLOAD_ERROR_ID_INITIALIZATION_CODE),_(C,o.HTTPRequest.MEDIA_SEGMENT_TYPE,N.DOWNLOAD_ERROR_ID_CONTENT_CODE),_(C,o.HTTPRequest.INDEX_SEGMENT_TYPE,N.DOWNLOAD_ERROR_ID_CONTENT_CODE),_(C,o.HTTPRequest.BITSTREAM_SWITCHING_SEGMENT_TYPE,N.DOWNLOAD_ERROR_ID_CONTENT_CODE),_(C,o.HTTPRequest.OTHER_TYPE,N.DOWNLOAD_ERROR_ID_CONTENT_CODE),T=C,t}T.__dashjs_factory_name="HTTPLoader";var E=u.default.getClassFactory(T);t.default=E},"./src/streaming/net/SchemeLoaderFactory.js":function(e,t,r){r.r(t);var n=r("./src/core/FactoryMaker.js"),i=r("./src/streaming/net/HTTPLoader.js");function o(){var e;function t(){e={}}function r(){t()}return r(),{getLoader:function(t){for(var r in e)if(e.hasOwnProperty(r)&&t.startsWith(r))return e[r];return i.default},registerLoader:function(t,r){e[t]=r},unregisterLoader:function(t){e[t]&&delete e[t]},unregisterAllLoader:t,reset:r}}o.__dashjs_factory_name="SchemeLoaderFactory";var u=n.default.getSingletonFactory(o);t.default=u},"./src/streaming/net/URLLoader.js":function(e,t,r){r.r(t);var n=r("./src/core/FactoryMaker.js"),i=r("./src/streaming/net/SchemeLoaderFactory.js");function o(e){e=e||{};var t,r,n=this.context;return t=Object(i.default)(n).getInstance(),{load:function(i){r||(r=t.getLoader(i&&i.request?i.request.url:null)(n).create({errHandler:e.errHandler,mediaPlayerModel:e.mediaPlayerModel,requestModifier:e.requestModifier,dashMetrics:e.dashMetrics,boxParser:e.boxParser?e.boxParser:null,constants:e.constants?e.constants:null,dashConstants:e.dashConstants?e.dashConstants:null,urlUtils:e.urlUtils?e.urlUtils:null,requestTimeout:isNaN(e.requestTimeout)?0:e.requestTimeout,errors:e.errors})),r.load(i)},abort:function(){r&&r.abort()}}}o.__dashjs_factory_name="URLLoader";var u=n.default.getClassFactory(o);t.default=u},"./src/streaming/net/XHRLoader.js":function(e,t,r){r.r(t);var n=r("./src/core/FactoryMaker.js"),i=r("./src/streaming/utils/RequestModifier.js");function o(e){var t=(e=e||{}).requestModifier;function r(e){var r=new Date,n=e.request,i=new XMLHttpRequest;if(i.open(e.method,e.url,!0),n.responseType&&(i.responseType=n.responseType),n.range&&i.setRequestHeader("Range","bytes="+n.range),n.requestStartDate||(n.requestStartDate=r),t&&t.modifyRequestHeader&&(i=t.modifyRequestHeader(i,{url:e.url})),e.headers)for(var o in e.headers){var u=e.headers[o];u&&i.setRequestHeader(o,u)}i.withCredentials=e.withCredentials,i.onload=e.onload,i.onloadend=e.onend,i.onerror=e.onerror,i.onprogress=e.progress,i.onabort=e.onabort,i.ontimeout=e.ontimeout,i.timeout=e.timeout,i.send(),e.response=i}return{load:function(e){t&&t.modifyRequest?Object(i.modifyRequest)(e,t).then(function(){return r(e)}):r(e)},abort:function(e){var t=e.response;t.onloadend=t.onerror=t.onprogress=void 0,t.abort()}}}o.__dashjs_factory_name="XHRLoader";var u=n.default.getClassFactory(o);t.default=u},"./src/streaming/protection/CommonEncryption.js":function(e,t,r){function n(e){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}r.r(t);var i={attributes:["Laurl","laurl"],prefixes:["clearkey","dashif"]},o=function(){var e;function t(){!function(e,t){if(!(e instanceof t))throw TypeError("Cannot call a class as a function")}(this,t)}return e=[{key:"findCencContentProtection",value:function(e){for(var t=null,r=0;r<e.length;++r){var n=e[r];"urn:mpeg:dash:mp4protection:2011"!==n.schemeIdUri.toLowerCase()||"cenc"!==n.value.toLowerCase()&&"cbcs"!==n.value.toLowerCase()||(t=n)}return t}},{key:"getPSSHData",value:function(e){var t=8,r=new DataView(e),n=r.getUint8(t);return t+=20,n>0&&(t+=4+16*r.getUint32(t)),t+=4,e.slice(t)}},{key:"getPSSHForKeySystem",value:function(e,r){var n=t.parsePSSHList(r);return e&&n.hasOwnProperty(e.uuid.toLowerCase())?n[e.uuid.toLowerCase()]:null}},{key:"parseInitDataFromContentProtection",value:function(e,t){return"pssh"in e?(e.pssh.__text=e.pssh.__text.replace(/\r?\n|\r/g,"").replace(/\s+/g,""),t.decodeArray(e.pssh.__text).buffer):null}},{key:"parsePSSHList",value:function(e){if(null==e)return[];for(var t=new DataView(e.buffer||e),r={},n=0;;){var i,o,u=void 0,l=n;if(n>=t.buffer.byteLength)break;if(i=n+t.getUint32(n),n+=4,1886614376===t.getUint32(n)){if(n+=4,0===(o=t.getUint8(n))||1===o){n++,n+=3,u="";var c=void 0,f=void 0;for(c=0;c<4;c++)u+=1===(f=t.getUint8(n+c).toString(16)).length?"0"+f:f;for(n+=4,u+="-",c=0;c<2;c++)u+=1===(f=t.getUint8(n+c).toString(16)).length?"0"+f:f;for(n+=2,u+="-",c=0;c<2;c++)u+=1===(f=t.getUint8(n+c).toString(16)).length?"0"+f:f;for(n+=2,u+="-",c=0;c<2;c++)u+=1===(f=t.getUint8(n+c).toString(16)).length?"0"+f:f;for(n+=2,u+="-",c=0;c<6;c++)u+=1===(f=t.getUint8(n+c).toString(16)).length?"0"+f:f;n+=10,r[u=u.toLowerCase()]=t.buffer.slice(l,i),n=i}else n=i}else n=i}return r}},{key:"getLicenseServerUrlFromMediaInfo",value:function(e,t){try{if(!e||0===e.length)return null;for(var r=0,n=null;r<e.length&&!n;){var o=e[r];if(o&&o.contentProtection&&o.contentProtection.length>0){var u=o.contentProtection.filter(function(e){return e.schemeIdUri&&e.schemeIdUri===t});if(u&&u.length>0)for(var l=0;l<u.length&&!n;){for(var c=u[l],f=0;f<i.attributes.length&&!n;){for(var d=0,h=i.attributes[f];d<i.prefixes.length&&!n;){var p=i.prefixes[d];c[h]&&c[h].__prefix&&c[h].__prefix===p&&c[h].__text&&(n=c[h].__text),d+=1}f+=1}l+=1}}r+=1}return n}catch(e){return null}}}],function(e,t){for(var r,i=0;i<t.length;i++){var o=t[i];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,(r=function(e,t){if("object"!==n(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var i=r.call(e,"string");if("object"!==n(i))return i;throw TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(o.key),"symbol"===n(r)?r:String(r)),o)}}(t,e),Object.defineProperty(t,"prototype",{writable:!1}),t}();t.default=o},"./src/streaming/protection/Protection.js":function(e,t,r){r.r(t);var n=r("./src/streaming/protection/controllers/ProtectionController.js"),i=r("./src/streaming/protection/controllers/ProtectionKeyController.js"),o=r("./src/streaming/protection/ProtectionEvents.js"),u=r("./src/streaming/protection/errors/ProtectionErrors.js"),l=r("./src/streaming/protection/models/ProtectionModel_21Jan2015.js"),c=r("./src/streaming/protection/models/ProtectionModel_3Feb2014.js"),f=r("./src/streaming/protection/models/ProtectionModel_01b.js"),d=[{generateKeyRequest:"generateKeyRequest",addKey:"addKey",cancelKeyRequest:"cancelKeyRequest",needkey:"needkey",keyerror:"keyerror",keyadded:"keyadded",keymessage:"keymessage"},{generateKeyRequest:"webkitGenerateKeyRequest",addKey:"webkitAddKey",cancelKeyRequest:"webkitCancelKeyRequest",needkey:"webkitneedkey",keyerror:"webkitkeyerror",keyadded:"webkitkeyadded",keymessage:"webkitkeymessage"}],h=[{setMediaKeys:"setMediaKeys",MediaKeys:"MediaKeys",release:"close",needkey:"needkey",error:"keyerror",message:"keymessage",ready:"keyadded",close:"keyclose"},{setMediaKeys:"msSetMediaKeys",MediaKeys:"MSMediaKeys",release:"close",needkey:"msneedkey",error:"mskeyerror",message:"mskeymessage",ready:"mskeyadded",close:"mskeyclose"}];function p(){var e,t=this.context;function r(e,t){for(var r=0;r<t.length;r++){var n=t[r];if("function"==typeof e[n[Object.keys(n)[0]]])return n}return null}return e={createProtectionSystem:function(o){var u,p,m,g,y,v=null,b=Object(i.default)(t).getInstance();b.setConfig({debug:o.debug,BASE64:o.BASE64,settings:o.settings}),b.initialize();var _=(p=(u=o.debug).getLogger(e),m=o.eventBus,g=o.errHandler,(y=o.videoModel?o.videoModel.getElement():null)&&void 0===y.onencrypted||y&&void 0===y.mediaKeys?r(y,h)?(p.info("EME detected on this user agent! (ProtectionModel_3Feb2014)"),Object(c.default)(t).create({debug:u,eventBus:m,events:o.events,api:r(y,h)})):r(y,d)?(p.info("EME detected on this user agent! (ProtectionModel_01b)"),Object(f.default)(t).create({debug:u,eventBus:m,errHandler:g,events:o.events,api:r(y,d)})):(p.warn("No supported version of EME detected on this user agent! - Attempts to play encrypted content will fail!"),null):(p.info("EME detected on this user agent! (ProtectionModel_21Jan2015)"),Object(l.default)(t).create({debug:u,eventBus:m,events:o.events})));return!v&&_&&(v=Object(n.default)(t).create({protectionModel:_,protectionKeyController:b,eventBus:o.eventBus,debug:o.debug,events:o.events,BASE64:o.BASE64,constants:o.constants,cmcdModel:o.cmcdModel,customParametersModel:o.customParametersModel,settings:o.settings}),o.capabilities.setEncryptedMediaSupported(!0)),v}}}p.__dashjs_factory_name="Protection";var m=dashjs.FactoryMaker.getClassFactory(p);m.events=o.default,m.errors=u.default,dashjs.FactoryMaker.updateClassFactory(p.__dashjs_factory_name,m),t.default=m},"./src/streaming/protection/ProtectionEvents.js":function(e,t,r){function n(e){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function i(e,t){return(i=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function o(e){return(o=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}r.r(t);var u=new(function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&i(e,t)}(u,e);var t,r=(t=function(){if("undefined"==typeof Reflect||!Reflect.construct||Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}(),function(){var e,r=o(u);if(t){var i=o(this).constructor;e=Reflect.construct(r,arguments,i)}else e=r.apply(this,arguments);return function(e,t){if(t&&("object"===n(t)||"function"==typeof t))return t;if(void 0!==t)throw TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,e)});function u(){var e;return function(e,t){if(!(e instanceof t))throw TypeError("Cannot call a class as a function")}(this,u),(e=r.call(this)).INTERNAL_KEY_MESSAGE="internalKeyMessage",e.INTERNAL_KEY_STATUS_CHANGED="internalkeyStatusChanged",e.KEY_ADDED="public_keyAdded",e.KEY_ERROR="public_keyError",e.KEY_MESSAGE="public_keyMessage",e.KEY_SESSION_CLOSED="public_keySessionClosed",e.KEY_SESSION_CREATED="public_keySessionCreated",e.KEY_SESSION_REMOVED="public_keySessionRemoved",e.KEY_STATUSES_CHANGED="public_keyStatusesChanged",e.KEY_SYSTEM_ACCESS_COMPLETE="public_keySystemAccessComplete",e.KEY_SYSTEM_SELECTED="public_keySystemSelected",e.LICENSE_REQUEST_COMPLETE="public_licenseRequestComplete",e.LICENSE_REQUEST_SENDING="public_licenseRequestSending",e.NEED_KEY="needkey",e.PROTECTION_CREATED="public_protectioncreated",e.PROTECTION_DESTROYED="public_protectiondestroyed",e.SERVER_CERTIFICATE_UPDATED="serverCertificateUpdated",e.TEARDOWN_COMPLETE="protectionTeardownComplete",e.VIDEO_ELEMENT_SELECTED="videoElementSelected",e.KEY_SESSION_UPDATED="public_keySessionUpdated",e}return Object.defineProperty(u,"prototype",{writable:!1}),u}(r("./src/core/events/EventsBase.js").default));t.default=u},"./src/streaming/protection/controllers/ProtectionController.js":function(e,t,r){r.r(t);var n=r("./src/streaming/protection/CommonEncryption.js"),i=r("./src/streaming/protection/vo/MediaCapability.js"),o=r("./src/streaming/protection/vo/KeySystemConfiguration.js"),u=r("./src/streaming/protection/errors/ProtectionErrors.js"),l=r("./src/streaming/vo/DashJSError.js"),c=r("./src/streaming/protection/vo/LicenseRequest.js"),f=r("./src/streaming/protection/vo/LicenseResponse.js"),d=r("./src/streaming/vo/metrics/HTTPRequest.js"),h=r("./src/core/Utils.js"),p=r("./src/streaming/constants/Constants.js"),m=r("./src/core/FactoryMaker.js");function g(e){return(g="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function y(e){var t,r,m,y,v,b,_,T,E,S,w,A=(e=e||{}).protectionKeyController,C=e.protectionModel,I=e.eventBus,O=e.events,R=e.debug,P=e.BASE64,k=e.constants,D=[],N=e.cmcdModel,L=e.settings,x=e.customParametersModel;function j(){if(!(I&&I.hasOwnProperty("on")&&A&&A.hasOwnProperty("getSupportedKeySystemsFromContentProtection")))throw Error("Missing config parameter(s)")}function M(e,t){T||E?T&&F():function(e,t){if(!E){E=!0;var n,c=[];e=e.sort(function(t,r){return(v&&v[t.ks.systemString]&&v[t.ks.systemString].priority>=0?v[t.ks.systemString].priority:e.length)-(v&&v[r.ks.systemString]&&v[r.ks.systemString].priority>=0?v[r.ks.systemString].priority:e.length)});for(var f=0;f<e.length;f++){var d=function(e){var t=e.protData,r=[],n=[],u=t&&t.audioRobustness&&t.audioRobustness.length>0?t.audioRobustness:_,l=t&&t.videoRobustness&&t.videoRobustness.length>0?t.videoRobustness:_,c=e.sessionType,f=t&&t.distinctiveIdentifier?t.distinctiveIdentifier:"optional",d=t&&t.persistentState?t.persistentState:"temporary"===c?"optional":"required";return y.forEach(function(e){e.type===k.AUDIO?r.push(new i.default(e.codec,u)):e.type===k.VIDEO&&n.push(new i.default(e.codec,l))}),new o.default(r,n,f,d,[c])}(e[f]);c.push({ks:e[f].ks,configs:[d],protData:e[f].protData})}C.requestKeySystemAccess(c).then(function(e){var t=(n=e.data).mksa&&n.mksa.selectedSystemString?n.mksa.selectedSystemString:n.keySystem.systemString;return r.info("DRM: KeySystem Access Granted for system string ("+t+")!  Selecting key system..."),C.selectKeySystem(n)}).then(function(e){if(T=e,E=!1,C){I.trigger(O.KEY_SYSTEM_SELECTED,{data:n});var t=q(T);t&&t.serverCertificate&&t.serverCertificate.length>0&&C.setServerCertificate(P.decodeArray(t.serverCertificate).buffer),F()}}).catch(function(e){T=null,E=!1,t||I.trigger(O.KEY_SYSTEM_SELECTED,{data:null,error:new l.default(u.default.KEY_SYSTEM_ACCESS_DENIED_ERROR_CODE,u.default.KEY_SYSTEM_ACCESS_DENIED_ERROR_MESSAGE+"Error selecting key system! -- "+e.error)})})}}(e,t)}function F(){for(var e,t=0;t<m.length;t++)for(e=0;e<m[t].length;e++)if(T===m[t][e].ks){(function(e){if(A.isClearKey(T)&&e.protData&&e.protData.hasOwnProperty("clearkeys")&&0!==Object.keys(e.protData.clearkeys).length){var t={kids:Object.keys(e.protData.clearkeys)};e.initData=(new TextEncoder).encode(JSON.stringify(t))}e.sessionId?B(e):null!==e.initData&&U(e)})(m[t][e]);break}m=[]}function B(e){j(),C.loadKeySession(e)}function U(e){var t=n.default.getPSSHForKeySystem(T,e?e.initData:null);if(t){if(function(e){if(!e)return!1;try{for(var t=C.getSessions(),r=0;r<t.length;r++)if(t[r].getKeyId()===e)return!0;return!1}catch(e){return!1}}(e.keyId)||H(t))return;try{e.initData=t,C.createKeySession(e)}catch(e){I.trigger(O.KEY_SESSION_CREATED,{data:null,error:new l.default(u.default.KEY_SESSION_CREATED_ERROR_CODE,u.default.KEY_SESSION_CREATED_ERROR_MESSAGE+e.message)})}}else e&&e.initData?C.createKeySession(e):I.trigger(O.KEY_SESSION_CREATED,{data:null,error:new l.default(u.default.KEY_SESSION_CREATED_ERROR_CODE,u.default.KEY_SESSION_CREATED_ERROR_MESSAGE+"Selected key system is "+(T?T.systemString:null)+".  needkey/encrypted event contains no initData corresponding to that key system!")})}function q(e){if(e){var t=e.systemString;if(v)return t in v?v[t]:null}return null}function H(e){if(!e)return!1;try{for(var t=C.getAllInitData(),n=0;n<t.length;n++)if(A.initDataEquals(e,t[n]))return r.debug("DRM: Ignoring initData because we have already seen it!"),!0;return!1}catch(e){return!1}}function V(e){j(),e?(C.setMediaElement(e),I.on(O.NEED_KEY,$,t)):null===e&&(C.setMediaElement(e),I.off(O.NEED_KEY,$,t))}function G(e){e.error?I.trigger(O.KEY_STATUSES_CHANGED,{data:null,error:e.error}):r.debug("DRM: key status = "+e.status)}function Y(e){r.debug("DRM: onKeyMessage");var t=e.data;I.trigger(O.KEY_MESSAGE,{data:t});var i=t.messageType?t.messageType:"license-request",o=t.message,m=t.sessionToken,v=q(T),b=A.getLicenseServerModelInstance(T,v,i),_={sessionToken:m,messageType:i};if(o&&0!==o.byteLength){if(!b)return r.debug("DRM: License server request not required for this message (type = "+e.data.messageType+").  Session ID = "+m.getSessionId()),void z(_);if(A.isClearKey(T)){var E=A.processClearKeyLicenseRequest(T,v,o);if(E&&E.keyPairs&&E.keyPairs.length>0)return r.debug("DRM: ClearKey license request handled by application!"),z(_),void C.updateKeySession(m,E)}!function(e,t,i){var o=e.sessionToken,m=e.messageType?e.messageType:"license-request",v={sessionToken:o,messageType:m},b=T?T.systemString:null,_=function(e,t,r,i,o){var u=null,l=i.message;if(e&&e.serverURL){var c=e.serverURL;"string"==typeof c&&""!==c?u=c:"object"===g(c)&&c.hasOwnProperty(t)&&(u=c[t])}else if(e&&e.laURL&&""!==e.laURL)u=e.laURL;else if(!(u=n.default.getLicenseServerUrlFromMediaInfo(y,T.schemeIdURI))&&!A.isClearKey(T)){var f=n.default.getPSSHData(r.initData);(u=T.getLicenseServerURLFromInitData(f))||(u=i.laURL)}return o.getServerURLFromMessage(u,l,t)}(i,m,o,e,t);if(_){var E={},R=!1;i&&W(E,i.httpRequestHeaders);var P=e.message;W(E,T.getRequestHeadersFromMessage(P)),Object.keys(E).forEach(function(e){"authorization"===e.toLowerCase()&&(R=!0)}),i&&"boolean"==typeof i.withCredentials&&(R=i.withCredentials);var k=function(e){if(C){if(e.status>=200&&e.status<=299){var r=h.default.parseHttpHeaders(e.getAllResponseHeaders?e.getAllResponseHeaders():null),n=new f.default(e.responseURL,r,e.response);Q(x.getLicenseResponseFilters(),n).then(function(){var r=t.getLicenseMessage(n.data,b,m);null!==r?(z(v),C.updateKeySession(o,r)):X(e,v,b,m,t)})}else X(e,v,b,m,t)}},D=function(e){z(v,new l.default(u.default.MEDIA_KEY_MESSAGE_LICENSER_ERROR_CODE,u.default.MEDIA_KEY_MESSAGE_LICENSER_ERROR_MESSAGE+b+' update, XHR aborted. status is "'+e.statusText+'" ('+e.status+"), readyState is "+e.readyState))},j=function(e){z(v,new l.default(u.default.MEDIA_KEY_MESSAGE_LICENSER_ERROR_CODE,u.default.MEDIA_KEY_MESSAGE_LICENSER_ERROR_MESSAGE+b+' update, XHR error. status is "'+e.statusText+'" ('+e.status+"), readyState is "+e.readyState))},M=T.getLicenseRequestFromMessage(P),F=t.getHTTPMethod(m),B=t.getResponseType(b,m),U=i&&!isNaN(i.httpTimeout)?i.httpTimeout:8e3,q=o.getSessionId()||null,H=new c.default(_,F,B,E,R,m,q,M),V=isNaN(L.get().streaming.retryAttempts[d.HTTPRequest.LICENSE])?3:L.get().streaming.retryAttempts[d.HTTPRequest.LICENSE];Q(x.getLicenseRequestFilters(),H).then(function(){(function e(t,n,i,o,u,l){var c=new XMLHttpRequest;if(L.get().streaming.cmcd&&L.get().streaming.cmcd.enabled&&L.get().streaming.cmcd.mode===p.default.CMCD_MODE_QUERY){var f=N.getQueryParameter({url:t.url,type:d.HTTPRequest.LICENSE});f&&(t.url=h.default.addAditionalQueryParameterToUrl(t.url,[f]))}for(var m in c.open(t.method,t.url,!0),c.responseType=t.responseType,c.withCredentials=t.withCredentials,i>0&&(c.timeout=i),t.headers)c.setRequestHeader(m,t.headers[m]);if(L.get().streaming.cmcd&&L.get().streaming.cmcd.enabled&&L.get().streaming.cmcd.mode===p.default.CMCD_MODE_HEADER){var g=N.getHeaderParameters({url:t.url,type:d.HTTPRequest.LICENSE});if(g)for(var y in g){var v=g[y];v&&c.setRequestHeader(y,v)}}var b=function(){n--,w=setTimeout(function(){e(t,n,i,o,u,l)},isNaN(L.get().streaming.retryIntervals[d.HTTPRequest.LICENSE])?1e3:L.get().streaming.retryIntervals[d.HTTPRequest.LICENSE])};c.onload=function(){S=null,this.status>=200&&this.status<=299||n<=0?o(this):(r.warn("License request failed ("+this.status+"). Retrying it... Pending retries: "+n),b())},c.ontimeout=c.onerror=function(){S=null,n<=0?l(this):(r.warn("License request network request failed . Retrying it... Pending retries: "+n),b())},c.onabort=function(){u(this)},I.trigger(O.LICENSE_REQUEST_SENDING,{url:t.url,headers:t.headers,payload:t.data,sessionId:t.sessionId}),S=c,c.send(t.data)})(H,V,U,k,D,j)})}else z(v,new l.default(u.default.MEDIA_KEY_MESSAGE_NO_LICENSE_SERVER_URL_ERROR_CODE,u.default.MEDIA_KEY_MESSAGE_NO_LICENSE_SERVER_URL_ERROR_MESSAGE))}(t,b,v)}else z(_,new l.default(u.default.MEDIA_KEY_MESSAGE_NO_CHALLENGE_ERROR_CODE,u.default.MEDIA_KEY_MESSAGE_NO_CHALLENGE_ERROR_MESSAGE))}function z(e,t){I.trigger(O.LICENSE_REQUEST_COMPLETE,{data:e,error:t})}function K(){S&&(S.onloadend=S.onerror=S.onprogress=void 0,S.abort(),S=null),w&&(clearTimeout(w),w=null)}function W(e,t){if(t)for(var r in t)e[r]=t[r]}function X(e,t,r,n,i){var o="NONE",c=null;e.response&&(o=i.getErrorResponse(e.response,r,n),c={serverResponse:e.response||null,responseCode:e.status||null,responseText:e.statusText||null}),z(t,new l.default(u.default.MEDIA_KEY_MESSAGE_LICENSER_ERROR_CODE,u.default.MEDIA_KEY_MESSAGE_LICENSER_ERROR_MESSAGE+r+' update, XHR complete. status is "'+e.statusText+'" ('+e.status+"), readyState is "+e.readyState+".  Response is "+o,c))}function Q(e,t){return e?e.reduce(function(e,r){return e.then(function(){return r(t)})},Promise.resolve()):Promise.resolve()}function $(e,t){if(!L.get().streaming.protection.ignoreEmeEncryptedEvent){if(r.debug("DRM: onNeedKey"),"cenc"!==e.key.initDataType)return void r.warn("DRM:  Only 'cenc' initData is supported!  Ignoring initData of type: "+e.key.initDataType);if(0===y.length&&(r.warn("DRM: onNeedKey called before initializeForMedia, wait until initialized"),(t=void 0===t?1:t+1)<5))return void D.push(setTimeout(function(){$(e,t)},500));var i=e.key.initData;if(ArrayBuffer.isView(i)&&(i=i.buffer),T){var o=n.default.getPSSHForKeySystem(T,i);if(o&&H(o))return}r.debug("DRM: initData:",String.fromCharCode.apply(null,new Uint8Array(i)));var u=A.getSupportedKeySystemsFromSegmentPssh(i,v,b);if(0===u.length)return void r.debug("DRM: Received needkey event with initData, but we don't support any of the key systems!");m.push(u),M(u,!1)}}return t={initializeForMedia:function(e){if(!e)throw Error("mediaInfo can not be null or undefined");j(),y.push(e)},clearMediaInfoArray:function(){y=[]},handleKeySystemFromManifest:function(){if(y&&0!==y.length){var e=[];y.forEach(function(t){var r=A.getSupportedKeySystemsFromContentProtection(t.contentProtection,v,b);r.length>0&&(0===e.length&&(e=r),m.push(r))}),e&&e.length>0&&M(e,!0)}},createKeySession:U,loadKeySession:B,removeKeySession:function(e){j(),C.removeKeySession(e)},closeKeySession:function(e){j(),C.closeKeySession(e)},setServerCertificate:function(e){j(),C.setServerCertificate(e)},setMediaElement:V,setSessionType:function(e){b=e},setRobustnessLevel:function(e){_=e},setProtectionData:function(e){v=e,A.setProtectionData(e)},getSupportedKeySystemsFromContentProtection:function(e){return j(),A.getSupportedKeySystemsFromContentProtection(e,v,b)},getKeySystems:function(){return A?A.getKeySystems():[]},setKeySystems:function(e){A&&A.setKeySystems(e)},stop:function(){K(),C&&C.stop()},reset:function(){I.off(O.INTERNAL_KEY_MESSAGE,Y,t),I.off(O.INTERNAL_KEY_STATUS_CHANGED,G,t),j(),K(),V(null),T=null,E=!1,C&&(C.reset(),C=null),D.forEach(function(e){return clearTimeout(e)}),D=[],y=[],m=[]}},r=R.getLogger(t),m=[],y=[],b="temporary",_="",S=null,w=null,I.on(O.INTERNAL_KEY_MESSAGE,Y,t),I.on(O.INTERNAL_KEY_STATUS_CHANGED,G,t),t}y.__dashjs_factory_name="ProtectionController",t.default=m.default.getClassFactory(y)},"./src/streaming/protection/controllers/ProtectionKeyController.js":function(e,t,r){r.r(t);var n=r("./src/streaming/protection/CommonEncryption.js"),i=r("./src/streaming/protection/drm/KeySystemClearKey.js"),o=r("./src/streaming/protection/drm/KeySystemW3CClearKey.js"),u=r("./src/streaming/protection/drm/KeySystemWidevine.js"),l=r("./src/streaming/protection/drm/KeySystemPlayReady.js"),c=r("./src/streaming/protection/servers/DRMToday.js"),f=r("./src/streaming/protection/servers/PlayReady.js"),d=r("./src/streaming/protection/servers/Widevine.js"),h=r("./src/streaming/protection/servers/ClearKey.js"),p=r("./src/streaming/constants/ProtectionConstants.js");function m(){var e,t,r,m,g,y,v,b,_=this.context;function T(e,t){return t&&e in t?t[e]:null}function E(e,t){return e&&e.sessionId?e.sessionId:t&&t.sessionId?t.sessionId:null}function S(e,t){return e&&e.sessionType?e.sessionType:t}return e={initialize:function(){var e;m=[],e=Object(l.default)(_).getInstance({BASE64:g,settings:y}),m.push(e),e=Object(u.default)(_).getInstance({BASE64:g}),m.push(e),e=Object(i.default)(_).getInstance({BASE64:g}),m.push(e),v=e,e=Object(o.default)(_).getInstance({BASE64:g,debug:t}),m.push(e),b=e},setProtectionData:function(e){for(var t,r,n=0;n<m.length;n++){var i=m[n];i.hasOwnProperty("init")&&i.init((t=i.systemString,r=void 0,r=null,e&&(r=t in e?e[t]:null),r))}},isClearKey:function(e){return e===v||e===b},initDataEquals:function(e,t){if(e.byteLength===t.byteLength){for(var r=new Uint8Array(e),n=new Uint8Array(t),i=0;i<r.length;i++)if(r[i]!==n[i])return!1;return!0}return!1},getKeySystems:function(){return m},setKeySystems:function(e){m=e},getKeySystemBySystemString:function(e){for(var t=0;t<m.length;t++)if(m[t].systemString===e)return m[t];return null},getSupportedKeySystemsFromContentProtection:function(e,t,r){var i,o,u,l,c=[];if(e){var f=n.default.findCencContentProtection(e);for(u=0;u<m.length;++u){var d=T((o=m[u]).systemString,t);for(l=0;l<e.length;++l)if((i=e[l]).schemeIdUri.toLowerCase()===o.schemeIdURI){var h=o.getInitData(i,f);c.push({ks:m[u],keyId:i.keyId,initData:h,protData:d,cdmData:o.getCDMData(d?d.cdmData:null),sessionId:E(d,i),sessionType:S(d,r)})}}}return c},getSupportedKeySystemsFromSegmentPssh:function(e,t,r){for(var i,o=[],u=n.default.parsePSSHList(e),l=0;l<m.length;++l){var c=T((i=m[l]).systemString,t);i.uuid in u&&o.push({ks:i,initData:u[i.uuid],protData:c,cdmData:i.getCDMData(c?c.cdmData:null),sessionId:E(c),sessionType:S(c,r)})}return o},getLicenseServerModelInstance:function(e,t,r){if("license-release"===r||"individualization-request"===r)return null;var n=null;return t&&t.hasOwnProperty("drmtoday")?n=Object(c.default)(_).getInstance({BASE64:g}):e.systemString===p.default.WIDEVINE_KEYSTEM_STRING?n=Object(d.default)(_).getInstance():e.systemString===p.default.PLAYREADY_KEYSTEM_STRING?n=Object(f.default)(_).getInstance():e.systemString===p.default.CLEARKEY_KEYSTEM_STRING&&(n=Object(h.default)(_).getInstance()),n},processClearKeyLicenseRequest:function(e,t,n){try{return e.getClearKeysFromProtectionData(t,n)}catch(e){return r.error("Failed to retrieve clearkeys from ProtectionData"),null}},setConfig:function(n){n&&(n.debug&&(r=(t=n.debug).getLogger(e)),n.BASE64&&(g=n.BASE64),n.settings&&(y=n.settings))}}}m.__dashjs_factory_name="ProtectionKeyController",t.default=dashjs.FactoryMaker.getSingletonFactory(m)},"./src/streaming/protection/drm/KeySystemClearKey.js":function(e,t,r){r.r(t);var n=r("./src/streaming/protection/vo/KeyPair.js"),i=r("./src/streaming/protection/vo/ClearKeyKeySet.js"),o=r("./src/streaming/protection/CommonEncryption.js"),u=r("./src/streaming/constants/ProtectionConstants.js"),l="e2719d58-a985-b3c9-781a-b030af78d30e",c=u.default.CLEARKEY_KEYSTEM_STRING,f="urn:uuid:"+l;function d(e){var t=(e=e||{}).BASE64;return{uuid:l,schemeIdURI:f,systemString:c,getInitData:function(e,r){try{var n=o.default.parseInitDataFromContentProtection(e,t);if(!n&&r){var i={kids:[function(e){try{var t=e.replace(/-/g,"");return(t=btoa(t.match(/\w{2}/g).map(function(e){return String.fromCharCode(parseInt(e,16))}).join(""))).replace(/=/g,"").replace(/\//g,"_").replace(/\+/g,"-")}catch(e){return null}}(r["cenc:default_KID"])]};n=(new TextEncoder).encode(JSON.stringify(i))}return n}catch(e){return null}},getRequestHeadersFromMessage:function(){return{"Content-Type":"application/json"}},getLicenseRequestFromMessage:function(e){return JSON.stringify(JSON.parse(String.fromCharCode.apply(null,new Uint8Array(e))))},getLicenseServerURLFromInitData:function(){return null},getCDMData:function(){return null},getClearKeysFromProtectionData:function(e,t){var r=null;if(e){for(var o=JSON.parse(String.fromCharCode.apply(null,new Uint8Array(t))),u=[],l=0;l<o.kids.length;l++){var c=o.kids[l],f=e.clearkeys&&e.clearkeys.hasOwnProperty(c)?e.clearkeys[c]:null;if(!f)throw Error("DRM: ClearKey keyID ("+c+") is not known!");u.push(new n.default(c,f))}r=new i.default(u)}return r}}}d.__dashjs_factory_name="KeySystemClearKey",t.default=dashjs.FactoryMaker.getSingletonFactory(d)},"./src/streaming/protection/drm/KeySystemPlayReady.js":function(e,t,r){r.r(t);var n=r("./src/streaming/protection/CommonEncryption.js"),i=r("./src/streaming/constants/ProtectionConstants.js"),o="9a04f079-9840-4286-ab92-e65be0885f95",u=i.default.PLAYREADY_KEYSTEM_STRING,l="urn:uuid:"+o;function c(e){var t="utf-16",r=(e=e||{}).BASE64,i=e.settings;function c(){if(!r||!r.hasOwnProperty("decodeArray")||!r.hasOwnProperty("decodeArray"))throw Error("Missing config parameter(s)")}return{uuid:o,schemeIdURI:l,systemString:u,getInitData:function(e){var t,i,o,u,l,f=new Uint8Array([112,115,115,104,0,0,0,0]),d=new Uint8Array([154,4,240,121,152,64,66,134,171,146,230,91,224,136,95,149]),h=0,p=null;if(c(),!e)return null;if("pssh"in e)return n.default.parseInitDataFromContentProtection(e,r);if("pro"in e)p=r.decodeArray(e.pro.__text);else{if(!("prheader"in e))return null;p=r.decodeArray(e.prheader.__text)}return t=p.length,i=4+f.length+d.length+4+t,o=new ArrayBuffer(i),u=new Uint8Array(o),(l=new DataView(o)).setUint32(h,i),h+=4,u.set(f,h),h+=f.length,u.set(d,h),h+=d.length,l.setUint32(h,t),h+=4,u.set(p,h),h+=t,u.buffer},getRequestHeadersFromMessage:function(e){var r,n,o={},u=new DOMParser;if(i&&i.get().streaming.protection.detectPlayreadyMessageFormat&&"utf-16"===t&&e&&e.byteLength%2==1)return o["Content-Type"]="text/xml; charset=utf-8",o;var l="utf-16"===t?new Uint16Array(e):new Uint8Array(e);r=String.fromCharCode.apply(null,l);for(var c=(n=u.parseFromString(r,"application/xml")).getElementsByTagName("name"),f=n.getElementsByTagName("value"),d=0;d<c.length;d++)o[c[d].childNodes[0].nodeValue]=f[d].childNodes[0].nodeValue;return o.hasOwnProperty("Content")&&(o["Content-Type"]=o.Content,delete o.Content),o.hasOwnProperty("Content-Type")||(o["Content-Type"]="text/xml; charset=utf-8"),o},getLicenseRequestFromMessage:function(e){var n=null,o=new DOMParser;if(i&&i.get().streaming.protection.detectPlayreadyMessageFormat&&"utf-16"===t&&e&&e.byteLength%2==1)return e;var u="utf-16"===t?new Uint16Array(e):new Uint8Array(e);c();var l=String.fromCharCode.apply(null,u),f=o.parseFromString(l,"application/xml");if(!f.getElementsByTagName("PlayReadyKeyMessage")[0])return e;var d=f.getElementsByTagName("Challenge")[0].childNodes[0].nodeValue;return d&&(n=r.decode(d)),n},getLicenseServerURLFromInitData:function(e){if(e)for(var t=new DataView(e),r=t.getUint16(4,!0),n=6,i=new DOMParser,o=0;o<r;o++){var u=t.getUint16(n,!0);n+=2;var l=t.getUint16(n,!0);if(n+=2,1===u){var c=e.slice(n,n+l),f=String.fromCharCode.apply(null,new Uint16Array(c)),d=i.parseFromString(f,"application/xml");if(d.getElementsByTagName("LA_URL")[0]){var h=d.getElementsByTagName("LA_URL")[0].childNodes[0].nodeValue;if(h)return h}if(d.getElementsByTagName("LUI_URL")[0]){var p=d.getElementsByTagName("LUI_URL")[0].childNodes[0].nodeValue;if(p)return p}}else n+=l}return null},getCDMData:function(e){var t,n,i,o;if(c(),!e)return null;for(t=[],o=0;o<e.length;++o)t.push(e.charCodeAt(o)),t.push(0);for(t=String.fromCharCode.apply(null,t),t=r.encode(t),n='<PlayReadyCDMData type="LicenseAcquisition"><LicenseAcquisition version="1.0" Proactive="false"><CustomData encoding="base64encoded">%CUSTOMDATA%</CustomData></LicenseAcquisition></PlayReadyCDMData>'.replace("%CUSTOMDATA%",t),i=[],o=0;o<n.length;++o)i.push(n.charCodeAt(o)),i.push(0);return new Uint8Array(i).buffer},setPlayReadyMessageFormat:function(e){if("utf-8"!==e&&"utf-16"!==e)throw Error('Specified message format is not one of "utf-8" or "utf-16"');t=e}}}c.__dashjs_factory_name="KeySystemPlayReady",t.default=dashjs.FactoryMaker.getSingletonFactory(c)},"./src/streaming/protection/drm/KeySystemW3CClearKey.js":function(e,t,r){r.r(t);var n=r("./src/streaming/protection/vo/KeyPair.js"),i=r("./src/streaming/protection/vo/ClearKeyKeySet.js"),o=r("./src/streaming/protection/CommonEncryption.js"),u=r("./src/streaming/constants/ProtectionConstants.js"),l="1077efec-c0b2-4d02-ace3-3c1e52e2fb4b",c=u.default.CLEARKEY_KEYSTEM_STRING,f="urn:uuid:"+l;function d(e){var t,r=e.BASE64,u=e.debug.getLogger(t);return{uuid:l,schemeIdURI:f,systemString:c,getInitData:function(e){return o.default.parseInitDataFromContentProtection(e,r)},getRequestHeadersFromMessage:function(){return null},getLicenseRequestFromMessage:function(e){return new Uint8Array(e)},getLicenseServerURLFromInitData:function(){return null},getCDMData:function(){return null},getClearKeysFromProtectionData:function(e,t){var r=null;if(e){for(var o=JSON.parse(String.fromCharCode.apply(null,new Uint8Array(t))),l=[],c=0;c<o.kids.length;c++){var f=o.kids[c],d=e.clearkeys&&e.clearkeys.hasOwnProperty(f)?e.clearkeys[f]:null;if(!d)throw Error("DRM: ClearKey keyID ("+f+") is not known!");l.push(new n.default(f,d))}r=new i.default(l),u.warn("ClearKey schemeIdURI is using W3C Common PSSH systemID (1077efec-c0b2-4d02-ace3-3c1e52e2fb4b) in Content Protection. See DASH-IF IOP v4.1 section 7.6.2.4")}return r}}}d.__dashjs_factory_name="KeySystemW3CClearKey",t.default=dashjs.FactoryMaker.getSingletonFactory(d)},"./src/streaming/protection/drm/KeySystemWidevine.js":function(e,t,r){r.r(t);var n=r("./src/streaming/protection/CommonEncryption.js"),i=r("./src/streaming/constants/ProtectionConstants.js"),o="edef8ba9-79d6-4ace-a3c8-27dcd51d21ed",u=i.default.WIDEVINE_KEYSTEM_STRING,l="urn:uuid:"+o;function c(e){var t=(e=e||{}).BASE64;return{uuid:o,schemeIdURI:l,systemString:u,getInitData:function(e){return n.default.parseInitDataFromContentProtection(e,t)},getRequestHeadersFromMessage:function(){return null},getLicenseRequestFromMessage:function(e){return new Uint8Array(e)},getLicenseServerURLFromInitData:function(){return null},getCDMData:function(){return null}}}c.__dashjs_factory_name="KeySystemWidevine",t.default=dashjs.FactoryMaker.getSingletonFactory(c)},"./src/streaming/protection/errors/ProtectionErrors.js":function(e,t,r){function n(e){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function i(e,t){return(i=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function o(e){return(o=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}r.r(t);var u=new(function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&i(e,t)}(u,e);var t,r=(t=function(){if("undefined"==typeof Reflect||!Reflect.construct||Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}(),function(){var e,r=o(u);if(t){var i=o(this).constructor;e=Reflect.construct(r,arguments,i)}else e=r.apply(this,arguments);return function(e,t){if(t&&("object"===n(t)||"function"==typeof t))return t;if(void 0!==t)throw TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,e)});function u(){var e;return function(e,t){if(!(e instanceof t))throw TypeError("Cannot call a class as a function")}(this,u),(e=r.call(this)).MEDIA_KEYERR_CODE=100,e.MEDIA_KEYERR_UNKNOWN_CODE=101,e.MEDIA_KEYERR_CLIENT_CODE=102,e.MEDIA_KEYERR_SERVICE_CODE=103,e.MEDIA_KEYERR_OUTPUT_CODE=104,e.MEDIA_KEYERR_HARDWARECHANGE_CODE=105,e.MEDIA_KEYERR_DOMAIN_CODE=106,e.MEDIA_KEY_MESSAGE_ERROR_CODE=107,e.MEDIA_KEY_MESSAGE_NO_CHALLENGE_ERROR_CODE=108,e.SERVER_CERTIFICATE_UPDATED_ERROR_CODE=109,e.KEY_STATUS_CHANGED_EXPIRED_ERROR_CODE=110,e.MEDIA_KEY_MESSAGE_NO_LICENSE_SERVER_URL_ERROR_CODE=111,e.KEY_SYSTEM_ACCESS_DENIED_ERROR_CODE=112,e.KEY_SESSION_CREATED_ERROR_CODE=113,e.MEDIA_KEY_MESSAGE_LICENSER_ERROR_CODE=114,e.MEDIA_KEYERR_UNKNOWN_MESSAGE="An unspecified error occurred. This value is used for errors that don't match any of the other codes.",e.MEDIA_KEYERR_CLIENT_MESSAGE="The Key System could not be installed or updated.",e.MEDIA_KEYERR_SERVICE_MESSAGE="The message passed into update indicated an error from the license service.",e.MEDIA_KEYERR_OUTPUT_MESSAGE="There is no available output device with the required characteristics for the content protection system.",e.MEDIA_KEYERR_HARDWARECHANGE_MESSAGE="A hardware configuration change caused a content protection error.",e.MEDIA_KEYERR_DOMAIN_MESSAGE="An error occurred in a multi-device domain licensing configuration. The most common error is a failure to join the domain.",e.MEDIA_KEY_MESSAGE_ERROR_MESSAGE="Multiple key sessions were creates with a user-agent that does not support sessionIDs!! Unpredictable behavior ahead!",e.MEDIA_KEY_MESSAGE_NO_CHALLENGE_ERROR_MESSAGE="DRM: Empty key message from CDM",e.SERVER_CERTIFICATE_UPDATED_ERROR_MESSAGE="Error updating server certificate -- ",e.KEY_STATUS_CHANGED_EXPIRED_ERROR_MESSAGE="DRM: KeyStatusChange error! -- License has expired",e.MEDIA_KEY_MESSAGE_NO_LICENSE_SERVER_URL_ERROR_MESSAGE="DRM: No license server URL specified!",e.KEY_SYSTEM_ACCESS_DENIED_ERROR_MESSAGE="DRM: KeySystem Access Denied! -- ",e.KEY_SESSION_CREATED_ERROR_MESSAGE="DRM: unable to create session! --",e.MEDIA_KEY_MESSAGE_LICENSER_ERROR_MESSAGE="DRM: licenser error! --",e}return Object.defineProperty(u,"prototype",{writable:!1}),u}(r("./src/core/errors/ErrorsBase.js").default));t.default=u},"./src/streaming/protection/models/ProtectionModel_01b.js":function(e,t,r){r.r(t);var n=r("./src/streaming/protection/controllers/ProtectionKeyController.js"),i=r("./src/streaming/protection/vo/NeedKey.js"),o=r("./src/streaming/vo/DashJSError.js"),u=r("./src/streaming/protection/vo/KeyMessage.js"),l=r("./src/streaming/protection/vo/KeySystemConfiguration.js"),c=r("./src/streaming/protection/vo/KeySystemAccess.js"),f=r("./src/streaming/protection/errors/ProtectionErrors.js");function d(e){e=e||{};var t,r,d,h,p,m,g,y,v,b=this.context,_=e.eventBus,T=e.events,E=e.debug,S=e.api,w=e.errHandler;function A(){d&&O();for(var e=0;e<g.length;e++)C(g[e]);_.trigger(T.TEARDOWN_COMPLETE)}function C(e){try{d[S.cancelKeyRequest](h.systemString,e.sessionId)}catch(t){_.trigger(T.KEY_SESSION_CLOSED,{data:null,error:"Error closing session ("+e.sessionId+") "+t.message})}}function I(e,t){if(t&&e){for(var r=e.length,n=0;n<r;n++)if(e[n].sessionId==t)return e[n]}return null}function O(){d.removeEventListener(S.keyerror,v),d.removeEventListener(S.needkey,v),d.removeEventListener(S.keymessage,v),d.removeEventListener(S.keyadded,v)}return t={getAllInitData:function(){for(var e=[],t=0;t<m.length;t++)e.push(m[t].initData);for(var r=0;r<g.length;r++)e.push(g[r].initData);return e},getSessions:function(){return g.concat(m)},requestKeySystemAccess:function(e){return new Promise(function(t,r){var n=d;n||(n=document.createElement("video"));for(var i=!1,o=0;o<e.length;o++)for(var u=e[o].ks.systemString,f=e[o].configs,h=null,m=0;m<f.length;m++){var g=f[m].videoCapabilities;if(g&&0!==g.length){h=[];for(var y=0;y<g.length;y++)""!==n.canPlayType(g[y].contentType,u)&&h.push(g[y])}if(h&&(!h||0!==h.length)){i=!0;var v=new l.default(null,h),b=p.getKeySystemBySystemString(u),E=new c.default(b,v);_.trigger(T.KEY_SYSTEM_ACCESS_COMPLETE,{data:E}),t({data:E});break}}if(!i){var S="Key system access denied! -- No valid audio/video content configurations detected!";_.trigger(T.KEY_SYSTEM_ACCESS_COMPLETE,{error:S}),r({error:S})}})},selectKeySystem:function(e){return Promise.resolve(h=e.keySystem)},setMediaElement:function(e){if(d!==e){if(d){O();for(var t=0;t<g.length;t++)C(g[t]);g=[]}(d=e)&&(d.addEventListener(S.keyerror,v),d.addEventListener(S.needkey,v),d.addEventListener(S.keymessage,v),d.addEventListener(S.keyadded,v),_.trigger(T.VIDEO_ELEMENT_SELECTED))}},createKeySession:function(e){if(!h)throw Error("Can not create sessions until you have selected a key system");if(y||0===g.length){var t={sessionId:null,keyId:e.keyId,initData:e.initData,getKeyId:function(){return this.keyId},getSessionId:function(){return this.sessionId},getExpirationTime:function(){return NaN},getSessionType:function(){return"temporary"}};return m.push(t),d[S.generateKeyRequest](h.systemString,new Uint8Array(e.initData)),t}throw Error("Multiple sessions not allowed!")},updateKeySession:function(e,t){var r=e.sessionId;if(p.isClearKey(h))for(var n=0;n<t.keyPairs.length;n++)d[S.addKey](h.systemString,t.keyPairs[n].key,t.keyPairs[n].keyID,r);else d[S.addKey](h.systemString,new Uint8Array(t),new Uint8Array(e.initData),r);_.trigger(T.KEY_SESSION_UPDATED)},closeKeySession:C,setServerCertificate:function(){},loadKeySession:function(){},removeKeySession:function(){},stop:A,reset:A},r=E.getLogger(t),d=null,h=null,m=[],g=[],p=Object(n.default)(b).getInstance(),v={handleEvent:function(e){var t=null;switch(e.type){case S.needkey:var n=ArrayBuffer.isView(e.initData)?e.initData.buffer:e.initData;_.trigger(T.NEED_KEY,{key:new i.default(n,"cenc")});break;case S.keyerror:if((t=I(g,e.sessionId))||(t=I(m,e.sessionId)),t){var l=f.default.MEDIA_KEYERR_CODE,c="";switch(e.errorCode.code){case 1:l=f.default.MEDIA_KEYERR_UNKNOWN_CODE,c+="MEDIA_KEYERR_UNKNOWN - "+f.default.MEDIA_KEYERR_UNKNOWN_MESSAGE;break;case 2:l=f.default.MEDIA_KEYERR_CLIENT_CODE,c+="MEDIA_KEYERR_CLIENT - "+f.default.MEDIA_KEYERR_CLIENT_MESSAGE;break;case 3:l=f.default.MEDIA_KEYERR_SERVICE_CODE,c+="MEDIA_KEYERR_SERVICE - "+f.default.MEDIA_KEYERR_SERVICE_MESSAGE;break;case 4:l=f.default.MEDIA_KEYERR_OUTPUT_CODE,c+="MEDIA_KEYERR_OUTPUT - "+f.default.MEDIA_KEYERR_OUTPUT_MESSAGE;break;case 5:l=f.default.MEDIA_KEYERR_HARDWARECHANGE_CODE,c+="MEDIA_KEYERR_HARDWARECHANGE - "+f.default.MEDIA_KEYERR_HARDWARECHANGE_MESSAGE;break;case 6:l=f.default.MEDIA_KEYERR_DOMAIN_CODE,c+="MEDIA_KEYERR_DOMAIN - "+f.default.MEDIA_KEYERR_DOMAIN_MESSAGE}c+="  System Code = "+e.systemCode,_.trigger(T.KEY_ERROR,{error:new o.default(l,c,t)})}else r.error("No session token found for key error");break;case S.keyadded:(t=I(g,e.sessionId))||(t=I(m,e.sessionId)),t?(r.debug("DRM: Key added."),_.trigger(T.KEY_ADDED,{data:t})):r.debug("No session token found for key added");break;case S.keymessage:if((y=null!==e.sessionId&&void 0!==e.sessionId)?(t=I(g,e.sessionId))||!(m.length>0)||(t=m.shift(),g.push(t),t.sessionId=e.sessionId,_.trigger(T.KEY_SESSION_CREATED,{data:t})):m.length>0&&(t=m.shift(),g.push(t),0!==m.length&&w.error(new o.default(f.default.MEDIA_KEY_MESSAGE_ERROR_CODE,f.default.MEDIA_KEY_MESSAGE_ERROR_MESSAGE))),t){var d=ArrayBuffer.isView(e.message)?e.message.buffer:e.message;t.keyMessage=d,_.trigger(T.INTERNAL_KEY_MESSAGE,{data:new u.default(t,d,e.defaultURL)})}else r.warn("No session token found for key message")}}},t}d.__dashjs_factory_name="ProtectionModel_01b",t.default=dashjs.FactoryMaker.getClassFactory(d)},"./src/streaming/protection/models/ProtectionModel_21Jan2015.js":function(e,t,r){r.r(t);var n=r("./src/streaming/protection/controllers/ProtectionKeyController.js"),i=r("./src/streaming/protection/vo/NeedKey.js"),o=r("./src/streaming/protection/errors/ProtectionErrors.js"),u=r("./src/streaming/vo/DashJSError.js"),l=r("./src/streaming/protection/vo/KeyMessage.js"),c=r("./src/streaming/protection/vo/KeySystemAccess.js"),f=r("./src/streaming/constants/ProtectionConstants.js"),d={};function h(e){e=e||{};var t,r,h,p,m,g,y,v,b=this.context,_=e.eventBus,T=e.events,E=e.debug;function S(e){var t=e.session;return t.removeEventListener("keystatuseschange",e),t.removeEventListener("message",e),t.close()}function w(e){for(var t=0;t<g.length;t++)if(g[t]===e){g.splice(t,1);break}}function A(e){var t,r;return e&&e.length>0&&(e[0]&&("string"==typeof e[0]?t=e[0]:r=e[0]),e[1]&&("string"==typeof e[1]?t=e[1]:r=e[1])),{status:t,keyId:r}}function C(e,t){var n={session:e,keyId:t.keyId,initData:t.initData,sessionId:t.sessionId,sessionType:t.sessionType,handleEvent:function(e){switch(e.type){case"keystatuseschange":_.trigger(T.KEY_STATUSES_CHANGED,{data:this}),e.target.keyStatuses.forEach(function(){var e=A(arguments);"expired"===e.status?_.trigger(T.INTERNAL_KEY_STATUS_CHANGED,{error:new u.default(o.default.KEY_STATUS_CHANGED_EXPIRED_ERROR_CODE,o.default.KEY_STATUS_CHANGED_EXPIRED_ERROR_MESSAGE)}):_.trigger(T.INTERNAL_KEY_STATUS_CHANGED,e)});break;case"message":var t=ArrayBuffer.isView(e.message)?e.message.buffer:e.message;_.trigger(T.INTERNAL_KEY_MESSAGE,{data:new l.default(this,t,void 0,e.messageType)})}},getKeyId:function(){return this.keyId},getSessionId:function(){return e.sessionId},getSessionType:function(){return this.sessionType},getExpirationTime:function(){return e.expiration},getKeyStatuses:function(){return e.keyStatuses},getUsable:function(){var t=!1;return e.keyStatuses.forEach(function(){var e=A(arguments);"usable"===e.status&&(t=!0)}),t}};return e.addEventListener("keystatuseschange",n),e.addEventListener("message",n),e.closed.then(function(){w(n),r.debug("DRM: Session closed.  SessionID = "+n.getSessionId()),_.trigger(T.KEY_SESSION_CLOSED,{data:n.getSessionId()})}),g.push(n),n}return t={getAllInitData:function(){for(var e=[],t=0;t<g.length;t++)g[t].initData&&e.push(g[t].initData);return e},getSessions:function(){return g},requestKeySystemAccess:function(e){return new Promise(function(t,n){(function e(t,n,i,o){if(void 0===navigator.requestMediaKeySystemAccess||"function"!=typeof navigator.requestMediaKeySystemAccess){var u,l="Insecure origins are not allowed";return _.trigger(T.KEY_SYSTEM_ACCESS_COMPLETE,{error:l}),void o({error:l})}var f=t[n].protData&&t[n].protData.systemStringPriority?t[n].protData.systemStringPriority:null,h=t[n].configs,p=t[n].ks,m=p.systemString;(u=f||(d[m]?d[m]:[m]),new Promise(function(e,t){(function e(t,n,i,o,u){var l=t[i];r.debug("Requesting key system access for system string ".concat(l)),navigator.requestMediaKeySystemAccess(l,n).then(function(e){e.selectedSystemString=l,o(e)}).catch(function(r){i+1<t.length?e(t,n,i+1,o,u):u(r)})})(u,h,0,e,t)})).then(function(e){var t="function"==typeof e.getConfiguration?e.getConfiguration():null,r=new c.default(p,t);r.mksa=e,_.trigger(T.KEY_SYSTEM_ACCESS_COMPLETE,{data:r}),i({data:r})}).catch(function(r){if(n+1<t.length)e(t,n+1,i,o);else{var u="Key system access denied! ";_.trigger(T.KEY_SYSTEM_ACCESS_COMPLETE,{error:u+r.message}),o({error:u+r.message})}})})(e,0,t,n)})},selectKeySystem:function(e){return new Promise(function(t,r){e.mksa.createMediaKeys().then(function(t){return h=e.keySystem,m=t,p?p.setMediaKeys(m):Promise.resolve()}).then(function(){t(h)}).catch(function(){r({error:"Error selecting keys system ("+e.keySystem.systemString+")! Could not create MediaKeys -- TODO"})})})},setMediaElement:function(e){p!==e&&(p&&(p.removeEventListener("encrypted",y),p.setMediaKeys&&p.setMediaKeys(null)),(p=e)&&(p.addEventListener("encrypted",y),p.setMediaKeys&&m&&p.setMediaKeys(m)))},setServerCertificate:function(e){if(!h||!m)throw Error("Can not set server certificate until you have selected a key system");m.setServerCertificate(e).then(function(){r.info("DRM: License server certificate successfully updated."),_.trigger(T.SERVER_CERTIFICATE_UPDATED)}).catch(function(e){_.trigger(T.SERVER_CERTIFICATE_UPDATED,{error:new u.default(o.default.SERVER_CERTIFICATE_UPDATED_ERROR_CODE,o.default.SERVER_CERTIFICATE_UPDATED_ERROR_MESSAGE+e.name)})})},createKeySession:function(e){if(!h||!m)throw Error("Can not create sessions until you have selected a key system");var t=m.createSession(e.sessionType),n=C(t,e),i=h.systemString===f.default.CLEARKEY_KEYSTEM_STRING&&(e.initData||e.protData&&e.protData.clearkeys)?f.default.INITIALIZATION_DATA_TYPE_KEYIDS:f.default.INITIALIZATION_DATA_TYPE_CENC;t.generateRequest(i,e.initData).then(function(){r.debug("DRM: Session created.  SessionID = "+n.getSessionId()),_.trigger(T.KEY_SESSION_CREATED,{data:n})}).catch(function(e){w(n),_.trigger(T.KEY_SESSION_CREATED,{data:null,error:new u.default(o.default.KEY_SESSION_CREATED_ERROR_CODE,o.default.KEY_SESSION_CREATED_ERROR_MESSAGE+"Error generating key request -- "+e.name)})})},updateKeySession:function(e,t){var r=e.session;v.isClearKey(h)&&(t=t.toJWK()),r.update(t).then(function(){_.trigger(T.KEY_SESSION_UPDATED)}).catch(function(t){_.trigger(T.KEY_ERROR,{error:new u.default(o.default.MEDIA_KEYERR_CODE,"Error sending update() message! "+t.name,e)})})},loadKeySession:function(e){if(!h||!m)throw Error("Can not load sessions until you have selected a key system");for(var t=e.sessionId,n=0;n<g.length;n++)if(t===g[n].sessionId)return void r.warn("DRM: Ignoring session ID because we have already seen it!");var i=m.createSession(e.sessionType),l=C(i,e);i.load(t).then(function(e){e?(r.debug("DRM: Session loaded.  SessionID = "+l.getSessionId()),_.trigger(T.KEY_SESSION_CREATED,{data:l})):(w(l),_.trigger(T.KEY_SESSION_CREATED,{data:null,error:new u.default(o.default.KEY_SESSION_CREATED_ERROR_CODE,o.default.KEY_SESSION_CREATED_ERROR_MESSAGE+"Could not load session! Invalid Session ID ("+t+")")}))}).catch(function(e){w(l),_.trigger(T.KEY_SESSION_CREATED,{data:null,error:new u.default(o.default.KEY_SESSION_CREATED_ERROR_CODE,o.default.KEY_SESSION_CREATED_ERROR_MESSAGE+"Could not load session ("+t+")! "+e.name)})})},removeKeySession:function(e){e.session.remove().then(function(){r.debug("DRM: Session removed.  SessionID = "+e.getSessionId()),_.trigger(T.KEY_SESSION_REMOVED,{data:e.getSessionId()})},function(t){_.trigger(T.KEY_SESSION_REMOVED,{data:null,error:"Error removing session ("+e.getSessionId()+"). "+t.name})})},closeKeySession:function(e){S(e).catch(function(t){w(e),_.trigger(T.KEY_SESSION_CLOSED,{data:null,error:"Error closing session ("+e.getSessionId()+") "+t.name})})},stop:function(){for(var e,t=0;t<g.length;t++)(e=g[t]).getUsable()||S(e).catch(function(){w(e)})},reset:function(){var e,t=g.length;0!==t?function(){for(var r=function(e){w(e),0===g.length&&(p?(p.removeEventListener("encrypted",y),p.setMediaKeys(null).then(function(){_.trigger(T.TEARDOWN_COMPLETE)})):_.trigger(T.TEARDOWN_COMPLETE))},n=0;n<t;n++)!function(t){e.session.closed.then(function(){r(t)}),S(e).catch(function(){r(t)})}(e=g[n])}():_.trigger(T.TEARDOWN_COMPLETE)}},r=E.getLogger(t),h=null,p=null,m=null,g=[],v=Object(n.default)(b).getInstance(),y={handleEvent:function(e){if("encrypted"===e.type&&e.initData){var t=ArrayBuffer.isView(e.initData)?e.initData.buffer:e.initData;_.trigger(T.NEED_KEY,{key:new i.default(t,e.initDataType)})}}},t}d[f.default.PLAYREADY_KEYSTEM_STRING]=[f.default.PLAYREADY_KEYSTEM_STRING,f.default.PLAYREADY_RECOMMENDATION_KEYSTEM_STRING],d[f.default.WIDEVINE_KEYSTEM_STRING]=[f.default.WIDEVINE_KEYSTEM_STRING],d[f.default.CLEARKEY_KEYSTEM_STRING]=[f.default.CLEARKEY_KEYSTEM_STRING],h.__dashjs_factory_name="ProtectionModel_21Jan2015",t.default=dashjs.FactoryMaker.getClassFactory(h)},"./src/streaming/protection/models/ProtectionModel_3Feb2014.js":function(e,t,r){r.r(t);var n=r("./src/streaming/protection/controllers/ProtectionKeyController.js"),i=r("./src/streaming/protection/vo/NeedKey.js"),o=r("./src/streaming/vo/DashJSError.js"),u=r("./src/streaming/protection/errors/ProtectionErrors.js"),l=r("./src/streaming/protection/vo/KeyMessage.js"),c=r("./src/streaming/protection/vo/KeySystemConfiguration.js"),f=r("./src/streaming/protection/vo/KeySystemAccess.js");function d(e){e=e||{};var t,r,d,h,p,m,g,y,v,b=this.context,_=e.eventBus,T=e.events,E=e.debug,S=e.api;function w(){try{for(var e=0;e<g.length;e++)A(g[e]);d&&d.removeEventListener(S.needkey,y),_.trigger(T.TEARDOWN_COMPLETE)}catch(e){_.trigger(T.TEARDOWN_COMPLETE,{error:"Error tearing down key sessions and MediaKeys! -- "+e.message})}}function A(e){var t=e.session;t.removeEventListener(S.error,e),t.removeEventListener(S.message,e),t.removeEventListener(S.ready,e),t.removeEventListener(S.close,e);for(var r=0;r<g.length;r++)if(g[r]===e){g.splice(r,1);break}t[S.release]()}function C(){var e=null,t=function(){d.removeEventListener("loadedmetadata",e),d[S.setMediaKeys](p),_.trigger(T.VIDEO_ELEMENT_SELECTED)};d.readyState>=1?t():(e=t.bind(this),d.addEventListener("loadedmetadata",e))}return t={getAllInitData:function(){for(var e=[],t=0;t<g.length;t++)e.push(g[t].initData);return e},getSessions:function(){return g},requestKeySystemAccess:function(e){return new Promise(function(t,r){for(var n=!1,i=0;i<e.length;i++)for(var o=e[i].ks.systemString,u=e[i].configs,l=null,d=null,h=0;h<u.length;h++){var p=u[h].audioCapabilities,m=u[h].videoCapabilities;if(p&&0!==p.length){l=[];for(var g=0;g<p.length;g++)window[S.MediaKeys].isTypeSupported(o,p[g].contentType)&&l.push(p[g])}if(m&&0!==m.length){d=[];for(var y=0;y<m.length;y++)window[S.MediaKeys].isTypeSupported(o,m[y].contentType)&&d.push(m[y])}if(!(!l&&!d||l&&0===l.length||d&&0===d.length)){n=!0;var b=new c.default(l,d),E=v.getKeySystemBySystemString(o),w=new f.default(E,b);_.trigger(T.KEY_SYSTEM_ACCESS_COMPLETE,{data:w}),t({data:w});break}}if(!n){var A="Key system access denied! -- No valid audio/video content configurations detected!";_.trigger(T.KEY_SYSTEM_ACCESS_COMPLETE,{error:A}),r({error:A})}})},selectKeySystem:function(e){return new Promise(function(t,r){try{p=e.mediaKeys=new window[S.MediaKeys](e.keySystem.systemString),h=e.keySystem,m=e,d&&C(),t(h)}catch(e){r({error:"Error selecting keys system ("+h.systemString+")! Could not create MediaKeys -- TODO"})}})},setMediaElement:function(e){d!==e&&(d&&d.removeEventListener(S.needkey,y),(d=e)&&(d.addEventListener(S.needkey,y),p&&C()))},createKeySession:function(e){if(!h||!p||!m)throw Error("Can not create sessions until you have selected a key system");var t=null;if(m.ksConfiguration.videoCapabilities&&m.ksConfiguration.videoCapabilities.length>0&&(t=m.ksConfiguration.videoCapabilities[0]),null===t&&m.ksConfiguration.audioCapabilities&&m.ksConfiguration.audioCapabilities.length>0&&(t=m.ksConfiguration.audioCapabilities[0]),null===t)throw Error("Can not create sessions for unknown content types.");var n=t.contentType,i=p.createSession(n,new Uint8Array(e.initData),e.cdmData?new Uint8Array(e.cdmData):null),c={session:i,keyId:e.keyId,initData:e.initData,getKeyId:function(){return this.keyId},getSessionId:function(){return this.session.sessionId},getExpirationTime:function(){return NaN},getSessionType:function(){return"temporary"},handleEvent:function(e){switch(e.type){case S.error:_.trigger(T.KEY_ERROR,{error:new o.default(u.default.MEDIA_KEYERR_CODE,"KeyError",this)});break;case S.message:var t=ArrayBuffer.isView(e.message)?e.message.buffer:e.message;_.trigger(T.INTERNAL_KEY_MESSAGE,{data:new l.default(this,t,e.destinationURL)});break;case S.ready:r.debug("DRM: Key added."),_.trigger(T.KEY_ADDED);break;case S.close:r.debug("DRM: Session closed.  SessionID = "+this.getSessionId()),_.trigger(T.KEY_SESSION_CLOSED,{data:this.getSessionId()})}}};i.addEventListener(S.error,c),i.addEventListener(S.message,c),i.addEventListener(S.ready,c),i.addEventListener(S.close,c),g.push(c),r.debug("DRM: Session created.  SessionID = "+c.getSessionId()),_.trigger(T.KEY_SESSION_CREATED,{data:c})},updateKeySession:function(e,t){var r=e.session;v.isClearKey(h)?r.update(new Uint8Array(t.toJWK())):r.update(new Uint8Array(t)),_.trigger(T.KEY_SESSION_UPDATED)},closeKeySession:A,setServerCertificate:function(){},loadKeySession:function(){},removeKeySession:function(){},stop:w,reset:w},r=E.getLogger(t),d=null,h=null,p=null,m=null,g=[],v=Object(n.default)(b).getInstance(),y={handleEvent:function(e){if(e.type===S.needkey&&e.initData){var t=ArrayBuffer.isView(e.initData)?e.initData.buffer:e.initData;_.trigger(T.NEED_KEY,{key:new i.default(t,"cenc")})}}},t}d.__dashjs_factory_name="ProtectionModel_3Feb2014",t.default=dashjs.FactoryMaker.getClassFactory(d)},"./src/streaming/protection/servers/ClearKey.js":function(e,t,r){r.r(t);var n=r("./src/streaming/protection/vo/KeyPair.js"),i=r("./src/streaming/protection/vo/ClearKeyKeySet.js");function o(){return{getServerURLFromMessage:function(e){return e},getHTTPMethod:function(){return"POST"},getResponseType:function(){return"json"},getLicenseMessage:function(e){if(!e.hasOwnProperty("keys"))return null;for(var t=[],r=0;r<e.keys.length;r++){var o=e.keys[r],u=o.kid.replace(/=/g,""),l=o.k.replace(/=/g,"");t.push(new n.default(u,l))}return new i.default(t)},getErrorResponse:function(e){return String.fromCharCode.apply(null,new Uint8Array(e))}}}o.__dashjs_factory_name="ClearKey",t.default=dashjs.FactoryMaker.getSingletonFactory(o)},"./src/streaming/protection/servers/DRMToday.js":function(e,t,r){r.r(t);var n=r("./src/streaming/constants/ProtectionConstants.js");function i(e){var t=(e=e||{}).BASE64,r={};return r[n.default.WIDEVINE_KEYSTEM_STRING]={responseType:"json",getLicenseMessage:function(e){return t.decodeArray(e.license)},getErrorResponse:function(e){return e}},r[n.default.PLAYREADY_KEYSTEM_STRING]={responseType:"arraybuffer",getLicenseMessage:function(e){return e},getErrorResponse:function(e){return String.fromCharCode.apply(null,new Uint8Array(e))}},{getServerURLFromMessage:function(e){return e},getHTTPMethod:function(){return"POST"},getResponseType:function(e){return r[e].responseType},getLicenseMessage:function(e,n){return function(){if(!t||!t.hasOwnProperty("decodeArray"))throw Error("Missing config parameter(s)")}(),r[n].getLicenseMessage(e)},getErrorResponse:function(e,t){return r[t].getErrorResponse(e)}}}i.__dashjs_factory_name="DRMToday",t.default=dashjs.FactoryMaker.getSingletonFactory(i)},"./src/streaming/protection/servers/PlayReady.js":function(e,t,r){function n(){var e="http://schemas.xmlsoap.org/soap/envelope/";function t(e){return decodeURIComponent(escape(String.fromCharCode.apply(null,new Uint8Array(e))))}function r(r){if(window.DOMParser){var n=t(r),i=(new window.DOMParser).parseFromString(n,"text/xml"),o=i?i.getElementsByTagNameNS(e,"Envelope")[0]:null,u=o?o.getElementsByTagNameNS(e,"Body")[0]:null;if(u&&u.getElementsByTagNameNS(e,"Fault")[0])return null}return r}function n(r){var n="",i="",o="",u=-1,l=-1;if(window.DOMParser){var c=t(r),f=(new window.DOMParser).parseFromString(c,"text/xml"),d=f?f.getElementsByTagNameNS(e,"Envelope")[0]:null,h=d?d.getElementsByTagNameNS(e,"Body")[0]:null,p=h?h.getElementsByTagNameNS(e,"Fault")[0]:null,m=p?p.getElementsByTagName("detail")[0]:null,g=m?m.getElementsByTagName("Exception")[0]:null,y=null;if(null===p)return c;n=(y=p.getElementsByTagName("faultstring")[0].firstChild)?y.nodeValue:null,null!==g&&(i=(y=g.getElementsByTagName("StatusCode")[0])?y.firstChild.nodeValue:null,u=(o=(y=g.getElementsByTagName("Message")[0])?y.firstChild.nodeValue:null)?o.lastIndexOf("[")+1:-1,l=o?o.indexOf("]"):-1,o=o?o.substring(u,l):"")}var v="code: ".concat(i,", name: ").concat(n);return o&&(v+=", message: ".concat(o)),v}return{getServerURLFromMessage:function(e){return e},getHTTPMethod:function(){return"POST"},getResponseType:function(){return"arraybuffer"},getLicenseMessage:function(e){return r.call(this,e)},getErrorResponse:function(e){return n.call(this,e)}}}r.r(t),n.__dashjs_factory_name="PlayReady",t.default=dashjs.FactoryMaker.getSingletonFactory(n)},"./src/streaming/protection/servers/Widevine.js":function(e,t,r){function n(){return{getServerURLFromMessage:function(e){return e},getHTTPMethod:function(){return"POST"},getResponseType:function(){return"arraybuffer"},getLicenseMessage:function(e){return e},getErrorResponse:function(e){return String.fromCharCode.apply(null,new Uint8Array(e))}}}r.r(t),n.__dashjs_factory_name="Widevine",t.default=dashjs.FactoryMaker.getSingletonFactory(n)},"./src/streaming/protection/vo/ClearKeyKeySet.js":function(e,t,r){function n(e){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}r.r(t);var i=function(){var e;function t(e,r){if(function(e,t){if(!(e instanceof t))throw TypeError("Cannot call a class as a function")}(this,t),r&&"persistent"!==r&&"temporary"!==r)throw Error("Invalid ClearKey key set type!  Must be one of 'persistent' or 'temporary'");this.keyPairs=e,this.type=r}return e=[{key:"toJWK",value:function(){var e,t=this.keyPairs.length,r={keys:[]};for(e=0;e<t;e++){var n={kty:"oct",alg:"A128KW",kid:this.keyPairs[e].keyID,k:this.keyPairs[e].key};r.keys.push(n)}this.type&&(r.type=this.type);var i=JSON.stringify(r),o=i.length,u=new ArrayBuffer(o),l=new Uint8Array(u);for(e=0;e<o;e++)l[e]=i.charCodeAt(e);return u}}],function(e,t){for(var r,i=0;i<t.length;i++){var o=t[i];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,(r=function(e,t){if("object"!==n(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var i=r.call(e,"string");if("object"!==n(i))return i;throw TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(o.key),"symbol"===n(r)?r:String(r)),o)}}(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t}();t.default=i},"./src/streaming/protection/vo/KeyMessage.js":function(e,t,r){function n(e){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function i(e,t){for(var r,i=0;i<t.length;i++){var o=t[i];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,(r=function(e,t){if("object"!==n(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var i=r.call(e,"string");if("object"!==n(i))return i;throw TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(o.key),"symbol"===n(r)?r:String(r)),o)}}r.r(t);var o,u,l,c=(o=function e(t,r,n,i){(function(e,t){if(!(e instanceof t))throw TypeError("Cannot call a class as a function")})(this,e),this.sessionToken=t,this.message=r,this.defaultURL=n,this.messageType=i||"license-request"},u&&i(o.prototype,u),l&&i(o,l),Object.defineProperty(o,"prototype",{writable:!1}),o);t.default=c},"./src/streaming/protection/vo/KeyPair.js":function(e,t,r){function n(e){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function i(e,t){for(var r,i=0;i<t.length;i++){var o=t[i];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,(r=function(e,t){if("object"!==n(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var i=r.call(e,"string");if("object"!==n(i))return i;throw TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(o.key),"symbol"===n(r)?r:String(r)),o)}}r.r(t);var o,u,l,c=(o=function e(t,r){(function(e,t){if(!(e instanceof t))throw TypeError("Cannot call a class as a function")})(this,e),this.keyID=t,this.key=r},u&&i(o.prototype,u),l&&i(o,l),Object.defineProperty(o,"prototype",{writable:!1}),o);t.default=c},"./src/streaming/protection/vo/KeySystemAccess.js":function(e,t,r){function n(e){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function i(e,t){for(var r,i=0;i<t.length;i++){var o=t[i];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,(r=function(e,t){if("object"!==n(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var i=r.call(e,"string");if("object"!==n(i))return i;throw TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(o.key),"symbol"===n(r)?r:String(r)),o)}}r.r(t);var o,u,l,c=(o=function e(t,r){(function(e,t){if(!(e instanceof t))throw TypeError("Cannot call a class as a function")})(this,e),this.keySystem=t,this.ksConfiguration=r},u&&i(o.prototype,u),l&&i(o,l),Object.defineProperty(o,"prototype",{writable:!1}),o);t.default=c},"./src/streaming/protection/vo/KeySystemConfiguration.js":function(e,t,r){function n(e){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function i(e,t){for(var r,i=0;i<t.length;i++){var o=t[i];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,(r=function(e,t){if("object"!==n(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var i=r.call(e,"string");if("object"!==n(i))return i;throw TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(o.key),"symbol"===n(r)?r:String(r)),o)}}r.r(t);var o,u,l,c=(o=function e(t,r,n,i,o){(function(e,t){if(!(e instanceof t))throw TypeError("Cannot call a class as a function")})(this,e),this.initDataTypes=["cenc"],t&&t.length&&(this.audioCapabilities=t),r&&r.length&&(this.videoCapabilities=r),this.distinctiveIdentifier=n,this.persistentState=i,this.sessionTypes=o},u&&i(o.prototype,u),l&&i(o,l),Object.defineProperty(o,"prototype",{writable:!1}),o);t.default=c},"./src/streaming/protection/vo/LicenseRequest.js":function(e,t,r){function n(e){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function i(e,t){for(var r,i=0;i<t.length;i++){var o=t[i];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,(r=function(e,t){if("object"!==n(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var i=r.call(e,"string");if("object"!==n(i))return i;throw TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(o.key),"symbol"===n(r)?r:String(r)),o)}}r.r(t);var o,u,l,c=(o=function e(t,r,n,i,o,u,l,c){(function(e,t){if(!(e instanceof t))throw TypeError("Cannot call a class as a function")})(this,e),this.url=t,this.method=r,this.responseType=n,this.headers=i,this.withCredentials=o,this.messageType=u,this.sessionId=l,this.data=c},u&&i(o.prototype,u),l&&i(o,l),Object.defineProperty(o,"prototype",{writable:!1}),o);t.default=c},"./src/streaming/protection/vo/LicenseResponse.js":function(e,t,r){function n(e){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function i(e,t){for(var r,i=0;i<t.length;i++){var o=t[i];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,(r=function(e,t){if("object"!==n(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var i=r.call(e,"string");if("object"!==n(i))return i;throw TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(o.key),"symbol"===n(r)?r:String(r)),o)}}r.r(t);var o,u,l,c=(o=function e(t,r,n){(function(e,t){if(!(e instanceof t))throw TypeError("Cannot call a class as a function")})(this,e),this.url=t,this.headers=r,this.data=n},u&&i(o.prototype,u),l&&i(o,l),Object.defineProperty(o,"prototype",{writable:!1}),o);t.default=c},"./src/streaming/protection/vo/MediaCapability.js":function(e,t,r){function n(e){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function i(e,t){for(var r,i=0;i<t.length;i++){var o=t[i];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,(r=function(e,t){if("object"!==n(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var i=r.call(e,"string");if("object"!==n(i))return i;throw TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(o.key),"symbol"===n(r)?r:String(r)),o)}}r.r(t);var o,u,l,c=(o=function e(t,r){(function(e,t){if(!(e instanceof t))throw TypeError("Cannot call a class as a function")})(this,e),this.contentType=t,this.robustness=r},u&&i(o.prototype,u),l&&i(o,l),Object.defineProperty(o,"prototype",{writable:!1}),o);t.default=c},"./src/streaming/protection/vo/NeedKey.js":function(e,t,r){function n(e){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function i(e,t){for(var r,i=0;i<t.length;i++){var o=t[i];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,(r=function(e,t){if("object"!==n(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var i=r.call(e,"string");if("object"!==n(i))return i;throw TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(o.key),"symbol"===n(r)?r:String(r)),o)}}r.r(t);var o,u,l,c=(o=function e(t,r){(function(e,t){if(!(e instanceof t))throw TypeError("Cannot call a class as a function")})(this,e),this.initData=t,this.initDataType=r},u&&i(o.prototype,u),l&&i(o,l),Object.defineProperty(o,"prototype",{writable:!1}),o);t.default=c},"./src/streaming/rules/DroppedFramesHistory.js":function(e,t,r){r.r(t);var n=r("./src/core/FactoryMaker.js");function i(){var e={},t={},r={};return{push:function(n,i,o){if(i){e[n]||(e[n]=[],t[n]=0,r[n]=0);var u=o&&o.droppedVideoFrames?o.droppedVideoFrames:0,l=o&&o.totalVideoFrames?o.totalVideoFrames:0,c=u-t[n];t[n]=u;var f=l-r[n];r[n]=l;var d=e[n];isNaN(i)||(d[i]?(d[i].droppedVideoFrames+=c,d[i].totalVideoFrames+=f):d[i]={droppedVideoFrames:c,totalVideoFrames:f})}},getFrameHistory:function(t){return e[t]},clearForStream:function(n){try{delete e[n],delete t[n],delete r[n]}catch(e){}},reset:function(){e={},t={},r={}}}}i.__dashjs_factory_name="DroppedFramesHistory";var o=n.default.getClassFactory(i);t.default=o},"./src/streaming/rules/RulesContext.js":function(e,t,r){r.r(t);var n=r("./src/core/FactoryMaker.js");function i(e){var t=(e=e||{}).abrController,r=e.switchHistory,n=e.droppedFramesHistory,i=e.currentRequest,o=e.useBufferOccupancyABR,u=e.useL2AABR,l=e.useLoLPABR,c=e.streamProcessor?e.streamProcessor.getScheduleController():null,f=e.streamProcessor?e.streamProcessor.getRepresentationInfo():null,d=e.videoModel?e.videoModel:null;function h(){return f?f.mediaInfo:null}return{getMediaType:function(){var e=h();return e?e.type:null},getMediaInfo:h,getDroppedFramesHistory:function(){return n},getCurrentRequest:function(){return i},getSwitchHistory:function(){return r},getStreamInfo:function(){var e=h();return e?e.streamInfo:null},getScheduleController:function(){return c},getAbrController:function(){return t},getRepresentationInfo:function(){return f},useBufferOccupancyABR:function(){return o},useL2AABR:function(){return u},useLoLPABR:function(){return l},getVideoModel:function(){return d}}}i.__dashjs_factory_name="RulesContext",t.default=n.default.getClassFactory(i)},"./src/streaming/rules/SwitchRequest.js":function(e,t,r){r.r(t);var n=r("./src/core/FactoryMaker.js"),i={DEFAULT:.5,STRONG:1,WEAK:0};function o(e,t,r){var n;return n=i.DEFAULT,r!==i.DEFAULT&&r!==i.STRONG&&r!==i.WEAK||(n=r),{quality:void 0===e?-1:e,reason:void 0===t?null:t,priority:n}}o.__dashjs_factory_name="SwitchRequest";var u=n.default.getClassFactory(o);u.NO_CHANGE=-1,u.PRIORITY=i,n.default.updateClassFactory(o.__dashjs_factory_name,u),t.default=u},"./src/streaming/rules/SwitchRequestHistory.js":function(e,t,r){r.r(t);var n=r("./src/core/FactoryMaker.js"),i=r("./src/streaming/rules/SwitchRequest.js");function o(){var e=[],t=[];return{push:function(r){r.newValue===i.default.NO_CHANGE&&(r.newValue=r.oldValue),e[r.oldValue]||(e[r.oldValue]={noDrops:0,drops:0,dropSize:0});var n=r.newValue-r.oldValue,o=n<0?1:0,u=o?-n:0,l=o?0:1;if(e[r.oldValue].drops+=o,e[r.oldValue].dropSize+=u,e[r.oldValue].noDrops+=l,t.push({idx:r.oldValue,noDrop:l,drop:o,dropSize:u}),t.length>8){var c=t.shift();e[c.idx].drops-=c.drop,e[c.idx].dropSize-=c.dropSize,e[c.idx].noDrops-=c.noDrop}},getSwitchRequests:function(){return e},reset:function(){e=[],t=[]}}}o.__dashjs_factory_name="SwitchRequestHistory";var u=n.default.getClassFactory(o);t.default=u},"./src/streaming/rules/ThroughputHistory.js":function(e,t,r){r.r(t);var n=r("./src/streaming/constants/Constants.js"),i=r("./src/core/FactoryMaker.js");function o(e){var t,r,i,o,u,l=(e=e||{}).settings;function c(e,t,r,n){var i=Math.pow(.5,r/n.fast);e.fastEstimate=(1-i)*t+i*e.fastEstimate;var o=Math.pow(.5,r/n.slow);e.slowEstimate=(1-o)*t+o*e.slowEstimate,e.totalWeight+=r}function f(e,c,f){var d,h;return l.get().streaming.abr.movingAverageMethod!==n.default.MOVING_AVERAGE_SLIDING_WINDOW?function(e,t){var r=e?u.throughputHalfLife:u.latencyHalfLife,n=e?i[t]:o[t];if(!n||n.totalWeight<=0)return NaN;var l=n.fastEstimate/(1-Math.pow(.5,n.totalWeight/r.fast)),c=n.slowEstimate/(1-Math.pow(.5,n.totalWeight/r.slow));return e?Math.min(l,c):Math.max(l,c)}(e,c):(d=function(e,n,i){var o,u;if(e?(o=t[n],u=i?3:4):(o=r[n],u=4),o){if(u>=o.length)u=o.length;else if(e)for(var l=1;l<u;++l){var c=o[o.length-l]/o[o.length-l-1];if((c>=1.3||c<=1/1.3)&&(u+=1)===o.length)break}}else u=0;return u}(e,c,f),h=(e?t:r)[c],0!==d&&h&&0!==h.length?(h=h.slice(-d)).reduce(function(e,t){return e+t})/h.length:NaN)}function d(e,t){return f(!0,e,t)}function h(e){t[e]=t[e]||[],r[e]=r[e]||[],i[e]=i[e]||{fastEstimate:0,slowEstimate:0,totalWeight:0},o[e]=o[e]||{fastEstimate:0,slowEstimate:0,totalWeight:0}}function p(){t={},r={},i={},o={}}return u={throughputHalfLife:{fast:3,slow:8},latencyHalfLife:{fast:1,slow:2}},p(),{push:function(e,f,d){if(f.trace&&f.trace.length){var p,m=f.tresponse.getTime()-f.trequest.getTime()||1,g=f._tfinish.getTime()-f.tresponse.getTime()||1,y=f.trace.reduce(function(e,t){return e+t.b[0]},0),v=0;if(0!==(p=f._fileLoaderType&&f._fileLoaderType===n.default.FILE_LOADER_TYPES.FETCH?f.trace.reduce(function(e,t){return e+t.d},0):d?g:m+g)&&(v=Math.round(8*y/p)),h(e),e===n.default.VIDEO?g<l.get().streaming.cacheLoadThresholds[n.default.VIDEO]:e===n.default.AUDIO?g<l.get().streaming.cacheLoadThresholds[n.default.AUDIO]:void 0){if(t[e].length>0&&!t[e].hasCachedEntries)return;t[e].hasCachedEntries=!0}else t[e]&&t[e].hasCachedEntries&&(delete t[e],delete r[e],delete i[e],delete o[e],h(e));t[e].push(v),t[e].length>20&&t[e].shift(),r[e].push(m),r[e].length>20&&r[e].shift(),c(i[e],v,.001*g,u.throughputHalfLife),c(o[e],m,1,u.latencyHalfLife)}},getAverageThroughput:d,getSafeAverageThroughput:function(e,t){var r=d(e,t);return isNaN(r)||(r*=l.get().streaming.abr.bandwidthSafetyFactor),r},getAverageLatency:function(e){return f(!1,e)},reset:p}}o.__dashjs_factory_name="ThroughputHistory",t.default=i.default.getClassFactory(o)},"./src/streaming/rules/abr/ABRRulesCollection.js":function(e,t,r){r.r(t);var n=r("./src/streaming/rules/abr/ThroughputRule.js"),i=r("./src/streaming/rules/abr/InsufficientBufferRule.js"),o=r("./src/streaming/rules/abr/AbandonRequestsRule.js"),u=r("./src/streaming/rules/abr/DroppedFramesRule.js"),l=r("./src/streaming/rules/abr/SwitchHistoryRule.js"),c=r("./src/streaming/rules/abr/BolaRule.js"),f=r("./src/streaming/rules/abr/L2ARule.js"),d=r("./src/streaming/rules/abr/lolp/LoLpRule.js"),h=r("./src/core/FactoryMaker.js"),p=r("./src/streaming/rules/SwitchRequest.js"),m=r("./src/streaming/constants/Constants.js"),g="qualitySwitchRules",y="abandonFragmentRules";function v(e){e=e||{};var t,r,h=this.context,v=e.mediaPlayerModel,b=e.customParametersModel,_=e.dashMetrics,T=e.settings;function E(e){return e.filter(function(e){return e.quality>p.default.NO_CHANGE})}function S(e){var t,r,n,i,o,u={},l=null;if(0!==e.length){for(u[p.default.PRIORITY.STRONG]={quality:p.default.NO_CHANGE,reason:null},u[p.default.PRIORITY.WEAK]={quality:p.default.NO_CHANGE,reason:null},u[p.default.PRIORITY.DEFAULT]={quality:p.default.NO_CHANGE,reason:null},t=0,r=e.length;t<r;t+=1)(n=e[t]).quality!==p.default.NO_CHANGE&&(u[n.priority].quality===p.default.NO_CHANGE||u[n.priority].quality>n.quality)&&(u[n.priority].quality=n.quality,u[n.priority].reason=n.reason||null);return u[p.default.PRIORITY.WEAK].quality!==p.default.NO_CHANGE&&(l=u[p.default.PRIORITY.WEAK]),u[p.default.PRIORITY.DEFAULT].quality!==p.default.NO_CHANGE&&(l=u[p.default.PRIORITY.DEFAULT]),u[p.default.PRIORITY.STRONG].quality!==p.default.NO_CHANGE&&(l=u[p.default.PRIORITY.STRONG]),l&&(i=l.quality,o=l.reason),Object(p.default)(h).create(i,o)}}return{initialize:function(){t=[],r=[],T.get().streaming.abr.useDefaultABRRules&&(T.get().streaming.abr.ABRStrategy===m.default.ABR_STRATEGY_L2A?t.push(Object(f.default)(h).create({dashMetrics:_,settings:T})):T.get().streaming.abr.ABRStrategy===m.default.ABR_STRATEGY_LoLP?t.push(Object(d.default)(h).create({dashMetrics:_})):(t.push(Object(c.default)(h).create({dashMetrics:_,mediaPlayerModel:v,settings:T})),t.push(Object(n.default)(h).create({dashMetrics:_})),T.get().streaming.abr.additionalAbrRules.insufficientBufferRule&&t.push(Object(i.default)(h).create({dashMetrics:_,settings:T})),T.get().streaming.abr.additionalAbrRules.switchHistoryRule&&t.push(Object(l.default)(h).create()),T.get().streaming.abr.additionalAbrRules.droppedFramesRule&&t.push(Object(u.default)(h).create()),T.get().streaming.abr.additionalAbrRules.abandonRequestsRule&&r.push(Object(o.default)(h).create({dashMetrics:_,mediaPlayerModel:v,settings:T})))),b.getAbrCustomRules().forEach(function(e){e.type===g&&t.push(e.rule(h).create()),e.type===y&&r.push(e.rule(h).create())})},reset:function(){[t,r].forEach(function(e){e&&e.length&&e.forEach(function(e){return e.reset&&e.reset()})}),t=[],r=[]},getMaxQuality:function(e){return S(E(t.map(function(t){return t.getMaxIndex(e)})))||Object(p.default)(h).create()},getMinSwitchRequest:S,shouldAbandonFragment:function(e,t){return S(E(r.map(function(r){return r.shouldAbandon(e,t)})))||Object(p.default)(h).create()},getQualitySwitchRules:function(){return t}}}v.__dashjs_factory_name="ABRRulesCollection";var b=h.default.getClassFactory(v);b.QUALITY_SWITCH_RULES=g,b.ABANDON_FRAGMENT_RULES=y,h.default.updateSingletonFactory(v.__dashjs_factory_name,b),t.default=b},"./src/streaming/rules/abr/AbandonRequestsRule.js":function(e,t,r){r.r(t);var n=r("./src/streaming/rules/SwitchRequest.js"),i=r("./src/core/FactoryMaker.js"),o=r("./src/core/Debug.js");function u(e){e=e||{};var t,r,i,l,c,f=this.context,d=e.mediaPlayerModel,h=e.dashMetrics,p=e.settings;function m(){i={},l={},c=[]}return t={shouldAbandon:function(e){var t=Object(n.default)(f).create(n.default.NO_CHANGE,{name:u.__dashjs_factory_name});if(!(e&&e.hasOwnProperty("getMediaInfo")&&e.hasOwnProperty("getMediaType")&&e.hasOwnProperty("getCurrentRequest")&&e.hasOwnProperty("getRepresentationInfo")&&e.hasOwnProperty("getAbrController")))return t;var o,m=e.getMediaInfo(),g=e.getMediaType(),y=e.getStreamInfo(),v=y?y.id:null,b=e.getCurrentRequest();if(!isNaN(b.index)){o=b.index,i[g]=i[g]||{},i[g][o]=i[g][o]||{};var _,T=d.getStableBufferTime();if(h.getCurrentBufferLevel(g)>T)return t;var E=i[g][b.index];if(null===E||null===b.firstByteDate||l.hasOwnProperty(E.id))return t;if(void 0===E.firstByteTime&&(c[g]=[],E.firstByteTime=b.firstByteDate.getTime(),E.segmentDuration=b.duration,E.bytesTotal=b.bytesTotal,E.id=b.index),E.bytesLoaded=b.bytesLoaded,E.elapsedTime=(new Date).getTime()-E.firstByteTime,E.bytesLoaded>0&&E.elapsedTime>0&&(_=Math.round(8*E.bytesLoaded/E.elapsedTime),c[g]=c[g]||[],c[g].push(_)),c[g].length>=5&&E.elapsedTime>500&&E.bytesLoaded<E.bytesTotal){var S=c[g].reduce(function(e,t){return e+t},0);if(E.measuredBandwidthInKbps=Math.round(S/c[g].length),E.estimatedTimeOfDownload=+(8*E.bytesTotal/E.measuredBandwidthInKbps/1e3).toFixed(2),E.estimatedTimeOfDownload<1.8*E.segmentDuration||0===e.getRepresentationInfo().quality)return t;if(!l.hasOwnProperty(E.id)){var w=e.getAbrController(),A=E.bytesTotal-E.bytesLoaded,C=w.getBitrateList(m),I=w.getQualityForBitrate(m,E.measuredBandwidthInKbps*p.get().streaming.abr.bandwidthSafetyFactor,v),O=w.getMinAllowedIndexFor(g,v),R=void 0!==O?Math.max(O,I):I;A>E.bytesTotal*C[R].bitrate/C[w.getQualityFor(g,v)].bitrate&&(t.quality=R,t.reason.throughput=E.measuredBandwidthInKbps,t.reason.fragmentID=E.id,l[E.id]=E,r.debug("["+g+"] frag id",E.id," is asking to abandon and switch to quality to ",R," measured bandwidth was",E.measuredBandwidthInKbps),delete i[g][E.id])}}else E.bytesLoaded===E.bytesTotal&&delete i[g][E.id]}return t},reset:m},r=Object(o.default)(f).getInstance().getLogger(t),m(),t}u.__dashjs_factory_name="AbandonRequestsRule",t.default=i.default.getClassFactory(u)},"./src/streaming/rules/abr/BolaRule.js":function(e,t,r){r.r(t);var n=r("./src/streaming/constants/MetricsConstants.js"),i=r("./src/streaming/rules/SwitchRequest.js"),o=r("./src/core/FactoryMaker.js"),u=r("./src/streaming/vo/metrics/HTTPRequest.js"),l=r("./src/core/EventBus.js"),c=r("./src/core/events/Events.js"),f=r("./src/core/Debug.js"),d=r("./src/streaming/MediaPlayerEvents.js"),h=r("./src/streaming/constants/Constants.js");function p(e){e=e||{};var t,r,o,p=this.context,m=e.dashMetrics,g=e.mediaPlayerModel,y=Object(l.default)(p).getInstance();function v(e,t,r){var n=r.reduce(function(e,t,n){return t>r[e]?n:e},0);if(0===n)return null;var i=Math.max(e,10+2*t.length),o=(r[n]-1)/(i/10-1);return{gp:o,Vp:10/o}}function b(e){e.placeholderBuffer=0,e.mostAdvancedSegmentStart=NaN,e.lastSegmentWasReplacement=!1,e.lastSegmentStart=NaN,e.lastSegmentDurationS=NaN,e.lastSegmentRequestTimeMs=NaN,e.lastSegmentFinishTimeMs=NaN}function _(e,t){var r=g.getStableBufferTime();if(e.stableBufferTime!==r){var n=v(r,e.bitrates,e.utilities);if(n.Vp!==e.Vp||n.gp!==e.gp){var i=m.getCurrentBufferLevel(t),o=i+e.placeholderBuffer;o-=10,o*=n.Vp/e.Vp,o+=10,e.stableBufferTime=r,e.Vp=n.Vp,e.gp=n.gp,e.placeholderBuffer=Math.max(0,o-i)}}}function T(e,t){return e.Vp*(e.utilities[t]+e.gp)}function E(e,t){for(var r=e.bitrates[t],n=e.utilities[t],i=0,o=t-1;o>=0;--o)if(e.utilities[o]<e.utilities[t]){var u=e.bitrates[o],l=e.utilities[o];i=Math.max(i,e.Vp*(e.gp+(r*l-u*n)/(r-u)))}return i}function S(e){var t=e.mediaType===h.default.AUDIO?[h.default.AUDIO]:o;for(var r in t)o.hasOwnProperty(r)&&2===o[r].state&&(o[r].placeholderBuffer=0)}function w(){for(var e in o)if(o.hasOwnProperty(e)){var t=o[e];0!==t.state&&(t.state=1,b(t))}}function A(e){if(e&&e.chunk&&e.chunk.mediaInfo){var t=o[e.chunk.mediaInfo.type];if(t&&0!==t.state){var r=e.chunk.start;isNaN(t.mostAdvancedSegmentStart)||r>t.mostAdvancedSegmentStart?(t.mostAdvancedSegmentStart=r,t.lastSegmentWasReplacement=!1):t.lastSegmentWasReplacement=!0,t.lastSegmentStart=r,t.lastSegmentDurationS=e.chunk.duration,t.lastQuality=e.chunk.quality,I(t,e.chunk.mediaInfo.type)}}}function C(e){if(e&&e.metric===n.default.HTTP_REQUEST&&e.value&&e.value.type===u.HTTPRequest.MEDIA_SEGMENT_TYPE&&e.value.trace&&e.value.trace.length){var t=o[e.mediaType];t&&0!==t.state&&(t.lastSegmentRequestTimeMs=e.value.trequest.getTime(),t.lastSegmentFinishTimeMs=e.value._tfinish.getTime(),I(t,e.mediaType))}}function I(e,t){if(!isNaN(e.lastSegmentStart)&&!isNaN(e.lastSegmentRequestTimeMs)&&!isNaN(e.placeholderBuffer)){if(e.placeholderBuffer*=.99,!isNaN(e.lastSegmentFinishTimeMs)){var r=m.getCurrentBufferLevel(t)+.001*(e.lastSegmentFinishTimeMs-e.lastSegmentRequestTimeMs),n=Math.max(0,T(e,e.lastQuality)-r);e.placeholderBuffer=Math.min(n,e.placeholderBuffer)}e.lastSegmentWasReplacement&&!isNaN(e.lastSegmentDurationS)&&(e.placeholderBuffer+=e.lastSegmentDurationS),e.lastSegmentStart=NaN,e.lastSegmentRequestTimeMs=NaN}}function O(e){if(e){var t=o[e.mediaType];t&&0!==t.state&&(t.abrQuality=e.newQuality)}}function R(e){if(e){var t=o[e.mediaType];if(t&&0!==t.state){var r=m.getCurrentBufferLevel(e.mediaType),n=Math.max(0,(t.abrQuality>0?E(t,t.abrQuality):10)-r);t.placeholderBuffer=Math.min(t.placeholderBuffer,n)}}}return t={getMaxIndex:function(e){var t=Object(i.default)(p).create();if(!(e&&e.hasOwnProperty("getMediaInfo")&&e.hasOwnProperty("getMediaType")&&e.hasOwnProperty("getScheduleController")&&e.hasOwnProperty("getStreamInfo")&&e.hasOwnProperty("getAbrController")&&e.hasOwnProperty("useBufferOccupancyABR")))return t;var n=e.getMediaInfo(),u=e.getMediaType(),l=e.getScheduleController(),c=e.getStreamInfo(),f=e.getAbrController(),d=f.getThroughputHistory(),h=c?c.id:null,y=c&&c.manifestInfo&&c.manifestInfo.isDynamic,S=e.useBufferOccupancyABR();if(t.reason=t.reason||{},!S)return t;l.setTimeToLoadDelay(0);var w=((C=o[A=e.getMediaType()])?0!==C.state&&_(C,A):(I={},R=(R=(O=e.getMediaInfo().bitrateList.map(function(e){return e.bandwidth})).map(function(e){return Math.log(e)})).map(function(e){return e-R[0]+1}),(k=v(P=g.getStableBufferTime(),O,R))?(I.state=1,I.bitrates=O,I.utilities=R,I.stableBufferTime=P,I.Vp=k.Vp,I.gp=k.gp,I.lastQuality=0,b(I)):I.state=0,C=I,o[A]=C),C);if(0===w.state)return t;var A,C,I,O,R,P,k,D,N=m.getCurrentBufferLevel(u),L=d.getAverageThroughput(u,y),x=d.getSafeAverageThroughput(u,y),j=d.getAverageLatency(u);if(t.reason.state=w.state,t.reason.throughput=L,t.reason.latency=j,isNaN(L))return t;switch(w.state){case 1:D=f.getQualityForBitrate(n,x,h,j),t.quality=D,t.reason.throughput=x,w.placeholderBuffer=Math.max(0,E(w,D)-N),w.lastQuality=D,!isNaN(w.lastSegmentDurationS)&&N>=w.lastSegmentDurationS&&(w.state=2);break;case 2:(function(e,t){var r=Date.now();if(isNaN(e.lastSegmentFinishTimeMs)){if(!isNaN(e.lastCallTimeMs)){var n=.001*(r-e.lastCallTimeMs);e.placeholderBuffer+=Math.max(0,n)}}else{var i=.001*(r-e.lastSegmentFinishTimeMs);e.placeholderBuffer+=Math.max(0,i)}e.lastCallTimeMs=r,e.lastSegmentStart=NaN,e.lastSegmentRequestTimeMs=NaN,e.lastSegmentFinishTimeMs=NaN,_(e,t)})(w,u),D=function(e,t){for(var r=e.bitrates.length,n=NaN,i=NaN,o=0;o<r;++o){var u=(e.Vp*(e.utilities[o]+e.gp)-t)/e.bitrates[o];(isNaN(i)||u>=i)&&(i=u,n=o)}return n}(w,N+w.placeholderBuffer);var M=f.getQualityForBitrate(n,x,h,j);D>w.lastQuality&&D>M&&(D=Math.max(M,w.lastQuality));var F=Math.max(0,N+w.placeholderBuffer-T(w,D));F<=w.placeholderBuffer?(w.placeholderBuffer-=F,F=0):(F-=w.placeholderBuffer,w.placeholderBuffer=0,D<f.getMaxAllowedIndexFor(u,h)?l.setTimeToLoadDelay(1e3*F):F=0),t.quality=D,t.reason.throughput=L,t.reason.latency=j,t.reason.bufferLevel=N,t.reason.placeholderBuffer=w.placeholderBuffer,t.reason.delay=F,w.lastQuality=D;break;default:r.debug("BOLA ABR rule invoked in bad state."),t.quality=f.getQualityForBitrate(n,x,h,j),t.reason.state=w.state,t.reason.throughput=x,t.reason.latency=j,w.state=1,b(w)}return t},reset:function(){o={},y.off(d.default.BUFFER_EMPTY,S,t),y.off(d.default.PLAYBACK_SEEKING,w,t),y.off(d.default.METRIC_ADDED,C,t),y.off(d.default.QUALITY_CHANGE_REQUESTED,O,t),y.off(d.default.FRAGMENT_LOADING_ABANDONED,R,t),y.off(c.default.MEDIA_FRAGMENT_LOADED,A,t)}},r=Object(f.default)(p).getInstance().getLogger(t),o={},y.on(d.default.BUFFER_EMPTY,S,t),y.on(d.default.PLAYBACK_SEEKING,w,t),y.on(d.default.METRIC_ADDED,C,t),y.on(d.default.QUALITY_CHANGE_REQUESTED,O,t),y.on(d.default.FRAGMENT_LOADING_ABANDONED,R,t),y.on(c.default.MEDIA_FRAGMENT_LOADED,A,t),t}p.__dashjs_factory_name="BolaRule",t.default=o.default.getClassFactory(p)},"./src/streaming/rules/abr/DroppedFramesRule.js":function(e,t,r){r.r(t);var n=r("./src/core/FactoryMaker.js"),i=r("./src/streaming/rules/SwitchRequest.js"),o=r("./src/core/Debug.js");function u(){var e,t,r=this.context;return e={getMaxIndex:function(e){var n=Object(i.default)(r).create();if(!e||!e.hasOwnProperty("getDroppedFramesHistory"))return n;var o=e.getDroppedFramesHistory(),u=e.getStreamInfo().id;if(o){var l=o.getFrameHistory(u);if(!l||0===l.length)return n;for(var c=0,f=0,d=i.default.NO_CHANGE,h=1;h<l.length;h++)if(l[h]&&(c=l[h].droppedVideoFrames,(f=l[h].totalVideoFrames)>375&&c/f>.15)){d=h-1,t.debug("index: "+d+" Dropped Frames: "+c+" Total Frames: "+f);break}return Object(i.default)(r).create(d,{droppedFrames:c})}return n}},t=Object(o.default)(r).getInstance().getLogger(e),e}u.__dashjs_factory_name="DroppedFramesRule",t.default=n.default.getClassFactory(u)},"./src/streaming/rules/abr/InsufficientBufferRule.js":function(e,t,r){r.r(t);var n=r("./src/core/EventBus.js"),i=r("./src/core/events/Events.js"),o=r("./src/core/FactoryMaker.js"),u=r("./src/core/Debug.js"),l=r("./src/streaming/rules/SwitchRequest.js"),c=r("./src/streaming/constants/Constants.js"),f=r("./src/streaming/constants/MetricsConstants.js"),d=r("./src/streaming/MediaPlayerEvents.js");function h(e){e=e||{};var t,r,o,h=this.context,p=Object(n.default)(h).getInstance(),m=e.dashMetrics;function g(){(o={})[c.default.VIDEO]={ignoreCount:2},o[c.default.AUDIO]={ignoreCount:2}}function y(){g()}function v(e){isNaN(e.startTime)||e.mediaType!==c.default.AUDIO&&e.mediaType!==c.default.VIDEO||o[e.mediaType].ignoreCount>0&&o[e.mediaType].ignoreCount--}return t={getMaxIndex:function(e){var t=Object(l.default)(h).create();if(!e||!e.hasOwnProperty("getMediaType"))return t;!function(){if(!m||!m.hasOwnProperty("getCurrentBufferLevel")||!m.hasOwnProperty("getCurrentBufferState"))throw Error(c.default.MISSING_CONFIG_ERROR)}();var n=e.getMediaType(),i=m.getCurrentBufferState(n),u=e.getRepresentationInfo().fragmentDuration,d=e.getStreamInfo(),p=d?d.id:null,g=e.getScheduleController(),y=d&&d.manifestInfo&&d.manifestInfo.isDynamic;if(!g.getPlaybackController().getLowLatencyModeEnabled()&&o[n].ignoreCount>0||!u)return t;if(i&&i.state===f.default.BUFFER_EMPTY)r.debug("["+n+"] Switch to index 0; buffer is empty."),t.quality=0,t.reason="InsufficientBufferRule: Buffer is empty";else{var v=e.getMediaInfo(),b=e.getAbrController(),_=b.getThroughputHistory(),T=m.getCurrentBufferLevel(n),E=_.getAverageThroughput(n,y),S=_.getAverageLatency(n);t.quality=b.getQualityForBitrate(v,E*(T/u)*.5,p,S),t.reason="InsufficientBufferRule: being conservative to avoid immediate rebuffering"}return t},reset:function(){g(),p.off(d.default.PLAYBACK_SEEKING,y,t),p.off(i.default.BYTES_APPENDED_END_FRAGMENT,v,t)}},r=Object(u.default)(h).getInstance().getLogger(t),g(),p.on(d.default.PLAYBACK_SEEKING,y,t),p.on(i.default.BYTES_APPENDED_END_FRAGMENT,v,t),t}h.__dashjs_factory_name="InsufficientBufferRule",t.default=o.default.getClassFactory(h)},"./src/streaming/rules/abr/L2ARule.js":function(e,t,r){r.r(t);var n=r("./src/streaming/constants/MetricsConstants.js"),i=r("./src/streaming/rules/SwitchRequest.js"),o=r("./src/core/FactoryMaker.js"),u=r("./src/streaming/vo/metrics/HTTPRequest.js"),l=r("./src/core/EventBus.js"),c=r("./src/core/events/Events.js"),f=r("./src/core/Debug.js"),d=r("./src/streaming/constants/Constants.js");function h(e){e=e||{};var t,r,o,h,p=this.context,m=e.dashMetrics,g=Object(l.default)(p).getInstance();function y(e){e.placeholderBuffer=0,e.mostAdvancedSegmentStart=NaN,e.lastSegmentWasReplacement=!1,e.lastSegmentStart=NaN,e.lastSegmentDurationS=NaN,e.lastSegmentRequestTimeMs=NaN,e.lastSegmentFinishTimeMs=NaN}function v(){for(var e in r)if(r.hasOwnProperty(e)){var t=r[e];0!==t.state&&(t.state=1,y(t))}}function b(e){if(e&&e.chunk&&e.chunk.mediaInfo){var t=r[e.chunk.mediaInfo.type],n=o[e.chunk.mediaInfo.type];if(t&&0!==t.state){var i=e.chunk.start;isNaN(t.mostAdvancedSegmentStart)||i>t.mostAdvancedSegmentStart?(t.mostAdvancedSegmentStart=i,t.lastSegmentWasReplacement=!1):t.lastSegmentWasReplacement=!0,t.lastSegmentStart=i,t.lastSegmentDurationS=e.chunk.duration,t.lastQuality=e.chunk.quality,T(t,n)}}}function _(e){if(e&&e.metric===n.default.HTTP_REQUEST&&e.value&&e.value.type===u.HTTPRequest.MEDIA_SEGMENT_TYPE&&e.value.trace&&e.value.trace.length){var t=r[e.mediaType],i=o[e.mediaType];t&&0!==t.state&&(t.lastSegmentRequestTimeMs=e.value.trequest.getTime(),t.lastSegmentFinishTimeMs=e.value._tfinish.getTime(),T(t,i))}}function T(e,t){isNaN(e.lastSegmentStart)||isNaN(e.lastSegmentRequestTimeMs)||(t.segment_request_start_s=.001*e.lastSegmentRequestTimeMs,t.segment_download_finish_s=.001*e.lastSegmentFinishTimeMs,e.lastSegmentStart=NaN,e.lastSegmentRequestTimeMs=NaN)}function E(e){if(e&&e.mediaType){var t=r[e.mediaType];t&&0!==t.state&&(t.abrQuality=e.newQuality)}}function S(e,t){if(e.length!==t.length)return -1;for(var r=0,n=0;n<e.length;n++)r+=e[n]*t[n];return r}return t={getMaxIndex:function(e){var t,n,u,l,c,f,g=Object(i.default)(p).create(),v=Math.max(4,3.944930817973437*Math.sqrt(4)),b=e.getMediaInfo(),_=e.getMediaType(),T=b.bitrateList.map(function(e){return e.bandwidth}),E=T.length,w=e.getScheduleController(),A=e.getStreamInfo(),C=e.getAbrController(),I=C.getThroughputHistory(),O=A&&A.manifestInfo&&A.manifestInfo.isDynamic,R=e.useL2AABR(),P=m.getCurrentBufferLevel(_,!0),k=I.getSafeAverageThroughput(_,O),D=I.getAverageThroughput(_,O),N=I.getAverageLatency(_),L=e.getVideoModel().getPlaybackRate();if(!(e&&e.hasOwnProperty("getMediaInfo")&&e.hasOwnProperty("getMediaType")&&e.hasOwnProperty("getScheduleController")&&e.hasOwnProperty("getStreamInfo")&&e.hasOwnProperty("getAbrController")&&e.hasOwnProperty("useL2AABR"))||(g.reason=g.reason||{},!R||_===d.default.AUDIO))return g;w.setTimeToLoadDelay(0);var x=((n=r[t=e.getMediaType()])||(u={},c=(l=e.getMediaInfo()).bitrateList.map(function(e){return e.bandwidth/1e3}),u.state=1,u.bitrates=c,u.lastQuality=0,l&&l.type&&(o[l.type]={},o[l.type].w=[],o[l.type].prev_w=[],o[l.type].Q=0,o[l.type].segment_request_start_s=0,o[l.type].segment_download_finish_s=0,o[l.type].B_target=1.5),y(u),n=u,r[t]=n),n);if(0===x.state)return g;var j=o[_];if(!j||(g.reason.state=x.state,g.reason.throughput=D,g.reason.latency=N,isNaN(D)))return g;switch(x.state){case 1:if(f=C.getQualityForBitrate(b,k,A.id,N),g.quality=f,g.reason.throughput=k,x.lastQuality=f,!isNaN(x.lastSegmentDurationS)&&P>=j.B_target){x.state=2,j.Q=3.944930817973437;for(var M=0;M<E;++M)M===x.lastQuality?j.prev_w[M]=1:j.prev_w[M]=0}break;case 2:var F=[],B=m.getCurrentHttpRequest(_).trace.reduce(function(e,t){return e+t.d},0),U=Math.round(8*m.getCurrentHttpRequest(_).trace.reduce(function(e,t){return e+t.b[0]},0)/B);U<1&&(U=1);for(var q=x.lastSegmentDurationS,H=1,V=0;V<E;++V)T[V]=T[V]/1e3,L*T[V]>U&&(H=-1),j.w[V]=j.prev_w[V]+H*(q/(2*v))*((j.Q+3.944930817973437)*(L*T[V]/U));j.w=function(e){for(var t=e.length,r=!1,n=[],i=0;i<t;++i)n[i]=e[i];for(var o=e.sort(function(e,t){return t-e}),u=0,l=0,c=[],f=0;f<t-1;++f)if((l=((u+=o[f])-1)/(f+1))>=o[f+1]){r=!0;break}r||(l=(u+o[t-1]-1)/t);for(var d=0;d<t;++d)c[d]=Math.max(n[d]-l,0);return c}(j.w);for(var G=0;G<E;++G)F[G]=j.w[G]-j.prev_w[G],j.prev_w[G]=j.w[G];j.Q=Math.max(0,j.Q-q+q*L*((S(T,j.prev_w)+S(T,F))/U));for(var Y=[],z=0;z<E;++z)Y[z]=Math.abs(T[z]-S(j.w,T));(f=Y.indexOf(Math.min.apply(Math,Y)))>x.lastQuality&&T[x.lastQuality+1]<=U&&(f=x.lastQuality+1),T[f]>=U&&(j.Q=2*Math.max(3.944930817973437,j.Q)),g.quality=f,g.reason.throughput=D,g.reason.latency=N,g.reason.bufferLevel=P,x.lastQuality=g.quality;break;default:h.debug("L2A ABR rule invoked in bad state."),g.quality=C.getQualityForBitrate(b,k,A.id,N),g.reason.state=x.state,g.reason.throughput=k,g.reason.latency=N,x.state=1,y(x)}return g},reset:function(){r={},o={},g.off(c.default.PLAYBACK_SEEKING,v,t),g.off(c.default.MEDIA_FRAGMENT_LOADED,b,t),g.off(c.default.METRIC_ADDED,_,t),g.off(c.default.QUALITY_CHANGE_REQUESTED,E,t)}},h=Object(f.default)(p).getInstance().getLogger(t),r={},o={},g.on(c.default.PLAYBACK_SEEKING,v,t),g.on(c.default.MEDIA_FRAGMENT_LOADED,b,t),g.on(c.default.METRIC_ADDED,_,t),g.on(c.default.QUALITY_CHANGE_REQUESTED,E,t),t}h.__dashjs_factory_name="L2ARule",t.default=o.default.getClassFactory(h)},"./src/streaming/rules/abr/SwitchHistoryRule.js":function(e,t,r){r.r(t);var n=r("./src/core/FactoryMaker.js"),i=r("./src/core/Debug.js"),o=r("./src/streaming/rules/SwitchRequest.js");function u(){var e,t,r=this.context;return e={getMaxIndex:function(e){for(var n=e?e.getSwitchHistory():null,i=n?n.getSwitchRequests():[],u=0,l=0,c=0,f=Object(o.default)(r).create(),d=0;d<i.length;d++)if(void 0!==i[d]&&(u+=i[d].drops,l+=i[d].noDrops,c+=i[d].dropSize,u+l>=6&&u/l>.075)){f.quality=d>0&&i[d].drops>0?d-1:d,f.reason={index:f.quality,drops:u,noDrops:l,dropSize:c},t.debug("Switch history rule index: "+f.quality+" samples: "+(u+l)+" drops: "+u);break}return f}},t=Object(i.default)(r).getInstance().getLogger(e),e}u.__dashjs_factory_name="SwitchHistoryRule",t.default=n.default.getClassFactory(u)},"./src/streaming/rules/abr/ThroughputRule.js":function(e,t,r){r.r(t);var n=r("./src/core/FactoryMaker.js"),i=r("./src/streaming/rules/SwitchRequest.js"),o=r("./src/streaming/constants/Constants.js"),u=r("./src/streaming/constants/MetricsConstants.js");function l(e){e=e||{};var t=this.context,r=e.dashMetrics;return{getMaxIndex:function(e){var n=Object(i.default)(t).create();if(!(e&&e.hasOwnProperty("getMediaInfo")&&e.hasOwnProperty("getMediaType")&&e.hasOwnProperty("useBufferOccupancyABR")&&e.hasOwnProperty("getAbrController")&&e.hasOwnProperty("getScheduleController")))return n;!function(){if(!r||!r.hasOwnProperty("getCurrentBufferState"))throw Error(o.default.MISSING_CONFIG_ERROR)}();var l=e.getMediaInfo(),c=e.getMediaType(),f=r.getCurrentBufferState(c),d=e.getScheduleController(),h=e.getAbrController(),p=e.getStreamInfo(),m=p?p.id:null,g=p&&p.manifestInfo?p.manifestInfo.isDynamic:null,y=h.getThroughputHistory(),v=y.getSafeAverageThroughput(c,g),b=y.getAverageLatency(c),_=e.useBufferOccupancyABR();return isNaN(v)||!f||_||h.getAbandonmentStateFor(m,c)!==u.default.ABANDON_LOAD&&(f.state===u.default.BUFFER_LOADED||g)&&(n.quality=h.getQualityForBitrate(l,v,m,b),d.setTimeToLoadDelay(0),n.reason={throughput:v,latency:b}),n},reset:function(){}}}l.__dashjs_factory_name="ThroughputRule",t.default=n.default.getClassFactory(l)},"./src/streaming/rules/abr/lolp/LearningAbrController.js":function(e,t,r){r.r(t);var n=r("./src/core/FactoryMaker.js"),i=r("./src/core/Debug.js");function o(){var e,t,r,n,o,u,l,c,f,d=this.context;function h(){r=null,n=1,o=100,u=0,l=null,c=null,f="dynamic_weight_selection"}function p(){var e=0;if(r)for(var t=0;t<r.length;t++){var n=r[t];n.state.throughput>e&&(e=n.state.throughput)}return e}function m(e,t,r){var n=e.map(function(e,n){return r[n]*Math.pow(e-t[n],2)}).reduce(function(e,t){return e+t});return(n<0?-1:1)*Math.sqrt(Math.abs(n))}function g(e,t,r){for(var n=0;n<t.length;n++){var i=t[n],o=m([i.state.throughput,i.state.latency,i.state.rebuffer,i.state.switch],[e.state.throughput,e.state.latency,e.state.rebuffer,e.state.switch],[1,1,1,1]);(function(e,t,r){var n=e.state;n.throughput=n.throughput+(t[0]-n.throughput)*.01*r,n.latency=n.latency+(t[1]-n.latency)*.01*r,n.rebuffer=n.rebuffer+(t[2]-n.rebuffer)*.01*r,n.switch=n.switch+(t[3]-n.switch)*.01*r})(i,r,Math.exp(-1*Math.pow(o,2)/(2*.010000000000000002)))}}return e={getNextQuality:function(e,i,d,h,y,v,b){var _,T=d,E=function(e){if(!r){r=[];var t=e.bitrateList,i=[];u=t[0].bandwidth,t.forEach(function(e){i.push(e.bandwidth),e.bandwidth<u&&(u=e.bandwidth)}),n=Math.sqrt(i.map(function(e){return Math.pow(e,2)}).reduce(function(e,t){return e+t}));for(var o=0;o<t.length;o++){var l={qualityIndex:o,bitrate:t[o].bandwidth,state:{throughput:t[o].bandwidth/n,latency:0,rebuffer:0,switch:0}};r.push(l)}c=function(e){var t=[],r=function(e){for(var t=[],r=0;r<e;r++){var n=[Math.random()*p(),Math.random(),Math.random(),Math.random()];t.push(n)}return t}(Math.pow(e.length,2));t.push(r[0]);for(var n=[1,1,1,1],i=1;i<e.length;i++){for(var o=null,u=null,l=0;l<r.length;l++){for(var c=r[l],f=null,d=0;d<t.length;d++){var h=m(c,t[d],n);(null===f||h<f)&&(f=h)}(null===u||f>u)&&(o=c,u=f)}t.push(o)}for(var g=null,y=null,v=0;v<t.length;v++){for(var b=0,_=0;_<t.length;_++)v!==_&&(b+=m(t[v],t[_],n));(null===g||b>g)&&(g=b,y=v)}var T=[];for(T.push(t[y]),t.splice(y,1);t.length>0;){for(var E=null,S=null,w=0;w<t.length;w++){var A=m(T[0],t[w],n);(null===E||A<E)&&(E=A,S=w)}T.push(t[S]),t.splice(S,1)}return T}(r)}return r}(e),S=i/n;S>1&&(S=p()),d/=o,t.debug("getNextQuality called throughput:".concat(S," latency:").concat(d," bufferSize:").concat(h," currentQualityIndex:").concat(v," playbackRate:").concat(y));var w=E[v],A=w.bitrate*b.getSegmentDuration()/i,C=Math.max(0,A-h);if(h-A<b.getMinBuffer())return t.debug("Buffer is low for bitrate= ".concat(w.bitrate," downloadTime=").concat(A," currentBuffer=").concat(h," rebuffer=").concat(C)),function(e,t){var n=0,i=e;if(r)for(var o=0;o<r.length;o++){var u=r[o];u.bitrate<e.bitrate&&u.bitrate>n&&t>u.bitrate&&(n=u.bitrate,i=u)}return i}(w,i).qualityIndex;switch(f){case"manual_weight_selection":l=[.4,.4,.4,.4];break;case"random_weight_selection":l=function(e,t){for(var r=[],n=Math.sqrt(2/e),i=0;i<4;i++)r.push(Math.random()*n);return l=r}(E.length);break;default:l||(l=c[c.length-1]),null!==(_=b.findWeightVector(E,T,h,C,i,y))&&-1!==_&&(l=_)}for(var I=null,O=null,R=null,P=0;P<E.length;P++){var k=E[P],D=k.state,N=[D.throughput,D.latency,D.rebuffer,D.switch],L=l.slice(),x=b.getNextBufferWithBitrate(k.bitrate,h,i),j=x<b.getMinBuffer();j&&t.debug("Buffer is low for bitrate=".concat(k.bitrate," downloadTime=").concat(A," currentBuffer=").concat(h," nextBuffer=").concat(x)),(k.bitrate>i-1e4||j)&&k.bitrate!==u&&(L[0]=100);var M=m(N,[S,0,0,0],L);(null===I||M<I)&&(I=M,O=k.qualityIndex,R=k)}var F=Math.abs(w.bitrate-R.bitrate)/n;return g(w,E,[S,d,C,F]),g(R,E,[S,0,0,F]),O},reset:function(){h()}},t=Object(i.default)(d).getInstance().getLogger(e),h(),e}o.__dashjs_factory_name="LearningAbrController",t.default=n.default.getClassFactory(o)},"./src/streaming/rules/abr/lolp/LoLpQoEEvaluator.js":function(e,t,r){r.r(t);var n=r("./src/core/FactoryMaker.js"),i=r("./src/streaming/rules/abr/lolp/QoeInfo.js");function o(){var e,t,r,n;function o(){e=null,t=null,r=null,n=null}function u(e,t,r,n){var o=new i.default;return o.type=e,o.weights.bitrateReward=t||1,o.weights.bitrateSwitchPenalty=1,o.weights.rebufferPenalty=r||1e3,o.weights.latencyPenalty=[],o.weights.latencyPenalty.push({threshold:1.1,penalty:.05*n}),o.weights.latencyPenalty.push({threshold:1e8,penalty:.1*r}),o.weights.playbackSpeedPenalty=n||200,o}function l(e,t,r,n,i){i.bitrateWSum+=i.weights.bitrateReward*e,i.lastBitrate&&(i.bitrateSwitchWSum+=i.weights.bitrateSwitchPenalty*Math.abs(e-i.lastBitrate)),i.lastBitrate=e,i.rebufferWSum+=i.weights.rebufferPenalty*t;for(var o=0;o<i.weights.latencyPenalty.length;o++){var u=i.weights.latencyPenalty[o];if(r<=u.threshold){i.latencyWSum+=u.penalty*r;break}}i.playbackSpeedWSum+=i.weights.playbackSpeedPenalty*Math.abs(1-n),i.totalQoe=i.bitrateWSum-i.bitrateSwitchWSum-i.rebufferWSum-i.latencyWSum-i.playbackSpeedWSum}return o(),{setupPerSegmentQoe:function(i,o,l){e=u("segment",i,o,l),t=i,r=o,n=l},logSegmentMetrics:function(t,r,n,i){e&&l(t,r,n,i,e)},getPerSegmentQoe:function(){return e},calculateSingleUseQoe:function(e,i,o,c){var f=null;return t&&r&&n&&(f=u("segment",t,r,n)),f?(l(e,i,o,c,f),f.totalQoe):0},reset:function(){o()}}}o.__dashjs_factory_name="LoLpQoeEvaluator",t.default=n.default.getClassFactory(o)},"./src/streaming/rules/abr/lolp/LoLpRule.js":function(e,t,r){r.r(t);var n=r("./src/core/Debug.js"),i=r("./src/core/FactoryMaker.js"),o=r("./src/streaming/rules/abr/lolp/LearningAbrController.js"),u=r("./src/streaming/rules/abr/lolp/LoLpQoEEvaluator.js"),l=r("./src/streaming/rules/SwitchRequest.js"),c=r("./src/streaming/constants/MetricsConstants.js"),f=r("./src/streaming/rules/abr/lolp/LoLpWeightSelector.js"),d=r("./src/streaming/constants/Constants.js");function h(e){var t,r,i,h,p=(e=e||{}).dashMetrics,m=this.context;return r={getMaxIndex:function(e){try{var r=Object(l.default)(m).create(),n=e.getMediaInfo().type,o=e.getAbrController(),u=e.getStreamInfo(),g=o.getQualityFor(n,u.id),y=e.getMediaInfo(),v=p.getCurrentBufferState(n),b=e.getScheduleController(),_=p.getCurrentBufferLevel(n,!0),T=u&&u.manifestInfo?u.manifestInfo.isDynamic:null,E=b.getPlaybackController(),S=E.getCurrentLiveLatency();if(!e.useLoLPABR()||n===d.default.AUDIO)return r;S||(S=0);var w=E.getPlaybackRate(),A=o.getThroughputHistory().getSafeAverageThroughput(n,T);if(t.debug("Throughput ".concat(Math.round(A)," kbps")),isNaN(A)||!v||o.getAbandonmentStateFor(u.id,n)===c.default.ABANDON_LOAD)return r;for(var C=y.bitrateList,I=e.getRepresentationInfo().fragmentDuration,O=C[0].bandwidth/1e3,R=C[C.length-1].bandwidth/1e3,P=0;P<C.length;P++){var k=C[P].bandwidth/1e3;k>R?R=k:k<O&&(O=k)}var D=C[g].bandwidth/1e3,N=p.getCurrentHttpRequest(n,!0),L=(N.tresponse.getTime()-N.trequest.getTime())/1e3,x=L>I?L-I:0;h.setupPerSegmentQoe(I,R,O),h.logSegmentMetrics(D,x,S,w);var j=Object(f.default)(m).create({targetLatency:1.5,bufferMin:.3,segmentDuration:I,qoeEvaluator:h});return r.quality=i.getNextQuality(y,1e3*A,S,_,w,g,j),r.reason={throughput:A,latency:S},r.priority=l.default.PRIORITY.STRONG,b.setTimeToLoadDelay(0),r.quality!==g&&console.log("[TgcLearningRule]["+n+"] requesting switch to index: ",r.quality,"Average throughput",Math.round(A),"kbps"),r}catch(e){throw e}},reset:function(){i.reset(),h.reset()}},t=Object(n.default)(m).getInstance().getLogger(r),i=Object(o.default)(m).create(),h=Object(u.default)(m).create(),r}h.__dashjs_factory_name="LoLPRule",t.default=i.default.getClassFactory(h)},"./src/streaming/rules/abr/lolp/LoLpWeightSelector.js":function(e,t,r){r.r(t);var n=r("./src/core/FactoryMaker.js");function i(e){var t,r,n,i=e.targetLatency,o=e.bufferMin,u=e.segmentDuration,l=e.qoeEvaluator;function c(e,t){return t>u?e-u:e+u-t}return t=function e(t,r,i){if(i===r)return t;for(var o=t.length,u=0;u<o;u++)for(var l=t.shift(),c=0;c<n.length;c++)t.push(l.concat(n[c]));return e(t,r,i+1)}((n=[.2,.4,.6,.8,1]).map(function(e){return[e]}),4,1),r=0,{getMinBuffer:function(){return o},getSegmentDuration:function(){return u},getNextBufferWithBitrate:function(e,t,r){return c(t,e*u/r)},getNextBuffer:c,findWeightVector:function(e,n,f,d,h,p){var m=null,g=null,y=null,v=Math.abs(n-r);return e.forEach(function(e){t.forEach(function(t){t[0];var r=t[1],d=t[2],b=(t[3],e.bitrate*u/h),_=c(f,b),T=(0===d?10:1/d)*Math.max(1e-5,b-_),E=(0===r?10:1/r)*e.state.latency,S=l.calculateSingleUseQoe(e.bitrate,T,E,p);(null===m||S>m)&&!(n>i+v)&&_>=o&&(m=S,g=t,y=e.bitrate)})}),null===g&&null===y&&(g=-1),r=n,g}}}i.__dashjs_factory_name="LoLpWeightSelector",t.default=n.default.getClassFactory(i)},"./src/streaming/rules/abr/lolp/QoeInfo.js":function(e,t,r){function n(e){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function i(e,t){for(var r,i=0;i<t.length;i++){var o=t[i];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,(r=function(e,t){if("object"!==n(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var i=r.call(e,"string");if("object"!==n(i))return i;throw TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(o.key),"symbol"===n(r)?r:String(r)),o)}}r.r(t);var o,u,l,c=(o=function e(){(function(e,t){if(!(e instanceof t))throw TypeError("Cannot call a class as a function")})(this,e),this.type=null,this.lastBitrate=null,this.weights={},this.weights.bitrateReward=null,this.weights.bitrateSwitchPenalty=null,this.weights.rebufferPenalty=null,this.weights.latencyPenalty=null,this.weights.playbackSpeedPenalty=null,this.bitrateWSum=0,this.bitrateSwitchWSum=0,this.rebufferWSum=0,this.latencyWSum=0,this.playbackSpeedWSum=0,this.totalQoe=0},u&&i(o.prototype,u),l&&i(o,l),Object.defineProperty(o,"prototype",{writable:!1}),o);t.default=c},"./src/streaming/text/EmbeddedTextHtmlRender.js":function(e,t,r){r.r(t);var n=r("./src/core/FactoryMaker.js");function i(){var e=0;function t(e){return"red"===e?"rgb(255, 0, 0)":"green"===e?"rgb(0, 255, 0)":"blue"===e?"rgb(0, 0, 255)":"cyan"===e?"rgb(0, 255, 255)":"magenta"===e?"rgb(255, 0, 255)":"yellow"===e?"rgb(255, 255, 0)":"white"===e?"rgb(255, 255, 255)":"black"===e?"rgb(0, 0, 0)":e}function r(e,r){var n=e.videoHeight/15;return r?"font-size: "+n+"px; font-family: Menlo, Consolas, 'Cutive Mono', monospace; color: "+(r.foreground?t(r.foreground):"rgb(255, 255, 255)")+"; font-style: "+(r.italics?"italic":"normal")+"; text-decoration: "+(r.underline?"underline":"none")+"; white-space: pre; background-color: "+(r.background?t(r.background):"transparent")+";":"font-size: "+n+"px; font-family: Menlo, Consolas, 'Cutive Mono', monospace; justify-content: flex-start; text-align: left; color: rgb(255, 255, 255); font-style: normal; white-space: pre; line-height: normal; font-weight: normal; text-decoration: none; width: 100%; display: flex;"}return{createHTMLCaptionsFromScreen:function(t,n,i,o){var u,l,c=null,f=!1,d=-1,h={start:n,end:i,spans:[]},p="style_cea608_white_black",m={},g={},y=[];for(u=0;u<15;++u){var v=o.rows[u],b="",_=null;if(!1===v.isEmpty()){var T=function(e){for(var t="",r=0;r<e.length;++r)t+=e[r].uchar;return t.length-t.replace(/^\s+/,"").length}(v.chars);null===c&&(c={x:T,y1:u,y2:u+1,p:[]}),T!==d&&f&&(c.p.push(h),h={start:n,end:i,spans:[]},c.y2=u,c.name="region_"+c.x+"_"+c.y1+"_"+c.y2,!1===m.hasOwnProperty(c.name)?(y.push(c),m[c.name]=c):m[c.name].p.contat(c.p),c={x:T,y1:u,y2:u+1,p:[]});for(var E=0;E<v.chars.length;++E){var S=v.chars[E],w=S.penState;if(null===_||!w.equals(_)){b.trim().length>0&&(h.spans.push({name:p,line:b,row:u}),b="");var A="style_cea608_"+w.foreground+"_"+w.background;w.underline&&(A+="_underline"),w.italics&&(A+="_italics"),g.hasOwnProperty(A)||(g[A]=JSON.parse(JSON.stringify(w))),_=w,p=A}b+=S.uchar}b.trim().length>0&&h.spans.push({name:p,line:b,row:u}),f=!0,d=T}else f=!1,d=-1,c&&(c.p.push(h),h={start:n,end:i,spans:[]},c.y2=u,c.name="region_"+c.x+"_"+c.y1+"_"+c.y2,!1===m.hasOwnProperty(c.name)?(y.push(c),m[c.name]=c):m[c.name].p.contat(c.p),c=null)}c&&(c.p.push(h),c.y2=u+1,c.name="region_"+c.x+"_"+c.y1+"_"+c.y2,!1===m.hasOwnProperty(c.name)?(y.push(c),m[c.name]=c):m[c.name].p.contat(c.p),c=null);var C=[];for(u=0;u<y.length;++u){var I=y[u],O="sub_cea608_"+e++,R=document.createElement("div");R.id=O;var P="left: "+3.125*I.x+"%; top: "+6.66*I.y1+"%; width: "+(100-3.125*I.x)+"%; height: "+6.66*Math.max(I.y2-1-I.y1,1)+"%; align-items: flex-start; overflow: visible; -webkit-writing-mode: horizontal-tb;";R.style.cssText="position: absolute; margin: 0; display: flex; box-sizing: border-box; pointer-events: none;"+P;var k=document.createElement("div");k.className="paragraph bodyStyle",k.style.cssText=r(t);var D=document.createElement("div");D.className="cueUniWrapper",D.style.cssText="unicode-bidi: normal; direction: ltr;";for(var N=0;N<I.p.length;++N){var L=I.p[N],x=0;for(l=0;l<L.spans.length;++l){var j=L.spans[l];if(j.line.length>0){if(0!==l&&x!=j.row){var M=document.createElement("br");M.className="lineBreak",D.appendChild(M)}var F=!1;x===j.row&&(F=!0),x=j.row;var B=g[j.name],U=document.createElement("span");U.className="spanPadding "+j.name+" customSpanColor",U.style.cssText=r(t,B),0!==l&&F?l===L.spans.length-1?U.textContent=j.line.replace(/\s+$/g,""):U.textContent=j.line:L.spans.length>1&&l<L.spans.length-1&&j.row===L.spans[l+1].row?U.textContent=j.line.replace(/^\s+/g,""):U.textContent=j.line.trim(),D.appendChild(U)}}}k.appendChild(D),R.appendChild(k);var q={bodyStyle:["%",90]};for(var H in g)g.hasOwnProperty(H)&&(q[H]=["%",90]);C.push({type:"html",start:n,end:i,cueHTMLElement:R,cueID:O,cellResolution:[32,15],isFromCEA608:!0,fontSize:q,lineHeight:{},linePadding:{}})}return C}}}i.__dashjs_factory_name="EmbeddedTextHtmlRender",t.default=n.default.getSingletonFactory(i)},"./src/streaming/text/NotFragmentedTextBufferController.js":function(e,t,r){r.r(t);var n=r("./src/core/EventBus.js"),i=r("./src/core/events/Events.js"),o=r("./src/core/FactoryMaker.js"),u=r("./src/streaming/utils/InitCache.js"),l=r("./src/streaming/SourceBufferSink.js"),c=r("./src/streaming/vo/DashJSError.js"),f=r("./src/core/errors/Errors.js"),d="NotFragmentedTextBufferController";function h(e){e=e||{};var t,r,o,h,p,m,g=this.context,y=Object(n.default)(g).getInstance(),v=e.textController,b=e.errHandler,_=e.streamInfo,T=e.type;function E(e){var t;r!==e&&(r=e)&&(t=i.default.BUFFERING_COMPLETED,y.trigger(t,{},{streamId:_.id,mediaType:T}))}function S(e){e.chunk.bytes&&!r&&(m.save(e.chunk),p.append(e.chunk),E(!0))}return t={initialize:function(e){h=e},getStreamId:function(){return _.id},getType:function(){return T},getBufferControllerType:function(){return d},createBufferSink:function(e){return new Promise(function(t,r){try{(p=Object(l.default)(g).create({mediaSource:h,textController:v,eventBus:y})).initializeForFirstUse(_,e),o||(p.getBuffer()&&"function"==typeof p.getBuffer().initialize&&p.getBuffer().initialize(),o=!0),t(p)}catch(e){b.error(new c.default(f.default.MEDIASOURCE_TYPE_UNSUPPORTED_CODE,f.default.MEDIASOURCE_TYPE_UNSUPPORTED_MESSAGE+T)),r(e)}})},getBuffer:function(){return p},getBufferLevel:function(){return 0},getRangeAt:function(){return null},pruneBuffer:function(){},hasBufferAtTime:function(){return!0},getAllRangesWithSafetyFactor:function(){return[]},getContinuousBufferTimeForTargetTime:function(){return Number.POSITIVE_INFINITY},setMediaSource:function(e){h=e},getMediaSource:function(){return h},appendInitSegmentFromCache:function(e){return null!==m.extract(_.id,e)},getIsBufferingCompleted:function(){return r},setIsBufferingCompleted:E,getIsPruningInProgress:function(){return!1},reset:function(e){y.off(i.default.INIT_FRAGMENT_LOADED,S,t),!e&&p&&(p.abort(),p.reset(),p=null)},clearBuffers:function(){return Promise.resolve()},prepareForPlaybackSeek:function(){return Promise.resolve()},prepareForReplacementTrackSwitch:function(){return r=!1,Promise.resolve()},setSeekTarget:function(){},updateAppendWindow:function(){return Promise.resolve()},pruneAllSafely:function(){return Promise.resolve()},updateBufferTimestampOffset:function(){return Promise.resolve()},segmentRequestingCompleted:function(){}},o=!1,h=null,r=!1,m=Object(u.default)(g).getInstance(),y.on(i.default.INIT_FRAGMENT_LOADED,S,t),t}h.__dashjs_factory_name=d,t.default=o.default.getClassFactory(h)},"./src/streaming/text/TextController.js":function(e,t,r){r.r(t);var n=r("./src/streaming/constants/Constants.js"),i=r("./src/core/FactoryMaker.js"),o=r("./src/streaming/text/TextSourceBuffer.js"),u=r("./src/streaming/text/TextTracks.js"),l=r("./src/streaming/utils/VTTParser.js"),c=r("./src/streaming/utils/VttCustomRenderingParser.js"),f=r("./src/streaming/utils/TTMLParser.js"),d=r("./src/core/EventBus.js"),h=r("./src/core/events/Events.js"),p=r("./src/streaming/MediaPlayerEvents.js"),m=r("./src/streaming/utils/SupervisorTools.js");function g(e){var t,r,i,g,y,v,b,_,T,E,S,w,A=this.context,C=e.adapter,I=e.errHandler,O=e.manifestModel,R=e.mediaController,P=e.videoModel,k=e.settings;function D(e){var t=e.tracks,i=e.index,o=e.streamId;if(!1===k.get().streaming.text.defaultEnabled&&!x()||w)j(o,-1);else{var u=R.getCurrentTrackFor(n.default.TEXT,o);if(u){var l={lang:u.lang,role:u.roles[0],index:u.index,codec:u.codec,accessibility:u.accessibility[0]};t.some(function(e,t){if(R.matchSettings(l,e))return j(o,t),i=t,!0})}T=!1}r[o].lastEnabledIndex=i,_.trigger(p.default.TEXT_TRACKS_ADDED,{enabled:x(),index:i,tracks:t,streamId:o}),S=!0}function N(e){try{var t=e.streamId;if(!g[t]||isNaN(e.time))return;g[t].manualCueProcessing(e.time)}catch(e){}}function L(e){try{var t=e.streamId;if(!g[t])return;g[t].disableManualTracks()}catch(e){}}function x(){var e=!0;return T&&!E&&(e=!1),e}function j(e,t){(T=-1===t)&&R&&R.saveTextSettingsDisabled();var r=M(e);if(r!==t&&g[e]){g[e].disableManualTracks(),g[e].setModeForTrackIdx(r,n.default.TEXT_HIDDEN),g[e].setCurrentTrackIdx(t),g[e].setModeForTrackIdx(t,n.default.TEXT_SHOWING);var o=g[e].getCurrentTrackInfo();o&&o.isFragmented&&!o.isEmbedded?function(e,t,r){if(i[e])for(var o=i[e].getConfig().fragmentedTracks,u=0;u<o.length;u++){var l=o[u];if(t.lang===l.lang&&(l.id?t.id===l.id:t.index===l.index)){var c=R.getCurrentTrackFor(n.default.TEXT,e);(l.id?c.id!==l.id:c.index!==l.index)?(g[e].deleteCuesFromTrackIdx(r),i[e].setCurrentFragmentedTrackIdx(u)):-1===r&&_.trigger(h.default.SET_FRAGMENTED_TEXT_AFTER_DISABLED,{},{streamId:e,mediaType:n.default.TEXT})}}}(e,o,r):o&&!o.isFragmented&&_.trigger(h.default.SET_NON_FRAGMENTED_TEXT,{currentTrackInfo:o},{streamId:e,mediaType:n.default.TEXT}),R.setTrack(o)}}function M(e){return g[e].getCurrentTrackIdx()}function F(){i={},g={},r={},T=!0,S=!1,w=!1}return t={deactivateStream:function(e){if(e){var t=e.id;i[t]&&i[t].resetMediaInfos(),g[t]&&g[t].deleteAllTextTracks()}},initialize:function(){_.on(h.default.TEXT_TRACKS_QUEUE_INITIALIZED,D,t),k.get().streaming.text.webvtt.customRenderingEnabled&&(_.on(h.default.PLAYBACK_TIME_UPDATED,N,t),_.on(h.default.PLAYBACK_SEEKING,L,t))},initializeForStream:function(e){var t=e.id,n=Object(u.default)(A).create({videoModel:P,settings:k,streamInfo:e});n.initialize(),g[t]=n;var l=Object(o.default)(A).create({errHandler:I,adapter:C,manifestModel:O,mediaController:R,videoModel:P,textTracks:n,vttParser:y,vttCustomRenderingParser:v,ttmlParser:b,streamInfo:e,settings:k});l.initialize(),i[t]=l,r[t]={},r[t].lastEnabledIndex=-1},createTracks:function(e){var t=e.id;g[t]&&g[t].createTracks()},getTextSourceBuffer:function(e){var t=e.id;if(i&&i[t])return i[t]},getAllTracksAreDisabled:function(){return T},addEmbeddedTrack:function(e,t){var r=e.id;i[r]&&i[r].addEmbeddedTrack(t)},enableText:function(e,t){Object(m.checkParameterType)(t,"boolean"),x()!==t&&(t&&j(e,r[e].lastEnabledIndex),t||(r[e].lastEnabledIndex=M(e),S?j(e,-1):w=!0))},isTextEnabled:x,setTextTrack:j,getCurrentTrackIdx:M,enableForcedTextStreaming:function(e){Object(m.checkParameterType)(e,"boolean"),E=e},addMediaInfosToBuffer:function(e,t,r){var n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null,o=e.id;i[o]&&i[o].addMediaInfos(t,r,n)},reset:function(){F(),_.off(h.default.TEXT_TRACKS_QUEUE_INITIALIZED,D,t),k.get().streaming.text.webvtt.customRenderingEnabled&&(_.off(h.default.PLAYBACK_TIME_UPDATED,N,t),_.off(h.default.PLAYBACK_SEEKING,L,t)),Object.keys(i).forEach(function(e){i[e].resetEmbedded(),i[e].reset()})}},E=!1,S=!1,w=!1,y=Object(l.default)(A).getInstance(),v=Object(c.default)(A).getInstance(),b=Object(f.default)(A).getInstance(),_=Object(d.default)(A).getInstance(),F(),t}g.__dashjs_factory_name="TextController",t.default=i.default.getClassFactory(g)},"./src/streaming/text/TextSourceBuffer.js":function(e,t,r){r.r(t);var n=r("./src/streaming/constants/Constants.js"),i=r("./src/streaming/vo/metrics/HTTPRequest.js"),o=r("./src/streaming/vo/TextTrackInfo.js"),u=r("./src/streaming/utils/BoxParser.js"),l=r("./src/streaming/utils/CustomTimeRanges.js"),c=r("./src/core/FactoryMaker.js"),f=r("./src/core/Debug.js"),d=r("./src/streaming/text/EmbeddedTextHtmlRender.js"),h=r("./node_modules/codem-isoboxer/dist/iso_boxer.js"),p=r.n(h),m=r("./externals/cea608-parser.js"),g=r.n(m),y=r("./src/core/EventBus.js"),v=r("./src/core/events/Events.js"),b=r("./src/streaming/vo/DashJSError.js"),_=r("./src/core/errors/Errors.js");function T(e){var t,r,c,h,m,T,E,S,w,A,C,I,O,R,P,k,D=e.errHandler,N=e.manifestModel,L=e.mediaController,x=e.videoModel,j=e.textTracks,M=e.vttParser,F=e.vttCustomRenderingParser,B=e.ttmlParser,U=e.streamInfo,q=e.settings,H=this.context,V=Object(y.default)(H).getInstance(),G=!1;function Y(){T=null,S=NaN,w=[],A=null,E=!1,m=[],h=null}function z(e){var t=e.chunk;t.mediaInfo.embeddedCaptions&&K(t.bytes,t)}function K(e,o){var u=o.mediaInfo,l=u.type,f=u.mimeType,d=u.codec||f;d?-1!==u.codec.indexOf("application/mp4")?function(e,i,o){var u;if("InitializationSegment"===i.segmentType)E=!0,S=c.getMediaTimescaleFromMoov(e);else{if(!E)return;(u=c.getSamplesInfo(e).sampleList).length>0&&(A=u[0].cts-i.start*S),o.search(n.default.STPP)>=0?function(e,i,o){var u,l;for(h=null!==h?h:X(o),u=0;u<i.length;u++){var c=i[u],f=c.cts,d=W(),m=d+f/S,g=m+c.duration/S;t.buffered.add(m,g);var y=new DataView(e,c.offset,c.subSizes[0]),v=p.a.Utils.dataViewToString(y,n.default.UTF8),b=[],_=c.offset+c.subSizes[0];for(l=1;l<c.subSizes.length;l++){var E=new Uint8Array(e,_,c.subSizes[l]),w=String.fromCharCode.apply(null,E);b.push(w),_+=c.subSizes[l]}try{var A=N.getValue().ttmlTimeIsRelative?f/S:0,I=h.parse(v,A,f/S,(f+c.duration)/S,b);j.addCaptions(C,d,I)}catch(e){T.removeExecutedRequestsBeforeTime(),this.remove(),r.error("TTML parser error: "+e.message)}}}(e,u,o):function(e,n){var i,o,u,l=[];for(i=0;i<n.length;i++){var c=n[i];c.cts-=A;var f=W()+c.cts/S,d=f+c.duration/S;t.buffered.add(f,d);var h=e.slice(c.offset,c.offset+c.size),m=p.a.parseBuffer(h);for(o=0;o<m.boxes.length;o++){var g=m.boxes[o];if(r.debug("VTT box1: "+g.type),"vtte"!==g.type&&"vttc"===g.type)for(r.debug("VTT vttc boxes.length = "+g.boxes.length),u=0;u<g.boxes.length;u++){var y=g.boxes[u];if(r.debug("VTT box2: "+y.type),"payl"===y.type){var v=y.cue_text;r.debug("VTT cue_text = "+v);var b=c.cts/S,_=(c.cts+c.duration)/S;l.push({start:b,end:_,data:v,styles:{}}),r.debug("VTT "+b+"-"+_+" : "+v)}}}}l.length>0&&j.addCaptions(C,0,l)}(e,u)}}(e,o,d):l===n.default.VIDEO?function(e,t){var n,o;if(t.segmentType===i.HTTPRequest.INIT_SEGMENT_TYPE)0===O&&(O=c.getMediaTimescaleFromMoov(e));else if(t.segmentType===i.HTTPRequest.MEDIA_SEGMENT_TYPE){if(0===O)return void r.warn("CEA-608: No timescale for embeddedTextTrack yet");var u=(o=c.getSamplesInfo(e)).lastSequenceNumber;if(P[0]||P[1]||function(){for(var e,t=0;t<I.length;t++){if(-1===(e=j.getTrackIdxForId(I[t].id)))return void r.warn("CEA-608: data before track is ready.");var n=function(e){return function(t,r,n){var i;(i=x.getTTMLRenderingDiv()?k.createHTMLCaptionsFromScreen(x.getElement(),t,r,n):[{start:t,end:r,data:n.getDisplayText(),styles:{}}])&&j.addCaptions(e,0,i)}}(e);P[t]=new g.a.Cea608Parser(t+1,{newCue:n},null)}}(),O){if(null!==R&&u!==R+o.numSequences)for(n=0;n<P.length;n++)P[n]&&P[n].reset();for(var l=function(e,t){if(0===t.length)return null;for(var r={splits:[],fields:[[],[]]},n=new DataView(e),i=0;i<t.length;i++)for(var o=t[i],u=g.a.findCea608Nalus(n,o.offset,o.size),l=null,c=0,f=0;f<u.length;f++)for(var d=g.a.extractCea608DataFromRange(n,u[f]),h=0;h<2;h++)if(d[h].length>0){o.cts!==l?c=0:c+=1;var p=W();r.fields[h].push([o.cts+p*O,d[h],c]),l=o.cts}return r.fields.forEach(function(e){e.sort(function(e,t){return e[0]===t[0]?e[2]-t[2]:e[0]-t[0]})}),r}(e,o.sampleList),f=0;f<P.length;f++){var d=l.fields[f],h=P[f];if(h)for(n=0;n<d.length;n++)h.addData(d[n][0]/O,d[n][1])}R=u}}}(e,o):function(e,r,i){var o,u,l=new DataView(e,0,e.byteLength);u=p.a.Utils.dataViewToString(l,n.default.UTF8);try{o=X(i).parse(u,0),j.addCaptions(j.getCurrentTrackIdx(),0,o),t.buffered&&t.buffered.add(r.start,r.end)}catch(e){D.error(new b.default(_.default.TIMED_TEXT_ERROR_ID_PARSE_CODE,_.default.TIMED_TEXT_ERROR_MESSAGE_PARSE+e.message,u))}}(e,o,d):r.error("No text type defined")}function W(){return isNaN(t.timestampOffset)?0:t.timestampOffset}function X(e){var t;return e.search(n.default.VTT)>=0?t=q.get().streaming.text.webvtt.customRenderingEnabled&&F?F:M:(e.search(n.default.TTML)>=0||e.search(n.default.STPP)>=0)&&(t=B),t}function Q(e){I.forEach(function(t){var r=j.getTrackIdxForId(t.id);r>=0&&j.deleteCuesFromTrackIdx(r,e.from,e.to)})}return t={initialize:function(){G||(I=[],C=null,O=0,P=[],R=null,G=!0,k=Object(d.default)(H).getInstance(),V.on(v.default.VIDEO_CHUNK_RECEIVED,z,t),V.on(v.default.BUFFER_CLEARED,Q,t))},addMediaInfos:function(e,r,i){if(m=m.concat(r),e===n.default.TEXT&&r[0].isFragmented&&!r[0].isEmbedded){T=i,t.buffered=Object(l.default)(H).create(),w=L.getTracksFor(n.default.TEXT,U.id).filter(function(e){return e.isFragmented});for(var u=L.getCurrentTrackFor(n.default.TEXT,U.id),c=0;c<w.length;c++)if(w[c]===u){C=c;break}}for(var f=0;f<r.length;f++)(function(e){var t,r,i,u=new o.default;for(var l in e)u[l]=e[l];u.labels=e.labels,u.defaultTrack=(t=!1,I.length>1&&e.isEmbedded?t=e.id&&e.id===n.default.CC1:1===I.length?e.id&&"string"==typeof e.id&&"CC"===e.id.substring(0,2)&&(t=!0):0===I.length&&(t=e.index===m[0].index),t),u.isFragmented=e.isFragmented,u.isEmbedded=!!e.isEmbedded,u.isTTML=e.codec&&e.codec.search(n.default.STPP)>=0||e.mimeType&&e.mimeType.search(n.default.TTML)>=0,u.kind=(r={subtitle:"subtitles",caption:"captions"},(i=e.roles&&e.roles.length>0?r[e.roles[0]]:r.caption)===r.caption||i===r.subtitle?i:r.caption),j.addTextTrack(u)})(r[f])},resetMediaInfos:function(){m=[]},getStreamId:function(){return U.id},append:K,abort:function(){},addEmbeddedTrack:function(e){if(G&&e){if(e.id===n.default.CC1||e.id===n.default.CC3){for(var t=0;t<I.length;t++)if(I[t].id===e.id)return;I.push(e)}else r.warn("Embedded track "+e.id+" not supported!")}},resetEmbedded:function(){V.off(v.default.VIDEO_CHUNK_RECEIVED,z,t),V.off(v.default.BUFFER_CLEARED,Q,t),j&&j.deleteAllTextTracks(),G=!1,I=[],P=[null,null],R=null},getConfig:function(){return{fragmentModel:T,fragmentedTracks:w,videoModel:x}},setCurrentFragmentedTrackIdx:function(e){C=e},remove:function(e,r){void 0===e&&e===r&&(e=t.buffered.start(0),r=t.buffered.end(t.buffered.length-1)),t.buffered.remove(e,r),j.deleteCuesFromTrackIdx(C,e,r)},reset:function(){Y(),m=[],c=null}},r=Object(f.default)(H).getInstance().getLogger(t),c=Object(u.default)(H).getInstance(),Y(),t}T.__dashjs_factory_name="TextSourceBuffer",t.default=c.default.getClassFactory(T)},"./src/streaming/text/TextTracks.js":function(e,t,r){r.r(t);var n=r("./src/streaming/constants/Constants.js"),i=r("./src/core/EventBus.js"),o=r("./src/core/events/Events.js"),u=r("./src/streaming/MediaPlayerEvents.js"),l=r("./src/core/FactoryMaker.js"),c=r("./src/core/Debug.js"),f=r("./node_modules/imsc/src/main/js/main.js");function d(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}function h(e){var t,r,l,h,p,m,g,y,v,b,_,T,E,S,w,A,C,I,O=this.context,R=Object(i.default)(O).getInstance(),P=e.videoModel,k=e.streamInfo,D=e.settings;function N(e,t,r,n,i,o){var u=0,l=0;e/t>r/n?u=(l=t)/n*r:l=(u=e)/r*n;var c,f,d=0,h=0;return u/l>i?(h=l,d=l*i):(d=u,h=u/i),c=(e-d)/2,f=(t-h)/2,o?{x:c+.1*d,y:f+.1*h,w:.8*d,h:.8*h}:{x:c,y:f,w:d,h:h}}function L(e,t){var r=P.getClientWidth(),n=P.getClientHeight(),i=P.getVideoWidth(),o=P.getVideoHeight(),l=P.getVideoRelativeOffsetTop(),c=P.getVideoRelativeOffsetLeft();if(0!==i&&0!==o){var f=i/o,d=!1;e.isFromCEA608&&(f=3.5/3,d=!0);var h=N.call(this,r,n,i,o,f,d),p=h.w,m=h.h,T=h.x,E=h.y;if(p!=v||m!=b||T!=g||E!=y||t){if(g=T+c,y=E+l,v=p,b=m,_){var A=_.style;A&&(A.left=g+"px",A.top=y+"px",A.width=v+"px",A.height=b+"px",A.zIndex=S&&document[S]||w?C:null,R.trigger(u.default.CAPTION_CONTAINER_RESIZE))}var I=e.activeCues;if(I)for(var O=I.length,k=0;k<O;++k){var D=I[k];D.scaleCue(D)}}}}function x(e){var t,r,n,i,o,u=v,l=b;if(e.cellResolution){var c=[u/e.cellResolution[0],l/e.cellResolution[1]];if(e.linePadding){for(t in e.linePadding)if(e.linePadding.hasOwnProperty(t)){r=(e.linePadding[t]*c[0]).toString();for(var f=document.getElementsByClassName("spanPadding"),d=0;d<f.length;d++)f[d].style.cssText=f[d].style.cssText.replace(/(padding-left\s*:\s*)[\d.,]+(?=\s*px)/gi,"$1"+r),f[d].style.cssText=f[d].style.cssText.replace(/(padding-right\s*:\s*)[\d.,]+(?=\s*px)/gi,"$1"+r)}}if(e.fontSize){for(t in e.fontSize)if(e.fontSize.hasOwnProperty(t)){"%"===e.fontSize[t][0]?n=e.fontSize[t][1]/100:"c"===e.fontSize[t][0]&&(n=e.fontSize[t][1]),r=(n*c[1]).toString(),o="defaultFontSize"!==t?document.getElementsByClassName(t):document.getElementsByClassName("paragraph");for(var h=0;h<o.length;h++)o[h].style.cssText=o[h].style.cssText.replace(/(font-size\s*:\s*)[\d.,]+(?=\s*px)/gi,"$1"+r)}if(e.lineHeight){for(t in e.lineHeight)if(e.lineHeight.hasOwnProperty(t)){"%"===e.lineHeight[t][0]?i=e.lineHeight[t][1]/100:"c"===e.fontSize[t][0]&&(i=e.lineHeight[t][1]),r=(i*c[1]).toString(),o=document.getElementsByClassName(t);for(var p=0;p<o.length;p++)o[p].style.cssText=o[p].style.cssText.replace(/(line-height\s*:\s*)[\d.,]+(?=\s*px)/gi,"$1"+r)}}}}if(e.isd){var m=document.getElementById(e.cueID);m&&_.removeChild(m),j(e)}}function j(e){if(_){var t=document.createElement("div");_.appendChild(t),A=Object(f.renderHTML)(e.isd,t,function(t){var r=/^(urn:)(mpeg:[a-z0-9][a-z0-9-]{0,31}:)(subs:)([0-9]+)$/,n=/^#(.*)$/;if(r.test(t)){var i=parseInt(r.exec(t)[4],10)-1;return"data:image/png;base64,"+btoa(e.images[i])}if(n.test(t)){var o=n.exec(t)[1];return"data:image/png;base64,"+e.embeddedImages[o]}return null},_.clientHeight,_.clientWidth,!1,function(e){r.info("renderCaption :",e)},A,!0),t.id=e.cueID,R.trigger(u.default.CAPTION_RENDERED,{captionDiv:t,currentTrackIdx:m})}}function M(e,t,i){var o=B(e);if(o&&Array.isArray(i)&&0!==i.length)for(var c=0;c<i.length;c++){var f=void 0,d=i[c];o.cellResolution=d.cellResolution,o.isFromCEA608=d.isFromCEA608,isNaN(d.start)||isNaN(d.end)||(f="html"===d.type&&_?function(e,t,i){var o=this,c=new l(e.start+t,e.end+t,"");return c.cueHTMLElement=e.cueHTMLElement,c.isd=e.isd,c.images=e.images,c.embeddedImages=e.embeddedImages,c.cueID=e.cueID,c.scaleCue=x.bind(o),c.cellResolution=e.cellResolution,c.lineHeight=e.lineHeight,c.linePadding=e.linePadding,c.fontSize=e.fontSize,_.style.left=g+"px",_.style.top=y+"px",_.style.width=v+"px",_.style.height=b+"px",c.onenter=function(){i.mode===n.default.TEXT_SHOWING&&(this.isd?(j(this),r.debug("Cue enter id:"+this.cueID)):(_.appendChild(this.cueHTMLElement),x.call(o,this),R.trigger(u.default.CAPTION_RENDERED,{captionDiv:this.cueHTMLElement,currentTrackIdx:m})))},c.onexit=function(){if(_)for(var e=_.childNodes,t=0;t<e.length;++t)e[t].id===this.cueID&&(r.debug("Cue exit id:"+e[t].id),_.removeChild(e[t]),--t)},c}(d,t,o):d.data?function(e,t,i){var o=new l(e.start-t,e.end-t,e.data);if(o.cueID="".concat(o.startTime,"_").concat(o.endTime),o.isActive=!1,e.styles)try{void 0!==e.styles.align&&"align"in o&&(o.align=e.styles.align),void 0!==e.styles.line&&"line"in o&&(o.line=e.styles.line),void 0!==e.styles.position&&"position"in o&&(o.position=e.styles.position),void 0!==e.styles.size&&"size"in o&&(o.size=e.styles.size)}catch(e){r.error(e)}return o.onenter=function(){i.mode===n.default.TEXT_SHOWING&&R.trigger(u.default.CAPTION_RENDERED,{currentTrackIdx:m})},o}(d,t,o):null);try{f?function(e,t){if(!e.cues)return!1;for(var r=0;r<e.cues.length;r++)if(e.cues[r].startTime===t.startTime&&e.cues[r].endTime===t.endTime)return!0;return!1}(o,f)||(D.get().streaming.text.webvtt.customRenderingEnabled?(o.manualCueList||(o.manualCueList=[]),o.manualCueList.push(f)):o.addCue(f)):r.error("impossible to display subtitles.")}catch(e){throw H(o),o.addCue(f),e}}}function F(){var e,t=[],r=function(e,t){var r="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!r){if(Array.isArray(e)||(r=function(e,t){if(e){if("string"==typeof e)return d(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?d(e,t):void 0}}(e))){r&&(e=r);var n=0,i=function(){};return{s:i,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:i}}throw TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,u=!0,l=!1;return{s:function(){r=r.call(e)},n:function(){var e=r.next();return u=e.done,e},e:function(e){l=!0,o=e},f:function(){try{u||null==r.return||r.return()}finally{if(l)throw o}}}}(P.getTextTracks());try{for(r.s();!(e=r.n()).done;){var i=e.value;i.manualMode===n.default.TEXT_SHOWING&&t.push(i)}}catch(e){r.e(e)}finally{r.f()}return t}function B(e){return e>=0&&h[e]?P.getTextTrack(h[e].kind,h[e].id,h[e].lang,h[e].isTTML,h[e].isEmbedded):null}function U(e){var t=this;if(e!==m){var r=B(m=e);q.call(this,r),E&&(clearInterval(E),E=null),r&&"html"===r.renderingType&&(L.call(this,r,!0),window.ResizeObserver?(I=new window.ResizeObserver(function(){L.call(t,r,!0)})).observe(P.getElement()):E=setInterval(L.bind(this,r),500))}}function q(e){Y.call(this),e&&"html"===e.renderingType?V.call(this):G.call(this)}function H(e,t,r){var n=!(arguments.length>3&&void 0!==arguments[3])||arguments[3];if(e.cues)for(var i=e.cues,o=i.length-1,u=o;u>=0;u--)(function(e,t,r){var n=!(arguments.length>3&&void 0!==arguments[3])||arguments[3];return(isNaN(t)||(n?e.startTime:e.endTime)>=t)&&(isNaN(r)||(n?e.endTime:e.startTime)<=r)})(i[u],t,r,n)&&(i[u].onexit&&i[u].onexit(),e.removeCue(i[u]))}function V(){var e=document.getElementById("native-cue-style");if(!e){(e=document.createElement("style")).id="native-cue-style",document.head.appendChild(e);var t=e.sheet,n=P.getElement();try{n&&(n.id?t.insertRule("#"+n.id+"::cue {background: transparent}",0):0!==n.classList.length?t.insertRule("."+n.className+"::cue {background: transparent}",0):t.insertRule("video::cue {background: transparent}",0))}catch(e){r.info(""+e.message)}}}function G(){var e=document.getElementById("native-cue-style");e&&document.head.removeChild(e)}function Y(){if(_)for(;_.firstChild;)_.removeChild(_.firstChild)}return t={initialize:function(){"undefined"!=typeof window&&"undefined"!=typeof navigator&&(l=window.VTTCue||window.TextTrackCue,h=[],p=[],m=-1,g=0,y=0,v=0,b=0,_=null,T=null,E=null,w=!1,C=2147483647,A=null,void 0!==document.fullscreenElement?S="fullscreenElement":void 0!==document.webkitIsFullScreen?S="webkitIsFullScreen":document.msFullscreenElement?S="msFullscreenElement":document.mozFullScreen&&(S="mozFullScreen"))},getStreamId:function(){return k.id},addTextTrack:function(e){h.push(e)},addCaptions:M,createTracks:function(){h.sort(function(e,t){return e.index-t.index}),_=P.getTTMLRenderingDiv(),T=P.getVttRenderingDiv();for(var e,t,r,i,l,c,f=-1,d=0;d<h.length;d++){var g=(t=(e=h[d]).kind,r=void 0!==e.id?e.id:e.lang,i=e.lang,l=e.isTTML,c=e.isEmbedded,P.addTextTrack(t,r,i,l,c));p.push(g),h[d].defaultTrack&&(g.default=!0,f=d);var y=B(d);y&&(y.mode=n.default.TEXT_SHOWING,_&&(h[d].isTTML||h[d].isEmbedded)?y.renderingType="html":y.renderingType="default"),M(d,0,h[d].captionData),R.trigger(u.default.TEXT_TRACK_ADDED)}if(U.call(this,f),f>=0){R.on(u.default.PLAYBACK_METADATA_LOADED,function e(){var t=B(f);t&&"html"===t.renderingType&&L.call(this,t,!0),R.off(u.default.PLAYBACK_METADATA_LOADED,e,this)},this);for(var v=0;v<h.length;v++){var b=B(v);b&&(b.mode=v===f?n.default.TEXT_SHOWING:n.default.TEXT_HIDDEN,b.manualMode=v===f?n.default.TEXT_SHOWING:n.default.TEXT_HIDDEN)}}R.trigger(o.default.TEXT_TRACKS_QUEUE_INITIALIZED,{index:m,tracks:h,streamId:k.id})},getCurrentTrackIdx:function(){return m},setCurrentTrackIdx:U,getTrackIdxForId:function(e){for(var t=-1,r=0;r<h.length;r++)if(h[r].id===e){t=r;break}return t},getCurrentTrackInfo:function(){return h[m]},setModeForTrackIdx:function(e,t){var r=B(e);r&&r.mode!==t&&(r.mode=t),r&&r.manualMode!==t&&(r.manualMode=t)},deleteCuesFromTrackIdx:function(e,t,r){var n=B(e);n&&H(n,t,r)},deleteAllTextTracks:function(){for(var e=p?p.length:0,t=0;t<e;t++){var r=B(t);r&&H.call(this,r,k.start,k.start+k.duration,!1)}p=[],h=[],E&&(clearInterval(E),E=null),I&&P&&(I.unobserve(P.getElement()),I=null),m=-1,Y.call(this)},deleteTextTrack:function(e){P.removeChild(p[e]),p.splice(e,1)},manualCueProcessing:function(e){var t=F();if(t&&t.length>0){var r=t[0].manualCueList;r&&r.length>0&&r.forEach(function(t){if(t.startTime<=e&&t.endTime>=e&&!t.isActive)t.isActive=!0,WebVTT.processCues(window,[t],T,t.cueID);else if(t.isActive&&(t.startTime>e||t.endTime<e)&&(t.isActive=!1,T))for(var r=T.childNodes,n=0;n<r.length;++n)r[n].id===t.cueID&&(T.removeChild(r[n]),--n)})}},disableManualTracks:function(){var e=F();if(e&&e.length>0){var t=e[0].manualCueList;t&&t.length>0&&t.forEach(function(e){if(e.isActive&&(e.isActive=!1,T))for(var t=T.childNodes,r=0;r<t.length;++r)t[r].id===e.cueID&&(T.removeChild(t[r]),--r)})}}},r=Object(c.default)(O).getInstance().getLogger(t),t}h.__dashjs_factory_name="TextTracks",t.default=l.default.getClassFactory(h)},"./src/streaming/thumbnail/ThumbnailController.js":function(e,t,r){r.r(t);var n=r("./src/core/FactoryMaker.js"),i=r("./src/streaming/constants/Constants.js"),o=r("./src/streaming/vo/Thumbnail.js"),u=r("./src/streaming/thumbnail/ThumbnailTracks.js"),l=r("./src/streaming/vo/BitrateInfo.js"),c=r("./src/dash/utils/SegmentsUtils.js");function f(e){var t,r=this.context,n=e.streamInfo;function f(e){t.setTrackByIndex(e)}function d(){t&&t.reset()}return d(),t=Object(u.default)(r).create({streamInfo:n,adapter:e.adapter,baseURLController:e.baseURLController,timelineConverter:e.timelineConverter,debug:e.debug,eventBus:e.eventBus,events:e.events,dashConstants:e.dashConstants,dashMetrics:e.dashMetrics,segmentBaseController:e.segmentBaseController}),{getStreamId:function(){return n.id},initialize:function(){t.addTracks();var e=t.getTracks();e&&e.length>0&&f(0)},provide:function(e,r){if("function"==typeof r){var n,i=t.getCurrentTrack();if(!i||i.segmentDuration<=0||null==e)r(null);else{(n=t.getThumbnailRequestForTime(e))&&(i.segmentDuration=n.duration);var u=Math.floor(e%i.segmentDuration*i.tilesHor*i.tilesVert/i.segmentDuration),l=new o.default;if(l.width=Math.floor(i.widthPerTile),l.height=Math.floor(i.heightPerTile),l.x=Math.floor(u%i.tilesHor)*i.widthPerTile,l.y=Math.floor(u/i.tilesHor)*i.heightPerTile,"readThumbnail"in i)return i.readThumbnail(e,function(e){l.url=e,r(l)});if(n)l.url=n.url,i.segmentDuration=NaN;else{var f,d,h=Math.floor(e/i.segmentDuration);l.url=(f=h+i.startNumber,d=Object(c.replaceTokenForTemplate)(i.templateUrl,"Number",f),d=Object(c.replaceTokenForTemplate)(d,"Time",(f-1)*i.segmentDuration*i.timescale),d=Object(c.replaceTokenForTemplate)(d,"Bandwidth",i.bandwidth),Object(c.unescapeDollarsInTemplate)(d))}r(l)}}},setTrackByIndex:f,getCurrentTrackIndex:function(){return t.getCurrentTrackIndex()},getBitrateList:function(){var e=t.getTracks(),r=0;return e.map(function(e){var t=new l.default;return t.mediaType=i.default.IMAGE,t.qualityIndex=r++,t.bitrate=e.bitrate,t.width=e.width,t.height=e.height,t})},reset:d}}f.__dashjs_factory_name="ThumbnailController",t.default=n.default.getClassFactory(f)},"./src/streaming/thumbnail/ThumbnailTracks.js":function(e,t,r){r.r(t),r.d(t,"THUMBNAILS_SCHEME_ID_URIS",function(){return m});var n=r("./src/streaming/constants/Constants.js"),i=r("./src/dash/constants/DashConstants.js"),o=r("./src/core/FactoryMaker.js"),u=r("./src/streaming/vo/ThumbnailTrackInfo.js"),l=r("./src/streaming/utils/URLUtils.js"),c=r("./src/dash/utils/SegmentsUtils.js"),f=r("./src/streaming/utils/BoxParser.js"),d=r("./src/streaming/net/XHRLoader.js"),h=r("./src/dash/DashHandler.js"),p=r("./src/dash/controllers/SegmentsController.js"),m=["http://dashif.org/thumbnail_tile","http://dashif.org/guidelines/thumbnail_tile"];function g(e){var t,r,o,g,y,v,b,_=this.context,T=e.adapter,E=e.baseURLController,S=e.streamInfo,w=e.timelineConverter,A=e.debug,C=e.eventBus,I=e.events,O=e.dashConstants,R=Object(l.default)(_).getInstance();function P(e,r){var n,i=new u.default;i.id=e.id,i.bitrate=e.bandwidth,i.width=e.width,i.height=e.height,i.tilesHor=1,i.tilesVert=1,e.essentialProperties&&e.essentialProperties.forEach(function(e){if(m.indexOf(e.schemeIdUri)>=0&&e.value){var t=e.value.split("x");2!==t.length||isNaN(t[0])||isNaN(t[1])||(i.tilesHor=parseInt(t[0],10),i.tilesVert=parseInt(t[1],10))}}),r?y.updateSegmentData(e).then(function(t){var r,n;r=[],n=function(e,t){var r,n,i,o,u=[],l=0;for(r=0,n=e.segments.length;r<n;r++)i=e.segments[r],(o=Object(c.getTimeBasedSegment)(w,T.getIsDynamic(),t,i.startTime,i.duration,i.timescale,i.media,i.mediaRange,l))&&(u.push(o),o=null,l++);return u}(t,e),e.segments=n,i.segmentDuration=e.segments[0].duration,i.readThumbnail=function(t,n){var i=null;r.some(function(e){if(e.start<=t&&e.end>t)return i=e.url,!0}),i?n(i):e.segments.some(function(i){if(i.mediaStartTime<=t&&i.mediaStartTime+i.duration>t){var o=E.resolve(e.path);return v.load({method:"get",url:o.url,request:{range:i.mediaRange,responseType:"arraybuffer"},onload:function(e){var t=b.getSamplesInfo(e.target.response),o=new Blob([e.target.response.slice(t.sampleList[0].offset,t.sampleList[0].offset+t.sampleList[0].size)],{type:"image/jpeg"}),u=window.URL.createObjectURL(o);r.push({start:i.mediaStartTime,end:i.mediaStartTime+i.duration,url:u}),n&&n(u)}}),!0}})}}):(i.startNumber=e.startNumber,i.segmentDuration=e.segmentDuration,i.timescale=e.timescale,i.templateUrl=(n=R.isRelative(e.media)?R.resolve(e.media,E.resolve(e.path).url):e.media)?Object(c.replaceIDForTemplate)(n,e.id):""),i.tilesHor>0&&i.tilesVert>0&&(i.widthPerTile=i.width/i.tilesHor,i.heightPerTile=i.height/i.tilesVert,t.push(i))}function k(){t=[],o=-1,g=null}return k(),v=Object(d.default)(_).create({}),b=Object(f.default)(_).getInstance(),y=Object(p.default)(_).create({events:I,eventBus:C,streamInfo:S,timelineConverter:w,dashConstants:O,dashMetrics:e.dashMetrics,segmentBaseController:e.segmentBaseController,type:n.default.IMAGE}),(r=Object(h.default)(_).create({streamInfo:S,type:n.default.IMAGE,timelineConverter:w,segmentsController:y,baseURLController:E,debug:A,eventBus:C,events:I,dashConstants:O,urlUtils:R})).initialize(!!T&&T.getIsDynamic()),{getTracks:function(){return t},addTracks:function(){if(S&&T&&(g=T.getMediaInfoForType(S,n.default.IMAGE))){var e=T.getVoRepresentations(g);e&&e.length>0&&e.forEach(function(e){(e.segmentInfoType===i.default.SEGMENT_TEMPLATE&&e.segmentDuration>0&&e.media||e.segmentInfoType===i.default.SEGMENT_TIMELINE)&&P(e),e.segmentInfoType===i.default.SEGMENT_BASE&&P(e,!0)}),t.length>0&&t.sort(function(e,t){return e.bitrate-t.bitrate})}},reset:k,setTrackByIndex:function(e){t&&0!==t.length&&(e>=t.length&&(e=t.length-1),o=e)},getCurrentTrack:function(){return o<0?null:t[o]},getCurrentTrackIndex:function(){return o},getThumbnailRequestForTime:function(e){for(var n,i=T.getVoRepresentations(g),u=0;u<i.length;u++)if(t[o].id===i[u].id){n=i[u];break}return r.getSegmentRequestForTime(g,n,e)}}}g.__dashjs_factory_name="ThumbnailTracks",t.default=o.default.getClassFactory(g)},"./src/streaming/utils/BaseURLSelector.js":function(e,t,r){r.r(t);var n=r("./src/core/errors/Errors.js"),i=r("./src/core/EventBus.js"),o=r("./src/core/events/Events.js"),u=r("./src/streaming/controllers/BlacklistController.js"),l=r("./src/streaming/utils/baseUrlResolution/DVBSelector.js"),c=r("./src/streaming/utils/baseUrlResolution/BasicSelector.js"),f=r("./src/core/FactoryMaker.js"),d=r("./src/streaming/vo/DashJSError.js"),h=r("./src/streaming/utils/SupervisorTools.js"),p=r("./src/streaming/utils/baseUrlResolution/ContentSteeringSelector.js"),m=r("./src/core/Settings.js");function g(){var e,t,r,f,g,y=this.context,v=Object(i.default)(y).getInstance(),b=Object(m.default)(y).getInstance();function _(){e.reset()}return e=Object(u.default)(y).create({updateEventName:o.default.SERVICE_LOCATION_BLACKLIST_CHANGED,addBlacklistEventName:o.default.SERVICE_LOCATION_BLACKLIST_ADD}),t=Object(c.default)(y).create({blacklistController:e}),r=Object(l.default)(y).create({blacklistController:e}),(f=Object(p.default)(y).create()).setConfig({blacklistController:e}),g=t,{chooseSelector:function(e){Object(h.checkParameterType)(e,"boolean"),g=e?r:t},select:function(e){if(e){if(b.get().streaming.applyContentSteering){var r=f.selectBaseUrlIndex(e);isNaN(r)||-1===r||(e.selectedIdx=r)}if(!isNaN(e.selectedIdx))return e.baseUrls[e.selectedIdx];var i=g.select(e.baseUrls);return i?(e.selectedIdx=e.baseUrls.indexOf(i),i):(v.trigger(o.default.URL_RESOLUTION_FAILED,{error:new d.default(n.default.URL_RESOLUTION_FAILED_GENERIC_ERROR_CODE,n.default.URL_RESOLUTION_FAILED_GENERIC_ERROR_MESSAGE)}),void(g===t&&_()))}},reset:_,setConfig:function(e){e.selector&&(g=e.selector),e.contentSteeringSelector&&(f=e.contentSteeringSelector)}}}g.__dashjs_factory_name="BaseURLSelector",t.default=f.default.getClassFactory(g)},"./src/streaming/utils/BoxParser.js":function(e,t,r){r.r(t);var n=r("./src/core/Debug.js"),i=r("./src/streaming/utils/IsoFile.js"),o=r("./src/core/FactoryMaker.js"),u=r("./node_modules/codem-isoboxer/dist/iso_boxer.js"),l=r.n(u),c=r("./src/streaming/vo/IsoBoxSearchInfo.js");function f(){var e,t,r=this.context;function o(e){if(!e)return null;void 0===e.fileStart&&(e.fileStart=0);var t=l.a.parseBuffer(e),n=Object(i.default)(r).create();return n.setData(t),n}function u(e,t){return e[t+3]>>>0|e[t+2]<<8>>>0|e[t+1]<<16>>>0|e[t]<<24>>>0}function f(e,t){return String.fromCharCode(e[t++])+String.fromCharCode(e[t++])+String.fromCharCode(e[t++])+String.fromCharCode(e[t])}return t={parse:o,findLastTopIsoBoxCompleted:function(e,t,r){if(void 0===r&&(r=0),!t||r+8>=t.byteLength)return new c.default(0,!1);for(var n,i=t instanceof ArrayBuffer?new Uint8Array(t):t,o=0;r<i.byteLength;){var l=u(i,r),d=f(i,r+4);if(0===l)break;r+l<=i.byteLength&&(e.indexOf(d)>=0?n=new c.default(r,!0,l):o=r+l),r+=l}return n||new c.default(o,!1)},getMediaTimescaleFromMoov:function(e){var t=o(e),r=t?t.getBox("mdhd"):void 0;return r?r.timescale:NaN},getSamplesInfo:function(e){if(!e||0===e.byteLength)return{sampleList:[],lastSequenceNumber:NaN,totalDuration:NaN,numSequences:NaN};var t,r,n,i,u,l,c,f,d,h,p,m,g,y,v,b,_=o(e),T=_.getBoxes("moof"),E=_.getBoxes("mfhd");v=_.getBoxes("moof").length,y=E[E.length-1].sequence_number,r=0,u=[];var S=-1,w=-1;for(h=0;h<T.length;h++){var A=T[h],C=A.getChildBoxes("traf");for(f=0;f<C.length;f++){var I=C[f],O=I.getChildBox("tfhd"),R=I.getChildBox("tfdt");i=R.baseMediaDecodeTime;var P=I.getChildBoxes("trun"),k=I.getChildBoxes("subs");for(d=0;d<P.length;d++){var D=P[d];for(r=D.sample_count,g=(O.base_data_offset||0)+(D.data_offset||0),c=0;c<r;c++){t=void 0!==(l=D.samples[c]).sample_duration?l.sample_duration:O.default_sample_duration,n=void 0!==l.sample_size?l.sample_size:O.default_sample_size;var N={dts:i,cts:i+(void 0!==l.sample_composition_time_offset?l.sample_composition_time_offset:0),duration:t,offset:A.offset+g,size:n,subSizes:[n]};if(k)for(p=0;p<k.length;p++){var L=k[p];if(S<L.entry_count-1&&c>w&&(S++,w+=L.entries[S].sample_delta),c==w){N.subSizes=[];var x=L.entries[S];for(m=0;m<x.subsample_count;m++)N.subSizes.push(x.subsamples[m].subsample_size)}}u.push(N),g+=n,i+=t}}b=i-R.baseMediaDecodeTime}}return{sampleList:u,lastSequenceNumber:y,totalDuration:b,numSequences:v}},findInitRange:function(t){var r=null,n=o(t);if(!n)return r;var i=n.getBox("ftyp"),u=n.getBox("moov");return e.debug("Searching for initialization."),u&&u.isComplete&&(r=(i?i.offset:u.offset)+"-"+(u.offset+u.size-1),e.debug("Found the initialization.  Range: "+r)),r},parsePayload:function(e,t,r){if(void 0===r&&(r=0),!t||r+8>=t.byteLength)return new c.default(0,!1);for(var n,i=t instanceof ArrayBuffer?new Uint8Array(t):t,o=0;r<i.byteLength;){var l=u(i,r),d=f(i,r+4);if(0===l)break;r+l<=i.byteLength&&(e.indexOf(d)>=0?n=new c.default(r,!0,l,d):o=r+l),r+=l}return n||new c.default(o,!1)}},e=Object(n.default)(r).getInstance().getLogger(t),t}f.__dashjs_factory_name="BoxParser",t.default=o.default.getSingletonFactory(f)},"./src/streaming/utils/Capabilities.js":function(e,t,r){r.r(t),r.d(t,"supportsMediaSource",function(){return l});var n=r("./src/core/FactoryMaker.js"),i=r("./src/streaming/thumbnail/ThumbnailTracks.js"),o=r("./src/streaming/constants/Constants.js"),u=[{codec:"avc1",compatibleCodecs:["avc3"]},{codec:"avc3",compatibleCodecs:["avc1"]}];function l(){var e="WebKitMediaSource"in window,t="MediaSource"in window;return e||t}function c(){var e,t;return t=!1,{setConfig:function(t){t&&t.settings&&(e=t.settings)},supportsMediaSource:l,supportsEncryptedMedia:function(){return t},supportsCodec:function(t,r){return r!==o.default.AUDIO&&r!==o.default.VIDEO?Promise.resolve(!0):new Promise(e.get().streaming.capabilities.useMediaCapabilitiesApi&&navigator.mediaCapabilities&&navigator.mediaCapabilities.decodingInfo&&(t.codec&&r===o.default.AUDIO||r===o.default.VIDEO&&t.codec&&t.width&&t.height&&t.bitrate&&t.framerate)?function(e){if(t&&t.codec){var n={type:"media-source"};n[r]={},n[r].contentType=t.codec,n[r].width=t.width,n[r].height=t.height,n[r].bitrate=parseInt(t.bitrate),n[r].framerate=parseFloat(t.framerate),navigator.mediaCapabilities.decodingInfo(n).then(function(t){e(t.supported)}).catch(function(){e(!1)})}else e(!1)}:function(e){if(t&&t.codec){var r=t.codec;t.width&&t.height&&(r+=';width="'+t.width+'";height="'+t.height+'"'),e(!!("MediaSource"in window&&MediaSource.isTypeSupported(r)||"WebKitMediaSource"in window&&WebKitMediaSource.isTypeSupported(r)))}else e(!1)})},setEncryptedMediaSupported:function(e){t=e},supportsEssentialProperty:function(e){try{return -1!==i.THUMBNAILS_SCHEME_ID_URIS.indexOf(e.schemeIdUri)}catch(e){return!0}},codecRootCompatibleWithCodec:function(e,t){for(var r,n=e.split(".")[0],i=0===t.indexOf(n),o=0;o<u.length;o++)if(u[o].codec===n){r=u[o];break}return r?i||r.compatibleCodecs.some(function(e){return 0===t.indexOf(e)}):i}}}c.__dashjs_factory_name="Capabilities",t.default=n.default.getSingletonFactory(c)},"./src/streaming/utils/CapabilitiesFilter.js":function(e,t,r){r.r(t);var n=r("./src/core/FactoryMaker.js"),i=r("./src/core/Debug.js"),o=r("./src/streaming/constants/Constants.js"),u=r("./src/core/EventBus.js"),l=r("./src/core/events/Events.js");function c(){var e,t,r,n,c,f,d=this.context,h=Object(u.default)(d).getInstance();function p(e,n){if(!n||!n.Period_asArray||0===n.Period_asArray.length)return Promise.resolve();var i=[];return n.Period_asArray.forEach(function(n){i.push(new Promise(function(i){if(n&&n.AdaptationSet_asArray&&0!==n.AdaptationSet_asArray.length){var u=[];n.AdaptationSet_asArray.forEach(function(n){t.getIsTypeOf(n,e)&&u.push(new Promise(function(i){if(n.Representation_asArray&&0!==n.Representation_asArray.length){var u=[],l=[];n.Representation_asArray.forEach(function(i,c){var f=function(e,t,r){var n;switch(e){case o.default.VIDEO:return{codec:r,width:t.width||null,height:t.height||null,framerate:t.frameRate||null,bitrate:t.bandwidth||null};case o.default.AUDIO:return n=t.audioSamplingRate||null,{codec:r,bitrate:t.bandwidth||null,samplerate:n};default:return null}}(e,i,t.getCodec(n,c,!1));l.push(f),u.push(r.supportsCodec(f,e))}),Promise.all(u).then(function(e){n.Representation_asArray=n.Representation_asArray.filter(function(t,r){return e[r]||f.debug("[Stream] Codec ".concat(l[r].codec," not supported ")),e[r]}),i()}).catch(function(){i()})}else i()}))}),Promise.all(u).then(function(){n.AdaptationSet_asArray=n.AdaptationSet_asArray.filter(function(e){var t=e.Representation_asArray&&e.Representation_asArray.length>0;return t||(h.trigger(l.default.ADAPTATION_SET_REMOVED_NO_CAPABILITIES,{adaptationSet:e}),f.warn("AdaptationSet has been removed because of no supported Representation")),t}),i()}).catch(function(){i()})}else i()}))}),Promise.all(i)}return e={setConfig:function(e){e&&(e.adapter&&(t=e.adapter),e.capabilities&&(r=e.capabilities),e.settings&&(n=e.settings),e.customParametersModel&&(c=e.customParametersModel))},filterUnsupportedFeatures:function(e){return new Promise(function(i){var u=[];u.push(p(o.default.VIDEO,e)),u.push(p(o.default.AUDIO,e)),Promise.all(u).then(function(){var o;n.get().streaming.capabilities.filterUnsupportedEssentialProperties&&e&&e.Period_asArray&&0!==e.Period_asArray.length&&e.Period_asArray.forEach(function(e){e.AdaptationSet_asArray=e.AdaptationSet_asArray.filter(function(e){return!e.Representation_asArray||0===e.Representation_asArray.length||(e.Representation_asArray=e.Representation_asArray.filter(function(e){var n=t.getEssentialPropertiesForRepresentation(e);if(n&&n.length>0)for(var i=0;i<n.length;){if(!r.supportsEssentialProperty(n[i]))return f.debug("[Stream] EssentialProperty not supported: "+n[i].schemeIdUri),!1;i+=1}return!0}),e.Representation_asArray&&e.Representation_asArray.length>0)})}),(o=c.getCustomCapabilitiesFilters())&&0!==o.length&&e&&e.Period_asArray&&0!==e.Period_asArray.length&&e.Period_asArray.forEach(function(e){e.AdaptationSet_asArray=e.AdaptationSet_asArray.filter(function(e){return!e.Representation_asArray||0===e.Representation_asArray.length||(e.Representation_asArray=e.Representation_asArray.filter(function(e){return!o.some(function(t){return!t(e)})}),e.Representation_asArray&&e.Representation_asArray.length>0)})}),i()}).catch(function(){i()})})}},f=Object(i.default)(d).getInstance().getLogger(e),e}c.__dashjs_factory_name="CapabilitiesFilter",t.default=n.default.getSingletonFactory(c)},"./src/streaming/utils/CustomTimeRanges.js":function(e,t,r){r.r(t);var n=r("./src/core/FactoryMaker.js"),i=r("./src/streaming/utils/SupervisorTools.js");function o(){return{customTimeRangeArray:[],length:0,add:function(e,t){var r=0;for(r=0;r<this.customTimeRangeArray.length&&e>this.customTimeRangeArray[r].start;r++);for(this.customTimeRangeArray.splice(r,0,{start:e,end:t}),r=0;r<this.customTimeRangeArray.length-1;r++)this.mergeRanges(r,r+1)&&r--;this.length=this.customTimeRangeArray.length},clear:function(){this.customTimeRangeArray=[],this.length=0},remove:function(e,t){for(var r=0;r<this.customTimeRangeArray.length;r++)if(e<=this.customTimeRangeArray[r].start&&t>=this.customTimeRangeArray[r].end)this.customTimeRangeArray.splice(r,1),r--;else{if(e>this.customTimeRangeArray[r].start&&t<this.customTimeRangeArray[r].end){this.customTimeRangeArray.splice(r+1,0,{start:t,end:this.customTimeRangeArray[r].end}),this.customTimeRangeArray[r].end=e;break}e>this.customTimeRangeArray[r].start&&e<this.customTimeRangeArray[r].end?this.customTimeRangeArray[r].end=e:t>this.customTimeRangeArray[r].start&&t<this.customTimeRangeArray[r].end&&(this.customTimeRangeArray[r].start=t)}this.length=this.customTimeRangeArray.length},mergeRanges:function(e,t){var r=this.customTimeRangeArray[e],n=this.customTimeRangeArray[t];return r.start<=n.start&&n.start<=r.end&&r.end<=n.end?(r.end=n.end,this.customTimeRangeArray.splice(t,1),!0):n.start<=r.start&&r.start<=n.end&&n.end<=r.end?(r.start=n.start,this.customTimeRangeArray.splice(t,1),!0):n.start<=r.start&&r.start<=n.end&&r.end<=n.end?(this.customTimeRangeArray.splice(e,1),!0):r.start<=n.start&&n.start<=r.end&&n.end<=r.end&&(this.customTimeRangeArray.splice(t,1),!0)},start:function(e){return Object(i.checkInteger)(e),e>=this.customTimeRangeArray.length||e<0?NaN:this.customTimeRangeArray[e].start},end:function(e){return Object(i.checkInteger)(e),e>=this.customTimeRangeArray.length||e<0?NaN:this.customTimeRangeArray[e].end}}}o.__dashjs_factory_name="CustomTimeRanges",t.default=n.default.getClassFactory(o)},"./src/streaming/utils/DOMStorage.js":function(e,t,r){r.r(t);var n=r("./src/core/FactoryMaker.js"),i=r("./src/core/Debug.js"),o=r("./src/streaming/constants/Constants.js"),u=[{oldKey:"dashjs_vbitrate",newKey:"dashjs_video_bitrate"},{oldKey:"dashjs_abitrate",newKey:"dashjs_audio_bitrate"},{oldKey:"dashjs_vsettings",newKey:"dashjs_video_settings"},{oldKey:"dashjs_asettings",newKey:"dashjs_audio_settings"}],l="dashjs_?_bitrate",c="dashjs_?_settings",f="localStorage",d="lastBitrate",h="lastMediaSettings";function p(e){e=e||{};var t,r,n,p=this.context,m=e.settings;function g(e){var t;if(void 0!==n)return n;n=!1;try{"undefined"!=typeof window&&(t=window[e])}catch(e){return r.warn("DOMStorage access denied: "+e.message),n}if(!t||e!==f&&"sessionStorage"!==e)return n;try{t.setItem("1","1"),t.removeItem("1"),n=!0}catch(e){r.warn("DOMStorage is supported, but cannot be used: "+e.message)}return n}function y(){return 6e5*Math.round((new Date).getTime()/6e5)}function v(e,t){return g(e)&&m.get().streaming[t+"CachingInfo"].enabled}function b(){if(!m)throw Error(o.default.MISSING_CONFIG_ERROR)}return t={getSavedBitrateSettings:function(e){if(b(),!m.get().streaming.lastBitrateCachingInfo.enabled)return NaN;var t=NaN;if(v(f,d)){var n=l.replace(/\?/,e);try{var i=JSON.parse(localStorage.getItem(n))||{},o=(new Date).getTime()-parseInt(i.timestamp,10)>=m.get().streaming.lastBitrateCachingInfo.ttl,u=parseFloat(i.bitrate);isNaN(u)||o?o&&localStorage.removeItem(n):(t=u,r.debug("Last saved bitrate for "+e+" was "+u))}catch(e){return null}}return t},setSavedBitrateSettings:function(e,t){if(v(f,d)&&t){var n=l.replace(/\?/,e);try{localStorage.setItem(n,JSON.stringify({bitrate:t.toFixed(3),timestamp:y()}))}catch(e){r.error(e.message)}}},getSavedMediaSettings:function(e){if(b(),!m.get().streaming.lastMediaSettingsCachingInfo.enabled)return null;var t=null;if(v(f,h)){var r=c.replace(/\?/,e);try{var n=JSON.parse(localStorage.getItem(r))||{},i=(new Date).getTime()-parseInt(n.timestamp,10)>=m.get().streaming.lastMediaSettingsCachingInfo.ttl;t=n.settings,i&&(localStorage.removeItem(r),t=null)}catch(e){return null}}return t},setSavedMediaSettings:function(e,t){if(v(f,h)){var n=c.replace(/\?/,e);try{localStorage.setItem(n,JSON.stringify({settings:t,timestamp:y()}))}catch(e){r.error(e.message)}}}},r=Object(i.default)(p).getInstance().getLogger(t),g(f)&&u.forEach(function(e){var t=localStorage.getItem(e.oldKey);if(t){localStorage.removeItem(e.oldKey);try{localStorage.setItem(e.newKey,t)}catch(e){r.error(e.message)}}}),t}p.__dashjs_factory_name="DOMStorage";var m=n.default.getSingletonFactory(p);t.default=m},"./src/streaming/utils/DefaultURLUtils.js":function(e,t,r){r.r(t);var n=r("./src/core/FactoryMaker.js");function i(){var e,t=/^[a-z][a-z0-9+\-_.]*:/i,r=/^https?:\/\//i,n=/^https:\/\//i,i=/^([a-z][a-z0-9+\-_.]*:\/\/[^\/]+)\/?/i,o=function(e,t){try{return new window.URL(e,t).toString()}catch(t){return e}},u=function(e,t){var r=l;if(!t||!d(e))return e;h(e)&&(r=c),p(e)&&(r=f);var n=r(t),i="/"!==n.charAt(n.length-1)&&"/"!==e.charAt(0)?"/":"";return[n,e].join(i)};function l(e){var t=e.indexOf("/"),r=e.lastIndexOf("/");return -1!==t?r===t+1?e:(-1!==e.indexOf("?")&&(e=e.substring(0,e.indexOf("?"))),e.substring(0,r+1)):""}function c(e){var t=e.match(i);return t?t[1]:""}function f(e){var r=e.match(t);return r?r[0]:""}function d(e){return!t.test(e)}function h(e){return d(e)&&"/"===e.charAt(0)}function p(e){return 0===e.indexOf("//")}return function(){try{new window.URL("x","http://y"),e=o}catch(e){}finally{e=e||u}}(),{parseBaseUrl:l,parseOrigin:c,parseScheme:f,isRelative:d,isPathAbsolute:h,isSchemeRelative:p,isHTTPURL:function(e){return r.test(e)},isHTTPS:function(e){return n.test(e)},removeHostname:function(e){return/^(?:\w+\:\/\/)?([^\/]+)(.*)$/.exec(e)[2].substring(1)},resolve:function(t,r){return e(t,r)}}}i.__dashjs_factory_name="DefaultURLUtils",t.default=n.default.getSingletonFactory(i)},"./src/streaming/utils/EBMLParser.js":function(e,t,r){r.r(t);var n=r("./src/core/FactoryMaker.js");function i(e){e=e||{};var t,r=new DataView(e.data),n=0;function i(e,t){var i=!0,o=0;if(void 0===t&&(t=!1),e.tag>16777215?(r.getUint32(n)!==e.tag&&(i=!1),o=4):e.tag>65535?(256*r.getUint16(n)+r.getUint8(n+2)!==e.tag&&(i=!1),o=3):e.tag>255?(r.getUint16(n)!==e.tag&&(i=!1),o=2):(r.getUint8(n)!==e.tag&&(i=!1),o=1),!i&&e.required&&!t)throw Error("required tag not found");return i&&(n+=o),i}function o(e){var t=1,i=128,o=-1,u=0,l=r.getUint8(n),c=0;for(c=0;c<8;c+=1){if((l&i)===i){u=void 0===e?l&~i:l,o=c;break}i>>=1}for(c=0;c<o;c+=1,t+=1)u=u<<8|255&r.getUint8(n+t);return n+=t,u}return t={getPos:function(){return n},setPos:function(e){n=e},consumeTag:i,consumeTagAndSize:function(e,t){var r=i(e,t);return r&&o(),r},parseTag:function(e){var r;return i(e),r=o(),t[e.parse](r)},skipOverElement:function(e,t){var r,u=i(e,t);return u&&(r=o(),n+=r),u},getMatroskaCodedNum:o,getMatroskaFloat:function(e){var t;switch(e){case 4:t=r.getFloat32(n),n+=4;break;case 8:t=r.getFloat64(n),n+=8}return t},getMatroskaUint:function(e){for(var t=0,i=0;i<e;i+=1)t<<=8,t|=255&r.getUint8(n+i);return n+=e,t},moreData:function(){return n<r.byteLength}}}i.__dashjs_factory_name="EBMLParser",t.default=n.default.getClassFactory(i)},"./src/streaming/utils/ErrorHandler.js":function(e,t,r){r.r(t);var n=r("./src/core/EventBus.js"),i=r("./src/core/events/Events.js"),o=r("./src/core/FactoryMaker.js");function u(){var e=this.context,t=Object(n.default)(e).getInstance();return{error:function(e){t.trigger(i.default.ERROR,{error:e})}}}u.__dashjs_factory_name="ErrorHandler",t.default=o.default.getSingletonFactory(u)},"./src/streaming/utils/InitCache.js":function(e,t,r){r.r(t);var n=r("./src/core/FactoryMaker.js");function i(){var e={};return{save:function(t){var r=t.streamId,n=t.representationId;e[r]=e[r]||{},e[r][n]=t},extract:function(t,r){return e&&e[t]&&e[t][r]?e[t][r]:null},reset:function(){e={}}}}i.__dashjs_factory_name="InitCache",t.default=n.default.getSingletonFactory(i)},"./src/streaming/utils/IsoFile.js":function(e,t,r){r.r(t);var n=r("./src/streaming/vo/IsoBox.js"),i=r("./src/core/FactoryMaker.js");function o(){var e;function t(t){var n=[];if(!t||!e||"function"!=typeof e.fetchAll)return n;for(var i,o=e.fetchAll(t),u=0,l=o.length;u<l;u++)(i=r(o[u]))&&n.push(i);return n}function r(e){if(!e)return null;var t=new n.default(e);return e.hasOwnProperty("_incomplete")&&(t.isComplete=!e._incomplete),t}return{getBox:function(t){return t&&e&&e.boxes&&0!==e.boxes.length&&"function"==typeof e.fetch?r(e.fetch(t)):null},getBoxes:t,setData:function(t){e=t},getLastBox:function(){if(!e||!e.boxes||!e.boxes.length)return null;var r=t(e.boxes[e.boxes.length-1].type);return r.length>0?r[r.length-1]:null}}}o.__dashjs_factory_name="IsoFile",t.default=i.default.getClassFactory(o)},"./src/streaming/utils/ObjectUtils.js":function(e,t,r){r.r(t);var n=r("./src/core/FactoryMaker.js"),i=r("./node_modules/fast-deep-equal/index.js"),o=r.n(i);function u(){return{areEqual:function(e,t){return o()(e,t)}}}u.__dashjs_factory_name="ObjectUtils",t.default=n.default.getSingletonFactory(u)},"./src/streaming/utils/RequestModifier.js":function(e,t,r){r.r(t),r.d(t,"modifyRequest",function(){return i});var n=r("./src/core/FactoryMaker.js");function i(e,t){var r={url:e.url,method:e.method,headers:Object.assign({},e.headers),credentials:e.withCredentials?"include":void 0};return Promise.resolve(t.modifyRequest(r)).then(function(){return Object.assign(e,r,{withCredentials:"include"===r.credentials})})}function o(){return{modifyRequest:null,modifyRequestURL:function(e){return e},modifyRequestHeader:function(e,t){return t.url,e}}}o.__dashjs_factory_name="RequestModifier",t.default=n.default.getSingletonFactory(o)},"./src/streaming/utils/SupervisorTools.js":function(e,t,r){r.r(t),r.d(t,"checkParameterType",function(){return o}),r.d(t,"checkInteger",function(){return u}),r.d(t,"checkRange",function(){return l}),r.d(t,"checkIsVideoOrAudioType",function(){return c});var n=r("./src/streaming/constants/Constants.js");function i(e){return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function o(e,t){if(i(e)!==t)throw n.default.BAD_ARGUMENT_ERROR}function u(e){if(null===e||isNaN(e)||e%1!=0)throw n.default.BAD_ARGUMENT_ERROR+" : argument is not an integer"}function l(e,t,r){if(e<t||e>r)throw n.default.BAD_ARGUMENT_ERROR+" : argument out of range"}function c(e){if("string"!=typeof e||e!==n.default.AUDIO&&e!==n.default.VIDEO)throw n.default.BAD_ARGUMENT_ERROR}},"./src/streaming/utils/TTMLParser.js":function(e,t,r){r.r(t);var n=r("./src/core/FactoryMaker.js"),i=r("./src/core/Debug.js"),o=r("./src/core/EventBus.js"),u=r("./src/core/events/Events.js"),l=r("./node_modules/imsc/src/main/js/main.js"),c=r("./src/streaming/MediaPlayerEvents.js"),f=r("./src/streaming/constants/ConformanceViolationConstants.js");function d(){var e,t,r=this.context,n=Object(o.default)(r).getInstance(),d=0;return e={parse:function(e,r,i,o,h){var p,m,g,y="",v=[],b={},_={},T="",E="";if(!e)throw Error(y="no ttml data to parse");b.data=e,n.trigger(u.default.TTML_TO_PARSE,b);var S=Object(l.fromXML)(b.data,function(e){y=e},{onOpenTag:function(e,r,i){if(i[" imagetype"]&&!i[" imageType"]&&(n.trigger(c.default.CONFORMANCE_VIOLATION,{level:f.default.LEVELS.ERROR,event:f.default.EVENTS.NON_COMPLIANT_SMPTE_IMAGE_ATTRIBUTE}),i[" imageType"]=i[" imagetype"]),"image"===r&&("http://www.smpte-ra.org/schemas/2052-1/2010/smpte-tt"===e||"http://www.smpte-ra.org/schemas/2052-1/2013/smpte-tt"===e)){if(!i[" imageType"]||"PNG"!==i[" imageType"].value)return void t.warn("smpte-tt imageType != PNG. Discarded");T=i["http://www.w3.org/XML/1998/namespace id"].value}},onCloseTag:function(){T&&(_[T]=E.trim()),E="",T=""},onText:function(e){T&&(E+=e)}});n.trigger(u.default.TTML_PARSED,{ttmlString:b.data,ttmlDoc:S});var w,A=S.getMediaTimeEvents();for(g=0;g<A.length;g++){var C=Object(l.generateISD)(S,A[g],function(e){y=e});C.contents.some(function(e){return e.contents.length})&&(p=A[g]+r<i?i:A[g]+r)<(m=A[g+1]+r>o?o:A[g+1]+r)&&v.push({start:p,end:m,type:"html",cueID:(w="cue_TTML_"+d,d++,w),isd:C,images:h,embeddedImages:_})}if(""!==y)throw t.error(y),Error(y);return v}},t=Object(i.default)(r).getInstance().getLogger(e),e}d.__dashjs_factory_name="TTMLParser",t.default=n.default.getSingletonFactory(d)},"./src/streaming/utils/URLUtils.js":function(e,t,r){r.r(t);var n=r("./src/core/FactoryMaker.js"),i=r("./src/streaming/utils/DefaultURLUtils.js");function o(){var e,t=[],r=this.context;function n(r,n,i){var o=function(r){var n;for(n=0;n<t.length;n++)if(t[n].regex.test(r))return t[n].utils;return e}(i||n);return o&&"function"==typeof o[r]?o[r](n,i):e[r](n,i)}return e=Object(i.default)(r).getInstance(),{registerUrlRegex:function(e,r){t.push({regex:e,utils:r})},parseBaseUrl:function(e){return n("parseBaseUrl",e)},parseOrigin:function(e){return n("parseOrigin",e)},parseScheme:function(e){return n("parseScheme",e)},isRelative:function(e){return n("isRelative",e)},isPathAbsolute:function(e){return n("isPathAbsolute",e)},isSchemeRelative:function(e){return n("isSchemeRelative",e)},isHTTPURL:function(e){return n("isHTTPURL",e)},isHTTPS:function(e){return n("isHTTPS",e)},removeHostname:function(e){return n("removeHostname",e)},resolve:function(e,t){return n("resolve",e,t)}}}o.__dashjs_factory_name="URLUtils";var u=n.default.getSingletonFactory(o);t.default=u},"./src/streaming/utils/VTTParser.js":function(e,t,r){r.r(t);var n=r("./src/core/FactoryMaker.js"),i=r("./src/core/Debug.js");function o(){var e,t,r,n,o,u,l=this.context;function c(e){var t=e.split(":"),r=t.length-1;return e=60*parseInt(t[r-1],10)+parseFloat(t[r]),2===r&&(e+=3600*parseInt(t[0],10)),e}return e={parse:function(e){var i,l,f=[];if(!e)return f;i=(e=e.split(r)).length,l=-1;for(var d=0;d<i;d++){var h=e[d];if(h.length>0&&"WEBVTT"!==h&&h.match(n)){var p=function(e){var t=e.split(n),r=t[1].split(u);return r.shift(),t[1]=r[0],r.shift(),{cuePoints:t,styles:function(e){var t={};return e.forEach(function(e){if(e.split(/:/).length>1){var r=e.split(/:/)[1];r&&-1!=r.search(/%/)&&(r=parseInt(r.replace(/%/,""),10)),(e.match(/align/)||e.match(/A/))&&(t.align=r),(e.match(/line/)||e.match(/L/))&&(t.line=r),(e.match(/position/)||e.match(/P/))&&(t.position=r),(e.match(/size/)||e.match(/S/))&&(t.size=r)}}),t}(r)}}(h),m=p.cuePoints,g=p.styles,y=function(e,t){for(var r,i=t,o="",u="";""!==e[i]&&i<e.length;)i++;if((r=i-t)>1)for(var l=0;l<r;l++){if((u=e[t+l]).match(n)){o="";break}o+=u,l!==r-1&&(o+="\n")}else(u=e[t]).match(n)||(o=u);return o}(e,d+1),v=c(m[0].replace(o,"")),b=c(m[1].replace(o,""));!isNaN(v)&&!isNaN(b)&&v>=l&&b>v?""!==y?(l=v,f.push({start:v,end:b,data:y,styles:g})):t.error("Skipping cue due to empty/malformed cue text"):t.error("Skipping cue due to incorrect cue timing")}}return f}},t=Object(i.default)(l).getInstance().getLogger(e),r=/(?:\r\n|\r|\n)/gm,n=/-->/,o=/(^[\s]+|[\s]+$)/g,u=/\s\b/g,e}o.__dashjs_factory_name="VTTParser",t.default=n.default.getSingletonFactory(o)},"./src/streaming/utils/VttCustomRenderingParser.js":function(e,t,r){r.r(t);var n=r("./src/core/FactoryMaker.js");function i(){var e;return function(){try{window&&window.WebVTT&&window.WebVTT.Parser&&(e=new window.WebVTT.Parser(window,window.vttjs,window.WebVTT.StringDecoder()))}catch(e){}}(),{parse:function(t){var r=[];return e.oncue=function(e){e.start=e.startTime,e.end=e.endTime,e.data=e.text,e.styles={align:e.align,line:e.line,position:e.position,size:e.size},r.push(e)},e.parse(t),r}}}i.__dashjs_factory_name="VttCustomRenderingParser",t.default=n.default.getSingletonFactory(i)},"./src/streaming/utils/baseUrlResolution/BasicSelector.js":function(e,t,r){r.r(t);var n=r("./src/core/FactoryMaker.js");function i(e){var t=(e=e||{}).blacklistController;return{select:function(e){var r,n=0;return e&&e.some(function(e,r){return n=r,!t.contains(e.serviceLocation)})&&(r=e[n]),r}}}i.__dashjs_factory_name="BasicSelector",t.default=n.default.getClassFactory(i)},"./src/streaming/utils/baseUrlResolution/ContentSteeringSelector.js":function(e,t,r){r.r(t);var n=r("./src/core/FactoryMaker.js"),i=r("./src/dash/controllers/ContentSteeringController.js");function o(){var e,t,r=this.context;function n(){for(var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],n=0,i=NaN;n<e.length&&"break"!==function(){var o=e[n],u=r.findIndex(function(e){return e.serviceLocation&&e.serviceLocation===o});if(-1!==u&&!t.contains(r[u].serviceLocation))return i=u,"break";n+=1}(););return i}return e=Object(i.default)(r).getInstance(),{selectBaseUrlIndex:function(t){var r=NaN;if(isNaN(t.selectedIdx)){var i=e.getSteeringDataFromManifest();i&&i.defaultServiceLocation&&(r=n([i.defaultServiceLocation],t.baseUrls))}var o=e.getCurrentSteeringResponseData();return t.baseUrls&&t.baseUrls.length&&o&&o.serviceLocationPriority&&o.serviceLocationPriority.length&&(r=n(o.serviceLocationPriority,t.baseUrls)),r},setConfig:function(r){r.blacklistController&&(t=r.blacklistController),r.contentSteeringController&&(e=r.contentSteeringController)}}}o.__dashjs_factory_name="ContentSteeringSelector",t.default=n.default.getClassFactory(o)},"./src/streaming/utils/baseUrlResolution/DVBSelector.js":function(e,t,r){r.r(t);var n=r("./src/core/FactoryMaker.js");function i(e){var t=(e=e||{}).blacklistController;return{select:function(e){var r;return e&&function(e){var t,r,n=0,i=[],o=0;if((r=e.sort(function(e,t){var r=e.dvb_priority-t.dvb_priority;return isNaN(r)?0:r}).filter(function(e,t,r){return!t||r[0].dvb_priority&&e.dvb_priority&&r[0].dvb_priority===e.dvb_priority})).length)return r.length>1&&(r.forEach(function(e){n+=e.dvb_weight,i.push(n)}),t=Math.floor(Math.random()*(n-1)),i.every(function(e,r){return o=r,!(t<e)})),r[o]}((r=[],e.filter(function(e){return!t.contains(e.serviceLocation)||(e.dvb_priority&&r.push(e.dvb_priority),!1)}).filter(function(e){return!r.length||!e.dvb_priority||-1===r.indexOf(e.dvb_priority)})))}}}i.__dashjs_factory_name="DVBSelector",t.default=n.default.getClassFactory(i)},"./src/streaming/vo/BitrateInfo.js":function(e,t,r){function n(e){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function i(e,t){for(var r,i=0;i<t.length;i++){var o=t[i];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,(r=function(e,t){if("object"!==n(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var i=r.call(e,"string");if("object"!==n(i))return i;throw TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(o.key),"symbol"===n(r)?r:String(r)),o)}}r.r(t);var o,u,l,c=(o=function e(){(function(e,t){if(!(e instanceof t))throw TypeError("Cannot call a class as a function")})(this,e),this.mediaType=null,this.bitrate=null,this.width=null,this.height=null,this.scanType=null,this.qualityIndex=NaN},u&&i(o.prototype,u),l&&i(o,l),Object.defineProperty(o,"prototype",{writable:!1}),o);t.default=c},"./src/streaming/vo/DashJSError.js":function(e,t,r){function n(e){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function i(e,t){for(var r,i=0;i<t.length;i++){var o=t[i];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,(r=function(e,t){if("object"!==n(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var i=r.call(e,"string");if("object"!==n(i))return i;throw TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(o.key),"symbol"===n(r)?r:String(r)),o)}}r.r(t);var o,u,l,c=(o=function e(t,r,n){(function(e,t){if(!(e instanceof t))throw TypeError("Cannot call a class as a function")})(this,e),this.code=t||null,this.message=r||null,this.data=n||null},u&&i(o.prototype,u),l&&i(o,l),Object.defineProperty(o,"prototype",{writable:!1}),o);t.default=c},"./src/streaming/vo/DataChunk.js":function(e,t,r){function n(e){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function i(e,t){for(var r,i=0;i<t.length;i++){var o=t[i];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,(r=function(e,t){if("object"!==n(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var i=r.call(e,"string");if("object"!==n(i))return i;throw TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(o.key),"symbol"===n(r)?r:String(r)),o)}}r.r(t);var o,u,l,c=(o=function e(){(function(e,t){if(!(e instanceof t))throw TypeError("Cannot call a class as a function")})(this,e),this.streamId=null,this.mediaInfo=null,this.segmentType=null,this.quality=NaN,this.index=NaN,this.bytes=null,this.start=NaN,this.end=NaN,this.duration=NaN,this.representationId=null,this.endFragment=null},u&&i(o.prototype,u),l&&i(o,l),Object.defineProperty(o,"prototype",{writable:!1}),o);t.default=c},"./src/streaming/vo/FragmentRequest.js":function(e,t,r){r.r(t);var n=r("./src/streaming/vo/metrics/HTTPRequest.js");function i(e){return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var o=function(){function e(t){(function(e,t){if(!(e instanceof t))throw TypeError("Cannot call a class as a function")})(this,e),this.action=e.ACTION_DOWNLOAD,this.startTime=NaN,this.mediaStartTime=NaN,this.mediaType=null,this.mediaInfo=null,this.type=null,this.duration=NaN,this.timescale=NaN,this.range=null,this.url=t||null,this.serviceLocation=null,this.requestStartDate=null,this.firstByteDate=null,this.requestEndDate=null,this.quality=NaN,this.index=NaN,this.availabilityStartTime=null,this.availabilityEndTime=null,this.wallStartTime=null,this.bytesLoaded=NaN,this.bytesTotal=NaN,this.delayLoadingTime=NaN,this.responseType="arraybuffer",this.representationId=null}return function(e,t){for(var r,n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,(r=function(e,t){if("object"!==i(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,"string");if("object"!==i(n))return n;throw TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(o.key),"symbol"===i(r)?r:String(r)),o)}}(e.prototype,[{key:"isInitializationRequest",value:function(){return this.type&&this.type===n.HTTPRequest.INIT_SEGMENT_TYPE}},{key:"setInfo",value:function(e){this.type=e&&e.init?n.HTTPRequest.INIT_SEGMENT_TYPE:n.HTTPRequest.MEDIA_SEGMENT_TYPE,this.url=e&&e.url?e.url:null,this.range=e&&e.range?e.range.start+"-"+e.range.end:null,this.mediaType=e&&e.mediaType?e.mediaType:null}}]),Object.defineProperty(e,"prototype",{writable:!1}),e}();o.ACTION_DOWNLOAD="download",o.ACTION_COMPLETE="complete",t.default=o},"./src/streaming/vo/HeadRequest.js":function(e,t,r){function n(e){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function i(e,t){return(i=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function o(e){return(o=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}r.r(t);var u=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&i(e,t)}(u,e);var t,r=(t=function(){if("undefined"==typeof Reflect||!Reflect.construct||Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}(),function(){var e,r=o(u);if(t){var i=o(this).constructor;e=Reflect.construct(r,arguments,i)}else e=r.apply(this,arguments);return function(e,t){if(t&&("object"===n(t)||"function"==typeof t))return t;if(void 0!==t)throw TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,e)});function u(e){var t;return function(e,t){if(!(e instanceof t))throw TypeError("Cannot call a class as a function")}(this,u),(t=r.call(this,e)).checkForExistenceOnly=!0,t}return Object.defineProperty(u,"prototype",{writable:!1}),u}(r("./src/streaming/vo/FragmentRequest.js").default);t.default=u},"./src/streaming/vo/IsoBox.js":function(e,t,r){function n(e){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}r.r(t);var i=function(){var e;function t(e){if(function(e,t){if(!(e instanceof t))throw TypeError("Cannot call a class as a function")}(this,t),this.offset=e._offset,this.type=e.type,this.size=e.size,this.boxes=[],e.boxes)for(var r=0;r<e.boxes.length;r++)this.boxes.push(new t(e.boxes[r]));switch(this.isComplete=!0,e.type){case"sidx":if(this.timescale=e.timescale,this.earliest_presentation_time=e.earliest_presentation_time,this.first_offset=e.first_offset,this.references=e.references,e.references){this.references=[];for(var n=0;n<e.references.length;n++){var i={reference_type:e.references[n].reference_type,referenced_size:e.references[n].referenced_size,subsegment_duration:e.references[n].subsegment_duration};this.references.push(i)}}break;case"emsg":this.id=e.id,this.version=1===e.version?1:0,this.value=e.value,this.timescale=e.timescale,this.scheme_id_uri=e.scheme_id_uri,this.presentation_time_delta=1===e.version?e.presentation_time:e.presentation_time_delta,this.event_duration=e.event_duration,this.message_data=e.message_data;break;case"mdhd":this.timescale=e.timescale;break;case"mfhd":this.sequence_number=e.sequence_number;break;case"subs":this.entry_count=e.entry_count,this.entries=e.entries;break;case"tfhd":this.base_data_offset=e.base_data_offset,this.sample_description_index=e.sample_description_index,this.default_sample_duration=e.default_sample_duration,this.default_sample_size=e.default_sample_size,this.default_sample_flags=e.default_sample_flags,this.flags=e.flags;break;case"tfdt":this.version=e.version,this.baseMediaDecodeTime=e.baseMediaDecodeTime,this.flags=e.flags;break;case"trun":if(this.sample_count=e.sample_count,this.first_sample_flags=e.first_sample_flags,this.data_offset=e.data_offset,this.flags=e.flags,this.samples=e.samples,e.samples){this.samples=[];for(var o=0,u=e.samples.length;o<u;o++){var l={sample_size:e.samples[o].sample_size,sample_duration:e.samples[o].sample_duration,sample_composition_time_offset:e.samples[o].sample_composition_time_offset};this.samples.push(l)}}}}return e=[{key:"getChildBox",value:function(e){for(var t=0;t<this.boxes.length;t++)if(this.boxes[t].type===e)return this.boxes[t]}},{key:"getChildBoxes",value:function(e){for(var t=[],r=0;r<this.boxes.length;r++)this.boxes[r].type===e&&t.push(this.boxes[r]);return t}}],function(e,t){for(var r,i=0;i<t.length;i++){var o=t[i];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,(r=function(e,t){if("object"!==n(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var i=r.call(e,"string");if("object"!==n(i))return i;throw TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(o.key),"symbol"===n(r)?r:String(r)),o)}}(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t}();t.default=i},"./src/streaming/vo/IsoBoxSearchInfo.js":function(e,t,r){function n(e){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function i(e,t){for(var r,i=0;i<t.length;i++){var o=t[i];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,(r=function(e,t){if("object"!==n(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var i=r.call(e,"string");if("object"!==n(i))return i;throw TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(o.key),"symbol"===n(r)?r:String(r)),o)}}r.r(t);var o,u,l,c=(o=function e(t,r,n){(function(e,t){if(!(e instanceof t))throw TypeError("Cannot call a class as a function")})(this,e),this.lastCompletedOffset=t,this.found=r,this.size=n},u&&i(o.prototype,u),l&&i(o,l),Object.defineProperty(o,"prototype",{writable:!1}),o);t.default=c},"./src/streaming/vo/MetricsList.js":function(e,t,r){function n(e){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function i(e,t){for(var r,i=0;i<t.length;i++){var o=t[i];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,(r=function(e,t){if("object"!==n(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var i=r.call(e,"string");if("object"!==n(i))return i;throw TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(o.key),"symbol"===n(r)?r:String(r)),o)}}r.r(t);var o,u,l,c=(o=function e(){(function(e,t){if(!(e instanceof t))throw TypeError("Cannot call a class as a function")})(this,e),this.TcpList=[],this.HttpList=[],this.RepSwitchList=[],this.BufferLevel=[],this.BufferState=[],this.PlayList=[],this.DroppedFrames=[],this.SchedulingInfo=[],this.DVRInfo=[],this.ManifestUpdate=[],this.RequestsQueue=null,this.DVBErrors=[]},u&&i(o.prototype,u),l&&i(o,l),Object.defineProperty(o,"prototype",{writable:!1}),o);t.default=c},"./src/streaming/vo/TextRequest.js":function(e,t,r){r.r(t);var n=r("./src/streaming/constants/Constants.js");function i(e){return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function o(e,t){return(o=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function u(e){return(u=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var l=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&o(e,t)}(l,e);var t,r=(t=function(){if("undefined"==typeof Reflect||!Reflect.construct||Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}(),function(){var e,r=u(l);if(t){var n=u(this).constructor;e=Reflect.construct(r,arguments,n)}else e=r.apply(this,arguments);return function(e,t){if(t&&("object"===i(t)||"function"==typeof t))return t;if(void 0!==t)throw TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,e)});function l(e,t){var i;return function(e,t){if(!(e instanceof t))throw TypeError("Cannot call a class as a function")}(this,l),(i=r.call(this)).url=e||null,i.type=t||null,i.mediaType=n.default.STREAM,i.responseType="",i}return Object.defineProperty(l,"prototype",{writable:!1}),l}(r("./src/streaming/vo/FragmentRequest.js").default);t.default=l},"./src/streaming/vo/TextTrackInfo.js":function(e,t,r){function n(e){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function i(e,t){return(i=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function o(e){return(o=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}r.r(t);var u=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&i(e,t)}(u,e);var t,r=(t=function(){if("undefined"==typeof Reflect||!Reflect.construct||Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}(),function(){var e,r=o(u);if(t){var i=o(this).constructor;e=Reflect.construct(r,arguments,i)}else e=r.apply(this,arguments);return function(e,t){if(t&&("object"===n(t)||"function"==typeof t))return t;if(void 0!==t)throw TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,e)});function u(){var e;return function(e,t){if(!(e instanceof t))throw TypeError("Cannot call a class as a function")}(this,u),(e=r.call(this)).captionData=null,e.label=null,e.defaultTrack=!1,e.kind=null,e.isFragmented=!1,e.isEmbedded=!1,e.isTTML=null,e}return Object.defineProperty(u,"prototype",{writable:!1}),u}(r("./src/dash/vo/MediaInfo.js").default);t.default=u},"./src/streaming/vo/Thumbnail.js":function(e,t,r){function n(e){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function i(e,t){for(var r,i=0;i<t.length;i++){var o=t[i];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,(r=function(e,t){if("object"!==n(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var i=r.call(e,"string");if("object"!==n(i))return i;throw TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(o.key),"symbol"===n(r)?r:String(r)),o)}}r.r(t);var o,u,l,c=(o=function e(){(function(e,t){if(!(e instanceof t))throw TypeError("Cannot call a class as a function")})(this,e),this.url=null,this.width=null,this.height=null,this.x=null,this.y=null},u&&i(o.prototype,u),l&&i(o,l),Object.defineProperty(o,"prototype",{writable:!1}),o);t.default=c},"./src/streaming/vo/ThumbnailTrackInfo.js":function(e,t,r){function n(e){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function i(e,t){for(var r,i=0;i<t.length;i++){var o=t[i];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,(r=function(e,t){if("object"!==n(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var i=r.call(e,"string");if("object"!==n(i))return i;throw TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(o.key),"symbol"===n(r)?r:String(r)),o)}}r.r(t);var o,u,l,c=(o=function e(){(function(e,t){if(!(e instanceof t))throw TypeError("Cannot call a class as a function")})(this,e),this.bitrate=0,this.width=0,this.height=0,this.tilesHor=0,this.tilesVert=0,this.widthPerTile=0,this.heightPerTile=0,this.startNumber=0,this.segmentDuration=0,this.timescale=0,this.templateUrl="",this.id=""},u&&i(o.prototype,u),l&&i(o,l),Object.defineProperty(o,"prototype",{writable:!1}),o);t.default=c},"./src/streaming/vo/URIFragmentData.js":function(e,t,r){function n(e){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function i(e,t){for(var r,i=0;i<t.length;i++){var o=t[i];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,(r=function(e,t){if("object"!==n(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var i=r.call(e,"string");if("object"!==n(i))return i;throw TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(o.key),"symbol"===n(r)?r:String(r)),o)}}r.r(t);var o,u,l,c=(o=function e(){(function(e,t){if(!(e instanceof t))throw TypeError("Cannot call a class as a function")})(this,e),this.t=null,this.xywh=null,this.track=null,this.id=null,this.s=null,this.r=null},u&&i(o.prototype,u),l&&i(o,l),Object.defineProperty(o,"prototype",{writable:!1}),o);t.default=c},"./src/streaming/vo/metrics/BufferLevel.js":function(e,t,r){function n(e){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function i(e,t){for(var r,i=0;i<t.length;i++){var o=t[i];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,(r=function(e,t){if("object"!==n(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var i=r.call(e,"string");if("object"!==n(i))return i;throw TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(o.key),"symbol"===n(r)?r:String(r)),o)}}r.r(t);var o,u,l,c=(o=function e(){(function(e,t){if(!(e instanceof t))throw TypeError("Cannot call a class as a function")})(this,e),this.t=null,this.level=null},u&&i(o.prototype,u),l&&i(o,l),Object.defineProperty(o,"prototype",{writable:!1}),o);t.default=c},"./src/streaming/vo/metrics/BufferState.js":function(e,t,r){r.r(t);var n,i,o,u=r("./src/streaming/constants/MetricsConstants.js");function l(e){return(l="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function c(e,t){for(var r,n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,(r=function(e,t){if("object"!==l(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,"string");if("object"!==l(n))return n;throw TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(i.key),"symbol"===l(r)?r:String(r)),i)}}var f=(n=function e(){(function(e,t){if(!(e instanceof t))throw TypeError("Cannot call a class as a function")})(this,e),this.target=null,this.state=u.default.BUFFER_EMPTY},i&&c(n.prototype,i),o&&c(n,o),Object.defineProperty(n,"prototype",{writable:!1}),n);t.default=f},"./src/streaming/vo/metrics/DVRInfo.js":function(e,t,r){function n(e){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function i(e,t){for(var r,i=0;i<t.length;i++){var o=t[i];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,(r=function(e,t){if("object"!==n(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var i=r.call(e,"string");if("object"!==n(i))return i;throw TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(o.key),"symbol"===n(r)?r:String(r)),o)}}r.r(t);var o,u,l,c=(o=function e(){(function(e,t){if(!(e instanceof t))throw TypeError("Cannot call a class as a function")})(this,e),this.time=null,this.range=null,this.manifestInfo=null},u&&i(o.prototype,u),l&&i(o,l),Object.defineProperty(o,"prototype",{writable:!1}),o);t.default=c},"./src/streaming/vo/metrics/DroppedFrames.js":function(e,t,r){function n(e){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function i(e,t){for(var r,i=0;i<t.length;i++){var o=t[i];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,(r=function(e,t){if("object"!==n(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var i=r.call(e,"string");if("object"!==n(i))return i;throw TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(o.key),"symbol"===n(r)?r:String(r)),o)}}r.r(t);var o,u,l,c=(o=function e(){(function(e,t){if(!(e instanceof t))throw TypeError("Cannot call a class as a function")})(this,e),this.time=null,this.droppedFrames=null},u&&i(o.prototype,u),l&&i(o,l),Object.defineProperty(o,"prototype",{writable:!1}),o);t.default=c},"./src/streaming/vo/metrics/HTTPRequest.js":function(e,t,r){function n(e){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function i(e,t){for(var r,i=0;i<t.length;i++){var o=t[i];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,(r=function(e,t){if("object"!==n(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var i=r.call(e,"string");if("object"!==n(i))return i;throw TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(o.key),"symbol"===n(r)?r:String(r)),o)}}function o(e,t,r){return t&&i(e.prototype,t),r&&i(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}function u(e,t){if(!(e instanceof t))throw TypeError("Cannot call a class as a function")}r.r(t),r.d(t,"HTTPRequest",function(){return l}),r.d(t,"HTTPRequestTrace",function(){return c});var l=o(function e(){u(this,e),this.tcpid=null,this.type=null,this.url=null,this.actualurl=null,this.range=null,this.trequest=null,this.tresponse=null,this.responsecode=null,this.interval=null,this.trace=[],this._stream=null,this._tfinish=null,this._mediaduration=null,this._quality=null,this._responseHeaders=null,this._serviceLocation=null,this._fileLoaderType=null}),c=o(function e(){u(this,e),this.s=null,this.d=null,this.b=[]});l.GET="GET",l.HEAD="HEAD",l.MPD_TYPE="MPD",l.XLINK_EXPANSION_TYPE="XLinkExpansion",l.INIT_SEGMENT_TYPE="InitializationSegment",l.INDEX_SEGMENT_TYPE="IndexSegment",l.MEDIA_SEGMENT_TYPE="MediaSegment",l.BITSTREAM_SWITCHING_SEGMENT_TYPE="BitstreamSwitchingSegment",l.MSS_FRAGMENT_INFO_SEGMENT_TYPE="FragmentInfoSegment",l.DVB_REPORTING_TYPE="DVBReporting",l.LICENSE="license",l.CONTENT_STEERING_TYPE="ContentSteering",l.OTHER_TYPE="other"},"./src/streaming/vo/metrics/ManifestUpdate.js":function(e,t,r){function n(e){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function i(e,t){for(var r,i=0;i<t.length;i++){var o=t[i];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,(r=function(e,t){if("object"!==n(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var i=r.call(e,"string");if("object"!==n(i))return i;throw TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(o.key),"symbol"===n(r)?r:String(r)),o)}}function o(e,t,r){return t&&i(e.prototype,t),r&&i(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}function u(e,t){if(!(e instanceof t))throw TypeError("Cannot call a class as a function")}r.r(t),r.d(t,"ManifestUpdate",function(){return l}),r.d(t,"ManifestUpdateStreamInfo",function(){return c}),r.d(t,"ManifestUpdateRepresentationInfo",function(){return f});var l=o(function e(){u(this,e),this.mediaType=null,this.type=null,this.requestTime=null,this.fetchTime=null,this.availabilityStartTime=null,this.presentationStartTime=0,this.clientTimeOffset=0,this.currentTime=null,this.buffered=null,this.latency=0,this.streamInfo=[],this.representationInfo=[]}),c=o(function e(){u(this,e),this.id=null,this.index=null,this.start=null,this.duration=null}),f=o(function e(){u(this,e),this.id=null,this.index=null,this.mediaType=null,this.streamIndex=null,this.presentationTimeOffset=null,this.startNumber=null,this.fragmentInfoType=null})},"./src/streaming/vo/metrics/PlayList.js":function(e,t,r){function n(e){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function i(e,t){for(var r,i=0;i<t.length;i++){var o=t[i];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,(r=function(e,t){if("object"!==n(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var i=r.call(e,"string");if("object"!==n(i))return i;throw TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(o.key),"symbol"===n(r)?r:String(r)),o)}}function o(e,t,r){return t&&i(e.prototype,t),r&&i(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}function u(e,t){if(!(e instanceof t))throw TypeError("Cannot call a class as a function")}r.r(t),r.d(t,"PlayList",function(){return l}),r.d(t,"PlayListTrace",function(){return c});var l=o(function e(){u(this,e),this.start=null,this.mstart=null,this.starttype=null,this.trace=[]});l.INITIAL_PLAYOUT_START_REASON="initial_playout",l.SEEK_START_REASON="seek",l.RESUME_FROM_PAUSE_START_REASON="resume",l.METRICS_COLLECTION_START_REASON="metrics_collection_start";var c=o(function e(){u(this,e),this.representationid=null,this.subreplevel=null,this.start=null,this.mstart=null,this.duration=null,this.playbackspeed=null,this.stopreason=null});c.REPRESENTATION_SWITCH_STOP_REASON="representation_switch",c.REBUFFERING_REASON="rebuffering",c.USER_REQUEST_STOP_REASON="user_request",c.END_OF_PERIOD_STOP_REASON="end_of_period",c.END_OF_CONTENT_STOP_REASON="end_of_content",c.METRICS_COLLECTION_STOP_REASON="metrics_collection_end",c.FAILURE_STOP_REASON="failure"},"./src/streaming/vo/metrics/RepresentationSwitch.js":function(e,t,r){function n(e){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function i(e,t){for(var r,i=0;i<t.length;i++){var o=t[i];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,(r=function(e,t){if("object"!==n(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var i=r.call(e,"string");if("object"!==n(i))return i;throw TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(o.key),"symbol"===n(r)?r:String(r)),o)}}r.r(t);var o,u,l,c=(o=function e(){(function(e,t){if(!(e instanceof t))throw TypeError("Cannot call a class as a function")})(this,e),this.t=null,this.mt=null,this.to=null,this.lto=null},u&&i(o.prototype,u),l&&i(o,l),Object.defineProperty(o,"prototype",{writable:!1}),o);t.default=c},"./src/streaming/vo/metrics/RequestsQueue.js":function(e,t,r){function n(e){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function i(e,t){for(var r,i=0;i<t.length;i++){var o=t[i];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,(r=function(e,t){if("object"!==n(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var i=r.call(e,"string");if("object"!==n(i))return i;throw TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(o.key),"symbol"===n(r)?r:String(r)),o)}}r.r(t);var o,u,l,c=(o=function e(){(function(e,t){if(!(e instanceof t))throw TypeError("Cannot call a class as a function")})(this,e),this.loadingRequests=[],this.executedRequests=[]},u&&i(o.prototype,u),l&&i(o,l),Object.defineProperty(o,"prototype",{writable:!1}),o);t.default=c},"./src/streaming/vo/metrics/SchedulingInfo.js":function(e,t,r){function n(e){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function i(e,t){for(var r,i=0;i<t.length;i++){var o=t[i];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,(r=function(e,t){if("object"!==n(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var i=r.call(e,"string");if("object"!==n(i))return i;throw TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(o.key),"symbol"===n(r)?r:String(r)),o)}}r.r(t);var o,u,l,c=(o=function e(){(function(e,t){if(!(e instanceof t))throw TypeError("Cannot call a class as a function")})(this,e),this.mediaType=null,this.t=null,this.type=null,this.startTime=null,this.availabilityStartTime=null,this.duration=null,this.quality=null,this.range=null,this.state=null},u&&i(o.prototype,u),l&&i(o,l),Object.defineProperty(o,"prototype",{writable:!1}),o);t.default=c},0:function(e,t){},1:function(e,t){}}).default},343:e=>{var t,r="object"==typeof Reflect?Reflect:null,n=r&&"function"==typeof r.apply?r.apply:function(e,t,r){return Function.prototype.apply.call(e,t,r)};t=r&&"function"==typeof r.ownKeys?r.ownKeys:Object.getOwnPropertySymbols?function(e){return Object.getOwnPropertyNames(e).concat(Object.getOwnPropertySymbols(e))}:function(e){return Object.getOwnPropertyNames(e)};var i=Number.isNaN||function(e){return e!=e};function o(){o.init.call(this)}e.exports=o,e.exports.once=function(e,t){return new Promise(function(r,n){function i(r){e.removeListener(t,o),n(r)}function o(){"function"==typeof e.removeListener&&e.removeListener("error",i),r([].slice.call(arguments))}y(e,t,o,{once:!0}),"error"!==t&&"function"==typeof e.on&&y(e,"error",i,{once:!0})})},o.EventEmitter=o,o.prototype._events=void 0,o.prototype._eventsCount=0,o.prototype._maxListeners=void 0;var u=10;function l(e){if("function"!=typeof e)throw TypeError('The "listener" argument must be of type Function. Received type '+typeof e)}function c(e){return void 0===e._maxListeners?o.defaultMaxListeners:e._maxListeners}function f(e,t,r,n){var i,o,u;if(l(r),void 0===(o=e._events)?(o=e._events=Object.create(null),e._eventsCount=0):(void 0!==o.newListener&&(e.emit("newListener",t,r.listener?r.listener:r),o=e._events),u=o[t]),void 0===u)u=o[t]=r,++e._eventsCount;else if("function"==typeof u?u=o[t]=n?[r,u]:[u,r]:n?u.unshift(r):u.push(r),(i=c(e))>0&&u.length>i&&!u.warned){u.warned=!0;var f=Error("Possible EventEmitter memory leak detected. "+u.length+" "+String(t)+" listeners added. Use emitter.setMaxListeners() to increase limit");f.name="MaxListenersExceededWarning",f.emitter=e,f.type=t,f.count=u.length,console&&console.warn&&console.warn(f)}return e}function d(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,0==arguments.length?this.listener.call(this.target):this.listener.apply(this.target,arguments)}function h(e,t,r){var n={fired:!1,wrapFn:void 0,target:e,type:t,listener:r},i=d.bind(n);return i.listener=r,n.wrapFn=i,i}function p(e,t,r){var n=e._events;if(void 0===n)return[];var i=n[t];return void 0===i?[]:"function"==typeof i?r?[i.listener||i]:[i]:r?function(e){for(var t=Array(e.length),r=0;r<t.length;++r)t[r]=e[r].listener||e[r];return t}(i):g(i,i.length)}function m(e){var t=this._events;if(void 0!==t){var r=t[e];if("function"==typeof r)return 1;if(void 0!==r)return r.length}return 0}function g(e,t){for(var r=Array(t),n=0;n<t;++n)r[n]=e[n];return r}function y(e,t,r,n){if("function"==typeof e.on)n.once?e.once(t,r):e.on(t,r);else{if("function"!=typeof e.addEventListener)throw TypeError('The "emitter" argument must be of type EventEmitter. Received type '+typeof e);e.addEventListener(t,function i(o){n.once&&e.removeEventListener(t,i),r(o)})}}Object.defineProperty(o,"defaultMaxListeners",{enumerable:!0,get:function(){return u},set:function(e){if("number"!=typeof e||e<0||i(e))throw RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+e+".");u=e}}),o.init=function(){void 0!==this._events&&this._events!==Object.getPrototypeOf(this)._events||(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0},o.prototype.setMaxListeners=function(e){if("number"!=typeof e||e<0||i(e))throw RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+e+".");return this._maxListeners=e,this},o.prototype.getMaxListeners=function(){return c(this)},o.prototype.emit=function(e){for(var t=[],r=1;r<arguments.length;r++)t.push(arguments[r]);var i="error"===e,o=this._events;if(void 0!==o)i=i&&void 0===o.error;else if(!i)return!1;if(i){if(t.length>0&&(u=t[0]),u instanceof Error)throw u;var u,l=Error("Unhandled error."+(u?" ("+u.message+")":""));throw l.context=u,l}var c=o[e];if(void 0===c)return!1;if("function"==typeof c)n(c,this,t);else{var f=c.length,d=g(c,f);for(r=0;r<f;++r)n(d[r],this,t)}return!0},o.prototype.addListener=function(e,t){return f(this,e,t,!1)},o.prototype.on=o.prototype.addListener,o.prototype.prependListener=function(e,t){return f(this,e,t,!0)},o.prototype.once=function(e,t){return l(t),this.on(e,h(this,e,t)),this},o.prototype.prependOnceListener=function(e,t){return l(t),this.prependListener(e,h(this,e,t)),this},o.prototype.removeListener=function(e,t){var r,n,i,o,u;if(l(t),void 0===(n=this._events)||void 0===(r=n[e]))return this;if(r===t||r.listener===t)0==--this._eventsCount?this._events=Object.create(null):(delete n[e],n.removeListener&&this.emit("removeListener",e,r.listener||t));else if("function"!=typeof r){for(i=-1,o=r.length-1;o>=0;o--)if(r[o]===t||r[o].listener===t){u=r[o].listener,i=o;break}if(i<0)return this;0===i?r.shift():function(e,t){for(;t+1<e.length;t++)e[t]=e[t+1];e.pop()}(r,i),1===r.length&&(n[e]=r[0]),void 0!==n.removeListener&&this.emit("removeListener",e,u||t)}return this},o.prototype.off=o.prototype.removeListener,o.prototype.removeAllListeners=function(e){var t,r,n;if(void 0===(r=this._events))return this;if(void 0===r.removeListener)return 0==arguments.length?(this._events=Object.create(null),this._eventsCount=0):void 0!==r[e]&&(0==--this._eventsCount?this._events=Object.create(null):delete r[e]),this;if(0==arguments.length){var i,o=Object.keys(r);for(n=0;n<o.length;++n)"removeListener"!==(i=o[n])&&this.removeAllListeners(i);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if("function"==typeof(t=r[e]))this.removeListener(e,t);else if(void 0!==t)for(n=t.length-1;n>=0;n--)this.removeListener(e,t[n]);return this},o.prototype.listeners=function(e){return p(this,e,!0)},o.prototype.rawListeners=function(e){return p(this,e,!1)},o.listenerCount=function(e,t){return"function"==typeof e.listenerCount?e.listenerCount(t):m.call(e,t)},o.prototype.listenerCount=m,o.prototype.eventNames=function(){return this._eventsCount>0?t(this._events):[]}},924:(e,t,r)=>{var n=r(299);r(40).videojs=n,e.exports=n},40:(e,t,r)=>{e.exports=function(){var e;if("object"==typeof globalThis)return globalThis;try{e=this||Function("return this")()}catch(e){if("object"==typeof window)return window;if("object"==typeof self)return self;if(void 0!==r.g)return r.g}return e}()},474:(e,t,r)=>{var n,i=void 0!==r.g?r.g:"undefined"!=typeof window?window:{},o=r(444);"undefined"!=typeof document?n=document:(n=i["__GLOBAL_DOCUMENT_CACHE@4"])||(n=i["__GLOBAL_DOCUMENT_CACHE@4"]=o),e.exports=n},634:(e,t,r)=>{var n;n="undefined"!=typeof window?window:void 0!==r.g?r.g:"undefined"!=typeof self?self:{},e.exports=n},378:e=>{e.exports=function(e){if(!e)return!1;var r=t.call(e);return"[object Function]"===r||"function"==typeof e&&"[object RegExp]"!==r||"undefined"!=typeof window&&(e===window.setTimeout||e===window.alert||e===window.confirm||e===window.prompt)};var t=Object.prototype.toString},0:(e,t)=>{function r(e){if(e&&"object"==typeof e){var t=e.which||e.keyCode||e.charCode;t&&(e=t)}if("number"==typeof e)return u[e];var r,o=String(e);return(r=n[o.toLowerCase()])?r:(r=i[o.toLowerCase()])||(1===o.length?o.charCodeAt(0):void 0)}r.isEventKey=function(e,t){if(e&&"object"==typeof e){var r,o=e.which||e.keyCode||e.charCode;if(null==o)return!1;if("string"==typeof t){if((r=n[t.toLowerCase()])||(r=i[t.toLowerCase()]))return r===o}else if("number"==typeof t)return t===o;return!1}};var n=(t=e.exports=r).code=t.codes={backspace:8,tab:9,enter:13,shift:16,ctrl:17,alt:18,"pause/break":19,"caps lock":20,esc:27,space:32,"page up":33,"page down":34,end:35,home:36,left:37,up:38,right:39,down:40,insert:45,delete:46,command:91,"left command":91,"right command":93,"numpad *":106,"numpad +":107,"numpad -":109,"numpad .":110,"numpad /":111,"num lock":144,"scroll lock":145,"my computer":182,"my calculator":183,";":186,"=":187,",":188,"-":189,".":190,"/":191,"`":192,"[":219,"\\":220,"]":221,"'":222},i=t.aliases={windows:91,"⇧":16,"⌥":18,"⌃":17,"⌘":91,ctl:17,control:17,option:18,pause:19,break:19,caps:20,return:13,escape:27,spc:32,spacebar:32,pgup:33,pgdn:34,ins:45,del:46,cmd:91};for(o=97;o<123;o++)n[String.fromCharCode(o)]=o-32;for(var o=48;o<58;o++)n[o-48]=o;for(o=1;o<13;o++)n["f"+o]=o+111;for(o=0;o<10;o++)n["numpad "+o]=o+96;var u=t.names=t.title={};for(o in n)u[n[o]]=o;for(var l in i)n[l]=i[l]},658:(e,t,r)=>{var n=r(391).getUint64;e.exports=function(e){var t=new DataView(e.buffer,e.byteOffset,e.byteLength),r={version:e[0],flags:new Uint8Array(e.subarray(1,4)),references:[],referenceId:t.getUint32(4),timescale:t.getUint32(8)},i=12;0===r.version?(r.earliestPresentationTime=t.getUint32(i),r.firstOffset=t.getUint32(i+4),i+=8):(r.earliestPresentationTime=n(e.subarray(i)),r.firstOffset=n(e.subarray(i+8)),i+=16),i+=2;var o=t.getUint16(i);for(i+=2;o>0;i+=12,o--)r.references.push({referenceType:(128&e[i])>>>7,referencedSize:2147483647&t.getUint32(i),subsegmentDuration:t.getUint32(i+4),startsWithSap:!!(128&e[i+8]),sapType:(112&e[i+8])>>>4,sapDeltaTime:268435455&t.getUint32(i+8)});return r}},826:e=>{var t,r,n,i;t=function(e){return 9e4*e},r=function(e,t){return e*t},n=function(e){return e/9e4},i=function(e,t){return e/t},e.exports={ONE_SECOND_IN_TS:9e4,secondsToVideoTs:t,secondsToAudioTs:r,videoTsToSeconds:n,audioTsToSeconds:i,audioTsToVideoTs:function(e,r){return t(i(e,r))},videoTsToAudioTs:function(e,t){return r(n(e),t)},metadataTsToSeconds:function(e,t,r){return n(r?e:e-t)}}},391:e=>{e.exports={getUint64:function(e){var t,r=new DataView(e.buffer,e.byteOffset,e.byteLength);return r.getBigUint64?(t=r.getBigUint64(0))<Number.MAX_SAFE_INTEGER?Number(t):t:4294967296*r.getUint32(0)+r.getUint32(4)},MAX_UINT32:4294967296}},694:e=>{e.exports=function(e,t){var r,n=null;try{r=JSON.parse(e,t)}catch(e){n=e}return[n,r]}},925:function(e){var t,r,n,i,o;t=/^(?=((?:[a-zA-Z0-9+\-.]+:)?))\1(?=((?:\/\/[^\/?#]*)?))\2(?=((?:(?:[^?#\/]*\/)*[^;?#\/]*)?))\3((?:;[^?#]*)?)(\?[^#]*)?(#[^]*)?$/,r=/^(?=([^\/?#]*))\1([^]*)$/,n=/(?:\/|^)\.(?=\/)/g,i=/(?:\/|^)\.\.\/(?!\.\.\/)[^\/]*(?=\/)/g,o={buildAbsoluteURL:function(e,t,n){if(n=n||{},e=e.trim(),!(t=t.trim())){if(!n.alwaysNormalize)return e;var i=o.parseURL(e);if(!i)throw Error("Error trying to parse base URL.");return i.path=o.normalizePath(i.path),o.buildURLFromParts(i)}var u=o.parseURL(t);if(!u)throw Error("Error trying to parse relative URL.");if(u.scheme)return n.alwaysNormalize?(u.path=o.normalizePath(u.path),o.buildURLFromParts(u)):t;var l=o.parseURL(e);if(!l)throw Error("Error trying to parse base URL.");if(!l.netLoc&&l.path&&"/"!==l.path[0]){var c=r.exec(l.path);l.netLoc=c[1],l.path=c[2]}l.netLoc&&!l.path&&(l.path="/");var f={scheme:l.scheme,netLoc:u.netLoc,path:null,params:u.params,query:u.query,fragment:u.fragment};if(!u.netLoc&&(f.netLoc=l.netLoc,"/"!==u.path[0])){if(u.path){var d=l.path,h=d.substring(0,d.lastIndexOf("/")+1)+u.path;f.path=o.normalizePath(h)}else f.path=l.path,u.params||(f.params=l.params,u.query||(f.query=l.query))}return null===f.path&&(f.path=n.alwaysNormalize?o.normalizePath(u.path):u.path),o.buildURLFromParts(f)},parseURL:function(e){var r=t.exec(e);return r?{scheme:r[1]||"",netLoc:r[2]||"",path:r[3]||"",params:r[4]||"",query:r[5]||"",fragment:r[6]||""}:null},normalizePath:function(e){for(e=e.split("").reverse().join("").replace(n,"");e.length!==(e=e.replace(i,"")).length;);return e.split("").reverse().join("")},buildURLFromParts:function(e){return e.scheme+e.netLoc+e.path+e.params+e.query+e.fragment}},e.exports=o},299:(e,t,r)=>{r.r(t),r.d(t,{default:()=>s9});var n=r(634),i=r.n(n),o=r(474),u=r.n(o);function l(){return(l=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}var c=r(0),d=r.n(c);function h(e){if(void 0===e)throw ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function p(e,t){return(p=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function m(e,t){e.prototype=Object.create(t.prototype),e.prototype.constructor=e,p(e,t)}var g=r(694),y=r.n(g),v=r(899),b=r.n(v),_=r(74),T=r.n(_);function E(e,t,r){return(E=!function(){if("undefined"==typeof Reflect||!Reflect.construct||Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}()?function(e,t,r){var n=[null];n.push.apply(n,t);var i=new(Function.bind.apply(e,n));return r&&p(i,r.prototype),i}:Reflect.construct.bind()).apply(null,arguments)}var S=r(925),w=r.n(S),A="http://example.com";let C=function(e,t){if(/^[a-z]+:/i.test(t))return t;/^data:/.test(e)&&(e=i().location&&i().location.href||"");var r="function"==typeof i().URL,n=/^\/\//.test(e),o=!i().location&&!/\/\//i.test(e);if(r?e=new(i()).URL(e,i().location||A):/\/\//i.test(e)||(e=w().buildAbsoluteURL(i().location&&i().location.href||"",e)),r){var u=new URL(t,e);return o?u.href.slice(A.length):n?u.href.slice(u.protocol.length):u.href}return w().buildAbsoluteURL(e,t)};var I=function(){function e(){this.listeners={}}var t=e.prototype;return t.on=function(e,t){this.listeners[e]||(this.listeners[e]=[]),this.listeners[e].push(t)},t.off=function(e,t){if(!this.listeners[e])return!1;var r=this.listeners[e].indexOf(t);return this.listeners[e]=this.listeners[e].slice(0),this.listeners[e].splice(r,1),r>-1},t.trigger=function(e){var t=this.listeners[e];if(t){if(2==arguments.length)for(var r=t.length,n=0;n<r;++n)t[n].call(this,arguments[1]);else for(var i=Array.prototype.slice.call(arguments,1),o=t.length,u=0;u<o;++u)t[u].apply(this,i)}},t.dispose=function(){this.listeners={}},t.pipe=function(e){this.on("data",function(t){e.push(t)})},e}();function O(e){for(var t=i().atob?i().atob(e):f.from(e,"base64").toString("binary"),r=new Uint8Array(t.length),n=0;n<t.length;n++)r[n]=t.charCodeAt(n);return r}var R,P,k,D=function(e){function t(){var t;return(t=e.call(this)||this).buffer="",t}return m(t,e),t.prototype.push=function(e){var t;for(this.buffer+=e,t=this.buffer.indexOf("\n");t>-1;t=this.buffer.indexOf("\n"))this.trigger("data",this.buffer.substring(0,t)),this.buffer=this.buffer.substring(t+1)},t}(I),N=function(e){var t=/([0-9.]*)?@?([0-9.]*)?/.exec(e||""),r={};return t[1]&&(r.length=parseInt(t[1],10)),t[2]&&(r.offset=parseInt(t[2],10)),r},L=function(e){for(var t,r=e.split(RegExp('(?:^|,)((?:[^=]*)=(?:"[^"]*"|[^,]*))')),n={},i=r.length;i--;)""!==r[i]&&((t=/([^=]*)=(.*)/.exec(r[i]).slice(1))[0]=t[0].replace(/^\s+|\s+$/g,""),t[1]=t[1].replace(/^\s+|\s+$/g,""),t[1]=t[1].replace(/^['"](.*)['"]$/g,"$1"),n[t[0]]=t[1]);return n},x=function(e){function t(){var t;return(t=e.call(this)||this).customParsers=[],t.tagMappers=[],t}m(t,e);var r=t.prototype;return r.push=function(e){var t,r,n=this;0!==(e=e.trim()).length&&("#"===e[0]?this.tagMappers.reduce(function(t,r){var n=r(e);return n===e?t:t.concat([n])},[e]).forEach(function(e){for(var i=0;i<n.customParsers.length;i++)if(n.customParsers[i].call(n,e))return;if(0===e.indexOf("#EXT")){if(e=e.replace("\r",""),t=/^#EXTM3U/.exec(e))n.trigger("data",{type:"tag",tagType:"m3u"});else{if(t=/^#EXTINF:?([0-9\.]*)?,?(.*)?$/.exec(e))return r={type:"tag",tagType:"inf"},t[1]&&(r.duration=parseFloat(t[1])),t[2]&&(r.title=t[2]),void n.trigger("data",r);if(t=/^#EXT-X-TARGETDURATION:?([0-9.]*)?/.exec(e))return r={type:"tag",tagType:"targetduration"},t[1]&&(r.duration=parseInt(t[1],10)),void n.trigger("data",r);if(t=/^#EXT-X-VERSION:?([0-9.]*)?/.exec(e))return r={type:"tag",tagType:"version"},t[1]&&(r.version=parseInt(t[1],10)),void n.trigger("data",r);if(t=/^#EXT-X-MEDIA-SEQUENCE:?(\-?[0-9.]*)?/.exec(e))return r={type:"tag",tagType:"media-sequence"},t[1]&&(r.number=parseInt(t[1],10)),void n.trigger("data",r);if(t=/^#EXT-X-DISCONTINUITY-SEQUENCE:?(\-?[0-9.]*)?/.exec(e))return r={type:"tag",tagType:"discontinuity-sequence"},t[1]&&(r.number=parseInt(t[1],10)),void n.trigger("data",r);if(t=/^#EXT-X-PLAYLIST-TYPE:?(.*)?$/.exec(e))return r={type:"tag",tagType:"playlist-type"},t[1]&&(r.playlistType=t[1]),void n.trigger("data",r);if(t=/^#EXT-X-BYTERANGE:?(.*)?$/.exec(e))return r=l(N(t[1]),{type:"tag",tagType:"byterange"}),void n.trigger("data",r);if(t=/^#EXT-X-ALLOW-CACHE:?(YES|NO)?/.exec(e))return r={type:"tag",tagType:"allow-cache"},t[1]&&(r.allowed=!/NO/.test(t[1])),void n.trigger("data",r);if(t=/^#EXT-X-MAP:?(.*)$/.exec(e)){if(r={type:"tag",tagType:"map"},t[1]){var o=L(t[1]);o.URI&&(r.uri=o.URI),o.BYTERANGE&&(r.byterange=N(o.BYTERANGE))}n.trigger("data",r)}else if(t=/^#EXT-X-STREAM-INF:?(.*)$/.exec(e)){if(r={type:"tag",tagType:"stream-inf"},t[1]){if(r.attributes=L(t[1]),r.attributes.RESOLUTION){var u=r.attributes.RESOLUTION.split("x"),c={};u[0]&&(c.width=parseInt(u[0],10)),u[1]&&(c.height=parseInt(u[1],10)),r.attributes.RESOLUTION=c}r.attributes.BANDWIDTH&&(r.attributes.BANDWIDTH=parseInt(r.attributes.BANDWIDTH,10)),r.attributes["FRAME-RATE"]&&(r.attributes["FRAME-RATE"]=parseFloat(r.attributes["FRAME-RATE"])),r.attributes["PROGRAM-ID"]&&(r.attributes["PROGRAM-ID"]=parseInt(r.attributes["PROGRAM-ID"],10))}n.trigger("data",r)}else{if(t=/^#EXT-X-MEDIA:?(.*)$/.exec(e))return r={type:"tag",tagType:"media"},t[1]&&(r.attributes=L(t[1])),void n.trigger("data",r);if(t=/^#EXT-X-ENDLIST/.exec(e))n.trigger("data",{type:"tag",tagType:"endlist"});else if(t=/^#EXT-X-DISCONTINUITY/.exec(e))n.trigger("data",{type:"tag",tagType:"discontinuity"});else{if(t=/^#EXT-X-PROGRAM-DATE-TIME:?(.*)$/.exec(e))return r={type:"tag",tagType:"program-date-time"},t[1]&&(r.dateTimeString=t[1],r.dateTimeObject=new Date(t[1])),void n.trigger("data",r);if(t=/^#EXT-X-KEY:?(.*)$/.exec(e))return r={type:"tag",tagType:"key"},t[1]&&(r.attributes=L(t[1]),r.attributes.IV&&("0x"===r.attributes.IV.substring(0,2).toLowerCase()&&(r.attributes.IV=r.attributes.IV.substring(2)),r.attributes.IV=r.attributes.IV.match(/.{8}/g),r.attributes.IV[0]=parseInt(r.attributes.IV[0],16),r.attributes.IV[1]=parseInt(r.attributes.IV[1],16),r.attributes.IV[2]=parseInt(r.attributes.IV[2],16),r.attributes.IV[3]=parseInt(r.attributes.IV[3],16),r.attributes.IV=new Uint32Array(r.attributes.IV))),void n.trigger("data",r);if(t=/^#EXT-X-START:?(.*)$/.exec(e))return r={type:"tag",tagType:"start"},t[1]&&(r.attributes=L(t[1]),r.attributes["TIME-OFFSET"]=parseFloat(r.attributes["TIME-OFFSET"]),r.attributes.PRECISE=/YES/.test(r.attributes.PRECISE)),void n.trigger("data",r);if(t=/^#EXT-X-CUE-OUT-CONT:?(.*)?$/.exec(e))return r={type:"tag",tagType:"cue-out-cont"},t[1]?r.data=t[1]:r.data="",void n.trigger("data",r);if(t=/^#EXT-X-CUE-OUT:?(.*)?$/.exec(e))return r={type:"tag",tagType:"cue-out"},t[1]?r.data=t[1]:r.data="",void n.trigger("data",r);if(t=/^#EXT-X-CUE-IN:?(.*)?$/.exec(e))return r={type:"tag",tagType:"cue-in"},t[1]?r.data=t[1]:r.data="",void n.trigger("data",r);if((t=/^#EXT-X-SKIP:(.*)$/.exec(e))&&t[1])return(r={type:"tag",tagType:"skip"}).attributes=L(t[1]),r.attributes.hasOwnProperty("SKIPPED-SEGMENTS")&&(r.attributes["SKIPPED-SEGMENTS"]=parseInt(r.attributes["SKIPPED-SEGMENTS"],10)),r.attributes.hasOwnProperty("RECENTLY-REMOVED-DATERANGES")&&(r.attributes["RECENTLY-REMOVED-DATERANGES"]=r.attributes["RECENTLY-REMOVED-DATERANGES"].split("	")),void n.trigger("data",r);if((t=/^#EXT-X-PART:(.*)$/.exec(e))&&t[1])return(r={type:"tag",tagType:"part"}).attributes=L(t[1]),["DURATION"].forEach(function(e){r.attributes.hasOwnProperty(e)&&(r.attributes[e]=parseFloat(r.attributes[e]))}),["INDEPENDENT","GAP"].forEach(function(e){r.attributes.hasOwnProperty(e)&&(r.attributes[e]=/YES/.test(r.attributes[e]))}),r.attributes.hasOwnProperty("BYTERANGE")&&(r.attributes.byterange=N(r.attributes.BYTERANGE)),void n.trigger("data",r);if((t=/^#EXT-X-SERVER-CONTROL:(.*)$/.exec(e))&&t[1])return(r={type:"tag",tagType:"server-control"}).attributes=L(t[1]),["CAN-SKIP-UNTIL","PART-HOLD-BACK","HOLD-BACK"].forEach(function(e){r.attributes.hasOwnProperty(e)&&(r.attributes[e]=parseFloat(r.attributes[e]))}),["CAN-SKIP-DATERANGES","CAN-BLOCK-RELOAD"].forEach(function(e){r.attributes.hasOwnProperty(e)&&(r.attributes[e]=/YES/.test(r.attributes[e]))}),void n.trigger("data",r);if((t=/^#EXT-X-PART-INF:(.*)$/.exec(e))&&t[1])return(r={type:"tag",tagType:"part-inf"}).attributes=L(t[1]),["PART-TARGET"].forEach(function(e){r.attributes.hasOwnProperty(e)&&(r.attributes[e]=parseFloat(r.attributes[e]))}),void n.trigger("data",r);if((t=/^#EXT-X-PRELOAD-HINT:(.*)$/.exec(e))&&t[1])return(r={type:"tag",tagType:"preload-hint"}).attributes=L(t[1]),["BYTERANGE-START","BYTERANGE-LENGTH"].forEach(function(e){if(r.attributes.hasOwnProperty(e)){r.attributes[e]=parseInt(r.attributes[e],10);var t="BYTERANGE-LENGTH"===e?"length":"offset";r.attributes.byterange=r.attributes.byterange||{},r.attributes.byterange[t]=r.attributes[e],delete r.attributes[e]}}),void n.trigger("data",r);if((t=/^#EXT-X-RENDITION-REPORT:(.*)$/.exec(e))&&t[1])return(r={type:"tag",tagType:"rendition-report"}).attributes=L(t[1]),["LAST-MSN","LAST-PART"].forEach(function(e){r.attributes.hasOwnProperty(e)&&(r.attributes[e]=parseInt(r.attributes[e],10))}),void n.trigger("data",r);n.trigger("data",{type:"tag",data:e.slice(4)})}}}}else n.trigger("data",{type:"comment",text:e.slice(1)})}):this.trigger("data",{type:"uri",uri:e}))},r.addParser=function(e){var t=this,r=e.expression,n=e.customType,i=e.dataParser,o=e.segment;"function"!=typeof i&&(i=function(e){return e}),this.customParsers.push(function(e){if(r.exec(e))return t.trigger("data",{type:"custom",data:i(e),customType:n,segment:o}),!0})},r.addTagMapper=function(e){var t=e.expression,r=e.map;this.tagMappers.push(function(e){return t.test(e)?r(e):e})},t}(I),j=function(e){var t={};return Object.keys(e).forEach(function(r){t[r.toLowerCase().replace(/-(\w)/g,function(e){return e[1].toUpperCase()})]=e[r]}),t},M=function(e){var t=e.serverControl,r=e.targetDuration,n=e.partTargetDuration;if(t){var i="#EXT-X-SERVER-CONTROL",o="holdBack",u="partHoldBack",l=r&&3*r,c=n&&2*n;r&&!t.hasOwnProperty(o)&&(t[o]=l,this.trigger("info",{message:i+" defaulting HOLD-BACK to targetDuration * 3 ("+l+")."})),l&&t[o]<l&&(this.trigger("warn",{message:i+" clamping HOLD-BACK ("+t[o]+") to targetDuration * 3 ("+l+")"}),t[o]=l),n&&!t.hasOwnProperty(u)&&(t[u]=3*n,this.trigger("info",{message:i+" defaulting PART-HOLD-BACK to partTargetDuration * 3 ("+t[u]+")."})),n&&t[u]<c&&(this.trigger("warn",{message:i+" clamping PART-HOLD-BACK ("+t[u]+") to partTargetDuration * 2 ("+c+")."}),t[u]=c)}},F=function(e){function t(){(t=e.call(this)||this).lineStream=new D,t.parseStream=new x,t.lineStream.pipe(t.parseStream);var t,r,n,i=h(t),o=[],u={},c=!1,f=function(){},d={AUDIO:{},VIDEO:{},"CLOSED-CAPTIONS":{},SUBTITLES:{}},p=0;t.manifest={allowCache:!0,discontinuityStarts:[],segments:[]};var m=0,g=0;return t.on("end",function(){!u.uri&&(u.parts||u.preloadHints)&&(!u.map&&r&&(u.map=r),!u.key&&n&&(u.key=n),u.timeline||"number"!=typeof p||(u.timeline=p),t.manifest.preloadSegment=u)}),t.parseStream.on("data",function(e){var t,h;({tag:function(){(({version:function(){e.version&&(this.manifest.version=e.version)},"allow-cache":function(){this.manifest.allowCache=e.allowed,"allowed"in e||(this.trigger("info",{message:"defaulting allowCache to YES"}),this.manifest.allowCache=!0)},byterange:function(){var t={};"length"in e&&(u.byterange=t,t.length=e.length,"offset"in e||(e.offset=m)),"offset"in e&&(u.byterange=t,t.offset=e.offset),m=t.offset+t.length},endlist:function(){this.manifest.endList=!0},inf:function(){"mediaSequence"in this.manifest||(this.manifest.mediaSequence=0,this.trigger("info",{message:"defaulting media sequence to zero"})),"discontinuitySequence"in this.manifest||(this.manifest.discontinuitySequence=0,this.trigger("info",{message:"defaulting discontinuity sequence to zero"})),e.duration>0&&(u.duration=e.duration),0===e.duration&&(u.duration=.01,this.trigger("info",{message:"updating zero segment duration to a small value"})),this.manifest.segments=o},key:function(){if(e.attributes){if("NONE"!==e.attributes.METHOD){if(e.attributes.URI){if("com.apple.streamingkeydelivery"===e.attributes.KEYFORMAT)return this.manifest.contentProtection=this.manifest.contentProtection||{},void(this.manifest.contentProtection["com.apple.fps.1_0"]={attributes:e.attributes});if("com.microsoft.playready"===e.attributes.KEYFORMAT)return this.manifest.contentProtection=this.manifest.contentProtection||{},void(this.manifest.contentProtection["com.microsoft.playready"]={uri:e.attributes.URI});if("urn:uuid:edef8ba9-79d6-4ace-a3c8-27dcd51d21ed"===e.attributes.KEYFORMAT)return -1===["SAMPLE-AES","SAMPLE-AES-CTR","SAMPLE-AES-CENC"].indexOf(e.attributes.METHOD)?void this.trigger("warn",{message:"invalid key method provided for Widevine"}):("SAMPLE-AES-CENC"===e.attributes.METHOD&&this.trigger("warn",{message:"SAMPLE-AES-CENC is deprecated, please use SAMPLE-AES-CTR instead"}),"data:text/plain;base64,"!==e.attributes.URI.substring(0,23)?void this.trigger("warn",{message:"invalid key URI provided for Widevine"}):e.attributes.KEYID&&"0x"===e.attributes.KEYID.substring(0,2)?(this.manifest.contentProtection=this.manifest.contentProtection||{},void(this.manifest.contentProtection["com.widevine.alpha"]={attributes:{schemeIdUri:e.attributes.KEYFORMAT,keyId:e.attributes.KEYID.substring(2)},pssh:O(e.attributes.URI.split(",")[1])})):void this.trigger("warn",{message:"invalid key ID provided for Widevine"}));e.attributes.METHOD||this.trigger("warn",{message:"defaulting key method to AES-128"}),n={method:e.attributes.METHOD||"AES-128",uri:e.attributes.URI},void 0!==e.attributes.IV&&(n.iv=e.attributes.IV)}else this.trigger("warn",{message:"ignoring key declaration without URI"})}else n=null}else this.trigger("warn",{message:"ignoring key declaration without attribute list"})},"media-sequence":function(){isFinite(e.number)?this.manifest.mediaSequence=e.number:this.trigger("warn",{message:"ignoring invalid media sequence: "+e.number})},"discontinuity-sequence":function(){isFinite(e.number)?(this.manifest.discontinuitySequence=e.number,p=e.number):this.trigger("warn",{message:"ignoring invalid discontinuity sequence: "+e.number})},"playlist-type":function(){/VOD|EVENT/.test(e.playlistType)?this.manifest.playlistType=e.playlistType:this.trigger("warn",{message:"ignoring unknown playlist type: "+e.playlist})},map:function(){r={},e.uri&&(r.uri=e.uri),e.byterange&&(r.byterange=e.byterange),n&&(r.key=n)},"stream-inf":function(){this.manifest.playlists=o,this.manifest.mediaGroups=this.manifest.mediaGroups||d,e.attributes?(u.attributes||(u.attributes={}),l(u.attributes,e.attributes)):this.trigger("warn",{message:"ignoring empty stream-inf attributes"})},media:function(){if(this.manifest.mediaGroups=this.manifest.mediaGroups||d,e.attributes&&e.attributes.TYPE&&e.attributes["GROUP-ID"]&&e.attributes.NAME){var r=this.manifest.mediaGroups[e.attributes.TYPE];r[e.attributes["GROUP-ID"]]=r[e.attributes["GROUP-ID"]]||{},t=r[e.attributes["GROUP-ID"]],(h={default:/yes/i.test(e.attributes.DEFAULT)}).default?h.autoselect=!0:h.autoselect=/yes/i.test(e.attributes.AUTOSELECT),e.attributes.LANGUAGE&&(h.language=e.attributes.LANGUAGE),e.attributes.URI&&(h.uri=e.attributes.URI),e.attributes["INSTREAM-ID"]&&(h.instreamId=e.attributes["INSTREAM-ID"]),e.attributes.CHARACTERISTICS&&(h.characteristics=e.attributes.CHARACTERISTICS),e.attributes.FORCED&&(h.forced=/yes/i.test(e.attributes.FORCED)),t[e.attributes.NAME]=h}else this.trigger("warn",{message:"ignoring incomplete or missing media group"})},discontinuity:function(){p+=1,u.discontinuity=!0,this.manifest.discontinuityStarts.push(o.length)},"program-date-time":function(){void 0===this.manifest.dateTimeString&&(this.manifest.dateTimeString=e.dateTimeString,this.manifest.dateTimeObject=e.dateTimeObject),u.dateTimeString=e.dateTimeString,u.dateTimeObject=e.dateTimeObject},targetduration:function(){!isFinite(e.duration)||e.duration<0?this.trigger("warn",{message:"ignoring invalid target duration: "+e.duration}):(this.manifest.targetDuration=e.duration,M.call(this,this.manifest))},start:function(){e.attributes&&!isNaN(e.attributes["TIME-OFFSET"])?this.manifest.start={timeOffset:e.attributes["TIME-OFFSET"],precise:e.attributes.PRECISE}:this.trigger("warn",{message:"ignoring start declaration without appropriate attribute list"})},"cue-out":function(){u.cueOut=e.data},"cue-out-cont":function(){u.cueOutCont=e.data},"cue-in":function(){u.cueIn=e.data},skip:function(){this.manifest.skip=j(e.attributes),this.warnOnMissingAttributes_("#EXT-X-SKIP",e.attributes,["SKIPPED-SEGMENTS"])},part:function(){var t=this;c=!0;var r=this.manifest.segments.length,n=j(e.attributes);u.parts=u.parts||[],u.parts.push(n),n.byterange&&(n.byterange.hasOwnProperty("offset")||(n.byterange.offset=g),g=n.byterange.offset+n.byterange.length);var i=u.parts.length-1;this.warnOnMissingAttributes_("#EXT-X-PART #"+i+" for segment #"+r,e.attributes,["URI","DURATION"]),this.manifest.renditionReports&&this.manifest.renditionReports.forEach(function(e,r){e.hasOwnProperty("lastPart")||t.trigger("warn",{message:"#EXT-X-RENDITION-REPORT #"+r+" lacks required attribute(s): LAST-PART"})})},"server-control":function(){var t=this.manifest.serverControl=j(e.attributes);t.hasOwnProperty("canBlockReload")||(t.canBlockReload=!1,this.trigger("info",{message:"#EXT-X-SERVER-CONTROL defaulting CAN-BLOCK-RELOAD to false"})),M.call(this,this.manifest),t.canSkipDateranges&&!t.hasOwnProperty("canSkipUntil")&&this.trigger("warn",{message:"#EXT-X-SERVER-CONTROL lacks required attribute CAN-SKIP-UNTIL which is required when CAN-SKIP-DATERANGES is set"})},"preload-hint":function(){var t=this.manifest.segments.length,r=j(e.attributes),n=r.type&&"PART"===r.type;u.preloadHints=u.preloadHints||[],u.preloadHints.push(r),r.byterange&&(r.byterange.hasOwnProperty("offset")||(r.byterange.offset=n?g:0,n&&(g=r.byterange.offset+r.byterange.length)));var i=u.preloadHints.length-1;if(this.warnOnMissingAttributes_("#EXT-X-PRELOAD-HINT #"+i+" for segment #"+t,e.attributes,["TYPE","URI"]),r.type)for(var o=0;o<u.preloadHints.length-1;o++){var l=u.preloadHints[o];l.type&&l.type===r.type&&this.trigger("warn",{message:"#EXT-X-PRELOAD-HINT #"+i+" for segment #"+t+" has the same TYPE "+r.type+" as preload hint #"+o})}},"rendition-report":function(){var t=j(e.attributes);this.manifest.renditionReports=this.manifest.renditionReports||[],this.manifest.renditionReports.push(t);var r=this.manifest.renditionReports.length-1,n=["LAST-MSN","URI"];c&&n.push("LAST-PART"),this.warnOnMissingAttributes_("#EXT-X-RENDITION-REPORT #"+r,e.attributes,n)},"part-inf":function(){this.manifest.partInf=j(e.attributes),this.warnOnMissingAttributes_("#EXT-X-PART-INF",e.attributes,["PART-TARGET"]),this.manifest.partInf.partTarget&&(this.manifest.partTargetDuration=this.manifest.partInf.partTarget),M.call(this,this.manifest)}})[e.tagType]||f).call(i)},uri:function(){u.uri=e.uri,o.push(u),!this.manifest.targetDuration||"duration"in u||(this.trigger("warn",{message:"defaulting segment duration to the target duration"}),u.duration=this.manifest.targetDuration),n&&(u.key=n),u.timeline=p,r&&(u.map=r),g=0,u={}},comment:function(){},custom:function(){e.segment?(u.custom=u.custom||{},u.custom[e.customType]=e.data):(this.manifest.custom=this.manifest.custom||{},this.manifest.custom[e.customType]=e.data)}})[e.type].call(i)}),t}m(t,e);var r=t.prototype;return r.warnOnMissingAttributes_=function(e,t,r){var n=[];r.forEach(function(e){t.hasOwnProperty(e)||n.push(e)}),n.length&&this.trigger("warn",{message:e+" lacks required attribute(s): "+n.join(", ")})},r.push=function(e){this.lineStream.push(e)},r.end=function(){this.lineStream.push("\n"),this.trigger("end")},r.addParser=function(e){this.parseStream.addParser(e)},r.addTagMapper=function(e){this.parseStream.addTagMapper(e)},t}(I),B={mp4:/^(av0?1|avc0?[1234]|vp0?9|flac|opus|mp3|mp4a|mp4v|stpp.ttml.im1t)/,webm:/^(vp0?[89]|av0?1|opus|vorbis)/,ogg:/^(vp0?[89]|theora|flac|opus|vorbis)/,video:/^(av0?1|avc0?[1234]|vp0?[89]|hvc1|hev1|theora|mp4v)/,audio:/^(mp4a|flac|vorbis|opus|ac-[34]|ec-3|alac|mp3|speex|aac)/,text:/^(stpp.ttml.im1t)/,muxerVideo:/^(avc0?1)/,muxerAudio:/^(mp4a)/,muxerText:/a^/},U=["video","audio","text"],q=["Video","Audio","Text"],H=function(e){return e?e.replace(/avc1\.(\d+)\.(\d+)/i,function(e,t,r){return"avc1."+("00"+Number(t).toString(16)).slice(-2)+"00"+("00"+Number(r).toString(16)).slice(-2)}):e},V=function(e){void 0===e&&(e="");var t=e.split(","),r=[];return t.forEach(function(e){var t;e=e.trim(),U.forEach(function(n){var i=B[n].exec(e.toLowerCase());if(i&&!(i.length<=1)){t=n;var o=e.substring(0,i[1].length),u=e.replace(o,"");r.push({type:o,details:u,mediaType:n})}}),t||r.push({type:e,details:"",mediaType:"unknown"})}),r},G=function(e){return void 0===e&&(e=""),B.audio.test(e.trim().toLowerCase())},Y=function(e){if(e&&"string"==typeof e){var t,r=e.toLowerCase().split(",").map(function(e){return H(e.trim())}),n="video";1===r.length&&G(r[0])?n="audio":1===r.length&&(void 0===(t=r[0])&&(t=""),B.text.test(t.trim().toLowerCase()))&&(n="application");var i="mp4";return r.every(function(e){return B.mp4.test(e)})?i="mp4":r.every(function(e){return B.webm.test(e)})?i="webm":r.every(function(e){return B.ogg.test(e)})&&(i="ogg"),n+"/"+i+';codecs="'+e+'"'}},z=function(e){return void 0===e&&(e=""),i().MediaSource&&i().MediaSource.isTypeSupported&&i().MediaSource.isTypeSupported(Y(e))||!1},K=function(e){return void 0===e&&(e=""),e.toLowerCase().split(",").every(function(e){e=e.trim();for(var t=0;t<q.length;t++)if(B["muxer"+q[t]].test(e))return!0;return!1})},W="mp4a.40.2",X=/^(audio|video|application)\/(x-|vnd\.apple\.)?mpegurl/i,Q=/^application\/dash\+xml/i,$=function(e){return X.test(e)?"hls":Q.test(e)?"dash":"application/vnd.videojs.vhs+json"===e?"vhs-json":null},J=function(e){return"function"===ArrayBuffer.isView?ArrayBuffer.isView(e):e&&e.buffer instanceof ArrayBuffer},Z=function(e){return e instanceof Uint8Array?e:(Array.isArray(e)||J(e)||e instanceof ArrayBuffer||(e="number"!=typeof e||"number"==typeof e&&e!=e?0:[e]),new Uint8Array(e&&e.buffer||e,e&&e.byteOffset||0,e&&e.byteLength||0))},ee=i().BigInt||Number,et=[ee("0x1"),ee("0x100"),ee("0x10000"),ee("0x1000000"),ee("0x100000000"),ee("0x10000000000"),ee("0x1000000000000"),ee("0x100000000000000"),ee("0x10000000000000000")],er=(R=new Uint16Array([65484]),255===(P=new Uint8Array(R.buffer,R.byteOffset,R.byteLength))[0]||P[0],function(e,t){var r=void 0===t?{}:t,n=r.signed,i=r.le,o=void 0!==i&&i;e=Z(e);var u=o?"reduce":"reduceRight",l=(e[u]?e[u]:Array.prototype[u]).call(e,function(t,r,n){var i=o?n:Math.abs(n+1-e.length);return t+ee(r)*et[i]},ee(0));if(void 0!==n&&n){var c=et[e.length]/ee(2)-ee(1);(l=ee(l))>c&&(l-=c,l-=c,l-=ee(2))}return Number(l)}),en=function(e,t){if("string"!=typeof e&&e&&"function"==typeof e.toString&&(e=e.toString()),"string"!=typeof e)return new Uint8Array;t||(e=unescape(encodeURIComponent(e)));for(var r=new Uint8Array(e.length),n=0;n<e.length;n++)r[n]=e.charCodeAt(n);return r},ei=function(e,t,r){var n=void 0===r?{}:r,i=n.offset,o=void 0===i?0:i,u=n.mask,l=void 0===u?[]:u;e=Z(e);var c=(t=Z(t)).every?t.every:Array.prototype.every;return t.length&&e.length-o>=t.length&&c.call(t,function(t,r){return t===(l[r]?l[r]&e[o+r]:e[o+r])})},eo=r(337),ea=function(e){return!!e&&"object"==typeof e},es=function e(){for(var t=arguments.length,r=Array(t),n=0;n<t;n++)r[n]=arguments[n];return r.reduce(function(t,r){return"object"!=typeof r||Object.keys(r).forEach(function(n){Array.isArray(t[n])&&Array.isArray(r[n])?t[n]=t[n].concat(r[n]):ea(t[n])&&ea(r[n])?t[n]=e(t[n],r[n]):t[n]=r[n]}),t},{})},eu=function(e){return Object.keys(e).map(function(t){return e[t]})},el=function(e){return e.reduce(function(e,t){return e.concat(t)},[])},ec=function(e){if(!e.length)return[];for(var t=[],r=0;r<e.length;r++)t.push(e[r]);return t},ef=function(e,t){for(var r=0;r<e.length;r++)if(t(e[r]))return r;return -1},ed=function(e){var t=e.baseUrl,r=e.source,n=void 0===r?"":r,o=e.range,u=void 0===o?"":o,l=e.indexRange,c=void 0===l?"":l,f={uri:n,resolvedUri:C((void 0===t?"":t)||"",n)};if(u||c){var d,h=(u||c).split("-"),p=i().BigInt?i().BigInt(h[0]):parseInt(h[0],10),m=i().BigInt?i().BigInt(h[1]):parseInt(h[1],10);p<Number.MAX_SAFE_INTEGER&&"bigint"==typeof p&&(p=Number(p)),m<Number.MAX_SAFE_INTEGER&&"bigint"==typeof m&&(m=Number(m)),"bigint"==typeof(d="bigint"==typeof m||"bigint"==typeof p?i().BigInt(m)-i().BigInt(p)+i().BigInt(1):m-p+1)&&d<Number.MAX_SAFE_INTEGER&&(d=Number(d)),f.byterange={length:d,offset:p}}return f},eh=function(e){return e&&"number"!=typeof e&&(e=parseInt(e,10)),isNaN(e)?null:e},ep={static:function(e){var t=e.duration,r=e.timescale,n=e.sourceDuration,i=e.periodDuration,o=eh(e.endNumber),u=t/(void 0===r?1:r);return"number"==typeof o?{start:0,end:o}:"number"==typeof i?{start:0,end:i/u}:{start:0,end:n/u}},dynamic:function(e){var t=e.NOW,r=e.clientOffset,n=e.availabilityStartTime,i=e.timescale,o=void 0===i?1:i,u=e.duration,l=e.periodStart,c=e.minimumUpdatePeriod,f=e.timeShiftBufferDepth,d=eh(e.endNumber),h=(t+r)/1e3,p=n+(void 0===l?0:l),m=Math.ceil((h+(void 0===c?0:c)-p)*o/u),g=Math.floor((h-p-(void 0===f?1/0:f))*o/u),y=Math.floor((h-p)*o/u);return{start:Math.max(0,g),end:"number"==typeof d?d:Math.min(m,y)}}},em=function(e){var t=e.type,r=e.duration,n=e.timescale,i=e.periodDuration,o=e.sourceDuration,u=ep[t](e),l=(function(e,t){for(var r=[],n=e;n<t;n++)r.push(n);return r})(u.start,u.end).map(function(t){var r=e.duration,n=e.timescale,i=e.periodStart,o=e.startNumber;return{number:(void 0===o?1:o)+t,duration:r/(void 0===n?1:n),timeline:i,time:t*r}});if("static"===t){var c=l.length-1;l[c].duration=("number"==typeof i?i:o)-r/(void 0===n?1:n)*c}return l},eg=function(e){var t=e.baseUrl,r=e.initialization,n=void 0===r?{}:r,i=e.sourceDuration,o=e.indexRange,u=e.periodStart,l=e.presentationTime,c=e.number,f=e.duration;if(!t)throw Error("NO_BASE_URL");var d=ed({baseUrl:t,source:n.sourceURL,range:n.range}),h=ed({baseUrl:t,source:t,indexRange:void 0===o?"":o});if(h.map=d,f){var p=em(e);p.length&&(h.duration=p[0].duration,h.timeline=p[0].timeline)}else i&&(h.duration=i,h.timeline=u);return h.presentationTime=l||u,h.number=void 0===c?0:c,[h]},ey=function(e,t,r){var n,o=e.sidx.map?e.sidx.map:null,u=e.sidx.duration,l=e.timeline||0,c=e.sidx.byterange,f=c.offset+c.length,d=t.timescale,h=t.references.filter(function(e){return 1!==e.referenceType}),p=[],m=e.endList?"static":"dynamic",g=e.sidx.timeline,y=g,v=e.mediaSequence||0;n="bigint"==typeof t.firstOffset?i().BigInt(f)+t.firstOffset:f+t.firstOffset;for(var b=0;b<h.length;b++){var _,T=t.references[b],E=T.referencedSize,S=T.subsegmentDuration;_="bigint"==typeof n?n+i().BigInt(E)-i().BigInt(1):n+E-1;var w=eg({baseUrl:r,timescale:d,timeline:l,periodStart:g,presentationTime:y,number:v,duration:S,sourceDuration:u,indexRange:n+"-"+_,type:m})[0];o&&(w.map=o),p.push(w),n+="bigint"==typeof n?i().BigInt(E):E,y+=S/d,v++}return e.segments=p,e},ev=["AUDIO","SUBTITLES"],eb=function(e){return eu(e.reduce(function(e,t){return t.forEach(function(t){e[t.timeline]=t}),e},{})).sort(function(e,t){return e.timeline>t.timeline?1:-1})},e_=function(e){var t,r=[];return t=function(e,t,n,i){r=r.concat(e.playlists||[])},ev.forEach(function(r){for(var n in e.mediaGroups[r])for(var i in e.mediaGroups[r][n])t(e.mediaGroups[r][n][i])}),r},eT=function(e){var t=e.playlist,r=e.mediaSequence;t.mediaSequence=r,t.segments.forEach(function(e,r){e.number=t.mediaSequence+r})},eE=function(e){var t,r;return e&&e.uri+"-"+(r="bigint"==typeof(t=e.byterange).offset||"bigint"==typeof t.length?i().BigInt(t.offset)+i().BigInt(t.length)-i().BigInt(1):t.offset+t.length-1,t.offset+"-"+r)},eS=function(e){return eu(e.reduce(function(e,t){var r,n=t.attributes.id+(t.attributes.lang||"");return e[n]?(t.segments&&(t.segments[0]&&(t.segments[0].discontinuity=!0),(r=e[n].segments).push.apply(r,t.segments)),t.attributes.contentProtection&&(e[n].attributes.contentProtection=t.attributes.contentProtection)):(e[n]=t,e[n].attributes.timelineStarts=[]),e[n].attributes.timelineStarts.push({start:t.attributes.periodStart,timeline:t.attributes.periodStart}),e},{})).map(function(e){return e.discontinuityStarts=(e.segments||[]).reduce(function(e,t,r){return t.discontinuity&&e.push(r),e},[]),e})},ew=function(e,t){var r=eE(e.sidx),n=r&&t[r]&&t[r].sidx;return n&&ey(e,n,e.sidx.resolvedUri),e},eA=function(e,t){if(void 0===t&&(t={}),!Object.keys(t).length)return e;for(var r in e)e[r]=ew(e[r],t);return e},eC=function(e){var t,r=e.attributes,n=e.segments,i=e.sidx,o=e.discontinuityStarts,u={attributes:((t={NAME:r.id,AUDIO:"audio",SUBTITLES:"subs",RESOLUTION:{width:r.width,height:r.height},CODECS:r.codecs,BANDWIDTH:r.bandwidth})["PROGRAM-ID"]=1,t),uri:"",endList:"static"===r.type,timeline:r.periodStart,resolvedUri:"",targetDuration:r.duration,discontinuityStarts:o,timelineStarts:r.timelineStarts,segments:n};return r.frameRate&&(u.attributes["FRAME-RATE"]=r.frameRate),r.contentProtection&&(u.contentProtection=r.contentProtection),i&&(u.sidx=i),u},eI=function(e){var t=e.attributes;return"video/mp4"===t.mimeType||"video/webm"===t.mimeType||"video"===t.contentType},eO=function(e){var t=e.attributes;return"audio/mp4"===t.mimeType||"audio/webm"===t.mimeType||"audio"===t.contentType},eR=function(e){var t=e.attributes;return"text/vtt"===t.mimeType||"text"===t.contentType},eP=function(e){return e?Object.keys(e).reduce(function(t,r){var n=e[r];return t.concat(n.playlists)},[]):[]},ek=function(e){var t,r=e.dashPlaylists,n=e.locations,i=e.sidxMapping,o=void 0===i?{}:i,u=e.previousManifest;if(!r.length)return{};var l=r[0].attributes,c=l.sourceDuration,f=l.type,d=l.suggestedPresentationDelay,h=l.minimumUpdatePeriod,p=eS(r.filter(eI)).map(eC),m=eS(r.filter(eO)),g=eS(r.filter(eR)),y=r.map(function(e){return e.attributes.captionServices}).filter(Boolean),v={allowCache:!0,discontinuityStarts:[],segments:[],endList:!0,mediaGroups:((t={AUDIO:{},VIDEO:{}})["CLOSED-CAPTIONS"]={},t.SUBTITLES={},t),uri:"",duration:c,playlists:eA(p,o)};h>=0&&(v.minimumUpdatePeriod=1e3*h),n&&(v.locations=n),"dynamic"===f&&(v.suggestedPresentationDelay=d);var b,_,T,E,S,w,A,C,I,O,R,P=0===v.playlists.length,k=m.length?(void 0===(b=o)&&(b={}),void 0===(_=P)&&(_=!1),E=m.reduce(function(e,t){var r,n,i,o,u,l,c,f,d,h=t.attributes.role&&t.attributes.role.value||"",p=t.attributes.lang||"",m=t.attributes.label||"main";p&&!t.attributes.label&&(m=""+t.attributes.lang+(h?" ("+h+")":"")),e[m]||(e[m]={language:p,autoselect:!0,default:"main"===h,playlists:[],uri:""});var g=ew((r=_,i=t.attributes,o=t.segments,u=t.sidx,l=t.mediaSequence,c=t.discontinuitySequence,f=t.discontinuityStarts,d={attributes:((n={NAME:i.id,BANDWIDTH:i.bandwidth,CODECS:i.codecs})["PROGRAM-ID"]=1,n),uri:"",endList:"static"===i.type,timeline:i.periodStart,resolvedUri:"",targetDuration:i.duration,discontinuitySequence:c,discontinuityStarts:f,timelineStarts:i.timelineStarts,mediaSequence:l,segments:o},i.contentProtection&&(d.contentProtection=i.contentProtection),u&&(d.sidx=u),r&&(d.attributes.AUDIO="audio",d.attributes.SUBTITLES="subs"),d),b);return e[m].playlists.push(g),void 0===T&&"main"===h&&((T=t).default=!0),e},{}),T||(E[Object.keys(E)[0]].default=!0),E):null,D=g.length?(void 0===(S=o)&&(S={}),g.reduce(function(e,t){var r,n,i,o,u,l,c=t.attributes.lang||"text";return e[c]||(e[c]={language:c,default:!1,autoselect:!1,playlists:[],uri:""}),e[c].playlists.push(ew((n=t.attributes,i=t.segments,o=t.mediaSequence,u=t.discontinuityStarts,l=t.discontinuitySequence,void 0===i&&(i=[{uri:n.baseUrl,timeline:n.periodStart,resolvedUri:n.baseUrl||"",duration:n.sourceDuration,number:0}],n.duration=n.sourceDuration),(r={NAME:n.id,BANDWIDTH:n.bandwidth})["PROGRAM-ID"]=1,n.codecs&&(r.CODECS=n.codecs),{attributes:r,uri:"",endList:"static"===n.type,timeline:n.periodStart,resolvedUri:n.baseUrl||"",targetDuration:n.duration,timelineStarts:n.timelineStarts,discontinuityStarts:u,discontinuitySequence:l,mediaSequence:o,segments:i}),S)),e},{})):null,N=p.concat(eP(k),eP(D)),L=N.map(function(e){return e.timelineStarts});return v.timelineStarts=eb(L),w=v.timelineStarts,N.forEach(function(e){e.mediaSequence=0,e.discontinuitySequence=ef(w,function(t){return t.timeline===e.timeline}),e.segments&&e.segments.forEach(function(e,t){e.number=t})}),k&&(v.mediaGroups.AUDIO.audio=k),D&&(v.mediaGroups.SUBTITLES.subs=D),y.length&&(v.mediaGroups["CLOSED-CAPTIONS"].cc=y.reduce(function(e,t){return t&&t.forEach(function(t){var r=t.channel,n=t.language;e[n]={autoselect:!1,default:!1,instreamId:r,language:n},t.hasOwnProperty("aspectRatio")&&(e[n].aspectRatio=t.aspectRatio),t.hasOwnProperty("easyReader")&&(e[n].easyReader=t.easyReader),t.hasOwnProperty("3D")&&(e[n]["3D"]=t["3D"])}),e},{})),u?(C=(A={oldManifest:u,newManifest:v}).oldManifest,I=A.newManifest,O=C.playlists.concat(e_(C)),R=I.playlists.concat(e_(I)),I.timelineStarts=eb([C.timelineStarts,I.timelineStarts]),function(e){var t=e.oldPlaylists,r=e.timelineStarts;e.newPlaylists.forEach(function(e){e.discontinuitySequence=ef(r,function(t){return t.timeline===e.timeline});var n=function(e,t){for(var r=0;r<e.length;r++)if(e[r].attributes.NAME===t)return e[r];return null}(t,e.attributes.NAME);if(n&&!e.sidx){var i=e.segments[0],o=ef(n.segments,function(e){return .016666666666666666>Math.abs(e.presentationTime-i.presentationTime)});if(-1===o)return eT({playlist:e,mediaSequence:n.mediaSequence+n.segments.length}),e.segments[0].discontinuity=!0,e.discontinuityStarts.unshift(0),void((!n.segments.length&&e.timeline>n.timeline||n.segments.length&&e.timeline>n.segments[n.segments.length-1].timeline)&&e.discontinuitySequence--);n.segments[o].discontinuity&&!i.discontinuity&&(i.discontinuity=!0,e.discontinuityStarts.unshift(0),e.discontinuitySequence--),eT({playlist:e,mediaSequence:n.segments[o].number})}})}({oldPlaylists:O,newPlaylists:R,timelineStarts:I.timelineStarts}),I):v},eD=function(e,t,r){var n=e.NOW,i=e.clientOffset,o=e.availabilityStartTime,u=e.timescale,l=e.periodStart,c=e.minimumUpdatePeriod;return Math.ceil((((n+i)/1e3+(void 0===c?0:c)-(o+(void 0===l?0:l)))*(void 0===u?1:u)-t)/r)},eN=function(e,t){for(var r=e.type,n=e.minimumUpdatePeriod,i=void 0===n?0:n,o=e.media,u=void 0===o?"":o,l=e.sourceDuration,c=e.timescale,f=void 0===c?1:c,d=e.startNumber,h=void 0===d?1:d,p=e.periodStart,m=[],g=-1,y=0;y<t.length;y++){var v=t[y],b=v.d,_=v.r||0,T=v.t||0;g<0&&(g=T),T&&T>g&&(g=T);var E=void 0;if(_<0){var S=y+1;E=S===t.length?"dynamic"===r&&i>0&&u.indexOf("$Number$")>0?eD(e,g,b):(l*f-g)/b:(t[S].t-g)/b}else E=_+1;for(var w=h+m.length+E,A=h+m.length;A<w;)m.push({number:A,duration:b/f,time:g,timeline:p}),g+=b,A++}return m},eL=/\$([A-z]*)(?:(%0)([0-9]+)d)?\$/g,ex=function(e,t){return e.replace(eL,function(e,r,n,i){if("$$"===e)return"$";if(void 0===t[r])return e;var o=""+t[r];return"RepresentationID"===r?o:(i=n?parseInt(i,10):1,o.length>=i?o:""+Array(i-o.length+1).join("0")+o)})},ej=function(e,t){var r={RepresentationID:e.id,Bandwidth:e.bandwidth||0},n=e.initialization,i=void 0===n?{sourceURL:"",range:""}:n,o=ed({baseUrl:e.baseUrl,source:ex(i.sourceURL,r),range:i.range});return(e.duration||t?e.duration?em(e):eN(e,t):[{number:e.startNumber||1,duration:e.sourceDuration,time:0,timeline:e.periodStart}]).map(function(t){r.Number=t.number,r.Time=t.time;var n=ex(e.media||"",r),i=e.timescale||1,u=e.presentationTimeOffset||0,l=e.periodStart+(t.time-u)/i;return{uri:n,timeline:t.timeline,duration:t.duration,resolvedUri:C(e.baseUrl||"",n),map:o,number:t.number,presentationTime:l}})},eM=function(e,t){var r=e.duration,n=e.segmentUrls,i=e.periodStart;if(!r&&!t||r&&t)throw Error("SEGMENT_TIME_UNSPECIFIED");var o,u=(void 0===n?[]:n).map(function(t){var r,n,i,o,u;return o=ed({baseUrl:r=e.baseUrl,source:(i=void 0===(n=e.initialization)?{}:n).sourceURL,range:i.range}),(u=ed({baseUrl:r,source:t.media,range:t.mediaRange})).map=o,u});return r&&(o=em(e)),t&&(o=eN(e,t)),o.map(function(t,r){if(u[r]){var n=u[r],o=e.timescale||1,l=e.presentationTimeOffset||0;return n.timeline=t.timeline,n.duration=t.duration,n.number=t.number,n.presentationTime=i+(t.time-l)/o,n}}).filter(function(e){return e})},eF=function(e){var t,r,n=e.attributes,i=e.segmentInfo;i.template?(r=ej,t=es(n,i.template)):i.base?(r=eg,t=es(n,i.base)):i.list&&(r=eM,t=es(n,i.list));var o={attributes:n};if(!r)return o;var u=r(t,i.segmentTimeline);if(t.duration){var l=t,c=l.duration,f=l.timescale;t.duration=c/(void 0===f?1:f)}else u.length?t.duration=u.reduce(function(e,t){return Math.max(e,Math.ceil(t.duration))},0):t.duration=0;return o.attributes=t,o.segments=u,i.base&&t.indexRange&&(o.sidx=u[0],o.segments=[]),o},eB=function(e,t){return ec(e.childNodes).filter(function(e){return e.tagName===t})},eU=function(e){return e.textContent.trim()},eq=function(e){var t=/P(?:(\d*)Y)?(?:(\d*)M)?(?:(\d*)D)?(?:T(?:(\d*)H)?(?:(\d*)M)?(?:([\d.]*)S)?)?/.exec(e);if(!t)return 0;var r=t.slice(1),n=r[0],i=r[1],o=r[2],u=r[3],l=r[4],c=r[5];return 31536e3*parseFloat(n||0)+2592e3*parseFloat(i||0)+86400*parseFloat(o||0)+3600*parseFloat(u||0)+60*parseFloat(l||0)+parseFloat(c||0)},eH={mediaPresentationDuration:function(e){return eq(e)},availabilityStartTime:function(e){var t;return/^\d+-\d+-\d+T\d+:\d+:\d+(\.\d+)?$/.test(t=e)&&(t+="Z"),Date.parse(t)/1e3},minimumUpdatePeriod:function(e){return eq(e)},suggestedPresentationDelay:function(e){return eq(e)},type:function(e){return e},timeShiftBufferDepth:function(e){return eq(e)},start:function(e){return eq(e)},width:function(e){return parseInt(e,10)},height:function(e){return parseInt(e,10)},bandwidth:function(e){return parseInt(e,10)},frameRate:function(e){return parseFloat(e.split("/").reduce(function(e,t){return e/t}))},startNumber:function(e){return parseInt(e,10)},timescale:function(e){return parseInt(e,10)},presentationTimeOffset:function(e){return parseInt(e,10)},duration:function(e){var t=parseInt(e,10);return isNaN(t)?eq(e):t},d:function(e){return parseInt(e,10)},t:function(e){return parseInt(e,10)},r:function(e){return parseInt(e,10)},DEFAULT:function(e){return e}},eV=function(e){return e&&e.attributes?ec(e.attributes).reduce(function(e,t){var r=eH[t.name]||eH.DEFAULT;return e[t.name]=r(t.value),e},{}):{}},eG={"urn:uuid:1077efec-c0b2-4d02-ace3-3c1e52e2fb4b":"org.w3.clearkey","urn:uuid:edef8ba9-79d6-4ace-a3c8-27dcd51d21ed":"com.widevine.alpha","urn:uuid:9a04f079-9840-4286-ab92-e65be0885f95":"com.microsoft.playready","urn:uuid:f239e769-efa3-4850-9c16-a903c6932efb":"com.adobe.primetime"},eY=function(e,t){return t.length?el(e.map(function(e){return t.map(function(t){return C(e,eU(t))})})):e},ez=function(e){var t=eB(e,"SegmentTemplate")[0],r=eB(e,"SegmentList")[0],n=r&&eB(r,"SegmentURL").map(function(e){return es({tag:"SegmentURL"},eV(e))}),i=eB(e,"SegmentBase")[0],o=r||t,u=o&&eB(o,"SegmentTimeline")[0],l=r||i||t,c=l&&eB(l,"Initialization")[0],f=t&&eV(t);f&&c?f.initialization=c&&eV(c):f&&f.initialization&&(f.initialization={sourceURL:f.initialization});var d={template:f,segmentTimeline:u&&eB(u,"S").map(function(e){return eV(e)}),list:r&&es(eV(r),{segmentUrls:n,initialization:eV(c)}),base:i&&es(eV(i),{initialization:eV(c)})};return Object.keys(d).forEach(function(e){d[e]||delete d[e]}),d},eK=function(e){if(""===e)throw Error("DASH_EMPTY_MANIFEST");var t,r,n=new eo.DOMParser;try{r=(t=n.parseFromString(e,"application/xml"))&&"MPD"===t.documentElement.tagName?t.documentElement:null}catch(e){}if(!r||r&&r.getElementsByTagName("parsererror").length>0)throw Error("DASH_INVALID_XML");return r},eW=r(658),eX=r.n(eW),eQ=Z([73,68,51]),e$=function e(t,r){var n,i,o,u;return void 0===r&&(r=0),(t=Z(t)).length-r<10||!ei(t,eQ,{offset:r})?r:(r+=(n=t,void 0===(i=r)&&(i=0),o=(n=Z(n))[i+5],u=n[i+6]<<21|n[i+7]<<14|n[i+8]<<7|n[i+9],(16&o)>>4?u+20:u+10),e(t,r))},eJ=(new Uint8Array([79,112,117,115,72,101,97,100]),function(e){return"string"==typeof e?en(e):e}),eZ=function(e){e=Z(e);for(var t=[],r=0;e.length>r;){var n=e[r],i=0,o=0,u=e[++o];for(o++;128&u;)i=(127&u)<<7,u=e[o],o++;i+=127&u;for(var l=0;l<k.length;l++){var c=k[l],f=c.id,d=c.parser;if(n===f){t.push(d(e.subarray(o,o+i)));break}}r+=i+o}return t};k=[{id:3,parser:function(e){var t={tag:3,id:e[0]<<8|e[1],flags:e[2],size:3,dependsOnEsId:0,ocrEsId:0,descriptors:[],url:""};if(128&t.flags&&(t.dependsOnEsId=e[t.size]<<8|e[t.size+1],t.size+=2),64&t.flags){var r=e[t.size];t.url=function(e){if(!e)return"";e=Array.prototype.slice.call(e);var t=String.fromCharCode.apply(null,Z(e));try{return decodeURIComponent(escape(t))}catch(e){}return t}(e.subarray(t.size+1,t.size+1+r)),t.size+=r}return 32&t.flags&&(t.ocrEsId=e[t.size]<<8|e[t.size+1],t.size+=2),t.descriptors=eZ(e.subarray(t.size))||[],t}},{id:4,parser:function(e){return{tag:4,oti:e[0],streamType:e[1],bufferSize:e[2]<<16|e[3]<<8|e[4],maxBitrate:e[5]<<24|e[6]<<16|e[7]<<8|e[8],avgBitrate:e[9]<<24|e[10]<<16|e[11]<<8|e[12],descriptors:eZ(e.subarray(13))}}},{id:5,parser:function(e){return{tag:5,bytes:e}}},{id:6,parser:function(e){return{tag:6,bytes:e}}}];var e0=function e(t,r,n){void 0===n&&(n=!1),r=Array.isArray(i=r)?i.map(function(e){return eJ(e)}):[eJ(i)],t=Z(t);var i,o=[];if(!r.length)return o;for(var u=0;u<t.length;){var l=(t[u]<<24|t[u+1]<<16|t[u+2]<<8|t[u+3])>>>0,c=t.subarray(u+4,u+8);if(0===l)break;var f=u+l;if(f>t.length){if(n)break;f=t.length}var d=t.subarray(u+8,f);ei(c,r[0])&&(1===r.length?o.push(d):o.push.apply(o,e(d,r.slice(1),n))),u=f}return o},e1={EBML:Z([26,69,223,163]),DocType:Z([66,130]),Segment:Z([24,83,128,103]),SegmentInfo:Z([21,73,169,102]),Tracks:Z([22,84,174,107]),Track:Z([174]),TrackNumber:Z([215]),DefaultDuration:Z([35,227,131]),TrackEntry:Z([174]),TrackType:Z([131]),FlagDefault:Z([136]),CodecID:Z([134]),CodecPrivate:Z([99,162]),VideoTrack:Z([224]),AudioTrack:Z([225]),Cluster:Z([31,67,182,117]),Timestamp:Z([231]),TimestampScale:Z([42,215,177]),BlockGroup:Z([160]),BlockDuration:Z([155]),Block:Z([161]),SimpleBlock:Z([163])},e2=[128,64,32,16,8,4,2,1],e3=function(e,t,r,n){void 0===r&&(r=!0),void 0===n&&(n=!1);var i=function(e){for(var t=1,r=0;r<e2.length&&!(e&e2[r]);r++)t++;return t}(e[t]),o=e.subarray(t,t+i);return r&&((o=Array.prototype.slice.call(e,t,t+i))[0]^=e2[i-1]),{length:i,value:er(o,{signed:n}),bytes:o}},e4=function e(t){return"string"==typeof t?t.match(/.{1,2}/g).map(function(t){return e(t)}):"number"==typeof t?function(e,t){var r=(void 0===t?{}:t).le,n=void 0!==r&&r;("bigint"!=typeof e&&"number"!=typeof e||"number"==typeof e&&e!=e)&&(e=0);for(var i=Math.ceil((e=ee(e)).toString(2).length/8),o=new Uint8Array(new ArrayBuffer(i)),u=0;u<i;u++){var l=n?u:Math.abs(u+1-o.length);o[l]=Number(e/et[u]&ee(255)),e<0&&(o[l]=Math.abs(~o[l]),o[l]-=0===u?1:2)}return o}(t):t},e6=function e(t,r,n){if(n>=r.length)return r.length;var i=e3(r,n,!1);if(ei(t.bytes,i.bytes))return n;var o=e3(r,n+i.length);return e(t,r,n+o.length+o.value+i.length)},e8=function e(t,r){r=Array.isArray(n=r)?n.map(function(e){return e4(e)}):[e4(n)],t=Z(t);var n,i=[];if(!r.length)return i;for(var o=0;o<t.length;){var u=e3(t,o,!1),l=e3(t,o+u.length),c=o+u.length+l.length;127===l.value&&(l.value=e6(u,t,c),l.value!==t.length&&(l.value-=c));var f=c+l.value>t.length?t.length:c+l.value,d=t.subarray(c,f);ei(r[0],u.bytes)&&(1===r.length?i.push(d):i=i.concat(e(d,r.slice(1)))),o+=u.length+l.length+d.length}return i},e5=Z([0,0,0,1]),e9=Z([0,0,1]),e7=Z([0,0,3]),te=function(e){for(var t=[],r=1;r<e.length-2;)ei(e.subarray(r,r+3),e7)&&(t.push(r+2),r++),r++;if(0===t.length)return e;var n=e.length-t.length,i=new Uint8Array(n),o=0;for(r=0;r<n;o++,r++)o===t[0]&&(o++,t.shift()),i[r]=e[o];return i},tt=function(e,t,r,n){void 0===n&&(n=1/0),e=Z(e),r=[].concat(r);for(var i,o=0,u=0;o<e.length&&(u<n||i);){var l=void 0;if(ei(e.subarray(o),e5)?l=4:ei(e.subarray(o),e9)&&(l=3),l){if(u++,i)return te(e.subarray(i,o));var c=void 0;"h264"===t?c=31&e[o+l]:"h265"===t&&(c=e[o+l]>>1&63),-1!==r.indexOf(c)&&(i=o+l),o+=l+("h264"===t?1:2)}else o++}return e.subarray(0,0)},tr={webm:Z([119,101,98,109]),matroska:Z([109,97,116,114,111,115,107,97]),flac:Z([102,76,97,67]),ogg:Z([79,103,103,83]),ac3:Z([11,119]),riff:Z([82,73,70,70]),avi:Z([65,86,73]),wav:Z([87,65,86,69]),"3gp":Z([102,116,121,112,51,103]),mp4:Z([102,116,121,112]),fmp4:Z([115,116,121,112]),mov:Z([102,116,121,112,113,116]),moov:Z([109,111,111,118]),moof:Z([109,111,111,102])},tn={aac:function(e){var t=e$(e);return ei(e,[255,16],{offset:t,mask:[255,22]})},mp3:function(e){var t=e$(e);return ei(e,[255,2],{offset:t,mask:[255,6]})},webm:function(e){var t=e8(e,[e1.EBML,e1.DocType])[0];return ei(t,tr.webm)},mkv:function(e){var t=e8(e,[e1.EBML,e1.DocType])[0];return ei(t,tr.matroska)},mp4:function(e){return!tn["3gp"](e)&&!tn.mov(e)&&(!(!ei(e,tr.mp4,{offset:4})&&!ei(e,tr.fmp4,{offset:4}))||!(!ei(e,tr.moof,{offset:4})&&!ei(e,tr.moov,{offset:4}))||void 0)},mov:function(e){return ei(e,tr.mov,{offset:4})},"3gp":function(e){return ei(e,tr["3gp"],{offset:4})},ac3:function(e){var t=e$(e);return ei(e,tr.ac3,{offset:t})},ts:function(e){if(e.length<189&&e.length>=1)return 71===e[0];for(var t=0;t+188<e.length&&t<188;){if(71===e[t]&&71===e[t+188])return!0;t+=1}return!1},flac:function(e){var t=e$(e);return ei(e,tr.flac,{offset:t})},ogg:function(e){return ei(e,tr.ogg)},avi:function(e){return ei(e,tr.riff)&&ei(e,tr.avi,{offset:8})},wav:function(e){return ei(e,tr.riff)&&ei(e,tr.wav,{offset:8})},h264:function(e){return tt(e,"h264",7,3).length},h265:function(e){return tt(e,"h265",[32,33],3).length}},ti=Object.keys(tn).filter(function(e){return"ts"!==e&&"h264"!==e&&"h265"!==e}).concat(["ts","h264","h265"]);ti.forEach(function(e){var t=tn[e];tn[e]=function(e){return t(Z(e))}});var to=function(e){e=Z(e);for(var t=0;t<ti.length;t++){var r=ti[t];if(tn[r](e))return r}return""},ta=r(826);function ts(e){return(ts=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function tu(e){var t="function"==typeof Map?new Map:void 0;return(tu=function(e){if(null===e||-1===Function.toString.call(e).indexOf("[native code]"))return e;if("function"!=typeof e)throw TypeError("Super expression must either be null or a function");if(void 0!==t){if(t.has(e))return t.get(e);t.set(e,r)}function r(){return E(e,arguments,ts(this).constructor)}return r.prototype=Object.create(e.prototype,{constructor:{value:r,enumerable:!1,writable:!0,configurable:!0}}),p(r,e)})(e)}for(var tl,tc="7.21.4",tf={},td=function(e,t){return tf[e]=tf[e]||[],t&&(tf[e]=tf[e].concat(t)),tf[e]},th=function(e,t){var r=td(e).indexOf(t);return!(r<=-1||(tf[e]=tf[e].slice(),tf[e].splice(r,1),0))},tp={prefixed:!0},tm=[["requestFullscreen","exitFullscreen","fullscreenElement","fullscreenEnabled","fullscreenchange","fullscreenerror","fullscreen"],["webkitRequestFullscreen","webkitExitFullscreen","webkitFullscreenElement","webkitFullscreenEnabled","webkitfullscreenchange","webkitfullscreenerror","-webkit-full-screen"],["mozRequestFullScreen","mozCancelFullScreen","mozFullScreenElement","mozFullScreenEnabled","mozfullscreenchange","mozfullscreenerror","-moz-full-screen"],["msRequestFullscreen","msExitFullscreen","msFullscreenElement","msFullscreenEnabled","MSFullscreenChange","MSFullscreenError","-ms-fullscreen"]],tg=tm[0],ty=0;ty<tm.length;ty++)if(tm[ty][1]in u()){tl=tm[ty];break}if(tl){for(var tv=0;tv<tl.length;tv++)tp[tg[tv]]=tl[tv];tp.prefixed=tl[0]!==tg[0]}var tb=[],t_=function e(t){var r,n="info",o=function(){for(var e=arguments.length,t=Array(e),i=0;i<e;i++)t[i]=arguments[i];r("log",n,t)};return r=function(e,r,n){var u=o.levels[r],l=RegExp("^("+u+")$");if("log"!==e&&n.unshift(e.toUpperCase()+":"),n.unshift(t+":"),tb){tb.push([].concat(n));var c=tb.length-1e3;tb.splice(0,c>0?c:0)}if(i().console){var f=i().console[e];f||"debug"!==e||(f=i().console.info||i().console.log),f&&u&&l.test(e)&&f[Array.isArray(n)?"apply":"call"](i().console,n)}},o.createLogger=function(r){return e(t+": "+r)},o.levels={all:"debug|log|warn|error",off:"",debug:"debug|log|warn|error",info:"log|warn|error",warn:"warn|error",error:"error",DEFAULT:n},o.level=function(e){if("string"==typeof e){if(!o.levels.hasOwnProperty(e))throw Error('"'+e+'" in not a valid log level');n=e}return n},(o.history=function(){return tb?[].concat(tb):[]}).filter=function(e){return(tb||[]).filter(function(t){return RegExp(".*"+e+".*").test(t[0])})},o.history.clear=function(){tb&&(tb.length=0)},o.history.disable=function(){null!==tb&&(tb.length=0,tb=null)},o.history.enable=function(){null===tb&&(tb=[])},o.error=function(){for(var e=arguments.length,t=Array(e),i=0;i<e;i++)t[i]=arguments[i];return r("error",n,t)},o.warn=function(){for(var e=arguments.length,t=Array(e),i=0;i<e;i++)t[i]=arguments[i];return r("warn",n,t)},o.debug=function(){for(var e=arguments.length,t=Array(e),i=0;i<e;i++)t[i]=arguments[i];return r("debug",n,t)},o}("VIDEOJS"),tT=t_.createLogger,tE=Object.prototype.toString,tS=function(e){return tC(e)?Object.keys(e):[]};function tw(e,t){tS(e).forEach(function(r){return t(e[r],r)})}function tA(e){for(var t=arguments.length,r=Array(t>1?t-1:0),n=1;n<t;n++)r[n-1]=arguments[n];return Object.assign?l.apply(void 0,[e].concat(r)):(r.forEach(function(t){t&&tw(t,function(t,r){e[r]=t})}),e)}function tC(e){return!!e&&"object"==typeof e}function tI(e){return tC(e)&&"[object Object]"===tE.call(e)&&e.constructor===Object}function tO(e,t){if(!e||!t)return"";if("function"==typeof i().getComputedStyle){var r;try{r=i().getComputedStyle(e)}catch(e){return""}return r?r.getPropertyValue(t)||r[t]:""}return""}var tR,tP,tk,tD,tN=i().navigator&&i().navigator.userAgent||"",tL=/AppleWebKit\/([\d.]+)/i.exec(tN),tx=tL?parseFloat(tL.pop()):null,tj=/iPod/i.test(tN),tM=(tP=tN.match(/OS (\d+)_/i))&&tP[1]?tP[1]:null,tF=/Android/i.test(tN),tB=function(){var e=tN.match(/Android (\d+)(?:\.(\d+))?(?:\.(\d+))*/i);if(!e)return null;var t=e[1]&&parseFloat(e[1]),r=e[2]&&parseFloat(e[2]);return t&&r?parseFloat(e[1]+"."+e[2]):t||null}(),tU=tF&&tB<5&&tx<537,tq=/Firefox/i.test(tN),tH=/Edg/i.test(tN),tV=!tH&&(/Chrome/i.test(tN)||/CriOS/i.test(tN)),tG=(tR=tN.match(/(Chrome|CriOS)\/(\d+)/))&&tR[2]?parseFloat(tR[2]):null,tY=(!(tD=(tk=/MSIE\s(\d+)\.\d/.exec(tN))&&parseFloat(tk[1]))&&/Trident\/7.0/i.test(tN)&&/rv:11.0/.test(tN)&&(tD=11),tD),tz=/Safari/i.test(tN)&&!tV&&!tF&&!tH,tK=/Windows/i.test(tN),tW=!!(t2()&&("ontouchstart"in i()||i().navigator.maxTouchPoints||i().DocumentTouch&&i().document instanceof i().DocumentTouch)),tX=/iPad/i.test(tN)||tz&&tW&&!/iPhone/i.test(tN),tQ=/iPhone/i.test(tN)&&!tX,t$=tQ||tX||tj,tJ=(tz||t$)&&!tV,tZ=Object.freeze({__proto__:null,IS_IPOD:tj,IOS_VERSION:tM,IS_ANDROID:tF,ANDROID_VERSION:tB,IS_NATIVE_ANDROID:tU,IS_FIREFOX:tq,IS_EDGE:tH,IS_CHROME:tV,CHROME_VERSION:tG,IE_VERSION:tY,IS_SAFARI:tz,IS_WINDOWS:tK,TOUCH_ENABLED:tW,IS_IPAD:tX,IS_IPHONE:tQ,IS_IOS:t$,IS_ANY_SAFARI:tJ});function t0(e){return"string"==typeof e&&!!e.trim()}function t1(e){if(e.indexOf(" ")>=0)throw Error("class has illegal whitespace characters")}function t2(){return u()===i().document}function t3(e){return tC(e)&&1===e.nodeType}function t4(){try{return i().parent!==i().self}catch(e){return!0}}function t6(e){return function(t,r){if(!t0(t))return u()[e](null);t0(r)&&(r=u().querySelector(r));var n=t3(r)?r:u();return n[e]&&n[e](t)}}function t8(e,t,r,n){void 0===e&&(e="div"),void 0===t&&(t={}),void 0===r&&(r={});var i=u().createElement(e);return Object.getOwnPropertyNames(t).forEach(function(e){var r=t[e];-1!==e.indexOf("aria-")||"role"===e||"type"===e?(t_.warn("Setting attributes in the second argument of createEl()\nhas been deprecated. Use the third argument instead.\ncreateEl(type, properties, attributes). Attempting to set "+e+" to "+r+"."),i.setAttribute(e,r)):"textContent"===e?t5(i,r):i[e]===r&&"tabIndex"!==e||(i[e]=r)}),Object.getOwnPropertyNames(r).forEach(function(e){i.setAttribute(e,r[e])}),n&&rg(i,n),i}function t5(e,t){return void 0===e.textContent?e.innerText=t:e.textContent=t,e}function t9(e,t){t.firstChild?t.insertBefore(e,t.firstChild):t.appendChild(e)}function t7(e,t){return t1(t),e.classList?e.classList.contains(t):RegExp("(^|\\s)"+t+"($|\\s)").test(e.className)}function re(e,t){return e.classList?e.classList.add(t):t7(e,t)||(e.className=(e.className+" "+t).trim()),e}function rt(e,t){return e?(e.classList?e.classList.remove(t):(t1(t),e.className=e.className.split(/\s+/).filter(function(e){return e!==t}).join(" ")),e):(t_.warn("removeClass was called with an element that doesn't exist"),null)}function rr(e,t,r){var n=t7(e,t);if("function"==typeof r&&(r=r(e,t)),"boolean"!=typeof r&&(r=!n),r!==n)return r?re(e,t):rt(e,t),e}function rn(e,t){Object.getOwnPropertyNames(t).forEach(function(r){var n=t[r];null==n||!1===n?e.removeAttribute(r):e.setAttribute(r,!0===n?"":n)})}function ri(e){var t={};if(e&&e.attributes&&e.attributes.length>0)for(var r=e.attributes,n=r.length-1;n>=0;n--){var i=r[n].name,o=r[n].value;"boolean"!=typeof e[i]&&-1===",autoplay,controls,playsinline,loop,muted,default,defaultMuted,".indexOf(","+i+",")||(o=null!==o),t[i]=o}return t}function ro(e,t){return e.getAttribute(t)}function ra(e,t,r){e.setAttribute(t,r)}function rs(e,t){e.removeAttribute(t)}function ru(){u().body.focus(),u().onselectstart=function(){return!1}}function rl(){u().onselectstart=function(){return!0}}function rc(e){if(e&&e.getBoundingClientRect&&e.parentNode){var t=e.getBoundingClientRect(),r={};return["bottom","height","left","right","top","width"].forEach(function(e){void 0!==t[e]&&(r[e]=t[e])}),r.height||(r.height=parseFloat(tO(e,"height"))),r.width||(r.width=parseFloat(tO(e,"width"))),r}}function rf(e){if(!e||e&&!e.offsetParent)return{left:0,top:0,width:0,height:0};for(var t=e.offsetWidth,r=e.offsetHeight,n=0,i=0;e.offsetParent&&e!==u()[tp.fullscreenElement];)n+=e.offsetLeft,i+=e.offsetTop,e=e.offsetParent;return{left:n,top:i,width:t,height:r}}function rd(e,t){var r={x:0,y:0};if(t$)for(var n=e;n&&"html"!==n.nodeName.toLowerCase();){var i=tO(n,"transform");if(/^matrix/.test(i)){var o=i.slice(7,-1).split(/,\s/).map(Number);r.x+=o[4],r.y+=o[5]}else if(/^matrix3d/.test(i)){var u=i.slice(9,-1).split(/,\s/).map(Number);r.x+=u[12],r.y+=u[13]}n=n.parentNode}var l={},c=rf(t.target),f=rf(e),d=f.width,h=f.height,p=t.offsetY-(f.top-c.top),m=t.offsetX-(f.left-c.left);return t.changedTouches&&(m=t.changedTouches[0].pageX-f.left,p=t.changedTouches[0].pageY+f.top,t$&&(m-=r.x,p-=r.y)),l.y=1-Math.max(0,Math.min(1,p/h)),l.x=Math.max(0,Math.min(1,m/d)),l}function rh(e){return tC(e)&&3===e.nodeType}function rp(e){for(;e.firstChild;)e.removeChild(e.firstChild);return e}function rm(e){return"function"==typeof e&&(e=e()),(Array.isArray(e)?e:[e]).map(function(e){return"function"==typeof e&&(e=e()),t3(e)||rh(e)?e:"string"==typeof e&&/\S/.test(e)?u().createTextNode(e):void 0}).filter(function(e){return e})}function rg(e,t){return rm(t).forEach(function(t){return e.appendChild(t)}),e}function ry(e,t){return rg(rp(e),t)}function rv(e){return void 0===e.button&&void 0===e.buttons||0===e.button&&void 0===e.buttons||"mouseup"===e.type&&0===e.button&&0===e.buttons||0===e.button&&1===e.buttons}var rb,r_=t6("querySelector"),rT=t6("querySelectorAll"),rE=Object.freeze({__proto__:null,isReal:t2,isEl:t3,isInFrame:t4,createEl:t8,textContent:t5,prependTo:t9,hasClass:t7,addClass:re,removeClass:rt,toggleClass:rr,setAttributes:rn,getAttributes:ri,getAttribute:ro,setAttribute:ra,removeAttribute:rs,blockTextSelection:ru,unblockTextSelection:rl,getBoundingClientRect:rc,findPosition:rf,getPointerPosition:rd,isTextNode:rh,emptyEl:rp,normalizeContent:rm,appendContent:rg,insertContent:ry,isSingleLeftClick:rv,$:r_,$$:rT}),rS=!1,rw=function(){if(!1!==rb.options.autoSetup){var e=Array.prototype.slice.call(u().getElementsByTagName("video")),t=Array.prototype.slice.call(u().getElementsByTagName("audio")),r=Array.prototype.slice.call(u().getElementsByTagName("video-js")),n=e.concat(t,r);if(n&&n.length>0)for(var i=0,o=n.length;i<o;i++){var l=n[i];if(!l||!l.getAttribute){rA(1);break}void 0===l.player&&null!==l.getAttribute("data-setup")&&rb(l)}else rS||rA(1)}};function rA(e,t){t2()&&(t&&(rb=t),i().setTimeout(rw,e))}function rC(){rS=!0,i().removeEventListener("load",rC)}t2()&&("complete"===u().readyState?rC():i().addEventListener("load",rC));var rI,rO=function(e){var t=u().createElement("style");return t.className=e,t},rR=function(e,t){e.styleSheet?e.styleSheet.cssText=t:e.textContent=t},rP=3;i().WeakMap||(rI=function(){function e(){this.vdata="vdata"+Math.floor(i().performance&&i().performance.now()||Date.now()),this.data={}}var t=e.prototype;return t.set=function(e,t){var r=e[this.vdata]||rP++;return e[this.vdata]||(e[this.vdata]=r),this.data[r]=t,this},t.get=function(e){var t=e[this.vdata];if(t)return this.data[t];t_("We have no data for this element",e)},t.has=function(e){return e[this.vdata]in this.data},t.delete=function(e){var t=e[this.vdata];t&&(delete this.data[t],delete e[this.vdata])},e}());var rk,rD=i().WeakMap?new WeakMap:new rI;function rN(e,t){if(rD.has(e)){var r=rD.get(e);0===r.handlers[t].length&&(delete r.handlers[t],e.removeEventListener?e.removeEventListener(t,r.dispatcher,!1):e.detachEvent&&e.detachEvent("on"+t,r.dispatcher)),Object.getOwnPropertyNames(r.handlers).length<=0&&(delete r.handlers,delete r.dispatcher,delete r.disabled),0===Object.getOwnPropertyNames(r).length&&rD.delete(e)}}function rL(e,t,r,n){r.forEach(function(r){e(t,r,n)})}function rx(e){if(e.fixed_)return e;function t(){return!0}function r(){return!1}if(!e||!e.isPropagationStopped||!e.isImmediatePropagationStopped){var n=e||i().event;for(var o in e={},n)"layerX"!==o&&"layerY"!==o&&"keyLocation"!==o&&"webkitMovementX"!==o&&"webkitMovementY"!==o&&"path"!==o&&("returnValue"===o&&n.preventDefault||(e[o]=n[o]));if(e.target||(e.target=e.srcElement||u()),e.relatedTarget||(e.relatedTarget=e.fromElement===e.target?e.toElement:e.fromElement),e.preventDefault=function(){n.preventDefault&&n.preventDefault(),e.returnValue=!1,n.returnValue=!1,e.defaultPrevented=!0},e.defaultPrevented=!1,e.stopPropagation=function(){n.stopPropagation&&n.stopPropagation(),e.cancelBubble=!0,n.cancelBubble=!0,e.isPropagationStopped=t},e.isPropagationStopped=r,e.stopImmediatePropagation=function(){n.stopImmediatePropagation&&n.stopImmediatePropagation(),e.isImmediatePropagationStopped=t,e.stopPropagation()},e.isImmediatePropagationStopped=r,null!==e.clientX&&void 0!==e.clientX){var l=u().documentElement,c=u().body;e.pageX=e.clientX+(l&&l.scrollLeft||c&&c.scrollLeft||0)-(l&&l.clientLeft||c&&c.clientLeft||0),e.pageY=e.clientY+(l&&l.scrollTop||c&&c.scrollTop||0)-(l&&l.clientTop||c&&c.clientTop||0)}e.which=e.charCode||e.keyCode,null!==e.button&&void 0!==e.button&&(e.button=1&e.button?0:4&e.button?1:2&e.button?2:0)}return e.fixed_=!0,e}var rj=["touchstart","touchmove"];function rM(e,t,r){if(Array.isArray(t))return rL(rM,e,t,r);rD.has(e)||rD.set(e,{});var n=rD.get(e);if(n.handlers||(n.handlers={}),n.handlers[t]||(n.handlers[t]=[]),r.guid||(r.guid=rP++),n.handlers[t].push(r),n.dispatcher||(n.disabled=!1,n.dispatcher=function(t,r){if(!n.disabled){t=rx(t);var i=n.handlers[t.type];if(i)for(var o=i.slice(0),u=0,l=o.length;u<l&&!t.isImmediatePropagationStopped();u++)try{o[u].call(e,t,r)}catch(e){t_.error(e)}}}),1===n.handlers[t].length){if(e.addEventListener){var o=!1;(function(){if("boolean"!=typeof rk){rk=!1;try{var e=Object.defineProperty({},"passive",{get:function(){rk=!0}});i().addEventListener("test",null,e),i().removeEventListener("test",null,e)}catch(e){}}return rk})()&&rj.indexOf(t)>-1&&(o={passive:!0}),e.addEventListener(t,n.dispatcher,o)}else e.attachEvent&&e.attachEvent("on"+t,n.dispatcher)}}function rF(e,t,r){if(rD.has(e)){var n=rD.get(e);if(n.handlers){if(Array.isArray(t))return rL(rF,e,t,r);var i=function(e,t){n.handlers[t]=[],rN(e,t)};if(void 0!==t){var o=n.handlers[t];if(o){if(r){if(r.guid)for(var u=0;u<o.length;u++)o[u].guid===r.guid&&o.splice(u--,1);rN(e,t)}else i(e,t)}}else for(var l in n.handlers)Object.prototype.hasOwnProperty.call(n.handlers||{},l)&&i(e,l)}}}function rB(e,t,r){var n=rD.has(e)?rD.get(e):{},i=e.parentNode||e.ownerDocument;if("string"==typeof t?t={type:t,target:e}:t.target||(t.target=e),t=rx(t),n.dispatcher&&n.dispatcher.call(e,t,r),i&&!t.isPropagationStopped()&&!0===t.bubbles)rB.call(null,i,t,r);else if(!i&&!t.defaultPrevented&&t.target&&t.target[t.type]){rD.has(t.target)||rD.set(t.target,{});var o=rD.get(t.target);t.target[t.type]&&(o.disabled=!0,"function"==typeof t.target[t.type]&&t.target[t.type](),o.disabled=!1)}return!t.defaultPrevented}function rU(e,t,r){if(Array.isArray(t))return rL(rU,e,t,r);var n=function n(){rF(e,t,n),r.apply(this,arguments)};n.guid=r.guid=r.guid||rP++,rM(e,t,n)}function rq(e,t,r){var n=function n(){rF(e,t,n),r.apply(this,arguments)};n.guid=r.guid=r.guid||rP++,rM(e,t,n)}var rH,rV=Object.freeze({__proto__:null,fixEvent:rx,on:rM,off:rF,trigger:rB,one:rU,any:rq}),rG=function(e,t,r){t.guid||(t.guid=rP++);var n=t.bind(e);return n.guid=r?r+"_"+t.guid:t.guid,n},rY=function(e,t){var r=i().performance.now();return function(){var n=i().performance.now();n-r>=t&&(e.apply(void 0,arguments),r=n)}},rz=function(){};rz.prototype.allowedEvents_={},rz.prototype.on=function(e,t){var r=this.addEventListener;this.addEventListener=function(){},rM(this,e,t),this.addEventListener=r},rz.prototype.addEventListener=rz.prototype.on,rz.prototype.off=function(e,t){rF(this,e,t)},rz.prototype.removeEventListener=rz.prototype.off,rz.prototype.one=function(e,t){var r=this.addEventListener;this.addEventListener=function(){},rU(this,e,t),this.addEventListener=r},rz.prototype.any=function(e,t){var r=this.addEventListener;this.addEventListener=function(){},rq(this,e,t),this.addEventListener=r},rz.prototype.trigger=function(e){var t=e.type||e;"string"==typeof e&&(e={type:t}),e=rx(e),this.allowedEvents_[t]&&this["on"+t]&&this["on"+t](e),rB(this,e)},rz.prototype.dispatchEvent=rz.prototype.trigger,rz.prototype.queueTrigger=function(e){var t=this;rH||(rH=new Map);var r=e.type||e,n=rH.get(this);n||(n=new Map,rH.set(this,n));var o=n.get(r);n.delete(r),i().clearTimeout(o);var u=i().setTimeout(function(){n.delete(r),0===n.size&&(n=null,rH.delete(t)),t.trigger(e)},0);n.set(r,u)};var rK=function(e){return"function"==typeof e.name?e.name():"string"==typeof e.name?e.name:e.name_?e.name_:e.constructor&&e.constructor.name?e.constructor.name:typeof e},rW=function(e){return e instanceof rz||!!e.eventBusEl_&&["on","one","off","trigger"].every(function(t){return"function"==typeof e[t]})},rX=function(e){return"string"==typeof e&&/\S/.test(e)||Array.isArray(e)&&!!e.length},rQ=function(e,t,r){if(!e||!e.nodeName&&!rW(e))throw Error("Invalid target for "+rK(t)+"#"+r+"; must be a DOM node or evented object.")},r$=function(e,t,r){if(!rX(e))throw Error("Invalid event type for "+rK(t)+"#"+r+"; must be a non-empty string or array.")},rJ=function(e,t,r){if("function"!=typeof e)throw Error("Invalid listener for "+rK(t)+"#"+r+"; must be a function.")},rZ=function(e,t,r){var n,i,o,u=t.length<3||t[0]===e||t[0]===e.eventBusEl_;return u?(n=e.eventBusEl_,t.length>=3&&t.shift(),i=t[0],o=t[1]):(n=t[0],i=t[1],o=t[2]),rQ(n,e,r),r$(i,e,r),rJ(o,e,r),{isTargetingSelf:u,target:n,type:i,listener:o=rG(e,o)}},r0=function(e,t,r,n){rQ(e,e,t),e.nodeName?rV[t](e,r,n):e[t](r,n)},r1={on:function(){for(var e=this,t=arguments.length,r=Array(t),n=0;n<t;n++)r[n]=arguments[n];var i=rZ(this,r,"on"),o=i.isTargetingSelf,u=i.target,l=i.type,c=i.listener;if(r0(u,"on",l,c),!o){var f=function(){return e.off(u,l,c)};f.guid=c.guid;var d=function(){return e.off("dispose",f)};d.guid=c.guid,r0(this,"on","dispose",f),r0(u,"on","dispose",d)}},one:function(){for(var e=this,t=arguments.length,r=Array(t),n=0;n<t;n++)r[n]=arguments[n];var i=rZ(this,r,"one"),o=i.isTargetingSelf,u=i.target,l=i.type,c=i.listener;if(o)r0(u,"one",l,c);else{var f=function t(){e.off(u,l,t);for(var r=arguments.length,n=Array(r),i=0;i<r;i++)n[i]=arguments[i];c.apply(null,n)};f.guid=c.guid,r0(u,"one",l,f)}},any:function(){for(var e=this,t=arguments.length,r=Array(t),n=0;n<t;n++)r[n]=arguments[n];var i=rZ(this,r,"any"),o=i.isTargetingSelf,u=i.target,l=i.type,c=i.listener;if(o)r0(u,"any",l,c);else{var f=function t(){e.off(u,l,t);for(var r=arguments.length,n=Array(r),i=0;i<r;i++)n[i]=arguments[i];c.apply(null,n)};f.guid=c.guid,r0(u,"any",l,f)}},off:function(e,t,r){!e||rX(e)?rF(this.eventBusEl_,e,t):(rQ(e,this,"off"),r$(t,this,"off"),rJ(r,this,"off"),r=rG(this,r),this.off("dispose",r),e.nodeName?(rF(e,t,r),rF(e,"dispose",r)):rW(e)&&(e.off(t,r),e.off("dispose",r)))},trigger:function(e,t){if(rQ(this.eventBusEl_,this,"trigger"),!rX(e&&"string"!=typeof e?e.type:e)){var r="Invalid event type for "+rK(this)+"#trigger; must be a non-empty string or object with a type key that has a non-empty value.";if(!e)throw Error(r);(this.log||t_).error(r)}return rB(this.eventBusEl_,e,t)}};function r2(e,t){void 0===t&&(t={});var r=t.eventBusKey;if(r){if(!e[r].nodeName)throw Error('The eventBusKey "'+r+'" does not refer to an element.');e.eventBusEl_=e[r]}else e.eventBusEl_=t8("span",{className:"vjs-event-bus"});return tA(e,r1),e.eventedCallbacks&&e.eventedCallbacks.forEach(function(e){e()}),e.on("dispose",function(){e.off(),[e,e.el_,e.eventBusEl_].forEach(function(e){e&&rD.has(e)&&rD.delete(e)}),i().setTimeout(function(){e.eventBusEl_=null},0)}),e}var r3={state:{},setState:function(e){var t,r=this;return"function"==typeof e&&(e=e()),tw(e,function(e,n){r.state[n]!==e&&((t=t||{})[n]={from:r.state[n],to:e}),r.state[n]=e}),t&&rW(this)&&this.trigger({changes:t,type:"statechanged"}),t}};function r4(e,t){return tA(e,r3),e.state=tA({},e.state,t),"function"==typeof e.handleStateChanged&&rW(e)&&e.on("statechanged",e.handleStateChanged),e}var r6=function(e){return"string"!=typeof e?e:e.replace(/./,function(e){return e.toLowerCase()})},r8=function(e){return"string"!=typeof e?e:e.replace(/./,function(e){return e.toUpperCase()})};function r5(){for(var e={},t=arguments.length,r=Array(t),n=0;n<t;n++)r[n]=arguments[n];return r.forEach(function(t){t&&tw(t,function(t,r){tI(t)?(tI(e[r])||(e[r]={}),e[r]=r5(e[r],t)):e[r]=t})}),e}var r9=function(){function e(){this.map_={}}var t=e.prototype;return t.has=function(e){return e in this.map_},t.delete=function(e){var t=this.has(e);return delete this.map_[e],t},t.set=function(e,t){return this.map_[e]=t,this},t.forEach=function(e,t){for(var r in this.map_)e.call(t,this.map_[r],r,this)},e}(),r7=i().Map?i().Map:r9,ne=function(){function e(){this.set_={}}var t=e.prototype;return t.has=function(e){return e in this.set_},t.delete=function(e){var t=this.has(e);return delete this.set_[e],t},t.add=function(e){return this.set_[e]=1,this},t.forEach=function(e,t){for(var r in this.set_)e.call(t,r,r,this)},e}(),nt=i().Set?i().Set:ne,nr=function(){function e(e,t,r){var n=this;if(!e&&this.play?this.player_=e=this:this.player_=e,this.isDisposed_=!1,this.parentComponent_=null,this.options_=r5({},this.options_),t=this.options_=r5(this.options_,t),this.id_=t.id||t.el&&t.el.id,!this.id_){var i=e&&e.id&&e.id()||"no_player";this.id_=i+"_component_"+rP++}this.name_=t.name||null,t.el?this.el_=t.el:!1!==t.createEl&&(this.el_=this.createEl()),t.className&&this.el_&&t.className.split(" ").forEach(function(e){return n.addClass(e)}),!1!==t.evented&&(r2(this,{eventBusKey:this.el_?"el_":null}),this.handleLanguagechange=this.handleLanguagechange.bind(this),this.on(this.player_,"languagechange",this.handleLanguagechange)),r4(this,this.constructor.defaultState),this.children_=[],this.childIndex_={},this.childNameIndex_={},this.setTimeoutIds_=new nt,this.setIntervalIds_=new nt,this.rafIds_=new nt,this.namedRafs_=new r7,this.clearingTimersOnDispose_=!1,!1!==t.initChildren&&this.initChildren(),this.ready(r),!1!==t.reportTouchActivity&&this.enableTouchActivity()}var t=e.prototype;return t.dispose=function(e){if(void 0===e&&(e={}),!this.isDisposed_){if(this.readyQueue_&&(this.readyQueue_.length=0),this.trigger({type:"dispose",bubbles:!1}),this.isDisposed_=!0,this.children_)for(var t=this.children_.length-1;t>=0;t--)this.children_[t].dispose&&this.children_[t].dispose();this.children_=null,this.childIndex_=null,this.childNameIndex_=null,this.parentComponent_=null,this.el_&&(this.el_.parentNode&&(e.restoreEl?this.el_.parentNode.replaceChild(e.restoreEl,this.el_):this.el_.parentNode.removeChild(this.el_)),this.el_=null),this.player_=null}},t.isDisposed=function(){return!!this.isDisposed_},t.player=function(){return this.player_},t.options=function(e){return e&&(this.options_=r5(this.options_,e)),this.options_},t.el=function(){return this.el_},t.createEl=function(e,t,r){return t8(e,t,r)},t.localize=function(e,t,r){void 0===r&&(r=e);var n=this.player_.language&&this.player_.language(),i=this.player_.languages&&this.player_.languages(),o=i&&i[n],u=n&&n.split("-")[0],l=i&&i[u],c=r;return o&&o[e]?c=o[e]:l&&l[e]&&(c=l[e]),t&&(c=c.replace(/\{(\d+)\}/g,function(e,r){var n=t[r-1],i=n;return void 0===n&&(i=e),i})),c},t.handleLanguagechange=function(){},t.contentEl=function(){return this.contentEl_||this.el_},t.id=function(){return this.id_},t.name=function(){return this.name_},t.children=function(){return this.children_},t.getChildById=function(e){return this.childIndex_[e]},t.getChild=function(e){if(e)return this.childNameIndex_[e]},t.getDescendant=function(){for(var e=arguments.length,t=Array(e),r=0;r<e;r++)t[r]=arguments[r];t=t.reduce(function(e,t){return e.concat(t)},[]);for(var n=this,i=0;i<t.length;i++)if(!(n=n.getChild(t[i]))||!n.getChild)return;return n},t.addChild=function(t,r,n){var i,o;if(void 0===r&&(r={}),void 0===n&&(n=this.children_.length),"string"==typeof t){o=r8(t);var u=r.componentClass||o;r.name=o;var l=e.getComponent(u);if(!l)throw Error("Component "+u+" does not exist");if("function"!=typeof l)return null;i=new l(this.player_||this,r)}else i=t;if(i.parentComponent_&&i.parentComponent_.removeChild(i),this.children_.splice(n,0,i),i.parentComponent_=this,"function"==typeof i.id&&(this.childIndex_[i.id()]=i),(o=o||i.name&&r8(i.name()))&&(this.childNameIndex_[o]=i,this.childNameIndex_[r6(o)]=i),"function"==typeof i.el&&i.el()){var c=null;this.children_[n+1]&&(this.children_[n+1].el_?c=this.children_[n+1].el_:t3(this.children_[n+1])&&(c=this.children_[n+1])),this.contentEl().insertBefore(i.el(),c)}return i},t.removeChild=function(e){if("string"==typeof e&&(e=this.getChild(e)),e&&this.children_){for(var t=!1,r=this.children_.length-1;r>=0;r--)if(this.children_[r]===e){t=!0,this.children_.splice(r,1);break}if(t){e.parentComponent_=null,this.childIndex_[e.id()]=null,this.childNameIndex_[r8(e.name())]=null,this.childNameIndex_[r6(e.name())]=null;var n=e.el();n&&n.parentNode===this.contentEl()&&this.contentEl().removeChild(e.el())}}},t.initChildren=function(){var t=this,r=this.options_.children;if(r){var n,i=this.options_,o=e.getComponent("Tech");(n=Array.isArray(r)?r:Object.keys(r)).concat(Object.keys(this.options_).filter(function(e){return!n.some(function(t){return"string"==typeof t?e===t:e===t.name})})).map(function(e){var n,i;return"string"==typeof e?i=r[n=e]||t.options_[n]||{}:(n=e.name,i=e),{name:n,opts:i}}).filter(function(t){var r=e.getComponent(t.opts.componentClass||r8(t.name));return r&&!o.isTech(r)}).forEach(function(e){var r=e.name,n=e.opts;if(void 0!==i[r]&&(n=i[r]),!1!==n){!0===n&&(n={}),n.playerOptions=t.options_.playerOptions;var o=t.addChild(r,n);o&&(t[r]=o)}})}},t.buildCSSClass=function(){return""},t.ready=function(e,t){if(void 0===t&&(t=!1),e)return this.isReady_?void(t?e.call(this):this.setTimeout(e,1)):(this.readyQueue_=this.readyQueue_||[],void this.readyQueue_.push(e))},t.triggerReady=function(){this.isReady_=!0,this.setTimeout(function(){var e=this.readyQueue_;this.readyQueue_=[],e&&e.length>0&&e.forEach(function(e){e.call(this)},this),this.trigger("ready")},1)},t.$=function(e,t){return r_(e,t||this.contentEl())},t.$$=function(e,t){return rT(e,t||this.contentEl())},t.hasClass=function(e){return t7(this.el_,e)},t.addClass=function(e){re(this.el_,e)},t.removeClass=function(e){rt(this.el_,e)},t.toggleClass=function(e,t){rr(this.el_,e,t)},t.show=function(){this.removeClass("vjs-hidden")},t.hide=function(){this.addClass("vjs-hidden")},t.lockShowing=function(){this.addClass("vjs-lock-showing")},t.unlockShowing=function(){this.removeClass("vjs-lock-showing")},t.getAttribute=function(e){return ro(this.el_,e)},t.setAttribute=function(e,t){ra(this.el_,e,t)},t.removeAttribute=function(e){rs(this.el_,e)},t.width=function(e,t){return this.dimension("width",e,t)},t.height=function(e,t){return this.dimension("height",e,t)},t.dimensions=function(e,t){this.width(e,!0),this.height(t)},t.dimension=function(e,t,r){if(void 0!==t)return null!==t&&t==t||(t=0),-1!==(""+t).indexOf("%")||-1!==(""+t).indexOf("px")?this.el_.style[e]=t:this.el_.style[e]="auto"===t?"":t+"px",void(r||this.trigger("componentresize"));if(!this.el_)return 0;var n=this.el_.style[e],i=n.indexOf("px");return -1!==i?parseInt(n.slice(0,i),10):parseInt(this.el_["offset"+r8(e)],10)},t.currentDimension=function(e){var t=0;if("width"!==e&&"height"!==e)throw Error("currentDimension only accepts width or height value");if(0===(t=parseFloat(t=tO(this.el_,e)))||isNaN(t)){var r="offset"+r8(e);t=this.el_[r]}return t},t.currentDimensions=function(){return{width:this.currentDimension("width"),height:this.currentDimension("height")}},t.currentWidth=function(){return this.currentDimension("width")},t.currentHeight=function(){return this.currentDimension("height")},t.focus=function(){this.el_.focus()},t.blur=function(){this.el_.blur()},t.handleKeyDown=function(e){this.player_&&(d().isEventKey(e,"Tab")||e.stopPropagation(),this.player_.handleKeyDown(e))},t.handleKeyPress=function(e){this.handleKeyDown(e)},t.emitTapEvents=function(){var e,t=0,r=null;this.on("touchstart",function(n){1===n.touches.length&&(r={pageX:n.touches[0].pageX,pageY:n.touches[0].pageY},t=i().performance.now(),e=!0)}),this.on("touchmove",function(t){if(t.touches.length>1)e=!1;else if(r){var n=t.touches[0].pageX-r.pageX,i=t.touches[0].pageY-r.pageY;Math.sqrt(n*n+i*i)>10&&(e=!1)}});var n=function(){e=!1};this.on("touchleave",n),this.on("touchcancel",n),this.on("touchend",function(n){r=null,!0===e&&i().performance.now()-t<200&&(n.preventDefault(),this.trigger("tap"))})},t.enableTouchActivity=function(){if(this.player()&&this.player().reportUserActivity){var e,t=rG(this.player(),this.player().reportUserActivity);this.on("touchstart",function(){t(),this.clearInterval(e),e=this.setInterval(t,250)});var r=function(r){t(),this.clearInterval(e)};this.on("touchmove",t),this.on("touchend",r),this.on("touchcancel",r)}},t.setTimeout=function(e,t){var r,n=this;return e=rG(this,e),this.clearTimersOnDispose_(),r=i().setTimeout(function(){n.setTimeoutIds_.has(r)&&n.setTimeoutIds_.delete(r),e()},t),this.setTimeoutIds_.add(r),r},t.clearTimeout=function(e){return this.setTimeoutIds_.has(e)&&(this.setTimeoutIds_.delete(e),i().clearTimeout(e)),e},t.setInterval=function(e,t){e=rG(this,e),this.clearTimersOnDispose_();var r=i().setInterval(e,t);return this.setIntervalIds_.add(r),r},t.clearInterval=function(e){return this.setIntervalIds_.has(e)&&(this.setIntervalIds_.delete(e),i().clearInterval(e)),e},t.requestAnimationFrame=function(e){var t,r=this;return this.supportsRaf_?(this.clearTimersOnDispose_(),e=rG(this,e),t=i().requestAnimationFrame(function(){r.rafIds_.has(t)&&r.rafIds_.delete(t),e()}),this.rafIds_.add(t),t):this.setTimeout(e,1e3/60)},t.requestNamedAnimationFrame=function(e,t){var r=this;if(!this.namedRafs_.has(e)){this.clearTimersOnDispose_(),t=rG(this,t);var n=this.requestAnimationFrame(function(){t(),r.namedRafs_.has(e)&&r.namedRafs_.delete(e)});return this.namedRafs_.set(e,n),e}},t.cancelNamedAnimationFrame=function(e){this.namedRafs_.has(e)&&(this.cancelAnimationFrame(this.namedRafs_.get(e)),this.namedRafs_.delete(e))},t.cancelAnimationFrame=function(e){return this.supportsRaf_?(this.rafIds_.has(e)&&(this.rafIds_.delete(e),i().cancelAnimationFrame(e)),e):this.clearTimeout(e)},t.clearTimersOnDispose_=function(){var e=this;this.clearingTimersOnDispose_||(this.clearingTimersOnDispose_=!0,this.one("dispose",function(){[["namedRafs_","cancelNamedAnimationFrame"],["rafIds_","cancelAnimationFrame"],["setTimeoutIds_","clearTimeout"],["setIntervalIds_","clearInterval"]].forEach(function(t){var r=t[0],n=t[1];e[r].forEach(function(t,r){return e[n](r)})}),e.clearingTimersOnDispose_=!1}))},e.registerComponent=function(t,r){if("string"!=typeof t||!t)throw Error('Illegal component name, "'+t+'"; must be a non-empty string.');var n=e.getComponent("Tech"),i=n&&n.isTech(r),o=e===r||e.prototype.isPrototypeOf(r.prototype);if(i||!o)throw Error('Illegal component, "'+t+'"; '+(i?"techs must be registered using Tech.registerTech()":"must be a Component subclass")+".");t=r8(t),e.components_||(e.components_={});var u=e.getComponent("Player");if("Player"===t&&u&&u.players){var l=u.players,c=Object.keys(l);if(l&&c.length>0&&c.map(function(e){return l[e]}).every(Boolean))throw Error("Can not register Player component after player has been created.")}return e.components_[t]=r,e.components_[r6(t)]=r,r},e.getComponent=function(t){if(t&&e.components_)return e.components_[t]},e}();function nn(e,t,r,n){return function(e,t,r){if("number"!=typeof t||t<0||t>r)throw Error("Failed to execute '"+e+"' on 'TimeRanges': The index provided ("+t+") is non-numeric or out of bounds (0-"+r+").")}(e,n,r.length-1),r[n][t]}function ni(e){var t;return t=void 0===e||0===e.length?{length:0,start:function(){throw Error("This TimeRanges object is empty")},end:function(){throw Error("This TimeRanges object is empty")}}:{length:e.length,start:nn.bind(null,"start",0,e),end:nn.bind(null,"end",1,e)},i().Symbol&&i().Symbol.iterator&&(t[i().Symbol.iterator]=function(){return(e||[]).values()}),t}function no(e,t){return Array.isArray(e)?ni(e):void 0===e||void 0===t?ni():ni([[e,t]])}function na(e,t){var r,n,i=0;if(!t)return 0;e&&e.length||(e=no(0,0));for(var o=0;o<e.length;o++)r=e.start(o),(n=e.end(o))>t&&(n=t),i+=n-r;return i/t}function ns(e){if(e instanceof ns)return e;"number"==typeof e?this.code=e:"string"==typeof e?this.message=e:tC(e)&&("number"==typeof e.code&&(this.code=e.code),tA(this,e)),this.message||(this.message=ns.defaultMessages[this.code]||"")}nr.prototype.supportsRaf_="function"==typeof i().requestAnimationFrame&&"function"==typeof i().cancelAnimationFrame,nr.registerComponent("Component",nr),ns.prototype.code=0,ns.prototype.message="",ns.prototype.status=null,ns.errorTypes=["MEDIA_ERR_CUSTOM","MEDIA_ERR_ABORTED","MEDIA_ERR_NETWORK","MEDIA_ERR_DECODE","MEDIA_ERR_SRC_NOT_SUPPORTED","MEDIA_ERR_ENCRYPTED"],ns.defaultMessages={1:"You aborted the media playback",2:"A network error caused the media download to fail part-way.",3:"The media playback was aborted due to a corruption problem or because the media used features your browser did not support.",4:"The media could not be loaded, either because the server or network failed or because the format is not supported.",5:"The media is encrypted and we do not have the keys to decrypt it."};for(var nu=0;nu<ns.errorTypes.length;nu++)ns[ns.errorTypes[nu]]=nu,ns.prototype[ns.errorTypes[nu]]=nu;function nl(e){return null!=e&&"function"==typeof e.then}function nc(e){nl(e)&&e.then(null,function(e){})}var nf=function(e){return["kind","label","language","id","inBandMetadataTrackDispatchType","mode","src"].reduce(function(t,r,n){return e[r]&&(t[r]=e[r]),t},{cues:e.cues&&Array.prototype.map.call(e.cues,function(e){return{startTime:e.startTime,endTime:e.endTime,text:e.text,id:e.id}})})},nd="vjs-modal-dialog",nh=function(e){function t(t,r){var n;return(n=e.call(this,t,r)||this).handleKeyDown_=function(e){return n.handleKeyDown(e)},n.close_=function(e){return n.close(e)},n.opened_=n.hasBeenOpened_=n.hasBeenFilled_=!1,n.closeable(!n.options_.uncloseable),n.content(n.options_.content),n.contentEl_=t8("div",{className:nd+"-content"},{role:"document"}),n.descEl_=t8("p",{className:nd+"-description vjs-control-text",id:n.el().getAttribute("aria-describedby")}),t5(n.descEl_,n.description()),n.el_.appendChild(n.descEl_),n.el_.appendChild(n.contentEl_),n}m(t,e);var r=t.prototype;return r.createEl=function(){return e.prototype.createEl.call(this,"div",{className:this.buildCSSClass(),tabIndex:-1},{"aria-describedby":this.id()+"_description","aria-hidden":"true","aria-label":this.label(),role:"dialog"})},r.dispose=function(){this.contentEl_=null,this.descEl_=null,this.previouslyActiveEl_=null,e.prototype.dispose.call(this)},r.buildCSSClass=function(){return nd+" vjs-hidden "+e.prototype.buildCSSClass.call(this)},r.label=function(){return this.localize(this.options_.label||"Modal Window")},r.description=function(){var e=this.options_.description||this.localize("This is a modal window.");return this.closeable()&&(e+=" "+this.localize("This modal can be closed by pressing the Escape key or activating the close button.")),e},r.open=function(){if(!this.opened_){var e=this.player();this.trigger("beforemodalopen"),this.opened_=!0,!this.options_.fillAlways&&(this.hasBeenOpened_||this.hasBeenFilled_)||this.fill(),this.wasPlaying_=!e.paused(),this.options_.pauseOnOpen&&this.wasPlaying_&&e.pause(),this.on("keydown",this.handleKeyDown_),this.hadControls_=e.controls(),e.controls(!1),this.show(),this.conditionalFocus_(),this.el().setAttribute("aria-hidden","false"),this.trigger("modalopen"),this.hasBeenOpened_=!0}},r.opened=function(e){return"boolean"==typeof e&&this[e?"open":"close"](),this.opened_},r.close=function(){if(this.opened_){var e=this.player();this.trigger("beforemodalclose"),this.opened_=!1,this.wasPlaying_&&this.options_.pauseOnOpen&&e.play(),this.off("keydown",this.handleKeyDown_),this.hadControls_&&e.controls(!0),this.hide(),this.el().setAttribute("aria-hidden","true"),this.trigger("modalclose"),this.conditionalBlur_(),this.options_.temporary&&this.dispose()}},r.closeable=function(e){if("boolean"==typeof e){var t=this.closeable_=!!e,r=this.getChild("closeButton");if(t&&!r){var n=this.contentEl_;this.contentEl_=this.el_,r=this.addChild("closeButton",{controlText:"Close Modal Dialog"}),this.contentEl_=n,this.on(r,"close",this.close_)}!t&&r&&(this.off(r,"close",this.close_),this.removeChild(r),r.dispose())}return this.closeable_},r.fill=function(){this.fillWith(this.content())},r.fillWith=function(e){var t=this.contentEl(),r=t.parentNode,n=t.nextSibling;this.trigger("beforemodalfill"),this.hasBeenFilled_=!0,r.removeChild(t),this.empty(),ry(t,e),this.trigger("modalfill"),n?r.insertBefore(t,n):r.appendChild(t);var i=this.getChild("closeButton");i&&r.appendChild(i.el_)},r.empty=function(){this.trigger("beforemodalempty"),rp(this.contentEl()),this.trigger("modalempty")},r.content=function(e){return void 0!==e&&(this.content_=e),this.content_},r.conditionalFocus_=function(){var e=u().activeElement,t=this.player_.el_;this.previouslyActiveEl_=null,(t.contains(e)||t===e)&&(this.previouslyActiveEl_=e,this.focus())},r.conditionalBlur_=function(){this.previouslyActiveEl_&&(this.previouslyActiveEl_.focus(),this.previouslyActiveEl_=null)},r.handleKeyDown=function(e){if(e.stopPropagation(),d().isEventKey(e,"Escape")&&this.closeable())return e.preventDefault(),void this.close();if(d().isEventKey(e,"Tab")){for(var t,r=this.focusableEls_(),n=this.el_.querySelector(":focus"),i=0;i<r.length;i++)if(n===r[i]){t=i;break}u().activeElement===this.el_&&(t=0),e.shiftKey&&0===t?(r[r.length-1].focus(),e.preventDefault()):e.shiftKey||t!==r.length-1||(r[0].focus(),e.preventDefault())}},r.focusableEls_=function(){var e=this.el_.querySelectorAll("*");return Array.prototype.filter.call(e,function(e){return(e instanceof i().HTMLAnchorElement||e instanceof i().HTMLAreaElement)&&e.hasAttribute("href")||(e instanceof i().HTMLInputElement||e instanceof i().HTMLSelectElement||e instanceof i().HTMLTextAreaElement||e instanceof i().HTMLButtonElement)&&!e.hasAttribute("disabled")||e instanceof i().HTMLIFrameElement||e instanceof i().HTMLObjectElement||e instanceof i().HTMLEmbedElement||e.hasAttribute("tabindex")&&-1!==e.getAttribute("tabindex")||e.hasAttribute("contenteditable")})},t}(nr);nh.prototype.options_={pauseOnOpen:!0,temporary:!0},nr.registerComponent("ModalDialog",nh);var np=function(e){function t(t){var r;void 0===t&&(t=[]),(r=e.call(this)||this).tracks_=[],Object.defineProperty(h(r),"length",{get:function(){return this.tracks_.length}});for(var n=0;n<t.length;n++)r.addTrack(t[n]);return r}m(t,e);var r=t.prototype;return r.addTrack=function(e){var t=this,r=this.tracks_.length;""+r in this||Object.defineProperty(this,r,{get:function(){return this.tracks_[r]}}),-1===this.tracks_.indexOf(e)&&(this.tracks_.push(e),this.trigger({track:e,type:"addtrack",target:this})),e.labelchange_=function(){t.trigger({track:e,type:"labelchange",target:t})},rW(e)&&e.addEventListener("labelchange",e.labelchange_)},r.removeTrack=function(e){for(var t,r=0,n=this.length;r<n;r++)if(this[r]===e){(t=this[r]).off&&t.off(),this.tracks_.splice(r,1);break}t&&this.trigger({track:t,type:"removetrack",target:this})},r.getTrackById=function(e){for(var t=null,r=0,n=this.length;r<n;r++){var i=this[r];if(i.id===e){t=i;break}}return t},t}(rz);for(var nm in np.prototype.allowedEvents_={change:"change",addtrack:"addtrack",removetrack:"removetrack",labelchange:"labelchange"},np.prototype.allowedEvents_)np.prototype["on"+nm]=null;var ng=function(e,t){for(var r=0;r<e.length;r++)Object.keys(e[r]).length&&t.id!==e[r].id&&(e[r].enabled=!1)},ny=function(e){function t(t){var r;void 0===t&&(t=[]);for(var n=t.length-1;n>=0;n--)if(t[n].enabled){ng(t,t[n]);break}return(r=e.call(this,t)||this).changing_=!1,r}m(t,e);var r=t.prototype;return r.addTrack=function(t){var r=this;t.enabled&&ng(this,t),e.prototype.addTrack.call(this,t),t.addEventListener&&(t.enabledChange_=function(){r.changing_||(r.changing_=!0,ng(r,t),r.changing_=!1,r.trigger("change"))},t.addEventListener("enabledchange",t.enabledChange_))},r.removeTrack=function(t){e.prototype.removeTrack.call(this,t),t.removeEventListener&&t.enabledChange_&&(t.removeEventListener("enabledchange",t.enabledChange_),t.enabledChange_=null)},t}(np),nv=function(e,t){for(var r=0;r<e.length;r++)Object.keys(e[r]).length&&t.id!==e[r].id&&(e[r].selected=!1)},nb=function(e){function t(t){var r;void 0===t&&(t=[]);for(var n=t.length-1;n>=0;n--)if(t[n].selected){nv(t,t[n]);break}return(r=e.call(this,t)||this).changing_=!1,Object.defineProperty(h(r),"selectedIndex",{get:function(){for(var e=0;e<this.length;e++)if(this[e].selected)return e;return -1},set:function(){}}),r}m(t,e);var r=t.prototype;return r.addTrack=function(t){var r=this;t.selected&&nv(this,t),e.prototype.addTrack.call(this,t),t.addEventListener&&(t.selectedChange_=function(){r.changing_||(r.changing_=!0,nv(r,t),r.changing_=!1,r.trigger("change"))},t.addEventListener("selectedchange",t.selectedChange_))},r.removeTrack=function(t){e.prototype.removeTrack.call(this,t),t.removeEventListener&&t.selectedChange_&&(t.removeEventListener("selectedchange",t.selectedChange_),t.selectedChange_=null)},t}(np),n_=function(e){function t(){return e.apply(this,arguments)||this}m(t,e);var r=t.prototype;return r.addTrack=function(t){var r=this;e.prototype.addTrack.call(this,t),this.queueChange_||(this.queueChange_=function(){return r.queueTrigger("change")}),this.triggerSelectedlanguagechange||(this.triggerSelectedlanguagechange_=function(){return r.trigger("selectedlanguagechange")}),t.addEventListener("modechange",this.queueChange_),-1===["metadata","chapters"].indexOf(t.kind)&&t.addEventListener("modechange",this.triggerSelectedlanguagechange_)},r.removeTrack=function(t){e.prototype.removeTrack.call(this,t),t.removeEventListener&&(this.queueChange_&&t.removeEventListener("modechange",this.queueChange_),this.selectedlanguagechange_&&t.removeEventListener("modechange",this.triggerSelectedlanguagechange_))},t}(np),nT=function(){function e(e){void 0===e&&(e=[]),this.trackElements_=[],Object.defineProperty(this,"length",{get:function(){return this.trackElements_.length}});for(var t=0,r=e.length;t<r;t++)this.addTrackElement_(e[t])}var t=e.prototype;return t.addTrackElement_=function(e){var t=this.trackElements_.length;""+t in this||Object.defineProperty(this,t,{get:function(){return this.trackElements_[t]}}),-1===this.trackElements_.indexOf(e)&&this.trackElements_.push(e)},t.getTrackElementByTrack_=function(e){for(var t,r=0,n=this.trackElements_.length;r<n;r++)if(e===this.trackElements_[r].track){t=this.trackElements_[r];break}return t},t.removeTrackElement_=function(e){for(var t=0,r=this.trackElements_.length;t<r;t++)if(e===this.trackElements_[t]){this.trackElements_[t].track&&"function"==typeof this.trackElements_[t].track.off&&this.trackElements_[t].track.off(),"function"==typeof this.trackElements_[t].off&&this.trackElements_[t].off(),this.trackElements_.splice(t,1);break}},e}(),nE=function(){function e(t){e.prototype.setCues_.call(this,t),Object.defineProperty(this,"length",{get:function(){return this.length_}})}var t=e.prototype;return t.setCues_=function(e){var t=this.length||0,r=0,n=e.length;this.cues_=e,this.length_=e.length;var i=function(e){""+e in this||Object.defineProperty(this,""+e,{get:function(){return this.cues_[e]}})};if(t<n)for(r=t;r<n;r++)i.call(this,r)},t.getCueById=function(e){for(var t=null,r=0,n=this.length;r<n;r++){var i=this[r];if(i.id===e){t=i;break}}return t},e}(),nS={alternative:"alternative",captions:"captions",main:"main",sign:"sign",subtitles:"subtitles",commentary:"commentary"},nw={alternative:"alternative",descriptions:"descriptions",main:"main","main-desc":"main-desc",translation:"translation",commentary:"commentary"},nA={subtitles:"subtitles",captions:"captions",descriptions:"descriptions",chapters:"chapters",metadata:"metadata"},nC={disabled:"disabled",hidden:"hidden",showing:"showing"},nI=function(e){function t(t){void 0===t&&(t={}),r=e.call(this)||this;var r,n={id:t.id||"vjs_track_"+rP++,kind:t.kind||"",language:t.language||""},i=t.label||"",o=function(e){Object.defineProperty(h(r),e,{get:function(){return n[e]},set:function(){}})};for(var u in n)o(u);return Object.defineProperty(h(r),"label",{get:function(){return i},set:function(e){e!==i&&(i=e,this.trigger("labelchange"))}}),r}return m(t,e),t}(rz),nO=function(e){var t=["protocol","hostname","port","pathname","search","hash","host"],r=u().createElement("a");r.href=e;for(var n={},o=0;o<t.length;o++)n[t[o]]=r[t[o]];return"http:"===n.protocol&&(n.host=n.host.replace(/:80$/,"")),"https:"===n.protocol&&(n.host=n.host.replace(/:443$/,"")),n.protocol||(n.protocol=i().location.protocol),n.host||(n.host=i().location.host),n},nR=function(e){if(!e.match(/^https?:\/\//)){var t=u().createElement("a");t.href=e,e=t.href}return e},nP=function(e){if("string"==typeof e){var t=/^(\/?)([\s\S]*?)((?:\.{1,2}|[^\/]+?)(\.([^\.\/\?]+)))(?:[\/]*|[\?].*)$/.exec(e);if(t)return t.pop().toLowerCase()}return""},nk=function(e,t){void 0===t&&(t=i().location);var r=nO(e);return(":"===r.protocol?t.protocol:r.protocol)+r.host!==t.protocol+t.host},nD=Object.freeze({__proto__:null,parseUrl:nO,getAbsoluteURL:nR,getFileExtension:nP,isCrossOrigin:nk}),nN=function(e,t){var r=new(i()).WebVTT.Parser(i(),i().vttjs,i().WebVTT.StringDecoder()),n=[];r.oncue=function(e){t.addCue(e)},r.onparsingerror=function(e){n.push(e)},r.onflush=function(){t.trigger({type:"loadeddata",target:t})},r.parse(e),n.length>0&&(i().console&&i().console.groupCollapsed&&i().console.groupCollapsed("Text Track parsing errors for "+t.src),n.forEach(function(e){return t_.error(e)}),i().console&&i().console.groupEnd&&i().console.groupEnd()),r.flush()},nL=function(e,t){var r={uri:e},n=nk(e);n&&(r.cors=n);var o="use-credentials"===t.tech_.crossOrigin();o&&(r.withCredentials=o),b()(r,rG(this,function(e,r,n){if(e)return t_.error(e,r);t.loaded_=!0,"function"!=typeof i().WebVTT?t.tech_&&t.tech_.any(["vttjsloaded","vttjserror"],function(e){if("vttjserror"!==e.type)return nN(n,t);t_.error("vttjs failed to load, stopping trying to process "+t.src)}):nN(n,t)}))},nx=function(e){function t(t){if(void 0===t&&(t={}),!t.tech)throw Error("A tech was not provided.");var r,n=r5(t,{kind:nA[t.kind]||"subtitles",language:t.language||t.srclang||""}),i=nC[n.mode]||"disabled",o=n.default;"metadata"!==n.kind&&"chapters"!==n.kind||(i="hidden"),(r=e.call(this,n)||this).tech_=n.tech,r.cues_=[],r.activeCues_=[],r.preload_=!1!==r.tech_.preloadTextTracks;var u=new nE(r.cues_),l=new nE(r.activeCues_),c=!1;return r.timeupdateHandler=rG(h(r),function(e){void 0===e&&(e={}),this.tech_.isDisposed()||(this.tech_.isReady_&&(this.activeCues=this.activeCues,c&&(this.trigger("cuechange"),c=!1)),"timeupdate"!==e.type&&(this.rvf_=this.tech_.requestVideoFrameCallback(this.timeupdateHandler)))}),r.tech_.one("dispose",function(){r.stopTracking()}),"disabled"!==i&&r.startTracking(),Object.defineProperties(h(r),{default:{get:function(){return o},set:function(){}},mode:{get:function(){return i},set:function(e){nC[e]&&i!==e&&(i=e,this.preload_||"disabled"===i||0!==this.cues.length||nL(this.src,this),this.stopTracking(),"disabled"!==i&&this.startTracking(),this.trigger("modechange"))}},cues:{get:function(){return this.loaded_?u:null},set:function(){}},activeCues:{get:function(){if(!this.loaded_)return null;if(0===this.cues.length)return l;for(var e=this.tech_.currentTime(),t=[],r=0,n=this.cues.length;r<n;r++){var i=this.cues[r];(i.startTime<=e&&i.endTime>=e||i.startTime===i.endTime&&i.startTime<=e&&i.startTime+.5>=e)&&t.push(i)}if(c=!1,t.length!==this.activeCues_.length)c=!0;else for(var o=0;o<t.length;o++)-1===this.activeCues_.indexOf(t[o])&&(c=!0);return this.activeCues_=t,l.setCues_(this.activeCues_),l},set:function(){}}}),n.src?(r.src=n.src,r.preload_||(r.loaded_=!0),(r.preload_||"subtitles"!==n.kind&&"captions"!==n.kind)&&nL(r.src,h(r))):r.loaded_=!0,r}m(t,e);var r=t.prototype;return r.startTracking=function(){this.rvf_=this.tech_.requestVideoFrameCallback(this.timeupdateHandler),this.tech_.on("timeupdate",this.timeupdateHandler)},r.stopTracking=function(){this.rvf_&&(this.tech_.cancelVideoFrameCallback(this.rvf_),this.rvf_=void 0),this.tech_.off("timeupdate",this.timeupdateHandler)},r.addCue=function(e){var t=e;if(i().vttjs&&!(e instanceof i().vttjs.VTTCue)){for(var r in t=new(i()).vttjs.VTTCue(e.startTime,e.endTime,e.text),e)r in t||(t[r]=e[r]);t.id=e.id,t.originalCue_=e}for(var n=this.tech_.textTracks(),o=0;o<n.length;o++)n[o]!==this&&n[o].removeCue(t);this.cues_.push(t),this.cues.setCues_(this.cues_)},r.removeCue=function(e){for(var t=this.cues_.length;t--;){var r=this.cues_[t];if(r===e||r.originalCue_&&r.originalCue_===e){this.cues_.splice(t,1),this.cues.setCues_(this.cues_);break}}},t}(nI);nx.prototype.allowedEvents_={cuechange:"cuechange"};var nj=function(e){function t(t){void 0===t&&(t={});var r,n=r5(t,{kind:nw[t.kind]||""});r=e.call(this,n)||this;var i=!1;return Object.defineProperty(h(r),"enabled",{get:function(){return i},set:function(e){"boolean"==typeof e&&e!==i&&(i=e,this.trigger("enabledchange"))}}),n.enabled&&(r.enabled=n.enabled),r.loaded_=!0,r}return m(t,e),t}(nI),nM=function(e){function t(t){void 0===t&&(t={});var r,n=r5(t,{kind:nS[t.kind]||""});r=e.call(this,n)||this;var i=!1;return Object.defineProperty(h(r),"selected",{get:function(){return i},set:function(e){"boolean"==typeof e&&e!==i&&(i=e,this.trigger("selectedchange"))}}),n.selected&&(r.selected=n.selected),r}return m(t,e),t}(nI),nF=function(e){function t(t){void 0===t&&(t={}),r=e.call(this)||this;var r,n,i=new nx(t);return r.kind=i.kind,r.src=i.src,r.srclang=i.language,r.label=i.label,r.default=i.default,Object.defineProperties(h(r),{readyState:{get:function(){return n}},track:{get:function(){return i}}}),n=0,i.addEventListener("loadeddata",function(){n=2,r.trigger({type:"load",target:h(r)})}),r}return m(t,e),t}(rz);nF.prototype.allowedEvents_={load:"load"},nF.NONE=0,nF.LOADING=1,nF.LOADED=2,nF.ERROR=3;var nB={audio:{ListClass:ny,TrackClass:nj,capitalName:"Audio"},video:{ListClass:nb,TrackClass:nM,capitalName:"Video"},text:{ListClass:n_,TrackClass:nx,capitalName:"Text"}};Object.keys(nB).forEach(function(e){nB[e].getterName=e+"Tracks",nB[e].privateName=e+"Tracks_"});var nU={remoteText:{ListClass:n_,TrackClass:nx,capitalName:"RemoteText",getterName:"remoteTextTracks",privateName:"remoteTextTracks_"},remoteTextEl:{ListClass:nT,TrackClass:nF,capitalName:"RemoteTextTrackEls",getterName:"remoteTextTrackEls",privateName:"remoteTextTrackEls_"}},nq=l({},nB,nU);nU.names=Object.keys(nU),nB.names=Object.keys(nB),nq.names=[].concat(nU.names).concat(nB.names);var nH=function(e){function t(t,r){var n;return void 0===t&&(t={}),void 0===r&&(r=function(){}),t.reportTouchActivity=!1,(n=e.call(this,null,t,r)||this).onDurationChange_=function(e){return n.onDurationChange(e)},n.trackProgress_=function(e){return n.trackProgress(e)},n.trackCurrentTime_=function(e){return n.trackCurrentTime(e)},n.stopTrackingCurrentTime_=function(e){return n.stopTrackingCurrentTime(e)},n.disposeSourceHandler_=function(e){return n.disposeSourceHandler(e)},n.queuedHanders_=new Set,n.hasStarted_=!1,n.on("playing",function(){this.hasStarted_=!0}),n.on("loadstart",function(){this.hasStarted_=!1}),nq.names.forEach(function(e){var r=nq[e];t&&t[r.getterName]&&(n[r.privateName]=t[r.getterName])}),n.featuresProgressEvents||n.manualProgressOn(),n.featuresTimeupdateEvents||n.manualTimeUpdatesOn(),["Text","Audio","Video"].forEach(function(e){!1===t["native"+e+"Tracks"]&&(n["featuresNative"+e+"Tracks"]=!1)}),!1===t.nativeCaptions||!1===t.nativeTextTracks?n.featuresNativeTextTracks=!1:!0!==t.nativeCaptions&&!0!==t.nativeTextTracks||(n.featuresNativeTextTracks=!0),n.featuresNativeTextTracks||n.emulateTextTracks(),n.preloadTextTracks=!1!==t.preloadTextTracks,n.autoRemoteTextTracks_=new nq.text.ListClass,n.initTrackListeners(),t.nativeControlsForTouch||n.emitTapEvents(),n.constructor&&(n.name_=n.constructor.name||"Unknown Tech"),n}m(t,e);var r=t.prototype;return r.triggerSourceset=function(e){var t=this;this.isReady_||this.one("ready",function(){return t.setTimeout(function(){return t.triggerSourceset(e)},1)}),this.trigger({src:e,type:"sourceset"})},r.manualProgressOn=function(){this.on("durationchange",this.onDurationChange_),this.manualProgress=!0,this.one("ready",this.trackProgress_)},r.manualProgressOff=function(){this.manualProgress=!1,this.stopTrackingProgress(),this.off("durationchange",this.onDurationChange_)},r.trackProgress=function(e){this.stopTrackingProgress(),this.progressInterval=this.setInterval(rG(this,function(){var e=this.bufferedPercent();this.bufferedPercent_!==e&&this.trigger("progress"),this.bufferedPercent_=e,1===e&&this.stopTrackingProgress()}),500)},r.onDurationChange=function(e){this.duration_=this.duration()},r.buffered=function(){return no(0,0)},r.bufferedPercent=function(){return na(this.buffered(),this.duration_)},r.stopTrackingProgress=function(){this.clearInterval(this.progressInterval)},r.manualTimeUpdatesOn=function(){this.manualTimeUpdates=!0,this.on("play",this.trackCurrentTime_),this.on("pause",this.stopTrackingCurrentTime_)},r.manualTimeUpdatesOff=function(){this.manualTimeUpdates=!1,this.stopTrackingCurrentTime(),this.off("play",this.trackCurrentTime_),this.off("pause",this.stopTrackingCurrentTime_)},r.trackCurrentTime=function(){this.currentTimeInterval&&this.stopTrackingCurrentTime(),this.currentTimeInterval=this.setInterval(function(){this.trigger({type:"timeupdate",target:this,manuallyTriggered:!0})},250)},r.stopTrackingCurrentTime=function(){this.clearInterval(this.currentTimeInterval),this.trigger({type:"timeupdate",target:this,manuallyTriggered:!0})},r.dispose=function(){this.clearTracks(nB.names),this.manualProgress&&this.manualProgressOff(),this.manualTimeUpdates&&this.manualTimeUpdatesOff(),e.prototype.dispose.call(this)},r.clearTracks=function(e){var t=this;(e=[].concat(e)).forEach(function(e){for(var r=t[e+"Tracks"]()||[],n=r.length;n--;){var i=r[n];"text"===e&&t.removeRemoteTextTrack(i),r.removeTrack(i)}})},r.cleanupAutoTextTracks=function(){for(var e=this.autoRemoteTextTracks_||[],t=e.length;t--;){var r=e[t];this.removeRemoteTextTrack(r)}},r.reset=function(){},r.crossOrigin=function(){},r.setCrossOrigin=function(){},r.error=function(e){return void 0!==e&&(this.error_=new ns(e),this.trigger("error")),this.error_},r.played=function(){return this.hasStarted_?no(0,0):no()},r.play=function(){},r.setScrubbing=function(){},r.scrubbing=function(){},r.setCurrentTime=function(){this.manualTimeUpdates&&this.trigger({type:"timeupdate",target:this,manuallyTriggered:!0})},r.initTrackListeners=function(){var e=this;nB.names.forEach(function(t){var r=nB[t],n=function(){e.trigger(t+"trackchange")},i=e[r.getterName]();i.addEventListener("removetrack",n),i.addEventListener("addtrack",n),e.on("dispose",function(){i.removeEventListener("removetrack",n),i.removeEventListener("addtrack",n)})})},r.addWebVttScript_=function(){var e=this;if(!i().WebVTT){if(u().body.contains(this.el())){if(!this.options_["vtt.js"]&&tI(T())&&Object.keys(T()).length>0)return void this.trigger("vttjsloaded");var t=u().createElement("script");t.src=this.options_["vtt.js"]||"https://vjs.zencdn.net/vttjs/0.14.1/vtt.min.js",t.onload=function(){e.trigger("vttjsloaded")},t.onerror=function(){e.trigger("vttjserror")},this.on("dispose",function(){t.onload=null,t.onerror=null}),i().WebVTT=!0,this.el().parentNode.appendChild(t)}else this.ready(this.addWebVttScript_)}},r.emulateTextTracks=function(){var e=this,t=this.textTracks(),r=this.remoteTextTracks(),n=function(e){return t.addTrack(e.track)},i=function(e){return t.removeTrack(e.track)};r.on("addtrack",n),r.on("removetrack",i),this.addWebVttScript_();var o=function(){return e.trigger("texttrackchange")},u=function(){o();for(var e=0;e<t.length;e++){var r=t[e];r.removeEventListener("cuechange",o),"showing"===r.mode&&r.addEventListener("cuechange",o)}};u(),t.addEventListener("change",u),t.addEventListener("addtrack",u),t.addEventListener("removetrack",u),this.on("dispose",function(){r.off("addtrack",n),r.off("removetrack",i),t.removeEventListener("change",u),t.removeEventListener("addtrack",u),t.removeEventListener("removetrack",u);for(var e=0;e<t.length;e++)t[e].removeEventListener("cuechange",o)})},r.addTextTrack=function(e,t,r){var n,i,o;if(!e)throw Error("TextTrack kind is required but was not provided");return void 0===n&&(n={}),i=this.textTracks(),n.kind=e,t&&(n.label=t),r&&(n.language=r),n.tech=this,o=new nq.text.TrackClass(n),i.addTrack(o),o},r.createRemoteTextTrack=function(e){var t=r5(e,{tech:this});return new nU.remoteTextEl.TrackClass(t)},r.addRemoteTextTrack=function(e,t){var r=this;void 0===e&&(e={});var n=this.createRemoteTextTrack(e);return!0!==t&&!1!==t&&(t_.warn('Calling addRemoteTextTrack without explicitly setting the "manualCleanup" parameter to `true` is deprecated and default to `false` in future version of video.js'),t=!0),this.remoteTextTrackEls().addTrackElement_(n),this.remoteTextTracks().addTrack(n.track),!0!==t&&this.ready(function(){return r.autoRemoteTextTracks_.addTrack(n.track)}),n},r.removeRemoteTextTrack=function(e){var t=this.remoteTextTrackEls().getTrackElementByTrack_(e);this.remoteTextTrackEls().removeTrackElement_(t),this.remoteTextTracks().removeTrack(e),this.autoRemoteTextTracks_.removeTrack(e)},r.getVideoPlaybackQuality=function(){return{}},r.requestPictureInPicture=function(){var e=this.options_.Promise||i().Promise;if(e)return e.reject()},r.disablePictureInPicture=function(){return!0},r.setDisablePictureInPicture=function(){},r.requestVideoFrameCallback=function(e){var t=this,r=rP++;return!this.isReady_||this.paused()?(this.queuedHanders_.add(r),this.one("playing",function(){t.queuedHanders_.has(r)&&(t.queuedHanders_.delete(r),e())})):this.requestNamedAnimationFrame(r,e),r},r.cancelVideoFrameCallback=function(e){this.queuedHanders_.has(e)?this.queuedHanders_.delete(e):this.cancelNamedAnimationFrame(e)},r.setPoster=function(){},r.playsinline=function(){},r.setPlaysinline=function(){},r.overrideNativeAudioTracks=function(){},r.overrideNativeVideoTracks=function(){},r.canPlayType=function(){return""},t.canPlayType=function(){return""},t.canPlaySource=function(e,r){return t.canPlayType(e.type)},t.isTech=function(e){return e.prototype instanceof t||e instanceof t||e===t},t.registerTech=function(e,r){if(t.techs_||(t.techs_={}),!t.isTech(r))throw Error("Tech "+e+" must be a Tech");if(!t.canPlayType)throw Error("Techs must have a static canPlayType method on them");if(!t.canPlaySource)throw Error("Techs must have a static canPlaySource method on them");return e=r8(e),t.techs_[e]=r,t.techs_[r6(e)]=r,"Tech"!==e&&t.defaultTechOrder_.push(e),r},t.getTech=function(e){if(e)return t.techs_&&t.techs_[e]?t.techs_[e]:(e=r8(e),i()&&i().videojs&&i().videojs[e]?(t_.warn("The "+e+" tech was added to the videojs object when it should be registered using videojs.registerTech(name, tech)"),i().videojs[e]):void 0)},t}(nr);nq.names.forEach(function(e){var t=nq[e];nH.prototype[t.getterName]=function(){return this[t.privateName]=this[t.privateName]||new t.ListClass,this[t.privateName]}}),nH.prototype.featuresVolumeControl=!0,nH.prototype.featuresMuteControl=!0,nH.prototype.featuresFullscreenResize=!1,nH.prototype.featuresPlaybackRate=!1,nH.prototype.featuresProgressEvents=!1,nH.prototype.featuresSourceset=!1,nH.prototype.featuresTimeupdateEvents=!1,nH.prototype.featuresNativeTextTracks=!1,nH.prototype.featuresVideoFrameCallback=!1,nH.withSourceHandlers=function(e){e.registerSourceHandler=function(t,r){var n=e.sourceHandlers;n||(n=e.sourceHandlers=[]),void 0===r&&(r=n.length),n.splice(r,0,t)},e.canPlayType=function(t){for(var r,n=e.sourceHandlers||[],i=0;i<n.length;i++)if(r=n[i].canPlayType(t))return r;return""},e.selectSourceHandler=function(t,r){for(var n=e.sourceHandlers||[],i=0;i<n.length;i++)if(n[i].canHandleSource(t,r))return n[i];return null},e.canPlaySource=function(t,r){var n=e.selectSourceHandler(t,r);return n?n.canHandleSource(t,r):""},["seekable","seeking","duration"].forEach(function(e){var t=this[e];"function"==typeof t&&(this[e]=function(){return this.sourceHandler_&&this.sourceHandler_[e]?this.sourceHandler_[e].apply(this.sourceHandler_,arguments):t.apply(this,arguments)})},e.prototype),e.prototype.setSource=function(t){var r=e.selectSourceHandler(t,this.options_);r||(e.nativeSourceHandler?r=e.nativeSourceHandler:t_.error("No source handler found for the current source.")),this.disposeSourceHandler(),this.off("dispose",this.disposeSourceHandler_),r!==e.nativeSourceHandler&&(this.currentSource_=t),this.sourceHandler_=r.handleSource(t,this,this.options_),this.one("dispose",this.disposeSourceHandler_)},e.prototype.disposeSourceHandler=function(){this.currentSource_&&(this.clearTracks(["audio","video"]),this.currentSource_=null),this.cleanupAutoTextTracks(),this.sourceHandler_&&(this.sourceHandler_.dispose&&this.sourceHandler_.dispose(),this.sourceHandler_=null)}},nr.registerComponent("Tech",nH),nH.registerTech("Tech",nH),nH.defaultTechOrder_=[];var nV={},nG={},nY={};function nz(e,t,r,n){void 0===n&&(n=null);var i="call"+r8(r),o=e.reduce(nQ(i),n),u=o===nY,l=u?null:t[r](o);return function(e,t,r,n){for(var i=e.length-1;i>=0;i--){var o=e[i];o[t]&&o[t](n,r)}}(e,r,l,u),l}var nK={buffered:1,currentTime:1,duration:1,muted:1,played:1,paused:1,seekable:1,volume:1,ended:1},nW={setCurrentTime:1,setMuted:1,setVolume:1},nX={play:1,pause:1};function nQ(e){return function(t,r){return t===nY?nY:r[e]?r[e](t):t}}var n$={opus:"video/ogg",ogv:"video/ogg",mp4:"video/mp4",mov:"video/mp4",m4v:"video/mp4",mkv:"video/x-matroska",m4a:"audio/mp4",mp3:"audio/mpeg",aac:"audio/aac",caf:"audio/x-caf",flac:"audio/flac",oga:"audio/ogg",wav:"audio/wav",m3u8:"application/x-mpegURL",mpd:"application/dash+xml",jpg:"image/jpeg",jpeg:"image/jpeg",gif:"image/gif",png:"image/png",svg:"image/svg+xml",webp:"image/webp"},nJ=function(e){return void 0===e&&(e=""),n$[nP(e).toLowerCase()]||""},nZ=function e(t){if(Array.isArray(t)){var r=[];t.forEach(function(t){Array.isArray(t=e(t))?r=r.concat(t):tC(t)&&r.push(t)}),t=r}else t="string"==typeof t&&t.trim()?[n0({src:t})]:tC(t)&&"string"==typeof t.src&&t.src&&t.src.trim()?[n0(t)]:[];return t};function n0(e){if(!e.type){var t=nJ(e.src);t&&(e.type=t)}return e}var n1=function(e){function t(t,r,n){var i,o=r5({createEl:!1},r);if(i=e.call(this,t,o,n)||this,r.playerOptions.sources&&0!==r.playerOptions.sources.length)t.src(r.playerOptions.sources);else for(var u=0,l=r.playerOptions.techOrder;u<l.length;u++){var c=r8(l[u]),f=nH.getTech(c);if(c||(f=nr.getComponent(c)),f&&f.isSupported()){t.loadTech_(c);break}}return i}return m(t,e),t}(nr);nr.registerComponent("MediaLoader",n1);var n2=function(e){function t(t,r){var n;return(n=e.call(this,t,r)||this).options_.controlText&&n.controlText(n.options_.controlText),n.handleMouseOver_=function(e){return n.handleMouseOver(e)},n.handleMouseOut_=function(e){return n.handleMouseOut(e)},n.handleClick_=function(e){return n.handleClick(e)},n.handleKeyDown_=function(e){return n.handleKeyDown(e)},n.emitTapEvents(),n.enable(),n}m(t,e);var r=t.prototype;return r.createEl=function(e,t,r){void 0===e&&(e="div"),void 0===t&&(t={}),void 0===r&&(r={}),t=tA({className:this.buildCSSClass(),tabIndex:0},t),"button"===e&&t_.error("Creating a ClickableComponent with an HTML element of "+e+" is not supported; use a Button instead."),r=tA({role:"button"},r),this.tabIndex_=t.tabIndex;var n=t8(e,t,r);return n.appendChild(t8("span",{className:"vjs-icon-placeholder"},{"aria-hidden":!0})),this.createControlTextEl(n),n},r.dispose=function(){this.controlTextEl_=null,e.prototype.dispose.call(this)},r.createControlTextEl=function(e){return this.controlTextEl_=t8("span",{className:"vjs-control-text"},{"aria-live":"polite"}),e&&e.appendChild(this.controlTextEl_),this.controlText(this.controlText_,e),this.controlTextEl_},r.controlText=function(e,t){if(void 0===t&&(t=this.el()),void 0===e)return this.controlText_||"Need Text";var r=this.localize(e);this.controlText_=e,t5(this.controlTextEl_,r),this.nonIconControl||this.player_.options_.noUITitleAttributes||t.setAttribute("title",r)},r.buildCSSClass=function(){return"vjs-control vjs-button "+e.prototype.buildCSSClass.call(this)},r.enable=function(){this.enabled_||(this.enabled_=!0,this.removeClass("vjs-disabled"),this.el_.setAttribute("aria-disabled","false"),void 0!==this.tabIndex_&&this.el_.setAttribute("tabIndex",this.tabIndex_),this.on(["tap","click"],this.handleClick_),this.on("keydown",this.handleKeyDown_))},r.disable=function(){this.enabled_=!1,this.addClass("vjs-disabled"),this.el_.setAttribute("aria-disabled","true"),void 0!==this.tabIndex_&&this.el_.removeAttribute("tabIndex"),this.off("mouseover",this.handleMouseOver_),this.off("mouseout",this.handleMouseOut_),this.off(["tap","click"],this.handleClick_),this.off("keydown",this.handleKeyDown_)},r.handleLanguagechange=function(){this.controlText(this.controlText_)},r.handleClick=function(e){this.options_.clickHandler&&this.options_.clickHandler.call(this,arguments)},r.handleKeyDown=function(t){d().isEventKey(t,"Space")||d().isEventKey(t,"Enter")?(t.preventDefault(),t.stopPropagation(),this.trigger("click")):e.prototype.handleKeyDown.call(this,t)},t}(nr);nr.registerComponent("ClickableComponent",n2);var n3=function(e){function t(t,r){var n;return(n=e.call(this,t,r)||this).update(),n.update_=function(e){return n.update(e)},t.on("posterchange",n.update_),n}m(t,e);var r=t.prototype;return r.dispose=function(){this.player().off("posterchange",this.update_),e.prototype.dispose.call(this)},r.createEl=function(){return t8("div",{className:"vjs-poster",tabIndex:-1})},r.update=function(e){var t=this.player().poster();this.setSrc(t),t?this.show():this.hide()},r.setSrc=function(e){var t="";e&&(t='url("'+e+'")'),this.el_.style.backgroundImage=t},r.handleClick=function(e){if(this.player_.controls()){var t=this.player_.usingPlugin("eme")&&this.player_.eme.sessions&&this.player_.eme.sessions.length>0;!this.player_.tech(!0)||(tY||tH)&&t||this.player_.tech(!0).focus(),this.player_.paused()?nc(this.player_.play()):this.player_.pause()}},t}(n2);nr.registerComponent("PosterImage",n3);var n4="#222",n6={monospace:"monospace",sansSerif:"sans-serif",serif:"serif",monospaceSansSerif:'"Andale Mono", "Lucida Console", monospace',monospaceSerif:'"Courier New", monospace',proportionalSansSerif:"sans-serif",proportionalSerif:"serif",casual:'"Comic Sans MS", Impact, fantasy',script:'"Monotype Corsiva", cursive',smallcaps:'"Andale Mono", "Lucida Console", monospace, sans-serif'};function n8(e,t){var r;if(4===e.length)r=e[1]+e[1]+e[2]+e[2]+e[3]+e[3];else{if(7!==e.length)throw Error("Invalid color code provided, "+e+"; must be formatted as e.g. #f0e or #f604e2.");r=e.slice(1)}return"rgba("+parseInt(r.slice(0,2),16)+","+parseInt(r.slice(2,4),16)+","+parseInt(r.slice(4,6),16)+","+t+")"}function n5(e,t,r){try{e.style[t]=r}catch(e){return}}var n9=function(e){function t(t,r,n){o=e.call(this,t,r,n)||this;var o,u=function(e){return o.updateDisplay(e)};return t.on("loadstart",function(e){return o.toggleDisplay(e)}),t.on("texttrackchange",u),t.on("loadedmetadata",function(e){return o.preselectTrack(e)}),t.ready(rG(h(o),function(){if(t.tech_&&t.tech_.featuresNativeTextTracks)this.hide();else{t.on("fullscreenchange",u),t.on("playerresize",u),i().addEventListener("orientationchange",u),t.on("dispose",function(){return i().removeEventListener("orientationchange",u)});for(var e=this.options_.playerOptions.tracks||[],r=0;r<e.length;r++)this.player_.addRemoteTextTrack(e[r],!0);this.preselectTrack()}})),o}m(t,e);var r=t.prototype;return r.preselectTrack=function(){for(var e,t,r,n={captions:1,subtitles:1},i=this.player_.textTracks(),o=this.player_.cache_.selectedLanguage,u=0;u<i.length;u++){var l=i[u];o&&o.enabled&&o.language&&o.language===l.language&&l.kind in n?l.kind===o.kind?r=l:r||(r=l):o&&!o.enabled?(r=null,e=null,t=null):l.default&&("descriptions"!==l.kind||e?l.kind in n&&!t&&(t=l):e=l)}r?r.mode="showing":t?t.mode="showing":e&&(e.mode="showing")},r.toggleDisplay=function(){this.player_.tech_&&this.player_.tech_.featuresNativeTextTracks?this.hide():this.show()},r.createEl=function(){return e.prototype.createEl.call(this,"div",{className:"vjs-text-track-display"},{translate:"yes","aria-live":"off","aria-atomic":"true"})},r.clearDisplay=function(){"function"==typeof i().WebVTT&&i().WebVTT.processCues(i(),[],this.el_)},r.updateDisplay=function(){var e=this.player_.textTracks(),t=this.options_.allowMultipleShowingTracks;if(this.clearDisplay(),t){for(var r=[],n=0;n<e.length;++n){var i=e[n];"showing"===i.mode&&r.push(i)}this.updateForTrack(r)}else{for(var o=null,u=null,l=e.length;l--;){var c=e[l];"showing"===c.mode&&("descriptions"===c.kind?o=c:u=c)}u?("off"!==this.getAttribute("aria-live")&&this.setAttribute("aria-live","off"),this.updateForTrack(u)):o&&("assertive"!==this.getAttribute("aria-live")&&this.setAttribute("aria-live","assertive"),this.updateForTrack(o))}},r.updateDisplayState=function(e){for(var t=this.player_.textTrackSettings.getValues(),r=e.activeCues,n=r.length;n--;){var o=r[n];if(o){var u=o.displayState;if(t.color&&(u.firstChild.style.color=t.color),t.textOpacity&&n5(u.firstChild,"color",n8(t.color||"#fff",t.textOpacity)),t.backgroundColor&&(u.firstChild.style.backgroundColor=t.backgroundColor),t.backgroundOpacity&&n5(u.firstChild,"backgroundColor",n8(t.backgroundColor||"#000",t.backgroundOpacity)),t.windowColor&&(t.windowOpacity?n5(u,"backgroundColor",n8(t.windowColor,t.windowOpacity)):u.style.backgroundColor=t.windowColor),t.edgeStyle&&("dropshadow"===t.edgeStyle?u.firstChild.style.textShadow="2px 2px 3px #222, 2px 2px 4px #222, 2px 2px 5px "+n4:"raised"===t.edgeStyle?u.firstChild.style.textShadow="1px 1px #222, 2px 2px #222, 3px 3px "+n4:"depressed"===t.edgeStyle?u.firstChild.style.textShadow="1px 1px #ccc, 0 1px #ccc, -1px -1px #222, 0 -1px "+n4:"uniform"===t.edgeStyle&&(u.firstChild.style.textShadow="0 0 4px #222, 0 0 4px #222, 0 0 4px #222, 0 0 4px "+n4)),t.fontPercent&&1!==t.fontPercent){var l=i().parseFloat(u.style.fontSize);u.style.fontSize=l*t.fontPercent+"px",u.style.height="auto",u.style.top="auto"}t.fontFamily&&"default"!==t.fontFamily&&("small-caps"===t.fontFamily?u.firstChild.style.fontVariant="small-caps":u.firstChild.style.fontFamily=n6[t.fontFamily])}}},r.updateForTrack=function(e){if(Array.isArray(e)||(e=[e]),"function"==typeof i().WebVTT&&!e.every(function(e){return!e.activeCues})){for(var t=[],r=0;r<e.length;++r)for(var n=e[r],o=0;o<n.activeCues.length;++o)t.push(n.activeCues[o]);i().WebVTT.processCues(i(),t,this.el_);for(var u=0;u<e.length;++u){for(var l=e[u],c=0;c<l.activeCues.length;++c){var f=l.activeCues[c].displayState;re(f,"vjs-text-track-cue"),re(f,"vjs-text-track-cue-"+(l.language?l.language:u)),l.language&&ra(f,"lang",l.language)}this.player_.textTrackSettings&&this.updateDisplayState(l)}}},t}(nr);nr.registerComponent("TextTrackDisplay",n9);var n7=function(e){function t(){return e.apply(this,arguments)||this}return m(t,e),t.prototype.createEl=function(){var t=this.player_.isAudio(),r=this.localize(t?"Audio Player":"Video Player"),n=t8("span",{className:"vjs-control-text",textContent:this.localize("{1} is loading.",[r])}),i=e.prototype.createEl.call(this,"div",{className:"vjs-loading-spinner",dir:"ltr"});return i.appendChild(n),i},t}(nr);nr.registerComponent("LoadingSpinner",n7);var ie=function(e){function t(){return e.apply(this,arguments)||this}m(t,e);var r=t.prototype;return r.createEl=function(e,t,r){void 0===t&&(t={}),void 0===r&&(r={});var n=t8("button",t=tA({className:this.buildCSSClass()},t),r=tA({type:"button"},r));return n.appendChild(t8("span",{className:"vjs-icon-placeholder"},{"aria-hidden":!0})),this.createControlTextEl(n),n},r.addChild=function(e,t){void 0===t&&(t={});var r=this.constructor.name;return t_.warn("Adding an actionable (user controllable) child to a Button ("+r+") is not supported; use a ClickableComponent instead."),nr.prototype.addChild.call(this,e,t)},r.enable=function(){e.prototype.enable.call(this),this.el_.removeAttribute("disabled")},r.disable=function(){e.prototype.disable.call(this),this.el_.setAttribute("disabled","disabled")},r.handleKeyDown=function(t){d().isEventKey(t,"Space")||d().isEventKey(t,"Enter")?t.stopPropagation():e.prototype.handleKeyDown.call(this,t)},t}(n2);nr.registerComponent("Button",ie);var it=function(e){function t(t,r){var n;return(n=e.call(this,t,r)||this).mouseused_=!1,n.on("mousedown",function(e){return n.handleMouseDown(e)}),n}m(t,e);var r=t.prototype;return r.buildCSSClass=function(){return"vjs-big-play-button"},r.handleClick=function(e){var t=this.player_.play();if(this.mouseused_&&e.clientX&&e.clientY){var r=this.player_.usingPlugin("eme")&&this.player_.eme.sessions&&this.player_.eme.sessions.length>0;return nc(t),void(!this.player_.tech(!0)||(tY||tH)&&r||this.player_.tech(!0).focus())}var n=this.player_.getChild("controlBar"),i=n&&n.getChild("playToggle");if(i){var o=function(){return i.focus()};nl(t)?t.then(o,function(){}):this.setTimeout(o,1)}else this.player_.tech(!0).focus()},r.handleKeyDown=function(t){this.mouseused_=!1,e.prototype.handleKeyDown.call(this,t)},r.handleMouseDown=function(e){this.mouseused_=!0},t}(ie);it.prototype.controlText_="Play Video",nr.registerComponent("BigPlayButton",it);var ir=function(e){function t(t,r){var n;return(n=e.call(this,t,r)||this).controlText(r&&r.controlText||n.localize("Close")),n}m(t,e);var r=t.prototype;return r.buildCSSClass=function(){return"vjs-close-button "+e.prototype.buildCSSClass.call(this)},r.handleClick=function(e){this.trigger({type:"close",bubbles:!1})},r.handleKeyDown=function(t){d().isEventKey(t,"Esc")?(t.preventDefault(),t.stopPropagation(),this.trigger("click")):e.prototype.handleKeyDown.call(this,t)},t}(ie);nr.registerComponent("CloseButton",ir);var ii=function(e){function t(t,r){var n;return void 0===r&&(r={}),n=e.call(this,t,r)||this,r.replay=void 0===r.replay||r.replay,n.on(t,"play",function(e){return n.handlePlay(e)}),n.on(t,"pause",function(e){return n.handlePause(e)}),r.replay&&n.on(t,"ended",function(e){return n.handleEnded(e)}),n}m(t,e);var r=t.prototype;return r.buildCSSClass=function(){return"vjs-play-control "+e.prototype.buildCSSClass.call(this)},r.handleClick=function(e){this.player_.paused()?nc(this.player_.play()):this.player_.pause()},r.handleSeeked=function(e){this.removeClass("vjs-ended"),this.player_.paused()?this.handlePause(e):this.handlePlay(e)},r.handlePlay=function(e){this.removeClass("vjs-ended"),this.removeClass("vjs-paused"),this.addClass("vjs-playing"),this.controlText("Pause")},r.handlePause=function(e){this.removeClass("vjs-playing"),this.addClass("vjs-paused"),this.controlText("Play")},r.handleEnded=function(e){var t=this;this.removeClass("vjs-playing"),this.addClass("vjs-ended"),this.controlText("Replay"),this.one(this.player_,"seeked",function(e){return t.handleSeeked(e)})},t}(ie);ii.prototype.controlText_="Play",nr.registerComponent("PlayToggle",ii);var io=function(e,t){var r=Math.floor((e=e<0?0:e)%60),n=Math.floor(e/60%60),i=Math.floor(e/3600),o=Math.floor(t/60%60),u=Math.floor(t/3600);return(isNaN(e)||e===1/0)&&(i=n=r="-"),(i=i>0||u>0?i+":":"")+(n=((i||o>=10)&&n<10?"0"+n:n)+":")+(r<10?"0"+r:r)},ia=io;function is(e,t){return void 0===t&&(t=e),ia(e,t)}var iu=function(e){function t(t,r){var n;return(n=e.call(this,t,r)||this).on(t,["timeupdate","ended"],function(e){return n.updateContent(e)}),n.updateTextNode_(),n}m(t,e);var r=t.prototype;return r.createEl=function(){var t=this.buildCSSClass(),r=e.prototype.createEl.call(this,"div",{className:t+" vjs-time-control vjs-control"}),n=t8("span",{className:"vjs-control-text",textContent:this.localize(this.labelText_)+"\xa0"},{role:"presentation"});return r.appendChild(n),this.contentEl_=t8("span",{className:t+"-display"},{"aria-live":"off",role:"presentation"}),r.appendChild(this.contentEl_),r},r.dispose=function(){this.contentEl_=null,this.textNode_=null,e.prototype.dispose.call(this)},r.updateTextNode_=function(e){var t=this;void 0===e&&(e=0),e=is(e),this.formattedTime_!==e&&(this.formattedTime_=e,this.requestNamedAnimationFrame("TimeDisplay#updateTextNode_",function(){if(t.contentEl_){var e=t.textNode_;e&&t.contentEl_.firstChild!==e&&(e=null,t_.warn("TimeDisplay#updateTextnode_: Prevented replacement of text node element since it was no longer a child of this node. Appending a new node instead.")),t.textNode_=u().createTextNode(t.formattedTime_),t.textNode_&&(e?t.contentEl_.replaceChild(t.textNode_,e):t.contentEl_.appendChild(t.textNode_))}}))},r.updateContent=function(e){},t}(nr);iu.prototype.labelText_="Time",iu.prototype.controlText_="Time",nr.registerComponent("TimeDisplay",iu);var il=function(e){function t(){return e.apply(this,arguments)||this}m(t,e);var r=t.prototype;return r.buildCSSClass=function(){return"vjs-current-time"},r.updateContent=function(e){var t;t=this.player_.ended()?this.player_.duration():this.player_.scrubbing()?this.player_.getCache().currentTime:this.player_.currentTime(),this.updateTextNode_(t)},t}(iu);il.prototype.labelText_="Current Time",il.prototype.controlText_="Current Time",nr.registerComponent("CurrentTimeDisplay",il);var ic=function(e){function t(t,r){var n,i=function(e){return n.updateContent(e)};return(n=e.call(this,t,r)||this).on(t,"durationchange",i),n.on(t,"loadstart",i),n.on(t,"loadedmetadata",i),n}m(t,e);var r=t.prototype;return r.buildCSSClass=function(){return"vjs-duration"},r.updateContent=function(e){var t=this.player_.duration();this.updateTextNode_(t)},t}(iu);ic.prototype.labelText_="Duration",ic.prototype.controlText_="Duration",nr.registerComponent("DurationDisplay",ic);var id=function(e){function t(){return e.apply(this,arguments)||this}return m(t,e),t.prototype.createEl=function(){var t=e.prototype.createEl.call(this,"div",{className:"vjs-time-control vjs-time-divider"},{"aria-hidden":!0}),r=e.prototype.createEl.call(this,"div"),n=e.prototype.createEl.call(this,"span",{textContent:"/"});return r.appendChild(n),t.appendChild(r),t},t}(nr);nr.registerComponent("TimeDivider",id);var ih=function(e){function t(t,r){var n;return(n=e.call(this,t,r)||this).on(t,"durationchange",function(e){return n.updateContent(e)}),n}m(t,e);var r=t.prototype;return r.buildCSSClass=function(){return"vjs-remaining-time"},r.createEl=function(){var t=e.prototype.createEl.call(this);return!1!==this.options_.displayNegative&&t.insertBefore(t8("span",{},{"aria-hidden":!0},"-"),this.contentEl_),t},r.updateContent=function(e){var t;"number"==typeof this.player_.duration()&&(t=this.player_.ended()?0:this.player_.remainingTimeDisplay?this.player_.remainingTimeDisplay():this.player_.remainingTime(),this.updateTextNode_(t))},t}(iu);ih.prototype.labelText_="Remaining Time",ih.prototype.controlText_="Remaining Time",nr.registerComponent("RemainingTimeDisplay",ih);var ip=function(e){function t(t,r){var n;return(n=e.call(this,t,r)||this).updateShowing(),n.on(n.player(),"durationchange",function(e){return n.updateShowing(e)}),n}m(t,e);var r=t.prototype;return r.createEl=function(){var t=e.prototype.createEl.call(this,"div",{className:"vjs-live-control vjs-control"});return this.contentEl_=t8("div",{className:"vjs-live-display"},{"aria-live":"off"}),this.contentEl_.appendChild(t8("span",{className:"vjs-control-text",textContent:this.localize("Stream Type")+"\xa0"})),this.contentEl_.appendChild(u().createTextNode(this.localize("LIVE"))),t.appendChild(this.contentEl_),t},r.dispose=function(){this.contentEl_=null,e.prototype.dispose.call(this)},r.updateShowing=function(e){this.player().duration()===1/0?this.show():this.hide()},t}(nr);nr.registerComponent("LiveDisplay",ip);var im=function(e){function t(t,r){var n;return(n=e.call(this,t,r)||this).updateLiveEdgeStatus(),n.player_.liveTracker&&(n.updateLiveEdgeStatusHandler_=function(e){return n.updateLiveEdgeStatus(e)},n.on(n.player_.liveTracker,"liveedgechange",n.updateLiveEdgeStatusHandler_)),n}m(t,e);var r=t.prototype;return r.createEl=function(){var t=e.prototype.createEl.call(this,"button",{className:"vjs-seek-to-live-control vjs-control"});return this.textEl_=t8("span",{className:"vjs-seek-to-live-text",textContent:this.localize("LIVE")},{"aria-hidden":"true"}),t.appendChild(this.textEl_),t},r.updateLiveEdgeStatus=function(){!this.player_.liveTracker||this.player_.liveTracker.atLiveEdge()?(this.setAttribute("aria-disabled",!0),this.addClass("vjs-at-live-edge"),this.controlText("Seek to live, currently playing live")):(this.setAttribute("aria-disabled",!1),this.removeClass("vjs-at-live-edge"),this.controlText("Seek to live, currently behind live"))},r.handleClick=function(){this.player_.liveTracker.seekToLiveEdge()},r.dispose=function(){this.player_.liveTracker&&this.off(this.player_.liveTracker,"liveedgechange",this.updateLiveEdgeStatusHandler_),this.textEl_=null,e.prototype.dispose.call(this)},t}(ie);im.prototype.controlText_="Seek to live, currently playing live",nr.registerComponent("SeekToLive",im);var ig=function(e,t,r){return Math.min(r,Math.max(t,isNaN(e=Number(e))?t:e))},iy=function(e){function t(t,r){var n;return(n=e.call(this,t,r)||this).handleMouseDown_=function(e){return n.handleMouseDown(e)},n.handleMouseUp_=function(e){return n.handleMouseUp(e)},n.handleKeyDown_=function(e){return n.handleKeyDown(e)},n.handleClick_=function(e){return n.handleClick(e)},n.handleMouseMove_=function(e){return n.handleMouseMove(e)},n.update_=function(e){return n.update(e)},n.bar=n.getChild(n.options_.barName),n.vertical(!!n.options_.vertical),n.enable(),n}m(t,e);var r=t.prototype;return r.enabled=function(){return this.enabled_},r.enable=function(){this.enabled()||(this.on("mousedown",this.handleMouseDown_),this.on("touchstart",this.handleMouseDown_),this.on("keydown",this.handleKeyDown_),this.on("click",this.handleClick_),this.on(this.player_,"controlsvisible",this.update),this.playerEvent&&this.on(this.player_,this.playerEvent,this.update),this.removeClass("disabled"),this.setAttribute("tabindex",0),this.enabled_=!0)},r.disable=function(){if(this.enabled()){var e=this.bar.el_.ownerDocument;this.off("mousedown",this.handleMouseDown_),this.off("touchstart",this.handleMouseDown_),this.off("keydown",this.handleKeyDown_),this.off("click",this.handleClick_),this.off(this.player_,"controlsvisible",this.update_),this.off(e,"mousemove",this.handleMouseMove_),this.off(e,"mouseup",this.handleMouseUp_),this.off(e,"touchmove",this.handleMouseMove_),this.off(e,"touchend",this.handleMouseUp_),this.removeAttribute("tabindex"),this.addClass("disabled"),this.playerEvent&&this.off(this.player_,this.playerEvent,this.update),this.enabled_=!1}},r.createEl=function(t,r,n){return void 0===r&&(r={}),void 0===n&&(n={}),r.className=r.className+" vjs-slider",r=tA({tabIndex:0},r),n=tA({role:"slider","aria-valuenow":0,"aria-valuemin":0,"aria-valuemax":100,tabIndex:0},n),e.prototype.createEl.call(this,t,r,n)},r.handleMouseDown=function(e){var t=this.bar.el_.ownerDocument;"mousedown"===e.type&&e.preventDefault(),"touchstart"!==e.type||tV||e.preventDefault(),ru(),this.addClass("vjs-sliding"),this.trigger("slideractive"),this.on(t,"mousemove",this.handleMouseMove_),this.on(t,"mouseup",this.handleMouseUp_),this.on(t,"touchmove",this.handleMouseMove_),this.on(t,"touchend",this.handleMouseUp_),this.handleMouseMove(e,!0)},r.handleMouseMove=function(e){},r.handleMouseUp=function(){var e=this.bar.el_.ownerDocument;rl(),this.removeClass("vjs-sliding"),this.trigger("sliderinactive"),this.off(e,"mousemove",this.handleMouseMove_),this.off(e,"mouseup",this.handleMouseUp_),this.off(e,"touchmove",this.handleMouseMove_),this.off(e,"touchend",this.handleMouseUp_),this.update()},r.update=function(){var e=this;if(this.el_&&this.bar){var t=this.getProgress();return t===this.progress_||(this.progress_=t,this.requestNamedAnimationFrame("Slider#update",function(){var r=e.vertical()?"height":"width";e.bar.el().style[r]=(100*t).toFixed(2)+"%"})),t}},r.getProgress=function(){return Number(ig(this.getPercent(),0,1).toFixed(4))},r.calculateDistance=function(e){var t=rd(this.el_,e);return this.vertical()?t.y:t.x},r.handleKeyDown=function(t){d().isEventKey(t,"Left")||d().isEventKey(t,"Down")?(t.preventDefault(),t.stopPropagation(),this.stepBack()):d().isEventKey(t,"Right")||d().isEventKey(t,"Up")?(t.preventDefault(),t.stopPropagation(),this.stepForward()):e.prototype.handleKeyDown.call(this,t)},r.handleClick=function(e){e.stopPropagation(),e.preventDefault()},r.vertical=function(e){if(void 0===e)return this.vertical_||!1;this.vertical_=!!e,this.vertical_?this.addClass("vjs-slider-vertical"):this.addClass("vjs-slider-horizontal")},t}(nr);nr.registerComponent("Slider",iy);var iv=function(e,t){return ig(e/t*100,0,100).toFixed(2)+"%"},ib=function(e){function t(t,r){var n;return(n=e.call(this,t,r)||this).partEls_=[],n.on(t,"progress",function(e){return n.update(e)}),n}m(t,e);var r=t.prototype;return r.createEl=function(){var t=e.prototype.createEl.call(this,"div",{className:"vjs-load-progress"}),r=t8("span",{className:"vjs-control-text"}),n=t8("span",{textContent:this.localize("Loaded")}),i=u().createTextNode(": ");return this.percentageEl_=t8("span",{className:"vjs-control-text-loaded-percentage",textContent:"0%"}),t.appendChild(r),r.appendChild(n),r.appendChild(i),r.appendChild(this.percentageEl_),t},r.dispose=function(){this.partEls_=null,this.percentageEl_=null,e.prototype.dispose.call(this)},r.update=function(e){var t=this;this.requestNamedAnimationFrame("LoadProgressBar#update",function(){var e=t.player_.liveTracker,r=t.player_.buffered(),n=e&&e.isLive()?e.seekableEnd():t.player_.duration(),i=t.player_.bufferedEnd(),o=t.partEls_,u=iv(i,n);t.percent_!==u&&(t.el_.style.width=u,t5(t.percentageEl_,u),t.percent_=u);for(var l=0;l<r.length;l++){var c=r.start(l),f=r.end(l),d=o[l];d||(d=t.el_.appendChild(t8()),o[l]=d),d.dataset.start===c&&d.dataset.end===f||(d.dataset.start=c,d.dataset.end=f,d.style.left=iv(c,i),d.style.width=iv(f-c,i))}for(var h=o.length;h>r.length;h--)t.el_.removeChild(o[h-1]);o.length=r.length})},t}(nr);nr.registerComponent("LoadProgressBar",ib);var i_=function(e){function t(t,r){var n;return(n=e.call(this,t,r)||this).update=rY(rG(h(n),n.update),30),n}m(t,e);var r=t.prototype;return r.createEl=function(){return e.prototype.createEl.call(this,"div",{className:"vjs-time-tooltip"},{"aria-hidden":"true"})},r.update=function(e,t,r){var n=rf(this.el_),i=rc(this.player_.el()),o=e.width*t;if(i&&n){var u=e.left-i.left+o,l=e.width-o+(i.right-e.right),c=n.width/2;u<c?c+=c-u:l<c&&(c=l),c<0?c=0:c>n.width&&(c=n.width),c=Math.round(c),this.el_.style.right="-"+c+"px",this.write(r)}},r.write=function(e){t5(this.el_,e)},r.updateTime=function(e,t,r,n){var i=this;this.requestNamedAnimationFrame("TimeTooltip#updateTime",function(){var o,u=i.player_.duration();if(i.player_.liveTracker&&i.player_.liveTracker.isLive()){var l=i.player_.liveTracker.liveWindow(),c=l-t*l;o=(c<1?"":"-")+is(c,l)}else o=is(r,u);i.update(e,t,o),n&&n()})},t}(nr);nr.registerComponent("TimeTooltip",i_);var iT=function(e){function t(t,r){var n;return(n=e.call(this,t,r)||this).update=rY(rG(h(n),n.update),30),n}m(t,e);var r=t.prototype;return r.createEl=function(){return e.prototype.createEl.call(this,"div",{className:"vjs-play-progress vjs-slider-bar"},{"aria-hidden":"true"})},r.update=function(e,t){var r=this.getChild("timeTooltip");if(r){var n=this.player_.scrubbing()?this.player_.getCache().currentTime:this.player_.currentTime();r.updateTime(e,t,n)}},t}(nr);iT.prototype.options_={children:[]},t$||tF||iT.prototype.options_.children.push("timeTooltip"),nr.registerComponent("PlayProgressBar",iT);var iE=function(e){function t(t,r){var n;return(n=e.call(this,t,r)||this).update=rY(rG(h(n),n.update),30),n}m(t,e);var r=t.prototype;return r.createEl=function(){return e.prototype.createEl.call(this,"div",{className:"vjs-mouse-display"})},r.update=function(e,t){var r=this,n=t*this.player_.duration();this.getChild("timeTooltip").updateTime(e,t,n,function(){r.el_.style.left=e.width*t+"px"})},t}(nr);iE.prototype.options_={children:["timeTooltip"]},nr.registerComponent("MouseTimeDisplay",iE);var iS=function(e){function t(t,r){var n;return(n=e.call(this,t,r)||this).setEventHandlers_(),n}m(t,e);var r=t.prototype;return r.setEventHandlers_=function(){var e=this;this.update_=rG(this,this.update),this.update=rY(this.update_,30),this.on(this.player_,["ended","durationchange","timeupdate"],this.update),this.player_.liveTracker&&this.on(this.player_.liveTracker,"liveedgechange",this.update),this.updateInterval=null,this.enableIntervalHandler_=function(t){return e.enableInterval_(t)},this.disableIntervalHandler_=function(t){return e.disableInterval_(t)},this.on(this.player_,["playing"],this.enableIntervalHandler_),this.on(this.player_,["ended","pause","waiting"],this.disableIntervalHandler_),"hidden"in u()&&"visibilityState"in u()&&this.on(u(),"visibilitychange",this.toggleVisibility_)},r.toggleVisibility_=function(e){"hidden"===u().visibilityState?(this.cancelNamedAnimationFrame("SeekBar#update"),this.cancelNamedAnimationFrame("Slider#update"),this.disableInterval_(e)):(this.player_.ended()||this.player_.paused()||this.enableInterval_(),this.update())},r.enableInterval_=function(){this.updateInterval||(this.updateInterval=this.setInterval(this.update,30))},r.disableInterval_=function(e){this.player_.liveTracker&&this.player_.liveTracker.isLive()&&e&&"ended"!==e.type||this.updateInterval&&(this.clearInterval(this.updateInterval),this.updateInterval=null)},r.createEl=function(){return e.prototype.createEl.call(this,"div",{className:"vjs-progress-holder"},{"aria-label":this.localize("Progress Bar")})},r.update=function(t){var r=this;if("hidden"!==u().visibilityState){var n=e.prototype.update.call(this);return this.requestNamedAnimationFrame("SeekBar#update",function(){var e=r.player_.ended()?r.player_.duration():r.getCurrentTime_(),t=r.player_.liveTracker,i=r.player_.duration();t&&t.isLive()&&(i=r.player_.liveTracker.liveCurrentTime()),r.percent_!==n&&(r.el_.setAttribute("aria-valuenow",(100*n).toFixed(2)),r.percent_=n),r.currentTime_===e&&r.duration_===i||(r.el_.setAttribute("aria-valuetext",r.localize("progress bar timing: currentTime={1} duration={2}",[is(e,i),is(i,i)],"{1} of {2}")),r.currentTime_=e,r.duration_=i),r.bar&&r.bar.update(rc(r.el()),r.getProgress())}),n}},r.userSeek_=function(e){this.player_.liveTracker&&this.player_.liveTracker.isLive()&&this.player_.liveTracker.nextSeekedFromUser(),this.player_.currentTime(e)},r.getCurrentTime_=function(){return this.player_.scrubbing()?this.player_.getCache().currentTime:this.player_.currentTime()},r.getPercent=function(){var e,t=this.getCurrentTime_(),r=this.player_.liveTracker;return r&&r.isLive()?(e=(t-r.seekableStart())/r.liveWindow(),r.atLiveEdge()&&(e=1)):e=t/this.player_.duration(),e},r.handleMouseDown=function(t){rv(t)&&(t.stopPropagation(),this.videoWasPlaying=!this.player_.paused(),this.player_.pause(),e.prototype.handleMouseDown.call(this,t))},r.handleMouseMove=function(e,t){if(void 0===t&&(t=!1),rv(e)){t||this.player_.scrubbing()||this.player_.scrubbing(!0);var r,n=this.calculateDistance(e),i=this.player_.liveTracker;if(i&&i.isLive()){if(n>=.99)return void i.seekToLiveEdge();var o=i.seekableStart(),u=i.liveCurrentTime();if((r=o+n*i.liveWindow())>=u&&(r=u),r<=o&&(r=o+.1),r===1/0)return}else(r=n*this.player_.duration())===this.player_.duration()&&(r-=.1);this.userSeek_(r)}},r.enable=function(){e.prototype.enable.call(this);var t=this.getChild("mouseTimeDisplay");t&&t.show()},r.disable=function(){e.prototype.disable.call(this);var t=this.getChild("mouseTimeDisplay");t&&t.hide()},r.handleMouseUp=function(t){e.prototype.handleMouseUp.call(this,t),t&&t.stopPropagation(),this.player_.scrubbing(!1),this.player_.trigger({type:"timeupdate",target:this,manuallyTriggered:!0}),this.videoWasPlaying?nc(this.player_.play()):this.update_()},r.stepForward=function(){this.userSeek_(this.player_.currentTime()+5)},r.stepBack=function(){this.userSeek_(this.player_.currentTime()-5)},r.handleAction=function(e){this.player_.paused()?this.player_.play():this.player_.pause()},r.handleKeyDown=function(t){var r=this.player_.liveTracker;if(d().isEventKey(t,"Space")||d().isEventKey(t,"Enter"))t.preventDefault(),t.stopPropagation(),this.handleAction(t);else if(d().isEventKey(t,"Home"))t.preventDefault(),t.stopPropagation(),this.userSeek_(0);else if(d().isEventKey(t,"End"))t.preventDefault(),t.stopPropagation(),r&&r.isLive()?this.userSeek_(r.liveCurrentTime()):this.userSeek_(this.player_.duration());else if(/^[0-9]$/.test(d()(t))){t.preventDefault(),t.stopPropagation();var n=10*(d().codes[d()(t)]-d().codes[0])/100;r&&r.isLive()?this.userSeek_(r.seekableStart()+r.liveWindow()*n):this.userSeek_(this.player_.duration()*n)}else d().isEventKey(t,"PgDn")?(t.preventDefault(),t.stopPropagation(),this.userSeek_(this.player_.currentTime()-60)):d().isEventKey(t,"PgUp")?(t.preventDefault(),t.stopPropagation(),this.userSeek_(this.player_.currentTime()+60)):e.prototype.handleKeyDown.call(this,t)},r.dispose=function(){this.disableInterval_(),this.off(this.player_,["ended","durationchange","timeupdate"],this.update),this.player_.liveTracker&&this.off(this.player_.liveTracker,"liveedgechange",this.update),this.off(this.player_,["playing"],this.enableIntervalHandler_),this.off(this.player_,["ended","pause","waiting"],this.disableIntervalHandler_),"hidden"in u()&&"visibilityState"in u()&&this.off(u(),"visibilitychange",this.toggleVisibility_),e.prototype.dispose.call(this)},t}(iy);iS.prototype.options_={children:["loadProgressBar","playProgressBar"],barName:"playProgressBar"},t$||tF||iS.prototype.options_.children.splice(1,0,"mouseTimeDisplay"),nr.registerComponent("SeekBar",iS);var iw=function(e){function t(t,r){var n;return(n=e.call(this,t,r)||this).handleMouseMove=rY(rG(h(n),n.handleMouseMove),30),n.throttledHandleMouseSeek=rY(rG(h(n),n.handleMouseSeek),30),n.handleMouseUpHandler_=function(e){return n.handleMouseUp(e)},n.handleMouseDownHandler_=function(e){return n.handleMouseDown(e)},n.enable(),n}m(t,e);var r=t.prototype;return r.createEl=function(){return e.prototype.createEl.call(this,"div",{className:"vjs-progress-control vjs-control"})},r.handleMouseMove=function(e){var t=this.getChild("seekBar");if(t){var r=t.getChild("playProgressBar"),n=t.getChild("mouseTimeDisplay");if(r||n){var i=t.el(),o=rf(i),u=rd(i,e).x;u=ig(u,0,1),n&&n.update(o,u),r&&r.update(o,t.getProgress())}}},r.handleMouseSeek=function(e){var t=this.getChild("seekBar");t&&t.handleMouseMove(e)},r.enabled=function(){return this.enabled_},r.disable=function(){if(this.children().forEach(function(e){return e.disable&&e.disable()}),this.enabled()&&(this.off(["mousedown","touchstart"],this.handleMouseDownHandler_),this.off(this.el_,"mousemove",this.handleMouseMove),this.removeListenersAddedOnMousedownAndTouchstart(),this.addClass("disabled"),this.enabled_=!1,this.player_.scrubbing())){var e=this.getChild("seekBar");this.player_.scrubbing(!1),e.videoWasPlaying&&nc(this.player_.play())}},r.enable=function(){this.children().forEach(function(e){return e.enable&&e.enable()}),this.enabled()||(this.on(["mousedown","touchstart"],this.handleMouseDownHandler_),this.on(this.el_,"mousemove",this.handleMouseMove),this.removeClass("disabled"),this.enabled_=!0)},r.removeListenersAddedOnMousedownAndTouchstart=function(){var e=this.el_.ownerDocument;this.off(e,"mousemove",this.throttledHandleMouseSeek),this.off(e,"touchmove",this.throttledHandleMouseSeek),this.off(e,"mouseup",this.handleMouseUpHandler_),this.off(e,"touchend",this.handleMouseUpHandler_)},r.handleMouseDown=function(e){var t=this.el_.ownerDocument,r=this.getChild("seekBar");r&&r.handleMouseDown(e),this.on(t,"mousemove",this.throttledHandleMouseSeek),this.on(t,"touchmove",this.throttledHandleMouseSeek),this.on(t,"mouseup",this.handleMouseUpHandler_),this.on(t,"touchend",this.handleMouseUpHandler_)},r.handleMouseUp=function(e){var t=this.getChild("seekBar");t&&t.handleMouseUp(e),this.removeListenersAddedOnMousedownAndTouchstart()},t}(nr);iw.prototype.options_={children:["seekBar"]},nr.registerComponent("ProgressControl",iw);var iA=function(e){function t(t,r){var n;return(n=e.call(this,t,r)||this).on(t,["enterpictureinpicture","leavepictureinpicture"],function(e){return n.handlePictureInPictureChange(e)}),n.on(t,["disablepictureinpicturechanged","loadedmetadata"],function(e){return n.handlePictureInPictureEnabledChange(e)}),n.on(t,["loadedmetadata","audioonlymodechange","audiopostermodechange"],function(){"audio"===t.currentType().substring(0,5)||t.audioPosterMode()||t.audioOnlyMode()?(t.isInPictureInPicture()&&t.exitPictureInPicture(),n.hide()):n.show()}),n.disable(),n}m(t,e);var r=t.prototype;return r.buildCSSClass=function(){return"vjs-picture-in-picture-control "+e.prototype.buildCSSClass.call(this)},r.handlePictureInPictureEnabledChange=function(){u().pictureInPictureEnabled&&!1===this.player_.disablePictureInPicture()?this.enable():this.disable()},r.handlePictureInPictureChange=function(e){this.player_.isInPictureInPicture()?this.controlText("Exit Picture-in-Picture"):this.controlText("Picture-in-Picture"),this.handlePictureInPictureEnabledChange()},r.handleClick=function(e){this.player_.isInPictureInPicture()?this.player_.exitPictureInPicture():this.player_.requestPictureInPicture()},t}(ie);iA.prototype.controlText_="Picture-in-Picture",nr.registerComponent("PictureInPictureToggle",iA);var iC=function(e){function t(t,r){var n;return(n=e.call(this,t,r)||this).on(t,"fullscreenchange",function(e){return n.handleFullscreenChange(e)}),!1===u()[t.fsApi_.fullscreenEnabled]&&n.disable(),n}m(t,e);var r=t.prototype;return r.buildCSSClass=function(){return"vjs-fullscreen-control "+e.prototype.buildCSSClass.call(this)},r.handleFullscreenChange=function(e){this.player_.isFullscreen()?this.controlText("Non-Fullscreen"):this.controlText("Fullscreen")},r.handleClick=function(e){this.player_.isFullscreen()?this.player_.exitFullscreen():this.player_.requestFullscreen()},t}(ie);iC.prototype.controlText_="Fullscreen",nr.registerComponent("FullscreenToggle",iC);var iI=function(e){function t(){return e.apply(this,arguments)||this}return m(t,e),t.prototype.createEl=function(){var t=e.prototype.createEl.call(this,"div",{className:"vjs-volume-level"});return t.appendChild(e.prototype.createEl.call(this,"span",{className:"vjs-control-text"})),t},t}(nr);nr.registerComponent("VolumeLevel",iI);var iO=function(e){function t(t,r){var n;return(n=e.call(this,t,r)||this).update=rY(rG(h(n),n.update),30),n}m(t,e);var r=t.prototype;return r.createEl=function(){return e.prototype.createEl.call(this,"div",{className:"vjs-volume-tooltip"},{"aria-hidden":"true"})},r.update=function(e,t,r,n){if(!r){var i=rc(this.el_),o=rc(this.player_.el()),u=e.width*t;if(!o||!i)return;var l=e.left-o.left+u,c=e.width-u+(o.right-e.right),f=i.width/2;l<f?f+=f-l:c<f&&(f=c),f<0?f=0:f>i.width&&(f=i.width),this.el_.style.right="-"+f+"px"}this.write(n+"%")},r.write=function(e){t5(this.el_,e)},r.updateVolume=function(e,t,r,n,i){var o=this;this.requestNamedAnimationFrame("VolumeLevelTooltip#updateVolume",function(){o.update(e,t,r,n.toFixed(0)),i&&i()})},t}(nr);nr.registerComponent("VolumeLevelTooltip",iO);var iR=function(e){function t(t,r){var n;return(n=e.call(this,t,r)||this).update=rY(rG(h(n),n.update),30),n}m(t,e);var r=t.prototype;return r.createEl=function(){return e.prototype.createEl.call(this,"div",{className:"vjs-mouse-display"})},r.update=function(e,t,r){var n=this,i=100*t;this.getChild("volumeLevelTooltip").updateVolume(e,t,r,i,function(){r?n.el_.style.bottom=e.height*t+"px":n.el_.style.left=e.width*t+"px"})},t}(nr);iR.prototype.options_={children:["volumeLevelTooltip"]},nr.registerComponent("MouseVolumeLevelDisplay",iR);var iP=function(e){function t(t,r){var n;return(n=e.call(this,t,r)||this).on("slideractive",function(e){return n.updateLastVolume_(e)}),n.on(t,"volumechange",function(e){return n.updateARIAAttributes(e)}),t.ready(function(){return n.updateARIAAttributes()}),n}m(t,e);var r=t.prototype;return r.createEl=function(){return e.prototype.createEl.call(this,"div",{className:"vjs-volume-bar vjs-slider-bar"},{"aria-label":this.localize("Volume Level"),"aria-live":"polite"})},r.handleMouseDown=function(t){rv(t)&&e.prototype.handleMouseDown.call(this,t)},r.handleMouseMove=function(e){var t=this.getChild("mouseVolumeLevelDisplay");if(t){var r=this.el(),n=rc(r),i=this.vertical(),o=rd(r,e);o=ig(o=i?o.y:o.x,0,1),t.update(n,o,i)}rv(e)&&(this.checkMuted(),this.player_.volume(this.calculateDistance(e)))},r.checkMuted=function(){this.player_.muted()&&this.player_.muted(!1)},r.getPercent=function(){return this.player_.muted()?0:this.player_.volume()},r.stepForward=function(){this.checkMuted(),this.player_.volume(this.player_.volume()+.1)},r.stepBack=function(){this.checkMuted(),this.player_.volume(this.player_.volume()-.1)},r.updateARIAAttributes=function(e){var t=this.player_.muted()?0:this.volumeAsPercentage_();this.el_.setAttribute("aria-valuenow",t),this.el_.setAttribute("aria-valuetext",t+"%")},r.volumeAsPercentage_=function(){return Math.round(100*this.player_.volume())},r.updateLastVolume_=function(){var e=this,t=this.player_.volume();this.one("sliderinactive",function(){0===e.player_.volume()&&e.player_.lastVolume_(t)})},t}(iy);iP.prototype.options_={children:["volumeLevel"],barName:"volumeLevel"},t$||tF||iP.prototype.options_.children.splice(0,0,"mouseVolumeLevelDisplay"),iP.prototype.playerEvent="volumechange",nr.registerComponent("VolumeBar",iP);var ik=function(e){function t(t,r){var n,i;return void 0===r&&(r={}),r.vertical=r.vertical||!1,(void 0===r.volumeBar||tI(r.volumeBar))&&(r.volumeBar=r.volumeBar||{},r.volumeBar.vertical=r.vertical),i=h(n=e.call(this,t,r)||this),t.tech_&&!t.tech_.featuresVolumeControl&&i.addClass("vjs-hidden"),i.on(t,"loadstart",function(){t.tech_.featuresVolumeControl?i.removeClass("vjs-hidden"):i.addClass("vjs-hidden")}),n.throttledHandleMouseMove=rY(rG(h(n),n.handleMouseMove),30),n.handleMouseUpHandler_=function(e){return n.handleMouseUp(e)},n.on("mousedown",function(e){return n.handleMouseDown(e)}),n.on("touchstart",function(e){return n.handleMouseDown(e)}),n.on("mousemove",function(e){return n.handleMouseMove(e)}),n.on(n.volumeBar,["focus","slideractive"],function(){n.volumeBar.addClass("vjs-slider-active"),n.addClass("vjs-slider-active"),n.trigger("slideractive")}),n.on(n.volumeBar,["blur","sliderinactive"],function(){n.volumeBar.removeClass("vjs-slider-active"),n.removeClass("vjs-slider-active"),n.trigger("sliderinactive")}),n}m(t,e);var r=t.prototype;return r.createEl=function(){var t="vjs-volume-horizontal";return this.options_.vertical&&(t="vjs-volume-vertical"),e.prototype.createEl.call(this,"div",{className:"vjs-volume-control vjs-control "+t})},r.handleMouseDown=function(e){var t=this.el_.ownerDocument;this.on(t,"mousemove",this.throttledHandleMouseMove),this.on(t,"touchmove",this.throttledHandleMouseMove),this.on(t,"mouseup",this.handleMouseUpHandler_),this.on(t,"touchend",this.handleMouseUpHandler_)},r.handleMouseUp=function(e){var t=this.el_.ownerDocument;this.off(t,"mousemove",this.throttledHandleMouseMove),this.off(t,"touchmove",this.throttledHandleMouseMove),this.off(t,"mouseup",this.handleMouseUpHandler_),this.off(t,"touchend",this.handleMouseUpHandler_)},r.handleMouseMove=function(e){this.volumeBar.handleMouseMove(e)},t}(nr);ik.prototype.options_={children:["volumeBar"]},nr.registerComponent("VolumeControl",ik);var iD=function(e){function t(t,r){var n,i;return i=h(n=e.call(this,t,r)||this),t.tech_&&!t.tech_.featuresMuteControl&&i.addClass("vjs-hidden"),i.on(t,"loadstart",function(){t.tech_.featuresMuteControl?i.removeClass("vjs-hidden"):i.addClass("vjs-hidden")}),n.on(t,["loadstart","volumechange"],function(e){return n.update(e)}),n}m(t,e);var r=t.prototype;return r.buildCSSClass=function(){return"vjs-mute-control "+e.prototype.buildCSSClass.call(this)},r.handleClick=function(e){var t=this.player_.volume(),r=this.player_.lastVolume_();if(0===t){var n=r<.1?.1:r;this.player_.volume(n),this.player_.muted(!1)}else this.player_.muted(!this.player_.muted())},r.update=function(e){this.updateIcon_(),this.updateControlText_()},r.updateIcon_=function(){var e=this.player_.volume(),t=3;t$&&this.player_.tech_&&this.player_.tech_.el_&&this.player_.muted(this.player_.tech_.el_.muted),0===e||this.player_.muted()?t=0:e<.33?t=1:e<.67&&(t=2);for(var r=0;r<4;r++)rt(this.el_,"vjs-vol-"+r);re(this.el_,"vjs-vol-"+t)},r.updateControlText_=function(){var e=this.player_.muted()||0===this.player_.volume()?"Unmute":"Mute";this.controlText()!==e&&this.controlText(e)},t}(ie);iD.prototype.controlText_="Mute",nr.registerComponent("MuteToggle",iD);var iN=function(e){function t(t,r){var n;return void 0===r&&(r={}),void 0!==r.inline?r.inline=r.inline:r.inline=!0,(void 0===r.volumeControl||tI(r.volumeControl))&&(r.volumeControl=r.volumeControl||{},r.volumeControl.vertical=!r.inline),(n=e.call(this,t,r)||this).handleKeyPressHandler_=function(e){return n.handleKeyPress(e)},n.on(t,["loadstart"],function(e){return n.volumePanelState_(e)}),n.on(n.muteToggle,"keyup",function(e){return n.handleKeyPress(e)}),n.on(n.volumeControl,"keyup",function(e){return n.handleVolumeControlKeyUp(e)}),n.on("keydown",function(e){return n.handleKeyPress(e)}),n.on("mouseover",function(e){return n.handleMouseOver(e)}),n.on("mouseout",function(e){return n.handleMouseOut(e)}),n.on(n.volumeControl,["slideractive"],n.sliderActive_),n.on(n.volumeControl,["sliderinactive"],n.sliderInactive_),n}m(t,e);var r=t.prototype;return r.sliderActive_=function(){this.addClass("vjs-slider-active")},r.sliderInactive_=function(){this.removeClass("vjs-slider-active")},r.volumePanelState_=function(){this.volumeControl.hasClass("vjs-hidden")&&this.muteToggle.hasClass("vjs-hidden")&&this.addClass("vjs-hidden"),this.volumeControl.hasClass("vjs-hidden")&&!this.muteToggle.hasClass("vjs-hidden")&&this.addClass("vjs-mute-toggle-only")},r.createEl=function(){var t="vjs-volume-panel-horizontal";return this.options_.inline||(t="vjs-volume-panel-vertical"),e.prototype.createEl.call(this,"div",{className:"vjs-volume-panel vjs-control "+t})},r.dispose=function(){this.handleMouseOut(),e.prototype.dispose.call(this)},r.handleVolumeControlKeyUp=function(e){d().isEventKey(e,"Esc")&&this.muteToggle.focus()},r.handleMouseOver=function(e){this.addClass("vjs-hover"),rM(u(),"keyup",this.handleKeyPressHandler_)},r.handleMouseOut=function(e){this.removeClass("vjs-hover"),rF(u(),"keyup",this.handleKeyPressHandler_)},r.handleKeyPress=function(e){d().isEventKey(e,"Esc")&&this.handleMouseOut()},t}(nr);iN.prototype.options_={children:["muteToggle","volumeControl"]},nr.registerComponent("VolumePanel",iN);var iL=function(e){function t(t,r){var n;return n=e.call(this,t,r)||this,r&&(n.menuButton_=r.menuButton),n.focusedChild_=-1,n.on("keydown",function(e){return n.handleKeyDown(e)}),n.boundHandleBlur_=function(e){return n.handleBlur(e)},n.boundHandleTapClick_=function(e){return n.handleTapClick(e)},n}m(t,e);var r=t.prototype;return r.addEventListenerForItem=function(e){e instanceof nr&&(this.on(e,"blur",this.boundHandleBlur_),this.on(e,["tap","click"],this.boundHandleTapClick_))},r.removeEventListenerForItem=function(e){e instanceof nr&&(this.off(e,"blur",this.boundHandleBlur_),this.off(e,["tap","click"],this.boundHandleTapClick_))},r.removeChild=function(t){"string"==typeof t&&(t=this.getChild(t)),this.removeEventListenerForItem(t),e.prototype.removeChild.call(this,t)},r.addItem=function(e){var t=this.addChild(e);t&&this.addEventListenerForItem(t)},r.createEl=function(){var t=this.options_.contentElType||"ul";this.contentEl_=t8(t,{className:"vjs-menu-content"}),this.contentEl_.setAttribute("role","menu");var r=e.prototype.createEl.call(this,"div",{append:this.contentEl_,className:"vjs-menu"});return r.appendChild(this.contentEl_),rM(r,"click",function(e){e.preventDefault(),e.stopImmediatePropagation()}),r},r.dispose=function(){this.contentEl_=null,this.boundHandleBlur_=null,this.boundHandleTapClick_=null,e.prototype.dispose.call(this)},r.handleBlur=function(e){var t=e.relatedTarget||u().activeElement;if(!this.children().some(function(e){return e.el()===t})){var r=this.menuButton_;r&&r.buttonPressed_&&t!==r.el().firstChild&&r.unpressButton()}},r.handleTapClick=function(e){if(this.menuButton_){this.menuButton_.unpressButton();var t=this.children();if(Array.isArray(t)){var r=t.filter(function(t){return t.el()===e.target})[0];r&&"CaptionSettingsMenuItem"!==r.name()&&this.menuButton_.focus()}}},r.handleKeyDown=function(e){d().isEventKey(e,"Left")||d().isEventKey(e,"Down")?(e.preventDefault(),e.stopPropagation(),this.stepForward()):(d().isEventKey(e,"Right")||d().isEventKey(e,"Up"))&&(e.preventDefault(),e.stopPropagation(),this.stepBack())},r.stepForward=function(){var e=0;void 0!==this.focusedChild_&&(e=this.focusedChild_+1),this.focus(e)},r.stepBack=function(){var e=0;void 0!==this.focusedChild_&&(e=this.focusedChild_-1),this.focus(e)},r.focus=function(e){void 0===e&&(e=0);var t=this.children().slice();t.length&&t[0].hasClass("vjs-menu-title")&&t.shift(),t.length>0&&(e<0?e=0:e>=t.length&&(e=t.length-1),this.focusedChild_=e,t[e].el_.focus())},t}(nr);nr.registerComponent("Menu",iL);var ix=function(e){function t(t,r){void 0===r&&(r={}),(n=e.call(this,t,r)||this).menuButton_=new ie(t,r),n.menuButton_.controlText(n.controlText_),n.menuButton_.el_.setAttribute("aria-haspopup","true");var n,i=ie.prototype.buildCSSClass();n.menuButton_.el_.className=n.buildCSSClass()+" "+i,n.menuButton_.removeClass("vjs-control"),n.addChild(n.menuButton_),n.update(),n.enabled_=!0;var o=function(e){return n.handleClick(e)};return n.handleMenuKeyUp_=function(e){return n.handleMenuKeyUp(e)},n.on(n.menuButton_,"tap",o),n.on(n.menuButton_,"click",o),n.on(n.menuButton_,"keydown",function(e){return n.handleKeyDown(e)}),n.on(n.menuButton_,"mouseenter",function(){n.addClass("vjs-hover"),n.menu.show(),rM(u(),"keyup",n.handleMenuKeyUp_)}),n.on("mouseleave",function(e){return n.handleMouseLeave(e)}),n.on("keydown",function(e){return n.handleSubmenuKeyDown(e)}),n}m(t,e);var r=t.prototype;return r.update=function(){var e=this.createMenu();this.menu&&(this.menu.dispose(),this.removeChild(this.menu)),this.menu=e,this.addChild(e),this.buttonPressed_=!1,this.menuButton_.el_.setAttribute("aria-expanded","false"),this.items&&this.items.length<=this.hideThreshold_?(this.hide(),this.menu.contentEl_.removeAttribute("role")):(this.show(),this.menu.contentEl_.setAttribute("role","menu"))},r.createMenu=function(){var e=new iL(this.player_,{menuButton:this});if(this.hideThreshold_=0,this.options_.title){var t=t8("li",{className:"vjs-menu-title",textContent:r8(this.options_.title),tabIndex:-1}),r=new nr(this.player_,{el:t});e.addItem(r)}if(this.items=this.createItems(),this.items)for(var n=0;n<this.items.length;n++)e.addItem(this.items[n]);return e},r.createItems=function(){},r.createEl=function(){return e.prototype.createEl.call(this,"div",{className:this.buildWrapperCSSClass()},{})},r.buildWrapperCSSClass=function(){var t="vjs-menu-button";return!0===this.options_.inline?t+="-inline":t+="-popup","vjs-menu-button "+t+" "+ie.prototype.buildCSSClass()+" "+e.prototype.buildCSSClass.call(this)},r.buildCSSClass=function(){var t="vjs-menu-button";return!0===this.options_.inline?t+="-inline":t+="-popup","vjs-menu-button "+t+" "+e.prototype.buildCSSClass.call(this)},r.controlText=function(e,t){return void 0===t&&(t=this.menuButton_.el()),this.menuButton_.controlText(e,t)},r.dispose=function(){this.handleMouseLeave(),e.prototype.dispose.call(this)},r.handleClick=function(e){this.buttonPressed_?this.unpressButton():this.pressButton()},r.handleMouseLeave=function(e){this.removeClass("vjs-hover"),rF(u(),"keyup",this.handleMenuKeyUp_)},r.focus=function(){this.menuButton_.focus()},r.blur=function(){this.menuButton_.blur()},r.handleKeyDown=function(e){d().isEventKey(e,"Esc")||d().isEventKey(e,"Tab")?(this.buttonPressed_&&this.unpressButton(),d().isEventKey(e,"Tab")||(e.preventDefault(),this.menuButton_.focus())):(d().isEventKey(e,"Up")||d().isEventKey(e,"Down"))&&(this.buttonPressed_||(e.preventDefault(),this.pressButton()))},r.handleMenuKeyUp=function(e){(d().isEventKey(e,"Esc")||d().isEventKey(e,"Tab"))&&this.removeClass("vjs-hover")},r.handleSubmenuKeyPress=function(e){this.handleSubmenuKeyDown(e)},r.handleSubmenuKeyDown=function(e){(d().isEventKey(e,"Esc")||d().isEventKey(e,"Tab"))&&(this.buttonPressed_&&this.unpressButton(),d().isEventKey(e,"Tab")||(e.preventDefault(),this.menuButton_.focus()))},r.pressButton=function(){this.enabled_&&(this.buttonPressed_=!0,this.menu.show(),this.menu.lockShowing(),this.menuButton_.el_.setAttribute("aria-expanded","true"),t$&&t4()||this.menu.focus())},r.unpressButton=function(){this.enabled_&&(this.buttonPressed_=!1,this.menu.unlockShowing(),this.menu.hide(),this.menuButton_.el_.setAttribute("aria-expanded","false"))},r.disable=function(){this.unpressButton(),this.enabled_=!1,this.addClass("vjs-disabled"),this.menuButton_.disable()},r.enable=function(){this.enabled_=!0,this.removeClass("vjs-disabled"),this.menuButton_.enable()},t}(nr);nr.registerComponent("MenuButton",ix);var ij=function(e){function t(t,r){var n,i=r.tracks;if((n=e.call(this,t,r)||this).items.length<=1&&n.hide(),!i)return h(n);var o=rG(h(n),n.update);return i.addEventListener("removetrack",o),i.addEventListener("addtrack",o),i.addEventListener("labelchange",o),n.player_.on("ready",o),n.player_.on("dispose",function(){i.removeEventListener("removetrack",o),i.removeEventListener("addtrack",o),i.removeEventListener("labelchange",o)}),n}return m(t,e),t}(ix);nr.registerComponent("TrackButton",ij);var iM=["Tab","Esc","Up","Down","Right","Left"],iF=function(e){function t(t,r){var n;return(n=e.call(this,t,r)||this).selectable=r.selectable,n.isSelected_=r.selected||!1,n.multiSelectable=r.multiSelectable,n.selected(n.isSelected_),n.selectable?n.multiSelectable?n.el_.setAttribute("role","menuitemcheckbox"):n.el_.setAttribute("role","menuitemradio"):n.el_.setAttribute("role","menuitem"),n}m(t,e);var r=t.prototype;return r.createEl=function(t,r,n){this.nonIconControl=!0;var i=e.prototype.createEl.call(this,"li",tA({className:"vjs-menu-item",tabIndex:-1},r),n);return i.replaceChild(t8("span",{className:"vjs-menu-item-text",textContent:this.localize(this.options_.label)}),i.querySelector(".vjs-icon-placeholder")),i},r.handleKeyDown=function(t){iM.some(function(e){return d().isEventKey(t,e)})||e.prototype.handleKeyDown.call(this,t)},r.handleClick=function(e){this.selected(!0)},r.selected=function(e){this.selectable&&(e?(this.addClass("vjs-selected"),this.el_.setAttribute("aria-checked","true"),this.controlText(", selected"),this.isSelected_=!0):(this.removeClass("vjs-selected"),this.el_.setAttribute("aria-checked","false"),this.controlText(""),this.isSelected_=!1))},t}(n2);nr.registerComponent("MenuItem",iF);var iB=function(e){function t(t,r){var n,o=r.track,l=t.textTracks();r.label=o.label||o.language||"Unknown",r.selected="showing"===o.mode,(n=e.call(this,t,r)||this).track=o,n.kinds=(r.kinds||[r.kind||n.track.kind]).filter(Boolean);var c,f=function(){for(var e=arguments.length,t=Array(e),r=0;r<e;r++)t[r]=arguments[r];n.handleTracksChange.apply(h(n),t)},d=function(){for(var e=arguments.length,t=Array(e),r=0;r<e;r++)t[r]=arguments[r];n.handleSelectedLanguageChange.apply(h(n),t)};return t.on(["loadstart","texttrackchange"],f),l.addEventListener("change",f),l.addEventListener("selectedlanguagechange",d),n.on("dispose",function(){t.off(["loadstart","texttrackchange"],f),l.removeEventListener("change",f),l.removeEventListener("selectedlanguagechange",d)}),void 0===l.onchange&&n.on(["tap","click"],function(){if("object"!=typeof i().Event)try{c=new(i()).Event("change")}catch(e){}c||(c=u().createEvent("Event")).initEvent("change",!0,!0),l.dispatchEvent(c)}),n.handleTracksChange(),n}m(t,e);var r=t.prototype;return r.handleClick=function(t){var r=this.track,n=this.player_.textTracks();if(e.prototype.handleClick.call(this,t),n)for(var i=0;i<n.length;i++){var o=n[i];-1!==this.kinds.indexOf(o.kind)&&(o===r?"showing"!==o.mode&&(o.mode="showing"):"disabled"!==o.mode&&(o.mode="disabled"))}},r.handleTracksChange=function(e){var t="showing"===this.track.mode;t!==this.isSelected_&&this.selected(t)},r.handleSelectedLanguageChange=function(e){if("showing"===this.track.mode){var t=this.player_.cache_.selectedLanguage;t&&t.enabled&&t.language===this.track.language&&t.kind!==this.track.kind||(this.player_.cache_.selectedLanguage={enabled:!0,language:this.track.language,kind:this.track.kind})}},r.dispose=function(){this.track=null,e.prototype.dispose.call(this)},t}(iF);nr.registerComponent("TextTrackMenuItem",iB);var iU=function(e){function t(t,r){return r.track={player:t,kind:r.kind,kinds:r.kinds,default:!1,mode:"disabled"},r.kinds||(r.kinds=[r.kind]),r.label?r.track.label=r.label:r.track.label=r.kinds.join(" and ")+" off",r.selectable=!0,r.multiSelectable=!1,e.call(this,t,r)||this}m(t,e);var r=t.prototype;return r.handleTracksChange=function(e){for(var t=this.player().textTracks(),r=!0,n=0,i=t.length;n<i;n++){var o=t[n];if(this.options_.kinds.indexOf(o.kind)>-1&&"showing"===o.mode){r=!1;break}}r!==this.isSelected_&&this.selected(r)},r.handleSelectedLanguageChange=function(e){for(var t=this.player().textTracks(),r=!0,n=0,i=t.length;n<i;n++){var o=t[n];if(["captions","descriptions","subtitles"].indexOf(o.kind)>-1&&"showing"===o.mode){r=!1;break}}r&&(this.player_.cache_.selectedLanguage={enabled:!1})},t}(iB);nr.registerComponent("OffTextTrackMenuItem",iU);var iq=function(e){function t(t,r){return void 0===r&&(r={}),r.tracks=t.textTracks(),e.call(this,t,r)||this}return m(t,e),t.prototype.createItems=function(e,t){void 0===e&&(e=[]),void 0===t&&(t=iB),this.label_&&(r=this.label_+" off"),e.push(new iU(this.player_,{kinds:this.kinds_,kind:this.kind_,label:r})),this.hideThreshold_+=1;var r,n=this.player_.textTracks();Array.isArray(this.kinds_)||(this.kinds_=[this.kind_]);for(var i=0;i<n.length;i++){var o=n[i];if(this.kinds_.indexOf(o.kind)>-1){var u=new t(this.player_,{track:o,kinds:this.kinds_,kind:this.kind_,selectable:!0,multiSelectable:!1});u.addClass("vjs-"+o.kind+"-menu-item"),e.push(u)}}return e},t}(ij);nr.registerComponent("TextTrackButton",iq);var iH=function(e){function t(t,r){var n,i=r.track,o=r.cue,u=t.currentTime();return r.selectable=!0,r.multiSelectable=!1,r.label=o.text,r.selected=o.startTime<=u&&u<o.endTime,(n=e.call(this,t,r)||this).track=i,n.cue=o,n}return m(t,e),t.prototype.handleClick=function(t){e.prototype.handleClick.call(this),this.player_.currentTime(this.cue.startTime)},t}(iF);nr.registerComponent("ChaptersTrackMenuItem",iH);var iV=function(e){function t(t,r,n){var i;return(i=e.call(this,t,r,n)||this).selectCurrentItem_=function(){i.items.forEach(function(e){e.selected(i.track_.activeCues[0]===e.cue)})},i}m(t,e);var r=t.prototype;return r.buildCSSClass=function(){return"vjs-chapters-button "+e.prototype.buildCSSClass.call(this)},r.buildWrapperCSSClass=function(){return"vjs-chapters-button "+e.prototype.buildWrapperCSSClass.call(this)},r.update=function(t){if(!t||!t.track||"chapters"===t.track.kind){var r=this.findChaptersTrack();r!==this.track_?(this.setTrack(r),e.prototype.update.call(this)):(!this.items||r&&r.cues&&r.cues.length!==this.items.length)&&e.prototype.update.call(this)}},r.setTrack=function(e){if(this.track_!==e){if(this.updateHandler_||(this.updateHandler_=this.update.bind(this)),this.track_){var t=this.player_.remoteTextTrackEls().getTrackElementByTrack_(this.track_);t&&t.removeEventListener("load",this.updateHandler_),this.track_.removeEventListener("cuechange",this.selectCurrentItem_),this.track_=null}if(this.track_=e,this.track_){this.track_.mode="hidden";var r=this.player_.remoteTextTrackEls().getTrackElementByTrack_(this.track_);r&&r.addEventListener("load",this.updateHandler_),this.track_.addEventListener("cuechange",this.selectCurrentItem_)}}},r.findChaptersTrack=function(){for(var e=this.player_.textTracks()||[],t=e.length-1;t>=0;t--){var r=e[t];if(r.kind===this.kind_)return r}},r.getMenuCaption=function(){return this.track_&&this.track_.label?this.track_.label:this.localize(r8(this.kind_))},r.createMenu=function(){return this.options_.title=this.getMenuCaption(),e.prototype.createMenu.call(this)},r.createItems=function(){var e=[];if(!this.track_)return e;var t=this.track_.cues;if(!t)return e;for(var r=0,n=t.length;r<n;r++){var i=t[r],o=new iH(this.player_,{track:this.track_,cue:i});e.push(o)}return e},t}(iq);iV.prototype.kind_="chapters",iV.prototype.controlText_="Chapters",nr.registerComponent("ChaptersButton",iV);var iG=function(e){function t(t,r,n){i=e.call(this,t,r,n)||this;var i,o=t.textTracks(),u=rG(h(i),i.handleTracksChange);return o.addEventListener("change",u),i.on("dispose",function(){o.removeEventListener("change",u)}),i}m(t,e);var r=t.prototype;return r.handleTracksChange=function(e){for(var t=this.player().textTracks(),r=!1,n=0,i=t.length;n<i;n++){var o=t[n];if(o.kind!==this.kind_&&"showing"===o.mode){r=!0;break}}r?this.disable():this.enable()},r.buildCSSClass=function(){return"vjs-descriptions-button "+e.prototype.buildCSSClass.call(this)},r.buildWrapperCSSClass=function(){return"vjs-descriptions-button "+e.prototype.buildWrapperCSSClass.call(this)},t}(iq);iG.prototype.kind_="descriptions",iG.prototype.controlText_="Descriptions",nr.registerComponent("DescriptionsButton",iG);var iY=function(e){function t(t,r,n){return e.call(this,t,r,n)||this}m(t,e);var r=t.prototype;return r.buildCSSClass=function(){return"vjs-subtitles-button "+e.prototype.buildCSSClass.call(this)},r.buildWrapperCSSClass=function(){return"vjs-subtitles-button "+e.prototype.buildWrapperCSSClass.call(this)},t}(iq);iY.prototype.kind_="subtitles",iY.prototype.controlText_="Subtitles",nr.registerComponent("SubtitlesButton",iY);var iz=function(e){function t(t,r){var n;return r.track={player:t,kind:r.kind,label:r.kind+" settings",selectable:!1,default:!1,mode:"disabled"},r.selectable=!1,r.name="CaptionSettingsMenuItem",(n=e.call(this,t,r)||this).addClass("vjs-texttrack-settings"),n.controlText(", opens "+r.kind+" settings dialog"),n}return m(t,e),t.prototype.handleClick=function(e){this.player().getChild("textTrackSettings").open()},t}(iB);nr.registerComponent("CaptionSettingsMenuItem",iz);var iK=function(e){function t(t,r,n){return e.call(this,t,r,n)||this}m(t,e);var r=t.prototype;return r.buildCSSClass=function(){return"vjs-captions-button "+e.prototype.buildCSSClass.call(this)},r.buildWrapperCSSClass=function(){return"vjs-captions-button "+e.prototype.buildWrapperCSSClass.call(this)},r.createItems=function(){var t=[];return this.player().tech_&&this.player().tech_.featuresNativeTextTracks||!this.player().getChild("textTrackSettings")||(t.push(new iz(this.player_,{kind:this.kind_})),this.hideThreshold_+=1),e.prototype.createItems.call(this,t)},t}(iq);iK.prototype.kind_="captions",iK.prototype.controlText_="Captions",nr.registerComponent("CaptionsButton",iK);var iW=function(e){function t(){return e.apply(this,arguments)||this}return m(t,e),t.prototype.createEl=function(t,r,n){var i=e.prototype.createEl.call(this,t,r,n),o=i.querySelector(".vjs-menu-item-text");return"captions"===this.options_.track.kind&&(o.appendChild(t8("span",{className:"vjs-icon-placeholder"},{"aria-hidden":!0})),o.appendChild(t8("span",{className:"vjs-control-text",textContent:" "+this.localize("Captions")}))),i},t}(iB);nr.registerComponent("SubsCapsMenuItem",iW);var iX=function(e){function t(t,r){var n;return void 0===r&&(r={}),(n=e.call(this,t,r)||this).label_="subtitles",["en","en-us","en-ca","fr-ca"].indexOf(n.player_.language_)>-1&&(n.label_="captions"),n.menuButton_.controlText(r8(n.label_)),n}m(t,e);var r=t.prototype;return r.buildCSSClass=function(){return"vjs-subs-caps-button "+e.prototype.buildCSSClass.call(this)},r.buildWrapperCSSClass=function(){return"vjs-subs-caps-button "+e.prototype.buildWrapperCSSClass.call(this)},r.createItems=function(){var t=[];return this.player().tech_&&this.player().tech_.featuresNativeTextTracks||!this.player().getChild("textTrackSettings")||(t.push(new iz(this.player_,{kind:this.label_})),this.hideThreshold_+=1),e.prototype.createItems.call(this,t,iW)},t}(iq);iX.prototype.kinds_=["captions","subtitles"],iX.prototype.controlText_="Subtitles",nr.registerComponent("SubsCapsButton",iX);var iQ=function(e){function t(t,r){var n,i=r.track,o=t.audioTracks();r.label=i.label||i.language||"Unknown",r.selected=i.enabled,(n=e.call(this,t,r)||this).track=i,n.addClass("vjs-"+i.kind+"-menu-item");var u=function(){for(var e=arguments.length,t=Array(e),r=0;r<e;r++)t[r]=arguments[r];n.handleTracksChange.apply(h(n),t)};return o.addEventListener("change",u),n.on("dispose",function(){o.removeEventListener("change",u)}),n}m(t,e);var r=t.prototype;return r.createEl=function(t,r,n){var i=e.prototype.createEl.call(this,t,r,n),o=i.querySelector(".vjs-menu-item-text");return"main-desc"===this.options_.track.kind&&(o.appendChild(t8("span",{className:"vjs-icon-placeholder"},{"aria-hidden":!0})),o.appendChild(t8("span",{className:"vjs-control-text",textContent:" "+this.localize("Descriptions")}))),i},r.handleClick=function(t){if(e.prototype.handleClick.call(this,t),this.track.enabled=!0,this.player_.tech_.featuresNativeAudioTracks)for(var r=this.player_.audioTracks(),n=0;n<r.length;n++){var i=r[n];i!==this.track&&(i.enabled=i===this.track)}},r.handleTracksChange=function(e){this.selected(this.track.enabled)},t}(iF);nr.registerComponent("AudioTrackMenuItem",iQ);var i$=function(e){function t(t,r){return void 0===r&&(r={}),r.tracks=t.audioTracks(),e.call(this,t,r)||this}m(t,e);var r=t.prototype;return r.buildCSSClass=function(){return"vjs-audio-button "+e.prototype.buildCSSClass.call(this)},r.buildWrapperCSSClass=function(){return"vjs-audio-button "+e.prototype.buildWrapperCSSClass.call(this)},r.createItems=function(e){void 0===e&&(e=[]),this.hideThreshold_=1;for(var t=this.player_.audioTracks(),r=0;r<t.length;r++){var n=t[r];e.push(new iQ(this.player_,{track:n,selectable:!0,multiSelectable:!1}))}return e},t}(ij);i$.prototype.controlText_="Audio Track",nr.registerComponent("AudioTrackButton",i$);var iJ=function(e){function t(t,r){var n,i=r.rate,o=parseFloat(i,10);return r.label=i,r.selected=o===t.playbackRate(),r.selectable=!0,r.multiSelectable=!1,(n=e.call(this,t,r)||this).label=i,n.rate=o,n.on(t,"ratechange",function(e){return n.update(e)}),n}m(t,e);var r=t.prototype;return r.handleClick=function(t){e.prototype.handleClick.call(this),this.player().playbackRate(this.rate)},r.update=function(e){this.selected(this.player().playbackRate()===this.rate)},t}(iF);iJ.prototype.contentElType="button",nr.registerComponent("PlaybackRateMenuItem",iJ);var iZ=function(e){function t(t,r){var n;return(n=e.call(this,t,r)||this).menuButton_.el_.setAttribute("aria-describedby",n.labelElId_),n.updateVisibility(),n.updateLabel(),n.on(t,"loadstart",function(e){return n.updateVisibility(e)}),n.on(t,"ratechange",function(e){return n.updateLabel(e)}),n.on(t,"playbackrateschange",function(e){return n.handlePlaybackRateschange(e)}),n}m(t,e);var r=t.prototype;return r.createEl=function(){var t=e.prototype.createEl.call(this);return this.labelElId_="vjs-playback-rate-value-label-"+this.id_,this.labelEl_=t8("div",{className:"vjs-playback-rate-value",id:this.labelElId_,textContent:"1x"}),t.appendChild(this.labelEl_),t},r.dispose=function(){this.labelEl_=null,e.prototype.dispose.call(this)},r.buildCSSClass=function(){return"vjs-playback-rate "+e.prototype.buildCSSClass.call(this)},r.buildWrapperCSSClass=function(){return"vjs-playback-rate "+e.prototype.buildWrapperCSSClass.call(this)},r.createItems=function(){for(var e=this.playbackRates(),t=[],r=e.length-1;r>=0;r--)t.push(new iJ(this.player(),{rate:e[r]+"x"}));return t},r.updateARIAAttributes=function(){this.el().setAttribute("aria-valuenow",this.player().playbackRate())},r.handleClick=function(e){var t=this.player().playbackRate(),r=this.playbackRates(),n=(r.indexOf(t)+1)%r.length;this.player().playbackRate(r[n])},r.handlePlaybackRateschange=function(e){this.update()},r.playbackRates=function(){var e=this.player();return e.playbackRates&&e.playbackRates()||[]},r.playbackRateSupported=function(){return this.player().tech_&&this.player().tech_.featuresPlaybackRate&&this.playbackRates()&&this.playbackRates().length>0},r.updateVisibility=function(e){this.playbackRateSupported()?this.removeClass("vjs-hidden"):this.addClass("vjs-hidden")},r.updateLabel=function(e){this.playbackRateSupported()&&(this.labelEl_.textContent=this.player().playbackRate()+"x")},t}(ix);iZ.prototype.controlText_="Playback Rate",nr.registerComponent("PlaybackRateMenuButton",iZ);var i0=function(e){function t(){return e.apply(this,arguments)||this}m(t,e);var r=t.prototype;return r.buildCSSClass=function(){return"vjs-spacer "+e.prototype.buildCSSClass.call(this)},r.createEl=function(t,r,n){return void 0===t&&(t="div"),void 0===r&&(r={}),void 0===n&&(n={}),r.className||(r.className=this.buildCSSClass()),e.prototype.createEl.call(this,t,r,n)},t}(nr);nr.registerComponent("Spacer",i0);var i1=function(e){function t(){return e.apply(this,arguments)||this}m(t,e);var r=t.prototype;return r.buildCSSClass=function(){return"vjs-custom-control-spacer "+e.prototype.buildCSSClass.call(this)},r.createEl=function(){return e.prototype.createEl.call(this,"div",{className:this.buildCSSClass(),textContent:"\xa0"})},t}(i0);nr.registerComponent("CustomControlSpacer",i1);var i2=function(e){function t(){return e.apply(this,arguments)||this}return m(t,e),t.prototype.createEl=function(){return e.prototype.createEl.call(this,"div",{className:"vjs-control-bar",dir:"ltr"})},t}(nr);i2.prototype.options_={children:["playToggle","volumePanel","currentTimeDisplay","timeDivider","durationDisplay","progressControl","liveDisplay","seekToLive","remainingTimeDisplay","customControlSpacer","playbackRateMenuButton","chaptersButton","descriptionsButton","subsCapsButton","audioTrackButton","fullscreenToggle"]},"exitPictureInPicture"in u()&&i2.prototype.options_.children.splice(i2.prototype.options_.children.length-1,0,"pictureInPictureToggle"),nr.registerComponent("ControlBar",i2);var i3=function(e){function t(t,r){var n;return(n=e.call(this,t,r)||this).on(t,"error",function(e){return n.open(e)}),n}m(t,e);var r=t.prototype;return r.buildCSSClass=function(){return"vjs-error-display "+e.prototype.buildCSSClass.call(this)},r.content=function(){var e=this.player().error();return e?this.localize(e.message):""},t}(nh);i3.prototype.options_=l({},nh.prototype.options_,{pauseOnOpen:!1,fillAlways:!0,temporary:!1,uncloseable:!0}),nr.registerComponent("ErrorDisplay",i3);var i4="vjs-text-track-settings",i6=["#000","Black"],i8=["#00F","Blue"],i5=["#0FF","Cyan"],i9=["#0F0","Green"],i7=["#F0F","Magenta"],oe=["#F00","Red"],ot=["#FFF","White"],or=["#FF0","Yellow"],on=["1","Opaque"],oi=["0.5","Semi-Transparent"],oo=["0","Transparent"],oa={backgroundColor:{selector:".vjs-bg-color > select",id:"captions-background-color-%s",label:"Color",options:[i6,ot,oe,i9,i8,or,i7,i5]},backgroundOpacity:{selector:".vjs-bg-opacity > select",id:"captions-background-opacity-%s",label:"Transparency",options:[on,oi,oo]},color:{selector:".vjs-fg-color > select",id:"captions-foreground-color-%s",label:"Color",options:[ot,i6,oe,i9,i8,or,i7,i5]},edgeStyle:{selector:".vjs-edge-style > select",id:"%s",label:"Text Edge Style",options:[["none","None"],["raised","Raised"],["depressed","Depressed"],["uniform","Uniform"],["dropshadow","Dropshadow"]]},fontFamily:{selector:".vjs-font-family > select",id:"captions-font-family-%s",label:"Font Family",options:[["proportionalSansSerif","Proportional Sans-Serif"],["monospaceSansSerif","Monospace Sans-Serif"],["proportionalSerif","Proportional Serif"],["monospaceSerif","Monospace Serif"],["casual","Casual"],["script","Script"],["small-caps","Small Caps"]]},fontPercent:{selector:".vjs-font-percent > select",id:"captions-font-size-%s",label:"Font Size",options:[["0.50","50%"],["0.75","75%"],["1.00","100%"],["1.25","125%"],["1.50","150%"],["1.75","175%"],["2.00","200%"],["3.00","300%"],["4.00","400%"]],default:2,parser:function(e){return"1.00"===e?null:Number(e)}},textOpacity:{selector:".vjs-text-opacity > select",id:"captions-foreground-opacity-%s",label:"Transparency",options:[on,oi]},windowColor:{selector:".vjs-window-color > select",id:"captions-window-color-%s",label:"Color"},windowOpacity:{selector:".vjs-window-opacity > select",id:"captions-window-opacity-%s",label:"Transparency",options:[oo,oi,on]}};function os(e,t){if(t&&(e=t(e)),e&&"none"!==e)return e}oa.windowColor.options=oa.backgroundColor.options;var ou=function(e){function t(t,r){var n;return r.temporary=!1,(n=e.call(this,t,r)||this).updateDisplay=n.updateDisplay.bind(h(n)),n.fill(),n.hasBeenOpened_=n.hasBeenFilled_=!0,n.endDialog=t8("p",{className:"vjs-control-text",textContent:n.localize("End of dialog window.")}),n.el().appendChild(n.endDialog),n.setDefaults(),void 0===r.persistTextTrackSettings&&(n.options_.persistTextTrackSettings=n.options_.playerOptions.persistTextTrackSettings),n.on(n.$(".vjs-done-button"),"click",function(){n.saveSettings(),n.close()}),n.on(n.$(".vjs-default-button"),"click",function(){n.setDefaults(),n.updateDisplay()}),tw(oa,function(e){n.on(n.$(e.selector),"change",n.updateDisplay)}),n.options_.persistTextTrackSettings&&n.restoreSettings(),n}m(t,e);var r=t.prototype;return r.dispose=function(){this.endDialog=null,e.prototype.dispose.call(this)},r.createElSelect_=function(e,t,r){var n=this;void 0===t&&(t=""),void 0===r&&(r="label");var i=oa[e],o=i.id.replace("%s",this.id_),u=[t,o].join(" ").trim();return["<"+r+' id="'+o+'" class="'+("label"===r?"vjs-label":"")+'">',this.localize(i.label),"</"+r+">",'<select aria-labelledby="'+u+'">'].concat(i.options.map(function(e){var t=o+"-"+e[1].replace(/\W+/g,"");return['<option id="'+t+'" value="'+e[0]+'" ','aria-labelledby="'+u+" "+t+'">',n.localize(e[1]),"</option>"].join("")})).concat("</select>").join("")},r.createElFgColor_=function(){var e="captions-text-legend-"+this.id_;return['<fieldset class="vjs-fg-color vjs-track-setting">','<legend id="'+e+'">',this.localize("Text"),"</legend>",this.createElSelect_("color",e),'<span class="vjs-text-opacity vjs-opacity">',this.createElSelect_("textOpacity",e),"</span>","</fieldset>"].join("")},r.createElBgColor_=function(){var e="captions-background-"+this.id_;return['<fieldset class="vjs-bg-color vjs-track-setting">','<legend id="'+e+'">',this.localize("Background"),"</legend>",this.createElSelect_("backgroundColor",e),'<span class="vjs-bg-opacity vjs-opacity">',this.createElSelect_("backgroundOpacity",e),"</span>","</fieldset>"].join("")},r.createElWinColor_=function(){var e="captions-window-"+this.id_;return['<fieldset class="vjs-window-color vjs-track-setting">','<legend id="'+e+'">',this.localize("Window"),"</legend>",this.createElSelect_("windowColor",e),'<span class="vjs-window-opacity vjs-opacity">',this.createElSelect_("windowOpacity",e),"</span>","</fieldset>"].join("")},r.createElColors_=function(){return t8("div",{className:"vjs-track-settings-colors",innerHTML:[this.createElFgColor_(),this.createElBgColor_(),this.createElWinColor_()].join("")})},r.createElFont_=function(){return t8("div",{className:"vjs-track-settings-font",innerHTML:['<fieldset class="vjs-font-percent vjs-track-setting">',this.createElSelect_("fontPercent","","legend"),"</fieldset>",'<fieldset class="vjs-edge-style vjs-track-setting">',this.createElSelect_("edgeStyle","","legend"),"</fieldset>",'<fieldset class="vjs-font-family vjs-track-setting">',this.createElSelect_("fontFamily","","legend"),"</fieldset>"].join("")})},r.createElControls_=function(){var e=this.localize("restore all settings to the default values");return t8("div",{className:"vjs-track-settings-controls",innerHTML:['<button type="button" class="vjs-default-button" title="'+e+'">',this.localize("Reset"),'<span class="vjs-control-text"> '+e+"</span>","</button>",'<button type="button" class="vjs-done-button">'+this.localize("Done")+"</button>"].join("")})},r.content=function(){return[this.createElColors_(),this.createElFont_(),this.createElControls_()]},r.label=function(){return this.localize("Caption Settings Dialog")},r.description=function(){return this.localize("Beginning of dialog window. Escape will cancel and close the window.")},r.buildCSSClass=function(){return e.prototype.buildCSSClass.call(this)+" vjs-text-track-settings"},r.getValues=function(){var e,t=this;return e=function(e,r,n){var i,o,u=(i=t.$(r.selector),o=r.parser,os(i.options[i.options.selectedIndex].value,o));return void 0!==u&&(e[n]=u),e},tS(oa).reduce(function(t,r){return e(t,oa[r],r)},{})},r.setValues=function(e){var t=this;tw(oa,function(r,n){!function(e,t,r){if(t){for(var n=0;n<e.options.length;n++)if(os(e.options[n].value,r)===t){e.selectedIndex=n;break}}}(t.$(r.selector),e[n],r.parser)})},r.setDefaults=function(){var e=this;tw(oa,function(t){var r=t.hasOwnProperty("default")?t.default:0;e.$(t.selector).selectedIndex=r})},r.restoreSettings=function(){var e;try{e=JSON.parse(i().localStorage.getItem(i4))}catch(e){t_.warn(e)}e&&this.setValues(e)},r.saveSettings=function(){if(this.options_.persistTextTrackSettings){var e=this.getValues();try{Object.keys(e).length?i().localStorage.setItem(i4,JSON.stringify(e)):i().localStorage.removeItem(i4)}catch(e){t_.warn(e)}}},r.updateDisplay=function(){var e=this.player_.getChild("textTrackDisplay");e&&e.updateDisplay()},r.conditionalBlur_=function(){this.previouslyActiveEl_=null;var e=this.player_.controlBar,t=e&&e.subsCapsButton,r=e&&e.captionsButton;t?t.focus():r&&r.focus()},t}(nh);nr.registerComponent("TextTrackSettings",ou);var ol=function(e){function t(t,r){var n,o,u,l,c,f=r.ResizeObserver||i().ResizeObserver;null===r.ResizeObserver&&(f=!1);var d=r5({createEl:!f,reportTouchActivity:!1},r);return(c=e.call(this,t,d)||this).ResizeObserver=r.ResizeObserver||i().ResizeObserver,c.loadListener_=null,c.resizeObserver_=null,c.debouncedHandler_=(n=function(){c.resizeHandler()},void 0===(o=h(c))&&(o=i()),(l=function(){var e=this,t=arguments,r=function(){u=null,r=null,n.apply(e,t)};o.clearTimeout(u),u=o.setTimeout(r,100)}).cancel=function(){o.clearTimeout(u),u=null},l),f?(c.resizeObserver_=new c.ResizeObserver(c.debouncedHandler_),c.resizeObserver_.observe(t.el())):(c.loadListener_=function(){if(c.el_&&c.el_.contentWindow){var e=c.debouncedHandler_,t=c.unloadListener_=function(){rF(this,"resize",e),rF(this,"unload",t),t=null};rM(c.el_.contentWindow,"unload",t),rM(c.el_.contentWindow,"resize",e)}},c.one("load",c.loadListener_)),c}m(t,e);var r=t.prototype;return r.createEl=function(){return e.prototype.createEl.call(this,"iframe",{className:"vjs-resize-manager",tabIndex:-1,title:this.localize("No content")},{"aria-hidden":"true"})},r.resizeHandler=function(){this.player_&&this.player_.trigger&&this.player_.trigger("playerresize")},r.dispose=function(){this.debouncedHandler_&&this.debouncedHandler_.cancel(),this.resizeObserver_&&(this.player_.el()&&this.resizeObserver_.unobserve(this.player_.el()),this.resizeObserver_.disconnect()),this.loadListener_&&this.off("load",this.loadListener_),this.el_&&this.el_.contentWindow&&this.unloadListener_&&this.unloadListener_.call(this.el_.contentWindow),this.ResizeObserver=null,this.resizeObserver=null,this.debouncedHandler_=null,this.loadListener_=null,e.prototype.dispose.call(this)},t}(nr);nr.registerComponent("ResizeManager",ol);var oc={trackingThreshold:20,liveTolerance:15},of=function(e){function t(t,r){var n,i=r5(oc,r,{createEl:!1});return(n=e.call(this,t,i)||this).handleVisibilityChange_=function(e){return n.handleVisibilityChange(e)},n.trackLiveHandler_=function(){return n.trackLive_()},n.handlePlay_=function(e){return n.handlePlay(e)},n.handleFirstTimeupdate_=function(e){return n.handleFirstTimeupdate(e)},n.handleSeeked_=function(e){return n.handleSeeked(e)},n.seekToLiveEdge_=function(e){return n.seekToLiveEdge(e)},n.reset_(),n.on(n.player_,"durationchange",function(e){return n.handleDurationchange(e)}),n.on(n.player_,"canplay",function(){return n.toggleTracking()}),tY&&"hidden"in u()&&"visibilityState"in u()&&n.on(u(),"visibilitychange",n.handleVisibilityChange_),n}m(t,e);var r=t.prototype;return r.handleVisibilityChange=function(){this.player_.duration()===1/0&&(u().hidden?this.stopTracking():this.startTracking())},r.trackLive_=function(){var e=this.player_.seekable();if(e&&e.length){var t=Number(i().performance.now().toFixed(4)),r=-1===this.lastTime_?0:(t-this.lastTime_)/1e3;this.lastTime_=t,this.pastSeekEnd_=this.pastSeekEnd()+r;var n=this.liveCurrentTime(),o=this.player_.currentTime(),u=this.player_.paused()||this.seekedBehindLive_||Math.abs(n-o)>this.options_.liveTolerance;this.timeupdateSeen_&&n!==1/0||(u=!1),u!==this.behindLiveEdge_&&(this.behindLiveEdge_=u,this.trigger("liveedgechange"))}},r.handleDurationchange=function(){this.toggleTracking()},r.toggleTracking=function(){this.player_.duration()===1/0&&this.liveWindow()>=this.options_.trackingThreshold?(this.player_.options_.liveui&&this.player_.addClass("vjs-liveui"),this.startTracking()):(this.player_.removeClass("vjs-liveui"),this.stopTracking())},r.startTracking=function(){this.isTracking()||(this.timeupdateSeen_||(this.timeupdateSeen_=this.player_.hasStarted()),this.trackingInterval_=this.setInterval(this.trackLiveHandler_,30),this.trackLive_(),this.on(this.player_,["play","pause"],this.trackLiveHandler_),this.timeupdateSeen_?this.on(this.player_,"seeked",this.handleSeeked_):(this.one(this.player_,"play",this.handlePlay_),this.one(this.player_,"timeupdate",this.handleFirstTimeupdate_)))},r.handleFirstTimeupdate=function(){this.timeupdateSeen_=!0,this.on(this.player_,"seeked",this.handleSeeked_)},r.handleSeeked=function(){var e=Math.abs(this.liveCurrentTime()-this.player_.currentTime());this.seekedBehindLive_=this.nextSeekedFromUser_&&e>2,this.nextSeekedFromUser_=!1,this.trackLive_()},r.handlePlay=function(){this.one(this.player_,"timeupdate",this.seekToLiveEdge_)},r.reset_=function(){this.lastTime_=-1,this.pastSeekEnd_=0,this.lastSeekEnd_=-1,this.behindLiveEdge_=!0,this.timeupdateSeen_=!1,this.seekedBehindLive_=!1,this.nextSeekedFromUser_=!1,this.clearInterval(this.trackingInterval_),this.trackingInterval_=null,this.off(this.player_,["play","pause"],this.trackLiveHandler_),this.off(this.player_,"seeked",this.handleSeeked_),this.off(this.player_,"play",this.handlePlay_),this.off(this.player_,"timeupdate",this.handleFirstTimeupdate_),this.off(this.player_,"timeupdate",this.seekToLiveEdge_)},r.nextSeekedFromUser=function(){this.nextSeekedFromUser_=!0},r.stopTracking=function(){this.isTracking()&&(this.reset_(),this.trigger("liveedgechange"))},r.seekableEnd=function(){for(var e=this.player_.seekable(),t=[],r=e?e.length:0;r--;)t.push(e.end(r));return t.length?t.sort()[t.length-1]:1/0},r.seekableStart=function(){for(var e=this.player_.seekable(),t=[],r=e?e.length:0;r--;)t.push(e.start(r));return t.length?t.sort()[0]:0},r.liveWindow=function(){var e=this.liveCurrentTime();return e===1/0?0:e-this.seekableStart()},r.isLive=function(){return this.isTracking()},r.atLiveEdge=function(){return!this.behindLiveEdge()},r.liveCurrentTime=function(){return this.pastSeekEnd()+this.seekableEnd()},r.pastSeekEnd=function(){var e=this.seekableEnd();return -1!==this.lastSeekEnd_&&e!==this.lastSeekEnd_&&(this.pastSeekEnd_=0),this.lastSeekEnd_=e,this.pastSeekEnd_},r.behindLiveEdge=function(){return this.behindLiveEdge_},r.isTracking=function(){return"number"==typeof this.trackingInterval_},r.seekToLiveEdge=function(){this.seekedBehindLive_=!1,this.atLiveEdge()||(this.nextSeekedFromUser_=!1,this.player_.currentTime(this.liveCurrentTime()))},r.dispose=function(){this.off(u(),"visibilitychange",this.handleVisibilityChange_),this.stopTracking(),e.prototype.dispose.call(this)},t}(nr);nr.registerComponent("LiveTracker",of);var od,oh=function(e){var t=e.el();if(t.hasAttribute("src"))return e.triggerSourceset(t.src),!0;var r=e.$$("source"),n=[],i="";if(!r.length)return!1;for(var o=0;o<r.length;o++){var u=r[o].src;u&&-1===n.indexOf(u)&&n.push(u)}return!!n.length&&(1===n.length&&(i=n[0]),e.triggerSourceset(i),!0)},op=Object.defineProperty({},"innerHTML",{get:function(){return this.cloneNode(!0).innerHTML},set:function(e){var t=u().createElement(this.nodeName.toLowerCase());t.innerHTML=e;for(var r=u().createDocumentFragment();t.childNodes.length;)r.appendChild(t.childNodes[0]);return this.innerText="",i().Element.prototype.appendChild.call(this,r),this.innerHTML}}),om=function(e,t){for(var r={},n=0;n<e.length&&!((r=Object.getOwnPropertyDescriptor(e[n],t))&&r.set&&r.get);n++);return r.enumerable=!0,r.configurable=!0,r},og=function(e){var t=e.el();if(!t.resetSourceWatch_){var r={},n=om([e.el(),i().HTMLMediaElement.prototype,i().Element.prototype,op],"innerHTML"),o=function(r){return function(){for(var n=arguments.length,i=Array(n),o=0;o<n;o++)i[o]=arguments[o];var u=r.apply(t,i);return oh(e),u}};["append","appendChild","insertAdjacentHTML"].forEach(function(e){t[e]&&(r[e]=t[e],t[e]=o(r[e]))}),Object.defineProperty(t,"innerHTML",r5(n,{set:o(n.set)})),t.resetSourceWatch_=function(){t.resetSourceWatch_=null,Object.keys(r).forEach(function(e){t[e]=r[e]}),Object.defineProperty(t,"innerHTML",n)},e.one("sourceset",t.resetSourceWatch_)}},oy=Object.defineProperty({},"src",{get:function(){return this.hasAttribute("src")?nR(i().Element.prototype.getAttribute.call(this,"src")):""},set:function(e){return i().Element.prototype.setAttribute.call(this,"src",e),e}}),ov=function(e,t,r,n){void 0===n&&(n=!0);var i=function(r){return Object.defineProperty(e,t,{value:r,enumerable:!0,writable:!0})},o={configurable:!0,enumerable:!0,get:function(){var e=r();return i(e),e}};return n&&(o.set=i),Object.defineProperty(e,t,o)},ob=function(e){function t(t,r){n=e.call(this,t,r)||this;var n,i=t.source,o=!1;if(n.featuresVideoFrameCallback=n.featuresVideoFrameCallback&&"VIDEO"===n.el_.tagName,i&&(n.el_.currentSrc!==i.src||t.tag&&3===t.tag.initNetworkState_)?n.setSource(i):n.handleLateInit_(n.el_),t.enableSourceset&&n.setupSourcesetHandling_(),n.isScrubbing_=!1,n.el_.hasChildNodes()){for(var u=n.el_.childNodes,l=u.length,c=[];l--;){var f=u[l];"track"===f.nodeName.toLowerCase()&&(n.featuresNativeTextTracks?(n.remoteTextTrackEls().addTrackElement_(f),n.remoteTextTracks().addTrack(f.track),n.textTracks().addTrack(f.track),o||n.el_.hasAttribute("crossorigin")||!nk(f.src)||(o=!0)):c.push(f))}for(var d=0;d<c.length;d++)n.el_.removeChild(c[d])}return n.proxyNativeTracks_(),n.featuresNativeTextTracks&&o&&t_.warn("Text Tracks are being loaded from another origin but the crossorigin attribute isn't used.\nThis may prevent text tracks from loading."),n.restoreMetadataTracksInIOSNativePlayer_(),(tW||tQ||tU)&&!0===t.nativeControlsForTouch&&n.setControls(!0),n.proxyWebkitFullscreen_(),n.triggerReady(),n}m(t,e);var r=t.prototype;return r.dispose=function(){this.el_&&this.el_.resetSourceset_&&this.el_.resetSourceset_(),t.disposeMediaElement(this.el_),this.options_=null,e.prototype.dispose.call(this)},r.setupSourcesetHandling_=function(){!function(e){if(e.featuresSourceset){var t=e.el();if(!t.resetSourceset_){var r=om([e.el(),i().HTMLMediaElement.prototype,oy],"src"),n=t.setAttribute,o=t.load;Object.defineProperty(t,"src",r5(r,{set:function(n){var i=r.set.call(t,n);return e.triggerSourceset(t.src),i}})),t.setAttribute=function(r,i){var o=n.call(t,r,i);return/src/i.test(r)&&e.triggerSourceset(t.src),o},t.load=function(){var r=o.call(t);return oh(e)||(e.triggerSourceset(""),og(e)),r},t.currentSrc?e.triggerSourceset(t.currentSrc):oh(e)||og(e),t.resetSourceset_=function(){t.resetSourceset_=null,t.load=o,t.setAttribute=n,Object.defineProperty(t,"src",r),t.resetSourceWatch_&&t.resetSourceWatch_()}}}}(this)},r.restoreMetadataTracksInIOSNativePlayer_=function(){var e,t=this.textTracks(),r=function(){e=[];for(var r=0;r<t.length;r++){var n=t[r];"metadata"===n.kind&&e.push({track:n,storedMode:n.mode})}};r(),t.addEventListener("change",r),this.on("dispose",function(){return t.removeEventListener("change",r)});var n=function r(){for(var n=0;n<e.length;n++){var i=e[n];"disabled"===i.track.mode&&i.track.mode!==i.storedMode&&(i.track.mode=i.storedMode)}t.removeEventListener("change",r)};this.on("webkitbeginfullscreen",function(){t.removeEventListener("change",r),t.removeEventListener("change",n),t.addEventListener("change",n)}),this.on("webkitendfullscreen",function(){t.removeEventListener("change",r),t.addEventListener("change",r),t.removeEventListener("change",n)})},r.overrideNative_=function(e,t){var r=this;if(t===this["featuresNative"+e+"Tracks"]){var n=e.toLowerCase();this[n+"TracksListeners_"]&&Object.keys(this[n+"TracksListeners_"]).forEach(function(e){r.el()[n+"Tracks"].removeEventListener(e,r[n+"TracksListeners_"][e])}),this["featuresNative"+e+"Tracks"]=!t,this[n+"TracksListeners_"]=null,this.proxyNativeTracksForType_(n)}},r.overrideNativeAudioTracks=function(e){this.overrideNative_("Audio",e)},r.overrideNativeVideoTracks=function(e){this.overrideNative_("Video",e)},r.proxyNativeTracksForType_=function(e){var t=this,r=nB[e],n=this.el()[r.getterName],i=this[r.getterName]();if(this["featuresNative"+r.capitalName+"Tracks"]&&n&&n.addEventListener){var o={change:function(r){var n={type:"change",target:i,currentTarget:i,srcElement:i};i.trigger(n),"text"===e&&t[nU.remoteText.getterName]().trigger(n)},addtrack:function(e){i.addTrack(e.track)},removetrack:function(e){i.removeTrack(e.track)}},u=function(){for(var e=[],t=0;t<i.length;t++){for(var r=!1,o=0;o<n.length;o++)if(n[o]===i[t]){r=!0;break}r||e.push(i[t])}for(;e.length;)i.removeTrack(e.shift())};this[r.getterName+"Listeners_"]=o,Object.keys(o).forEach(function(e){var r=o[e];n.addEventListener(e,r),t.on("dispose",function(t){return n.removeEventListener(e,r)})}),this.on("loadstart",u),this.on("dispose",function(e){return t.off("loadstart",u)})}},r.proxyNativeTracks_=function(){var e=this;nB.names.forEach(function(t){e.proxyNativeTracksForType_(t)})},r.createEl=function(){var e=this.options_.tag;if(!e||!this.options_.playerElIngest&&!this.movingMediaElementInDOM){if(e){var r=e.cloneNode(!0);e.parentNode&&e.parentNode.insertBefore(r,e),t.disposeMediaElement(e),e=r}else{e=u().createElement("video");var n=r5({},this.options_.tag&&ri(this.options_.tag));tW&&!0===this.options_.nativeControlsForTouch||delete n.controls,rn(e,tA(n,{id:this.options_.techId,class:"vjs-tech"}))}e.playerId=this.options_.playerId}void 0!==this.options_.preload&&ra(e,"preload",this.options_.preload),void 0!==this.options_.disablePictureInPicture&&(e.disablePictureInPicture=this.options_.disablePictureInPicture);for(var i=["loop","muted","playsinline","autoplay"],o=0;o<i.length;o++){var l=i[o],c=this.options_[l];void 0!==c&&(c?ra(e,l,l):rs(e,l),e[l]=c)}return e},r.handleLateInit_=function(e){if(0!==e.networkState&&3!==e.networkState){if(0===e.readyState){var t=!1,r=function(){t=!0};this.on("loadstart",r);var n=function(){t||this.trigger("loadstart")};return this.on("loadedmetadata",n),void this.ready(function(){this.off("loadstart",r),this.off("loadedmetadata",n),t||this.trigger("loadstart")})}var i=["loadstart"];i.push("loadedmetadata"),e.readyState>=2&&i.push("loadeddata"),e.readyState>=3&&i.push("canplay"),e.readyState>=4&&i.push("canplaythrough"),this.ready(function(){i.forEach(function(e){this.trigger(e)},this)})}},r.setScrubbing=function(e){this.isScrubbing_=e},r.scrubbing=function(){return this.isScrubbing_},r.setCurrentTime=function(e){try{this.isScrubbing_&&this.el_.fastSeek&&tJ?this.el_.fastSeek(e):this.el_.currentTime=e}catch(e){t_(e,"Video is not ready. (Video.js)")}},r.duration=function(){var e=this;return this.el_.duration===1/0&&tF&&tV&&0===this.el_.currentTime?(this.on("timeupdate",function t(){e.el_.currentTime>0&&(e.el_.duration===1/0&&e.trigger("durationchange"),e.off("timeupdate",t))}),NaN):this.el_.duration||NaN},r.width=function(){return this.el_.offsetWidth},r.height=function(){return this.el_.offsetHeight},r.proxyWebkitFullscreen_=function(){var e=this;if("webkitDisplayingFullscreen"in this.el_){var t=function(){this.trigger("fullscreenchange",{isFullscreen:!1}),this.el_.controls&&!this.options_.nativeControlsForTouch&&this.controls()&&(this.el_.controls=!1)},r=function(){"webkitPresentationMode"in this.el_&&"picture-in-picture"!==this.el_.webkitPresentationMode&&(this.one("webkitendfullscreen",t),this.trigger("fullscreenchange",{isFullscreen:!0,nativeIOSFullscreen:!0}))};this.on("webkitbeginfullscreen",r),this.on("dispose",function(){e.off("webkitbeginfullscreen",r),e.off("webkitendfullscreen",t)})}},r.supportsFullScreen=function(){if("function"==typeof this.el_.webkitEnterFullScreen){var e=i().navigator&&i().navigator.userAgent||"";if(/Android/.test(e)||!/Chrome|Mac OS X 10.5/.test(e))return!0}return!1},r.enterFullScreen=function(){var e=this.el_;if(e.paused&&e.networkState<=e.HAVE_METADATA)nc(this.el_.play()),this.setTimeout(function(){e.pause();try{e.webkitEnterFullScreen()}catch(e){this.trigger("fullscreenerror",e)}},0);else try{e.webkitEnterFullScreen()}catch(e){this.trigger("fullscreenerror",e)}},r.exitFullScreen=function(){this.el_.webkitDisplayingFullscreen?this.el_.webkitExitFullScreen():this.trigger("fullscreenerror",Error("The video is not fullscreen"))},r.requestPictureInPicture=function(){return this.el_.requestPictureInPicture()},r.requestVideoFrameCallback=function(t){return this.featuresVideoFrameCallback&&!this.el_.webkitKeys?this.el_.requestVideoFrameCallback(t):e.prototype.requestVideoFrameCallback.call(this,t)},r.cancelVideoFrameCallback=function(t){this.featuresVideoFrameCallback&&!this.el_.webkitKeys?this.el_.cancelVideoFrameCallback(t):e.prototype.cancelVideoFrameCallback.call(this,t)},r.src=function(e){if(void 0===e)return this.el_.src;this.setSrc(e)},r.reset=function(){t.resetMediaElement(this.el_)},r.currentSrc=function(){return this.currentSource_?this.currentSource_.src:this.el_.currentSrc},r.setControls=function(e){this.el_.controls=!!e},r.addTextTrack=function(t,r,n){return this.featuresNativeTextTracks?this.el_.addTextTrack(t,r,n):e.prototype.addTextTrack.call(this,t,r,n)},r.createRemoteTextTrack=function(t){if(!this.featuresNativeTextTracks)return e.prototype.createRemoteTextTrack.call(this,t);var r=u().createElement("track");return t.kind&&(r.kind=t.kind),t.label&&(r.label=t.label),(t.language||t.srclang)&&(r.srclang=t.language||t.srclang),t.default&&(r.default=t.default),t.id&&(r.id=t.id),t.src&&(r.src=t.src),r},r.addRemoteTextTrack=function(t,r){var n=e.prototype.addRemoteTextTrack.call(this,t,r);return this.featuresNativeTextTracks&&this.el().appendChild(n),n},r.removeRemoteTextTrack=function(t){if(e.prototype.removeRemoteTextTrack.call(this,t),this.featuresNativeTextTracks)for(var r=this.$$("track"),n=r.length;n--;)t!==r[n]&&t!==r[n].track||this.el().removeChild(r[n])},r.getVideoPlaybackQuality=function(){if("function"==typeof this.el().getVideoPlaybackQuality)return this.el().getVideoPlaybackQuality();var e={};return void 0!==this.el().webkitDroppedFrameCount&&void 0!==this.el().webkitDecodedFrameCount&&(e.droppedVideoFrames=this.el().webkitDroppedFrameCount,e.totalVideoFrames=this.el().webkitDecodedFrameCount),i().performance&&"function"==typeof i().performance.now?e.creationTime=i().performance.now():i().performance&&i().performance.timing&&"number"==typeof i().performance.timing.navigationStart&&(e.creationTime=i().Date.now()-i().performance.timing.navigationStart),e},t}(nH);ov(ob,"TEST_VID",function(){if(t2()){var e=u().createElement("video"),t=u().createElement("track");return t.kind="captions",t.srclang="en",t.label="English",e.appendChild(t),e}}),ob.isSupported=function(){try{ob.TEST_VID.volume=.5}catch(e){return!1}return!(!ob.TEST_VID||!ob.TEST_VID.canPlayType)},ob.canPlayType=function(e){return ob.TEST_VID.canPlayType(e)},ob.canPlaySource=function(e,t){return ob.canPlayType(e.type)},ob.canControlVolume=function(){try{var e=ob.TEST_VID.volume;ob.TEST_VID.volume=e/2+.1;var t=e!==ob.TEST_VID.volume;return t&&t$?(i().setTimeout(function(){ob&&ob.prototype&&(ob.prototype.featuresVolumeControl=e!==ob.TEST_VID.volume)}),!1):t}catch(e){return!1}},ob.canMuteVolume=function(){try{var e=ob.TEST_VID.muted;return ob.TEST_VID.muted=!e,ob.TEST_VID.muted?ra(ob.TEST_VID,"muted","muted"):rs(ob.TEST_VID,"muted"),e!==ob.TEST_VID.muted}catch(e){return!1}},ob.canControlPlaybackRate=function(){if(tF&&tV&&tG<58)return!1;try{var e=ob.TEST_VID.playbackRate;return ob.TEST_VID.playbackRate=e/2+.1,e!==ob.TEST_VID.playbackRate}catch(e){return!1}},ob.canOverrideAttributes=function(){try{var e=function(){};Object.defineProperty(u().createElement("video"),"src",{get:e,set:e}),Object.defineProperty(u().createElement("audio"),"src",{get:e,set:e}),Object.defineProperty(u().createElement("video"),"innerHTML",{get:e,set:e}),Object.defineProperty(u().createElement("audio"),"innerHTML",{get:e,set:e})}catch(e){return!1}return!0},ob.supportsNativeTextTracks=function(){return tJ||t$&&tV},ob.supportsNativeVideoTracks=function(){return!(!ob.TEST_VID||!ob.TEST_VID.videoTracks)},ob.supportsNativeAudioTracks=function(){return!(!ob.TEST_VID||!ob.TEST_VID.audioTracks)},ob.Events=["loadstart","suspend","abort","error","emptied","stalled","loadedmetadata","loadeddata","canplay","canplaythrough","playing","waiting","seeking","seeked","ended","durationchange","timeupdate","progress","play","pause","ratechange","resize","volumechange"],[["featuresMuteControl","canMuteVolume"],["featuresPlaybackRate","canControlPlaybackRate"],["featuresSourceset","canOverrideAttributes"],["featuresNativeTextTracks","supportsNativeTextTracks"],["featuresNativeVideoTracks","supportsNativeVideoTracks"],["featuresNativeAudioTracks","supportsNativeAudioTracks"]].forEach(function(e){var t=e[0],r=e[1];ov(ob.prototype,t,function(){return ob[r]()},!0)}),ob.prototype.featuresVolumeControl=ob.canControlVolume(),ob.prototype.movingMediaElementInDOM=!t$,ob.prototype.featuresFullscreenResize=!0,ob.prototype.featuresProgressEvents=!0,ob.prototype.featuresTimeupdateEvents=!0,ob.prototype.featuresVideoFrameCallback=!(!ob.TEST_VID||!ob.TEST_VID.requestVideoFrameCallback),ob.patchCanPlayType=function(){!(tB>=4)||tq||tV||(od=ob.TEST_VID&&ob.TEST_VID.constructor.prototype.canPlayType,ob.TEST_VID.constructor.prototype.canPlayType=function(e){return e&&/^application\/(?:x-|vnd\.apple\.)mpegurl/i.test(e)?"maybe":od.call(this,e)})},ob.unpatchCanPlayType=function(){var e=ob.TEST_VID.constructor.prototype.canPlayType;return od&&(ob.TEST_VID.constructor.prototype.canPlayType=od),e},ob.patchCanPlayType(),ob.disposeMediaElement=function(e){if(e){for(e.parentNode&&e.parentNode.removeChild(e);e.hasChildNodes();)e.removeChild(e.firstChild);e.removeAttribute("src"),"function"==typeof e.load&&function(){try{e.load()}catch(e){}}()}},ob.resetMediaElement=function(e){if(e){for(var t=e.querySelectorAll("source"),r=t.length;r--;)e.removeChild(t[r]);e.removeAttribute("src"),"function"==typeof e.load&&function(){try{e.load()}catch(e){}}()}},["muted","defaultMuted","autoplay","controls","loop","playsinline"].forEach(function(e){ob.prototype[e]=function(){return this.el_[e]||this.el_.hasAttribute(e)}}),["muted","defaultMuted","autoplay","loop","playsinline"].forEach(function(e){ob.prototype["set"+r8(e)]=function(t){this.el_[e]=t,t?this.el_.setAttribute(e,e):this.el_.removeAttribute(e)}}),["paused","currentTime","buffered","volume","poster","preload","error","seeking","seekable","ended","playbackRate","defaultPlaybackRate","disablePictureInPicture","played","networkState","readyState","videoWidth","videoHeight","crossOrigin"].forEach(function(e){ob.prototype[e]=function(){return this.el_[e]}}),["volume","src","poster","preload","playbackRate","defaultPlaybackRate","disablePictureInPicture","crossOrigin"].forEach(function(e){ob.prototype["set"+r8(e)]=function(t){this.el_[e]=t}}),["pause","load","play"].forEach(function(e){ob.prototype[e]=function(){return this.el_[e]()}}),nH.withSourceHandlers(ob),ob.nativeSourceHandler={},ob.nativeSourceHandler.canPlayType=function(e){try{return ob.TEST_VID.canPlayType(e)}catch(e){return""}},ob.nativeSourceHandler.canHandleSource=function(e,t){if(e.type)return ob.nativeSourceHandler.canPlayType(e.type);if(e.src){var r=nP(e.src);return ob.nativeSourceHandler.canPlayType("video/"+r)}return""},ob.nativeSourceHandler.handleSource=function(e,t,r){t.setSrc(e.src)},ob.nativeSourceHandler.dispose=function(){},ob.registerSourceHandler(ob.nativeSourceHandler),nH.registerTech("Html5",ob);var o_=["progress","abort","suspend","emptied","stalled","loadedmetadata","loadeddata","timeupdate","resize","volumechange","texttrackchange"],oT={canplay:"CanPlay",canplaythrough:"CanPlayThrough",playing:"Playing",seeked:"Seeked"},oE=["tiny","xsmall","small","medium","large","xlarge","huge"],oS={};oE.forEach(function(e){var t="x"===e.charAt(0)?"x-"+e.substring(1):e;oS[e]="vjs-layout-"+t});var ow={tiny:210,xsmall:320,small:425,medium:768,large:1440,xlarge:2560,huge:1/0},oA=function(e){function t(r,n,i){if(r.id=r.id||n.id||"vjs_video_"+rP++,(n=tA(t.getTagSettings(r),n)).initChildren=!1,n.createEl=!1,n.evented=!1,n.reportTouchActivity=!1,!n.language){if("function"==typeof r.closest){var o,l=r.closest("[lang]");l&&l.getAttribute&&(n.language=l.getAttribute("lang"))}else for(var c=r;c&&1===c.nodeType;){if(ri(c).hasOwnProperty("lang")){n.language=c.getAttribute("lang");break}c=c.parentNode}}if((o=e.call(this,null,n,i)||this).boundDocumentFullscreenChange_=function(e){return o.documentFullscreenChange_(e)},o.boundFullWindowOnEscKey_=function(e){return o.fullWindowOnEscKey(e)},o.boundUpdateStyleEl_=function(e){return o.updateStyleEl_(e)},o.boundApplyInitTime_=function(e){return o.applyInitTime_(e)},o.boundUpdateCurrentBreakpoint_=function(e){return o.updateCurrentBreakpoint_(e)},o.boundHandleTechClick_=function(e){return o.handleTechClick_(e)},o.boundHandleTechDoubleClick_=function(e){return o.handleTechDoubleClick_(e)},o.boundHandleTechTouchStart_=function(e){return o.handleTechTouchStart_(e)},o.boundHandleTechTouchMove_=function(e){return o.handleTechTouchMove_(e)},o.boundHandleTechTouchEnd_=function(e){return o.handleTechTouchEnd_(e)},o.boundHandleTechTap_=function(e){return o.handleTechTap_(e)},o.isFullscreen_=!1,o.log=tT(o.id_),o.fsApi_=tp,o.isPosterFromTech_=!1,o.queuedCallbacks_=[],o.isReady_=!1,o.hasStarted_=!1,o.userActive_=!1,o.debugEnabled_=!1,o.audioOnlyMode_=!1,o.audioPosterMode_=!1,o.audioOnlyCache_={playerHeight:null,hiddenChildren:[]},!o.options_||!o.options_.techOrder||!o.options_.techOrder.length)throw Error("No techOrder specified. Did you overwrite videojs.options instead of just changing the properties you want to override?");if(o.tag=r,o.tagAttributes=r&&ri(r),o.language(o.options_.language),n.languages){var f={};Object.getOwnPropertyNames(n.languages).forEach(function(e){f[e.toLowerCase()]=n.languages[e]}),o.languages_=f}else o.languages_=t.prototype.options_.languages;o.resetCache_(),o.poster_=n.poster||"",o.controls_=!!n.controls,r.controls=!1,r.removeAttribute("controls"),o.changingSrc_=!1,o.playCallbacks_=[],o.playTerminatedQueue_=[],r.hasAttribute("autoplay")?o.autoplay(!0):o.autoplay(o.options_.autoplay),n.plugins&&Object.keys(n.plugins).forEach(function(e){if("function"!=typeof o[e])throw Error('plugin "'+e+'" does not exist')}),o.scrubbing_=!1,o.el_=o.createEl(),r2(h(o),{eventBusKey:"el_"}),o.fsApi_.requestFullscreen&&(rM(u(),o.fsApi_.fullscreenchange,o.boundDocumentFullscreenChange_),o.on(o.fsApi_.fullscreenchange,o.boundDocumentFullscreenChange_)),o.fluid_&&o.on(["playerreset","resize"],o.boundUpdateStyleEl_);var d=r5(o.options_);n.plugins&&Object.keys(n.plugins).forEach(function(e){o[e](n.plugins[e])}),n.debug&&o.debug(!0),o.options_.playerOptions=d,o.middleware_=[],o.playbackRates(n.playbackRates),o.initChildren(),o.isAudio("audio"===r.nodeName.toLowerCase()),o.controls()?o.addClass("vjs-controls-enabled"):o.addClass("vjs-controls-disabled"),o.el_.setAttribute("role","region"),o.isAudio()?o.el_.setAttribute("aria-label",o.localize("Audio Player")):o.el_.setAttribute("aria-label",o.localize("Video Player")),o.isAudio()&&o.addClass("vjs-audio"),o.flexNotSupported_()&&o.addClass("vjs-no-flex"),tW&&o.addClass("vjs-touch-enabled"),t$||o.addClass("vjs-workinghover"),t.players[o.id_]=h(o);var p=tc.split(".")[0];return o.addClass("vjs-v"+p),o.userActive(!0),o.reportUserActivity(),o.one("play",function(e){return o.listenForUserActivity_(e)}),o.on("stageclick",function(e){return o.handleStageClick_(e)}),o.on("keydown",function(e){return o.handleKeyDown(e)}),o.on("languagechange",function(e){return o.handleLanguagechange(e)}),o.breakpoints(o.options_.breakpoints),o.responsive(o.options_.responsive),o.on("ready",function(){o.audioPosterMode(o.options_.audioPosterMode),o.audioOnlyMode(o.options_.audioOnlyMode)}),o}m(t,e);var r=t.prototype;return r.dispose=function(){var r=this;this.trigger("dispose"),this.off("dispose"),rF(u(),this.fsApi_.fullscreenchange,this.boundDocumentFullscreenChange_),rF(u(),"keydown",this.boundFullWindowOnEscKey_),this.styleEl_&&this.styleEl_.parentNode&&(this.styleEl_.parentNode.removeChild(this.styleEl_),this.styleEl_=null),t.players[this.id_]=null,this.tag&&this.tag.player&&(this.tag.player=null),this.el_&&this.el_.player&&(this.el_.player=null),this.tech_&&(this.tech_.dispose(),this.isPosterFromTech_=!1,this.poster_=""),this.playerElIngest_&&(this.playerElIngest_=null),this.tag&&(this.tag=null),nG[this.id()]=null,nq.names.forEach(function(e){var t=r[nq[e].getterName]();t&&t.off&&t.off()}),e.prototype.dispose.call(this,{restoreEl:this.options_.restoreEl})},r.createEl=function(){var t,r=this.tag,n=this.playerElIngest_=r.parentNode&&r.parentNode.hasAttribute&&r.parentNode.hasAttribute("data-vjs-player"),o="video-js"===this.tag.tagName.toLowerCase();n?t=this.el_=r.parentNode:o||(t=this.el_=e.prototype.createEl.call(this,"div"));var l=ri(r);if(o){for(t=this.el_=r,r=this.tag=u().createElement("video");t.children.length;)r.appendChild(t.firstChild);t7(t,"video-js")||re(t,"video-js"),t.appendChild(r),n=this.playerElIngest_=t,Object.keys(t).forEach(function(e){try{r[e]=t[e]}catch(e){}})}if(r.setAttribute("tabindex","-1"),l.tabindex="-1",(tY||tV&&tK)&&(r.setAttribute("role","application"),l.role="application"),r.removeAttribute("width"),r.removeAttribute("height"),"width"in l&&delete l.width,"height"in l&&delete l.height,Object.getOwnPropertyNames(l).forEach(function(e){o&&"class"===e||t.setAttribute(e,l[e]),o&&r.setAttribute(e,l[e])}),r.playerId=r.id,r.id+="_html5_api",r.className="vjs-tech",r.player=t.player=this,this.addClass("vjs-paused"),!0!==i().VIDEOJS_NO_DYNAMIC_STYLE){this.styleEl_=rO("vjs-styles-dimensions");var c=r_(".vjs-styles-defaults"),f=r_("head");f.insertBefore(this.styleEl_,c?c.nextSibling:f.firstChild)}this.fill_=!1,this.fluid_=!1,this.width(this.options_.width),this.height(this.options_.height),this.fill(this.options_.fill),this.fluid(this.options_.fluid),this.aspectRatio(this.options_.aspectRatio),this.crossOrigin(this.options_.crossOrigin||this.options_.crossorigin);for(var d=r.getElementsByTagName("a"),h=0;h<d.length;h++){var p=d.item(h);re(p,"vjs-hidden"),p.setAttribute("hidden","hidden")}return r.initNetworkState_=r.networkState,r.parentNode&&!n&&r.parentNode.insertBefore(t,r),t9(r,t),this.children_.unshift(r),this.el_.setAttribute("lang",this.language_),this.el_.setAttribute("translate","no"),this.el_=t,t},r.crossOrigin=function(e){if(!e)return this.techGet_("crossOrigin");"anonymous"===e||"use-credentials"===e?this.techCall_("setCrossOrigin",e):t_.warn('crossOrigin must be "anonymous" or "use-credentials", given "'+e+'"')},r.width=function(e){return this.dimension("width",e)},r.height=function(e){return this.dimension("height",e)},r.dimension=function(e,t){var r=e+"_";if(void 0===t)return this[r]||0;if(""===t||"auto"===t)return this[r]=void 0,void this.updateStyleEl_();var n=parseFloat(t);isNaN(n)?t_.error('Improper value "'+t+'" supplied for for '+e):(this[r]=n,this.updateStyleEl_())},r.fluid=function(e){var t,r=this;if(void 0===e)return!!this.fluid_;this.fluid_=!!e,rW(this)&&this.off(["playerreset","resize"],this.boundUpdateStyleEl_),e?(this.addClass("vjs-fluid"),this.fill(!1),t=function(){r.on(["playerreset","resize"],r.boundUpdateStyleEl_)},rW(this)?t():(this.eventedCallbacks||(this.eventedCallbacks=[]),this.eventedCallbacks.push(t))):this.removeClass("vjs-fluid"),this.updateStyleEl_()},r.fill=function(e){if(void 0===e)return!!this.fill_;this.fill_=!!e,e?(this.addClass("vjs-fill"),this.fluid(!1)):this.removeClass("vjs-fill")},r.aspectRatio=function(e){if(void 0===e)return this.aspectRatio_;if(!/^\d+\:\d+$/.test(e))throw Error("Improper value supplied for aspect ratio. The format should be width:height, for example 16:9.");this.aspectRatio_=e,this.fluid(!0),this.updateStyleEl_()},r.updateStyleEl_=function(){if(!0!==i().VIDEOJS_NO_DYNAMIC_STYLE){var e,t,r,n=(void 0!==this.aspectRatio_&&"auto"!==this.aspectRatio_?this.aspectRatio_:this.videoWidth()>0?this.videoWidth()+":"+this.videoHeight():"16:9").split(":"),o=n[1]/n[0];e=void 0!==this.width_?this.width_:void 0!==this.height_?this.height_/o:this.videoWidth()||300,t=void 0!==this.height_?this.height_:e*o,r=/^[^a-zA-Z]/.test(this.id())?"dimensions-"+this.id():this.id()+"-dimensions",this.addClass(r),rR(this.styleEl_,"\n      ."+r+" {\n        width: "+e+"px;\n        height: "+t+"px;\n      }\n\n      ."+r+".vjs-fluid:not(.vjs-audio-only-mode) {\n        padding-top: "+100*o+"%;\n      }\n    ")}else{var u="number"==typeof this.width_?this.width_:this.options_.width,l="number"==typeof this.height_?this.height_:this.options_.height,c=this.tech_&&this.tech_.el();c&&(u>=0&&(c.width=u),l>=0&&(c.height=l))}},r.loadTech_=function(e,t){var r=this;this.tech_&&this.unloadTech_();var n=r8(e),i=e.charAt(0).toLowerCase()+e.slice(1);"Html5"!==n&&this.tag&&(nH.getTech("Html5").disposeMediaElement(this.tag),this.tag.player=null,this.tag=null),this.techName_=n,this.isReady_=!1;var o=this.autoplay();("string"==typeof this.autoplay()||!0===this.autoplay()&&this.options_.normalizeAutoplay)&&(o=!1);var u={source:t,autoplay:o,nativeControlsForTouch:this.options_.nativeControlsForTouch,playerId:this.id(),techId:this.id()+"_"+i+"_api",playsinline:this.options_.playsinline,preload:this.options_.preload,loop:this.options_.loop,disablePictureInPicture:this.options_.disablePictureInPicture,muted:this.options_.muted,poster:this.poster(),language:this.language(),playerElIngest:this.playerElIngest_||!1,"vtt.js":this.options_["vtt.js"],canOverridePoster:!!this.options_.techCanOverridePoster,enableSourceset:this.options_.enableSourceset,Promise:this.options_.Promise};nq.names.forEach(function(e){var t=nq[e];u[t.getterName]=r[t.privateName]}),tA(u,this.options_[n]),tA(u,this.options_[i]),tA(u,this.options_[e.toLowerCase()]),this.tag&&(u.tag=this.tag),t&&t.src===this.cache_.src&&this.cache_.currentTime>0&&(u.startTime=this.cache_.currentTime);var l,c,f=nH.getTech(e);if(!f)throw Error("No Tech named '"+n+"' exists! '"+n+"' should be registered using videojs.registerTech()'");this.tech_=new f(u),this.tech_.ready(rG(this,this.handleTechReady_),!0),l=this.textTracksJson_||[],c=this.tech_,l.forEach(function(e){var t=c.addRemoteTextTrack(e).track;!e.src&&e.cues&&e.cues.forEach(function(e){return t.addCue(e)})}),c.textTracks(),o_.forEach(function(e){r.on(r.tech_,e,function(t){return r["handleTech"+r8(e)+"_"](t)})}),Object.keys(oT).forEach(function(e){r.on(r.tech_,e,function(t){0===r.tech_.playbackRate()&&r.tech_.seeking()?r.queuedCallbacks_.push({callback:r["handleTech"+oT[e]+"_"].bind(r),event:t}):r["handleTech"+oT[e]+"_"](t)})}),this.on(this.tech_,"loadstart",function(e){return r.handleTechLoadStart_(e)}),this.on(this.tech_,"sourceset",function(e){return r.handleTechSourceset_(e)}),this.on(this.tech_,"waiting",function(e){return r.handleTechWaiting_(e)}),this.on(this.tech_,"ended",function(e){return r.handleTechEnded_(e)}),this.on(this.tech_,"seeking",function(e){return r.handleTechSeeking_(e)}),this.on(this.tech_,"play",function(e){return r.handleTechPlay_(e)}),this.on(this.tech_,"firstplay",function(e){return r.handleTechFirstPlay_(e)}),this.on(this.tech_,"pause",function(e){return r.handleTechPause_(e)}),this.on(this.tech_,"durationchange",function(e){return r.handleTechDurationChange_(e)}),this.on(this.tech_,"fullscreenchange",function(e,t){return r.handleTechFullscreenChange_(e,t)}),this.on(this.tech_,"fullscreenerror",function(e,t){return r.handleTechFullscreenError_(e,t)}),this.on(this.tech_,"enterpictureinpicture",function(e){return r.handleTechEnterPictureInPicture_(e)}),this.on(this.tech_,"leavepictureinpicture",function(e){return r.handleTechLeavePictureInPicture_(e)}),this.on(this.tech_,"error",function(e){return r.handleTechError_(e)}),this.on(this.tech_,"posterchange",function(e){return r.handleTechPosterChange_(e)}),this.on(this.tech_,"textdata",function(e){return r.handleTechTextData_(e)}),this.on(this.tech_,"ratechange",function(e){return r.handleTechRateChange_(e)}),this.on(this.tech_,"loadedmetadata",this.boundUpdateStyleEl_),this.usingNativeControls(this.techGet_("controls")),this.controls()&&!this.usingNativeControls()&&this.addTechControlsListeners_(),this.tech_.el().parentNode===this.el()||"Html5"===n&&this.tag||t9(this.tech_.el(),this.el()),this.tag&&(this.tag.player=null,this.tag=null)},r.unloadTech_=function(){var e,t,r,n=this;nq.names.forEach(function(e){var t=nq[e];n[t.privateName]=n[t.getterName]()}),this.textTracksJson_=(t=(e=this.tech_).$$("track"),r=Array.prototype.map.call(t,function(e){return e.track}),Array.prototype.map.call(t,function(e){var t=nf(e.track);return e.src&&(t.src=e.src),t}).concat(Array.prototype.filter.call(e.textTracks(),function(e){return -1===r.indexOf(e)}).map(nf))),this.isReady_=!1,this.tech_.dispose(),this.tech_=!1,this.isPosterFromTech_&&(this.poster_="",this.trigger("posterchange")),this.isPosterFromTech_=!1},r.tech=function(e){return void 0===e&&t_.warn("Using the tech directly can be dangerous. I hope you know what you're doing.\nSee https://github.com/videojs/video.js/issues/2617 for more info.\n"),this.tech_},r.addTechControlsListeners_=function(){this.removeTechControlsListeners_(),this.on(this.tech_,"click",this.boundHandleTechClick_),this.on(this.tech_,"dblclick",this.boundHandleTechDoubleClick_),this.on(this.tech_,"touchstart",this.boundHandleTechTouchStart_),this.on(this.tech_,"touchmove",this.boundHandleTechTouchMove_),this.on(this.tech_,"touchend",this.boundHandleTechTouchEnd_),this.on(this.tech_,"tap",this.boundHandleTechTap_)},r.removeTechControlsListeners_=function(){this.off(this.tech_,"tap",this.boundHandleTechTap_),this.off(this.tech_,"touchstart",this.boundHandleTechTouchStart_),this.off(this.tech_,"touchmove",this.boundHandleTechTouchMove_),this.off(this.tech_,"touchend",this.boundHandleTechTouchEnd_),this.off(this.tech_,"click",this.boundHandleTechClick_),this.off(this.tech_,"dblclick",this.boundHandleTechDoubleClick_)},r.handleTechReady_=function(){this.triggerReady(),this.cache_.volume&&this.techCall_("setVolume",this.cache_.volume),this.handleTechPosterChange_(),this.handleTechDurationChange_()},r.handleTechLoadStart_=function(){this.removeClass("vjs-ended"),this.removeClass("vjs-seeking"),this.error(null),this.handleTechDurationChange_(),this.paused()?(this.hasStarted(!1),this.trigger("loadstart")):(this.trigger("loadstart"),this.trigger("firstplay")),this.manualAutoplay_(!0===this.autoplay()&&this.options_.normalizeAutoplay?"play":this.autoplay())},r.manualAutoplay_=function(e){var t=this;if(this.tech_&&"string"==typeof e){var r,n=function(){var e=t.muted();t.muted(!0);var r=function(){t.muted(e)};t.playTerminatedQueue_.push(r);var n=t.play();if(nl(n))return n.catch(function(e){throw r(),Error("Rejection at manualAutoplay. Restoring muted value. "+(e||""))})};if("any"!==e||this.muted()?r="muted"!==e||this.muted()?this.play():n():nl(r=this.play())&&(r=r.catch(n)),nl(r))return r.then(function(){t.trigger({type:"autoplay-success",autoplay:e})}).catch(function(){t.trigger({type:"autoplay-failure",autoplay:e})})}},r.updateSourceCaches_=function(e){void 0===e&&(e="");var t=e,r="";"string"!=typeof t&&(t=e.src,r=e.type),this.cache_.source=this.cache_.source||{},this.cache_.sources=this.cache_.sources||[],t&&!r&&(r=function(e,t){if(!t)return"";if(e.cache_.source.src===t&&e.cache_.source.type)return e.cache_.source.type;var r=e.cache_.sources.filter(function(e){return e.src===t});if(r.length)return r[0].type;for(var n=e.$$("source"),i=0;i<n.length;i++){var o=n[i];if(o.type&&o.src&&o.src===t)return o.type}return nJ(t)}(this,t)),this.cache_.source=r5({},e,{src:t,type:r});for(var n=this.cache_.sources.filter(function(e){return e.src&&e.src===t}),i=[],o=this.$$("source"),u=[],l=0;l<o.length;l++){var c=ri(o[l]);i.push(c),c.src&&c.src===t&&u.push(c.src)}u.length&&!n.length?this.cache_.sources=i:n.length||(this.cache_.sources=[this.cache_.source]),this.cache_.src=t},r.handleTechSourceset_=function(e){var t=this;if(!this.changingSrc_){var r=function(e){return t.updateSourceCaches_(e)},n=this.currentSource().src,i=e.src;n&&!/^blob:/.test(n)&&/^blob:/.test(i)&&(!this.lastSource_||this.lastSource_.tech!==i&&this.lastSource_.player!==n)&&(r=function(){}),r(i),e.src||this.tech_.any(["sourceset","loadstart"],function(e){if("sourceset"!==e.type){var r=t.techGet("currentSrc");t.lastSource_.tech=r,t.updateSourceCaches_(r)}})}this.lastSource_={player:this.currentSource().src,tech:e.src},this.trigger({src:e.src,type:"sourceset"})},r.hasStarted=function(e){if(void 0===e)return this.hasStarted_;e!==this.hasStarted_&&(this.hasStarted_=e,this.hasStarted_?(this.addClass("vjs-has-started"),this.trigger("firstplay")):this.removeClass("vjs-has-started"))},r.handleTechPlay_=function(){this.removeClass("vjs-ended"),this.removeClass("vjs-paused"),this.addClass("vjs-playing"),this.hasStarted(!0),this.trigger("play")},r.handleTechRateChange_=function(){this.tech_.playbackRate()>0&&0===this.cache_.lastPlaybackRate&&(this.queuedCallbacks_.forEach(function(e){return e.callback(e.event)}),this.queuedCallbacks_=[]),this.cache_.lastPlaybackRate=this.tech_.playbackRate(),this.trigger("ratechange")},r.handleTechWaiting_=function(){var e=this;this.addClass("vjs-waiting"),this.trigger("waiting");var t=this.currentTime();this.on("timeupdate",function r(){t!==e.currentTime()&&(e.removeClass("vjs-waiting"),e.off("timeupdate",r))})},r.handleTechCanPlay_=function(){this.removeClass("vjs-waiting"),this.trigger("canplay")},r.handleTechCanPlayThrough_=function(){this.removeClass("vjs-waiting"),this.trigger("canplaythrough")},r.handleTechPlaying_=function(){this.removeClass("vjs-waiting"),this.trigger("playing")},r.handleTechSeeking_=function(){this.addClass("vjs-seeking"),this.trigger("seeking")},r.handleTechSeeked_=function(){this.removeClass("vjs-seeking"),this.removeClass("vjs-ended"),this.trigger("seeked")},r.handleTechFirstPlay_=function(){this.options_.starttime&&(t_.warn("Passing the `starttime` option to the player will be deprecated in 6.0"),this.currentTime(this.options_.starttime)),this.addClass("vjs-has-started"),this.trigger("firstplay")},r.handleTechPause_=function(){this.removeClass("vjs-playing"),this.addClass("vjs-paused"),this.trigger("pause")},r.handleTechEnded_=function(){this.addClass("vjs-ended"),this.removeClass("vjs-waiting"),this.options_.loop?(this.currentTime(0),this.play()):this.paused()||this.pause(),this.trigger("ended")},r.handleTechDurationChange_=function(){this.duration(this.techGet_("duration"))},r.handleTechClick_=function(e){this.controls_&&(void 0!==this.options_&&void 0!==this.options_.userActions&&void 0!==this.options_.userActions.click&&!1===this.options_.userActions.click||(void 0!==this.options_&&void 0!==this.options_.userActions&&"function"==typeof this.options_.userActions.click?this.options_.userActions.click.call(this,e):this.paused()?nc(this.play()):this.pause()))},r.handleTechDoubleClick_=function(e){this.controls_&&(Array.prototype.some.call(this.$$(".vjs-control-bar, .vjs-modal-dialog"),function(t){return t.contains(e.target)})||void 0!==this.options_&&void 0!==this.options_.userActions&&void 0!==this.options_.userActions.doubleClick&&!1===this.options_.userActions.doubleClick||(void 0!==this.options_&&void 0!==this.options_.userActions&&"function"==typeof this.options_.userActions.doubleClick?this.options_.userActions.doubleClick.call(this,e):this.isFullscreen()?this.exitFullscreen():this.requestFullscreen()))},r.handleTechTap_=function(){this.userActive(!this.userActive())},r.handleTechTouchStart_=function(){this.userWasActive=this.userActive()},r.handleTechTouchMove_=function(){this.userWasActive&&this.reportUserActivity()},r.handleTechTouchEnd_=function(e){e.cancelable&&e.preventDefault()},r.handleStageClick_=function(){this.reportUserActivity()},r.toggleFullscreenClass_=function(){this.isFullscreen()?this.addClass("vjs-fullscreen"):this.removeClass("vjs-fullscreen")},r.documentFullscreenChange_=function(e){var t=e.target.player;if(!t||t===this){var r=this.el(),n=u()[this.fsApi_.fullscreenElement]===r;!n&&r.matches?n=r.matches(":"+this.fsApi_.fullscreen):!n&&r.msMatchesSelector&&(n=r.msMatchesSelector(":"+this.fsApi_.fullscreen)),this.isFullscreen(n)}},r.handleTechFullscreenChange_=function(e,t){var r=this;t&&(t.nativeIOSFullscreen&&(this.addClass("vjs-ios-native-fs"),this.tech_.one("webkitendfullscreen",function(){r.removeClass("vjs-ios-native-fs")})),this.isFullscreen(t.isFullscreen))},r.handleTechFullscreenError_=function(e,t){this.trigger("fullscreenerror",t)},r.togglePictureInPictureClass_=function(){this.isInPictureInPicture()?this.addClass("vjs-picture-in-picture"):this.removeClass("vjs-picture-in-picture")},r.handleTechEnterPictureInPicture_=function(e){this.isInPictureInPicture(!0)},r.handleTechLeavePictureInPicture_=function(e){this.isInPictureInPicture(!1)},r.handleTechError_=function(){var e=this.tech_.error();this.error(e)},r.handleTechTextData_=function(){var e=null;arguments.length>1&&(e=arguments[1]),this.trigger("textdata",e)},r.getCache=function(){return this.cache_},r.resetCache_=function(){this.cache_={currentTime:0,initTime:0,inactivityTimeout:this.options_.inactivityTimeout,duration:NaN,lastVolume:1,lastPlaybackRate:this.defaultPlaybackRate(),media:null,src:"",source:{},sources:[],playbackRates:[],volume:1}},r.techCall_=function(e,t){this.ready(function(){if(e in nW){var r;return r=this.middleware_,this.tech_[e](r.reduce(nQ(e),t))}if(e in nX)return nz(this.middleware_,this.tech_,e,t);try{this.tech_&&this.tech_[e](t)}catch(e){throw t_(e),e}},!0)},r.techGet_=function(e){if(this.tech_&&this.tech_.isReady_){if(e in nK){var t,r;return t=this.middleware_,r=this.tech_,t.reduceRight(nQ(e),r[e]())}if(e in nX)return nz(this.middleware_,this.tech_,e);try{return this.tech_[e]()}catch(t){if(void 0===this.tech_[e])throw t_("Video.js: "+e+" method not defined for "+this.techName_+" playback technology.",t),t;if("TypeError"===t.name)throw t_("Video.js: "+e+" unavailable on "+this.techName_+" playback technology element.",t),this.tech_.isReady_=!1,t;throw t_(t),t}}},r.play=function(){var e=this,t=this.options_.Promise||i().Promise;return t?new t(function(t){e.play_(t)}):this.play_()},r.play_=function(e){var t=this;void 0===e&&(e=nc),this.playCallbacks_.push(e);var r=!!(!this.changingSrc_&&(this.src()||this.currentSrc())),n=!!(tJ||t$);if(this.waitToPlay_&&(this.off(["ready","loadstart"],this.waitToPlay_),this.waitToPlay_=null),!this.isReady_||!r)return this.waitToPlay_=function(e){t.play_()},this.one(["ready","loadstart"],this.waitToPlay_),void(!r&&n&&this.load());var i=this.techGet_("play");n&&this.hasClass("vjs-ended")&&this.resetProgressBar_(),null===i?this.runPlayTerminatedQueue_():this.runPlayCallbacks_(i)},r.runPlayTerminatedQueue_=function(){var e=this.playTerminatedQueue_.slice(0);this.playTerminatedQueue_=[],e.forEach(function(e){e()})},r.runPlayCallbacks_=function(e){var t=this.playCallbacks_.slice(0);this.playCallbacks_=[],this.playTerminatedQueue_=[],t.forEach(function(t){t(e)})},r.pause=function(){this.techCall_("pause")},r.paused=function(){return!1!==this.techGet_("paused")},r.played=function(){return this.techGet_("played")||no(0,0)},r.scrubbing=function(e){if(void 0===e)return this.scrubbing_;this.scrubbing_=!!e,this.techCall_("setScrubbing",this.scrubbing_),e?this.addClass("vjs-scrubbing"):this.removeClass("vjs-scrubbing")},r.currentTime=function(e){return void 0!==e?(e<0&&(e=0),this.isReady_&&!this.changingSrc_&&this.tech_&&this.tech_.isReady_?(this.techCall_("setCurrentTime",e),void(this.cache_.initTime=0)):(this.cache_.initTime=e,this.off("canplay",this.boundApplyInitTime_),void this.one("canplay",this.boundApplyInitTime_))):(this.cache_.currentTime=this.techGet_("currentTime")||0,this.cache_.currentTime)},r.applyInitTime_=function(){this.currentTime(this.cache_.initTime)},r.duration=function(e){if(void 0===e)return void 0!==this.cache_.duration?this.cache_.duration:NaN;(e=parseFloat(e))<0&&(e=1/0),e!==this.cache_.duration&&(this.cache_.duration=e,e===1/0?this.addClass("vjs-live"):this.removeClass("vjs-live"),isNaN(e)||this.trigger("durationchange"))},r.remainingTime=function(){return this.duration()-this.currentTime()},r.remainingTimeDisplay=function(){return Math.floor(this.duration())-Math.floor(this.currentTime())},r.buffered=function(){var e=this.techGet_("buffered");return e&&e.length||(e=no(0,0)),e},r.bufferedPercent=function(){return na(this.buffered(),this.duration())},r.bufferedEnd=function(){var e=this.buffered(),t=this.duration(),r=e.end(e.length-1);return r>t&&(r=t),r},r.volume=function(e){var t;return void 0!==e?(t=Math.max(0,Math.min(1,parseFloat(e))),this.cache_.volume=t,this.techCall_("setVolume",t),void(t>0&&this.lastVolume_(t))):isNaN(t=parseFloat(this.techGet_("volume")))?1:t},r.muted=function(e){if(void 0===e)return this.techGet_("muted")||!1;this.techCall_("setMuted",e)},r.defaultMuted=function(e){return void 0!==e?this.techCall_("setDefaultMuted",e):this.techGet_("defaultMuted")||!1},r.lastVolume_=function(e){if(void 0===e||0===e)return this.cache_.lastVolume;this.cache_.lastVolume=e},r.supportsFullScreen=function(){return this.techGet_("supportsFullScreen")||!1},r.isFullscreen=function(e){if(void 0!==e){var t=this.isFullscreen_;return this.isFullscreen_=!!e,this.isFullscreen_!==t&&this.fsApi_.prefixed&&this.trigger("fullscreenchange"),void this.toggleFullscreenClass_()}return this.isFullscreen_},r.requestFullscreen=function(e){var t=this.options_.Promise||i().Promise;if(t){var r=this;return new t(function(t,n){function i(){r.off("fullscreenerror",u),r.off("fullscreenchange",o)}function o(){i(),t()}function u(e,t){i(),n(t)}r.one("fullscreenchange",o),r.one("fullscreenerror",u);var l=r.requestFullscreenHelper_(e);l&&(l.then(i,i),l.then(t,n))})}return this.requestFullscreenHelper_()},r.requestFullscreenHelper_=function(e){var t,r=this;if(this.fsApi_.prefixed||(t=this.options_.fullscreen&&this.options_.fullscreen.options||{},void 0!==e&&(t=e)),this.fsApi_.requestFullscreen){var n=this.el_[this.fsApi_.requestFullscreen](t);return n&&n.then(function(){return r.isFullscreen(!0)},function(){return r.isFullscreen(!1)}),n}this.tech_.supportsFullScreen()&&1==!this.options_.preferFullWindow?this.techCall_("enterFullScreen"):this.enterFullWindow()},r.exitFullscreen=function(){var e=this.options_.Promise||i().Promise;if(e){var t=this;return new e(function(e,r){function n(){t.off("fullscreenerror",o),t.off("fullscreenchange",i)}function i(){n(),e()}function o(e,t){n(),r(t)}t.one("fullscreenchange",i),t.one("fullscreenerror",o);var u=t.exitFullscreenHelper_();u&&(u.then(n,n),u.then(e,r))})}return this.exitFullscreenHelper_()},r.exitFullscreenHelper_=function(){var e=this;if(this.fsApi_.requestFullscreen){var t=u()[this.fsApi_.exitFullscreen]();return t&&nc(t.then(function(){return e.isFullscreen(!1)})),t}this.tech_.supportsFullScreen()&&1==!this.options_.preferFullWindow?this.techCall_("exitFullScreen"):this.exitFullWindow()},r.enterFullWindow=function(){this.isFullscreen(!0),this.isFullWindow=!0,this.docOrigOverflow=u().documentElement.style.overflow,rM(u(),"keydown",this.boundFullWindowOnEscKey_),u().documentElement.style.overflow="hidden",re(u().body,"vjs-full-window"),this.trigger("enterFullWindow")},r.fullWindowOnEscKey=function(e){d().isEventKey(e,"Esc")&&!0===this.isFullscreen()&&(this.isFullWindow?this.exitFullWindow():this.exitFullscreen())},r.exitFullWindow=function(){this.isFullscreen(!1),this.isFullWindow=!1,rF(u(),"keydown",this.boundFullWindowOnEscKey_),u().documentElement.style.overflow=this.docOrigOverflow,rt(u().body,"vjs-full-window"),this.trigger("exitFullWindow")},r.disablePictureInPicture=function(e){if(void 0===e)return this.techGet_("disablePictureInPicture");this.techCall_("setDisablePictureInPicture",e),this.options_.disablePictureInPicture=e,this.trigger("disablepictureinpicturechanged")},r.isInPictureInPicture=function(e){return void 0!==e?(this.isInPictureInPicture_=!!e,void this.togglePictureInPictureClass_()):!!this.isInPictureInPicture_},r.requestPictureInPicture=function(){if("pictureInPictureEnabled"in u()&&!1===this.disablePictureInPicture())return this.techGet_("requestPictureInPicture")},r.exitPictureInPicture=function(){if("pictureInPictureEnabled"in u())return u().exitPictureInPicture()},r.handleKeyDown=function(e){var t,r,n=this.options_.userActions;n&&n.hotkeys&&(r=(t=this.el_.ownerDocument.activeElement).tagName.toLowerCase(),t.isContentEditable||("input"===r?-1===["button","checkbox","hidden","radio","reset","submit"].indexOf(t.type):-1!==["textarea"].indexOf(r))||("function"==typeof n.hotkeys?n.hotkeys.call(this,e):this.handleHotkeys(e)))},r.handleHotkeys=function(e){var t=this.options_.userActions?this.options_.userActions.hotkeys:{},r=t.fullscreenKey,n=void 0===r?function(e){return d().isEventKey(e,"f")}:r,i=t.muteKey,o=void 0===i?function(e){return d().isEventKey(e,"m")}:i,l=t.playPauseKey,c=void 0===l?function(e){return d().isEventKey(e,"k")||d().isEventKey(e,"Space")}:l;if(n.call(this,e)){e.preventDefault(),e.stopPropagation();var f=nr.getComponent("FullscreenToggle");!1!==u()[this.fsApi_.fullscreenEnabled]&&f.prototype.handleClick.call(this,e)}else o.call(this,e)?(e.preventDefault(),e.stopPropagation(),nr.getComponent("MuteToggle").prototype.handleClick.call(this,e)):c.call(this,e)&&(e.preventDefault(),e.stopPropagation(),nr.getComponent("PlayToggle").prototype.handleClick.call(this,e))},r.canPlayType=function(e){for(var t,r=0,n=this.options_.techOrder;r<n.length;r++){var i=n[r],o=nH.getTech(i);if(o||(o=nr.getComponent(i)),o){if(o.isSupported()&&(t=o.canPlayType(e)))return t}else t_.error('The "'+i+'" tech is undefined. Skipped browser support check for that tech.')}return""},r.selectSource=function(e){var t=this,r=this.options_.techOrder.map(function(e){return[e,nH.getTech(e)]}).filter(function(e){var t=e[0],r=e[1];return r?r.isSupported():(t_.error('The "'+t+'" tech is undefined. Skipped browser support check for that tech.'),!1)}),n=function(e,t,r){var n;return e.some(function(e){return t.some(function(t){if(n=r(e,t))return!0})}),n},i=function(e,r){var n=e[0];if(e[1].canPlaySource(r,t.options_[n.toLowerCase()]))return{source:r,tech:n}};return(this.options_.sourceOrder?n(e,r,function(e,t){return i(t,e)}):n(r,e,i))||!1},r.handleSrc_=function(e,t){var r=this;if(void 0===e)return this.cache_.src||"";this.resetRetryOnError_&&this.resetRetryOnError_();var n=nZ(e);if(n.length){if(this.changingSrc_=!0,t||(this.cache_.sources=n),this.updateSourceCaches_(n[0]),function(e,t,r){e.setTimeout(function(){return function e(t,r,n,i,o,u){void 0===t&&(t={}),void 0===r&&(r=[]),void 0===o&&(o=[]),void 0===u&&(u=!1);var l=r,c=l[0],f=l.slice(1);if("string"==typeof c)e(t,nV[c],n,i,o,u);else if(c){var d=function(e,t){var r=nG[e.id()],n=null;if(null==r)return n=t(e),nG[e.id()]=[[t,n]],n;for(var i=0;i<r.length;i++){var o=r[i],u=o[0],l=o[1];u===t&&(n=l)}return null===n&&(n=t(e),r.push([t,n])),n}(i,c);if(!d.setSource)return o.push(d),e(t,f,n,i,o,u);d.setSource(tA({},t),function(r,l){if(r)return e(t,f,n,i,o,u);o.push(d),e(l,t.type===l.type?f:nV[l.type],n,i,o,u)})}else f.length?e(t,f,n,i,o,u):u?n(t,o):e(t,nV["*"],n,i,o,!0)}(t,nV[t.type],r,e)},1)}(this,n[0],function(e,i){var o;if(r.middleware_=i,t||(r.cache_.sources=n),r.updateSourceCaches_(e),r.src_(e))return n.length>1?r.handleSrc_(n.slice(1)):(r.changingSrc_=!1,r.setTimeout(function(){this.error({code:4,message:this.options_.notSupportedMessage})},0),void r.triggerReady());o=r.tech_,i.forEach(function(e){return e.setTech&&e.setTech(o)})}),this.options_.retryOnError&&n.length>1){var i=function(){r.error(null),r.handleSrc_(n.slice(1),!0)},o=function(){r.off("error",i)};this.one("error",i),this.one("playing",o),this.resetRetryOnError_=function(){r.off("error",i),r.off("playing",o)}}}else this.setTimeout(function(){this.error({code:4,message:this.options_.notSupportedMessage})},0)},r.src=function(e){return this.handleSrc_(e,!1)},r.src_=function(e){var t,r,n=this,i=this.selectSource([e]);return!i||(t=i.tech,r=this.techName_,r8(t)!==r8(r)?(this.changingSrc_=!0,this.loadTech_(i.tech,i.source),this.tech_.ready(function(){n.changingSrc_=!1})):this.ready(function(){this.tech_.constructor.prototype.hasOwnProperty("setSource")?this.techCall_("setSource",e):this.techCall_("src",e.src),this.changingSrc_=!1},!0),!1)},r.load=function(){this.techCall_("load")},r.reset=function(){var e=this,t=this.options_.Promise||i().Promise;this.paused()||!t?this.doReset_():nc(this.play().then(function(){return e.doReset_()}))},r.doReset_=function(){this.tech_&&this.tech_.clearTracks("text"),this.resetCache_(),this.poster(""),this.loadTech_(this.options_.techOrder[0],null),this.techCall_("reset"),this.resetControlBarUI_(),rW(this)&&this.trigger("playerreset")},r.resetControlBarUI_=function(){this.resetProgressBar_(),this.resetPlaybackRate_(),this.resetVolumeBar_()},r.resetProgressBar_=function(){this.currentTime(0);var e=this.controlBar||{},t=e.durationDisplay,r=e.remainingTimeDisplay;t&&t.updateContent(),r&&r.updateContent()},r.resetPlaybackRate_=function(){this.playbackRate(this.defaultPlaybackRate()),this.handleTechRateChange_()},r.resetVolumeBar_=function(){this.volume(1),this.trigger("volumechange")},r.currentSources=function(){var e=this.currentSource(),t=[];return 0!==Object.keys(e).length&&t.push(e),this.cache_.sources||t},r.currentSource=function(){return this.cache_.source||{}},r.currentSrc=function(){return this.currentSource()&&this.currentSource().src||""},r.currentType=function(){return this.currentSource()&&this.currentSource().type||""},r.preload=function(e){return void 0!==e?(this.techCall_("setPreload",e),void(this.options_.preload=e)):this.techGet_("preload")},r.autoplay=function(e){var t;if(void 0===e)return this.options_.autoplay||!1;"string"==typeof e&&/(any|play|muted)/.test(e)||!0===e&&this.options_.normalizeAutoplay?(this.options_.autoplay=e,this.manualAutoplay_("string"==typeof e?e:"play"),t=!1):this.options_.autoplay=!!e,t=void 0===t?this.options_.autoplay:t,this.tech_&&this.techCall_("setAutoplay",t)},r.playsinline=function(e){return void 0!==e?(this.techCall_("setPlaysinline",e),this.options_.playsinline=e,this):this.techGet_("playsinline")},r.loop=function(e){return void 0!==e?(this.techCall_("setLoop",e),void(this.options_.loop=e)):this.techGet_("loop")},r.poster=function(e){if(void 0===e)return this.poster_;e||(e=""),e!==this.poster_&&(this.poster_=e,this.techCall_("setPoster",e),this.isPosterFromTech_=!1,this.trigger("posterchange"))},r.handleTechPosterChange_=function(){if((!this.poster_||this.options_.techCanOverridePoster)&&this.tech_&&this.tech_.poster){var e=this.tech_.poster()||"";e!==this.poster_&&(this.poster_=e,this.isPosterFromTech_=!0,this.trigger("posterchange"))}},r.controls=function(e){if(void 0===e)return!!this.controls_;e=!!e,this.controls_!==e&&(this.controls_=e,this.usingNativeControls()&&this.techCall_("setControls",e),this.controls_?(this.removeClass("vjs-controls-disabled"),this.addClass("vjs-controls-enabled"),this.trigger("controlsenabled"),this.usingNativeControls()||this.addTechControlsListeners_()):(this.removeClass("vjs-controls-enabled"),this.addClass("vjs-controls-disabled"),this.trigger("controlsdisabled"),this.usingNativeControls()||this.removeTechControlsListeners_()))},r.usingNativeControls=function(e){if(void 0===e)return!!this.usingNativeControls_;e=!!e,this.usingNativeControls_!==e&&(this.usingNativeControls_=e,this.usingNativeControls_?(this.addClass("vjs-using-native-controls"),this.trigger("usingnativecontrols")):(this.removeClass("vjs-using-native-controls"),this.trigger("usingcustomcontrols")))},r.error=function(e){var t=this;if(void 0===e)return this.error_||null;if(td("beforeerror").forEach(function(r){var n=r(t,e);tC(n)&&!Array.isArray(n)||"string"==typeof n||"number"==typeof n||null===n?e=n:t.log.error("please return a value that MediaError expects in beforeerror hooks")}),this.options_.suppressNotSupportedError&&e&&4===e.code){var r=function(){this.error(e)};return this.options_.suppressNotSupportedError=!1,this.any(["click","touchstart"],r),void this.one("loadstart",function(){this.off(["click","touchstart"],r)})}if(null===e)return this.error_=e,this.removeClass("vjs-error"),void(this.errorDisplay&&this.errorDisplay.close());this.error_=new ns(e),this.addClass("vjs-error"),t_.error("(CODE:"+this.error_.code+" "+ns.errorTypes[this.error_.code]+")",this.error_.message,this.error_),this.trigger("error"),td("error").forEach(function(e){return e(t,t.error_)})},r.reportUserActivity=function(e){this.userActivity_=!0},r.userActive=function(e){if(void 0===e)return this.userActive_;if((e=!!e)!==this.userActive_){if(this.userActive_=e,this.userActive_)return this.userActivity_=!0,this.removeClass("vjs-user-inactive"),this.addClass("vjs-user-active"),void this.trigger("useractive");this.tech_&&this.tech_.one("mousemove",function(e){e.stopPropagation(),e.preventDefault()}),this.userActivity_=!1,this.removeClass("vjs-user-active"),this.addClass("vjs-user-inactive"),this.trigger("userinactive")}},r.listenForUserActivity_=function(){var e,t,r,n=rG(this,this.reportUserActivity),i=function(t){n(),this.clearInterval(e)};this.on("mousedown",function(){n(),this.clearInterval(e),e=this.setInterval(n,250)}),this.on("mousemove",function(e){e.screenX===t&&e.screenY===r||(t=e.screenX,r=e.screenY,n())}),this.on("mouseup",i),this.on("mouseleave",i);var o,u=this.getChild("controlBar");!u||t$||tF||(u.on("mouseenter",function(e){0!==this.player().options_.inactivityTimeout&&(this.player().cache_.inactivityTimeout=this.player().options_.inactivityTimeout),this.player().options_.inactivityTimeout=0}),u.on("mouseleave",function(e){this.player().options_.inactivityTimeout=this.player().cache_.inactivityTimeout})),this.on("keydown",n),this.on("keyup",n),this.setInterval(function(){if(this.userActivity_){this.userActivity_=!1,this.userActive(!0),this.clearTimeout(o);var e=this.options_.inactivityTimeout;e<=0||(o=this.setTimeout(function(){this.userActivity_||this.userActive(!1)},e))}},250)},r.playbackRate=function(e){if(void 0===e)return this.tech_&&this.tech_.featuresPlaybackRate?this.cache_.lastPlaybackRate||this.techGet_("playbackRate"):1;this.techCall_("setPlaybackRate",e)},r.defaultPlaybackRate=function(e){return void 0!==e?this.techCall_("setDefaultPlaybackRate",e):this.tech_&&this.tech_.featuresPlaybackRate?this.techGet_("defaultPlaybackRate"):1},r.isAudio=function(e){if(void 0===e)return!!this.isAudio_;this.isAudio_=!!e},r.enableAudioOnlyUI_=function(){var e=this;this.addClass("vjs-audio-only-mode");var t=this.children(),r=this.getChild("ControlBar"),n=r&&r.currentHeight();t.forEach(function(t){t!==r&&t.el_&&!t.hasClass("vjs-hidden")&&(t.hide(),e.audioOnlyCache_.hiddenChildren.push(t))}),this.audioOnlyCache_.playerHeight=this.currentHeight(),this.height(n),this.trigger("audioonlymodechange")},r.disableAudioOnlyUI_=function(){this.removeClass("vjs-audio-only-mode"),this.audioOnlyCache_.hiddenChildren.forEach(function(e){return e.show()}),this.height(this.audioOnlyCache_.playerHeight),this.trigger("audioonlymodechange")},r.audioOnlyMode=function(e){var t=this;if("boolean"!=typeof e||e===this.audioOnlyMode_)return this.audioOnlyMode_;this.audioOnlyMode_=e;var r=this.options_.Promise||i().Promise;if(r){if(e){var n=[];return this.isInPictureInPicture()&&n.push(this.exitPictureInPicture()),this.isFullscreen()&&n.push(this.exitFullscreen()),this.audioPosterMode()&&n.push(this.audioPosterMode(!1)),r.all(n).then(function(){return t.enableAudioOnlyUI_()})}return r.resolve().then(function(){return t.disableAudioOnlyUI_()})}e?(this.isInPictureInPicture()&&this.exitPictureInPicture(),this.isFullscreen()&&this.exitFullscreen(),this.enableAudioOnlyUI_()):this.disableAudioOnlyUI_()},r.enablePosterModeUI_=function(){(this.tech_&&this.tech_).hide(),this.addClass("vjs-audio-poster-mode"),this.trigger("audiopostermodechange")},r.disablePosterModeUI_=function(){(this.tech_&&this.tech_).show(),this.removeClass("vjs-audio-poster-mode"),this.trigger("audiopostermodechange")},r.audioPosterMode=function(e){var t=this;if("boolean"!=typeof e||e===this.audioPosterMode_)return this.audioPosterMode_;this.audioPosterMode_=e;var r=this.options_.Promise||i().Promise;return r?e?this.audioOnlyMode()?this.audioOnlyMode(!1).then(function(){t.enablePosterModeUI_()}):r.resolve().then(function(){t.enablePosterModeUI_()}):r.resolve().then(function(){t.disablePosterModeUI_()}):e?(this.audioOnlyMode()&&this.audioOnlyMode(!1),void this.enablePosterModeUI_()):void this.disablePosterModeUI_()},r.addTextTrack=function(e,t,r){if(this.tech_)return this.tech_.addTextTrack(e,t,r)},r.addRemoteTextTrack=function(e,t){if(this.tech_)return this.tech_.addRemoteTextTrack(e,t)},r.removeRemoteTextTrack=function(e){void 0===e&&(e={});var t=e.track;if(t||(t=e),this.tech_)return this.tech_.removeRemoteTextTrack(t)},r.getVideoPlaybackQuality=function(){return this.techGet_("getVideoPlaybackQuality")},r.videoWidth=function(){return this.tech_&&this.tech_.videoWidth&&this.tech_.videoWidth()||0},r.videoHeight=function(){return this.tech_&&this.tech_.videoHeight&&this.tech_.videoHeight()||0},r.language=function(e){if(void 0===e)return this.language_;this.language_!==String(e).toLowerCase()&&(this.language_=String(e).toLowerCase(),rW(this)&&this.trigger("languagechange"))},r.languages=function(){return r5(t.prototype.options_.languages,this.languages_)},r.toJSON=function(){var e=r5(this.options_),t=e.tracks;e.tracks=[];for(var r=0;r<t.length;r++){var n=t[r];(n=r5(n)).player=void 0,e.tracks[r]=n}return e},r.createModal=function(e,t){var r=this;(t=t||{}).content=e||"";var n=new nh(this,t);return this.addChild(n),n.on("dispose",function(){r.removeChild(n)}),n.open(),n},r.updateCurrentBreakpoint_=function(){if(this.responsive())for(var e=this.currentBreakpoint(),t=this.currentWidth(),r=0;r<oE.length;r++){var n=oE[r];if(t<=this.breakpoints_[n]){if(e===n)return;e&&this.removeClass(oS[e]),this.addClass(oS[n]),this.breakpoint_=n;break}}},r.removeCurrentBreakpoint_=function(){var e=this.currentBreakpointClass();this.breakpoint_="",e&&this.removeClass(e)},r.breakpoints=function(e){return void 0===e||(this.breakpoint_="",this.breakpoints_=tA({},ow,e),this.updateCurrentBreakpoint_()),tA(this.breakpoints_)},r.responsive=function(e){return void 0===e?this.responsive_:(e=!!e)!==this.responsive_?(this.responsive_=e,e?(this.on("playerresize",this.boundUpdateCurrentBreakpoint_),this.updateCurrentBreakpoint_()):(this.off("playerresize",this.boundUpdateCurrentBreakpoint_),this.removeCurrentBreakpoint_()),e):void 0},r.currentBreakpoint=function(){return this.breakpoint_},r.currentBreakpointClass=function(){return oS[this.breakpoint_]||""},r.loadMedia=function(e,t){var r=this;if(e&&"object"==typeof e){this.reset(),this.cache_.media=r5(e);var n=this.cache_.media,i=n.artwork,o=n.poster,u=n.src,l=n.textTracks;!i&&o&&(this.cache_.media.artwork=[{src:o,type:nJ(o)}]),u&&this.src(u),o&&this.poster(o),Array.isArray(l)&&l.forEach(function(e){return r.addRemoteTextTrack(e,!1)}),this.ready(t)}},r.getMedia=function(){if(!this.cache_.media){var e=this.poster(),t={src:this.currentSources(),textTracks:Array.prototype.map.call(this.remoteTextTracks(),function(e){return{kind:e.kind,label:e.label,language:e.language,src:e.src}})};return e&&(t.poster=e,t.artwork=[{src:t.poster,type:nJ(t.poster)}]),t}return r5(this.cache_.media)},t.getTagSettings=function(e){var t={sources:[],tracks:[]},r=ri(e),n=r["data-setup"];if(t7(e,"vjs-fill")&&(r.fill=!0),t7(e,"vjs-fluid")&&(r.fluid=!0),null!==n){var i=y()(n||"{}"),o=i[0],u=i[1];o&&t_.error(o),tA(r,u)}if(tA(t,r),e.hasChildNodes())for(var l=e.childNodes,c=0,f=l.length;c<f;c++){var d=l[c],h=d.nodeName.toLowerCase();"source"===h?t.sources.push(ri(d)):"track"===h&&t.tracks.push(ri(d))}return t},r.flexNotSupported_=function(){var e=u().createElement("i");return!("flexBasis"in e.style||"webkitFlexBasis"in e.style||"mozFlexBasis"in e.style||"msFlexBasis"in e.style||"msFlexOrder"in e.style)},r.debug=function(e){if(void 0===e)return this.debugEnabled_;e?(this.trigger("debugon"),this.previousLogLevel_=this.log.level,this.log.level("debug"),this.debugEnabled_=!0):(this.trigger("debugoff"),this.log.level(this.previousLogLevel_),this.previousLogLevel_=void 0,this.debugEnabled_=!1)},r.playbackRates=function(e){if(void 0===e)return this.cache_.playbackRates;Array.isArray(e)&&e.every(function(e){return"number"==typeof e})&&(this.cache_.playbackRates=e,this.trigger("playbackrateschange"))},t}(nr);nq.names.forEach(function(e){var t=nq[e];oA.prototype[t.getterName]=function(){return this.tech_?this.tech_[t.getterName]():(this[t.privateName]=this[t.privateName]||new t.ListClass,this[t.privateName])}}),oA.prototype.crossorigin=oA.prototype.crossOrigin,oA.players={};var oC=i().navigator;oA.prototype.options_={techOrder:nH.defaultTechOrder_,html5:{},inactivityTimeout:2e3,playbackRates:[],liveui:!1,children:["mediaLoader","posterImage","textTrackDisplay","loadingSpinner","bigPlayButton","liveTracker","controlBar","errorDisplay","textTrackSettings","resizeManager"],language:oC&&(oC.languages&&oC.languages[0]||oC.userLanguage||oC.language)||"en",languages:{},notSupportedMessage:"No compatible source was found for this media.",normalizeAutoplay:!1,fullscreen:{options:{navigationUI:"hide"}},breakpoints:{},responsive:!1,audioOnlyMode:!1,audioPosterMode:!1},["ended","seeking","seekable","networkState","readyState"].forEach(function(e){oA.prototype[e]=function(){return this.techGet_(e)}}),o_.forEach(function(e){oA.prototype["handleTech"+r8(e)+"_"]=function(){return this.trigger(e)}}),nr.registerComponent("Player",oA);var oI="plugin",oO="activePlugins_",oR={},oP=function(e){return oR.hasOwnProperty(e)},ok=function(e){return oP(e)?oR[e]:void 0},oD=function(e,t){e[oO]=e[oO]||{},e[oO][t]=!0},oN=function(e,t,r){var n=(r?"before":"")+"pluginsetup";e.trigger(n,t),e.trigger(n+":"+t.name,t)},oL=function(e,t){return t.prototype.name=e,function(){oN(this,{name:e,plugin:t,instance:null},!0);for(var r=arguments.length,n=Array(r),i=0;i<r;i++)n[i]=arguments[i];var o=E(t,[this].concat(n));return this[e]=function(){return o},oN(this,o.getEventHash()),o}},ox=function(){function e(t){if(this.constructor===e)throw Error("Plugin must be sub-classed; not directly instantiated.");this.player=t,this.log||(this.log=this.player.log.createLogger(this.name)),r2(this),delete this.trigger,r4(this,this.constructor.defaultState),oD(t,this.name),this.dispose=this.dispose.bind(this),t.on("dispose",this.dispose)}var t=e.prototype;return t.version=function(){return this.constructor.VERSION},t.getEventHash=function(e){return void 0===e&&(e={}),e.name=this.name,e.plugin=this.constructor,e.instance=this,e},t.trigger=function(e,t){return void 0===t&&(t={}),rB(this.eventBusEl_,e,this.getEventHash(t))},t.handleStateChanged=function(e){},t.dispose=function(){var e=this.name,t=this.player;this.trigger("dispose"),this.off(),t.off("dispose",this.dispose),t[oO][e]=!1,this.player=this.state=null,t[e]=oL(e,oR[e])},e.isBasic=function(t){var r="string"==typeof t?ok(t):t;return"function"==typeof r&&!e.prototype.isPrototypeOf(r.prototype)},e.registerPlugin=function(t,r){var n;if("string"!=typeof t)throw Error('Illegal plugin name, "'+t+'", must be a string, was '+typeof t+".");if(oP(t))t_.warn('A plugin named "'+t+'" already exists. You may want to avoid re-registering plugins!');else if(oA.prototype.hasOwnProperty(t))throw Error('Illegal plugin name, "'+t+'", cannot share a name with an existing player method!');if("function"!=typeof r)throw Error('Illegal plugin for "'+t+'", must be a function, was '+typeof r+".");return oR[t]=r,t!==oI&&(e.isBasic(r)?oA.prototype[t]=(n=function(){oN(this,{name:t,plugin:r,instance:null},!0);var e=r.apply(this,arguments);return oD(this,t),oN(this,{name:t,plugin:r,instance:e}),e},Object.keys(r).forEach(function(e){n[e]=r[e]}),n):oA.prototype[t]=oL(t,r)),r},e.deregisterPlugin=function(e){if(e===oI)throw Error("Cannot de-register base plugin.");oP(e)&&(delete oR[e],delete oA.prototype[e])},e.getPlugins=function(e){var t;return void 0===e&&(e=Object.keys(oR)),e.forEach(function(e){var r=ok(e);r&&((t=t||{})[e]=r)}),t},e.getPluginVersion=function(e){var t=ok(e);return t&&t.VERSION||""},e}();ox.getPlugin=ok,ox.BASE_PLUGIN_NAME=oI,ox.registerPlugin(oI,ox),oA.prototype.usingPlugin=function(e){return!!this[oO]&&!0===this[oO][e]},oA.prototype.hasPlugin=function(e){return!!oP(e)};var oj=!1,oM=function(e){return 0===e.indexOf("#")?e.slice(1):e};function oF(e,t,r){var n=oF.getPlayer(e);if(n)return t&&t_.warn('Player "'+e+'" is already initialised. Options will not be applied.'),r&&n.ready(r),n;var i="string"==typeof e?r_("#"+oM(e)):e;if(!t3(i))throw TypeError("The element or ID supplied is not valid. (videojs)");return i.ownerDocument.defaultView&&i.ownerDocument.body.contains(i)||t_.warn("The element supplied is not included in the DOM"),!0===(t=t||{}).restoreEl&&(t.restoreEl=(i.parentNode&&i.parentNode.hasAttribute("data-vjs-player")?i.parentNode:i).cloneNode(!0)),td("beforesetup").forEach(function(e){var r=e(i,r5(t));tC(r)&&!Array.isArray(r)?t=r5(t,r):t_.error("please return an object in beforesetup hooks")}),n=new(nr.getComponent("Player"))(i,t,r),td("setup").forEach(function(e){return e(n)}),n}if(oF.hooks_=tf,oF.hooks=td,oF.hook=function(e,t){td(e,t)},oF.hookOnce=function(e,t){td(e,[].concat(t).map(function(t){return function r(){return th(e,r),t.apply(void 0,arguments)}}))},oF.removeHook=th,!0!==i().VIDEOJS_NO_DYNAMIC_STYLE&&t2()){var oB=r_(".vjs-styles-defaults");if(!oB){oB=rO("vjs-styles-defaults");var oU=r_("head");oU&&oU.insertBefore(oB,oU.firstChild),rR(oB,"\n      .video-js {\n        width: 300px;\n        height: 150px;\n      }\n\n      .vjs-fluid:not(.vjs-audio-only-mode) {\n        padding-top: 56.25%\n      }\n    ")}}rA(1,oF),oF.VERSION=tc,oF.options=oA.prototype.options_,oF.getPlayers=function(){return oA.players},oF.getPlayer=function(e){var t,r=oA.players;if("string"==typeof e){var n=oM(e),i=r[n];if(i)return i;t=r_("#"+n)}else t=e;if(t3(t)){var o=t,u=o.player,l=o.playerId;if(u||r[l])return u||r[l]}},oF.getAllPlayers=function(){return Object.keys(oA.players).map(function(e){return oA.players[e]}).filter(Boolean)},oF.players=oA.players,oF.getComponent=nr.getComponent,oF.registerComponent=function(e,t){nH.isTech(t)&&t_.warn("The "+e+" tech was registered as a component. It should instead be registered using videojs.registerTech(name, tech)"),nr.registerComponent.call(nr,e,t)},oF.getTech=nH.getTech,oF.registerTech=nH.registerTech,oF.use=function(e,t){nV[e]=nV[e]||[],nV[e].push(t)},Object.defineProperty(oF,"middleware",{value:{},writeable:!1,enumerable:!0}),Object.defineProperty(oF.middleware,"TERMINATOR",{value:nY,writeable:!1,enumerable:!0}),oF.browser=tZ,oF.TOUCH_ENABLED=tW,oF.extend=function(e,t){void 0===t&&(t={}),oj||(t_.warn("videojs.extend is deprecated as of Video.js 7.22.0 and will be removed in Video.js 8.0.0"),oj=!0);var r=function(){e.apply(this,arguments)},n={};for(var i in"object"==typeof t?(t.constructor!==Object.prototype.constructor&&(r=t.constructor),n=t):"function"==typeof t&&(r=t),function(e,t){if("function"!=typeof t&&null!==t)throw TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&p(e,t)}(r,e),e&&(r.super_=e),n)n.hasOwnProperty(i)&&(r.prototype[i]=n[i]);return r},oF.mergeOptions=r5,oF.bind=rG,oF.registerPlugin=ox.registerPlugin,oF.deregisterPlugin=ox.deregisterPlugin,oF.plugin=function(e,t){return t_.warn("videojs.plugin() is deprecated; use videojs.registerPlugin() instead"),ox.registerPlugin(e,t)},oF.getPlugins=ox.getPlugins,oF.getPlugin=ox.getPlugin,oF.getPluginVersion=ox.getPluginVersion,oF.addLanguage=function(e,t){var r;return e=(""+e).toLowerCase(),oF.options.languages=r5(oF.options.languages,((r={})[e]=t,r)),oF.options.languages[e]},oF.log=t_,oF.createLogger=tT,oF.createTimeRange=oF.createTimeRanges=no,oF.formatTime=is,oF.setFormatTime=function(e){ia=e},oF.resetFormatTime=function(){ia=io},oF.parseUrl=nO,oF.isCrossOrigin=nk,oF.EventTarget=rz,oF.on=rM,oF.one=rU,oF.off=rF,oF.trigger=rB,oF.xhr=b(),oF.TextTrack=nx,oF.AudioTrack=nj,oF.VideoTrack=nM,["isEl","isTextNode","createEl","hasClass","addClass","removeClass","toggleClass","setAttributes","getAttributes","emptyEl","appendContent","insertContent"].forEach(function(e){oF[e]=function(){return t_.warn("videojs."+e+"() is deprecated; use videojs.dom."+e+"() instead"),rE[e].apply(null,arguments)}}),oF.computedStyle=tO,oF.dom=rE,oF.url=nD,oF.defineLazyProperty=ov,oF.addLanguage("en",{"Non-Fullscreen":"Exit Fullscreen"});var oq=function(e,t,r){return e&&r&&r.responseURL&&t!==r.responseURL?r.responseURL:t},oH=function(e){return oF.log.debug?oF.log.debug.bind(oF,"VHS:",e+" >"):function(){}},oV=1/30,oG=function(e,t){var r,n=[];if(e&&e.length)for(r=0;r<e.length;r++)t(e.start(r),e.end(r))&&n.push([e.start(r),e.end(r)]);return oF.createTimeRanges(n)},oY=function(e,t){return oG(e,function(e,r){return e-.1<=t&&r+.1>=t})},oz=function(e,t){return oG(e,function(e){return e-oV>=t})},oK=function(e){var t=[];if(!e||!e.length)return"";for(var r=0;r<e.length;r++)t.push(e.start(r)+" => "+e.end(r));return t.join(", ")},oW=function(e){for(var t=[],r=0;r<e.length;r++)t.push({start:e.start(r),end:e.end(r)});return t},oX=function(e){if(e&&e.length&&e.end)return e.end(e.length-1)},oQ=function(e,t){var r=0;if(!e||!e.length)return r;for(var n=0;n<e.length;n++){var i=e.start(n),o=e.end(n);t>o||(r+=t>i&&t<=o?o-t:o-i)}return r},o$=oF.createTimeRange,oJ=function(e,t){if(!t.preload)return t.duration;var r=0;return(t.parts||[]).forEach(function(e){r+=e.duration}),(t.preloadHints||[]).forEach(function(t){"PART"===t.type&&(r+=e.partTargetDuration)}),r},oZ=function(e){return(e.segments||[]).reduce(function(e,t,r){return t.parts?t.parts.forEach(function(n,i){e.push({duration:n.duration,segmentIndex:r,partIndex:i,part:n,segment:t})}):e.push({duration:t.duration,segmentIndex:r,partIndex:null,segment:t,part:null}),e},[])},o0=function(e){var t=e.segments&&e.segments.length&&e.segments[e.segments.length-1];return t&&t.parts||[]},o1=function(e){var t=e.preloadSegment;if(t){var r=t.parts;return(t.preloadHints||[]).reduce(function(e,t){return e+("PART"===t.type?1:0)},0)+(r&&r.length?r.length:0)}},o2=function(e,t){if(t.endList)return 0;if(e&&e.suggestedPresentationDelay)return e.suggestedPresentationDelay;var r=o0(t).length>0;return r&&t.serverControl&&t.serverControl.partHoldBack?t.serverControl.partHoldBack:r&&t.partTargetDuration?3*t.partTargetDuration:t.serverControl&&t.serverControl.holdBack?t.serverControl.holdBack:t.targetDuration?3*t.targetDuration:0},o3=function(e,t,r){if(void 0===t&&(t=e.mediaSequence+e.segments.length),t<e.mediaSequence)return 0;var n=function(e,t){var r=0,n=t-e.mediaSequence,i=e.segments[n];if(i){if(void 0!==i.start)return{result:i.start,precise:!0};if(void 0!==i.end)return{result:i.end-i.duration,precise:!0}}for(;n--;){if(void 0!==(i=e.segments[n]).end)return{result:r+i.end,precise:!0};if(r+=oJ(e,i),void 0!==i.start)return{result:r+i.start,precise:!0}}return{result:r,precise:!1}}(e,t);if(n.precise)return n.result;var i=function(e,t){for(var r,n=0,i=t-e.mediaSequence;i<e.segments.length;i++){if(void 0!==(r=e.segments[i]).start)return{result:r.start-n,precise:!0};if(n+=oJ(e,r),void 0!==r.end)return{result:r.end-n,precise:!0}}return{result:-1,precise:!1}}(e,t);return i.precise?i.result:n.result+r},o4=function(e,t,r){if(!e)return 0;if("number"!=typeof r&&(r=0),void 0===t){if(e.totalDuration)return e.totalDuration;if(!e.endList)return i()[1/0]}return o3(e,t,r)},o6=function(e){var t=e.defaultDuration,r=e.durationList,n=e.startIndex,i=e.endIndex,o=0;if(n>i){var u=[i,n];n=u[0],i=u[1]}if(n<0){for(var l=n;l<Math.min(0,i);l++)o+=t;n=0}for(var c=n;c<i;c++)o+=r[c].duration;return o},o8=function(e,t,r,n){if(!e||!e.segments)return null;if(e.endList)return o4(e);if(null===t)return null;t=t||0;var i=o3(e,e.mediaSequence+e.segments.length,t);return r&&(i-=n="number"==typeof n?n:o2(null,e)),Math.max(0,i)},o5=function(e){return e.excludeUntil&&e.excludeUntil>Date.now()},o9=function(e){return e.excludeUntil&&e.excludeUntil===1/0},o7=function(e){var t=o5(e);return!e.disabled&&!t},ae=function(e,t){return t.attributes&&t.attributes[e]},at=function(e,t){if(1===e.playlists.length)return!0;var r=t.attributes.BANDWIDTH||Number.MAX_VALUE;return 0===e.playlists.filter(function(e){return!!o7(e)&&(e.attributes.BANDWIDTH||0)<r}).length},ar=function(e,t){return!(!e&&!t||!e&&t||e&&!t||e!==t&&(!e.id||!t.id||e.id!==t.id)&&(!e.resolvedUri||!t.resolvedUri||e.resolvedUri!==t.resolvedUri)&&(!e.uri||!t.uri||e.uri!==t.uri))},an=function(e,t){var r=e&&e.mediaGroups&&e.mediaGroups.AUDIO||{},n=!1;for(var i in r){for(var o in r[i])if(n=t(r[i][o]))break;if(n)break}return!!n},ai=function(e){if(!e||!e.playlists||!e.playlists.length)return an(e,function(e){return e.playlists&&e.playlists.length||e.uri});for(var t=0;t<e.playlists.length;t++){var r=function(t){var r=e.playlists[t],n=r.attributes&&r.attributes.CODECS;return n&&n.split(",").every(function(e){return G(e)})||an(e,function(e){return ar(r,e)})?"continue":{v:!1}}(t);if("continue"!==r&&"object"==typeof r)return r.v}return!0},ao={liveEdgeDelay:o2,duration:o4,seekable:function(e,t,r){var n=t||0,i=o8(e,t,!0,r);return null===i?o$():o$(n,i)},getMediaInfoForTime:function(e){for(var t=e.playlist,r=e.currentTime,n=e.startingSegmentIndex,i=e.startingPartIndex,o=e.startTime,u=e.experimentalExactManifestTimings,l=r-o,c=oZ(t),f=0,d=0;d<c.length;d++){var h=c[d];if(n===h.segmentIndex&&("number"!=typeof i||"number"!=typeof h.partIndex||i===h.partIndex)){f=d;break}}if(l<0){if(f>0)for(var p=f-1;p>=0;p--){var m=c[p];if(l+=m.duration,u){if(l<0)continue}else if(l+oV<=0)continue;return{partIndex:m.partIndex,segmentIndex:m.segmentIndex,startTime:o-o6({defaultDuration:t.targetDuration,durationList:c,startIndex:f,endIndex:p})}}return{partIndex:c[0]&&c[0].partIndex||null,segmentIndex:c[0]&&c[0].segmentIndex||0,startTime:r}}if(f<0){for(var g=f;g<0;g++)if((l-=t.targetDuration)<0)return{partIndex:c[0]&&c[0].partIndex||null,segmentIndex:c[0]&&c[0].segmentIndex||0,startTime:r};f=0}for(var y=f;y<c.length;y++){var v=c[y];if(l-=v.duration,u){if(l>0)continue}else if(l-oV>=0)continue;return{partIndex:v.partIndex,segmentIndex:v.segmentIndex,startTime:o+o6({defaultDuration:t.targetDuration,durationList:c,startIndex:f,endIndex:y})}}return{segmentIndex:c[c.length-1].segmentIndex,partIndex:c[c.length-1].partIndex,startTime:r}},isEnabled:o7,isDisabled:function(e){return e.disabled},isBlacklisted:o5,isIncompatible:o9,playlistEnd:o8,isAes:function(e){for(var t=0;t<e.segments.length;t++)if(e.segments[t].key)return!0;return!1},hasAttribute:ae,estimateSegmentRequestTime:function(e,t,r,n){return void 0===n&&(n=0),ae("BANDWIDTH",r)?(e*r.attributes.BANDWIDTH-8*n)/t:NaN},isLowestEnabledRendition:at,isAudioOnly:ai,playlistMatch:ar,segmentDurationWithParts:oJ},aa=oF.log,as=function(e,t){return e+"-"+t},au=function(e,t,r){return"placeholder-uri-"+e+"-"+t+"-"+r},al=function(e,t){e.mediaGroups&&["AUDIO","SUBTITLES"].forEach(function(r){if(e.mediaGroups[r])for(var n in e.mediaGroups[r])for(var i in e.mediaGroups[r][n])t(e.mediaGroups[r][n][i],r,n,i)})},ac=function(e){var t=e.playlist,r=e.uri,n=e.id;t.id=n,t.playlistErrors_=0,r&&(t.uri=r),t.attributes=t.attributes||{}},af=function(e,t,r){void 0===r&&(r=au),e.uri=t;for(var n=0;n<e.playlists.length;n++)if(!e.playlists[n].uri){var i="placeholder-uri-"+n;e.playlists[n].uri=i}var o=ai(e);al(e,function(t,n,i,u){if(!t.playlists||!t.playlists.length){if(o&&"AUDIO"===n&&!t.uri)for(var c=0;c<e.playlists.length;c++){var f=e.playlists[c];if(f.attributes&&f.attributes.AUDIO&&f.attributes.AUDIO===i)return}t.playlists=[l({},t)]}t.playlists.forEach(function(t,o){var l=r(n,i,u,t),c=as(o,l);t.uri?t.resolvedUri=t.resolvedUri||C(e.uri,t.uri):(t.uri=0===o?l:c,t.resolvedUri=t.uri),t.id=t.id||c,t.attributes=t.attributes||{},e.playlists[t.id]=t,e.playlists[t.uri]=t})}),function(e){for(var t=e.playlists.length;t--;){var r=e.playlists[t];ac({playlist:r,id:as(t,r.uri)}),r.resolvedUri=C(e.uri,r.uri),e.playlists[r.id]=r,e.playlists[r.uri]=r,r.attributes.BANDWIDTH||aa.warn("Invalid playlist STREAM-INF detected. Missing BANDWIDTH attribute.")}}(e),al(e,function(t){t.uri&&(t.resolvedUri=C(e.uri,t.uri))})},ad=oF.mergeOptions,ah=oF.EventTarget,ap=function(e,t){if(!e)return t;var r=ad(e,t);if(e.preloadHints&&!t.preloadHints&&delete r.preloadHints,e.parts&&!t.parts)delete r.parts;else if(e.parts&&t.parts)for(var n=0;n<t.parts.length;n++)e.parts&&e.parts[n]&&(r.parts[n]=ad(e.parts[n],t.parts[n]));return!e.skipped&&t.skipped&&(r.skipped=!1),e.preload&&!t.preload&&(r.preload=!1),r},am=function(e,t){!e.resolvedUri&&e.uri&&(e.resolvedUri=C(t,e.uri)),e.key&&!e.key.resolvedUri&&(e.key.resolvedUri=C(t,e.key.uri)),e.map&&!e.map.resolvedUri&&(e.map.resolvedUri=C(t,e.map.uri)),e.map&&e.map.key&&!e.map.key.resolvedUri&&(e.map.key.resolvedUri=C(t,e.map.key.uri)),e.parts&&e.parts.length&&e.parts.forEach(function(e){e.resolvedUri||(e.resolvedUri=C(t,e.uri))}),e.preloadHints&&e.preloadHints.length&&e.preloadHints.forEach(function(e){e.resolvedUri||(e.resolvedUri=C(t,e.uri))})},ag=function(e){var t=e.segments||[],r=e.preloadSegment;if(r&&r.parts&&r.parts.length){if(r.preloadHints){for(var n=0;n<r.preloadHints.length;n++)if("MAP"===r.preloadHints[n].type)return t}r.duration=e.targetDuration,r.preload=!0,t.push(r)}return t},ay=function(e,t){return e===t||e.segments&&t.segments&&e.segments.length===t.segments.length&&e.endList===t.endList&&e.mediaSequence===t.mediaSequence&&e.preloadSegment===t.preloadSegment},av=function(e,t,r){void 0===r&&(r=ay);var n=ad(e,{}),i=n.playlists[t.id];if(!i||r(i,t))return null;t.segments=ag(t);var o=ad(i,t);if(o.preloadSegment&&!t.preloadSegment&&delete o.preloadSegment,i.segments){if(t.skip){t.segments=t.segments||[];for(var u=0;u<t.skip.skippedSegments;u++)t.segments.unshift({skipped:!0})}o.segments=function(e,t,r){var n=e.slice(),i=t.slice();r=r||0;for(var o,u=[],l=0;l<i.length;l++){var c=n[l+r],f=i[l];c?(o=c.map||o,u.push(ap(c,f))):(o&&!f.map&&(f.map=o),u.push(f))}return u}(i.segments,t.segments,t.mediaSequence-i.mediaSequence)}o.segments.forEach(function(e){am(e,o.resolvedUri)});for(var l=0;l<n.playlists.length;l++)n.playlists[l].id===t.id&&(n.playlists[l]=o);return n.playlists[t.id]=o,n.playlists[t.uri]=o,al(e,function(e,r,n,i){if(e.playlists)for(var u=0;u<e.playlists.length;u++)t.id===e.playlists[u].id&&(e.playlists[u]=o)}),n},ab=function(e,t){var r=e.segments||[],n=r[r.length-1],i=n&&n.parts&&n.parts[n.parts.length-1],o=i&&i.duration||n&&n.duration;return t&&o?1e3*o:500*(e.partTargetDuration||e.targetDuration||10)},a_=function(e){function t(t,r,n){if(void 0===n&&(n={}),i=e.call(this)||this,!t)throw Error("A non-empty playlist URL or object is required");i.logger_=oH("PlaylistLoader");var i,o=n,u=o.withCredentials,l=o.handleManifestRedirects;i.src=t,i.vhs_=r,i.withCredentials=void 0!==u&&u,i.handleManifestRedirects=void 0!==l&&l;var c=r.options_;return i.customTagParsers=c&&c.customTagParsers||[],i.customTagMappers=c&&c.customTagMappers||[],i.experimentalLLHLS=c&&c.experimentalLLHLS||!1,oF.browser.IE_VERSION&&(i.experimentalLLHLS=!1),i.state="HAVE_NOTHING",i.handleMediaupdatetimeout_=i.handleMediaupdatetimeout_.bind(h(i)),i.on("mediaupdatetimeout",i.handleMediaupdatetimeout_),i}m(t,e);var r=t.prototype;return r.handleMediaupdatetimeout_=function(){var e=this;if("HAVE_METADATA"===this.state){var t=this.media(),r=C(this.master.uri,t.uri);this.experimentalLLHLS&&(r=function(e,t){if(t.endList||!t.serverControl)return e;var r={};if(t.serverControl.canBlockReload){var n=t.preloadSegment,o=t.mediaSequence+t.segments.length;if(n){var u=n.parts||[],l=o1(t)-1;l>-1&&l!==u.length-1&&(r._HLS_part=l),(l>-1||u.length)&&o--}r._HLS_msn=o}if(t.serverControl&&t.serverControl.canSkipUntil&&(r._HLS_skip=t.serverControl.canSkipDateranges?"v2":"YES"),Object.keys(r).length){var c=new(i()).URL(e);["_HLS_skip","_HLS_msn","_HLS_part"].forEach(function(e){r.hasOwnProperty(e)&&c.searchParams.set(e,r[e])}),e=c.toString()}return e}(r,t)),this.state="HAVE_CURRENT_METADATA",this.request=this.vhs_.xhr({uri:r,withCredentials:this.withCredentials},function(t,r){if(e.request)return t?e.playlistRequestError(e.request,e.media(),"HAVE_METADATA"):void e.haveMetadata({playlistString:e.request.responseText,url:e.media().uri,id:e.media().id})})}},r.playlistRequestError=function(e,t,r){var n=t.uri,i=t.id;this.request=null,r&&(this.state=r),this.error={playlist:this.master.playlists[i],status:e.status,message:"HLS playlist request error at URL: "+n+".",responseText:e.responseText,code:e.status>=500?4:2},this.trigger("error")},r.parseManifest_=function(e){var t=this,r=e.url;return function(e){var t=e.onwarn,r=e.oninfo,n=e.manifestString,i=e.customTagParsers,o=e.customTagMappers,u=e.experimentalLLHLS,l=new F;t&&l.on("warn",t),r&&l.on("info",r),(void 0===i?[]:i).forEach(function(e){return l.addParser(e)}),(void 0===o?[]:o).forEach(function(e){return l.addTagMapper(e)}),l.push(n),l.end();var c=l.manifest;if(u||(["preloadSegment","skip","serverControl","renditionReports","partInf","partTargetDuration"].forEach(function(e){c.hasOwnProperty(e)&&delete c[e]}),c.segments&&c.segments.forEach(function(e){["parts","preloadHints"].forEach(function(t){e.hasOwnProperty(t)&&delete e[t]})})),!c.targetDuration){var f=10;c.segments&&c.segments.length&&(f=c.segments.reduce(function(e,t){return Math.max(e,t.duration)},0)),t&&t("manifest has no targetDuration defaulting to "+f),c.targetDuration=f}var d=o0(c);if(d.length&&!c.partTargetDuration){var h=d.reduce(function(e,t){return Math.max(e,t.duration)},0);t&&(t("manifest has no partTargetDuration defaulting to "+h),aa.error("LL-HLS manifest has parts but lacks required #EXT-X-PART-INF:PART-TARGET value. See https://datatracker.ietf.org/doc/html/draft-pantos-hls-rfc8216bis-09#section-4.4.3.7. Playback is not guaranteed.")),c.partTargetDuration=h}return c}({onwarn:function(e){var n=e.message;return t.logger_("m3u8-parser warn for "+r+": "+n)},oninfo:function(e){var n=e.message;return t.logger_("m3u8-parser info for "+r+": "+n)},manifestString:e.manifestString,customTagParsers:this.customTagParsers,customTagMappers:this.customTagMappers,experimentalLLHLS:this.experimentalLLHLS})},r.haveMetadata=function(e){var t=e.playlistString,r=e.playlistObject,n=e.url,i=e.id;this.request=null,this.state="HAVE_METADATA";var o=r||this.parseManifest_({url:n,manifestString:t});o.lastRequest=Date.now(),ac({playlist:o,uri:n,id:i});var u=av(this.master,o);this.targetDuration=o.partTargetDuration||o.targetDuration,this.pendingMedia_=null,u?(this.master=u,this.media_=this.master.playlists[i]):this.trigger("playlistunchanged"),this.updateMediaUpdateTimeout_(ab(this.media(),!!u)),this.trigger("loadedplaylist")},r.dispose=function(){this.trigger("dispose"),this.stopRequest(),i().clearTimeout(this.mediaUpdateTimeout),i().clearTimeout(this.finalRenditionTimeout),this.off()},r.stopRequest=function(){if(this.request){var e=this.request;this.request=null,e.onreadystatechange=null,e.abort()}},r.media=function(e,t){var r=this;if(!e)return this.media_;if("HAVE_NOTHING"===this.state)throw Error("Cannot switch media playlist from "+this.state);if("string"==typeof e){if(!this.master.playlists[e])throw Error("Unknown playlist URI: "+e);e=this.master.playlists[e]}if(i().clearTimeout(this.finalRenditionTimeout),t){var n=(e.partTargetDuration||e.targetDuration)/2*1e3||5e3;this.finalRenditionTimeout=i().setTimeout(this.media.bind(this,e,!1),n)}else{var o=this.state,u=!this.media_||e.id!==this.media_.id,l=this.master.playlists[e.id];if(l&&l.endList||e.endList&&e.segments.length)return this.request&&(this.request.onreadystatechange=null,this.request.abort(),this.request=null),this.state="HAVE_METADATA",this.media_=e,void(u&&(this.trigger("mediachanging"),"HAVE_MASTER"===o?this.trigger("loadedmetadata"):this.trigger("mediachange")));if(this.updateMediaUpdateTimeout_(ab(e,!0)),u){if(this.state="SWITCHING_MEDIA",this.request){if(e.resolvedUri===this.request.url)return;this.request.onreadystatechange=null,this.request.abort(),this.request=null}this.media_&&this.trigger("mediachanging"),this.pendingMedia_=e,this.request=this.vhs_.xhr({uri:e.resolvedUri,withCredentials:this.withCredentials},function(t,n){if(r.request){if(e.lastRequest=Date.now(),e.resolvedUri=oq(r.handleManifestRedirects,e.resolvedUri,n),t)return r.playlistRequestError(r.request,e,o);r.haveMetadata({playlistString:n.responseText,url:e.uri,id:e.id}),"HAVE_MASTER"===o?r.trigger("loadedmetadata"):r.trigger("mediachange")}})}}},r.pause=function(){this.mediaUpdateTimeout&&(i().clearTimeout(this.mediaUpdateTimeout),this.mediaUpdateTimeout=null),this.stopRequest(),"HAVE_NOTHING"===this.state&&(this.started=!1),"SWITCHING_MEDIA"===this.state?this.media_?this.state="HAVE_METADATA":this.state="HAVE_MASTER":"HAVE_CURRENT_METADATA"===this.state&&(this.state="HAVE_METADATA")},r.load=function(e){var t=this;this.mediaUpdateTimeout&&(i().clearTimeout(this.mediaUpdateTimeout),this.mediaUpdateTimeout=null);var r=this.media();if(e){var n=r?(r.partTargetDuration||r.targetDuration)/2*1e3:5e3;this.mediaUpdateTimeout=i().setTimeout(function(){t.mediaUpdateTimeout=null,t.load()},n)}else this.started?r&&!r.endList?this.trigger("mediaupdatetimeout"):this.trigger("loadedplaylist"):this.start()},r.updateMediaUpdateTimeout_=function(e){var t=this;this.mediaUpdateTimeout&&(i().clearTimeout(this.mediaUpdateTimeout),this.mediaUpdateTimeout=null),this.media()&&!this.media().endList&&(this.mediaUpdateTimeout=i().setTimeout(function(){t.mediaUpdateTimeout=null,t.trigger("mediaupdatetimeout"),t.updateMediaUpdateTimeout_(e)},e))},r.start=function(){var e=this;if(this.started=!0,"object"==typeof this.src)return this.src.uri||(this.src.uri=i().location.href),this.src.resolvedUri=this.src.uri,void setTimeout(function(){e.setupInitialPlaylist(e.src)},0);this.request=this.vhs_.xhr({uri:this.src,withCredentials:this.withCredentials},function(t,r){if(e.request){if(e.request=null,t)return e.error={status:r.status,message:"HLS playlist request error at URL: "+e.src+".",responseText:r.responseText,code:2},"HAVE_NOTHING"===e.state&&(e.started=!1),e.trigger("error");e.src=oq(e.handleManifestRedirects,e.src,r);var n=e.parseManifest_({manifestString:r.responseText,url:e.src});e.setupInitialPlaylist(n)}})},r.srcUri=function(){return"string"==typeof this.src?this.src:this.src.uri},r.setupInitialPlaylist=function(e){if(this.state="HAVE_MASTER",e.playlists)return this.master=e,af(this.master,this.srcUri()),e.playlists.forEach(function(e){e.segments=ag(e),e.segments.forEach(function(t){am(t,e.resolvedUri)})}),this.trigger("loadedplaylist"),void(this.request||this.media(this.master.playlists[0]));var t,r,n=this.srcUri()||i().location.href;this.master=(t=as(0,n),(r={mediaGroups:{AUDIO:{},VIDEO:{},"CLOSED-CAPTIONS":{},SUBTITLES:{}},uri:i().location.href,resolvedUri:i().location.href,playlists:[{uri:n,id:t,resolvedUri:n,attributes:{}}]}).playlists[t]=r.playlists[0],r.playlists[n]=r.playlists[0],r),this.haveMetadata({playlistObject:e,url:n,id:this.master.playlists[0].id}),this.trigger("loadedmetadata")},t}(ah),aT=oF.xhr,aE=oF.mergeOptions,aS=function(e,t,r,n){var i="arraybuffer"===e.responseType?e.response:e.responseText;!t&&i&&(e.responseTime=Date.now(),e.roundTripTime=e.responseTime-e.requestTime,e.bytesReceived=i.byteLength||i.length,e.bandwidth||(e.bandwidth=Math.floor(e.bytesReceived/e.roundTripTime*8e3))),r.headers&&(e.responseHeaders=r.headers),t&&"ETIMEDOUT"===t.code&&(e.timedout=!0),t||e.aborted||200===r.statusCode||206===r.statusCode||0===r.statusCode||(t=Error("XHR Failed with a response of: "+(e&&(i||e.responseText)))),n(t,e)},aw=function(){var e=function e(t,r){t=aE({timeout:45e3},t);var n=e.beforeRequest||oF.Vhs.xhr.beforeRequest;if(n&&"function"==typeof n){var i=n(t);i&&(t=i)}var o=(!0===oF.Vhs.xhr.original?aT:oF.Vhs.xhr)(t,function(e,t){return aS(o,e,t,r)}),u=o.abort;return o.abort=function(){return o.aborted=!0,u.apply(o,arguments)},o.uri=t.uri,o.requestTime=Date.now(),o};return e.original=!0,e},aA=function(e){var t,r={};return e.byterange&&(r.Range="bytes="+(t=e.byterange).offset+"-"+("bigint"==typeof t.offset||"bigint"==typeof t.length?i().BigInt(t.offset)+i().BigInt(t.length)-i().BigInt(1):t.offset+t.length-1)),r},aC=function(e,t){var r=e.toString(16);return"00".substring(0,2-r.length)+r+(t%2?" ":"")},aI=function(e){return e>=32&&e<126?String.fromCharCode(e):"."},aO=function(e){var t={};return Object.keys(e).forEach(function(r){var n=e[r];J(n)?t[r]={bytes:n.buffer,byteOffset:n.byteOffset,byteLength:n.byteLength}:t[r]=n}),t},aR=function(e){var t=e.byterange||{length:1/0,offset:0};return[t.length,t.offset,e.resolvedUri].join(",")},aP=function(e){return e.resolvedUri},ak=function(e){for(var t=Array.prototype.slice.call(e),r="",n=0;n<t.length/16;n++)r+=t.slice(16*n,16*n+16).map(aC).join("")+" "+t.slice(16*n,16*n+16).map(aI).join("")+"\n";return r},aD=Object.freeze({__proto__:null,createTransferableMessage:aO,initSegmentId:aR,segmentKeyId:aP,hexDump:ak,tagDump:function(e){return ak(e.bytes)},textRanges:function(e){var t,r,n="";for(r=0;r<e.length;r++)n+=(t=r,e.start(t)+"-"+e.end(t)+" ");return n}}),aN=function e(t){var r=t.programTime,n=t.playlist,i=t.retryCount,o=void 0===i?2:i,u=t.seekTo,l=t.pauseAfterSeek,c=void 0===l||l,f=t.tech,d=t.callback;if(!d)throw Error("seekToProgramTime: callback must be provided");if(void 0===r||!n||!u)return d({message:"seekToProgramTime: programTime, seekTo and playlist must be provided"});if(!n.endList&&!f.hasStarted_)return d({message:"player must be playing a live stream to start buffering"});if(!function(e){if(!e.segments||0===e.segments.length)return!1;for(var t=0;t<e.segments.length;t++)if(!e.segments[t].dateTimeObject)return!1;return!0}(n))return d({message:"programDateTime tags must be provided in the manifest "+n.resolvedUri});var h=function(e,t){try{i=new Date(e)}catch(e){return null}if(!t||!t.segments||0===t.segments.length)return null;var r=t.segments[0];if(i<r.dateTimeObject)return null;for(var n=0;n<t.segments.length-1&&(r=t.segments[n],!(i<t.segments[n+1].dateTimeObject));n++);var i,o,u=t.segments[t.segments.length-1],l=u.dateTimeObject,c=u.videoTimingInfo?(o=u.videoTimingInfo).transmuxedPresentationEnd-o.transmuxedPresentationStart-o.transmuxerPrependedSeconds:u.duration+.25*u.duration;return i>new Date(l.getTime()+1e3*c)?null:(i>l&&(r=u),{segment:r,estimatedStart:r.videoTimingInfo?r.videoTimingInfo.transmuxedPresentationStart:ao.duration(t,t.mediaSequence+t.segments.indexOf(r)),type:r.videoTimingInfo?"accurate":"estimate"})}(r,n);if(!h)return d({message:r+" was not found in the stream"});var p=h.segment,m=function(e,t){try{r=new Date(e),n=new Date(t)}catch(e){}var r,n,i=r.getTime();return(n.getTime()-i)/1e3}(p.dateTimeObject,r);if("estimate"===h.type)return 0===o?d({message:r+" is not buffered yet. Try again"}):(u(h.estimatedStart+m),void f.one("seeked",function(){e({programTime:r,playlist:n,retryCount:o-1,seekTo:u,pauseAfterSeek:c,tech:f,callback:d})}));var g=p.start+m;f.one("seeked",function(){return d(null,f.currentTime())}),c&&f.pause(),u(g)},aL=function(e,t){if(4===e.readyState)return t()},ax=oF.EventTarget,aj=oF.mergeOptions,aM=function(e,t){if(!ay(e,t)||e.sidx&&t.sidx&&(e.sidx.offset!==t.sidx.offset||e.sidx.length!==t.sidx.length)||!e.sidx&&t.sidx||e.sidx&&!t.sidx||e.segments&&!t.segments||!e.segments&&t.segments)return!1;if(!e.segments&&!t.segments)return!0;for(var r=0;r<e.segments.length;r++){var n=e.segments[r],i=t.segments[r];if(n.uri!==i.uri)return!1;if(n.byterange||i.byterange){var o=n.byterange,u=i.byterange;if(o&&!u||!o&&u||o.offset!==u.offset||o.length!==u.length)return!1}}return!0},aF=function(e,t,r,n){return"placeholder-uri-"+e+"-"+t+"-"+(n.attributes.NAME||r)},aB=function(e,t){var r={};for(var n in e){var i=e[n].sidx;if(i){var o,u=eE(i);if(!t[u])break;(!(o=t[u].sidxInfo).map&&!i.map||o.map&&i.map&&o.map.byterange.offset===i.map.byterange.offset&&o.map.byterange.length===i.map.byterange.length)&&o.uri===i.uri&&o.byterange.offset===i.byterange.offset&&o.byterange.length===i.byterange.length&&(r[u]=t[u])}}return r},aU=function(e){function t(t,r,n,i){void 0===n&&(n={}),(o=e.call(this)||this).masterPlaylistLoader_=i||h(o),i||(o.isMaster_=!0);var o,u=n,l=u.withCredentials,c=u.handleManifestRedirects;if(o.vhs_=r,o.withCredentials=void 0!==l&&l,o.handleManifestRedirects=void 0!==c&&c,!t)throw Error("A non-empty playlist URL or object is required");return o.on("minimumUpdatePeriod",function(){o.refreshXml_()}),o.on("mediaupdatetimeout",function(){o.refreshMedia_(o.media().id)}),o.state="HAVE_NOTHING",o.loadedPlaylists_={},o.logger_=oH("DashPlaylistLoader"),o.isMaster_?(o.masterPlaylistLoader_.srcUrl=t,o.masterPlaylistLoader_.sidxMapping_={}):o.childPlaylist_=t,o}m(t,e);var r=t.prototype;return r.requestErrored_=function(e,t,r){return!this.request||(this.request=null,e?(this.error="object"!=typeof e||e instanceof Error?{status:t.status,message:"DASH request error at URL: "+t.uri,response:t.response,code:2}:e,r&&(this.state=r),this.trigger("error"),!0):void 0)},r.addSidxSegments_=function(e,t,r){var n=this,o=e.sidx&&eE(e.sidx);if(e.sidx&&o&&!this.masterPlaylistLoader_.sidxMapping_[o]){var u,l,c,f,d,h,p,m,g=oq(this.handleManifestRedirects,e.sidx.resolvedUri),y=function(i,u){if(!n.requestErrored_(i,u,t)){var l,c=n.masterPlaylistLoader_.sidxMapping_;try{l=eX()(Z(u.response).subarray(8))}catch(e){return void n.requestErrored_(e,u,t)}return c[o]={sidxInfo:e.sidx,sidx:l},ey(e,l,e.sidx.resolvedUri),r(!0)}};this.request=(u=this.vhs_.xhr,l=function(t,r,i,o){if(t)return y(t,r);if(!i||"mp4"!==i)return y({status:r.status,message:"Unsupported "+(i||"unknown")+" container type for sidx segment at URL: "+g,response:"",playlist:e,internal:!0,blacklistDuration:1/0,code:2},r);var u=e.sidx.byterange,l=u.offset,c=u.length;if(o.length>=c+l)return y(t,{response:o.subarray(l,l+c),status:r.status,uri:r.uri});n.request=n.vhs_.xhr({uri:g,responseType:"arraybuffer",headers:aA({byterange:e.sidx.byterange})},y)},f=[],d=!1,h=function(e,t,r,n){return t.abort(),d=!0,l(e,t,r,n)},p=function(e,t){if(!d){if(e)return h(e,t,"",f);var r=t.responseText.substring(f&&f.byteLength||0,t.responseText.length);if(f=function(){for(var e=arguments.length,t=Array(e),r=0;r<e;r++)t[r]=arguments[r];if((t=t.filter(function(e){return e&&(e.byteLength||e.length)&&"string"!=typeof e})).length<=1)return Z(t[0]);var n=t.reduce(function(e,t,r){return e+(t.byteLength||t.length)},0),i=new Uint8Array(n),o=0;return t.forEach(function(e){e=Z(e),i.set(e,o),o+=e.byteLength}),i}(f,en(r,!0)),c=c||e$(f),f.length<10||c&&f.length<c+2)return aL(t,function(){return h(e,t,"",f)});var n=to(f);return"ts"===n&&f.length<188||!n&&f.length<376?aL(t,function(){return h(e,t,"",f)}):h(null,t,n,f)}},m=u({uri:g,beforeSend:function(e){e.overrideMimeType("text/plain; charset=x-user-defined"),e.addEventListener("progress",function(t){return t.total,t.loaded,aS(e,null,{statusCode:e.status},p)})}},function(e,t){return aS(m,e,t,p)}))}else this.mediaRequest_=i().setTimeout(function(){return r(!1)},0)},r.dispose=function(){this.trigger("dispose"),this.stopRequest(),this.loadedPlaylists_={},i().clearTimeout(this.minimumUpdatePeriodTimeout_),i().clearTimeout(this.mediaRequest_),i().clearTimeout(this.mediaUpdateTimeout),this.mediaUpdateTimeout=null,this.mediaRequest_=null,this.minimumUpdatePeriodTimeout_=null,this.masterPlaylistLoader_.createMupOnMedia_&&(this.off("loadedmetadata",this.masterPlaylistLoader_.createMupOnMedia_),this.masterPlaylistLoader_.createMupOnMedia_=null),this.off()},r.hasPendingRequest=function(){return this.request||this.mediaRequest_},r.stopRequest=function(){if(this.request){var e=this.request;this.request=null,e.onreadystatechange=null,e.abort()}},r.media=function(e){var t=this;if(!e)return this.media_;if("HAVE_NOTHING"===this.state)throw Error("Cannot switch media playlist from "+this.state);var r=this.state;if("string"==typeof e){if(!this.masterPlaylistLoader_.master.playlists[e])throw Error("Unknown playlist URI: "+e);e=this.masterPlaylistLoader_.master.playlists[e]}var n=!this.media_||e.id!==this.media_.id;if(n&&this.loadedPlaylists_[e.id]&&this.loadedPlaylists_[e.id].endList)return this.state="HAVE_METADATA",this.media_=e,void(n&&(this.trigger("mediachanging"),this.trigger("mediachange")));n&&(this.media_&&this.trigger("mediachanging"),this.addSidxSegments_(e,r,function(n){t.haveMetadata({startingState:r,playlist:e})}))},r.haveMetadata=function(e){var t=e.startingState,r=e.playlist;this.state="HAVE_METADATA",this.loadedPlaylists_[r.id]=r,this.mediaRequest_=null,this.refreshMedia_(r.id),"HAVE_MASTER"===t?this.trigger("loadedmetadata"):this.trigger("mediachange")},r.pause=function(){this.masterPlaylistLoader_.createMupOnMedia_&&(this.off("loadedmetadata",this.masterPlaylistLoader_.createMupOnMedia_),this.masterPlaylistLoader_.createMupOnMedia_=null),this.stopRequest(),i().clearTimeout(this.mediaUpdateTimeout),this.mediaUpdateTimeout=null,this.isMaster_&&(i().clearTimeout(this.masterPlaylistLoader_.minimumUpdatePeriodTimeout_),this.masterPlaylistLoader_.minimumUpdatePeriodTimeout_=null),"HAVE_NOTHING"===this.state&&(this.started=!1)},r.load=function(e){var t=this;i().clearTimeout(this.mediaUpdateTimeout),this.mediaUpdateTimeout=null;var r=this.media();if(e){var n=r?r.targetDuration/2*1e3:5e3;this.mediaUpdateTimeout=i().setTimeout(function(){return t.load()},n)}else this.started?r&&!r.endList?(this.isMaster_&&!this.minimumUpdatePeriodTimeout_&&(this.trigger("minimumUpdatePeriod"),this.updateMinimumUpdatePeriodTimeout_()),this.trigger("mediaupdatetimeout")):this.trigger("loadedplaylist"):this.start()},r.start=function(){var e=this;this.started=!0,this.isMaster_?this.requestMaster_(function(t,r){e.haveMaster_(),e.hasPendingRequest()||e.media_||e.media(e.masterPlaylistLoader_.master.playlists[0])}):this.mediaRequest_=i().setTimeout(function(){return e.haveMaster_()},0)},r.requestMaster_=function(e){var t=this;this.request=this.vhs_.xhr({uri:this.masterPlaylistLoader_.srcUrl,withCredentials:this.withCredentials},function(r,n){if(!t.requestErrored_(r,n)){var i=n.responseText!==t.masterPlaylistLoader_.masterXml_;return t.masterPlaylistLoader_.masterXml_=n.responseText,n.responseHeaders&&n.responseHeaders.date?t.masterLoaded_=Date.parse(n.responseHeaders.date):t.masterLoaded_=Date.now(),t.masterPlaylistLoader_.srcUrl=oq(t.handleManifestRedirects,t.masterPlaylistLoader_.srcUrl,n),i?(t.handleMaster_(),void t.syncClientServerClock_(function(){return e(n,i)})):e(n,i)}"HAVE_NOTHING"===t.state&&(t.started=!1)})},r.syncClientServerClock_=function(e){var t=this,r=function(e){var t=eB(e,"UTCTiming")[0];if(!t)return null;var r=eV(t);switch(r.schemeIdUri){case"urn:mpeg:dash:utc:http-head:2014":case"urn:mpeg:dash:utc:http-head:2012":r.method="HEAD";break;case"urn:mpeg:dash:utc:http-xsdate:2014":case"urn:mpeg:dash:utc:http-iso:2014":case"urn:mpeg:dash:utc:http-xsdate:2012":case"urn:mpeg:dash:utc:http-iso:2012":r.method="GET";break;case"urn:mpeg:dash:utc:direct:2014":case"urn:mpeg:dash:utc:direct:2012":r.method="DIRECT",r.value=Date.parse(r.value);break;default:throw Error("UNSUPPORTED_UTC_TIMING_SCHEME")}return r}(eK(this.masterPlaylistLoader_.masterXml_));return null===r?(this.masterPlaylistLoader_.clientOffset_=this.masterLoaded_-Date.now(),e()):"DIRECT"===r.method?(this.masterPlaylistLoader_.clientOffset_=r.value-Date.now(),e()):void(this.request=this.vhs_.xhr({uri:C(this.masterPlaylistLoader_.srcUrl,r.value),method:r.method,withCredentials:this.withCredentials},function(n,i){if(t.request){var o;if(n)return t.masterPlaylistLoader_.clientOffset_=t.masterLoaded_-Date.now(),e();o="HEAD"===r.method?i.responseHeaders&&i.responseHeaders.date?Date.parse(i.responseHeaders.date):t.masterLoaded_:Date.parse(i.responseText),t.masterPlaylistLoader_.clientOffset_=o-Date.now(),e()}}))},r.haveMaster_=function(){this.state="HAVE_MASTER",this.isMaster_?this.trigger("loadedplaylist"):this.media_||this.media(this.childPlaylist_)},r.handleMaster_=function(){this.mediaRequest_=null;var e,t,r,n,i,o,u=this.masterPlaylistLoader_.master,l=(e=(n={masterXml:this.masterPlaylistLoader_.masterXml_,srcUrl:this.masterPlaylistLoader_.srcUrl,clientOffset:this.masterPlaylistLoader_.clientOffset_,sidxMapping:this.masterPlaylistLoader_.sidxMapping_,previousManifest:u}).masterXml,t={manifestUri:i=n.srcUrl,clientOffset:n.clientOffset,sidxMapping:n.sidxMapping,previousManifest:n.previousManifest},af(o=ek({dashPlaylists:(r=function(e,t){void 0===t&&(t={});var r=t,n=r.manifestUri,i=void 0===n?"":n,o=r.NOW,u=void 0===o?Date.now():o,l=r.clientOffset,c=eB(e,"Period");if(!c.length)throw Error("INVALID_NUMBER_OF_PERIOD");var f=eB(e,"Location"),d=eV(e),h=eY([i],eB(e,"BaseURL"));d.type=d.type||"static",d.sourceDuration=d.mediaPresentationDuration||0,d.NOW=u,d.clientOffset=void 0===l?0:l,f.length&&(d.locations=f.map(eU));var p=[];return c.forEach(function(e,t){var r,n,i,o,u=eV(e),l=p[t-1];u.start=(n=(r={attributes:u,priorPeriodAttributes:l?l.attributes:null,mpdType:d.type}).attributes,i=r.priorPeriodAttributes,o=r.mpdType,"number"==typeof n.start?n.start:i&&"number"==typeof i.start&&"number"==typeof i.duration?i.start+i.duration:i||"static"!==o?null:0),p.push({node:e,attributes:u})}),{locations:d.locations,representationInfo:el(p.map(function(e,t){var r=eY(h,eB(e.node,"BaseURL")),n=es(d,{periodStart:e.attributes.start});"number"==typeof e.attributes.duration&&(n.periodDuration=e.attributes.duration);var i=eB(e.node,"AdaptationSet"),o=ez(e.node);return el(i.map(function(e){var t,i,u=eV(e),l=eY(r,eB(e,"BaseURL")),c=es(n,u,{role:eV(eB(e,"Role")[0])}),f="urn:scte:dash:cc:cea-608:2015"===(i=eV(eB(e,"Accessibility")[0])).schemeIdUri?("string"!=typeof i.value?[]:i.value.split(";")).map(function(e){var t,r;if(r=e,/^CC\d=/.test(e)){var n=e.split("=");t=n[0],r=n[1]}else/^CC\d$/.test(e)&&(t=e);return{channel:t,language:r}}):"urn:scte:dash:cc:cea-708:2015"===i.schemeIdUri?("string"!=typeof i.value?[]:i.value.split(";")).map(function(e){var t={channel:void 0,language:void 0,aspectRatio:1,easyReader:0,"3D":0};if(/=/.test(e)){var r=e.split("="),n=r[0],i=r[1];t.channel=n,t.language=e,(void 0===i?"":i).split(",").forEach(function(e){var r=e.split(":"),n=r[0],i=r[1];"lang"===n?t.language=i:"er"===n?t.easyReader=Number(i):"war"===n?t.aspectRatio=Number(i):"3D"===n&&(t["3D"]=Number(i))})}else t.language=e;return t.channel&&(t.channel="SERVICE"+t.channel),t}):void 0;f&&(c=es(c,{captionServices:f}));var d=eB(e,"Label")[0];d&&d.childNodes.length&&(c=es(c,{label:d.childNodes[0].nodeValue.trim()}));var h=eB(e,"ContentProtection").reduce(function(e,t){var r=eV(t);r.schemeIdUri&&(r.schemeIdUri=r.schemeIdUri.toLowerCase());var n=eG[r.schemeIdUri];if(n){e[n]={attributes:r};var i=eB(t,"cenc:pssh")[0];if(i){var o=eU(i);e[n].pssh=o&&O(o)}}return e},{});Object.keys(h).length&&(c=es(c,{contentProtection:h}));var p=ez(e),m=eB(e,"Representation"),g=es(o,p);return el(m.map((t=c,function(e){var r=eY(l,eB(e,"BaseURL")),n=es(t,eV(e)),i=ez(e);return r.map(function(e){return{segmentInfo:es(g,i),attributes:es(n,{baseUrl:e})}})})))}))}))}}(eK(e),t)).representationInfo.map(eF),locations:r.locations,sidxMapping:t.sidxMapping,previousManifest:t.previousManifest}),i,aF),o);u&&(l=function(e,t,r){for(var n,i=!0,o=aj(e,{duration:t.duration,minimumUpdatePeriod:t.minimumUpdatePeriod,timelineStarts:t.timelineStarts}),u=0;u<t.playlists.length;u++){var l=t.playlists[u];if(l.sidx){var c=eE(l.sidx);r&&r[c]&&r[c].sidx&&ey(l,r[c].sidx,l.sidx.resolvedUri)}var f=av(o,l,aM);f&&(o=f,i=!1)}return al(t,function(e,t,r,n){if(e.playlists&&e.playlists.length){var u=e.playlists[0].id,l=av(o,e.playlists[0],aM);l&&(n in(o=l).mediaGroups[t][r]||(o.mediaGroups[t][r][n]=e),o.mediaGroups[t][r][n].playlists[0]=o.playlists[u],i=!1)}}),al(n=o,function(e,r,i,o){o in t.mediaGroups[r][i]||delete n.mediaGroups[r][i][o]}),t.minimumUpdatePeriod!==e.minimumUpdatePeriod&&(i=!1),i?null:o}(u,l,this.masterPlaylistLoader_.sidxMapping_)),this.masterPlaylistLoader_.master=l||u;var c=this.masterPlaylistLoader_.master.locations&&this.masterPlaylistLoader_.master.locations[0];return c&&c!==this.masterPlaylistLoader_.srcUrl&&(this.masterPlaylistLoader_.srcUrl=c),(!u||l&&l.minimumUpdatePeriod!==u.minimumUpdatePeriod)&&this.updateMinimumUpdatePeriodTimeout_(),!!l},r.updateMinimumUpdatePeriodTimeout_=function(){var e=this.masterPlaylistLoader_;e.createMupOnMedia_&&(e.off("loadedmetadata",e.createMupOnMedia_),e.createMupOnMedia_=null),e.minimumUpdatePeriodTimeout_&&(i().clearTimeout(e.minimumUpdatePeriodTimeout_),e.minimumUpdatePeriodTimeout_=null);var t=e.master&&e.master.minimumUpdatePeriod;0===t&&(e.media()?t=1e3*e.media().targetDuration:(e.createMupOnMedia_=e.updateMinimumUpdatePeriodTimeout_,e.one("loadedmetadata",e.createMupOnMedia_))),"number"!=typeof t||t<=0?t<0&&this.logger_("found invalid minimumUpdatePeriod of "+t+", not setting a timeout"):this.createMUPTimeout_(t)},r.createMUPTimeout_=function(e){var t=this.masterPlaylistLoader_;t.minimumUpdatePeriodTimeout_=i().setTimeout(function(){t.minimumUpdatePeriodTimeout_=null,t.trigger("minimumUpdatePeriod"),t.createMUPTimeout_(e)},e)},r.refreshXml_=function(){var e=this;this.requestMaster_(function(t,r){var n,i,o;r&&(e.media_&&(e.media_=e.masterPlaylistLoader_.master.playlists[e.media_.id]),e.masterPlaylistLoader_.sidxMapping_=(n=e.masterPlaylistLoader_.master,i=e.masterPlaylistLoader_.sidxMapping_,o=aB(n.playlists,i),al(n,function(e,t,r,n){e.playlists&&e.playlists.length&&(o=aj(o,aB(e.playlists,i)))}),o),e.addSidxSegments_(e.media(),e.state,function(t){e.refreshMedia_(e.media().id)}))})},r.refreshMedia_=function(e){var t=this;if(!e)throw Error("refreshMedia_ must take a media id");this.media_&&this.isMaster_&&this.handleMaster_();var r=this.masterPlaylistLoader_.master.playlists,n=!this.media_||this.media_!==r[e];n?this.media_=r[e]:this.trigger("playlistunchanged"),this.mediaUpdateTimeout||function e(){t.media().endList||(t.mediaUpdateTimeout=i().setTimeout(function(){t.trigger("mediaupdatetimeout"),e()},ab(t.media(),!!n)))}(),this.trigger("loadedplaylist")},t}(ax),aq={GOAL_BUFFER_LENGTH:30,MAX_GOAL_BUFFER_LENGTH:60,BACK_BUFFER_LENGTH:30,GOAL_BUFFER_LENGTH_RATE:1,INITIAL_BANDWIDTH:4194304,BANDWIDTH_VARIANCE:1.2,BUFFER_LOW_WATER_LINE:0,MAX_BUFFER_LOW_WATER_LINE:30,EXPERIMENTAL_MAX_BUFFER_LOW_WATER_LINE:16,BUFFER_LOW_WATER_LINE_RATE:1,BUFFER_HIGH_WATER_LINE:30},aH=function(e){return e.on=e.addEventListener,e.off=e.removeEventListener,e},aV=function(e){return function(){var t=function(e){try{return URL.createObjectURL(new Blob([e],{type:"application/javascript"}))}catch(r){var t=new BlobBuilder;return t.append(e),URL.createObjectURL(t.getBlob())}}(e),r=aH(new Worker(t));r.objURL=t;var n=r.terminate;return r.on=r.addEventListener,r.off=r.removeEventListener,r.terminate=function(){return URL.revokeObjectURL(t),n.call(this)},r}},aG=function(e){return"var browserWorkerPolyFill = "+aH.toString()+";\nbrowserWorkerPolyFill(self);\n"+e},aY=function(e){return e.toString().replace(/^function.+?{/,"").slice(0,-1)},az=aV(aG(aY(function(){var e=function(){this.init=function(){var e={};this.on=function(t,r){e[t]||(e[t]=[]),e[t]=e[t].concat(r)},this.off=function(t,r){var n;return!!e[t]&&(n=e[t].indexOf(r),e[t]=e[t].slice(),e[t].splice(n,1),n>-1)},this.trigger=function(t){var r,n,i,o;if(r=e[t]){if(2==arguments.length)for(i=r.length,n=0;n<i;++n)r[n].call(this,arguments[1]);else{for(o=[],n=arguments.length,n=1;n<arguments.length;++n)o.push(arguments[n]);for(i=r.length,n=0;n<i;++n)r[n].apply(this,o)}}},this.dispose=function(){e={}}}};e.prototype.pipe=function(e){return this.on("data",function(t){e.push(t)}),this.on("done",function(t){e.flush(t)}),this.on("partialdone",function(t){e.partialFlush(t)}),this.on("endedtimeline",function(t){e.endTimeline(t)}),this.on("reset",function(t){e.reset(t)}),e},e.prototype.push=function(e){this.trigger("data",e)},e.prototype.flush=function(e){this.trigger("done",e)},e.prototype.partialFlush=function(e){this.trigger("partialdone",e)},e.prototype.endTimeline=function(e){this.trigger("endedtimeline",e)},e.prototype.reset=function(e){this.trigger("reset",e)};var t,n,i,o,u,l,c,f,d,h,p,m,g,y,v,b,_,T,E,S,w,A,C,I,O,R,P,k,D,N,L,x,j={getUint64:function(e){var t,r=new DataView(e.buffer,e.byteOffset,e.byteLength);return r.getBigUint64?(t=r.getBigUint64(0))<Number.MAX_SAFE_INTEGER?Number(t):t:4294967296*r.getUint32(0)+r.getUint32(4)},MAX_UINT32:4294967296},M=j.MAX_UINT32;(function(){var e;if(b={avc1:[],avcC:[],btrt:[],dinf:[],dref:[],esds:[],ftyp:[],hdlr:[],mdat:[],mdhd:[],mdia:[],mfhd:[],minf:[],moof:[],moov:[],mp4a:[],mvex:[],mvhd:[],pasp:[],sdtp:[],smhd:[],stbl:[],stco:[],stsc:[],stsd:[],stsz:[],stts:[],styp:[],tfdt:[],tfhd:[],traf:[],trak:[],trun:[],trex:[],tkhd:[],vmhd:[]},"undefined"!=typeof Uint8Array){for(e in b)b.hasOwnProperty(e)&&(b[e]=[e.charCodeAt(0),e.charCodeAt(1),e.charCodeAt(2),e.charCodeAt(3)]);_=new Uint8Array([105,115,111,109]),E=new Uint8Array([97,118,99,49]),T=new Uint8Array([0,0,0,1]),S={video:new Uint8Array([0,0,0,0,0,0,0,0,118,105,100,101,0,0,0,0,0,0,0,0,0,0,0,0,86,105,100,101,111,72,97,110,100,108,101,114,0]),audio:new Uint8Array([0,0,0,0,0,0,0,0,115,111,117,110,0,0,0,0,0,0,0,0,0,0,0,0,83,111,117,110,100,72,97,110,100,108,101,114,0])},C=new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,12,117,114,108,32,0,0,0,1]),A=new Uint8Array([0,0,0,0,0,0,0,0]),O=I=new Uint8Array([0,0,0,0,0,0,0,0]),R=new Uint8Array([0,0,0,0,0,0,0,0,0,0,0,0]),P=I,w=new Uint8Array([0,0,0,1,0,0,0,0,0,0,0,0])}})(),t=function(e){var t,r,n=[],i=0;for(t=1;t<arguments.length;t++)n.push(arguments[t]);for(t=n.length;t--;)i+=n[t].byteLength;for(r=new Uint8Array(i+8),new DataView(r.buffer,r.byteOffset,r.byteLength).setUint32(0,r.byteLength),r.set(e,4),t=0,i=8;t<n.length;t++)r.set(n[t],i),i+=n[t].byteLength;return r},d=function(e){var r=new Uint8Array([0,0,0,0,0,0,0,2,0,0,0,3,0,1,95,144,e.duration>>>24&255,e.duration>>>16&255,e.duration>>>8&255,255&e.duration,85,196,0,0]);return e.samplerate&&(r[12]=e.samplerate>>>24&255,r[13]=e.samplerate>>>16&255,r[14]=e.samplerate>>>8&255,r[15]=255&e.samplerate),t(b.mdhd,r)},f=function(e){var r;return t(b.mdia,d(e),(r=e.type,t(b.hdlr,S[r])),n(e))},n=function(e){return t(b.minf,"video"===e.type?t(b.vmhd,w):t(b.smhd,A),t(b.dinf,t(b.dref,C)),p(e))},i=function(e){for(var r=e.length,n=[];r--;)n[r]=l(e[r]);return t.apply(null,[b.moov,u(4294967295)].concat(n).concat(o(e)))},o=function(e){for(var r=e.length,n=[];r--;)n[r]=y(e[r]);return t.apply(null,[b.mvex].concat(n))},u=function(e){var r=new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,2,0,1,95,144,(4278190080&e)>>24,(16711680&e)>>16,(65280&e)>>8,255&e,0,1,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,64,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,255,255,255,255]);return t(b.mvhd,r)},h=function(e){var r,n,i=e.samples||[],o=new Uint8Array(4+i.length);for(n=0;n<i.length;n++)r=i[n].flags,o[n+4]=r.dependsOn<<4|r.isDependedOn<<2|r.hasRedundancy;return t(b.sdtp,o)},p=function(e){return t(b.stbl,m(e),t(b.stts,P),t(b.stsc,O),t(b.stsz,R),t(b.stco,I))},m=function(e){return t(b.stsd,new Uint8Array([0,0,0,0,0,0,0,1]),"video"===e.type?k(e):D(e))},k=function(e){var r,n,i=e.sps||[],o=e.pps||[],u=[],l=[];for(r=0;r<i.length;r++)u.push((65280&i[r].byteLength)>>>8),u.push(255&i[r].byteLength),u=u.concat(Array.prototype.slice.call(i[r]));for(r=0;r<o.length;r++)l.push((65280&o[r].byteLength)>>>8),l.push(255&o[r].byteLength),l=l.concat(Array.prototype.slice.call(o[r]));if(n=[b.avc1,new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,(65280&e.width)>>8,255&e.width,(65280&e.height)>>8,255&e.height,0,72,0,0,0,72,0,0,0,0,0,0,0,1,19,118,105,100,101,111,106,115,45,99,111,110,116,114,105,98,45,104,108,115,0,0,0,0,0,0,0,0,0,0,0,0,0,24,17,17]),t(b.avcC,new Uint8Array([1,e.profileIdc,e.profileCompatibility,e.levelIdc,255].concat([i.length],u,[o.length],l))),t(b.btrt,new Uint8Array([0,28,156,128,0,45,198,192,0,45,198,192]))],e.sarRatio){var c=e.sarRatio[0],f=e.sarRatio[1];n.push(t(b.pasp,new Uint8Array([(4278190080&c)>>24,(16711680&c)>>16,(65280&c)>>8,255&c,(4278190080&f)>>24,(16711680&f)>>16,(65280&f)>>8,255&f])))}return t.apply(null,n)},D=function(e){return t(b.mp4a,new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,(65280&e.channelcount)>>8,255&e.channelcount,(65280&e.samplesize)>>8,255&e.samplesize,0,0,0,0,(65280&e.samplerate)>>8,255&e.samplerate,0,0]),t(b.esds,new Uint8Array([0,0,0,0,3,25,0,0,0,4,17,64,21,0,6,0,0,0,218,192,0,0,218,192,5,2,e.audioobjecttype<<3|e.samplingfrequencyindex>>>1,e.samplingfrequencyindex<<7|e.channelcount<<3,6,1,2])))},c=function(e){var r=new Uint8Array([0,0,0,7,0,0,0,0,0,0,0,0,(4278190080&e.id)>>24,(16711680&e.id)>>16,(65280&e.id)>>8,255&e.id,0,0,0,0,(4278190080&e.duration)>>24,(16711680&e.duration)>>16,(65280&e.duration)>>8,255&e.duration,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,64,0,0,0,(65280&e.width)>>8,255&e.width,0,0,(65280&e.height)>>8,255&e.height,0,0]);return t(b.tkhd,r)},g=function(e){var r,n,i,o,u,l;return r=t(b.tfhd,new Uint8Array([0,0,0,58,(4278190080&e.id)>>24,(16711680&e.id)>>16,(65280&e.id)>>8,255&e.id,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0])),u=Math.floor(e.baseMediaDecodeTime/M),l=Math.floor(e.baseMediaDecodeTime%M),n=t(b.tfdt,new Uint8Array([1,0,0,0,u>>>24&255,u>>>16&255,u>>>8&255,255&u,l>>>24&255,l>>>16&255,l>>>8&255,255&l])),"audio"===e.type?(i=v(e,92),t(b.traf,r,n,i)):(o=h(e),i=v(e,o.length+92),t(b.traf,r,n,i,o))},l=function(e){return e.duration=e.duration||4294967295,t(b.trak,c(e),f(e))},y=function(e){var r=new Uint8Array([0,0,0,0,(4278190080&e.id)>>24,(16711680&e.id)>>16,(65280&e.id)>>8,255&e.id,0,0,0,1,0,0,0,0,0,0,0,0,0,1,0,1]);return"video"!==e.type&&(r[r.length-1]=0),t(b.trex,r)},x=function(e,t){var r=0,n=0,i=0,o=0;return e.length&&(void 0!==e[0].duration&&(r=1),void 0!==e[0].size&&(n=2),void 0!==e[0].flags&&(i=4),void 0!==e[0].compositionTimeOffset&&(o=8)),[0,0,r|n|i|o,1,(4278190080&e.length)>>>24,(16711680&e.length)>>>16,(65280&e.length)>>>8,255&e.length,(4278190080&t)>>>24,(16711680&t)>>>16,(65280&t)>>>8,255&t]},L=function(e,r){var n,i,o,u,l,c;for(r+=20+16*(u=e.samples||[]).length,o=x(u,r),(i=new Uint8Array(o.length+16*u.length)).set(o),n=o.length,c=0;c<u.length;c++)l=u[c],i[n++]=(4278190080&l.duration)>>>24,i[n++]=(16711680&l.duration)>>>16,i[n++]=(65280&l.duration)>>>8,i[n++]=255&l.duration,i[n++]=(4278190080&l.size)>>>24,i[n++]=(16711680&l.size)>>>16,i[n++]=(65280&l.size)>>>8,i[n++]=255&l.size,i[n++]=l.flags.isLeading<<2|l.flags.dependsOn,i[n++]=l.flags.isDependedOn<<6|l.flags.hasRedundancy<<4|l.flags.paddingValue<<1|l.flags.isNonSyncSample,i[n++]=61440&l.flags.degradationPriority,i[n++]=15&l.flags.degradationPriority,i[n++]=(4278190080&l.compositionTimeOffset)>>>24,i[n++]=(16711680&l.compositionTimeOffset)>>>16,i[n++]=(65280&l.compositionTimeOffset)>>>8,i[n++]=255&l.compositionTimeOffset;return t(b.trun,i)},N=function(e,r){var n,i,o,u,l,c;for(r+=20+8*(u=e.samples||[]).length,o=x(u,r),(n=new Uint8Array(o.length+8*u.length)).set(o),i=o.length,c=0;c<u.length;c++)l=u[c],n[i++]=(4278190080&l.duration)>>>24,n[i++]=(16711680&l.duration)>>>16,n[i++]=(65280&l.duration)>>>8,n[i++]=255&l.duration,n[i++]=(4278190080&l.size)>>>24,n[i++]=(16711680&l.size)>>>16,n[i++]=(65280&l.size)>>>8,n[i++]=255&l.size;return t(b.trun,n)},v=function(e,t){return"audio"===e.type?N(e,t):L(e,t)};var F,B,U,q=function(e){return t(b.mdat,e)},H=function(e,r){for(var n=[],i=r.length;i--;)n[i]=g(r[i]);return t.apply(null,[b.moof,t(b.mfhd,new Uint8Array([0,0,0,0,(4278190080&e)>>24,(16711680&e)>>16,(65280&e)>>8,255&e]))].concat(n))},V=function(e,t){var r={size:0,flags:{isLeading:0,dependsOn:1,isDependedOn:0,hasRedundancy:0,degradationPriority:0,isNonSyncSample:1}};return r.dataOffset=t,r.compositionTimeOffset=e.pts-e.dts,r.duration=e.duration,r.size=4*e.length,r.size+=e.byteLength,e.keyFrame&&(r.flags.dependsOn=2,r.flags.isNonSyncSample=0),r},G=[33,16,5,32,164,27],Y=[33,65,108,84,1,2,4,8,168,2,4,8,17,191,252],z=function(e){for(var t=[];e--;)t.push(0);return t},K=B=function(e){return 9e4*e},W=U=function(e){return e/9e4},X=function(e,t){return B(e/t)},Q=function(e,t,r){return U(r?e:e-t)},$=function(e,t,r,n){var i,o,u,l,c,f,d,h=0,p=0;if(t.length&&(u=X(e.baseMediaDecodeTime,e.samplerate),l=Math.ceil(9e4/(e.samplerate/1024)),r&&n&&(p=(h=Math.floor((u-Math.max(r,n))/l))*l),!(h<1||p>45e3))){for((c=function(){if(!F){var e={96e3:[G,[227,64],z(154),[56]],88200:[G,[231],z(170),[56]],64e3:[G,[248,192],z(240),[56]],48e3:[G,[255,192],z(268),[55,148,128],z(54),[112]],44100:[G,[255,192],z(268),[55,163,128],z(84),[112]],32e3:[G,[255,192],z(268),[55,234],z(226),[112]],24e3:[G,[255,192],z(268),[55,255,128],z(268),[111,112],z(126),[224]],16e3:[G,[255,192],z(268),[55,255,128],z(268),[111,255],z(269),[223,108],z(195),[1,192]],12e3:[Y,z(268),[3,127,248],z(268),[6,255,240],z(268),[13,255,224],z(268),[27,253,128],z(259),[56]],11025:[Y,z(268),[3,127,248],z(268),[6,255,240],z(268),[13,255,224],z(268),[27,255,192],z(268),[55,175,128],z(108),[112]],8e3:[Y,z(268),[3,121,16],z(47),[7]]};F=Object.keys(e).reduce(function(t,r){return t[r]=new Uint8Array(e[r].reduce(function(e,t){return e.concat(t)},[])),t},{})}return F}()[e.samplerate])||(c=t[0].data),f=0;f<h;f++)d=t[0],t.splice(0,0,{data:c,dts:d.dts-l,pts:d.pts-l});return e.baseMediaDecodeTime-=Math.floor((i=p,o=e.samplerate,U(i)*o)),p}},J=function(e){delete e.minSegmentDts,delete e.maxSegmentDts,delete e.minSegmentPts,delete e.maxSegmentPts},Z=function(e,t){var r,n=e.minSegmentDts;return t||(n-=e.timelineStartInfo.dts),r=Math.max(0,r=e.timelineStartInfo.baseMediaDecodeTime+n),"audio"===e.type&&(r*=e.samplerate/9e4,r=Math.floor(r)),r},ee=function(e,t){"number"==typeof t.pts&&(void 0===e.timelineStartInfo.pts&&(e.timelineStartInfo.pts=t.pts),void 0===e.minSegmentPts?e.minSegmentPts=t.pts:e.minSegmentPts=Math.min(e.minSegmentPts,t.pts),void 0===e.maxSegmentPts?e.maxSegmentPts=t.pts:e.maxSegmentPts=Math.max(e.maxSegmentPts,t.pts)),"number"==typeof t.dts&&(void 0===e.timelineStartInfo.dts&&(e.timelineStartInfo.dts=t.dts),void 0===e.minSegmentDts?e.minSegmentDts=t.dts:e.minSegmentDts=Math.min(e.minSegmentDts,t.dts),void 0===e.maxSegmentDts?e.maxSegmentDts=t.dts:e.maxSegmentDts=Math.max(e.maxSegmentDts,t.dts))},et=function e(t){t=t||{},e.prototype.init.call(this),this.parse708captions_="boolean"!=typeof t.parse708captions||t.parse708captions,this.captionPackets_=[],this.ccStreams_=[new ef(0,0),new ef(0,1),new ef(1,0),new ef(1,1)],this.parse708captions_&&(this.cc708Stream_=new ea({captionServices:t.captionServices})),this.reset(),this.ccStreams_.forEach(function(e){e.on("data",this.trigger.bind(this,"data")),e.on("partialdone",this.trigger.bind(this,"partialdone")),e.on("done",this.trigger.bind(this,"done"))},this),this.parse708captions_&&(this.cc708Stream_.on("data",this.trigger.bind(this,"data")),this.cc708Stream_.on("partialdone",this.trigger.bind(this,"partialdone")),this.cc708Stream_.on("done",this.trigger.bind(this,"done")))};(et.prototype=new e).push=function(e){var t,r,n,i;if("sei_rbsp"===e.nalUnitType&&(t=function(e){for(var t=0,r={payloadType:-1,payloadSize:0},n=0,i=0;t<e.byteLength&&128!==e[t];){for(;255===e[t];)n+=255,t++;for(n+=e[t++];255===e[t];)i+=255,t++;if(i+=e[t++],!r.payload&&4===n){if("GA94"===String.fromCharCode(e[t+3],e[t+4],e[t+5],e[t+6])){r.payloadType=n,r.payloadSize=i,r.payload=e.subarray(t,t+i);break}r.payload=void 0}t+=i,n=0,i=0}return r}(e.escapedRBSP)).payload&&4===t.payloadType&&(r=181!==(i=t).payload[0]||49!=(i.payload[1]<<8|i.payload[2])||"GA94"!==String.fromCharCode(i.payload[3],i.payload[4],i.payload[5],i.payload[6])||3!==i.payload[7]?null:i.payload.subarray(8,i.payload.length-1))){if(e.dts<this.latestDts_)this.ignoreNextEqualDts_=!0;else{if(e.dts===this.latestDts_&&this.ignoreNextEqualDts_)return this.numSameDts_--,void(this.numSameDts_||(this.ignoreNextEqualDts_=!1));n=function(e,t){var r,n,i,o,u=[];if(!(64&t[0]))return u;for(n=31&t[0],r=0;r<n;r++)o={type:3&t[2+(i=3*r)],pts:e},4&t[i+2]&&(o.ccData=t[i+3]<<8|t[i+4],u.push(o));return u}(e.pts,r),this.captionPackets_=this.captionPackets_.concat(n),this.latestDts_!==e.dts&&(this.numSameDts_=0),this.numSameDts_++,this.latestDts_=e.dts}}},et.prototype.flushCCStreams=function(e){this.ccStreams_.forEach(function(t){return"flush"===e?t.flush():t.partialFlush()},this)},et.prototype.flushStream=function(e){this.captionPackets_.length&&(this.captionPackets_.forEach(function(e,t){e.presortIndex=t}),this.captionPackets_.sort(function(e,t){return e.pts===t.pts?e.presortIndex-t.presortIndex:e.pts-t.pts}),this.captionPackets_.forEach(function(e){e.type<2?this.dispatchCea608Packet(e):this.dispatchCea708Packet(e)},this),this.captionPackets_.length=0),this.flushCCStreams(e)},et.prototype.flush=function(){return this.flushStream("flush")},et.prototype.partialFlush=function(){return this.flushStream("partialFlush")},et.prototype.reset=function(){this.latestDts_=null,this.ignoreNextEqualDts_=!1,this.numSameDts_=0,this.activeCea608Channel_=[null,null],this.ccStreams_.forEach(function(e){e.reset()})},et.prototype.dispatchCea608Packet=function(e){this.setsTextOrXDSActive(e)?this.activeCea608Channel_[e.type]=null:this.setsChannel1Active(e)?this.activeCea608Channel_[e.type]=0:this.setsChannel2Active(e)&&(this.activeCea608Channel_[e.type]=1),null!==this.activeCea608Channel_[e.type]&&this.ccStreams_[(e.type<<1)+this.activeCea608Channel_[e.type]].push(e)},et.prototype.setsChannel1Active=function(e){return 4096==(30720&e.ccData)},et.prototype.setsChannel2Active=function(e){return 6144==(30720&e.ccData)},et.prototype.setsTextOrXDSActive=function(e){return 256==(28928&e.ccData)||4138==(30974&e.ccData)||6186==(30974&e.ccData)},et.prototype.dispatchCea708Packet=function(e){this.parse708captions_&&this.cc708Stream_.push(e)};var er={127:9834,4128:32,4129:160,4133:8230,4138:352,4140:338,4144:9608,4145:8216,4146:8217,4147:8220,4148:8221,4149:8226,4153:8482,4154:353,4156:339,4157:8480,4159:376,4214:8539,4215:8540,4216:8541,4217:8542,4218:9168,4219:9124,4220:9123,4221:9135,4222:9126,4223:9121,4256:12600},en=function(e){return 32<=e&&e<=127||160<=e&&e<=255},ei=function(e){this.windowNum=e,this.reset()};ei.prototype.reset=function(){this.clearText(),this.pendingNewLine=!1,this.winAttr={},this.penAttr={},this.penLoc={},this.penColor={},this.visible=0,this.rowLock=0,this.columnLock=0,this.priority=0,this.relativePositioning=0,this.anchorVertical=0,this.anchorHorizontal=0,this.anchorPoint=0,this.rowCount=1,this.virtualRowCount=this.rowCount+1,this.columnCount=41,this.windowStyle=0,this.penStyle=0},ei.prototype.getText=function(){return this.rows.join("\n")},ei.prototype.clearText=function(){this.rows=[""],this.rowIdx=0},ei.prototype.newLine=function(e){for(this.rows.length>=this.virtualRowCount&&"function"==typeof this.beforeRowOverflow&&this.beforeRowOverflow(e),this.rows.length>0&&(this.rows.push(""),this.rowIdx++);this.rows.length>this.virtualRowCount;)this.rows.shift(),this.rowIdx--},ei.prototype.isEmpty=function(){return 0===this.rows.length||1===this.rows.length&&""===this.rows[0]},ei.prototype.addText=function(e){this.rows[this.rowIdx]+=e},ei.prototype.backspace=function(){if(!this.isEmpty()){var e=this.rows[this.rowIdx];this.rows[this.rowIdx]=e.substr(0,e.length-1)}};var eo=function(e,t,r){this.serviceNum=e,this.text="",this.currentWindow=new ei(-1),this.windows=[],this.stream=r,"string"==typeof t&&this.createTextDecoder(t)};eo.prototype.init=function(e,t){this.startPts=e;for(var r=0;r<8;r++)this.windows[r]=new ei(r),"function"==typeof t&&(this.windows[r].beforeRowOverflow=t)},eo.prototype.setCurrentWindow=function(e){this.currentWindow=this.windows[e]},eo.prototype.createTextDecoder=function(e){if("undefined"==typeof TextDecoder)this.stream.trigger("log",{level:"warn",message:"The `encoding` option is unsupported without TextDecoder support"});else try{this.textDecoder_=new TextDecoder(e)}catch(t){this.stream.trigger("log",{level:"warn",message:"TextDecoder could not be created with "+e+" encoding. "+t})}};var ea=function e(t){t=t||{},e.prototype.init.call(this);var r,n=this,i=t.captionServices||{},o={};Object.keys(i).forEach(function(e){r=i[e],/^SERVICE/.test(e)&&(o[e]=r.encoding)}),this.serviceEncodings=o,this.current708Packet=null,this.services={},this.push=function(e){3===e.type?n.new708Packet():null===n.current708Packet&&n.new708Packet(),n.add708Bytes(e)}};ea.prototype=new e,ea.prototype.new708Packet=function(){null!==this.current708Packet&&this.push708Packet(),this.current708Packet={data:[],ptsVals:[]}},ea.prototype.add708Bytes=function(e){var t=e.ccData;this.current708Packet.ptsVals.push(e.pts),this.current708Packet.data.push(t>>>8),this.current708Packet.data.push(255&t)},ea.prototype.push708Packet=function(){var e=this.current708Packet,t=e.data,r=null,n=null,i=0,o=t[i++];for(e.seq=o>>6,e.sizeCode=63&o;i<t.length;i++)n=31&(o=t[i++]),7==(r=o>>5)&&n>0&&(r=o=t[i++]),this.pushServiceBlock(r,i,n),n>0&&(i+=n-1)},ea.prototype.pushServiceBlock=function(e,t,r){var n,i=t,o=this.current708Packet.data,u=this.services[e];for(u||(u=this.initService(e,i));i<t+r&&i<o.length;i++)en(n=o[i])?i=this.handleText(i,u):24===n?i=this.multiByteCharacter(i,u):16===n?i=this.extendedCommands(i,u):128<=n&&n<=135?i=this.setCurrentWindow(i,u):152<=n&&n<=159?i=this.defineWindow(i,u):136===n?i=this.clearWindows(i,u):140===n?i=this.deleteWindows(i,u):137===n?i=this.displayWindows(i,u):138===n?i=this.hideWindows(i,u):139===n?i=this.toggleWindows(i,u):151===n?i=this.setWindowAttributes(i,u):144===n?i=this.setPenAttributes(i,u):145===n?i=this.setPenColor(i,u):146===n?i=this.setPenLocation(i,u):143===n?u=this.reset(i,u):8===n?u.currentWindow.backspace():12===n?u.currentWindow.clearText():13===n?u.currentWindow.pendingNewLine=!0:14===n?u.currentWindow.clearText():141===n&&i++},ea.prototype.extendedCommands=function(e,t){return en(this.current708Packet.data[++e])&&(e=this.handleText(e,t,{isExtended:!0})),e},ea.prototype.getPts=function(e){return this.current708Packet.ptsVals[Math.floor(e/2)]},ea.prototype.initService=function(e,t){var r,n,i=this;return(r="SERVICE"+e)in this.serviceEncodings&&(n=this.serviceEncodings[r]),this.services[e]=new eo(e,n,i),this.services[e].init(this.getPts(t),function(t){i.flushDisplayed(t,i.services[e])}),this.services[e]},ea.prototype.handleText=function(e,t,r){var n,i,o,u,l=r&&r.isExtended,c=r&&r.isMultiByte,f=this.current708Packet.data,d=f[e],h=f[e+1],p=t.currentWindow;return t.textDecoder_&&!l?(c?(i=[d,h],e++):i=[d],n=t.textDecoder_.decode(new Uint8Array(i))):(u=er[o=(l?4096:0)|d]||o,n=4096&o&&o===u?"":String.fromCharCode(u)),p.pendingNewLine&&!p.isEmpty()&&p.newLine(this.getPts(e)),p.pendingNewLine=!1,p.addText(n),e},ea.prototype.multiByteCharacter=function(e,t){var r=this.current708Packet.data,n=r[e+1],i=r[e+2];return en(n)&&en(i)&&(e=this.handleText(++e,t,{isMultiByte:!0})),e},ea.prototype.setCurrentWindow=function(e,t){var r=7&this.current708Packet.data[e];return t.setCurrentWindow(r),e},ea.prototype.defineWindow=function(e,t){var r=this.current708Packet.data,n=r[e],i=7&n;t.setCurrentWindow(i);var o=t.currentWindow;return n=r[++e],o.visible=(32&n)>>5,o.rowLock=(16&n)>>4,o.columnLock=(8&n)>>3,o.priority=7&n,n=r[++e],o.relativePositioning=(128&n)>>7,o.anchorVertical=127&n,n=r[++e],o.anchorHorizontal=n,n=r[++e],o.anchorPoint=(240&n)>>4,o.rowCount=15&n,n=r[++e],o.columnCount=63&n,n=r[++e],o.windowStyle=(56&n)>>3,o.penStyle=7&n,o.virtualRowCount=o.rowCount+1,e},ea.prototype.setWindowAttributes=function(e,t){var r=this.current708Packet.data,n=r[e],i=t.currentWindow.winAttr;return n=r[++e],i.fillOpacity=(192&n)>>6,i.fillRed=(48&n)>>4,i.fillGreen=(12&n)>>2,i.fillBlue=3&n,n=r[++e],i.borderType=(192&n)>>6,i.borderRed=(48&n)>>4,i.borderGreen=(12&n)>>2,i.borderBlue=3&n,n=r[++e],i.borderType+=(128&n)>>5,i.wordWrap=(64&n)>>6,i.printDirection=(48&n)>>4,i.scrollDirection=(12&n)>>2,i.justify=3&n,n=r[++e],i.effectSpeed=(240&n)>>4,i.effectDirection=(12&n)>>2,i.displayEffect=3&n,e},ea.prototype.flushDisplayed=function(e,t){for(var r=[],n=0;n<8;n++)t.windows[n].visible&&!t.windows[n].isEmpty()&&r.push(t.windows[n].getText());t.endPts=e,t.text=r.join("\n\n"),this.pushCaption(t),t.startPts=e},ea.prototype.pushCaption=function(e){""!==e.text&&(this.trigger("data",{startPts:e.startPts,endPts:e.endPts,text:e.text,stream:"cc708_"+e.serviceNum}),e.text="",e.startPts=e.endPts)},ea.prototype.displayWindows=function(e,t){var r=this.current708Packet.data[++e],n=this.getPts(e);this.flushDisplayed(n,t);for(var i=0;i<8;i++)r&1<<i&&(t.windows[i].visible=1);return e},ea.prototype.hideWindows=function(e,t){var r=this.current708Packet.data[++e],n=this.getPts(e);this.flushDisplayed(n,t);for(var i=0;i<8;i++)r&1<<i&&(t.windows[i].visible=0);return e},ea.prototype.toggleWindows=function(e,t){var r=this.current708Packet.data[++e],n=this.getPts(e);this.flushDisplayed(n,t);for(var i=0;i<8;i++)r&1<<i&&(t.windows[i].visible^=1);return e},ea.prototype.clearWindows=function(e,t){var r=this.current708Packet.data[++e],n=this.getPts(e);this.flushDisplayed(n,t);for(var i=0;i<8;i++)r&1<<i&&t.windows[i].clearText();return e},ea.prototype.deleteWindows=function(e,t){var r=this.current708Packet.data[++e],n=this.getPts(e);this.flushDisplayed(n,t);for(var i=0;i<8;i++)r&1<<i&&t.windows[i].reset();return e},ea.prototype.setPenAttributes=function(e,t){var r=this.current708Packet.data,n=r[e],i=t.currentWindow.penAttr;return n=r[++e],i.textTag=(240&n)>>4,i.offset=(12&n)>>2,i.penSize=3&n,n=r[++e],i.italics=(128&n)>>7,i.underline=(64&n)>>6,i.edgeType=(56&n)>>3,i.fontStyle=7&n,e},ea.prototype.setPenColor=function(e,t){var r=this.current708Packet.data,n=r[e],i=t.currentWindow.penColor;return n=r[++e],i.fgOpacity=(192&n)>>6,i.fgRed=(48&n)>>4,i.fgGreen=(12&n)>>2,i.fgBlue=3&n,n=r[++e],i.bgOpacity=(192&n)>>6,i.bgRed=(48&n)>>4,i.bgGreen=(12&n)>>2,i.bgBlue=3&n,n=r[++e],i.edgeRed=(48&n)>>4,i.edgeGreen=(12&n)>>2,i.edgeBlue=3&n,e},ea.prototype.setPenLocation=function(e,t){var r=this.current708Packet.data,n=r[e],i=t.currentWindow.penLoc;return t.currentWindow.pendingNewLine=!0,n=r[++e],i.row=15&n,n=r[++e],i.column=63&n,e},ea.prototype.reset=function(e,t){var r=this.getPts(e);return this.flushDisplayed(r,t),this.initService(t.serviceNum,e)};var es={42:225,92:233,94:237,95:243,96:250,123:231,124:247,125:209,126:241,127:9608,304:174,305:176,306:189,307:191,308:8482,309:162,310:163,311:9834,312:224,313:160,314:232,315:226,316:234,317:238,318:244,319:251,544:193,545:201,546:211,547:218,548:220,549:252,550:8216,551:161,552:42,553:39,554:8212,555:169,556:8480,557:8226,558:8220,559:8221,560:192,561:194,562:199,563:200,564:202,565:203,566:235,567:206,568:207,569:239,570:212,571:217,572:249,573:219,574:171,575:187,800:195,801:227,802:205,803:204,804:236,805:210,806:242,807:213,808:245,809:123,810:125,811:92,812:94,813:95,814:124,815:126,816:196,817:228,818:214,819:246,820:223,821:165,822:164,823:9474,824:197,825:229,826:216,827:248,828:9484,829:9488,830:9492,831:9496},eu=function(e){return null===e?"":String.fromCharCode(e=es[e]||e)},el=[4352,4384,4608,4640,5376,5408,5632,5664,5888,5920,4096,4864,4896,5120,5152],ec=function(){for(var e=[],t=15;t--;)e.push("");return e},ef=function e(t,r){e.prototype.init.call(this),this.field_=t||0,this.dataChannel_=r||0,this.name_="CC"+(1+(this.field_<<1|this.dataChannel_)),this.setConstants(),this.reset(),this.push=function(e){var t,r,n,i,o;if((t=32639&e.ccData)!==this.lastControlCode_){if(4096==(61440&t)?this.lastControlCode_=t:t!==this.PADDING_&&(this.lastControlCode_=null),n=t>>>8,i=255&t,t!==this.PADDING_){if(t===this.RESUME_CAPTION_LOADING_)this.mode_="popOn";else if(t===this.END_OF_CAPTION_)this.mode_="popOn",this.clearFormatting(e.pts),this.flushDisplayed(e.pts),r=this.displayed_,this.displayed_=this.nonDisplayed_,this.nonDisplayed_=r,this.startPts_=e.pts;else if(t===this.ROLL_UP_2_ROWS_)this.rollUpRows_=2,this.setRollUp(e.pts);else if(t===this.ROLL_UP_3_ROWS_)this.rollUpRows_=3,this.setRollUp(e.pts);else if(t===this.ROLL_UP_4_ROWS_)this.rollUpRows_=4,this.setRollUp(e.pts);else if(t===this.CARRIAGE_RETURN_)this.clearFormatting(e.pts),this.flushDisplayed(e.pts),this.shiftRowsUp_(),this.startPts_=e.pts;else if(t===this.BACKSPACE_)"popOn"===this.mode_?this.nonDisplayed_[this.row_]=this.nonDisplayed_[this.row_].slice(0,-1):this.displayed_[this.row_]=this.displayed_[this.row_].slice(0,-1);else if(t===this.ERASE_DISPLAYED_MEMORY_)this.flushDisplayed(e.pts),this.displayed_=ec();else if(t===this.ERASE_NON_DISPLAYED_MEMORY_)this.nonDisplayed_=ec();else if(t===this.RESUME_DIRECT_CAPTIONING_)"paintOn"!==this.mode_&&(this.flushDisplayed(e.pts),this.displayed_=ec()),this.mode_="paintOn",this.startPts_=e.pts;else if(this.isSpecialCharacter(n,i))o=eu((n=(3&n)<<8)|i),this[this.mode_](e.pts,o),this.column_++;else if(this.isExtCharacter(n,i))"popOn"===this.mode_?this.nonDisplayed_[this.row_]=this.nonDisplayed_[this.row_].slice(0,-1):this.displayed_[this.row_]=this.displayed_[this.row_].slice(0,-1),o=eu((n=(3&n)<<8)|i),this[this.mode_](e.pts,o),this.column_++;else if(this.isMidRowCode(n,i))this.clearFormatting(e.pts),this[this.mode_](e.pts," "),this.column_++,14==(14&i)&&this.addFormatting(e.pts,["i"]),1==(1&i)&&this.addFormatting(e.pts,["u"]);else if(this.isOffsetControlCode(n,i))this.column_+=3&i;else if(this.isPAC(n,i)){var u=el.indexOf(7968&t);"rollUp"===this.mode_&&(u-this.rollUpRows_+1<0&&(u=this.rollUpRows_-1),this.setRollUp(e.pts,u)),u!==this.row_&&(this.clearFormatting(e.pts),this.row_=u),1&i&&-1===this.formatting_.indexOf("u")&&this.addFormatting(e.pts,["u"]),16==(16&t)&&(this.column_=4*((14&t)>>1)),this.isColorPAC(i)&&14==(14&i)&&this.addFormatting(e.pts,["i"])}else this.isNormalChar(n)&&(0===i&&(i=null),o=eu(n)+eu(i),this[this.mode_](e.pts,o),this.column_+=o.length)}}else this.lastControlCode_=null}};ef.prototype=new e,ef.prototype.flushDisplayed=function(e){var t=this.displayed_.map(function(e,t){try{return e.trim()}catch(e){return this.trigger("log",{level:"warn",message:"Skipping a malformed 608 caption at index "+t+"."}),""}},this).join("\n").replace(/^\n+|\n+$/g,"");t.length&&this.trigger("data",{startPts:this.startPts_,endPts:e,text:t,stream:this.name_})},ef.prototype.reset=function(){this.mode_="popOn",this.topRow_=0,this.startPts_=0,this.displayed_=ec(),this.nonDisplayed_=ec(),this.lastControlCode_=null,this.column_=0,this.row_=14,this.rollUpRows_=2,this.formatting_=[]},ef.prototype.setConstants=function(){0===this.dataChannel_?(this.BASE_=16,this.EXT_=17,this.CONTROL_=(20|this.field_)<<8,this.OFFSET_=23):1===this.dataChannel_&&(this.BASE_=24,this.EXT_=25,this.CONTROL_=(28|this.field_)<<8,this.OFFSET_=31),this.PADDING_=0,this.RESUME_CAPTION_LOADING_=32|this.CONTROL_,this.END_OF_CAPTION_=47|this.CONTROL_,this.ROLL_UP_2_ROWS_=37|this.CONTROL_,this.ROLL_UP_3_ROWS_=38|this.CONTROL_,this.ROLL_UP_4_ROWS_=39|this.CONTROL_,this.CARRIAGE_RETURN_=45|this.CONTROL_,this.RESUME_DIRECT_CAPTIONING_=41|this.CONTROL_,this.BACKSPACE_=33|this.CONTROL_,this.ERASE_DISPLAYED_MEMORY_=44|this.CONTROL_,this.ERASE_NON_DISPLAYED_MEMORY_=46|this.CONTROL_},ef.prototype.isSpecialCharacter=function(e,t){return e===this.EXT_&&t>=48&&t<=63},ef.prototype.isExtCharacter=function(e,t){return(e===this.EXT_+1||e===this.EXT_+2)&&t>=32&&t<=63},ef.prototype.isMidRowCode=function(e,t){return e===this.EXT_&&t>=32&&t<=47},ef.prototype.isOffsetControlCode=function(e,t){return e===this.OFFSET_&&t>=33&&t<=35},ef.prototype.isPAC=function(e,t){return e>=this.BASE_&&e<this.BASE_+8&&t>=64&&t<=127},ef.prototype.isColorPAC=function(e){return e>=64&&e<=79||e>=96&&e<=127},ef.prototype.isNormalChar=function(e){return e>=32&&e<=127},ef.prototype.setRollUp=function(e,t){if("rollUp"!==this.mode_&&(this.row_=14,this.mode_="rollUp",this.flushDisplayed(e),this.nonDisplayed_=ec(),this.displayed_=ec()),void 0!==t&&t!==this.row_)for(var r=0;r<this.rollUpRows_;r++)this.displayed_[t-r]=this.displayed_[this.row_-r],this.displayed_[this.row_-r]="";void 0===t&&(t=this.row_),this.topRow_=t-this.rollUpRows_+1},ef.prototype.addFormatting=function(e,t){this.formatting_=this.formatting_.concat(t);var r=t.reduce(function(e,t){return e+"<"+t+">"},"");this[this.mode_](e,r)},ef.prototype.clearFormatting=function(e){if(this.formatting_.length){var t=this.formatting_.reverse().reduce(function(e,t){return e+"</"+t+">"},"");this.formatting_=[],this[this.mode_](e,t)}},ef.prototype.popOn=function(e,t){var r=this.nonDisplayed_[this.row_];r+=t,this.nonDisplayed_[this.row_]=r},ef.prototype.rollUp=function(e,t){var r=this.displayed_[this.row_];r+=t,this.displayed_[this.row_]=r},ef.prototype.shiftRowsUp_=function(){var e;for(e=0;e<this.topRow_;e++)this.displayed_[e]="";for(e=this.row_+1;e<15;e++)this.displayed_[e]="";for(e=this.topRow_;e<this.row_;e++)this.displayed_[e]=this.displayed_[e+1];this.displayed_[this.row_]=""},ef.prototype.paintOn=function(e,t){var r=this.displayed_[this.row_];r+=t,this.displayed_[this.row_]=r};var ed={CaptionStream:et,Cea608Stream:ef,Cea708Stream:ea},eh={H264_STREAM_TYPE:27,ADTS_STREAM_TYPE:15,METADATA_STREAM_TYPE:21},ep="shared",em=function(e,t){var r=1;for(e>t&&(r=-1);Math.abs(t-e)>4294967296;)e+=8589934592*r;return e},eg=function e(t){var r,n;e.prototype.init.call(this),this.type_=t||ep,this.push=function(e){this.type_!==ep&&e.type!==this.type_||(void 0===n&&(n=e.dts),e.dts=em(e.dts,n),e.pts=em(e.pts,n),r=e.dts,this.trigger("data",e))},this.flush=function(){n=r,this.trigger("done")},this.endTimeline=function(){this.flush(),this.trigger("endedtimeline")},this.discontinuity=function(){n=void 0,r=void 0},this.reset=function(){this.discontinuity(),this.trigger("reset")}};eg.prototype=new e;var ey,ev=function(e,t,r){var n,i="";for(n=t;n<r;n++)i+="%"+("00"+e[n].toString(16)).slice(-2);return i},eb=function(e,t,r){return decodeURIComponent(ev(e,t,r))},e_=function(e){return e[0]<<21|e[1]<<14|e[2]<<7|e[3]},eT={TXXX:function(e){var t;if(3===e.data[0]){for(t=1;t<e.data.length;t++)if(0===e.data[t]){e.description=eb(e.data,1,t),e.value=eb(e.data,t+1,e.data.length).replace(/\0*$/,"");break}e.data=e.value}},WXXX:function(e){var t;if(3===e.data[0]){for(t=1;t<e.data.length;t++)if(0===e.data[t]){e.description=eb(e.data,1,t),e.url=eb(e.data,t+1,e.data.length);break}}},PRIV:function(e){var t;for(t=0;t<e.data.length;t++)if(0===e.data[t]){e.owner=unescape(ev(e.data,0,t));break}e.privateData=e.data.subarray(t+1),e.data=e.privateData}};(ey=function(e){var t,r={descriptor:e&&e.descriptor},n=0,i=[],o=0;if(ey.prototype.init.call(this),this.dispatchType=eh.METADATA_STREAM_TYPE.toString(16),r.descriptor)for(t=0;t<r.descriptor.length;t++)this.dispatchType+=("00"+r.descriptor[t].toString(16)).slice(-2);this.push=function(e){var t,r,u,l,c;if("timed-metadata"===e.type){if(e.dataAlignmentIndicator&&(o=0,i.length=0),0===i.length&&(e.data.length<10||73!==e.data[0]||68!==e.data[1]||51!==e.data[2]))this.trigger("log",{level:"warn",message:"Skipping unrecognized metadata packet"});else if(i.push(e),o+=e.data.byteLength,1===i.length&&(n=e_(e.data.subarray(6,10))+10),!(o<n)){for(t={data:new Uint8Array(n),frames:[],pts:i[0].pts,dts:i[0].dts},c=0;c<n;)t.data.set(i[0].data.subarray(0,n-c),c),c+=i[0].data.byteLength,o-=i[0].data.byteLength,i.shift();r=10,64&t.data[5]&&(r+=4+e_(t.data.subarray(10,14)),n-=e_(t.data.subarray(16,20)));do{if((u=e_(t.data.subarray(r+4,r+8)))<1)return void this.trigger("log",{level:"warn",message:"Malformed ID3 frame encountered. Skipping metadata parsing."});if((l={id:String.fromCharCode(t.data[r],t.data[r+1],t.data[r+2],t.data[r+3]),data:t.data.subarray(r+10,r+u+10)}).key=l.id,eT[l.id]&&(eT[l.id](l),"com.apple.streaming.transportStreamTimestamp"===l.owner)){var f=l.data,d=(1&f[3])<<30|f[4]<<22|f[5]<<14|f[6]<<6|f[7]>>>2;d*=4,d+=3&f[7],l.timeStamp=d,void 0===t.pts&&void 0===t.dts&&(t.pts=l.timeStamp,t.dts=l.timeStamp),this.trigger("timestamp",l)}t.frames.push(l),r+=10+u}while(r<n)this.trigger("data",t)}}}}).prototype=new e,(ew=function(){var e=new Uint8Array(188),t=0;ew.prototype.init.call(this),this.push=function(r){var n,i=0,o=188;for(t?((n=new Uint8Array(r.byteLength+t)).set(e.subarray(0,t)),n.set(r,t),t=0):n=r;o<n.byteLength;)71!==n[i]||71!==n[o]?(i++,o++):(this.trigger("data",n.subarray(i,o)),i+=188,o+=188);i<n.byteLength&&(e.set(n.subarray(i),0),t=n.byteLength-i)},this.flush=function(){188===t&&71===e[0]&&(this.trigger("data",e),t=0),this.trigger("done")},this.endTimeline=function(){this.flush(),this.trigger("endedtimeline")},this.reset=function(){t=0,this.trigger("reset")}}).prototype=new e,(eA=function(){var e,t,r,n;eA.prototype.init.call(this),n=this,this.packetsWaitingForPmt=[],this.programMapTable=void 0,e=function(e,n){var i=0;n.payloadUnitStartIndicator&&(i+=e[i]+1),"pat"===n.type?t(e.subarray(i),n):r(e.subarray(i),n)},t=function(e,t){t.section_number=e[7],t.last_section_number=e[8],n.pmtPid=(31&e[10])<<8|e[11],t.pmtPid=n.pmtPid},r=function(e,t){var r,i;if(1&e[5]){for(n.programMapTable={video:null,audio:null,"timed-metadata":{}},r=3+((15&e[1])<<8|e[2])-4,i=12+((15&e[10])<<8|e[11]);i<r;){var o=e[i],u=(31&e[i+1])<<8|e[i+2];o===eh.H264_STREAM_TYPE&&null===n.programMapTable.video?n.programMapTable.video=u:o===eh.ADTS_STREAM_TYPE&&null===n.programMapTable.audio?n.programMapTable.audio=u:o===eh.METADATA_STREAM_TYPE&&(n.programMapTable["timed-metadata"][u]=o),i+=5+((15&e[i+3])<<8|e[i+4])}t.programMapTable=n.programMapTable}},this.push=function(t){var r={},n=4;if(r.payloadUnitStartIndicator=!!(64&t[1]),r.pid=31&t[1],r.pid<<=8,r.pid|=t[2],(48&t[3])>>>4>1&&(n+=t[n]+1),0===r.pid)r.type="pat",e(t.subarray(n),r),this.trigger("data",r);else if(r.pid===this.pmtPid)for(r.type="pmt",e(t.subarray(n),r),this.trigger("data",r);this.packetsWaitingForPmt.length;)this.processPes_.apply(this,this.packetsWaitingForPmt.shift());else void 0===this.programMapTable?this.packetsWaitingForPmt.push([t,n,r]):this.processPes_(t,n,r)},this.processPes_=function(e,t,r){r.pid===this.programMapTable.video?r.streamType=eh.H264_STREAM_TYPE:r.pid===this.programMapTable.audio?r.streamType=eh.ADTS_STREAM_TYPE:r.streamType=this.programMapTable["timed-metadata"][r.pid],r.type="pes",r.data=e.subarray(t),this.trigger("data",r)}}).prototype=new e,eA.STREAM_TYPES={h264:27,adts:15},(eC=function(){var e,t=this,r=!1,n={data:[],size:0},i={data:[],size:0},o={data:[],size:0},u=function(e,r,n){var i,o,u,l,c=new Uint8Array(e.size),f={type:r},d=0,h=0;if(e.data.length&&!(e.size<9)){for(f.trackId=e.data[0].pid,d=0;d<e.data.length;d++)l=e.data[d],c.set(l.data,h),h+=l.data.byteLength;o=c[0]<<16|c[1]<<8|c[2],f.data=new Uint8Array,1===o&&(f.packetLength=6+(c[4]<<8|c[5]),f.dataAlignmentIndicator=0!=(4&c[6]),192&(i=c[7])&&(f.pts=(14&c[9])<<27|(255&c[10])<<20|(254&c[11])<<12|(255&c[12])<<5|(254&c[13])>>>3,f.pts*=4,f.pts+=(6&c[13])>>>1,f.dts=f.pts,64&i&&(f.dts=(14&c[14])<<27|(255&c[15])<<20|(254&c[16])<<12|(255&c[17])<<5|(254&c[18])>>>3,f.dts*=4,f.dts+=(6&c[18])>>>1)),f.data=c.subarray(9+c[8])),u="video"===r||f.packetLength<=e.size,(n||u)&&(e.size=0,e.data.length=0),u&&t.trigger("data",f)}};eC.prototype.init.call(this),this.push=function(l){({pat:function(){},pes:function(){var e,t;switch(l.streamType){case eh.H264_STREAM_TYPE:e=n,t="video";break;case eh.ADTS_STREAM_TYPE:e=i,t="audio";break;case eh.METADATA_STREAM_TYPE:e=o,t="timed-metadata";break;default:return}l.payloadUnitStartIndicator&&u(e,t,!0),e.data.push(l),e.size+=l.data.byteLength},pmt:function(){var n={type:"metadata",tracks:[]};null!==(e=l.programMapTable).video&&n.tracks.push({timelineStartInfo:{baseMediaDecodeTime:0},id:+e.video,codec:"avc",type:"video"}),null!==e.audio&&n.tracks.push({timelineStartInfo:{baseMediaDecodeTime:0},id:+e.audio,codec:"adts",type:"audio"}),r=!0,t.trigger("data",n)}})[l.type]()},this.reset=function(){n.size=0,n.data.length=0,i.size=0,i.data.length=0,this.trigger("reset")},this.flushStreams_=function(){u(n,"video"),u(i,"audio"),u(o,"timed-metadata")},this.flush=function(){if(!r&&e){var n={type:"metadata",tracks:[]};null!==e.video&&n.tracks.push({timelineStartInfo:{baseMediaDecodeTime:0},id:+e.video,codec:"avc",type:"video"}),null!==e.audio&&n.tracks.push({timelineStartInfo:{baseMediaDecodeTime:0},id:+e.audio,codec:"adts",type:"audio"}),t.trigger("data",n)}r=!1,this.flushStreams_(),this.trigger("done")}}).prototype=new e;var eE={PAT_PID:0,MP2T_PACKET_LENGTH:188,TransportPacketStream:ew,TransportParseStream:eA,ElementaryStream:eC,TimestampRolloverStream:eg,CaptionStream:ed.CaptionStream,Cea608Stream:ed.Cea608Stream,Cea708Stream:ed.Cea708Stream,MetadataStream:ey};for(var eS in eh)eh.hasOwnProperty(eS)&&(eE[eS]=eh[eS]);var ew,eA,eC,eI,eO=[96e3,88200,64e3,48e3,44100,32e3,24e3,22050,16e3,12e3,11025,8e3,7350];(eI=function(e){var t,r=0;eI.prototype.init.call(this),this.skipWarn_=function(e,t){this.trigger("log",{level:"warn",message:"adts skiping bytes "+e+" to "+t+" in frame "+r+" outside syncword"})},this.push=function(n){var i,o,u,l,c,f,d=0;if(e||(r=0),"audio"===n.type){for(t&&t.length?(l=t,(t=new Uint8Array(l.byteLength+n.data.byteLength)).set(l),t.set(n.data,l.byteLength)):t=n.data;d+7<t.length;)if(255===t[d]&&240==(246&t[d+1])){if("number"==typeof i&&(this.skipWarn_(i,d),i=null),u=2*(1&~t[d+1]),o=(3&t[d+3])<<11|t[d+4]<<3|(224&t[d+5])>>5,f=9e4*(c=1024*(1+(3&t[d+6])))/eO[(60&t[d+2])>>>2],t.byteLength-d<o)break;this.trigger("data",{pts:n.pts+r*f,dts:n.dts+r*f,sampleCount:c,audioobjecttype:1+(t[d+2]>>>6&3),channelcount:(1&t[d+2])<<2|(192&t[d+3])>>>6,samplerate:eO[(60&t[d+2])>>>2],samplingfrequencyindex:(60&t[d+2])>>>2,samplesize:16,data:t.subarray(d+7+u,d+o)}),r++,d+=o}else"number"!=typeof i&&(i=d),d++;"number"==typeof i&&(this.skipWarn_(i,d),i=null),t=t.subarray(d)}},this.flush=function(){r=0,this.trigger("done")},this.reset=function(){t=void 0,this.trigger("reset")},this.endTimeline=function(){t=void 0,this.trigger("endedtimeline")}}).prototype=new e;var eR,eP,ek,eD=function(e){var t=e.byteLength,r=0,n=0;this.length=function(){return 8*t},this.bitsAvailable=function(){return 8*t+n},this.loadWord=function(){var i=e.byteLength-t,o=new Uint8Array(4),u=Math.min(4,t);if(0===u)throw Error("no bytes available");o.set(e.subarray(i,i+u)),r=new DataView(o.buffer).getUint32(0),n=8*u,t-=u},this.skipBits=function(e){var i;n>e||(e-=n,e-=8*(i=Math.floor(e/8)),t-=i,this.loadWord()),r<<=e,n-=e},this.readBits=function(e){var i=Math.min(n,e),o=r>>>32-i;return(n-=i)>0?r<<=i:t>0&&this.loadWord(),(i=e-i)>0?o<<i|this.readBits(i):o},this.skipLeadingZeros=function(){var e;for(e=0;e<n;++e)if(0!=(r&2147483648>>>e))return r<<=e,n-=e,e;return this.loadWord(),e+this.skipLeadingZeros()},this.skipUnsignedExpGolomb=function(){this.skipBits(1+this.skipLeadingZeros())},this.skipExpGolomb=function(){this.skipBits(1+this.skipLeadingZeros())},this.readUnsignedExpGolomb=function(){var e=this.skipLeadingZeros();return this.readBits(e+1)-1},this.readExpGolomb=function(){var e=this.readUnsignedExpGolomb();return 1&e?1+e>>>1:-1*(e>>>1)},this.readBoolean=function(){return 1===this.readBits(1)},this.readUnsignedByte=function(){return this.readBits(8)},this.loadWord()};(eP=function(){var e,t,r=0;eP.prototype.init.call(this),this.push=function(n){var i;t?((i=new Uint8Array(t.byteLength+n.data.byteLength)).set(t),i.set(n.data,t.byteLength),t=i):t=n.data;for(var o=t.byteLength;r<o-3;r++)if(1===t[r+2]){e=r+5;break}for(;e<o;)switch(t[e]){case 0:if(0!==t[e-1]){e+=2;break}if(0!==t[e-2]){e++;break}r+3!==e-2&&this.trigger("data",t.subarray(r+3,e-2));do e++;while(1!==t[e]&&e<o)r=e-2,e+=3;break;case 1:if(0!==t[e-1]||0!==t[e-2]){e+=3;break}this.trigger("data",t.subarray(r+3,e-2)),r=e-2,e+=3;break;default:e+=3}t=t.subarray(r),e-=r,r=0},this.reset=function(){t=null,r=0,this.trigger("reset")},this.flush=function(){t&&t.byteLength>3&&this.trigger("data",t.subarray(r+3)),t=null,r=0,this.trigger("done")},this.endTimeline=function(){this.flush(),this.trigger("endedtimeline")}}).prototype=new e,ek={100:!0,110:!0,122:!0,244:!0,44:!0,83:!0,86:!0,118:!0,128:!0,138:!0,139:!0,134:!0},(eR=function(){var e,t,r,n,i,o,u,l=new eP;eR.prototype.init.call(this),e=this,this.push=function(e){"video"===e.type&&(t=e.trackId,r=e.pts,n=e.dts,l.push(e))},l.on("data",function(u){var l={trackId:t,pts:r,dts:n,data:u,nalUnitTypeCode:31&u[0]};switch(l.nalUnitTypeCode){case 5:l.nalUnitType="slice_layer_without_partitioning_rbsp_idr";break;case 6:l.nalUnitType="sei_rbsp",l.escapedRBSP=i(u.subarray(1));break;case 7:l.nalUnitType="seq_parameter_set_rbsp",l.escapedRBSP=i(u.subarray(1)),l.config=o(l.escapedRBSP);break;case 8:l.nalUnitType="pic_parameter_set_rbsp";break;case 9:l.nalUnitType="access_unit_delimiter_rbsp"}e.trigger("data",l)}),l.on("done",function(){e.trigger("done")}),l.on("partialdone",function(){e.trigger("partialdone")}),l.on("reset",function(){e.trigger("reset")}),l.on("endedtimeline",function(){e.trigger("endedtimeline")}),this.flush=function(){l.flush()},this.partialFlush=function(){l.partialFlush()},this.reset=function(){l.reset()},this.endTimeline=function(){l.endTimeline()},u=function(e,t){var r,n=8,i=8;for(r=0;r<e;r++)0!==i&&(i=(n+t.readExpGolomb()+256)%256),n=0===i?n:i},i=function(e){for(var t,r,n=e.byteLength,i=[],o=1;o<n-2;)0===e[o]&&0===e[o+1]&&3===e[o+2]?(i.push(o+2),o+=2):o++;if(0===i.length)return e;t=n-i.length,r=new Uint8Array(t);var u=0;for(o=0;o<t;u++,o++)u===i[0]&&(u++,i.shift()),r[o]=e[u];return r},o=function(e){var t,r,n,i,o,l,c,f,d,h,p,m,g=0,y=0,v=0,b=0,_=[1,1];if(r=(t=new eD(e)).readUnsignedByte(),i=t.readUnsignedByte(),n=t.readUnsignedByte(),t.skipUnsignedExpGolomb(),ek[r]&&(3===(o=t.readUnsignedExpGolomb())&&t.skipBits(1),t.skipUnsignedExpGolomb(),t.skipUnsignedExpGolomb(),t.skipBits(1),t.readBoolean()))for(p=3!==o?8:12,m=0;m<p;m++)t.readBoolean()&&u(m<6?16:64,t);if(t.skipUnsignedExpGolomb(),0===(l=t.readUnsignedExpGolomb()))t.readUnsignedExpGolomb();else if(1===l)for(t.skipBits(1),t.skipExpGolomb(),t.skipExpGolomb(),c=t.readUnsignedExpGolomb(),m=0;m<c;m++)t.skipExpGolomb();if(t.skipUnsignedExpGolomb(),t.skipBits(1),f=t.readUnsignedExpGolomb(),d=t.readUnsignedExpGolomb(),0===(h=t.readBits(1))&&t.skipBits(1),t.skipBits(1),t.readBoolean()&&(g=t.readUnsignedExpGolomb(),y=t.readUnsignedExpGolomb(),v=t.readUnsignedExpGolomb(),b=t.readUnsignedExpGolomb()),t.readBoolean()&&t.readBoolean()){switch(t.readUnsignedByte()){case 1:_=[1,1];break;case 2:_=[12,11];break;case 3:_=[10,11];break;case 4:_=[16,11];break;case 5:_=[40,33];break;case 6:_=[24,11];break;case 7:_=[20,11];break;case 8:_=[32,11];break;case 9:_=[80,33];break;case 10:_=[18,11];break;case 11:_=[15,11];break;case 12:_=[64,33];break;case 13:_=[160,99];break;case 14:_=[4,3];break;case 15:_=[3,2];break;case 16:_=[2,1];break;case 255:_=[t.readUnsignedByte()<<8|t.readUnsignedByte(),t.readUnsignedByte()<<8|t.readUnsignedByte()]}_&&(_[0],_[1])}return{profileIdc:r,levelIdc:n,profileCompatibility:i,width:16*(f+1)-2*g-2*y,height:(2-h)*(d+1)*16-2*v-2*b,sarRatio:_}}}).prototype=new e;var eN,eL=[96e3,88200,64e3,48e3,44100,32e3,24e3,22050,16e3,12e3,11025,8e3,7350],ex=function(e,t){var r=e[t+6]<<21|e[t+7]<<14|e[t+8]<<7|e[t+9];return r=r>=0?r:0,(16&e[t+5])>>4?r+20:r+10},ej=function(e){return e[0]<<21|e[1]<<14|e[2]<<7|e[3]},eM={isLikelyAacData:function(e){var t=function e(t,r){return t.length-r<10||73!==t[r]||68!==t[r+1]||51!==t[r+2]?r:e(t,r+=ex(t,r))}(e,0);return e.length>=t+2&&255==(255&e[t])&&240==(240&e[t+1])&&16==(22&e[t+1])},parseId3TagSize:ex,parseAdtsSize:function(e,t){var r=(224&e[t+5])>>5,n=e[t+4]<<3;return 6144&e[t+3]|n|r},parseType:function(e,t){return 73===e[t]&&68===e[t+1]&&51===e[t+2]?"timed-metadata":!0&e[t]&&240==(240&e[t+1])?"audio":null},parseSampleRate:function(e){for(var t=0;t+5<e.length;){if(255===e[t]&&240==(246&e[t+1]))return eL[(60&e[t+2])>>>2];t++}return null},parseAacTimestamp:function(e){var t,r,n;t=10,64&e[5]&&(t+=4+ej(e.subarray(10,14)));do{if((r=ej(e.subarray(t+4,t+8)))<1)break;if("PRIV"===String.fromCharCode(e[t],e[t+1],e[t+2],e[t+3])){n=e.subarray(t+10,t+r+10);for(var i=0;i<n.byteLength;i++)if(0===n[i]){if("com.apple.streaming.transportStreamTimestamp"===unescape(function(e,t,r){var n,i="";for(n=0;n<r;n++)i+="%"+("00"+e[n].toString(16)).slice(-2);return i}(n,0,i))){var o=n.subarray(i+1),u=(1&o[3])<<30|o[4]<<22|o[5]<<14|o[6]<<6|o[7]>>>2;return(u*=4)+(3&o[7])}break}}t+=10+r}while(t<e.byteLength)return null}};(eN=function(){var e=new Uint8Array,t=0;eN.prototype.init.call(this),this.setTimestamp=function(e){t=e},this.push=function(r){var n,i,o,u=0,l=0;for(e.length?(o=e.length,(e=new Uint8Array(r.byteLength+o)).set(e.subarray(0,o)),e.set(r,o)):e=r;e.length-l>=3;)if(e[l]!=="I".charCodeAt(0)||e[l+1]!=="D".charCodeAt(0)||e[l+2]!=="3".charCodeAt(0)){if(255!=(255&e[l])||240!=(240&e[l+1]))l++;else{if(e.length-l<7||l+(u=eM.parseAdtsSize(e,l))>e.length)break;i={type:"audio",data:e.subarray(l,l+u),pts:t,dts:t},this.trigger("data",i),l+=u}}else{if(e.length-l<10||l+(u=eM.parseId3TagSize(e,l))>e.length)break;n={type:"timed-metadata",data:e.subarray(l,l+u)},this.trigger("data",n),l+=u}e=e.length-l>0?e.subarray(l):new Uint8Array},this.reset=function(){e=new Uint8Array,this.trigger("reset")},this.endTimeline=function(){e=new Uint8Array,this.trigger("endedtimeline")}}).prototype=new e;var eF,eB,eU,eq,eH=["audioobjecttype","channelcount","samplerate","samplingfrequencyindex","samplesize"],eV=["width","height","profileIdc","levelIdc","profileCompatibility","sarRatio"],eG=eM.isLikelyAacData,eY=function(e,t){t.stream=e,this.trigger("log",t)},ez=function(e,t){for(var r=Object.keys(t),n=0;n<r.length;n++){var i=r[n];"headOfPipeline"!==i&&t[i].on&&t[i].on("log",eY.bind(e,i))}},eK=function(e,t){var r;if(e.length!==t.length)return!1;for(r=0;r<e.length;r++)if(e[r]!==t[r])return!1;return!0},eW=function(e,t,r,n,i,o){return{start:{dts:e,pts:e+(r-t)},end:{dts:e+(n-t),pts:e+(i-r)},prependedContentDuration:o,baseMediaDecodeTime:e}};(eB=function(e,t){var r,n=[],i=0,o=0,u=1/0;r=(t=t||{}).firstSequenceNumber||0,eB.prototype.init.call(this),this.push=function(t){ee(e,t),e&&eH.forEach(function(r){e[r]=t[r]}),n.push(t)},this.setEarliestDts=function(e){i=e},this.setVideoBaseMediaDecodeTime=function(e){u=e},this.setAudioAppendStart=function(e){o=e},this.flush=function(){var l,c,f,d,h,p,m,g,y;0!==n.length&&(g=n,y=i,l=e.minSegmentDts>=y?g:(e.minSegmentDts=1/0,g.filter(function(t){return t.dts>=y&&(e.minSegmentDts=Math.min(e.minSegmentDts,t.dts),e.minSegmentPts=e.minSegmentDts,!0)})),e.baseMediaDecodeTime=Z(e,t.keepOriginalTimestamps),m=$(e,l,o,u),e.samples=function(e){var t,r=[];for(t=0;t<e.length;t++)r.push({size:e[t].data.byteLength,duration:1024});return r}(l),f=q(function(e){var t,r,n=0,i=new Uint8Array(function(e){var t,r=0;for(t=0;t<e.length;t++)r+=e[t].data.byteLength;return r}(e));for(t=0;t<e.length;t++)r=e[t],i.set(r.data,n),n+=r.data.byteLength;return i}(l)),n=[],c=H(r,[e]),d=new Uint8Array(c.byteLength+f.byteLength),r++,d.set(c),d.set(f,c.byteLength),J(e),h=Math.ceil(9216e4/e.samplerate),l.length&&(p=l.length*h,this.trigger("segmentTimingInfo",eW(X(e.baseMediaDecodeTime,e.samplerate),l[0].dts,l[0].pts,l[0].dts+p,l[0].pts+p,m||0)),this.trigger("timingInfo",{start:l[0].pts,end:l[0].pts+p})),this.trigger("data",{track:e,boxes:d})),this.trigger("done","AudioSegmentStream")},this.reset=function(){J(e),n=[],this.trigger("reset")}}).prototype=new e,(eF=function(e,t){var r,n,i,o=[],u=[];r=(t=t||{}).firstSequenceNumber||0,eF.prototype.init.call(this),delete e.minPTS,this.gopCache_=[],this.push=function(t){ee(e,t),"seq_parameter_set_rbsp"!==t.nalUnitType||n||(n=t.config,e.sps=[t.data],eV.forEach(function(t){e[t]=n[t]},this)),"pic_parameter_set_rbsp"!==t.nalUnitType||i||(i=t.data,e.pps=[t.data]),o.push(t)},this.flush=function(){for(var n,i,l,c,f,d,h,p,m,g,y=0;o.length&&"access_unit_delimiter_rbsp"!==o[0].nalUnitType;)o.shift();if(0===o.length)return this.resetStream_(),void this.trigger("done","VideoSegmentStream");if((f=function(e){var t,r,n=[],i=[];for(n.byteLength=0,n.nalCount=0,n.duration=0,n.pts=e[0].pts,n.dts=e[0].dts,i.byteLength=0,i.nalCount=0,i.duration=0,i.pts=e[0].pts,i.dts=e[0].dts,t=0;t<e.length;t++)(r=e[t]).keyFrame?(n.length&&(i.push(n),i.byteLength+=n.byteLength,i.nalCount+=n.nalCount,i.duration+=n.duration),(n=[r]).nalCount=r.length,n.byteLength=r.byteLength,n.pts=r.pts,n.dts=r.dts,n.duration=r.duration):(n.duration+=r.duration,n.nalCount+=r.length,n.byteLength+=r.byteLength,n.push(r));return i.length&&n.duration<=0&&(n.duration=i[i.length-1].duration),i.byteLength+=n.byteLength,i.nalCount+=n.nalCount,i.duration+=n.duration,i.push(n),i}(function(e){var t,r,n=[],i=[];for(i.byteLength=0,i.nalCount=0,i.duration=0,n.byteLength=0,t=0;t<e.length;t++)"access_unit_delimiter_rbsp"===(r=e[t]).nalUnitType?(n.length&&(n.duration=r.dts-n.dts,i.byteLength+=n.byteLength,i.nalCount+=n.length,i.duration+=n.duration,i.push(n)),(n=[r]).byteLength=r.data.byteLength,n.pts=r.pts,n.dts=r.dts):("slice_layer_without_partitioning_rbsp_idr"===r.nalUnitType&&(n.keyFrame=!0),n.duration=r.dts-n.dts,n.byteLength+=r.data.byteLength,n.push(r));return i.length&&(!n.duration||n.duration<=0)&&(n.duration=i[i.length-1].duration),i.byteLength+=n.byteLength,i.nalCount+=n.length,i.duration+=n.duration,i.push(n),i}(o)))[0][0].keyFrame||((c=this.getGopForFusion_(o[0],e))?(y=c.duration,f.unshift(c),f.byteLength+=c.byteLength,f.nalCount+=c.nalCount,f.pts=c.pts,f.dts=c.dts,f.duration+=c.duration):(!(n=f)[0][0].keyFrame&&n.length>1&&(i=n.shift(),n.byteLength-=i.byteLength,n.nalCount-=i.nalCount,n[0][0].dts=i.dts,n[0][0].pts=i.pts,n[0][0].duration+=i.duration),f=n)),u.length){if(!(l=t.alignGopsAtEnd?this.alignGopsAtEnd_(f):this.alignGopsAtStart_(f)))return this.gopCache_.unshift({gop:f.pop(),pps:e.pps,sps:e.sps}),this.gopCache_.length=Math.min(6,this.gopCache_.length),o=[],this.resetStream_(),void this.trigger("done","VideoSegmentStream");J(e),f=l}ee(e,f),e.samples=function(e,t){var r,n,i,o,u,l=0,c=[];for(r=0;r<e.length;r++)for(o=e[r],n=0;n<o.length;n++)u=o[n],l+=(i=V(u,l)).size,c.push(i);return c}(f),h=q(function(e){var t,r,n,i,o,u,l=0,c=e.byteLength,f=e.nalCount,d=new Uint8Array(c+4*f),h=new DataView(d.buffer);for(t=0;t<e.length;t++)for(i=e[t],r=0;r<i.length;r++)for(o=i[r],n=0;n<o.length;n++)u=o[n],h.setUint32(l,u.data.byteLength),l+=4,d.set(u.data,l),l+=u.data.byteLength;return d}(f)),e.baseMediaDecodeTime=Z(e,t.keepOriginalTimestamps),this.trigger("processedGopsInfo",f.map(function(e){return{pts:e.pts,dts:e.dts,byteLength:e.byteLength}})),m=f[0],g=f[f.length-1],this.trigger("segmentTimingInfo",eW(e.baseMediaDecodeTime,m.dts,m.pts,g.dts+g.duration,g.pts+g.duration,y)),this.trigger("timingInfo",{start:f[0].pts,end:f[f.length-1].pts+f[f.length-1].duration}),this.gopCache_.unshift({gop:f.pop(),pps:e.pps,sps:e.sps}),this.gopCache_.length=Math.min(6,this.gopCache_.length),o=[],this.trigger("baseMediaDecodeTime",e.baseMediaDecodeTime),this.trigger("timelineStartInfo",e.timelineStartInfo),d=H(r,[e]),p=new Uint8Array(d.byteLength+h.byteLength),r++,p.set(d),p.set(h,d.byteLength),this.trigger("data",{track:e,boxes:p}),this.resetStream_(),this.trigger("done","VideoSegmentStream")},this.reset=function(){this.resetStream_(),o=[],this.gopCache_.length=0,u.length=0,this.trigger("reset")},this.resetStream_=function(){J(e),n=void 0,i=void 0},this.getGopForFusion_=function(t){var r,n,i,o,u,l=1/0;for(u=0;u<this.gopCache_.length;u++)i=(o=this.gopCache_[u]).gop,e.pps&&eK(e.pps[0],o.pps[0])&&e.sps&&eK(e.sps[0],o.sps[0])&&(i.dts<e.timelineStartInfo.dts||(r=t.dts-i.dts-i.duration)>=-1e4&&r<=45e3&&(!n||l>r)&&(n=o,l=r));return n?n.gop:null},this.alignGopsAtStart_=function(e){var t,r,n,i,o,l,c,f;for(o=e.byteLength,l=e.nalCount,c=e.duration,t=r=0;t<u.length&&r<e.length&&(n=u[t],i=e[r],n.pts!==i.pts);)i.pts>n.pts?t++:(r++,o-=i.byteLength,l-=i.nalCount,c-=i.duration);return 0===r?e:r===e.length?null:((f=e.slice(r)).byteLength=o,f.duration=c,f.nalCount=l,f.pts=f[0].pts,f.dts=f[0].dts,f)},this.alignGopsAtEnd_=function(e){for(t=u.length-1,r=e.length-1,o=null,l=!1;t>=0&&r>=0;){if(n=u[t],i=e[r],n.pts===i.pts){l=!0;break}n.pts>i.pts?t--:(t===u.length-1&&(o=r),r--)}if(!l&&null===o)return null;if(0===(c=l?r:o))return e;var t,r,n,i,o,l,c,f=e.slice(c),d=f.reduce(function(e,t){return e.byteLength+=t.byteLength,e.duration+=t.duration,e.nalCount+=t.nalCount,e},{byteLength:0,duration:0,nalCount:0});return f.byteLength=d.byteLength,f.duration=d.duration,f.nalCount=d.nalCount,f.pts=f[0].pts,f.dts=f[0].dts,f},this.alignGopsWith=function(e){u=e}}).prototype=new e,(eq=function(e,t){this.numberOfTracks=0,this.metadataStream=t,void 0!==(e=e||{}).remux?this.remuxTracks=!!e.remux:this.remuxTracks=!0,"boolean"==typeof e.keepOriginalTimestamps?this.keepOriginalTimestamps=e.keepOriginalTimestamps:this.keepOriginalTimestamps=!1,this.pendingTracks=[],this.videoTrack=null,this.pendingBoxes=[],this.pendingCaptions=[],this.pendingMetadata=[],this.pendingBytes=0,this.emittedTracks=0,eq.prototype.init.call(this),this.push=function(e){return e.text?this.pendingCaptions.push(e):e.frames?this.pendingMetadata.push(e):(this.pendingTracks.push(e.track),this.pendingBytes+=e.boxes.byteLength,"video"===e.track.type&&(this.videoTrack=e.track,this.pendingBoxes.push(e.boxes)),void("audio"===e.track.type&&(this.audioTrack=e.track,this.pendingBoxes.unshift(e.boxes))))}}).prototype=new e,eq.prototype.flush=function(e){var r,n,o,u,l,c,f,d=0,h={captions:[],captionStreams:{},metadata:[],info:{}},p=0;if(this.pendingTracks.length<this.numberOfTracks){if("VideoSegmentStream"!==e&&"AudioSegmentStream"!==e||this.remuxTracks)return;if(0===this.pendingTracks.length)return this.emittedTracks++,void(this.emittedTracks>=this.numberOfTracks&&(this.trigger("done"),this.emittedTracks=0))}if(this.videoTrack?(p=this.videoTrack.timelineStartInfo.pts,eV.forEach(function(e){h.info[e]=this.videoTrack[e]},this)):this.audioTrack&&(p=this.audioTrack.timelineStartInfo.pts,eH.forEach(function(e){h.info[e]=this.audioTrack[e]},this)),this.videoTrack||this.audioTrack){for(1===this.pendingTracks.length?h.type=this.pendingTracks[0].type:h.type="combined",this.emittedTracks+=this.pendingTracks.length,r=this.pendingTracks,o=t(b.ftyp,_,T,_,E),u=i(r),(n=new Uint8Array(o.byteLength+u.byteLength)).set(o),n.set(u,o.byteLength),h.initSegment=new Uint8Array(n.byteLength),h.initSegment.set(n),h.data=new Uint8Array(this.pendingBytes),f=0;f<this.pendingBoxes.length;f++)h.data.set(this.pendingBoxes[f],d),d+=this.pendingBoxes[f].byteLength;for(f=0;f<this.pendingCaptions.length;f++)(l=this.pendingCaptions[f]).startTime=Q(l.startPts,p,this.keepOriginalTimestamps),l.endTime=Q(l.endPts,p,this.keepOriginalTimestamps),h.captionStreams[l.stream]=!0,h.captions.push(l);for(f=0;f<this.pendingMetadata.length;f++)(c=this.pendingMetadata[f]).cueTime=Q(c.pts,p,this.keepOriginalTimestamps),h.metadata.push(c);for(h.metadata.dispatchType=this.metadataStream.dispatchType,this.pendingTracks.length=0,this.videoTrack=null,this.pendingBoxes.length=0,this.pendingCaptions.length=0,this.pendingBytes=0,this.pendingMetadata.length=0,this.trigger("data",h),f=0;f<h.captions.length;f++)l=h.captions[f],this.trigger("caption",l);for(f=0;f<h.metadata.length;f++)c=h.metadata[f],this.trigger("id3Frame",c)}this.emittedTracks>=this.numberOfTracks&&(this.trigger("done"),this.emittedTracks=0)},eq.prototype.setRemux=function(e){this.remuxTracks=e},(eU=function(e){var t,r,n=this,i=!0;eU.prototype.init.call(this),e=e||{},this.baseMediaDecodeTime=e.baseMediaDecodeTime||0,this.transmuxPipeline_={},this.setupAacPipeline=function(){var i={};this.transmuxPipeline_=i,i.type="aac",i.metadataStream=new eE.MetadataStream,i.aacStream=new eN,i.audioTimestampRolloverStream=new eE.TimestampRolloverStream("audio"),i.timedMetadataTimestampRolloverStream=new eE.TimestampRolloverStream("timed-metadata"),i.adtsStream=new eI,i.coalesceStream=new eq(e,i.metadataStream),i.headOfPipeline=i.aacStream,i.aacStream.pipe(i.audioTimestampRolloverStream).pipe(i.adtsStream),i.aacStream.pipe(i.timedMetadataTimestampRolloverStream).pipe(i.metadataStream).pipe(i.coalesceStream),i.metadataStream.on("timestamp",function(e){i.aacStream.setTimestamp(e.timeStamp)}),i.aacStream.on("data",function(o){"timed-metadata"!==o.type&&"audio"!==o.type||i.audioSegmentStream||(r=r||{timelineStartInfo:{baseMediaDecodeTime:n.baseMediaDecodeTime},codec:"adts",type:"audio"},i.coalesceStream.numberOfTracks++,i.audioSegmentStream=new eB(r,e),i.audioSegmentStream.on("log",n.getLogTrigger_("audioSegmentStream")),i.audioSegmentStream.on("timingInfo",n.trigger.bind(n,"audioTimingInfo")),i.adtsStream.pipe(i.audioSegmentStream).pipe(i.coalesceStream),n.trigger("trackinfo",{hasAudio:!!r,hasVideo:!!t}))}),i.coalesceStream.on("data",this.trigger.bind(this,"data")),i.coalesceStream.on("done",this.trigger.bind(this,"done")),ez(this,i)},this.setupTsPipeline=function(){var i={};this.transmuxPipeline_=i,i.type="ts",i.metadataStream=new eE.MetadataStream,i.packetStream=new eE.TransportPacketStream,i.parseStream=new eE.TransportParseStream,i.elementaryStream=new eE.ElementaryStream,i.timestampRolloverStream=new eE.TimestampRolloverStream,i.adtsStream=new eI,i.h264Stream=new eR,i.captionStream=new eE.CaptionStream(e),i.coalesceStream=new eq(e,i.metadataStream),i.headOfPipeline=i.packetStream,i.packetStream.pipe(i.parseStream).pipe(i.elementaryStream).pipe(i.timestampRolloverStream),i.timestampRolloverStream.pipe(i.h264Stream),i.timestampRolloverStream.pipe(i.adtsStream),i.timestampRolloverStream.pipe(i.metadataStream).pipe(i.coalesceStream),i.h264Stream.pipe(i.captionStream).pipe(i.coalesceStream),i.elementaryStream.on("data",function(o){var u;if("metadata"===o.type){for(u=o.tracks.length;u--;)t||"video"!==o.tracks[u].type?r||"audio"!==o.tracks[u].type||((r=o.tracks[u]).timelineStartInfo.baseMediaDecodeTime=n.baseMediaDecodeTime):(t=o.tracks[u]).timelineStartInfo.baseMediaDecodeTime=n.baseMediaDecodeTime;t&&!i.videoSegmentStream&&(i.coalesceStream.numberOfTracks++,i.videoSegmentStream=new eF(t,e),i.videoSegmentStream.on("log",n.getLogTrigger_("videoSegmentStream")),i.videoSegmentStream.on("timelineStartInfo",function(t){r&&!e.keepOriginalTimestamps&&(r.timelineStartInfo=t,i.audioSegmentStream.setEarliestDts(t.dts-n.baseMediaDecodeTime))}),i.videoSegmentStream.on("processedGopsInfo",n.trigger.bind(n,"gopInfo")),i.videoSegmentStream.on("segmentTimingInfo",n.trigger.bind(n,"videoSegmentTimingInfo")),i.videoSegmentStream.on("baseMediaDecodeTime",function(e){r&&i.audioSegmentStream.setVideoBaseMediaDecodeTime(e)}),i.videoSegmentStream.on("timingInfo",n.trigger.bind(n,"videoTimingInfo")),i.h264Stream.pipe(i.videoSegmentStream).pipe(i.coalesceStream)),r&&!i.audioSegmentStream&&(i.coalesceStream.numberOfTracks++,i.audioSegmentStream=new eB(r,e),i.audioSegmentStream.on("log",n.getLogTrigger_("audioSegmentStream")),i.audioSegmentStream.on("timingInfo",n.trigger.bind(n,"audioTimingInfo")),i.audioSegmentStream.on("segmentTimingInfo",n.trigger.bind(n,"audioSegmentTimingInfo")),i.adtsStream.pipe(i.audioSegmentStream).pipe(i.coalesceStream)),n.trigger("trackinfo",{hasAudio:!!r,hasVideo:!!t})}}),i.coalesceStream.on("data",this.trigger.bind(this,"data")),i.coalesceStream.on("id3Frame",function(e){e.dispatchType=i.metadataStream.dispatchType,n.trigger("id3Frame",e)}),i.coalesceStream.on("caption",this.trigger.bind(this,"caption")),i.coalesceStream.on("done",this.trigger.bind(this,"done")),ez(this,i)},this.setBaseMediaDecodeTime=function(n){var i=this.transmuxPipeline_;e.keepOriginalTimestamps||(this.baseMediaDecodeTime=n),r&&(r.timelineStartInfo.dts=void 0,r.timelineStartInfo.pts=void 0,J(r),i.audioTimestampRolloverStream&&i.audioTimestampRolloverStream.discontinuity()),t&&(i.videoSegmentStream&&(i.videoSegmentStream.gopCache_=[]),t.timelineStartInfo.dts=void 0,t.timelineStartInfo.pts=void 0,J(t),i.captionStream.reset()),i.timestampRolloverStream&&i.timestampRolloverStream.discontinuity()},this.setAudioAppendStart=function(e){r&&this.transmuxPipeline_.audioSegmentStream.setAudioAppendStart(e)},this.setRemux=function(t){var r=this.transmuxPipeline_;e.remux=t,r&&r.coalesceStream&&r.coalesceStream.setRemux(t)},this.alignGopsWith=function(e){t&&this.transmuxPipeline_.videoSegmentStream&&this.transmuxPipeline_.videoSegmentStream.alignGopsWith(e)},this.getLogTrigger_=function(e){var t=this;return function(r){r.stream=e,t.trigger("log",r)}},this.push=function(e){if(i){var t=eG(e);t&&"aac"!==this.transmuxPipeline_.type?this.setupAacPipeline():t||"ts"===this.transmuxPipeline_.type||this.setupTsPipeline(),i=!1}this.transmuxPipeline_.headOfPipeline.push(e)},this.flush=function(){i=!0,this.transmuxPipeline_.headOfPipeline.flush()},this.endTimeline=function(){this.transmuxPipeline_.headOfPipeline.endTimeline()},this.reset=function(){this.transmuxPipeline_.headOfPipeline&&this.transmuxPipeline_.headOfPipeline.reset()},this.resetCaptions=function(){this.transmuxPipeline_.captionStream&&this.transmuxPipeline_.captionStream.reset()}}).prototype=new e;var eX,eQ={Transmuxer:eU},e$=function(e){return e>>>0},eJ=function(e){var t="";return(t+=String.fromCharCode(e[0])+String.fromCharCode(e[1])+String.fromCharCode(e[2]))+String.fromCharCode(e[3])},eZ=function e(t,r){var n,i,o,u,l,c=[];if(!r.length)return null;for(n=0;n<t.byteLength;)i=e$(t[n]<<24|t[n+1]<<16|t[n+2]<<8|t[n+3]),o=eJ(t.subarray(n+4,n+8)),u=i>1?n+i:t.byteLength,o===r[0]&&(1===r.length?c.push(t.subarray(n+8,u)):(l=e(t.subarray(n+8,u),r.slice(1))).length&&(c=c.concat(l))),n=u;return c},e0=j.getUint64,e1=function(e){return{isLeading:(12&e[0])>>>2,dependsOn:3&e[0],isDependedOn:(192&e[1])>>>6,hasRedundancy:(48&e[1])>>>4,paddingValue:(14&e[1])>>>1,isNonSyncSample:1&e[1],degradationPriority:e[2]<<8|e[3]}},e2="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:void 0!==r.g?r.g:"undefined"!=typeof self?self:{},e3="undefined"!=typeof window?window:void 0!==e2?e2:"undefined"!=typeof self?self:{},e4=function(e){for(var t,r,n=e.byteLength,i=[],o=1;o<n-2;)0===e[o]&&0===e[o+1]&&3===e[o+2]?(i.push(o+2),o+=2):o++;if(0===i.length)return e;t=n-i.length,r=new Uint8Array(t);var u=0;for(o=0;o<t;u++,o++)u===i[0]&&(u++,i.shift()),r[o]=e[u];return r},e6=ed.CaptionStream,e8=function(e,t){for(var r=e,n=0;n<t.length;n++){var i=t[n];if(r<i.size)return i;r-=i.size}return null},e5=function(e,t){var r=eZ(e,["moof","traf"]),n=eZ(e,["mdat"]),i={},o=[];return n.forEach(function(e,t){var n=r[t];o.push({mdat:e,traf:n})}),o.forEach(function(e){var r,n,o,u,l,c,f,d,h,p,m,g,y,v,b,_,T,E,S,w=e.mdat,A=e.traf,C=(c=eZ(A,["tfhd"])[0],d=new DataView(c.buffer,c.byteOffset,c.byteLength),p=1&(h={version:c[0],flags:new Uint8Array(c.subarray(1,4)),trackId:d.getUint32(4)}).flags[2],m=2&h.flags[2],g=8&h.flags[2],y=16&h.flags[2],v=32&h.flags[2],b=65536&h.flags[0],_=131072&h.flags[0],f=8,p&&(f+=4,h.baseDataOffset=d.getUint32(12),f+=4),m&&(h.sampleDescriptionIndex=d.getUint32(f),f+=4),g&&(h.defaultSampleDuration=d.getUint32(f),f+=4),y&&(h.defaultSampleSize=d.getUint32(f),f+=4),v&&(h.defaultSampleFlags=d.getUint32(f)),b&&(h.durationIsEmpty=!0),!p&&_&&(h.baseDataOffsetIsMoof=!0),h),I=C.trackId,O=eZ(A,["tfdt"]),R=O.length>0?(1===(E={version:(T=O[0])[0],flags:new Uint8Array(T.subarray(1,4))}).version?E.baseMediaDecodeTime=e0(T.subarray(4)):E.baseMediaDecodeTime=e$(T[4]<<24|T[5]<<16|T[6]<<8|T[7]),E).baseMediaDecodeTime:0,P=eZ(A,["trun"]);t===I&&P.length>0&&(r=R,n=C.defaultSampleDuration||0,o=C.defaultSampleSize||0,u=C.trackId,l=[],P.forEach(function(e){var t=function(e){var t,r={version:e[0],flags:new Uint8Array(e.subarray(1,4)),samples:[]},n=new DataView(e.buffer,e.byteOffset,e.byteLength),i=1&r.flags[2],o=4&r.flags[2],u=1&r.flags[1],l=2&r.flags[1],c=4&r.flags[1],f=8&r.flags[1],d=n.getUint32(4),h=8;for(i&&(r.dataOffset=n.getInt32(h),h+=4),o&&d&&(t={flags:e1(e.subarray(h,h+4))},h+=4,u&&(t.duration=n.getUint32(h),h+=4),l&&(t.size=n.getUint32(h),h+=4),f&&(1===r.version?t.compositionTimeOffset=n.getInt32(h):t.compositionTimeOffset=n.getUint32(h),h+=4),r.samples.push(t),d--);d--;)t={},u&&(t.duration=n.getUint32(h),h+=4),l&&(t.size=n.getUint32(h),h+=4),c&&(t.flags=e1(e.subarray(h,h+4)),h+=4),f&&(1===r.version?t.compositionTimeOffset=n.getInt32(h):t.compositionTimeOffset=n.getUint32(h),h+=4),r.samples.push(t);return r}(e).samples;t.forEach(function(e){void 0===e.duration&&(e.duration=n),void 0===e.size&&(e.size=o),e.trackId=u,e.dts=r,void 0===e.compositionTimeOffset&&(e.compositionTimeOffset=0),"bigint"==typeof r?(e.pts=r+e3.BigInt(e.compositionTimeOffset),r+=e3.BigInt(e.duration)):(e.pts=r+e.compositionTimeOffset,r+=e.duration)}),l=l.concat(t)}),S=function(e,t,r){var n,i,o,u,l=new DataView(e.buffer,e.byteOffset,e.byteLength),c={logs:[],seiNals:[]};for(i=0;i+4<e.length;i+=o)if(o=l.getUint32(i),i+=4,!(o<=0))switch(31&e[i]){case 6:var f=e.subarray(i+1,i+1+o),d=e8(i,t);if(n={nalUnitType:"sei_rbsp",size:o,data:f,escapedRBSP:e4(f),trackId:r},d)n.pts=d.pts,n.dts=d.dts,u=d;else{if(!u){c.logs.push({level:"warn",message:"We've encountered a nal unit without data at "+i+" for trackId "+r+". See mux.js#223."});break}n.pts=u.pts,n.dts=u.dts}c.seiNals.push(n)}return c}(w,l,I),i[I]||(i[I]={seiNals:[],logs:[]}),i[I].seiNals=i[I].seiNals.concat(S.seiNals),i[I].logs=i[I].logs.concat(S.logs))}),i},e9=function(){var e,t,r,n,i,o,u=!1;this.isInitialized=function(){return u},this.init=function(t){e=new e6,u=!0,o=!!t&&t.isPartial,e.on("data",function(e){e.startTime=e.startPts/n,e.endTime=e.endPts/n,i.captions.push(e),i.captionStreams[e.stream]=!0}),e.on("log",function(e){i.logs.push(e)})},this.isNewInit=function(e,t){return!(e&&0===e.length||t&&"object"==typeof t&&0===Object.keys(t).length||r===e[0]&&n===t[r])},this.parse=function(e,o,u){var l;if(!this.isInitialized()||!o||!u)return null;if(this.isNewInit(o,u))n=u[r=o[0]];else if(null===r||!n)return t.push(e),null;for(;t.length>0;){var c=t.shift();this.parse(c,o,u)}return(l=function(e,t,r){if(null===t)return null;var n=e5(e,t)[t]||{};return{seiNals:n.seiNals,logs:n.logs,timescale:r}}(e,r,n))&&l.logs&&(i.logs=i.logs.concat(l.logs)),null!==l&&l.seiNals?(this.pushNals(l.seiNals),this.flushStream(),i):i.logs.length?{logs:i.logs,captions:[],captionStreams:[]}:null},this.pushNals=function(t){if(!this.isInitialized()||!t||0===t.length)return null;t.forEach(function(t){e.push(t)})},this.flushStream=function(){if(!this.isInitialized())return null;o?e.partialFlush():e.flush()},this.clearParsedCaptions=function(){i.captions=[],i.captionStreams={},i.logs=[]},this.resetCaptionStream=function(){if(!this.isInitialized())return null;e.reset()},this.clearAllCaptions=function(){this.clearParsedCaptions(),this.resetCaptionStream()},this.reset=function(){t=[],r=null,n=null,i?this.clearParsedCaptions():i={captions:[],captionStreams:{},logs:[]},this.resetCaptionStream()},this.reset()},e7=function(e){return("00"+e.toString(16)).slice(-2)},te=j.getUint64;eX=function(e){var t=0===e[0]?12:20;return e$(e[t]<<24|e[t+1]<<16|e[t+2]<<8|e[t+3])};var tt=function(e,t){var r=eZ(t,["moof","traf"]).reduce(function(t,r){var n,i,o=eZ(r,["tfhd"])[0],u=e[e$(o[4]<<24|o[5]<<16|o[6]<<8|o[7])]||9e4,l=eZ(r,["tfdt"])[0],c=new DataView(l.buffer,l.byteOffset,l.byteLength);return"bigint"==typeof(n=1===l[0]?te(l.subarray(4,12)):c.getUint32(4))?i=n/e3.BigInt(u):"number"!=typeof n||isNaN(n)||(i=n/u),i<Number.MAX_SAFE_INTEGER&&(i=Number(i)),i<t&&(t=i),t},1/0);return"bigint"==typeof r||isFinite(r)?r:0},tr=function(e){var t=eZ(e,["moov","trak"]),r=[];return t.forEach(function(e){var t,n,i={},o=eZ(e,["tkhd"])[0];o&&(n=(t=new DataView(o.buffer,o.byteOffset,o.byteLength)).getUint8(0),i.id=0===n?t.getUint32(12):t.getUint32(20));var u=eZ(e,["mdia","hdlr"])[0];if(u){var l=eJ(u.subarray(8,12));i.type="vide"===l?"video":"soun"===l?"audio":l}var c=eZ(e,["mdia","minf","stbl","stsd"])[0];if(c){var f=c.subarray(8);i.codec=eJ(f.subarray(4,8));var d,h=eZ(f,[i.codec])[0];h&&(/^[asm]vc[1-9]$/i.test(i.codec)?(d=h.subarray(78),"avcC"===eJ(d.subarray(4,8))&&d.length>11?(i.codec+=".",i.codec+=e7(d[9]),i.codec+=e7(d[10]),i.codec+=e7(d[11])):i.codec="avc1.4d400d"):/^mp4[a,v]$/i.test(i.codec)?(d=h.subarray(28),"esds"===eJ(d.subarray(4,8))&&d.length>20&&0!==d[19]?(i.codec+="."+e7(d[19]),i.codec+="."+e7(d[20]>>>2&63).replace(/^0/,"")):i.codec="mp4a.40.2"):i.codec=i.codec.toLowerCase())}var p=eZ(e,["mdia","mdhd"])[0];p&&(i.timescale=eX(p)),r.push(i)}),r},tn=function(e){var t=31&e[1];return(t<<=8)|e[2]},ti=function(e){return!!(64&e[1])},to=function(e){var t=0;return(48&e[3])>>>4>1&&(t+=e[4]+1),t},ta=function(e){switch(e){case 5:return"slice_layer_without_partitioning_rbsp_idr";case 6:return"sei_rbsp";case 7:return"seq_parameter_set_rbsp";case 8:return"pic_parameter_set_rbsp";case 9:return"access_unit_delimiter_rbsp";default:return null}},ts={};ts.ts={parseType:function(e,t){var r=tn(e);return 0===r?"pat":r===t?"pmt":t?"pes":null},parsePat:function(e){var t=ti(e),r=4+to(e);return t&&(r+=e[r]+1),(31&e[r+10])<<8|e[r+11]},parsePmt:function(e){var t,r={},n=ti(e),i=4+to(e);if(n&&(i+=e[i]+1),1&e[i+5]){t=3+((15&e[i+1])<<8|e[i+2])-4;for(var o=12+((15&e[i+10])<<8|e[i+11]);o<t;){var u=i+o;r[(31&e[u+1])<<8|e[u+2]]=e[u],o+=5+((15&e[u+3])<<8|e[u+4])}return r}},parsePayloadUnitStartIndicator:ti,parsePesType:function(e,t){switch(t[tn(e)]){case eh.H264_STREAM_TYPE:return"video";case eh.ADTS_STREAM_TYPE:return"audio";case eh.METADATA_STREAM_TYPE:return"timed-metadata";default:return null}},parsePesTime:function(e){if(!ti(e))return null;var t=4+to(e);if(t>=e.byteLength)return null;var r,n=null;return 192&(r=e[t+7])&&((n={}).pts=(14&e[t+9])<<27|(255&e[t+10])<<20|(254&e[t+11])<<12|(255&e[t+12])<<5|(254&e[t+13])>>>3,n.pts*=4,n.pts+=(6&e[t+13])>>>1,n.dts=n.pts,64&r&&(n.dts=(14&e[t+14])<<27|(255&e[t+15])<<20|(254&e[t+16])<<12|(255&e[t+17])<<5|(254&e[t+18])>>>3,n.dts*=4,n.dts+=(6&e[t+18])>>>1)),n},videoPacketContainsKeyFrame:function(e){for(var t=4+to(e),r=e.subarray(t),n=0,i=0,o=!1;i<r.byteLength-3;i++)if(1===r[i+2]){n=i+5;break}for(;n<r.byteLength;)switch(r[n]){case 0:if(0!==r[n-1]){n+=2;break}if(0!==r[n-2]){n++;break}i+3!==n-2&&"slice_layer_without_partitioning_rbsp_idr"===ta(31&r[i+3])&&(o=!0);do n++;while(1!==r[n]&&n<r.length)i=n-2,n+=3;break;case 1:if(0!==r[n-1]||0!==r[n-2]){n+=3;break}"slice_layer_without_partitioning_rbsp_idr"===ta(31&r[i+3])&&(o=!0),i=n-2,n+=3;break;default:n+=3}return r=r.subarray(i),n-=i,i=0,r&&r.byteLength>3&&"slice_layer_without_partitioning_rbsp_idr"===ta(31&r[i+3])&&(o=!0),o}},ts.aac=eM;var tu=function(e,t,r){for(var n,i,o,u,l=0,c=188,f=!1;c<=e.byteLength;)if(71!==e[l]||71!==e[c]&&c!==e.byteLength)l++,c++;else{if(n=e.subarray(l,c),"pes"===ts.ts.parseType(n,t.pid)&&(i=ts.ts.parsePesType(n,t.table),o=ts.ts.parsePayloadUnitStartIndicator(n),"audio"===i&&o&&(u=ts.ts.parsePesTime(n))&&(u.type="audio",r.audio.push(u),f=!0)),f)break;l+=188,c+=188}for(l=(c=e.byteLength)-188,f=!1;l>=0;)if(71!==e[l]||71!==e[c]&&c!==e.byteLength)l--,c--;else{if(n=e.subarray(l,c),"pes"===ts.ts.parseType(n,t.pid)&&(i=ts.ts.parsePesType(n,t.table),o=ts.ts.parsePayloadUnitStartIndicator(n),"audio"===i&&o&&(u=ts.ts.parsePesTime(n))&&(u.type="audio",r.audio.push(u),f=!0)),f)break;l-=188,c-=188}},tl=function(e,t,r){for(var n,i,o,u,l,c,f,d=0,h=188,p=!1,m={data:[],size:0};h<e.byteLength;)if(71!==e[d]||71!==e[h])d++,h++;else{if(n=e.subarray(d,h),"pes"===ts.ts.parseType(n,t.pid)&&(i=ts.ts.parsePesType(n,t.table),o=ts.ts.parsePayloadUnitStartIndicator(n),"video"===i&&(o&&!p&&(u=ts.ts.parsePesTime(n))&&(u.type="video",r.video.push(u),p=!0),!r.firstKeyFrame))){if(o&&0!==m.size){for(l=new Uint8Array(m.size),c=0;m.data.length;)f=m.data.shift(),l.set(f,c),c+=f.byteLength;if(ts.ts.videoPacketContainsKeyFrame(l)){var g=ts.ts.parsePesTime(l);g?(r.firstKeyFrame=g,r.firstKeyFrame.type="video"):console.warn("Failed to extract PTS/DTS from PES at first keyframe. This could be an unusual TS segment, or else mux.js did not parse your TS segment correctly. If you know your TS segments do contain PTS/DTS on keyframes please file a bug report! You can try ffprobe to double check for yourself.")}m.size=0}m.data.push(n),m.size+=n.byteLength}if(p&&r.firstKeyFrame)break;d+=188,h+=188}for(d=(h=e.byteLength)-188,p=!1;d>=0;)if(71!==e[d]||71!==e[h])d--,h--;else{if(n=e.subarray(d,h),"pes"===ts.ts.parseType(n,t.pid)&&(i=ts.ts.parsePesType(n,t.table),o=ts.ts.parsePayloadUnitStartIndicator(n),"video"===i&&o&&(u=ts.ts.parsePesTime(n))&&(u.type="video",r.video.push(u),p=!0)),p)break;d-=188,h-=188}},tc=function(e,t){var r;return(r=ts.aac.isLikelyAacData(e)?function(e){for(var t,r=!1,n=0,i=null,o=null,u=0,l=0;e.length-l>=3;){switch(ts.aac.parseType(e,l)){case"timed-metadata":if(e.length-l<10||(u=ts.aac.parseId3TagSize(e,l))>e.length){r=!0;break}null===o&&(t=e.subarray(l,l+u),o=ts.aac.parseAacTimestamp(t)),l+=u;break;case"audio":if(e.length-l<7||(u=ts.aac.parseAdtsSize(e,l))>e.length){r=!0;break}null===i&&(t=e.subarray(l,l+u),i=ts.aac.parseSampleRate(t)),n++,l+=u;break;default:l++}if(r)return null}if(null===i||null===o)return null;var c=9e4/i;return{audio:[{type:"audio",dts:o,pts:o},{type:"audio",dts:o+1024*n*c,pts:o+1024*n*c}]}}(e):function(e){var t={pid:null,table:null},r={};for(var n in function(e,t){for(var r,n=0,i=188;i<e.byteLength;)if(71!==e[n]||71!==e[i])n++,i++;else{switch(r=e.subarray(n,i),ts.ts.parseType(r,t.pid)){case"pat":t.pid=ts.ts.parsePat(r);break;case"pmt":var o=ts.ts.parsePmt(r);t.table=t.table||{},Object.keys(o).forEach(function(e){t.table[e]=o[e]})}n+=188,i+=188}}(e,t),t.table)if(t.table.hasOwnProperty(n))switch(t.table[n]){case eh.H264_STREAM_TYPE:r.video=[],tl(e,t,r),0===r.video.length&&delete r.video;break;case eh.ADTS_STREAM_TYPE:r.audio=[],tu(e,t,r),0===r.audio.length&&delete r.audio}return r}(e))&&(r.audio||r.video)?(function(e,t){if(e.audio&&e.audio.length){var r=t;(void 0===r||isNaN(r))&&(r=e.audio[0].dts),e.audio.forEach(function(e){e.dts=em(e.dts,r),e.pts=em(e.pts,r),e.dtsTime=e.dts/9e4,e.ptsTime=e.pts/9e4})}if(e.video&&e.video.length){var n=t;if((void 0===n||isNaN(n))&&(n=e.video[0].dts),e.video.forEach(function(e){e.dts=em(e.dts,n),e.pts=em(e.pts,n),e.dtsTime=e.dts/9e4,e.ptsTime=e.pts/9e4}),e.firstKeyFrame){var i=e.firstKeyFrame;i.dts=em(i.dts,n),i.pts=em(i.pts,n),i.dtsTime=i.dts/9e4,i.ptsTime=i.pts/9e4}}}(r,t),r):null},tf=function(){function e(e,t){this.options=t||{},this.self=e,this.init()}var t=e.prototype;return t.init=function(){var e,t;this.transmuxer&&this.transmuxer.dispose(),this.transmuxer=new eQ.Transmuxer(this.options),e=this.self,(t=this.transmuxer).on("data",function(t){var r=t.initSegment;t.initSegment={data:r.buffer,byteOffset:r.byteOffset,byteLength:r.byteLength};var n=t.data;t.data=n.buffer,e.postMessage({action:"data",segment:t,byteOffset:n.byteOffset,byteLength:n.byteLength},[t.data])}),t.on("done",function(t){e.postMessage({action:"done"})}),t.on("gopInfo",function(t){e.postMessage({action:"gopInfo",gopInfo:t})}),t.on("videoSegmentTimingInfo",function(t){var r={start:{decode:W(t.start.dts),presentation:W(t.start.pts)},end:{decode:W(t.end.dts),presentation:W(t.end.pts)},baseMediaDecodeTime:W(t.baseMediaDecodeTime)};t.prependedContentDuration&&(r.prependedContentDuration=W(t.prependedContentDuration)),e.postMessage({action:"videoSegmentTimingInfo",videoSegmentTimingInfo:r})}),t.on("audioSegmentTimingInfo",function(t){var r={start:{decode:W(t.start.dts),presentation:W(t.start.pts)},end:{decode:W(t.end.dts),presentation:W(t.end.pts)},baseMediaDecodeTime:W(t.baseMediaDecodeTime)};t.prependedContentDuration&&(r.prependedContentDuration=W(t.prependedContentDuration)),e.postMessage({action:"audioSegmentTimingInfo",audioSegmentTimingInfo:r})}),t.on("id3Frame",function(t){e.postMessage({action:"id3Frame",id3Frame:t})}),t.on("caption",function(t){e.postMessage({action:"caption",caption:t})}),t.on("trackinfo",function(t){e.postMessage({action:"trackinfo",trackInfo:t})}),t.on("audioTimingInfo",function(t){e.postMessage({action:"audioTimingInfo",audioTimingInfo:{start:W(t.start),end:W(t.end)}})}),t.on("videoTimingInfo",function(t){e.postMessage({action:"videoTimingInfo",videoTimingInfo:{start:W(t.start),end:W(t.end)}})}),t.on("log",function(t){e.postMessage({action:"log",log:t})})},t.pushMp4Captions=function(e){this.captionParser||(this.captionParser=new e9,this.captionParser.init());var t=new Uint8Array(e.data,e.byteOffset,e.byteLength),r=this.captionParser.parse(t,e.trackIds,e.timescales);this.self.postMessage({action:"mp4Captions",captions:r&&r.captions||[],logs:r&&r.logs||[],data:t.buffer},[t.buffer])},t.probeMp4StartTime=function(e){var t=e.timescales,r=e.data,n=tt(t,r);this.self.postMessage({action:"probeMp4StartTime",startTime:n,data:r},[r.buffer])},t.probeMp4Tracks=function(e){var t=e.data,r=tr(t);this.self.postMessage({action:"probeMp4Tracks",tracks:r,data:t},[t.buffer])},t.probeTs=function(e){var t=e.data,r=e.baseStartTime,n=tc(t,"number"!=typeof r||isNaN(r)?void 0:9e4*r),i=null;n&&((i={hasVideo:n.video&&2===n.video.length||!1,hasAudio:n.audio&&2===n.audio.length||!1}).hasVideo&&(i.videoStart=n.video[0].ptsTime),i.hasAudio&&(i.audioStart=n.audio[0].ptsTime)),this.self.postMessage({action:"probeTs",result:i,data:t},[t.buffer])},t.clearAllMp4Captions=function(){this.captionParser&&this.captionParser.clearAllCaptions()},t.clearParsedMp4Captions=function(){this.captionParser&&this.captionParser.clearParsedCaptions()},t.push=function(e){var t=new Uint8Array(e.data,e.byteOffset,e.byteLength);this.transmuxer.push(t)},t.reset=function(){this.transmuxer.reset()},t.setTimestampOffset=function(e){var t=e.timestampOffset||0;this.transmuxer.setBaseMediaDecodeTime(Math.round(K(t)))},t.setAudioAppendStart=function(e){this.transmuxer.setAudioAppendStart(Math.ceil(K(e.appendStart)))},t.setRemux=function(e){this.transmuxer.setRemux(e.remux)},t.flush=function(e){this.transmuxer.flush(),self.postMessage({action:"done",type:"transmuxed"})},t.endTimeline=function(){this.transmuxer.endTimeline(),self.postMessage({action:"endedtimeline",type:"transmuxed"})},t.alignGopsWith=function(e){this.transmuxer.alignGopsWith(e.gopsToAlignWith.slice())},e}();self.onmessage=function(e){"init"===e.data.action&&e.data.options?this.messageHandlers=new tf(self,e.data.options):(this.messageHandlers||(this.messageHandlers=new tf(self)),e.data&&e.data.action&&"init"!==e.data.action&&this.messageHandlers[e.data.action]&&this.messageHandlers[e.data.action](e.data))}}))),aK=function(e){var t=e.transmuxer,r=e.bytes,n=e.audioAppendStart,i=e.gopsToAlignWith,o=e.remux,u=e.onData,l=e.onTrackInfo,c=e.onAudioTimingInfo,f=e.onVideoTimingInfo,d=e.onVideoSegmentTimingInfo,h=e.onAudioSegmentTimingInfo,p=e.onId3,m=e.onCaptions,g=e.onDone,y=e.onEndedTimeline,v=e.onTransmuxerLog,b=e.isEndOfTimeline,_={buffer:[]},T=b;if(t.onmessage=function(r){var n,i,o;t.currentTransmux===e&&("data"===r.data.action&&function(e,t,r){var n=e.data.segment,i=n.type,o=n.initSegment,u=n.captions,l=n.captionStreams,c=n.metadata,f=n.videoFrameDtsTime,d=n.videoFramePtsTime;t.buffer.push({captions:u,captionStreams:l,metadata:c});var h=e.data.segment.boxes||{data:e.data.segment.data},p={type:i,data:new Uint8Array(h.data,h.data.byteOffset,h.data.byteLength),initSegment:new Uint8Array(o.data,o.byteOffset,o.byteLength)};void 0!==f&&(p.videoFrameDtsTime=f),void 0!==d&&(p.videoFramePtsTime=d),r(p)}(r,_,u),"trackinfo"===r.data.action&&l(r.data.trackInfo),"gopInfo"===r.data.action&&(_.gopInfo=r.data.gopInfo),"audioTimingInfo"===r.data.action&&c(r.data.audioTimingInfo),"videoTimingInfo"===r.data.action&&f(r.data.videoTimingInfo),"videoSegmentTimingInfo"===r.data.action&&d(r.data.videoSegmentTimingInfo),"audioSegmentTimingInfo"===r.data.action&&h(r.data.audioSegmentTimingInfo),"id3Frame"===r.data.action&&p([r.data.id3Frame],r.data.id3Frame.dispatchType),"caption"===r.data.action&&m(r.data.caption),"endedtimeline"===r.data.action&&(T=!1,y()),"log"===r.data.action&&v(r.data.log),"transmuxed"===r.data.type&&(T||(t.onmessage=null,i=(n={transmuxedData:_,callback:g}).transmuxedData,o=n.callback,i.buffer=[],o(i),aW(t))))},n&&t.postMessage({action:"setAudioAppendStart",appendStart:n}),Array.isArray(i)&&t.postMessage({action:"alignGopsWith",gopsToAlignWith:i}),void 0!==o&&t.postMessage({action:"setRemux",remux:o}),r.byteLength){var E=r instanceof ArrayBuffer?r:r.buffer,S=r instanceof ArrayBuffer?0:r.byteOffset;t.postMessage({action:"push",data:E,byteOffset:S,byteLength:r.byteLength},[E])}b&&t.postMessage({action:"endTimeline"}),t.postMessage({action:"flush"})},aW=function(e){e.currentTransmux=null,e.transmuxQueue.length&&(e.currentTransmux=e.transmuxQueue.shift(),"function"==typeof e.currentTransmux?e.currentTransmux():aK(e.currentTransmux))},aX=function(e,t){e.postMessage({action:t}),aW(e)},aQ=function(e){!function(e,t){if(!t.currentTransmux)return t.currentTransmux=e,void aX(t,e);t.transmuxQueue.push(aX.bind(null,t,e))}("reset",e)},a$=function(e){var t=e.transmuxer,r=e.endAction||e.action,n=e.callback,i=l({},e,{endAction:null,transmuxer:null,callback:null});if(t.addEventListener("message",function i(o){o.data.action===r&&(t.removeEventListener("message",i),o.data.data&&(o.data.data=new Uint8Array(o.data.data,e.byteOffset||0,e.byteLength||o.data.data.byteLength),e.data&&(e.data=o.data.data)),n(o.data))}),e.data){var o=e.data instanceof ArrayBuffer;i.byteOffset=o?0:e.data.byteOffset,i.byteLength=e.data.byteLength;var u=[o?e.data:e.data.buffer];t.postMessage(i,u)}else t.postMessage(i)},aJ=function(e){e.forEach(function(e){e.abort()})},aZ=function(e,t){return t.timedout?{status:t.status,message:"HLS request timed-out at URL: "+t.uri,code:-101,xhr:t}:t.aborted?{status:t.status,message:"HLS request aborted at URL: "+t.uri,code:-102,xhr:t}:e?{status:t.status,message:"HLS request errored at URL: "+t.uri,code:2,xhr:t}:"arraybuffer"===t.responseType&&0===t.response.byteLength?{status:t.status,message:"Empty HLS response at URL: "+t.uri,code:2,xhr:t}:null},a0=function(e,t,r){return function(n,i){var o=i.response,u=aZ(n,i);if(u)return r(u,e);if(16!==o.byteLength)return r({status:i.status,message:"Invalid HLS key at URL: "+i.uri,code:2,xhr:i},e);for(var l=new DataView(o),c=new Uint32Array([l.getUint32(0),l.getUint32(4),l.getUint32(8),l.getUint32(12)]),f=0;f<t.length;f++)t[f].bytes=c;return r(null,e)}},a1=function(e,t){var r=to(e.map.bytes);if("mp4"!==r)return t({internal:!0,message:"Found unsupported "+(r||"unknown")+" container for initialization segment at URL: "+(e.map.resolvedUri||e.map.uri),code:2});a$({action:"probeMp4Tracks",data:e.map.bytes,transmuxer:e.transmuxer,callback:function(r){var n=r.tracks,i=r.data;return e.map.bytes=i,n.forEach(function(t){e.map.tracks=e.map.tracks||{},e.map.tracks[t.type]||(e.map.tracks[t.type]=t,"number"==typeof t.id&&t.timescale&&(e.map.timescales=e.map.timescales||{},e.map.timescales[t.id]=t.timescale))}),t(null)}})},a2=function(e){var t=e.segment,r=e.bytes,n=e.trackInfoFn,i=e.timingInfoFn,o=e.videoSegmentTimingInfoFn,u=e.audioSegmentTimingInfoFn,l=e.id3Fn,c=e.captionsFn,f=e.isEndOfTimeline,d=e.endedTimelineFn,h=e.dataFn,p=e.doneFn,m=e.onTransmuxerLog,g=t.map&&t.map.tracks||{},y=!!(g.audio&&g.video),v=i.bind(null,t,"audio","start"),b=i.bind(null,t,"audio","end"),_=i.bind(null,t,"video","start"),T=i.bind(null,t,"video","end");a$({action:"probeTs",transmuxer:t.transmuxer,data:r,baseStartTime:t.baseStartTime,callback:function(e){t.bytes=r=e.data;var i=e.result;i&&(n(t,{hasAudio:i.hasAudio,hasVideo:i.hasVideo,isMuxed:y}),n=null,i.hasAudio&&!y&&v(i.audioStart),i.hasVideo&&_(i.videoStart),v=null,_=null),function(e){if(!e.transmuxer.currentTransmux)return e.transmuxer.currentTransmux=e,void aK(e);e.transmuxer.transmuxQueue.push(e)}({bytes:r,transmuxer:t.transmuxer,audioAppendStart:t.audioAppendStart,gopsToAlignWith:t.gopsToAlignWith,remux:y,onData:function(e){e.type="combined"===e.type?"video":e.type,h(t,e)},onTrackInfo:function(e){n&&(y&&(e.isMuxed=!0),n(t,e))},onAudioTimingInfo:function(e){v&&void 0!==e.start&&(v(e.start),v=null),b&&void 0!==e.end&&b(e.end)},onVideoTimingInfo:function(e){_&&void 0!==e.start&&(_(e.start),_=null),T&&void 0!==e.end&&T(e.end)},onVideoSegmentTimingInfo:function(e){o(e)},onAudioSegmentTimingInfo:function(e){u(e)},onId3:function(e,r){l(t,e,r)},onCaptions:function(e){c(t,[e])},isEndOfTimeline:f,onEndedTimeline:function(){d()},onTransmuxerLog:m,onDone:function(e){p&&(e.type="combined"===e.type?"video":e.type,p(null,t,e))}})}})},a3=function(e){var t=e.segment,r=e.bytes,n=e.trackInfoFn,i=e.timingInfoFn,o=e.videoSegmentTimingInfoFn,u=e.audioSegmentTimingInfoFn,l=e.id3Fn,c=e.captionsFn,f=e.isEndOfTimeline,d=e.endedTimelineFn,h=e.dataFn,p=e.doneFn,m=e.onTransmuxerLog,g=new Uint8Array(r);if(e0(g,["moof"]).length>0){t.isFmp4=!0;var y=t.map.tracks,v={isFmp4:!0,hasVideo:!!y.video,hasAudio:!!y.audio};y.audio&&y.audio.codec&&"enca"!==y.audio.codec&&(v.audioCodec=y.audio.codec),y.video&&y.video.codec&&"encv"!==y.video.codec&&(v.videoCodec=y.video.codec),y.video&&y.audio&&(v.isMuxed=!0),n(t,v);var b=function(e){h(t,{data:g,type:v.hasAudio&&!v.isMuxed?"audio":"video"}),e&&e.length&&c(t,e),p(null,t,{})};a$({action:"probeMp4StartTime",timescales:t.map.timescales,data:g,transmuxer:t.transmuxer,callback:function(e){var n=e.data,o=e.startTime;r=n.buffer,t.bytes=g=n,v.hasAudio&&!v.isMuxed&&i(t,"audio","start",o),v.hasVideo&&i(t,"video","start",o),y.video&&n.byteLength&&t.transmuxer?a$({action:"pushMp4Captions",endAction:"mp4Captions",transmuxer:t.transmuxer,data:g,timescales:t.map.timescales,trackIds:[y.video.id],callback:function(e){r=e.data.buffer,t.bytes=g=e.data,e.logs.forEach(function(e){m(oF.mergeOptions(e,{stream:"mp4CaptionParser"}))}),b(e.captions)}}):b()}})}else if(t.transmuxer){if(void 0===t.container&&(t.container=to(g)),"ts"!==t.container&&"aac"!==t.container)return n(t,{hasAudio:!1,hasVideo:!1}),void p(null,t,{});a2({segment:t,bytes:r,trackInfoFn:n,timingInfoFn:i,videoSegmentTimingInfoFn:o,audioSegmentTimingInfoFn:u,id3Fn:l,captionsFn:c,isEndOfTimeline:f,endedTimelineFn:d,dataFn:h,doneFn:p,onTransmuxerLog:m})}else p(null,t,{})},a4=function(e,t){var r,n=e.id,i=e.key,o=e.encryptedBytes,u=e.decryptionWorker;u.addEventListener("message",function e(r){if(r.data.source===n){u.removeEventListener("message",e);var i=r.data.decrypted;t(new Uint8Array(i.bytes,i.byteOffset,i.byteLength))}}),r=i.bytes.slice?i.bytes.slice():new Uint32Array(Array.prototype.slice.call(i.bytes)),u.postMessage(aO({source:n,encrypted:o,key:r,iv:i.iv}),[o.buffer,r.buffer])},a6=function(e){var t,r,n,i,o,u,l,c=e.xhr,f=e.xhrOptions,d=e.decryptionWorker,h=e.segment,p=e.abortFn,m=e.progressFn,g=e.trackInfoFn,y=e.timingInfoFn,v=e.videoSegmentTimingInfoFn,b=e.audioSegmentTimingInfoFn,_=e.id3Fn,T=e.captionsFn,E=e.isEndOfTimeline,S=e.endedTimelineFn,w=e.dataFn,A=e.doneFn,C=e.onTransmuxerLog,I=[],O=(D=(k={activeXhrs:I,decryptionWorker:d,trackInfoFn:g,timingInfoFn:y,videoSegmentTimingInfoFn:v,audioSegmentTimingInfoFn:b,id3Fn:_,captionsFn:T,isEndOfTimeline:E,endedTimelineFn:S,dataFn:w,doneFn:A,onTransmuxerLog:C}).activeXhrs,N=k.decryptionWorker,L=k.trackInfoFn,x=k.timingInfoFn,j=k.videoSegmentTimingInfoFn,M=k.audioSegmentTimingInfoFn,F=k.id3Fn,B=k.captionsFn,U=k.isEndOfTimeline,q=k.endedTimelineFn,H=k.dataFn,V=k.doneFn,G=k.onTransmuxerLog,Y=0,z=!1,function(e,t){if(!z){if(e)return z=!0,aJ(D),V(e,t);if((Y+=1)===D.length){var r=function(){if(t.encryptedBytes){var e,r,n,i,o,u,l,c,f,d,h,p,m,g;return r=(e={decryptionWorker:N,segment:t,trackInfoFn:L,timingInfoFn:x,videoSegmentTimingInfoFn:j,audioSegmentTimingInfoFn:M,id3Fn:F,captionsFn:B,isEndOfTimeline:U,endedTimelineFn:q,dataFn:H,doneFn:V,onTransmuxerLog:G}).decryptionWorker,n=e.segment,i=e.trackInfoFn,o=e.timingInfoFn,u=e.videoSegmentTimingInfoFn,l=e.audioSegmentTimingInfoFn,c=e.id3Fn,f=e.captionsFn,d=e.isEndOfTimeline,h=e.endedTimelineFn,p=e.dataFn,m=e.doneFn,g=e.onTransmuxerLog,void a4({id:n.requestId,key:n.key,encryptedBytes:n.encryptedBytes,decryptionWorker:r},function(e){n.bytes=e,a3({segment:n,bytes:n.bytes,trackInfoFn:i,timingInfoFn:o,videoSegmentTimingInfoFn:u,audioSegmentTimingInfoFn:l,id3Fn:c,captionsFn:f,isEndOfTimeline:d,endedTimelineFn:h,dataFn:p,doneFn:m,onTransmuxerLog:g})})}a3({segment:t,bytes:t.bytes,trackInfoFn:L,timingInfoFn:x,videoSegmentTimingInfoFn:j,audioSegmentTimingInfoFn:M,id3Fn:F,captionsFn:B,isEndOfTimeline:U,endedTimelineFn:q,dataFn:H,doneFn:V,onTransmuxerLog:G})};if(t.endOfAllRequests=Date.now(),t.map&&t.map.encryptedBytes&&!t.map.bytes)return a4({decryptionWorker:N,id:t.requestId+"-init",encryptedBytes:t.map.encryptedBytes,key:t.map.key},function(e){t.map.bytes=e,a1(t,function(e){if(e)return aJ(D),V(e,t);r()})});r()}}});if(h.key&&!h.key.bytes){var R=[h.key];h.map&&!h.map.bytes&&h.map.key&&h.map.key.resolvedUri===h.key.resolvedUri&&R.push(h.map.key);var P=c(oF.mergeOptions(f,{uri:h.key.resolvedUri,responseType:"arraybuffer"}),a0(h,R,O));I.push(P)}if(h.map&&!h.map.bytes){if(h.map.key&&(!h.key||h.key.resolvedUri!==h.map.key.resolvedUri)){var k,D,N,L,x,j,M,F,B,U,q,H,V,G,Y,z,K,W,X,Q=c(oF.mergeOptions(f,{uri:h.map.key.resolvedUri,responseType:"arraybuffer"}),a0(h,[h.map.key],O));I.push(Q)}var $=oF.mergeOptions(f,{uri:h.map.resolvedUri,responseType:"arraybuffer",headers:aA(h.map)}),J=c($,(W=(K={segment:h,finishProcessingFn:O}).segment,X=K.finishProcessingFn,function(e,t){var r=aZ(e,t);if(r)return X(r,W);var n=new Uint8Array(t.response);if(W.map.key)return W.map.encryptedBytes=n,X(null,W);W.map.bytes=n,a1(W,function(e){if(e)return e.xhr=t,e.status=t.status,X(e,W);X(null,W)})}));I.push(J)}var Z=oF.mergeOptions(f,{uri:h.part&&h.part.resolvedUri||h.resolvedUri,responseType:"arraybuffer",headers:aA(h)}),ee=c(Z,(r=(t={segment:h,finishProcessingFn:O,responseType:Z.responseType}).segment,n=t.finishProcessingFn,i=t.responseType,function(e,t){var o=aZ(e,t);if(o)return n(o,r);var u="arraybuffer"!==i&&t.responseText?function(e){for(var t=new Uint8Array(new ArrayBuffer(e.length)),r=0;r<e.length;r++)t[r]=e.charCodeAt(r);return t.buffer}(t.responseText.substring(r.lastReachedChar||0)):t.response;return r.stats={bandwidth:t.bandwidth,bytesReceived:t.bytesReceived||0,roundTripTime:t.roundTripTime||0},r.key?r.encryptedBytes=new Uint8Array(u):r.bytes=new Uint8Array(u),n(null,r)}));ee.addEventListener("progress",(u=(o={segment:h,progressFn:m,trackInfoFn:g,timingInfoFn:y,videoSegmentTimingInfoFn:v,audioSegmentTimingInfoFn:b,id3Fn:_,captionsFn:T,isEndOfTimeline:E,endedTimelineFn:S,dataFn:w}).segment,l=o.progressFn,o.trackInfoFn,o.timingInfoFn,o.videoSegmentTimingInfoFn,o.audioSegmentTimingInfoFn,o.id3Fn,o.captionsFn,o.isEndOfTimeline,o.endedTimelineFn,o.dataFn,function(e){var t,r;if(!e.target.aborted)return u.stats=oF.mergeOptions(u.stats,(t=e.target,(r={bandwidth:1/0,bytesReceived:0,roundTripTime:Date.now()-t.requestTime||0}).bytesReceived=e.loaded,r.bandwidth=Math.floor(r.bytesReceived/r.roundTripTime*8e3),r)),!u.stats.firstBytesReceivedAt&&u.stats.bytesReceived&&(u.stats.firstBytesReceivedAt=Date.now()),l(e,u)})),I.push(ee);var et={};return I.forEach(function(e){var t,r,n;e.addEventListener("loadend",(r=(t={loadendState:et,abortFn:p}).loadendState,n=t.abortFn,function(e){e.target.aborted&&n&&!r.calledAbortFn&&(n(),r.calledAbortFn=!0)}))}),function(){return aJ(I)}},a8=oH("CodecUtils"),a5=function(e,t){var r=t.attributes||{};return e&&e.mediaGroups&&e.mediaGroups.AUDIO&&r.AUDIO&&e.mediaGroups.AUDIO[r.AUDIO]},a9=function(e){var t={};return e.forEach(function(e){var r=e.mediaType,n=e.type,i=e.details;t[r]=t[r]||[],t[r].push(H(""+n+i))}),Object.keys(t).forEach(function(e){if(t[e].length>1)return a8("multiple "+e+" codecs found as attributes: "+t[e].join(", ")+". Setting playlist codecs to null so that we wait for mux.js to probe segments for real codecs."),void(t[e]=null);t[e]=t[e][0]}),t},a7=function(e){var t=0;return e.audio&&t++,e.video&&t++,t},se=function(e,t){var r=t.attributes||{},n=a9(function(e){var t=e.attributes||{};if(t.CODECS)return V(t.CODECS)}(t)||[]);if(a5(e,t)&&!n.audio&&!function(e,t){if(!a5(e,t))return!0;var r=t.attributes||{},n=e.mediaGroups.AUDIO[r.AUDIO];for(var i in n)if(!n[i].uri&&!n[i].playlists)return!0;return!1}(e,t)){var i=a9(function(e,t){if(!e.mediaGroups.AUDIO||!t)return null;var r=e.mediaGroups.AUDIO[t];if(!r)return null;for(var n in r){var i=r[n];if(i.default&&i.playlists)return V(i.playlists[0].attributes.CODECS)}return null}(e,r.AUDIO)||[]);i.audio&&(n.audio=i.audio)}return n},st=oH("PlaylistSelector"),sr=function(e){if(e&&e.playlist){var t=e.playlist;return JSON.stringify({id:t.id,bandwidth:e.bandwidth,width:e.width,height:e.height,codecs:t.attributes&&t.attributes.CODECS||""})}},sn=function(e,t){if(!e)return"";var r=i().getComputedStyle(e);return r?r[t]:""},si=function(e,t){var r=e.slice();e.sort(function(e,n){var i=t(e,n);return 0===i?r.indexOf(e)-r.indexOf(n):i})},so=function(e,t){var r,n;return e.attributes.BANDWIDTH&&(r=e.attributes.BANDWIDTH),r=r||i().Number.MAX_VALUE,t.attributes.BANDWIDTH&&(n=t.attributes.BANDWIDTH),r-(n||i().Number.MAX_VALUE)},sa=function(e,t,r,n,o,u){if(e){var l={bandwidth:t,width:r,height:n,limitRenditionByPlayerDimensions:o},c=e.playlists;ao.isAudioOnly(e)&&(c=u.getAudioTrackPlaylists_(),l.audioOnly=!0);var f=c.map(function(e){var t=e.attributes&&e.attributes.RESOLUTION&&e.attributes.RESOLUTION.width,r=e.attributes&&e.attributes.RESOLUTION&&e.attributes.RESOLUTION.height;return{bandwidth:e.attributes&&e.attributes.BANDWIDTH||i().Number.MAX_VALUE,width:t,height:r,playlist:e}});si(f,function(e,t){return e.bandwidth-t.bandwidth});var d=(f=f.filter(function(e){return!ao.isIncompatible(e.playlist)})).filter(function(e){return ao.isEnabled(e.playlist)});d.length||(d=f.filter(function(e){return!ao.isDisabled(e.playlist)}));var h=d.filter(function(e){return e.bandwidth*aq.BANDWIDTH_VARIANCE<t}),p=h[h.length-1],m=h.filter(function(e){return e.bandwidth===p.bandwidth})[0];if(!1===o){var g=m||d[0]||f[0];if(g&&g.playlist){var y="sortedPlaylistReps";return m&&(y="bandwidthBestRep"),d[0]&&(y="enabledPlaylistReps"),st("choosing "+sr(g)+" using "+y+" with options",l),g.playlist}return st("could not choose a playlist with options",l),null}var v=h.filter(function(e){return e.width&&e.height});si(v,function(e,t){return e.width-t.width});var b=v.filter(function(e){return e.width===r&&e.height===n});p=b[b.length-1];var _,T,E,S,w=b.filter(function(e){return e.bandwidth===p.bandwidth})[0];if(w||(p=(T=(_=v.filter(function(e){return e.width>r||e.height>n})).filter(function(e){return e.width===_[0].width&&e.height===_[0].height}))[T.length-1],E=T.filter(function(e){return e.bandwidth===p.bandwidth})[0]),u.experimentalLeastPixelDiffSelector){var A=v.map(function(e){return e.pixelDiff=Math.abs(e.width-r)+Math.abs(e.height-n),e});si(A,function(e,t){return e.pixelDiff===t.pixelDiff?t.bandwidth-e.bandwidth:e.pixelDiff-t.pixelDiff}),S=A[0]}var C=S||E||w||m||d[0]||f[0];if(C&&C.playlist){var I="sortedPlaylistReps";return S?I="leastPixelDiffRep":E?I="resolutionPlusOneRep":w?I="resolutionBestRep":m?I="bandwidthBestRep":d[0]&&(I="enabledPlaylistReps"),st("choosing "+sr(C)+" using "+I+" with options",l),C.playlist}return st("could not choose a playlist with options",l),null}},ss=function(){var e=this.useDevicePixelRatio&&i().devicePixelRatio||1;return sa(this.playlists.master,this.systemBandwidth,parseInt(sn(this.tech_.el(),"width"),10)*e,parseInt(sn(this.tech_.el(),"height"),10)*e,this.limitRenditionByPlayerDimensions,this.masterPlaylistController_)},su=function(e,t,r){var n,i;if(r&&r.cues)for(n=r.cues.length;n--;)(i=r.cues[n]).startTime>=e&&i.endTime<=t&&r.removeCue(i)},sl=function(e){return"number"==typeof e&&isFinite(e)},sc=1/60,sf=function(e){var t=e.startOfSegment,r=e.duration,n=e.segment,i=e.part,o=e.playlist,u=o.mediaSequence,l=o.id,c=o.segments,f=e.mediaIndex,d=e.partIndex,h=e.timeline,p=(void 0===c?[]:c).length-1,m="mediaIndex/partIndex increment";e.getMediaInfoForTime?m="getMediaInfoForTime ("+e.getMediaInfoForTime+")":e.isSyncRequest&&(m="getSyncSegmentCandidate (isSyncRequest)"),e.independent&&(m+=" with independent "+e.independent);var g="number"==typeof d,y=e.segment.uri?"segment":"pre-segment",v=g?o1({preloadSegment:n})-1:0;return y+" ["+(u+f)+"/"+(u+p)+"]"+(g?" part ["+d+"/"+v+"]":"")+" segment start/end ["+n.start+" => "+n.end+"]"+(g?" part start/end ["+i.start+" => "+i.end+"]":"")+" startOfSegment ["+t+"] duration ["+r+"] timeline ["+h+"] selected by ["+m+"] playlist ["+l+"]"},sd=function(e){return e+"TimingInfo"},sh=function(e){var t=e.timelineChangeController,r=e.currentTimeline,n=e.segmentTimeline,i=e.loaderType,o=e.audioDisabled;if(r===n)return!1;if("audio"===i){var u=t.lastTimelineChange({type:"main"});return!u||u.to!==n}if("main"===i&&o){var l=t.pendingTimelineChange({type:"audio"});return!l||l.to!==n}return!1},sp=function(e){var t=e.segmentDuration,r=e.maxDuration;return!!t&&Math.round(t)>r+oV},sm=function(e){function t(t,r){var n;if(n=e.call(this)||this,!t)throw TypeError("Initialization settings are required");if("function"!=typeof t.currentTime)throw TypeError("No currentTime getter specified");if(!t.mediaSource)throw TypeError("No MediaSource specified");return n.bandwidth=t.bandwidth,n.throughput={rate:0,count:0},n.roundTrip=NaN,n.resetStats_(),n.mediaIndex=null,n.partIndex=null,n.hasPlayed_=t.hasPlayed,n.currentTime_=t.currentTime,n.seekable_=t.seekable,n.seeking_=t.seeking,n.duration_=t.duration,n.mediaSource_=t.mediaSource,n.vhs_=t.vhs,n.loaderType_=t.loaderType,n.currentMediaInfo_=void 0,n.startingMediaInfo_=void 0,n.segmentMetadataTrack_=t.segmentMetadataTrack,n.goalBufferLength_=t.goalBufferLength,n.sourceType_=t.sourceType,n.sourceUpdater_=t.sourceUpdater,n.inbandTextTracks_=t.inbandTextTracks,n.state_="INIT",n.timelineChangeController_=t.timelineChangeController,n.shouldSaveSegmentTimingInfo_=!0,n.parse708captions_=t.parse708captions,n.useDtsForTimestampOffset_=t.useDtsForTimestampOffset,n.captionServices_=t.captionServices,n.experimentalExactManifestTimings=t.experimentalExactManifestTimings,n.checkBufferTimeout_=null,n.error_=void 0,n.currentTimeline_=-1,n.pendingSegment_=null,n.xhrOptions_=null,n.pendingSegments_=[],n.audioDisabled_=!1,n.isPendingTimestampOffset_=!1,n.gopBuffer_=[],n.timeMapping_=0,n.safeAppend_=oF.browser.IE_VERSION>=11,n.appendInitSegment_={audio:!0,video:!0},n.playlistOfLastInitSegment_={audio:null,video:null},n.callQueue_=[],n.loadQueue_=[],n.metadataQueue_={id3:[],caption:[]},n.waitingOnRemove_=!1,n.quotaExceededErrorRetryTimeout_=null,n.activeInitSegmentId_=null,n.initSegments_={},n.cacheEncryptionKeys_=t.cacheEncryptionKeys,n.keyCache_={},n.decrypter_=t.decrypter,n.syncController_=t.syncController,n.syncPoint_={segmentIndex:0,time:0},n.transmuxer_=n.createTransmuxer_(),n.triggerSyncInfoUpdate_=function(){return n.trigger("syncinfoupdate")},n.syncController_.on("syncinfoupdate",n.triggerSyncInfoUpdate_),n.mediaSource_.addEventListener("sourceopen",function(){n.isEndOfStream_()||(n.ended_=!1)}),n.fetchAtBuffer_=!1,n.logger_=oH("SegmentLoader["+n.loaderType_+"]"),Object.defineProperty(h(n),"state",{get:function(){return this.state_},set:function(e){e!==this.state_&&(this.logger_(this.state_+" -> "+e),this.state_=e,this.trigger("statechange"))}}),n.sourceUpdater_.on("ready",function(){n.hasEnoughInfoToAppend_()&&n.processCallQueue_()}),"main"===n.loaderType_&&n.timelineChangeController_.on("pendingtimelinechange",function(){n.hasEnoughInfoToAppend_()&&n.processCallQueue_()}),"audio"===n.loaderType_&&n.timelineChangeController_.on("timelinechange",function(){n.hasEnoughInfoToLoad_()&&n.processLoadQueue_(),n.hasEnoughInfoToAppend_()&&n.processCallQueue_()}),n}m(t,e);var r=t.prototype;return r.createTransmuxer_=function(){var e,t,r;return e={remux:!1,alignGopsAtEnd:this.safeAppend_,keepOriginalTimestamps:!0,parse708captions:this.parse708captions_,captionServices:this.captionServices_},(t=new az).currentTransmux=null,t.transmuxQueue=[],r=t.terminate,t.terminate=function(){return t.currentTransmux=null,t.transmuxQueue.length=0,r.call(t)},t.postMessage({action:"init",options:e}),t},r.resetStats_=function(){this.mediaBytesTransferred=0,this.mediaRequests=0,this.mediaRequestsAborted=0,this.mediaRequestsTimedout=0,this.mediaRequestsErrored=0,this.mediaTransferDuration=0,this.mediaSecondsLoaded=0,this.mediaAppends=0},r.dispose=function(){this.trigger("dispose"),this.state="DISPOSED",this.pause(),this.abort_(),this.transmuxer_&&this.transmuxer_.terminate(),this.resetStats_(),this.checkBufferTimeout_&&i().clearTimeout(this.checkBufferTimeout_),this.syncController_&&this.triggerSyncInfoUpdate_&&this.syncController_.off("syncinfoupdate",this.triggerSyncInfoUpdate_),this.off()},r.setAudio=function(e){this.audioDisabled_=!e,e?this.appendInitSegment_.audio=!0:this.sourceUpdater_.removeAudio(0,this.duration_())},r.abort=function(){"WAITING"===this.state?(this.abort_(),this.state="READY",this.paused()||this.monitorBuffer_()):this.pendingSegment_&&(this.pendingSegment_=null)},r.abort_=function(){this.pendingSegment_&&this.pendingSegment_.abortRequests&&this.pendingSegment_.abortRequests(),this.pendingSegment_=null,this.callQueue_=[],this.loadQueue_=[],this.metadataQueue_.id3=[],this.metadataQueue_.caption=[],this.timelineChangeController_.clearPendingTimelineChange(this.loaderType_),this.waitingOnRemove_=!1,i().clearTimeout(this.quotaExceededErrorRetryTimeout_),this.quotaExceededErrorRetryTimeout_=null},r.checkForAbort_=function(e){return"APPENDING"!==this.state||this.pendingSegment_?!this.pendingSegment_||this.pendingSegment_.requestId!==e:(this.state="READY",!0)},r.error=function(e){return void 0!==e&&(this.logger_("error occurred:",e),this.error_=e),this.pendingSegment_=null,this.error_},r.endOfStream=function(){this.ended_=!0,this.transmuxer_&&aQ(this.transmuxer_),this.gopBuffer_.length=0,this.pause(),this.trigger("ended")},r.buffered_=function(){var e=this.getMediaInfo_();if(!this.sourceUpdater_||!e)return oF.createTimeRanges();if("main"===this.loaderType_){var t=e.hasAudio,r=e.hasVideo,n=e.isMuxed;if(r&&t&&!this.audioDisabled_&&!n)return this.sourceUpdater_.buffered();if(r)return this.sourceUpdater_.videoBuffered()}return this.sourceUpdater_.audioBuffered()},r.initSegmentForMap=function(e,t){if(void 0===t&&(t=!1),!e)return null;var r=aR(e),n=this.initSegments_[r];return t&&!n&&e.bytes&&(this.initSegments_[r]=n={resolvedUri:e.resolvedUri,byterange:e.byterange,bytes:e.bytes,tracks:e.tracks,timescales:e.timescales}),n||e},r.segmentKey=function(e,t){if(void 0===t&&(t=!1),!e)return null;var r=aP(e),n=this.keyCache_[r];this.cacheEncryptionKeys_&&t&&!n&&e.bytes&&(this.keyCache_[r]=n={resolvedUri:e.resolvedUri,bytes:e.bytes});var i={resolvedUri:(n||e).resolvedUri};return n&&(i.bytes=n.bytes),i},r.couldBeginLoading_=function(){return this.playlist_&&!this.paused()},r.load=function(){if(this.monitorBuffer_(),this.playlist_)return"INIT"===this.state&&this.couldBeginLoading_()?this.init_():void(this.couldBeginLoading_()&&("READY"===this.state||"INIT"===this.state)&&(this.state="READY"))},r.init_=function(){return this.state="READY",this.resetEverything(),this.monitorBuffer_()},r.playlist=function(e,t){if(void 0===t&&(t={}),e){var r=this.playlist_,n=this.pendingSegment_;this.playlist_=e,this.xhrOptions_=t,"INIT"===this.state&&(e.syncInfo={mediaSequence:e.mediaSequence,time:0},"main"===this.loaderType_&&this.syncController_.setDateTimeMappingForStart(e));var i=null;if(r&&(r.id?i=r.id:r.uri&&(i=r.uri)),this.logger_("playlist update ["+i+" => "+(e.id||e.uri)+"]"),this.trigger("syncinfoupdate"),"INIT"===this.state&&this.couldBeginLoading_())return this.init_();if(!r||r.uri!==e.uri)return null!==this.mediaIndex&&(e.endList?this.resyncLoader():this.resetLoader()),this.currentMediaInfo_=void 0,void this.trigger("playlistupdate");var o=e.mediaSequence-r.mediaSequence;if(this.logger_("live window shift ["+o+"]"),null!==this.mediaIndex){if(this.mediaIndex-=o,this.mediaIndex<0)this.mediaIndex=null,this.partIndex=null;else{var u=this.playlist_.segments[this.mediaIndex];if(this.partIndex&&(!u.parts||!u.parts.length||!u.parts[this.partIndex])){var l=this.mediaIndex;this.logger_("currently processing part (index "+this.partIndex+") no longer exists."),this.resetLoader(),this.mediaIndex=l}}}n&&(n.mediaIndex-=o,n.mediaIndex<0?(n.mediaIndex=null,n.partIndex=null):(n.mediaIndex>=0&&(n.segment=e.segments[n.mediaIndex]),n.partIndex>=0&&n.segment.parts&&(n.part=n.segment.parts[n.partIndex]))),this.syncController_.saveExpiredSegmentInfo(r,e)}},r.pause=function(){this.checkBufferTimeout_&&(i().clearTimeout(this.checkBufferTimeout_),this.checkBufferTimeout_=null)},r.paused=function(){return null===this.checkBufferTimeout_},r.resetEverything=function(e){this.ended_=!1,this.activeInitSegmentId_=null,this.appendInitSegment_={audio:!0,video:!0},this.resetLoader(),this.remove(0,1/0,e),this.transmuxer_&&(this.transmuxer_.postMessage({action:"clearAllMp4Captions"}),this.transmuxer_.postMessage({action:"reset"}))},r.resetLoader=function(){this.fetchAtBuffer_=!1,this.resyncLoader()},r.resyncLoader=function(){this.transmuxer_&&aQ(this.transmuxer_),this.mediaIndex=null,this.partIndex=null,this.syncPoint_=null,this.isPendingTimestampOffset_=!1,this.callQueue_=[],this.loadQueue_=[],this.metadataQueue_.id3=[],this.metadataQueue_.caption=[],this.abort(),this.transmuxer_&&this.transmuxer_.postMessage({action:"clearParsedMp4Captions"})},r.remove=function(e,t,r,n){if(void 0===r&&(r=function(){}),void 0===n&&(n=!1),t===1/0&&(t=this.duration_()),t<=e)this.logger_("skipping remove because end ${end} is <= start ${start}");else if(this.sourceUpdater_&&this.getMediaInfo_()){var i=1,o=function(){0==--i&&r()};for(var u in!n&&this.audioDisabled_||(i++,this.sourceUpdater_.removeAudio(e,t,o)),(n||"main"===this.loaderType_)&&(this.gopBuffer_=function(e,t,r,n){for(var i=Math.ceil((t-n)*ta.ONE_SECOND_IN_TS),o=Math.ceil((r-n)*ta.ONE_SECOND_IN_TS),u=e.slice(),l=e.length;l--&&!(e[l].pts<=o););if(-1===l)return u;for(var c=l+1;c--&&!(e[c].pts<=i););return c=Math.max(c,0),u.splice(c,l-c+1),u}(this.gopBuffer_,e,t,this.timeMapping_),i++,this.sourceUpdater_.removeVideo(e,t,o)),this.inbandTextTracks_)su(e,t,this.inbandTextTracks_[u]);su(e,t,this.segmentMetadataTrack_),o()}else this.logger_("skipping remove because no source updater or starting media info")},r.monitorBuffer_=function(){this.checkBufferTimeout_&&i().clearTimeout(this.checkBufferTimeout_),this.checkBufferTimeout_=i().setTimeout(this.monitorBufferTick_.bind(this),1)},r.monitorBufferTick_=function(){"READY"===this.state&&this.fillBuffer_(),this.checkBufferTimeout_&&i().clearTimeout(this.checkBufferTimeout_),this.checkBufferTimeout_=i().setTimeout(this.monitorBufferTick_.bind(this),500)},r.fillBuffer_=function(){if(!this.sourceUpdater_.updating()){var e=this.chooseNextRequest_();e&&("number"==typeof e.timestampOffset&&(this.isPendingTimestampOffset_=!1,this.timelineChangeController_.pendingTimelineChange({type:this.loaderType_,from:this.currentTimeline_,to:e.timeline})),this.loadSegment_(e))}},r.isEndOfStream_=function(e,t,r){if(void 0===e&&(e=this.mediaIndex),void 0===t&&(t=this.playlist_),void 0===r&&(r=this.partIndex),!t||!this.mediaSource_)return!1;var n="number"==typeof e&&t.segments[e],i=e+1===t.segments.length,o=!n||!n.parts||r+1===n.parts.length;return t.endList&&"open"===this.mediaSource_.readyState&&i&&o},r.chooseNextRequest_=function(){var e=this.buffered_(),t=oX(e)||0,r=oQ(e,this.currentTime_()),n=!this.hasPlayed_()&&r>=1,i=r>=this.goalBufferLength_(),o=this.playlist_.segments;if(!o.length||n||i)return null;this.syncPoint_=this.syncPoint_||this.syncController_.getSyncPoint(this.playlist_,this.duration_(),this.currentTimeline_,this.currentTime_());var u={partIndex:null,mediaIndex:null,startOfSegment:null,playlist:this.playlist_,isSyncRequest:!this.syncPoint_};if(u.isSyncRequest)u.mediaIndex=function(e,t,r){t=t||[];for(var n=[],i=0,o=0;o<t.length;o++){var u=t[o];if(e===u.timeline&&(n.push(o),(i+=u.duration)>r))return o}return 0===n.length?0:n[n.length-1]}(this.currentTimeline_,o,t);else if(null!==this.mediaIndex){var l=o[this.mediaIndex],c="number"==typeof this.partIndex?this.partIndex:-1;u.startOfSegment=l.end?l.end:t,l.parts&&l.parts[c+1]?(u.mediaIndex=this.mediaIndex,u.partIndex=c+1):u.mediaIndex=this.mediaIndex+1}else{var f=ao.getMediaInfoForTime({experimentalExactManifestTimings:this.experimentalExactManifestTimings,playlist:this.playlist_,currentTime:this.fetchAtBuffer_?t:this.currentTime_(),startingPartIndex:this.syncPoint_.partIndex,startingSegmentIndex:this.syncPoint_.segmentIndex,startTime:this.syncPoint_.time}),d=f.segmentIndex,h=f.startTime,p=f.partIndex;u.getMediaInfoForTime=this.fetchAtBuffer_?"bufferedEnd "+t:"currentTime "+this.currentTime_(),u.mediaIndex=d,u.startOfSegment=h,u.partIndex=p}var m=o[u.mediaIndex],g=m&&"number"==typeof u.partIndex&&m.parts&&m.parts[u.partIndex];if(!m||"number"==typeof u.partIndex&&!g)return null;if("number"!=typeof u.partIndex&&m.parts&&(u.partIndex=0,g=m.parts[0]),!r&&g&&!g.independent){if(0===u.partIndex){var y=o[u.mediaIndex-1],v=y.parts&&y.parts.length&&y.parts[y.parts.length-1];v&&v.independent&&(u.mediaIndex-=1,u.partIndex=y.parts.length-1,u.independent="previous segment")}else m.parts[u.partIndex-1].independent&&(u.partIndex-=1,u.independent="previous part")}var b=this.mediaSource_&&"ended"===this.mediaSource_.readyState;return u.mediaIndex>=o.length-1&&b&&!this.seeking_()?null:this.generateSegmentInfo_(u)},r.generateSegmentInfo_=function(e){var t=e.independent,r=e.playlist,n=e.mediaIndex,i=e.startOfSegment,o=e.isSyncRequest,u=e.partIndex,l=e.forceTimestampOffset,c=e.getMediaInfoForTime,f=r.segments[n],d="number"==typeof u&&f.parts[u],h={requestId:"segment-loader-"+Math.random(),uri:d&&d.resolvedUri||f.resolvedUri,mediaIndex:n,partIndex:d?u:null,isSyncRequest:o,startOfSegment:i,playlist:r,bytes:null,encryptedBytes:null,timestampOffset:null,timeline:f.timeline,duration:d&&d.duration||f.duration,segment:f,part:d,byteLength:0,transmuxer:this.transmuxer_,getMediaInfoForTime:c,independent:t},p=void 0!==l?l:this.isPendingTimestampOffset_;h.timestampOffset=this.timestampOffsetForSegment_({segmentTimeline:f.timeline,currentTimeline:this.currentTimeline_,startOfSegment:i,buffered:this.buffered_(),overrideCheck:p});var m=oX(this.sourceUpdater_.audioBuffered());return"number"==typeof m&&(h.audioAppendStart=m-this.sourceUpdater_.audioTimestampOffset()),this.sourceUpdater_.videoBuffered().length&&(h.gopsToAlignWith=function(e,t,r){if(null==t||!e.length)return[];var n,i=Math.ceil((t-r+3)*ta.ONE_SECOND_IN_TS);for(n=0;n<e.length&&!(e[n].pts>i);n++);return e.slice(n)}(this.gopBuffer_,this.currentTime_()-this.sourceUpdater_.videoTimestampOffset(),this.timeMapping_)),h},r.timestampOffsetForSegment_=function(e){var t,r,n,i;return t=e.segmentTimeline,r=e.currentTimeline,n=e.startOfSegment,i=e.buffered,e.overrideCheck||t!==r?t<r?n:i.length?i.end(i.length-1):n:null},r.earlyAbortWhenNeeded_=function(e){if(!this.vhs_.tech_.paused()&&this.xhrOptions_.timeout&&this.playlist_.attributes.BANDWIDTH&&!(Date.now()-(e.firstBytesReceivedAt||Date.now())<1e3)){var t=this.currentTime_(),r=e.bandwidth,n=this.pendingSegment_.duration,i=ao.estimateSegmentRequestTime(n,r,this.playlist_,e.bytesReceived),o=(u=this.buffered_(),void 0===(l=this.vhs_.tech_.playbackRate())&&(l=1),((u.length?u.end(u.length-1):0)-t)/l-1);if(!(i<=o)){var u,l,c,f,d,h,p,m,g,y,v,b,_,T,E=(f=(c={master:this.vhs_.playlists.master,currentTime:t,bandwidth:r,duration:this.duration_(),segmentDuration:n,timeUntilRebuffer:o,currentTimeline:this.currentTimeline_,syncController:this.syncController_}).currentTime,d=c.bandwidth,h=c.duration,p=c.segmentDuration,m=c.timeUntilRebuffer,g=c.currentTimeline,y=c.syncController,(b=(v=c.master.playlists.filter(function(e){return!ao.isIncompatible(e)})).filter(ao.isEnabled)).length||(b=v.filter(function(e){return!ao.isDisabled(e)})),si(T=(_=b.filter(ao.hasAttribute.bind(null,"BANDWIDTH")).map(function(e){var t=y.getSyncPoint(e,h,g,f)?1:2;return{playlist:e,rebufferingImpact:ao.estimateSegmentRequestTime(p,d,e)*t-m}})).filter(function(e){return e.rebufferingImpact<=0}),function(e,t){return so(t.playlist,e.playlist)}),T.length?T[0]:(si(_,function(e,t){return e.rebufferingImpact-t.rebufferingImpact}),_[0]||null));if(E){var S=i-o-E.rebufferingImpact,w=.5;o<=oV&&(w=1),!E.playlist||E.playlist.uri===this.playlist_.uri||S<w||(this.bandwidth=E.playlist.attributes.BANDWIDTH*aq.BANDWIDTH_VARIANCE+1,this.trigger("earlyabort"))}}}},r.handleAbort_=function(e){this.logger_("Aborting "+sf(e)),this.mediaRequestsAborted+=1},r.handleProgress_=function(e,t){this.earlyAbortWhenNeeded_(t.stats),this.checkForAbort_(t.requestId)||this.trigger("progress")},r.handleTrackInfo_=function(e,t){this.earlyAbortWhenNeeded_(e.stats),this.checkForAbort_(e.requestId)||this.checkForIllegalMediaSwitch(t)||(t=t||{},function(e,t){if(!e&&!t||!e&&t||e&&!t)return!1;if(e===t)return!0;var r=Object.keys(e).sort(),n=Object.keys(t).sort();if(r.length!==n.length)return!1;for(var i=0;i<r.length;i++){var o=r[i];if(o!==n[i]||e[o]!==t[o])return!1}return!0}(this.currentMediaInfo_,t)||(this.appendInitSegment_={audio:!0,video:!0},this.startingMediaInfo_=t,this.currentMediaInfo_=t,this.logger_("trackinfo update",t),this.trigger("trackinfo")),this.checkForAbort_(e.requestId)||(this.pendingSegment_.trackInfo=t,this.hasEnoughInfoToAppend_()&&this.processCallQueue_()))},r.handleTimingInfo_=function(e,t,r,n){if(this.earlyAbortWhenNeeded_(e.stats),!this.checkForAbort_(e.requestId)){var i=this.pendingSegment_,o=sd(t);i[o]=i[o]||{},i[o][r]=n,this.logger_("timinginfo: "+t+" - "+r+" - "+n),this.hasEnoughInfoToAppend_()&&this.processCallQueue_()}},r.handleCaptions_=function(e,t){var r=this;if(this.earlyAbortWhenNeeded_(e.stats),!this.checkForAbort_(e.requestId)){if(0!==t.length){if(this.pendingSegment_.hasAppendedData_){var n=null===this.sourceUpdater_.videoTimestampOffset()?this.sourceUpdater_.audioTimestampOffset():this.sourceUpdater_.videoTimestampOffset(),o={};t.forEach(function(e){o[e.stream]=o[e.stream]||{startTime:1/0,captions:[],endTime:0};var t=o[e.stream];t.startTime=Math.min(t.startTime,e.startTime+n),t.endTime=Math.max(t.endTime,e.endTime+n),t.captions.push(e)}),Object.keys(o).forEach(function(e){var t=o[e],u=t.startTime,l=t.endTime,c=t.captions,f=r.inbandTextTracks_;r.logger_("adding cues from "+u+" -> "+l+" for "+e),function(e,t,r){if(!e[r]){t.trigger({type:"usage",name:"vhs-608"}),t.trigger({type:"usage",name:"hls-608"});var n=r;/^cc708_/.test(r)&&(n="SERVICE"+r.split("_")[1]);var i=t.textTracks().getTrackById(n);if(i)e[r]=i;else{var o=r,u=r,l=!1,c=(t.options_.vhs&&t.options_.vhs.captionServices||{})[n];c&&(o=c.label,u=c.language,l=c.default),e[r]=t.addRemoteTextTrack({kind:"captions",id:n,default:l,label:o,language:u},!1).track}}}(f,r.vhs_.tech_,e),su(u,l,f[e]),function(e){var t=e.inbandTextTracks,r=e.captionArray,n=e.timestampOffset;if(r){var o=i().WebKitDataCue||i().VTTCue;r.forEach(function(e){t[e.stream].addCue(new o(e.startTime+n,e.endTime+n,e.text))})}}({captionArray:c,inbandTextTracks:f,timestampOffset:n})}),this.transmuxer_&&this.transmuxer_.postMessage({action:"clearParsedMp4Captions"})}else this.metadataQueue_.caption.push(this.handleCaptions_.bind(this,e,t))}else this.logger_("SegmentLoader received no captions from a caption event")}},r.handleId3_=function(e,t,r){if(this.earlyAbortWhenNeeded_(e.stats),!this.checkForAbort_(e.requestId)){if(this.pendingSegment_.hasAppendedData_){var n,o,u=null===this.sourceUpdater_.videoTimestampOffset()?this.sourceUpdater_.audioTimestampOffset():this.sourceUpdater_.videoTimestampOffset();n=this.inbandTextTracks_,o=this.vhs_.tech_,n.metadataTrack_||(n.metadataTrack_=o.addRemoteTextTrack({kind:"metadata",label:"Timed Metadata"},!1).track,n.metadataTrack_.inBandMetadataTrackDispatchType=r),function(e){var t=e.inbandTextTracks,r=e.metadataArray,n=e.timestampOffset,o=e.videoDuration;if(r){var u=i().WebKitDataCue||i().VTTCue,l=t.metadataTrack_;if(l&&(r.forEach(function(e){var t=e.cueTime+n;!("number"!=typeof t||i().isNaN(t)||t<0)&&t<1/0&&e.frames.forEach(function(e){var r=new u(t,t,e.value||e.url||e.data||"");r.frame=e,r.value=e,Object.defineProperties(r.frame,{id:{get:function(){return oF.log.warn("cue.frame.id is deprecated. Use cue.value.key instead."),r.value.key}},value:{get:function(){return oF.log.warn("cue.frame.value is deprecated. Use cue.value.data instead."),r.value.data}},privateData:{get:function(){return oF.log.warn("cue.frame.privateData is deprecated. Use cue.value.data instead."),r.value.data}}}),l.addCue(r)})}),l.cues&&l.cues.length)){for(var c=l.cues,f=[],d=0;d<c.length;d++)c[d]&&f.push(c[d]);var h=f.reduce(function(e,t){var r=e[t.startTime]||[];return r.push(t),e[t.startTime]=r,e},{}),p=Object.keys(h).sort(function(e,t){return Number(e)-Number(t)});p.forEach(function(e,t){var r=h[e],n=Number(p[t+1])||o;r.forEach(function(e){e.endTime=n})})}}}({inbandTextTracks:this.inbandTextTracks_,metadataArray:t,timestampOffset:u,videoDuration:this.duration_()})}else this.metadataQueue_.id3.push(this.handleId3_.bind(this,e,t,r))}},r.processMetadataQueue_=function(){this.metadataQueue_.id3.forEach(function(e){return e()}),this.metadataQueue_.caption.forEach(function(e){return e()}),this.metadataQueue_.id3=[],this.metadataQueue_.caption=[]},r.processCallQueue_=function(){var e=this.callQueue_;this.callQueue_=[],e.forEach(function(e){return e()})},r.processLoadQueue_=function(){var e=this.loadQueue_;this.loadQueue_=[],e.forEach(function(e){return e()})},r.hasEnoughInfoToLoad_=function(){if("audio"!==this.loaderType_)return!0;var e=this.pendingSegment_;return!(!e||this.getCurrentMediaInfo_()&&sh({timelineChangeController:this.timelineChangeController_,currentTimeline:this.currentTimeline_,segmentTimeline:e.timeline,loaderType:this.loaderType_,audioDisabled:this.audioDisabled_}))},r.getCurrentMediaInfo_=function(e){return void 0===e&&(e=this.pendingSegment_),e&&e.trackInfo||this.currentMediaInfo_},r.getMediaInfo_=function(e){return void 0===e&&(e=this.pendingSegment_),this.getCurrentMediaInfo_(e)||this.startingMediaInfo_},r.getPendingSegmentPlaylist=function(){return this.pendingSegment_?this.pendingSegment_.playlist:null},r.hasEnoughInfoToAppend_=function(){if(!this.sourceUpdater_.ready()||this.waitingOnRemove_||this.quotaExceededErrorRetryTimeout_)return!1;var e=this.pendingSegment_,t=this.getCurrentMediaInfo_();if(!e||!t)return!1;var r=t.hasAudio,n=t.hasVideo,i=t.isMuxed;return!(n&&!e.videoTimingInfo||r&&!this.audioDisabled_&&!i&&!e.audioTimingInfo||sh({timelineChangeController:this.timelineChangeController_,currentTimeline:this.currentTimeline_,segmentTimeline:e.timeline,loaderType:this.loaderType_,audioDisabled:this.audioDisabled_}))},r.handleData_=function(e,t){if(this.earlyAbortWhenNeeded_(e.stats),!this.checkForAbort_(e.requestId)){if(!this.callQueue_.length&&this.hasEnoughInfoToAppend_()){var r=this.pendingSegment_;if(this.setTimeMapping_(r.timeline),this.updateMediaSecondsLoaded_(r.part||r.segment),"closed"!==this.mediaSource_.readyState){if(e.map&&(e.map=this.initSegmentForMap(e.map,!0),r.segment.map=e.map),e.key&&this.segmentKey(e.key,!0),r.isFmp4=e.isFmp4,r.timingInfo=r.timingInfo||{},r.isFmp4)this.trigger("fmp4"),r.timingInfo.start=r[sd(t.type)].start;else{var n,i=this.getCurrentMediaInfo_(),o="main"===this.loaderType_&&i&&i.hasVideo;o&&(n=r.videoTimingInfo.start),r.timingInfo.start=this.trueSegmentStart_({currentStart:r.timingInfo.start,playlist:r.playlist,mediaIndex:r.mediaIndex,currentVideoTimestampOffset:this.sourceUpdater_.videoTimestampOffset(),useVideoTimingInfo:o,firstVideoFrameTimeForData:n,videoTimingInfo:r.videoTimingInfo,audioTimingInfo:r.audioTimingInfo})}if(this.updateAppendInitSegmentStatus(r,t.type),this.updateSourceBufferTimestampOffset_(r),r.isSyncRequest){this.updateTimingInfoEnd_(r),this.syncController_.saveSegmentTimingInfo({segmentInfo:r,shouldSaveTimelineMapping:"main"===this.loaderType_});var u=this.chooseNextRequest_();if(u.mediaIndex!==r.mediaIndex||u.partIndex!==r.partIndex)return void this.logger_("sync segment was incorrect, not appending");this.logger_("sync segment was correct, appending")}r.hasAppendedData_=!0,this.processMetadataQueue_(),this.appendData_(r,t)}}else this.callQueue_.push(this.handleData_.bind(this,e,t))}},r.updateAppendInitSegmentStatus=function(e,t){"main"!==this.loaderType_||"number"!=typeof e.timestampOffset||e.changedTimestampOffset||(this.appendInitSegment_={audio:!0,video:!0}),this.playlistOfLastInitSegment_[t]!==e.playlist&&(this.appendInitSegment_[t]=!0)},r.getInitSegmentAndUpdateState_=function(e){var t=e.type,r=e.initSegment,n=e.map,i=e.playlist;if(n){var o=aR(n);if(this.activeInitSegmentId_===o)return null;r=this.initSegmentForMap(n,!0).bytes,this.activeInitSegmentId_=o}return r&&this.appendInitSegment_[t]?(this.playlistOfLastInitSegment_[t]=i,this.appendInitSegment_[t]=!1,this.activeInitSegmentId_=null,r):null},r.handleQuotaExceededError_=function(e,t){var r=this,n=e.segmentInfo,o=e.type,u=e.bytes,l=this.sourceUpdater_.audioBuffered(),c=this.sourceUpdater_.videoBuffered();l.length>1&&this.logger_("On QUOTA_EXCEEDED_ERR, found gaps in the audio buffer: "+oW(l).join(", ")),c.length>1&&this.logger_("On QUOTA_EXCEEDED_ERR, found gaps in the video buffer: "+oW(c).join(", "));var f=l.length?l.start(0):0,d=l.length?l.end(l.length-1):0,h=c.length?c.start(0):0,p=c.length?c.end(c.length-1):0;if(d-f<=1&&p-h<=1)return this.logger_("On QUOTA_EXCEEDED_ERR, single segment too large to append to buffer, triggering an error. Appended byte length: "+u.byteLength+", audio buffer: "+oW(l).join(", ")+", video buffer: "+oW(c).join(", ")+", "),this.error({message:"Quota exceeded error with append of a single segment of content",excludeUntil:1/0}),void this.trigger("error");this.waitingOnRemove_=!0,this.callQueue_.push(this.appendToSourceBuffer_.bind(this,{segmentInfo:n,type:o,bytes:u}));var m=this.currentTime_()-1;this.logger_("On QUOTA_EXCEEDED_ERR, removing audio/video from 0 to "+m),this.remove(0,m,function(){r.logger_("On QUOTA_EXCEEDED_ERR, retrying append in 1s"),r.waitingOnRemove_=!1,r.quotaExceededErrorRetryTimeout_=i().setTimeout(function(){r.logger_("On QUOTA_EXCEEDED_ERR, re-processing call queue"),r.quotaExceededErrorRetryTimeout_=null,r.processCallQueue_()},1e3)},!0)},r.handleAppendError_=function(e,t){var r=e.segmentInfo,n=e.type,i=e.bytes;t&&(22!==t.code?(this.logger_("Received non QUOTA_EXCEEDED_ERR on append",t),this.error(n+" append of "+i.length+"b failed for segment #"+r.mediaIndex+" in playlist "+r.playlist.id),this.trigger("appenderror")):this.handleQuotaExceededError_({segmentInfo:r,type:n,bytes:i}))},r.appendToSourceBuffer_=function(e){var t,r,n,i=e.segmentInfo,o=e.type,u=e.initSegment,l=e.data,c=e.bytes;if(!c){var f=[l],d=l.byteLength;u&&(f.unshift(u),d+=u.byteLength),n=0,(t={bytes:d,segments:f}).bytes&&(r=new Uint8Array(t.bytes),t.segments.forEach(function(e){r.set(e,n),n+=e.byteLength})),c=r}this.sourceUpdater_.appendBuffer({segmentInfo:i,type:o,bytes:c},this.handleAppendError_.bind(this,{segmentInfo:i,type:o,bytes:c}))},r.handleSegmentTimingInfo_=function(e,t,r){if(this.pendingSegment_&&t===this.pendingSegment_.requestId){var n=this.pendingSegment_.segment,i=e+"TimingInfo";n[i]||(n[i]={}),n[i].transmuxerPrependedSeconds=r.prependedContentDuration||0,n[i].transmuxedPresentationStart=r.start.presentation,n[i].transmuxedDecodeStart=r.start.decode,n[i].transmuxedPresentationEnd=r.end.presentation,n[i].transmuxedDecodeEnd=r.end.decode,n[i].baseMediaDecodeTime=r.baseMediaDecodeTime}},r.appendData_=function(e,t){var r=t.type,n=t.data;if(n&&n.byteLength&&("audio"!==r||!this.audioDisabled_)){var i=this.getInitSegmentAndUpdateState_({type:r,initSegment:t.initSegment,playlist:e.playlist,map:e.isFmp4?e.segment.map:null});this.appendToSourceBuffer_({segmentInfo:e,type:r,initSegment:i,data:n})}},r.loadSegment_=function(e){var t=this;this.state="WAITING",this.pendingSegment_=e,this.trimBackBuffer_(e),"number"==typeof e.timestampOffset&&this.transmuxer_&&this.transmuxer_.postMessage({action:"clearAllMp4Captions"}),this.hasEnoughInfoToLoad_()?this.updateTransmuxerAndRequestSegment_(e):this.loadQueue_.push(function(){var r=l({},e,{forceTimestampOffset:!0});l(e,t.generateSegmentInfo_(r)),t.isPendingTimestampOffset_=!1,t.updateTransmuxerAndRequestSegment_(e)})},r.updateTransmuxerAndRequestSegment_=function(e){var t=this;this.shouldUpdateTransmuxerTimestampOffset_(e.timestampOffset)&&(this.gopBuffer_.length=0,e.gopsToAlignWith=[],this.timeMapping_=0,this.transmuxer_.postMessage({action:"reset"}),this.transmuxer_.postMessage({action:"setTimestampOffset",timestampOffset:e.timestampOffset}));var r=this.createSimplifiedSegmentObj_(e),n=this.isEndOfStream_(e.mediaIndex,e.playlist,e.partIndex),i=null!==this.mediaIndex,o=e.timeline!==this.currentTimeline_&&e.timeline>0;this.logger_("Requesting "+sf(e)),r.map&&!r.map.bytes&&(this.logger_("going to request init segment."),this.appendInitSegment_={video:!0,audio:!0}),e.abortRequests=a6({xhr:this.vhs_.xhr,xhrOptions:this.xhrOptions_,decryptionWorker:this.decrypter_,segment:r,abortFn:this.handleAbort_.bind(this,e),progressFn:this.handleProgress_.bind(this),trackInfoFn:this.handleTrackInfo_.bind(this),timingInfoFn:this.handleTimingInfo_.bind(this),videoSegmentTimingInfoFn:this.handleSegmentTimingInfo_.bind(this,"video",e.requestId),audioSegmentTimingInfoFn:this.handleSegmentTimingInfo_.bind(this,"audio",e.requestId),captionsFn:this.handleCaptions_.bind(this),isEndOfTimeline:n||i&&o,endedTimelineFn:function(){t.logger_("received endedtimeline callback")},id3Fn:this.handleId3_.bind(this),dataFn:this.handleData_.bind(this),doneFn:this.segmentRequestFinished_.bind(this),onTransmuxerLog:function(r){var n=r.message,i=r.level,o=r.stream;t.logger_(sf(e)+" logged from transmuxer stream "+o+" as a "+i+": "+n)}})},r.trimBackBuffer_=function(e){var t,r,n,i,o=(t=this.seekable_(),r=this.currentTime_(),n=this.playlist_.targetDuration||10,i=r-aq.BACK_BUFFER_LENGTH,t.length&&(i=Math.max(i,t.start(0))),Math.min(r-n,i));o>0&&this.remove(0,o)},r.createSimplifiedSegmentObj_=function(e){var t=e.segment,r=e.part,n={resolvedUri:r?r.resolvedUri:t.resolvedUri,byterange:r?r.byterange:t.byterange,requestId:e.requestId,transmuxer:e.transmuxer,audioAppendStart:e.audioAppendStart,gopsToAlignWith:e.gopsToAlignWith,part:e.part},i=e.playlist.segments[e.mediaIndex-1];if(i&&i.timeline===t.timeline&&(i.videoTimingInfo?n.baseStartTime=i.videoTimingInfo.transmuxedDecodeEnd:i.audioTimingInfo&&(n.baseStartTime=i.audioTimingInfo.transmuxedDecodeEnd)),t.key){var o=t.key.iv||new Uint32Array([0,0,0,e.mediaIndex+e.playlist.mediaSequence]);n.key=this.segmentKey(t.key),n.key.iv=o}return t.map&&(n.map=this.initSegmentForMap(t.map)),n},r.saveTransferStats_=function(e){this.mediaRequests+=1,e&&(this.mediaBytesTransferred+=e.bytesReceived,this.mediaTransferDuration+=e.roundTripTime)},r.saveBandwidthRelatedStats_=function(e,t){this.pendingSegment_.byteLength=t.bytesReceived,e<sc?this.logger_("Ignoring segment's bandwidth because its duration of "+e+" is less than the min to record "+sc):(this.bandwidth=t.bandwidth,this.roundTrip=t.roundTripTime)},r.handleTimeout_=function(){this.mediaRequestsTimedout+=1,this.bandwidth=1,this.roundTrip=NaN,this.trigger("bandwidthupdate"),this.trigger("timeout")},r.segmentRequestFinished_=function(e,t,r){if(this.callQueue_.length)this.callQueue_.push(this.segmentRequestFinished_.bind(this,e,t,r));else if(this.saveTransferStats_(t.stats),this.pendingSegment_&&t.requestId===this.pendingSegment_.requestId){if(e){if(this.pendingSegment_=null,this.state="READY",-102===e.code)return;return this.pause(),-101===e.code?void this.handleTimeout_():(this.mediaRequestsErrored+=1,this.error(e),void this.trigger("error"))}var n=this.pendingSegment_;this.saveBandwidthRelatedStats_(n.duration,t.stats),n.endOfAllRequests=t.endOfAllRequests,r.gopInfo&&(this.gopBuffer_=function(e,t,r){if(!t.length)return e;if(r)return t.slice();for(var n=t[0].pts,i=0;i<e.length&&!(e[i].pts>=n);i++);return e.slice(0,i).concat(t)}(this.gopBuffer_,r.gopInfo,this.safeAppend_)),this.state="APPENDING",this.trigger("appending"),this.waitForAppendsToComplete_(n)}},r.setTimeMapping_=function(e){var t=this.syncController_.mappingForTimeline(e);null!==t&&(this.timeMapping_=t)},r.updateMediaSecondsLoaded_=function(e){"number"==typeof e.start&&"number"==typeof e.end?this.mediaSecondsLoaded+=e.end-e.start:this.mediaSecondsLoaded+=e.duration},r.shouldUpdateTransmuxerTimestampOffset_=function(e){return null!==e&&("main"===this.loaderType_&&e!==this.sourceUpdater_.videoTimestampOffset()||!this.audioDisabled_&&e!==this.sourceUpdater_.audioTimestampOffset())},r.trueSegmentStart_=function(e){var t=e.currentStart,r=e.playlist,n=e.mediaIndex,i=e.firstVideoFrameTimeForData,o=e.currentVideoTimestampOffset,u=e.useVideoTimingInfo,l=e.videoTimingInfo,c=e.audioTimingInfo;if(void 0!==t)return t;if(!u)return c.start;var f=r.segments[n-1];return 0!==n&&f&&void 0!==f.start&&f.end===i+o?l.start:i},r.waitForAppendsToComplete_=function(e){var t=this.getCurrentMediaInfo_(e);if(!t)return this.error({message:"No starting media returned, likely due to an unsupported media format.",blacklistDuration:1/0}),void this.trigger("error");var r=t.hasAudio,n=t.hasVideo,i=t.isMuxed,o="main"===this.loaderType_&&n,u=!this.audioDisabled_&&r&&!i;if(e.waitingOnAppends=0,!e.hasAppendedData_)return e.timingInfo||"number"!=typeof e.timestampOffset||(this.isPendingTimestampOffset_=!0),e.timingInfo={start:0},e.waitingOnAppends++,this.isPendingTimestampOffset_||(this.updateSourceBufferTimestampOffset_(e),this.processMetadataQueue_()),void this.checkAppendsDone_(e);o&&e.waitingOnAppends++,u&&e.waitingOnAppends++,o&&this.sourceUpdater_.videoQueueCallback(this.checkAppendsDone_.bind(this,e)),u&&this.sourceUpdater_.audioQueueCallback(this.checkAppendsDone_.bind(this,e))},r.checkAppendsDone_=function(e){this.checkForAbort_(e.requestId)||(e.waitingOnAppends--,0===e.waitingOnAppends&&this.handleAppendsDone_())},r.checkForIllegalMediaSwitch=function(e){var t,r,n=(t=this.loaderType_,r=this.getCurrentMediaInfo_(),"main"===t&&r&&e?e.hasAudio||e.hasVideo?r.hasVideo&&!e.hasVideo?"Only audio found in segment when we expected video. We can't switch to audio only from a stream that had video. To get rid of this message, please add codec information to the manifest.":!r.hasVideo&&e.hasVideo?"Video found in segment when we expected only audio. We can't switch to a stream with video from an audio only stream. To get rid of this message, please add codec information to the manifest.":null:"Neither audio nor video found in segment.":null);return!!n&&(this.error({message:n,blacklistDuration:1/0}),this.trigger("error"),!0)},r.updateSourceBufferTimestampOffset_=function(e){if(null!==e.timestampOffset&&"number"==typeof e.timingInfo.start&&!e.changedTimestampOffset&&"main"===this.loaderType_){var t=!1;e.timestampOffset-=this.getSegmentStartTimeForTimestampOffsetCalculation_({videoTimingInfo:e.segment.videoTimingInfo,audioTimingInfo:e.segment.audioTimingInfo,timingInfo:e.timingInfo}),e.changedTimestampOffset=!0,e.timestampOffset!==this.sourceUpdater_.videoTimestampOffset()&&(this.sourceUpdater_.videoTimestampOffset(e.timestampOffset),t=!0),e.timestampOffset!==this.sourceUpdater_.audioTimestampOffset()&&(this.sourceUpdater_.audioTimestampOffset(e.timestampOffset),t=!0),t&&this.trigger("timestampoffset")}},r.getSegmentStartTimeForTimestampOffsetCalculation_=function(e){var t=e.videoTimingInfo,r=e.audioTimingInfo,n=e.timingInfo;return this.useDtsForTimestampOffset_?t&&"number"==typeof t.transmuxedDecodeStart?t.transmuxedDecodeStart:r&&"number"==typeof r.transmuxedDecodeStart?r.transmuxedDecodeStart:n.start:n.start},r.updateTimingInfoEnd_=function(e){e.timingInfo=e.timingInfo||{};var t=this.getMediaInfo_(),r="main"===this.loaderType_&&t&&t.hasVideo&&e.videoTimingInfo?e.videoTimingInfo:e.audioTimingInfo;r&&(e.timingInfo.end="number"==typeof r.end?r.end:r.start+e.duration)},r.handleAppendsDone_=function(){if(this.pendingSegment_&&this.trigger("appendsdone"),!this.pendingSegment_)return this.state="READY",void(this.paused()||this.monitorBuffer_());var e=this.pendingSegment_;this.updateTimingInfoEnd_(e),this.shouldSaveSegmentTimingInfo_&&this.syncController_.saveSegmentTimingInfo({segmentInfo:e,shouldSaveTimelineMapping:"main"===this.loaderType_});var t=function(e,t){if("hls"!==t)return null;var r,n,o=(r={audioTimingInfo:e.audioTimingInfo,videoTimingInfo:e.videoTimingInfo},n=0,["video","audio"].forEach(function(e){var t=r[e+"TimingInfo"];if(t){var o,u=t.start,l=t.end;"bigint"==typeof u||"bigint"==typeof l?o=i().BigInt(l)-i().BigInt(u):"number"==typeof u&&"number"==typeof l&&(o=l-u),void 0!==o&&o>n&&(n=o)}}),"bigint"==typeof n&&n<Number.MAX_SAFE_INTEGER&&(n=Number(n)),n);if(!o)return null;var u=e.playlist.targetDuration,l=sp({segmentDuration:o,maxDuration:2*u}),c=sp({segmentDuration:o,maxDuration:u}),f="Segment with index "+e.mediaIndex+" from playlist "+e.playlist.id+" has a duration of "+o+" when the reported duration is "+e.duration+" and the target duration is "+u+". For HLS content, a duration in excess of the target duration may result in playback issues. See the HLS specification section on EXT-X-TARGETDURATION for more details: https://tools.ietf.org/html/draft-pantos-http-live-streaming-23#section-4.3.3.1";return l||c?{severity:l?"warn":"info",message:f}:null}(e,this.sourceType_);if(t&&("warn"===t.severity?oF.log.warn(t.message):this.logger_(t.message)),this.recordThroughput_(e),this.pendingSegment_=null,this.state="READY",!e.isSyncRequest||(this.trigger("syncinfoupdate"),e.hasAppendedData_)){this.logger_("Appended "+sf(e)),this.addSegmentMetadataCue_(e),this.fetchAtBuffer_=!0,this.currentTimeline_!==e.timeline&&(this.timelineChangeController_.lastTimelineChange({type:this.loaderType_,from:this.currentTimeline_,to:e.timeline}),"main"!==this.loaderType_||this.audioDisabled_||this.timelineChangeController_.lastTimelineChange({type:"audio",from:this.currentTimeline_,to:e.timeline})),this.currentTimeline_=e.timeline,this.trigger("syncinfoupdate");var r=e.segment,n=e.part,o=r.end&&this.currentTime_()-r.end>3*e.playlist.targetDuration,u=n&&n.end&&this.currentTime_()-n.end>3*e.playlist.partTargetDuration;if(o||u)return this.logger_("bad "+(o?"segment":"part")+" "+sf(e)),void this.resetEverything();null!==this.mediaIndex&&this.trigger("bandwidthupdate"),this.trigger("progress"),this.mediaIndex=e.mediaIndex,this.partIndex=e.partIndex,this.isEndOfStream_(e.mediaIndex,e.playlist,e.partIndex)&&this.endOfStream(),this.trigger("appended"),e.hasAppendedData_&&this.mediaAppends++,this.paused()||this.monitorBuffer_()}else this.logger_("Throwing away un-appended sync request "+sf(e))},r.recordThroughput_=function(e){if(e.duration<sc)this.logger_("Ignoring segment's throughput because its duration of "+e.duration+" is less than the min to record "+sc);else{var t=this.throughput.rate,r=Date.now()-e.endOfAllRequests+1,n=Math.floor(e.byteLength/r*8e3);this.throughput.rate+=(n-t)/++this.throughput.count}},r.addSegmentMetadataCue_=function(e){if(this.segmentMetadataTrack_){var t=e.segment,r=t.start,n=t.end;if(sl(r)&&sl(n)){su(r,n,this.segmentMetadataTrack_);var o=i().WebKitDataCue||i().VTTCue,u={custom:t.custom,dateTimeObject:t.dateTimeObject,dateTimeString:t.dateTimeString,bandwidth:e.playlist.attributes.BANDWIDTH,resolution:e.playlist.attributes.RESOLUTION,codecs:e.playlist.attributes.CODECS,byteLength:e.byteLength,uri:e.uri,timeline:e.timeline,playlist:e.playlist.id,start:r,end:n},l=new o(r,n,JSON.stringify(u));l.value=u,this.segmentMetadataTrack_.addCue(l)}}},t}(oF.EventTarget);function sg(){}var sy,sv=function(e){return"string"!=typeof e?e:e.replace(/./,function(e){return e.toUpperCase()})},sb=["video","audio"],s_=function(e,t){var r=t[e+"Buffer"];return r&&r.updating||t.queuePending[e]},sT=function e(t,r){if(0!==r.queue.length){var n=0,i=r.queue[n];if("mediaSource"!==i.type){if("mediaSource"!==t&&r.ready()&&"closed"!==r.mediaSource.readyState&&!s_(t,r)){if(i.type!==t){if(null===(n=function(e,t){for(var r=0;r<t.length;r++){var n=t[r];if("mediaSource"===n.type)break;if(n.type===e)return r}return null}(t,r.queue)))return;i=r.queue[n]}return r.queue.splice(n,1),r.queuePending[t]=i,i.action(t,r),i.doneFn?void 0:(r.queuePending[t]=null,void e(t,r))}}else r.updating()||"closed"===r.mediaSource.readyState||(r.queue.shift(),i.action(r),i.doneFn&&i.doneFn(),e("audio",r),e("video",r))}},sE=function(e,t){var r=t[e+"Buffer"],n=sv(e);r&&(r.removeEventListener("updateend",t["on"+n+"UpdateEnd_"]),r.removeEventListener("error",t["on"+n+"Error_"]),t.codecs[e]=null,t[e+"Buffer"]=null)},sS=function(e,t){return e&&t&&-1!==Array.prototype.indexOf.call(e.sourceBuffers,t)},sw=function(e,t){return function(r,n){var i=n[r+"Buffer"];if(sS(n.mediaSource,i)){n.logger_("Removing "+e+" to "+t+" from "+r+"Buffer");try{i.remove(e,t)}catch(i){n.logger_("Remove "+e+" to "+t+" from "+r+"Buffer failed")}}}},sA=function(e){return function(t,r){var n=r[t+"Buffer"];sS(r.mediaSource,n)&&(r.logger_("Setting "+t+"timestampOffset to "+e),n.timestampOffset=e)}},sC=function(e){return function(t,r){e()}},sI=function(e){var t=e.type,r=e.sourceUpdater,n=e.action,i=e.doneFn,o=e.name;r.queue.push({type:t,action:n,doneFn:i,name:o}),sT(t,r)},sO=function(e,t){return function(r){if(t.queuePending[e]){var n=t.queuePending[e].doneFn;t.queuePending[e]=null,n&&n(t[e+"Error_"])}sT(e,t)}},sR=function(e){function t(t){var r;return(r=e.call(this)||this).mediaSource=t,r.sourceopenListener_=function(){return sT("mediaSource",h(r))},r.mediaSource.addEventListener("sourceopen",r.sourceopenListener_),r.logger_=oH("SourceUpdater"),r.audioTimestampOffset_=0,r.videoTimestampOffset_=0,r.queue=[],r.queuePending={audio:null,video:null},r.delayedAudioAppendQueue_=[],r.videoAppendQueued_=!1,r.codecs={},r.onVideoUpdateEnd_=sO("video",h(r)),r.onAudioUpdateEnd_=sO("audio",h(r)),r.onVideoError_=function(e){r.videoError_=e},r.onAudioError_=function(e){r.audioError_=e},r.createdSourceBuffers_=!1,r.initializedEme_=!1,r.triggeredReady_=!1,r}m(t,e);var r=t.prototype;return r.initializedEme=function(){this.initializedEme_=!0,this.triggerReady()},r.hasCreatedSourceBuffers=function(){return this.createdSourceBuffers_},r.hasInitializedAnyEme=function(){return this.initializedEme_},r.ready=function(){return this.hasCreatedSourceBuffers()&&this.hasInitializedAnyEme()},r.createSourceBuffers=function(e){this.hasCreatedSourceBuffers()||(this.addOrChangeSourceBuffers(e),this.createdSourceBuffers_=!0,this.trigger("createdsourcebuffers"),this.triggerReady())},r.triggerReady=function(){this.ready()&&!this.triggeredReady_&&(this.triggeredReady_=!0,this.trigger("ready"))},r.addSourceBuffer=function(e,t){sI({type:"mediaSource",sourceUpdater:this,action:function(r){var n=sv(e),i=Y(t);r.logger_("Adding "+e+"Buffer with codec "+t+" to mediaSource");var o=r.mediaSource.addSourceBuffer(i);o.addEventListener("updateend",r["on"+n+"UpdateEnd_"]),o.addEventListener("error",r["on"+n+"Error_"]),r.codecs[e]=t,r[e+"Buffer"]=o},name:"addSourceBuffer"})},r.abort=function(e){sI({type:e,sourceUpdater:this,action:function(e,t){if("open"===t.mediaSource.readyState){var r=t[e+"Buffer"];if(sS(t.mediaSource,r)){t.logger_("calling abort on "+e+"Buffer");try{r.abort()}catch(t){oF.log.warn("Failed to abort on "+e+"Buffer",t)}}}},name:"abort"})},r.removeSourceBuffer=function(e){this.canRemoveSourceBuffer()?sI({type:"mediaSource",sourceUpdater:this,action:function(t){var r=t[e+"Buffer"];if(sE(e,t),sS(t.mediaSource,r)){t.logger_("Removing "+e+"Buffer with codec "+t.codecs[e]+" from mediaSource");try{t.mediaSource.removeSourceBuffer(r)}catch(t){oF.log.warn("Failed to removeSourceBuffer "+e+"Buffer",t)}}},name:"removeSourceBuffer"}):oF.log.error("removeSourceBuffer is not supported!")},r.canRemoveSourceBuffer=function(){return!oF.browser.IE_VERSION&&!oF.browser.IS_FIREFOX&&i().MediaSource&&i().MediaSource.prototype&&"function"==typeof i().MediaSource.prototype.removeSourceBuffer},t.canChangeType=function(){return i().SourceBuffer&&i().SourceBuffer.prototype&&"function"==typeof i().SourceBuffer.prototype.changeType},r.canChangeType=function(){return this.constructor.canChangeType()},r.changeType=function(e,t){this.canChangeType()?sI({type:e,sourceUpdater:this,action:function(e,r){var n=r[e+"Buffer"],i=Y(t);sS(r.mediaSource,n)&&r.codecs[e]!==t&&(r.logger_("changing "+e+"Buffer codec from "+r.codecs[e]+" to "+t),n.changeType(i),r.codecs[e]=t)},name:"changeType"}):oF.log.error("changeType is not supported!")},r.addOrChangeSourceBuffers=function(e){var t=this;if(!e||"object"!=typeof e||0===Object.keys(e).length)throw Error("Cannot addOrChangeSourceBuffers to undefined codecs");Object.keys(e).forEach(function(r){var n=e[r];if(!t.hasCreatedSourceBuffers())return t.addSourceBuffer(r,n);t.canChangeType()&&t.changeType(r,n)})},r.appendBuffer=function(e,t){var r,n=this,i=e.segmentInfo,o=e.type,u=e.bytes;if(this.processedAppend_=!0,"audio"===o&&this.videoBuffer&&!this.videoAppendQueued_)return this.delayedAudioAppendQueue_.push([e,t]),void this.logger_("delayed audio append of "+u.length+" until video append");if(sI({type:o,sourceUpdater:this,action:(r=i||{mediaIndex:-1},function(e,n){var i=n[e+"Buffer"];if(sS(n.mediaSource,i)){n.logger_("Appending segment "+r.mediaIndex+"'s "+u.length+" bytes to "+e+"Buffer");try{i.appendBuffer(u)}catch(i){n.logger_("Error with code "+i.code+" "+(22===i.code?"(QUOTA_EXCEEDED_ERR) ":"")+"when appending segment "+r.mediaIndex+" to "+e+"Buffer"),n.queuePending[e]=null,t(i)}}}),doneFn:t,name:"appendBuffer"}),"video"===o){if(this.videoAppendQueued_=!0,!this.delayedAudioAppendQueue_.length)return;var l=this.delayedAudioAppendQueue_.slice();this.logger_("queuing delayed audio "+l.length+" appendBuffers"),this.delayedAudioAppendQueue_.length=0,l.forEach(function(e){n.appendBuffer.apply(n,e)})}},r.audioBuffered=function(){return sS(this.mediaSource,this.audioBuffer)&&this.audioBuffer.buffered?this.audioBuffer.buffered:oF.createTimeRange()},r.videoBuffered=function(){return sS(this.mediaSource,this.videoBuffer)&&this.videoBuffer.buffered?this.videoBuffer.buffered:oF.createTimeRange()},r.buffered=function(){var e=sS(this.mediaSource,this.videoBuffer)?this.videoBuffer:null,t=sS(this.mediaSource,this.audioBuffer)?this.audioBuffer:null;return t&&!e?this.audioBuffered():e&&!t?this.videoBuffered():function(e,t){var r=null,n=null,i=0,o=[],u=[];if(!(e&&e.length&&t&&t.length))return oF.createTimeRange();for(var l=e.length;l--;)o.push({time:e.start(l),type:"start"}),o.push({time:e.end(l),type:"end"});for(l=t.length;l--;)o.push({time:t.start(l),type:"start"}),o.push({time:t.end(l),type:"end"});for(o.sort(function(e,t){return e.time-t.time}),l=0;l<o.length;l++)"start"===o[l].type?2==++i&&(r=o[l].time):"end"===o[l].type&&1==--i&&(n=o[l].time),null!==r&&null!==n&&(u.push([r,n]),r=null,n=null);return oF.createTimeRanges(u)}(this.audioBuffered(),this.videoBuffered())},r.setDuration=function(e,t){void 0===t&&(t=sg),sI({type:"mediaSource",sourceUpdater:this,action:function(t){t.logger_("Setting mediaSource duration to "+e);try{t.mediaSource.duration=e}catch(e){oF.log.warn("Failed to set media source duration",e)}},name:"duration",doneFn:t})},r.endOfStream=function(e,t){var r;void 0===e&&(e=null),void 0===t&&(t=sg),"string"!=typeof e&&(e=void 0),sI({type:"mediaSource",sourceUpdater:this,action:(r=e,function(e){if("open"===e.mediaSource.readyState){e.logger_("Calling mediaSource endOfStream("+(r||"")+")");try{e.mediaSource.endOfStream(r)}catch(e){oF.log.warn("Failed to call media source endOfStream",e)}}}),name:"endOfStream",doneFn:t})},r.removeAudio=function(e,t,r){void 0===r&&(r=sg),this.audioBuffered().length&&0!==this.audioBuffered().end(0)?sI({type:"audio",sourceUpdater:this,action:sw(e,t),doneFn:r,name:"remove"}):r()},r.removeVideo=function(e,t,r){void 0===r&&(r=sg),this.videoBuffered().length&&0!==this.videoBuffered().end(0)?sI({type:"video",sourceUpdater:this,action:sw(e,t),doneFn:r,name:"remove"}):r()},r.updating=function(){return!(!s_("audio",this)&&!s_("video",this))},r.audioTimestampOffset=function(e){return void 0!==e&&this.audioBuffer&&this.audioTimestampOffset_!==e&&(sI({type:"audio",sourceUpdater:this,action:sA(e),name:"timestampOffset"}),this.audioTimestampOffset_=e),this.audioTimestampOffset_},r.videoTimestampOffset=function(e){return void 0!==e&&this.videoBuffer&&this.videoTimestampOffset!==e&&(sI({type:"video",sourceUpdater:this,action:sA(e),name:"timestampOffset"}),this.videoTimestampOffset_=e),this.videoTimestampOffset_},r.audioQueueCallback=function(e){this.audioBuffer&&sI({type:"audio",sourceUpdater:this,action:sC(e),name:"callback"})},r.videoQueueCallback=function(e){this.videoBuffer&&sI({type:"video",sourceUpdater:this,action:sC(e),name:"callback"})},r.dispose=function(){var e=this;this.trigger("dispose"),sb.forEach(function(t){e.abort(t),e.canRemoveSourceBuffer()?e.removeSourceBuffer(t):e[t+"QueueCallback"](function(){return sE(t,e)})}),this.videoAppendQueued_=!1,this.delayedAudioAppendQueue_.length=0,this.sourceopenListener_&&this.mediaSource.removeEventListener("sourceopen",this.sourceopenListener_),this.off()},t}(oF.EventTarget),sP=function(e){return decodeURIComponent(escape(String.fromCharCode.apply(null,e)))},sk=new Uint8Array("\n\n".split("").map(function(e){return e.charCodeAt(0)})),sD=function(e){function t(){return e.call(this,"Trying to parse received VTT cues, but there is no WebVTT. Make sure vtt.js is loaded.")||this}return m(t,e),t}(tu(Error)),sN=function(e){function t(t,r){var n;return void 0===r&&(r={}),(n=e.call(this,t,r)||this).mediaSource_=null,n.subtitlesTrack_=null,n.loaderType_="subtitle",n.featuresNativeTextTracks_=t.featuresNativeTextTracks,n.loadVttJs=t.loadVttJs,n.shouldSaveSegmentTimingInfo_=!1,n}m(t,e);var r=t.prototype;return r.createTransmuxer_=function(){return null},r.buffered_=function(){if(!this.subtitlesTrack_||!this.subtitlesTrack_.cues||!this.subtitlesTrack_.cues.length)return oF.createTimeRanges();var e=this.subtitlesTrack_.cues,t=e[0].startTime,r=e[e.length-1].startTime;return oF.createTimeRanges([[t,r]])},r.initSegmentForMap=function(e,t){if(void 0===t&&(t=!1),!e)return null;var r=aR(e),n=this.initSegments_[r];if(t&&!n&&e.bytes){var i=sk.byteLength+e.bytes.byteLength,o=new Uint8Array(i);o.set(e.bytes),o.set(sk,e.bytes.byteLength),this.initSegments_[r]=n={resolvedUri:e.resolvedUri,byterange:e.byterange,bytes:o}}return n||e},r.couldBeginLoading_=function(){return this.playlist_&&this.subtitlesTrack_&&!this.paused()},r.init_=function(){return this.state="READY",this.resetEverything(),this.monitorBuffer_()},r.track=function(e){return void 0===e||(this.subtitlesTrack_=e,"INIT"===this.state&&this.couldBeginLoading_()&&this.init_()),this.subtitlesTrack_},r.remove=function(e,t){su(e,t,this.subtitlesTrack_)},r.fillBuffer_=function(){var e=this,t=this.chooseNextRequest_();if(t){if(null===this.syncController_.timestampOffsetForTimeline(t.timeline))return this.syncController_.one("timestampoffset",function(){e.state="READY",e.paused()||e.monitorBuffer_()}),void(this.state="WAITING_ON_TIMELINE");this.loadSegment_(t)}},r.timestampOffsetForSegment_=function(){return null},r.chooseNextRequest_=function(){return this.skipEmptySegments_(e.prototype.chooseNextRequest_.call(this))},r.skipEmptySegments_=function(e){for(;e&&e.segment.empty;){if(e.mediaIndex+1>=e.playlist.segments.length){e=null;break}e=this.generateSegmentInfo_({playlist:e.playlist,mediaIndex:e.mediaIndex+1,startOfSegment:e.startOfSegment+e.duration,isSyncRequest:e.isSyncRequest})}return e},r.stopForError=function(e){this.error(e),this.state="READY",this.pause(),this.trigger("error")},r.segmentRequestFinished_=function(e,t,r){var n=this;if(this.subtitlesTrack_){if(this.saveTransferStats_(t.stats),!this.pendingSegment_)return this.state="READY",void(this.mediaRequestsAborted+=1);if(e)return -101===e.code&&this.handleTimeout_(),-102===e.code?this.mediaRequestsAborted+=1:this.mediaRequestsErrored+=1,void this.stopForError(e);var o=this.pendingSegment_;this.saveBandwidthRelatedStats_(o.duration,t.stats),t.key&&this.segmentKey(t.key,!0),this.state="APPENDING",this.trigger("appending");var u=o.segment;if(u.map&&(u.map.bytes=t.map.bytes),o.bytes=t.bytes,"function"!=typeof i().WebVTT&&"function"==typeof this.loadVttJs)return this.state="WAITING_ON_VTTJS",void this.loadVttJs().then(function(){return n.segmentRequestFinished_(e,t,r)},function(){return n.stopForError({message:"Error loading vtt.js"})});u.requested=!0;try{this.parseVTTCues_(o)}catch(e){return void this.stopForError({message:e.message})}if(this.updateTimeMapping_(o,this.syncController_.timelines[o.timeline],this.playlist_),o.cues.length?o.timingInfo={start:o.cues[0].startTime,end:o.cues[o.cues.length-1].endTime}:o.timingInfo={start:o.startOfSegment,end:o.startOfSegment+o.duration},o.isSyncRequest)return this.trigger("syncinfoupdate"),this.pendingSegment_=null,void(this.state="READY");o.byteLength=o.bytes.byteLength,this.mediaSecondsLoaded+=u.duration,o.cues.forEach(function(e){n.subtitlesTrack_.addCue(n.featuresNativeTextTracks_?new(i()).VTTCue(e.startTime,e.endTime,e.text):e)}),function(e){var t=e.cues;if(t)for(var r=0;r<t.length;r++){for(var n=[],i=0,o=0;o<t.length;o++)t[r].startTime===t[o].startTime&&t[r].endTime===t[o].endTime&&t[r].text===t[o].text&&++i>1&&n.push(t[o]);n.length&&n.forEach(function(t){return e.removeCue(t)})}}(this.subtitlesTrack_),this.handleAppendsDone_()}else this.state="READY"},r.handleData_=function(){},r.updateTimingInfoEnd_=function(){},r.parseVTTCues_=function(e){var t,r=!1;if("function"!=typeof i().WebVTT)throw new sD;"function"==typeof i().TextDecoder?t=new(i()).TextDecoder("utf8"):(t=i().WebVTT.StringDecoder(),r=!0);var n=new(i()).WebVTT.Parser(i(),i().vttjs,t);if(e.cues=[],e.timestampmap={MPEGTS:0,LOCAL:0},n.oncue=e.cues.push.bind(e.cues),n.ontimestampmap=function(t){e.timestampmap=t},n.onparsingerror=function(e){oF.log.warn("Error encountered when parsing cues: "+e.message)},e.segment.map){var o=e.segment.map.bytes;r&&(o=sP(o)),n.parse(o)}var u=e.bytes;r&&(u=sP(u)),n.parse(u),n.flush()},r.updateTimeMapping_=function(e,t,r){var n=e.segment;if(t){if(e.cues.length){var i=e.timestampmap,o=i.MPEGTS/ta.ONE_SECOND_IN_TS-i.LOCAL+t.mapping;if(e.cues.forEach(function(e){e.startTime+=o,e.endTime+=o}),!r.syncInfo){var u=e.cues[0].startTime,l=e.cues[e.cues.length-1].startTime;r.syncInfo={mediaSequence:r.mediaSequence+e.mediaIndex,time:Math.min(u,l-n.duration)}}}else n.empty=!0}},t}(sm),sL=function(e,t){for(var r=e.cues,n=0;n<r.length;n++){var i=r[n];if(t>=i.adStartTime&&t<=i.adEndTime)return i}return null},sx=[{name:"VOD",run:function(e,t,r,n,i){return r!==1/0?{time:0,segmentIndex:0,partIndex:null}:null}},{name:"ProgramDateTime",run:function(e,t,r,n,i){if(!Object.keys(e.timelineToDatetimeMappings).length)return null;var o=null,u=null,l=oZ(t);i=i||0;for(var c=0;c<l.length;c++){var f=l[t.endList||0===i?c:l.length-(c+1)],d=f.segment,h=e.timelineToDatetimeMappings[d.timeline];if(h&&d.dateTimeObject){var p=d.dateTimeObject.getTime()/1e3+h;if(d.parts&&"number"==typeof f.partIndex)for(var m=0;m<f.partIndex;m++)p+=d.parts[m].duration;var g=Math.abs(i-p);if(null!==u&&(0===g||u<g))break;u=g,o={time:p,segmentIndex:f.segmentIndex,partIndex:f.partIndex}}}return o}},{name:"Segment",run:function(e,t,r,n,i){var o=null,u=null;i=i||0;for(var l=oZ(t),c=0;c<l.length;c++){var f=l[t.endList||0===i?c:l.length-(c+1)],d=f.segment,h=f.part&&f.part.start||d&&d.start;if(d.timeline===n&&void 0!==h){var p=Math.abs(i-h);if(null!==u&&u<p)break;(!o||null===u||u>=p)&&(u=p,o={time:h,segmentIndex:f.segmentIndex,partIndex:f.partIndex})}}return o}},{name:"Discontinuity",run:function(e,t,r,n,i){var o=null;if(i=i||0,t.discontinuityStarts&&t.discontinuityStarts.length)for(var u=null,l=0;l<t.discontinuityStarts.length;l++){var c=t.discontinuityStarts[l],f=t.discontinuitySequence+l+1,d=e.discontinuities[f];if(d){var h=Math.abs(i-d.time);if(null!==u&&u<h)break;(!o||null===u||u>=h)&&(u=h,o={time:d.time,segmentIndex:c,partIndex:null})}}return o}},{name:"Playlist",run:function(e,t,r,n,i){return t.syncInfo?{time:t.syncInfo.time,segmentIndex:t.syncInfo.mediaSequence-t.mediaSequence,partIndex:null}:null}}],sj=function(e){function t(t){var r;return(r=e.call(this)||this).timelines=[],r.discontinuities=[],r.timelineToDatetimeMappings={},r.logger_=oH("SyncController"),r}m(t,e);var r=t.prototype;return r.getSyncPoint=function(e,t,r,n){var i=this.runStrategies_(e,t,r,n);return i.length?this.selectSyncPoint_(i,{key:"time",value:n}):null},r.getExpiredTime=function(e,t){if(!e||!e.segments)return null;var r=this.runStrategies_(e,t,e.discontinuitySequence,0);if(!r.length)return null;var n=this.selectSyncPoint_(r,{key:"segmentIndex",value:0});return n.segmentIndex>0&&(n.time*=-1),Math.abs(n.time+o6({defaultDuration:e.targetDuration,durationList:e.segments,startIndex:n.segmentIndex,endIndex:0}))},r.runStrategies_=function(e,t,r,n){for(var i=[],o=0;o<sx.length;o++){var u=sx[o],l=u.run(this,e,t,r,n);l&&(l.strategy=u.name,i.push({strategy:u.name,syncPoint:l}))}return i},r.selectSyncPoint_=function(e,t){for(var r=e[0].syncPoint,n=Math.abs(e[0].syncPoint[t.key]-t.value),i=e[0].strategy,o=1;o<e.length;o++){var u=Math.abs(e[o].syncPoint[t.key]-t.value);u<n&&(n=u,r=e[o].syncPoint,i=e[o].strategy)}return this.logger_("syncPoint for ["+t.key+": "+t.value+"] chosen with strategy ["+i+"]: [time:"+r.time+", segmentIndex:"+r.segmentIndex+("number"==typeof r.partIndex?",partIndex:"+r.partIndex:"")+"]"),r},r.saveExpiredSegmentInfo=function(e,t){var r=t.mediaSequence-e.mediaSequence;if(r>86400)oF.log.warn("Not saving expired segment info. Media sequence gap "+r+" is too large.");else for(var n=r-1;n>=0;n--){var i=e.segments[n];if(i&&void 0!==i.start){t.syncInfo={mediaSequence:e.mediaSequence+n,time:i.start},this.logger_("playlist refresh sync: [time:"+t.syncInfo.time+", mediaSequence: "+t.syncInfo.mediaSequence+"]"),this.trigger("syncinfoupdate");break}}},r.setDateTimeMappingForStart=function(e){if(this.timelineToDatetimeMappings={},e.segments&&e.segments.length&&e.segments[0].dateTimeObject){var t=e.segments[0],r=t.dateTimeObject.getTime()/1e3;this.timelineToDatetimeMappings[t.timeline]=-r}},r.saveSegmentTimingInfo=function(e){var t=e.segmentInfo,r=e.shouldSaveTimelineMapping,n=this.calculateSegmentTimeMapping_(t,t.timingInfo,r),i=t.segment;n&&(this.saveDiscontinuitySyncInfo_(t),t.playlist.syncInfo||(t.playlist.syncInfo={mediaSequence:t.playlist.mediaSequence+t.mediaIndex,time:i.start}));var o=i.dateTimeObject;i.discontinuity&&r&&o&&(this.timelineToDatetimeMappings[i.timeline]=-o.getTime()/1e3)},r.timestampOffsetForTimeline=function(e){return void 0===this.timelines[e]?null:this.timelines[e].time},r.mappingForTimeline=function(e){return void 0===this.timelines[e]?null:this.timelines[e].mapping},r.calculateSegmentTimeMapping_=function(e,t,r){var n,i,o=e.segment,u=e.part,l=this.timelines[e.timeline];if("number"==typeof e.timestampOffset)l={time:e.startOfSegment,mapping:e.startOfSegment-t.start},r&&(this.timelines[e.timeline]=l,this.trigger("timestampoffset"),this.logger_("time mapping for timeline "+e.timeline+": [time: "+l.time+"] [mapping: "+l.mapping+"]")),n=e.startOfSegment,i=t.end+l.mapping;else{if(!l)return!1;n=t.start+l.mapping,i=t.end+l.mapping}return u&&(u.start=n,u.end=i),(!o.start||n<o.start)&&(o.start=n),o.end=i,!0},r.saveDiscontinuitySyncInfo_=function(e){var t=e.playlist,r=e.segment;if(r.discontinuity)this.discontinuities[r.timeline]={time:r.start,accuracy:0};else if(t.discontinuityStarts&&t.discontinuityStarts.length)for(var n=0;n<t.discontinuityStarts.length;n++){var i,o=t.discontinuityStarts[n],u=t.discontinuitySequence+n+1,l=o-e.mediaIndex,c=Math.abs(l);(!this.discontinuities[u]||this.discontinuities[u].accuracy>c)&&(i=l<0?r.start-o6({defaultDuration:t.targetDuration,durationList:t.segments,startIndex:e.mediaIndex,endIndex:o}):r.end+o6({defaultDuration:t.targetDuration,durationList:t.segments,startIndex:e.mediaIndex+1,endIndex:o}),this.discontinuities[u]={time:i,accuracy:c})}},r.dispose=function(){this.trigger("dispose"),this.off()},t}(oF.EventTarget),sM=function(e){function t(){var t;return(t=e.call(this)||this).pendingTimelineChanges_={},t.lastTimelineChanges_={},t}m(t,e);var r=t.prototype;return r.clearPendingTimelineChange=function(e){this.pendingTimelineChanges_[e]=null,this.trigger("pendingtimelinechange")},r.pendingTimelineChange=function(e){var t=e.type,r=e.from,n=e.to;return"number"==typeof r&&"number"==typeof n&&(this.pendingTimelineChanges_[t]={type:t,from:r,to:n},this.trigger("pendingtimelinechange")),this.pendingTimelineChanges_[t]},r.lastTimelineChange=function(e){var t=e.type,r=e.from,n=e.to;return"number"==typeof r&&"number"==typeof n&&(this.lastTimelineChanges_[t]={type:t,from:r,to:n},delete this.pendingTimelineChanges_[t],this.trigger("timelinechange")),this.lastTimelineChanges_[t]},r.dispose=function(){this.trigger("dispose"),this.pendingTimelineChanges_={},this.lastTimelineChanges_={},this.off()},t}(oF.EventTarget),sF=aV(aG(aY(function(){var e="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:void 0!==r.g?r.g:"undefined"!=typeof self?self:{};function t(e,t,r){return e(r={path:t,exports:{},require:function(e,t){return function(){throw Error("Dynamic requires are not currently supported by @rollup/plugin-commonjs")}(null==t&&r.path)}},r.exports),r.exports}var n=t(function(e){function t(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}e.exports=function(e,r,n){return r&&t(e.prototype,r),n&&t(e,n),e},e.exports.default=e.exports,e.exports.__esModule=!0}),i=t(function(e){function t(r,n){return e.exports=t=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},e.exports.default=e.exports,e.exports.__esModule=!0,t(r,n)}e.exports=t,e.exports.default=e.exports,e.exports.__esModule=!0}),o=t(function(e){e.exports=function(e,t){e.prototype=Object.create(t.prototype),e.prototype.constructor=e,i(e,t)},e.exports.default=e.exports,e.exports.__esModule=!0}),u=function(){function e(){this.listeners={}}var t=e.prototype;return t.on=function(e,t){this.listeners[e]||(this.listeners[e]=[]),this.listeners[e].push(t)},t.off=function(e,t){if(!this.listeners[e])return!1;var r=this.listeners[e].indexOf(t);return this.listeners[e]=this.listeners[e].slice(0),this.listeners[e].splice(r,1),r>-1},t.trigger=function(e){var t=this.listeners[e];if(t){if(2==arguments.length)for(var r=t.length,n=0;n<r;++n)t[n].call(this,arguments[1]);else for(var i=Array.prototype.slice.call(arguments,1),o=t.length,u=0;u<o;++u)t[u].apply(this,i)}},t.dispose=function(){this.listeners={}},t.pipe=function(e){this.on("data",function(t){e.push(t)})},e}(),l=null,c=function(){function e(e){l||(l=function(){var e,t,r,n,i,o,u,l,c=[[[],[],[],[],[]],[[],[],[],[],[]]],f=c[0],d=c[1],h=f[4],p=d[4],m=[],g=[];for(e=0;e<256;e++)g[(m[e]=e<<1^283*(e>>7))^e]=e;for(t=r=0;!h[t];t^=n||1,r=g[r]||1)for(o=(o=r^r<<1^r<<2^r<<3^r<<4)>>8^255&o^99,h[t]=o,p[o]=t,l=16843009*m[i=m[n=m[t]]]^65537*i^257*n^16843008*t,u=257*m[o]^16843008*o,e=0;e<4;e++)f[e][t]=u=u<<24^u>>>8,d[e][o]=l=l<<24^l>>>8;for(e=0;e<5;e++)f[e]=f[e].slice(0),d[e]=d[e].slice(0);return c}()),this._tables=[[l[0][0].slice(),l[0][1].slice(),l[0][2].slice(),l[0][3].slice(),l[0][4].slice()],[l[1][0].slice(),l[1][1].slice(),l[1][2].slice(),l[1][3].slice(),l[1][4].slice()]];var t,r,n,i=this._tables[0][4],o=this._tables[1],u=e.length,c=1;if(4!==u&&6!==u&&8!==u)throw Error("Invalid aes key size");var f=e.slice(0),d=[];for(this._key=[f,d],t=u;t<4*u+28;t++)n=f[t-1],(t%u==0||8===u&&t%u==4)&&(n=i[n>>>24]<<24^i[n>>16&255]<<16^i[n>>8&255]<<8^i[255&n],t%u==0&&(n=n<<8^n>>>24^c<<24,c=c<<1^283*(c>>7))),f[t]=f[t-u]^n;for(r=0;t;r++,t--)n=f[3&r?t:t-4],d[r]=t<=4||r<4?n:o[0][i[n>>>24]]^o[1][i[n>>16&255]]^o[2][i[n>>8&255]]^o[3][i[255&n]]}return e.prototype.decrypt=function(e,t,r,n,i,o){var u,l,c,f,d=this._key[1],h=e^d[0],p=n^d[1],m=r^d[2],g=t^d[3],y=d.length/4-2,v=4,b=this._tables[1],_=b[0],T=b[1],E=b[2],S=b[3],w=b[4];for(f=0;f<y;f++)u=_[h>>>24]^T[p>>16&255]^E[m>>8&255]^S[255&g]^d[v],l=_[p>>>24]^T[m>>16&255]^E[g>>8&255]^S[255&h]^d[v+1],c=_[m>>>24]^T[g>>16&255]^E[h>>8&255]^S[255&p]^d[v+2],g=_[g>>>24]^T[h>>16&255]^E[p>>8&255]^S[255&m]^d[v+3],v+=4,h=u,p=l,m=c;for(f=0;f<4;f++)i[(3&-f)+o]=w[h>>>24]<<24^w[p>>16&255]<<16^w[m>>8&255]<<8^w[255&g]^d[v++],u=h,h=p,p=m,m=g,g=u},e}(),f=function(e){function t(){var t;return(t=e.call(this,u)||this).jobs=[],t.delay=1,t.timeout_=null,t}o(t,e);var r=t.prototype;return r.processJob_=function(){this.jobs.shift()(),this.jobs.length?this.timeout_=setTimeout(this.processJob_.bind(this),this.delay):this.timeout_=null},r.push=function(e){this.jobs.push(e),this.timeout_||(this.timeout_=setTimeout(this.processJob_.bind(this),this.delay))},t}(u),d=function(e){return e<<24|(65280&e)<<8|(16711680&e)>>8|e>>>24},h=function(){function e(t,r,n,i){var o=e.STEP,u=new Int32Array(t.buffer),l=new Uint8Array(t.byteLength),c=0;for(this.asyncStream_=new f,this.asyncStream_.push(this.decryptChunk_(u.subarray(c,c+o),r,n,l)),c=o;c<u.length;c+=o)n=new Uint32Array([d(u[c-4]),d(u[c-3]),d(u[c-2]),d(u[c-1])]),this.asyncStream_.push(this.decryptChunk_(u.subarray(c,c+o),r,n,l));this.asyncStream_.push(function(){i(null,l.subarray(0,l.byteLength-l[l.byteLength-1]))})}return e.prototype.decryptChunk_=function(e,t,r,n){return function(){var i=function(e,t,r){var n,i,o,u,l,f,h,p,m,g=new Int32Array(e.buffer,e.byteOffset,e.byteLength>>2),y=new c(Array.prototype.slice.call(t)),v=new Uint8Array(e.byteLength),b=new Int32Array(v.buffer);for(n=r[0],i=r[1],o=r[2],u=r[3],m=0;m<g.length;m+=4)l=d(g[m]),f=d(g[m+1]),h=d(g[m+2]),p=d(g[m+3]),y.decrypt(l,f,h,p,b,m),b[m]=d(b[m]^n),b[m+1]=d(b[m+1]^i),b[m+2]=d(b[m+2]^o),b[m+3]=d(b[m+3]^u),n=l,i=f,o=h,u=p;return v}(e,t,r);n.set(i,e.byteOffset)}},n(e,null,[{key:"STEP",get:function(){return 32e3}}]),e}(),p=("undefined"!=typeof window?window:void 0!==e?e:"undefined"!=typeof self?self:{}).BigInt||Number;p("0x1"),p("0x100"),p("0x10000"),p("0x1000000"),p("0x100000000"),p("0x10000000000"),p("0x1000000000000"),p("0x100000000000000"),p("0x10000000000000000"),self.onmessage=function(e){var t=e.data,r=new Uint8Array(t.encrypted.bytes,t.encrypted.byteOffset,t.encrypted.byteLength),n=new Uint32Array(t.key.bytes,t.key.byteOffset,t.key.byteLength/4),i=new Uint32Array(t.iv.bytes,t.iv.byteOffset,t.iv.byteLength/4);new h(r,n,i,function(e,r){var n,i;self.postMessage((n={source:t.source,decrypted:r},i={},Object.keys(n).forEach(function(e){var t=n[e];("function"===ArrayBuffer.isView?ArrayBuffer.isView(t):t&&t.buffer instanceof ArrayBuffer)?i[e]={bytes:t.buffer,byteOffset:t.byteOffset,byteLength:t.byteLength}:i[e]=t}),i),[r.buffer])})}}))),sB=function(e){var t=e.default?"main":"alternative";return e.characteristics&&e.characteristics.indexOf("public.accessibility.describes-video")>=0&&(t="main-desc"),t},sU=function(e,t){e.abort(),e.pause(),t&&t.activePlaylistLoader&&(t.activePlaylistLoader.pause(),t.activePlaylistLoader=null)},sq=function(e,t){t.activePlaylistLoader=e,e.load()},sH={AUDIO:function(e,t){return function(){var r=t.segmentLoaders[e],n=t.mediaTypes[e],i=t.blacklistCurrentPlaylist;sU(r,n);var o=n.activeTrack(),u=n.activeGroup(),l=(u.filter(function(e){return e.default})[0]||u[0]).id,c=n.tracks[l];if(o!==c){for(var f in oF.log.warn("Problem encountered loading the alternate audio track.Switching back to default."),n.tracks)n.tracks[f].enabled=n.tracks[f]===c;n.onTrackChanged()}else i({message:"Problem encountered loading the default audio track."})}},SUBTITLES:function(e,t){return function(){var r=t.segmentLoaders[e],n=t.mediaTypes[e];oF.log.warn("Problem encountered loading the subtitle track.Disabling subtitle track."),sU(r,n);var i=n.activeTrack();i&&(i.mode="disabled"),n.onTrackChanged()}}},sV={AUDIO:function(e,t,r){if(t){var n=r.tech,i=r.requestOptions,o=r.segmentLoaders[e];t.on("loadedmetadata",function(){var e=t.media();o.playlist(e,i),(!n.paused()||e.endList&&"none"!==n.preload())&&o.load()}),t.on("loadedplaylist",function(){o.playlist(t.media(),i),n.paused()||o.load()}),t.on("error",sH[e](e,r))}},SUBTITLES:function(e,t,r){var n=r.tech,i=r.requestOptions,o=r.segmentLoaders[e],u=r.mediaTypes[e];t.on("loadedmetadata",function(){var e=t.media();o.playlist(e,i),o.track(u.activeTrack()),(!n.paused()||e.endList&&"none"!==n.preload())&&o.load()}),t.on("loadedplaylist",function(){o.playlist(t.media(),i),n.paused()||o.load()}),t.on("error",sH[e](e,r))}},sG={AUDIO:function(e,t){var r=t.vhs,n=t.sourceType,i=t.segmentLoaders[e],o=t.requestOptions,u=t.master.mediaGroups,l=t.mediaTypes[e],c=l.groups,f=l.tracks,d=l.logger_,h=t.masterPlaylistLoader,p=ai(h.master);for(var m in u[e]&&0!==Object.keys(u[e]).length||(u[e]={main:{default:{default:!0}}},p&&(u[e].main.default.playlists=h.master.playlists)),u[e])for(var g in c[m]||(c[m]=[]),u[e][m]){var y=u[e][m][g],v=void 0;if(p?(d("AUDIO group '"+m+"' label '"+g+"' is a master playlist"),y.isMasterPlaylist=!0,v=null):v="vhs-json"===n&&y.playlists?new a_(y.playlists[0],r,o):y.resolvedUri?new a_(y.resolvedUri,r,o):y.playlists&&"dash"===n?new aU(y.playlists[0],r,o,h):null,y=oF.mergeOptions({id:g,playlistLoader:v},y),sV[e](e,y.playlistLoader,t),c[m].push(y),void 0===f[g]){var b=new oF.AudioTrack({id:g,kind:sB(y),enabled:!1,language:y.language,default:y.default,label:g});f[g]=b}}i.on("error",sH[e](e,t))},SUBTITLES:function(e,t){var r=t.tech,n=t.vhs,i=t.sourceType,o=t.segmentLoaders[e],u=t.requestOptions,l=t.master.mediaGroups,c=t.mediaTypes[e],f=c.groups,d=c.tracks,h=t.masterPlaylistLoader;for(var p in l[e])for(var m in f[p]||(f[p]=[]),l[e][p])if(!l[e][p][m].forced){var g=l[e][p][m],y=void 0;if("hls"===i)y=new a_(g.resolvedUri,n,u);else if("dash"===i){if(!g.playlists.filter(function(e){return e.excludeUntil!==1/0}).length)return;y=new aU(g.playlists[0],n,u,h)}else"vhs-json"===i&&(y=new a_(g.playlists?g.playlists[0]:g.resolvedUri,n,u));if(g=oF.mergeOptions({id:m,playlistLoader:y},g),sV[e](e,g.playlistLoader,t),f[p].push(g),void 0===d[m]){var v=r.addRemoteTextTrack({id:m,kind:"subtitles",default:g.default&&g.autoselect,language:g.language,label:m},!1).track;d[m]=v}}o.on("error",sH[e](e,t))},"CLOSED-CAPTIONS":function(e,t){var r=t.tech,n=t.master.mediaGroups,i=t.mediaTypes[e],o=i.groups,u=i.tracks;for(var l in n[e])for(var c in o[l]||(o[l]=[]),n[e][l]){var f=n[e][l][c];if(/^(?:CC|SERVICE)/.test(f.instreamId)){var d=r.options_.vhs&&r.options_.vhs.captionServices||{},h={label:c,language:f.language,instreamId:f.instreamId,default:f.default&&f.autoselect};if(d[h.instreamId]&&(h=oF.mergeOptions(h,d[h.instreamId])),void 0===h.default&&delete h.default,o[l].push(oF.mergeOptions({id:c},f)),void 0===u[c]){var p=r.addRemoteTextTrack({id:h.instreamId,kind:"captions",default:h.default,language:h.language,label:h.label},!1).track;u[c]=p}}}}},sY=function e(t,r){for(var n=0;n<t.length;n++)if(ar(r,t[n])||t[n].playlists&&e(t[n].playlists,r))return!0;return!1},sz={AUDIO:function(e,t){return function(){var r=t.mediaTypes[e].tracks;for(var n in r)if(r[n].enabled)return r[n];return null}},SUBTITLES:function(e,t){return function(){var r=t.mediaTypes[e].tracks;for(var n in r)if("showing"===r[n].mode||"hidden"===r[n].mode)return r[n];return null}}},sK=["mediaRequests","mediaRequestsAborted","mediaRequestsTimedout","mediaRequestsErrored","mediaTransferDuration","mediaBytesTransferred","mediaAppends"],sW=function(e){return this.audioSegmentLoader_[e]+this.mainSegmentLoader_[e]},sX=function(e){function t(t){n=e.call(this)||this;var r,n,o=t.src,u=t.handleManifestRedirects,l=t.withCredentials,c=t.tech,f=t.bandwidth,d=t.externVhs,p=t.useCueTags,m=t.blacklistDuration,g=t.enableLowInitialPlaylist,y=t.sourceType,v=t.cacheEncryptionKeys,b=t.experimentalBufferBasedABR,_=t.experimentalLeastPixelDiffSelector,T=t.captionServices;if(!o)throw Error("A non-empty playlist URL or JSON manifest string is required");var E=t.maxPlaylistRetries;null==E&&(E=1/0),sy=d,n.experimentalBufferBasedABR=!!b,n.experimentalLeastPixelDiffSelector=!!_,n.withCredentials=l,n.tech_=c,n.vhs_=c.vhs,n.sourceType_=y,n.useCueTags_=p,n.blacklistDuration=m,n.maxPlaylistRetries=E,n.enableLowInitialPlaylist=g,n.useCueTags_&&(n.cueTagsTrack_=n.tech_.addTextTrack("metadata","ad-cues"),n.cueTagsTrack_.inBandMetadataTrackDispatchType=""),n.requestOptions_={withCredentials:l,handleManifestRedirects:u,maxPlaylistRetries:E,timeout:null},n.on("error",n.pauseLoading),n.mediaTypes_=(r={},["AUDIO","SUBTITLES","CLOSED-CAPTIONS"].forEach(function(e){r[e]={groups:{},tracks:{},activePlaylistLoader:null,activeGroup:sg,activeTrack:sg,getActiveGroup:sg,onGroupChanged:sg,onTrackChanged:sg,lastTrack_:null,logger_:oH("MediaGroups["+e+"]")}}),r),n.mediaSource=new(i()).MediaSource,n.handleDurationChange_=n.handleDurationChange_.bind(h(n)),n.handleSourceOpen_=n.handleSourceOpen_.bind(h(n)),n.handleSourceEnded_=n.handleSourceEnded_.bind(h(n)),n.mediaSource.addEventListener("durationchange",n.handleDurationChange_),n.mediaSource.addEventListener("sourceopen",n.handleSourceOpen_),n.mediaSource.addEventListener("sourceended",n.handleSourceEnded_),n.seekable_=oF.createTimeRanges(),n.hasPlayed_=!1,n.syncController_=new sj(t),n.segmentMetadataTrack_=c.addRemoteTextTrack({kind:"metadata",label:"segment-metadata"},!1).track,n.decrypter_=new sF,n.sourceUpdater_=new sR(n.mediaSource),n.inbandTextTracks_={},n.timelineChangeController_=new sM;var S={vhs:n.vhs_,parse708captions:t.parse708captions,useDtsForTimestampOffset:t.useDtsForTimestampOffset,captionServices:T,mediaSource:n.mediaSource,currentTime:n.tech_.currentTime.bind(n.tech_),seekable:function(){return n.seekable()},seeking:function(){return n.tech_.seeking()},duration:function(){return n.duration()},hasPlayed:function(){return n.hasPlayed_},goalBufferLength:function(){return n.goalBufferLength()},bandwidth:f,syncController:n.syncController_,decrypter:n.decrypter_,sourceType:n.sourceType_,inbandTextTracks:n.inbandTextTracks_,cacheEncryptionKeys:v,sourceUpdater:n.sourceUpdater_,timelineChangeController:n.timelineChangeController_,experimentalExactManifestTimings:t.experimentalExactManifestTimings};n.masterPlaylistLoader_="dash"===n.sourceType_?new aU(o,n.vhs_,n.requestOptions_):new a_(o,n.vhs_,n.requestOptions_),n.setupMasterPlaylistLoaderListeners_(),n.mainSegmentLoader_=new sm(oF.mergeOptions(S,{segmentMetadataTrack:n.segmentMetadataTrack_,loaderType:"main"}),t),n.audioSegmentLoader_=new sm(oF.mergeOptions(S,{loaderType:"audio"}),t),n.subtitleSegmentLoader_=new sN(oF.mergeOptions(S,{loaderType:"vtt",featuresNativeTextTracks:n.tech_.featuresNativeTextTracks,loadVttJs:function(){return new Promise(function(e,t){function r(){c.off("vttjserror",n),e()}function n(){c.off("vttjsloaded",r),t()}c.one("vttjsloaded",r),c.one("vttjserror",n),c.addWebVttScript_()})}}),t),n.setupSegmentLoaderListeners_(),n.experimentalBufferBasedABR&&(n.masterPlaylistLoader_.one("loadedplaylist",function(){return n.startABRTimer_()}),n.tech_.on("pause",function(){return n.stopABRTimer_()}),n.tech_.on("play",function(){return n.startABRTimer_()})),sK.forEach(function(e){n[e+"_"]=sW.bind(h(n),e)}),n.logger_=oH("MPC"),n.triggeredFmp4Usage=!1,"none"===n.tech_.preload()?(n.loadOnPlay_=function(){n.loadOnPlay_=null,n.masterPlaylistLoader_.load()},n.tech_.one("play",n.loadOnPlay_)):n.masterPlaylistLoader_.load(),n.timeToLoadedData__=-1,n.mainAppendsToLoadedData__=-1,n.audioAppendsToLoadedData__=-1;var w="none"===n.tech_.preload()?"play":"loadstart";return n.tech_.one(w,function(){var e=Date.now();n.tech_.one("loadeddata",function(){n.timeToLoadedData__=Date.now()-e,n.mainAppendsToLoadedData__=n.mainSegmentLoader_.mediaAppends,n.audioAppendsToLoadedData__=n.audioSegmentLoader_.mediaAppends})}),n}m(t,e);var r=t.prototype;return r.mainAppendsToLoadedData_=function(){return this.mainAppendsToLoadedData__},r.audioAppendsToLoadedData_=function(){return this.audioAppendsToLoadedData__},r.appendsToLoadedData_=function(){var e=this.mainAppendsToLoadedData_(),t=this.audioAppendsToLoadedData_();return -1===e||-1===t?-1:e+t},r.timeToLoadedData_=function(){return this.timeToLoadedData__},r.checkABR_=function(e){void 0===e&&(e="abr");var t=this.selectPlaylist();t&&this.shouldSwitchToMedia_(t)&&this.switchMedia_(t,e)},r.switchMedia_=function(e,t,r){var n=this.media(),i=n&&(n.id||n.uri),o=e.id||e.uri;i&&i!==o&&(this.logger_("switch media "+i+" -> "+o+" from "+t),this.tech_.trigger({type:"usage",name:"vhs-rendition-change-"+t})),this.masterPlaylistLoader_.media(e,r)},r.startABRTimer_=function(){var e=this;this.stopABRTimer_(),this.abrTimer_=i().setInterval(function(){return e.checkABR_()},250)},r.stopABRTimer_=function(){this.tech_.scrubbing&&this.tech_.scrubbing()||(i().clearInterval(this.abrTimer_),this.abrTimer_=null)},r.getAudioTrackPlaylists_=function(){var e=this.master(),t=e&&e.playlists||[];if(!e||!e.mediaGroups||!e.mediaGroups.AUDIO)return t;var r,n=e.mediaGroups.AUDIO,i=Object.keys(n);if(Object.keys(this.mediaTypes_.AUDIO.groups).length)r=this.mediaTypes_.AUDIO.activeTrack();else{var o=n.main||i.length&&n[i[0]];for(var u in o)if(o[u].default){r={label:u};break}}if(!r)return t;var l=[];for(var c in n)if(n[c][r.label]){var f=n[c][r.label];if(f.playlists&&f.playlists.length)l.push.apply(l,f.playlists);else if(f.uri)l.push(f);else if(e.playlists.length)for(var d=0;d<e.playlists.length;d++){var h=e.playlists[d];h.attributes&&h.attributes.AUDIO&&h.attributes.AUDIO===c&&l.push(h)}}return l.length?l:t},r.setupMasterPlaylistLoaderListeners_=function(){var e=this;this.masterPlaylistLoader_.on("loadedmetadata",function(){var t=e.masterPlaylistLoader_.media(),r=1.5*t.targetDuration*1e3;at(e.masterPlaylistLoader_.master,e.masterPlaylistLoader_.media())?e.requestOptions_.timeout=0:e.requestOptions_.timeout=r,t.endList&&"none"!==e.tech_.preload()&&(e.mainSegmentLoader_.playlist(t,e.requestOptions_),e.mainSegmentLoader_.load()),function(e){["AUDIO","SUBTITLES","CLOSED-CAPTIONS"].forEach(function(t){sG[t](t,e)});var t=e.mediaTypes,r=e.masterPlaylistLoader,n=e.tech,i=e.vhs,o=e.segmentLoaders,u=o.AUDIO,l=o.main;["AUDIO","SUBTITLES"].forEach(function(r){var n;t[r].activeGroup=function(t){var n=e.masterPlaylistLoader,i=e.mediaTypes[r].groups,o=n.media();if(!o)return null;var u=null;o.attributes[r]&&(u=i[o.attributes[r]]);var l=Object.keys(i);if(!u){if("AUDIO"===r&&l.length>1&&ai(e.master))for(var c=0;c<l.length;c++){var f=i[l[c]];if(sY(f,o)){u=f;break}}else i.main?u=i.main:1===l.length&&(u=i[l[0]])}return void 0===t?u:null!==t&&u&&u.filter(function(e){return e.id===t.id})[0]||null},t[r].activeTrack=sz[r](r,e),t[r].onGroupChanged=function(){var t=e.segmentLoaders,n=t[r],i=t.main,o=e.mediaTypes[r],u=o.activeTrack(),l=o.getActiveGroup(),c=o.activePlaylistLoader,f=o.lastGroup_;l&&f&&l.id===f.id||(o.lastGroup_=l,o.lastTrack_=u,sU(n,o),l&&!l.isMasterPlaylist&&(l.playlistLoader?(n.resyncLoader(),sq(l.playlistLoader,o)):c&&i.resetEverything()))},t[r].onGroupChanging=function(){var t=e.segmentLoaders[r];e.mediaTypes[r].lastGroup_=null,t.abort(),t.pause()},t[r].onTrackChanged=function(){var t=e.masterPlaylistLoader,n=e.segmentLoaders,i=n[r],o=n.main,u=e.mediaTypes[r],l=u.activeTrack(),c=u.getActiveGroup(),f=u.activePlaylistLoader,d=u.lastTrack_;if((!d||!l||d.id!==l.id)&&(u.lastGroup_=c,u.lastTrack_=l,sU(i,u),c)){if(c.isMasterPlaylist){if(!l||!d||l.id===d.id)return;var h=e.vhs.masterPlaylistController_,p=h.selectPlaylist();if(h.media()===p)return;return u.logger_("track change. Switching master audio from "+d.id+" to "+l.id),t.pause(),o.resetEverything(),void h.fastQualityChange_(p)}if("AUDIO"===r){if(!c.playlistLoader)return o.setAudio(!0),void o.resetEverything();i.setAudio(!0),o.setAudio(!1)}f!==c.playlistLoader&&(i.track&&i.track(l),i.resetEverything()),sq(c.playlistLoader,u)}},t[r].getActiveGroup=(n=e.mediaTypes,function(){var e=n[r].activeTrack();return e?n[r].activeGroup(e):null})});var c=t.AUDIO.activeGroup();if(c){var f=(c.filter(function(e){return e.default})[0]||c[0]).id;t.AUDIO.tracks[f].enabled=!0,t.AUDIO.onGroupChanged(),t.AUDIO.onTrackChanged(),t.AUDIO.getActiveGroup().playlistLoader?(l.setAudio(!1),u.setAudio(!0)):l.setAudio(!0)}r.on("mediachange",function(){["AUDIO","SUBTITLES"].forEach(function(e){return t[e].onGroupChanged()})}),r.on("mediachanging",function(){["AUDIO","SUBTITLES"].forEach(function(e){return t[e].onGroupChanging()})});var d=function(){t.AUDIO.onTrackChanged(),n.trigger({type:"usage",name:"vhs-audio-change"}),n.trigger({type:"usage",name:"hls-audio-change"})};for(var h in n.audioTracks().addEventListener("change",d),n.remoteTextTracks().addEventListener("change",t.SUBTITLES.onTrackChanged),i.on("dispose",function(){n.audioTracks().removeEventListener("change",d),n.remoteTextTracks().removeEventListener("change",t.SUBTITLES.onTrackChanged)}),n.clearTracks("audio"),t.AUDIO.tracks)n.audioTracks().addTrack(t.AUDIO.tracks[h])}({sourceType:e.sourceType_,segmentLoaders:{AUDIO:e.audioSegmentLoader_,SUBTITLES:e.subtitleSegmentLoader_,main:e.mainSegmentLoader_},tech:e.tech_,requestOptions:e.requestOptions_,masterPlaylistLoader:e.masterPlaylistLoader_,vhs:e.vhs_,master:e.master(),mediaTypes:e.mediaTypes_,blacklistCurrentPlaylist:e.blacklistCurrentPlaylist.bind(e)}),e.triggerPresenceUsage_(e.master(),t),e.setupFirstPlay(),!e.mediaTypes_.AUDIO.activePlaylistLoader||e.mediaTypes_.AUDIO.activePlaylistLoader.media()?e.trigger("selectedinitialmedia"):e.mediaTypes_.AUDIO.activePlaylistLoader.one("loadedmetadata",function(){e.trigger("selectedinitialmedia")})}),this.masterPlaylistLoader_.on("loadedplaylist",function(){e.loadOnPlay_&&e.tech_.off("play",e.loadOnPlay_);var t,r=e.masterPlaylistLoader_.media();if(!r){if(e.excludeUnsupportedVariants_(),e.enableLowInitialPlaylist&&(t=e.selectInitialPlaylist()),t||(t=e.selectPlaylist()),!t||!e.shouldSwitchToMedia_(t)||(e.initialMedia_=t,e.switchMedia_(e.initialMedia_,"initial"),"vhs-json"!==e.sourceType_||!e.initialMedia_.segments))return;r=e.initialMedia_}e.handleUpdatedMediaPlaylist(r)}),this.masterPlaylistLoader_.on("error",function(){e.blacklistCurrentPlaylist(e.masterPlaylistLoader_.error)}),this.masterPlaylistLoader_.on("mediachanging",function(){e.mainSegmentLoader_.abort(),e.mainSegmentLoader_.pause()}),this.masterPlaylistLoader_.on("mediachange",function(){var t=e.masterPlaylistLoader_.media(),r=1.5*t.targetDuration*1e3;at(e.masterPlaylistLoader_.master,e.masterPlaylistLoader_.media())?e.requestOptions_.timeout=0:e.requestOptions_.timeout=r,e.masterPlaylistLoader_.load(),e.mainSegmentLoader_.playlist(t,e.requestOptions_),e.mainSegmentLoader_.load(),e.tech_.trigger({type:"mediachange",bubbles:!0})}),this.masterPlaylistLoader_.on("playlistunchanged",function(){var t=e.masterPlaylistLoader_.media();"playlist-unchanged"!==t.lastExcludeReason_&&e.stuckAtPlaylistEnd_(t)&&(e.blacklistCurrentPlaylist({message:"Playlist no longer updating.",reason:"playlist-unchanged"}),e.tech_.trigger("playliststuck"))}),this.masterPlaylistLoader_.on("renditiondisabled",function(){e.tech_.trigger({type:"usage",name:"vhs-rendition-disabled"}),e.tech_.trigger({type:"usage",name:"hls-rendition-disabled"})}),this.masterPlaylistLoader_.on("renditionenabled",function(){e.tech_.trigger({type:"usage",name:"vhs-rendition-enabled"}),e.tech_.trigger({type:"usage",name:"hls-rendition-enabled"})})},r.handleUpdatedMediaPlaylist=function(e){this.useCueTags_&&this.updateAdCues_(e),this.mainSegmentLoader_.playlist(e,this.requestOptions_),this.updateDuration(!e.endList),this.tech_.paused()||(this.mainSegmentLoader_.load(),this.audioSegmentLoader_&&this.audioSegmentLoader_.load())},r.triggerPresenceUsage_=function(e,t){var r=e.mediaGroups||{},n=!0,i=Object.keys(r.AUDIO);for(var o in r.AUDIO)for(var u in r.AUDIO[o])r.AUDIO[o][u].uri||(n=!1);n&&(this.tech_.trigger({type:"usage",name:"vhs-demuxed"}),this.tech_.trigger({type:"usage",name:"hls-demuxed"})),Object.keys(r.SUBTITLES).length&&(this.tech_.trigger({type:"usage",name:"vhs-webvtt"}),this.tech_.trigger({type:"usage",name:"hls-webvtt"})),sy.Playlist.isAes(t)&&(this.tech_.trigger({type:"usage",name:"vhs-aes"}),this.tech_.trigger({type:"usage",name:"hls-aes"})),i.length&&Object.keys(r.AUDIO[i[0]]).length>1&&(this.tech_.trigger({type:"usage",name:"vhs-alternate-audio"}),this.tech_.trigger({type:"usage",name:"hls-alternate-audio"})),this.useCueTags_&&(this.tech_.trigger({type:"usage",name:"vhs-playlist-cue-tags"}),this.tech_.trigger({type:"usage",name:"hls-playlist-cue-tags"}))},r.shouldSwitchToMedia_=function(e){var t=this.masterPlaylistLoader_.media()||this.masterPlaylistLoader_.pendingMedia_,r=this.tech_.currentTime(),n=this.bufferLowWaterLine(),i=this.bufferHighWaterLine();return function(e){var t=e.currentPlaylist,r=e.buffered,n=e.currentTime,i=e.nextPlaylist,o=e.bufferLowWaterLine,u=e.bufferHighWaterLine,l=e.duration,c=e.experimentalBufferBasedABR,f=e.log;if(!i)return oF.log.warn("We received no playlist to switch to. Please check your stream."),!1;var d="allowing switch "+(t&&t.id||"null")+" -> "+i.id;if(!t)return f(d+" as current playlist is not set"),!0;if(i.id===t.id)return!1;var h=!!oY(r,n).length;if(!t.endList)return h||"number"!=typeof t.partTargetDuration?(f(d+" as current playlist is live"),!0):(f("not "+d+" as current playlist is live llhls, but currentTime isn't in buffered."),!1);var p=oQ(r,n),m=c?aq.EXPERIMENTAL_MAX_BUFFER_LOW_WATER_LINE:aq.MAX_BUFFER_LOW_WATER_LINE;if(l<m)return f(d+" as duration < max low water line ("+l+" < "+m+")"),!0;var g=i.attributes.BANDWIDTH,y=t.attributes.BANDWIDTH;if(g<y&&(!c||p<u)){var v=d+" as next bandwidth < current bandwidth ("+g+" < "+y+")";return c&&(v+=" and forwardBuffer < bufferHighWaterLine ("+p+" < "+u+")"),f(v),!0}if((!c||g>y)&&p>=o){var b=d+" as forwardBuffer >= bufferLowWaterLine ("+p+" >= "+o+")";return c&&(b+=" and next bandwidth > current bandwidth ("+g+" > "+y+")"),f(b),!0}return f("not "+d+" as no switching criteria met"),!1}({buffered:this.tech_.buffered(),currentTime:r,currentPlaylist:t,nextPlaylist:e,bufferLowWaterLine:n,bufferHighWaterLine:i,duration:this.duration(),experimentalBufferBasedABR:this.experimentalBufferBasedABR,log:this.logger_})},r.setupSegmentLoaderListeners_=function(){var e=this;this.mainSegmentLoader_.on("bandwidthupdate",function(){e.checkABR_("bandwidthupdate"),e.tech_.trigger("bandwidthupdate")}),this.mainSegmentLoader_.on("timeout",function(){e.experimentalBufferBasedABR&&e.mainSegmentLoader_.load()}),this.experimentalBufferBasedABR||this.mainSegmentLoader_.on("progress",function(){e.trigger("progress")}),this.mainSegmentLoader_.on("error",function(){e.blacklistCurrentPlaylist(e.mainSegmentLoader_.error())}),this.mainSegmentLoader_.on("appenderror",function(){e.error=e.mainSegmentLoader_.error_,e.trigger("error")}),this.mainSegmentLoader_.on("syncinfoupdate",function(){e.onSyncInfoUpdate_()}),this.mainSegmentLoader_.on("timestampoffset",function(){e.tech_.trigger({type:"usage",name:"vhs-timestamp-offset"}),e.tech_.trigger({type:"usage",name:"hls-timestamp-offset"})}),this.audioSegmentLoader_.on("syncinfoupdate",function(){e.onSyncInfoUpdate_()}),this.audioSegmentLoader_.on("appenderror",function(){e.error=e.audioSegmentLoader_.error_,e.trigger("error")}),this.mainSegmentLoader_.on("ended",function(){e.logger_("main segment loader ended"),e.onEndOfStream()}),this.mainSegmentLoader_.on("earlyabort",function(t){e.experimentalBufferBasedABR||(e.delegateLoaders_("all",["abort"]),e.blacklistCurrentPlaylist({message:"Aborted early because there isn't enough bandwidth to complete the request without rebuffering."},120))});var t=function(){if(!e.sourceUpdater_.hasCreatedSourceBuffers())return e.tryToCreateSourceBuffers_();var t=e.getCodecsOrExclude_();t&&e.sourceUpdater_.addOrChangeSourceBuffers(t)};this.mainSegmentLoader_.on("trackinfo",t),this.audioSegmentLoader_.on("trackinfo",t),this.mainSegmentLoader_.on("fmp4",function(){e.triggeredFmp4Usage||(e.tech_.trigger({type:"usage",name:"vhs-fmp4"}),e.tech_.trigger({type:"usage",name:"hls-fmp4"}),e.triggeredFmp4Usage=!0)}),this.audioSegmentLoader_.on("fmp4",function(){e.triggeredFmp4Usage||(e.tech_.trigger({type:"usage",name:"vhs-fmp4"}),e.tech_.trigger({type:"usage",name:"hls-fmp4"}),e.triggeredFmp4Usage=!0)}),this.audioSegmentLoader_.on("ended",function(){e.logger_("audioSegmentLoader ended"),e.onEndOfStream()})},r.mediaSecondsLoaded_=function(){return Math.max(this.audioSegmentLoader_.mediaSecondsLoaded+this.mainSegmentLoader_.mediaSecondsLoaded)},r.load=function(){this.mainSegmentLoader_.load(),this.mediaTypes_.AUDIO.activePlaylistLoader&&this.audioSegmentLoader_.load(),this.mediaTypes_.SUBTITLES.activePlaylistLoader&&this.subtitleSegmentLoader_.load()},r.smoothQualityChange_=function(e){void 0===e&&(e=this.selectPlaylist()),this.fastQualityChange_(e)},r.fastQualityChange_=function(e){var t=this;void 0===e&&(e=this.selectPlaylist()),e!==this.masterPlaylistLoader_.media()?(this.switchMedia_(e,"fast-quality"),this.mainSegmentLoader_.resetEverything(function(){oF.browser.IE_VERSION||oF.browser.IS_EDGE?t.tech_.setCurrentTime(t.tech_.currentTime()+.04):t.tech_.setCurrentTime(t.tech_.currentTime())})):this.logger_("skipping fastQualityChange because new media is same as old")},r.play=function(){if(!this.setupFirstPlay()){this.tech_.ended()&&this.tech_.setCurrentTime(0),this.hasPlayed_&&this.load();var e=this.tech_.seekable();return this.tech_.duration()===1/0&&this.tech_.currentTime()<e.start(0)?this.tech_.setCurrentTime(e.end(e.length-1)):void 0}},r.setupFirstPlay=function(){var e=this,t=this.masterPlaylistLoader_.media();if(!t||this.tech_.paused()||this.hasPlayed_)return!1;if(!t.endList){var r=this.seekable();if(!r.length)return!1;if(oF.browser.IE_VERSION&&0===this.tech_.readyState())return this.tech_.one("loadedmetadata",function(){e.trigger("firstplay"),e.tech_.setCurrentTime(r.end(0)),e.hasPlayed_=!0}),!1;this.trigger("firstplay"),this.tech_.setCurrentTime(r.end(0))}return this.hasPlayed_=!0,this.load(),!0},r.handleSourceOpen_=function(){if(this.tryToCreateSourceBuffers_(),this.tech_.autoplay()){var e=this.tech_.play();void 0!==e&&"function"==typeof e.then&&e.then(null,function(e){})}this.trigger("sourceopen")},r.handleSourceEnded_=function(){if(this.inbandTextTracks_.metadataTrack_){var e=this.inbandTextTracks_.metadataTrack_.cues;if(e&&e.length){var t=this.duration();e[e.length-1].endTime=isNaN(t)||Math.abs(t)===1/0?Number.MAX_VALUE:t}}},r.handleDurationChange_=function(){this.tech_.trigger("durationchange")},r.onEndOfStream=function(){var e=this.mainSegmentLoader_.ended_;if(this.mediaTypes_.AUDIO.activePlaylistLoader){var t=this.mainSegmentLoader_.getCurrentMediaInfo_();e=!t||t.hasVideo?e&&this.audioSegmentLoader_.ended_:this.audioSegmentLoader_.ended_}e&&(this.stopABRTimer_(),this.sourceUpdater_.endOfStream())},r.stuckAtPlaylistEnd_=function(e){if(!this.seekable().length)return!1;var t=this.syncController_.getExpiredTime(e,this.duration());if(null===t)return!1;var r=sy.Playlist.playlistEnd(e,t),n=this.tech_.currentTime(),i=this.tech_.buffered();if(!i.length)return r-n<=.1;var o=i.end(i.length-1);return o-n<=.1&&r-o<=.1},r.blacklistCurrentPlaylist=function(e,t){void 0===e&&(e={});var r=e.playlist||this.masterPlaylistLoader_.media();if(t=t||e.blacklistDuration||this.blacklistDuration,!r)return this.error=e,void("open"!==this.mediaSource.readyState?this.trigger("error"):this.sourceUpdater_.endOfStream("network"));r.playlistErrors_++;var n,i=this.masterPlaylistLoader_.master.playlists,o=i.filter(o7),u=1===o.length&&o[0]===r;if(1===i.length&&t!==1/0)return oF.log.warn("Problem encountered with playlist "+r.id+". Trying again since it is the only playlist."),this.tech_.trigger("retryplaylist"),this.masterPlaylistLoader_.load(u);if(u){var l=!1;i.forEach(function(e){if(e!==r){var t=e.excludeUntil;void 0!==t&&t!==1/0&&(l=!0,delete e.excludeUntil)}}),l&&(oF.log.warn("Removing other playlists from the exclusion list because the last rendition is about to be excluded."),this.tech_.trigger("retryplaylist"))}n=r.playlistErrors_>this.maxPlaylistRetries?1/0:Date.now()+1e3*t,r.excludeUntil=n,e.reason&&(r.lastExcludeReason_=e.reason),this.tech_.trigger("blacklistplaylist"),this.tech_.trigger({type:"usage",name:"vhs-rendition-blacklisted"}),this.tech_.trigger({type:"usage",name:"hls-rendition-blacklisted"});var c=this.selectPlaylist();if(!c)return this.error="Playback cannot continue. No available working or supported playlists.",void this.trigger("error");var f=e.internal?this.logger_:oF.log.warn,d=e.message?" "+e.message:"";f((e.internal?"Internal problem":"Problem")+" encountered with playlist "+r.id+"."+d+" Switching to playlist "+c.id+"."),c.attributes.AUDIO!==r.attributes.AUDIO&&this.delegateLoaders_("audio",["abort","pause"]),c.attributes.SUBTITLES!==r.attributes.SUBTITLES&&this.delegateLoaders_("subtitle",["abort","pause"]),this.delegateLoaders_("main",["abort","pause"]);var h=c.targetDuration/2*1e3||5e3,p="number"==typeof c.lastRequest&&Date.now()-c.lastRequest<=h;return this.switchMedia_(c,"exclude",u||p)},r.pauseLoading=function(){this.delegateLoaders_("all",["abort","pause"]),this.stopABRTimer_()},r.delegateLoaders_=function(e,t){var r=this,n=[],i="all"===e;(i||"main"===e)&&n.push(this.masterPlaylistLoader_);var o=[];(i||"audio"===e)&&o.push("AUDIO"),(i||"subtitle"===e)&&(o.push("CLOSED-CAPTIONS"),o.push("SUBTITLES")),o.forEach(function(e){var t=r.mediaTypes_[e]&&r.mediaTypes_[e].activePlaylistLoader;t&&n.push(t)}),["main","audio","subtitle"].forEach(function(t){var i=r[t+"SegmentLoader_"];i&&(e===t||"all"===e)&&n.push(i)}),n.forEach(function(e){return t.forEach(function(t){"function"==typeof e[t]&&e[t]()})})},r.setCurrentTime=function(e){var t=oY(this.tech_.buffered(),e);return this.masterPlaylistLoader_&&this.masterPlaylistLoader_.media()&&this.masterPlaylistLoader_.media().segments?t&&t.length?e:(this.mainSegmentLoader_.resetEverything(),this.mainSegmentLoader_.abort(),this.mediaTypes_.AUDIO.activePlaylistLoader&&(this.audioSegmentLoader_.resetEverything(),this.audioSegmentLoader_.abort()),this.mediaTypes_.SUBTITLES.activePlaylistLoader&&(this.subtitleSegmentLoader_.resetEverything(),this.subtitleSegmentLoader_.abort()),void this.load()):0},r.duration=function(){if(!this.masterPlaylistLoader_)return 0;var e=this.masterPlaylistLoader_.media();return e?e.endList?this.mediaSource?this.mediaSource.duration:sy.Playlist.duration(e):1/0:0},r.seekable=function(){return this.seekable_},r.onSyncInfoUpdate_=function(){var e;if(this.masterPlaylistLoader_){var t=this.masterPlaylistLoader_.media();if(t){var r=this.syncController_.getExpiredTime(t,this.duration());if(null!==r){var n,i,o=this.masterPlaylistLoader_.master,u=sy.Playlist.seekable(t,r,sy.Playlist.liveEdgeDelay(o,t));if(0!==u.length){if(this.mediaTypes_.AUDIO.activePlaylistLoader&&(t=this.mediaTypes_.AUDIO.activePlaylistLoader.media(),null===(r=this.syncController_.getExpiredTime(t,this.duration()))||0===(e=sy.Playlist.seekable(t,r,sy.Playlist.liveEdgeDelay(o,t))).length))return;this.seekable_&&this.seekable_.length&&(n=this.seekable_.end(0),i=this.seekable_.start(0)),e?e.start(0)>u.end(0)||u.start(0)>e.end(0)?this.seekable_=u:this.seekable_=oF.createTimeRanges([[e.start(0)>u.start(0)?e.start(0):u.start(0),e.end(0)<u.end(0)?e.end(0):u.end(0)]]):this.seekable_=u,this.seekable_&&this.seekable_.length&&this.seekable_.end(0)===n&&this.seekable_.start(0)===i||(this.logger_("seekable updated ["+oK(this.seekable_)+"]"),this.tech_.trigger("seekablechanged"))}}}}},r.updateDuration=function(e){if(this.updateDuration_&&(this.mediaSource.removeEventListener("sourceopen",this.updateDuration_),this.updateDuration_=null),"open"!==this.mediaSource.readyState)return this.updateDuration_=this.updateDuration.bind(this,e),void this.mediaSource.addEventListener("sourceopen",this.updateDuration_);if(e){var t=this.seekable();if(!t.length)return;(isNaN(this.mediaSource.duration)||this.mediaSource.duration<t.end(t.length-1))&&this.sourceUpdater_.setDuration(t.end(t.length-1))}else{var r=this.tech_.buffered(),n=sy.Playlist.duration(this.masterPlaylistLoader_.media());r.length>0&&(n=Math.max(n,r.end(r.length-1))),this.mediaSource.duration!==n&&this.sourceUpdater_.setDuration(n)}},r.dispose=function(){var e=this;this.trigger("dispose"),this.decrypter_.terminate(),this.masterPlaylistLoader_.dispose(),this.mainSegmentLoader_.dispose(),this.loadOnPlay_&&this.tech_.off("play",this.loadOnPlay_),["AUDIO","SUBTITLES"].forEach(function(t){var r=e.mediaTypes_[t].groups;for(var n in r)r[n].forEach(function(e){e.playlistLoader&&e.playlistLoader.dispose()})}),this.audioSegmentLoader_.dispose(),this.subtitleSegmentLoader_.dispose(),this.sourceUpdater_.dispose(),this.timelineChangeController_.dispose(),this.stopABRTimer_(),this.updateDuration_&&this.mediaSource.removeEventListener("sourceopen",this.updateDuration_),this.mediaSource.removeEventListener("durationchange",this.handleDurationChange_),this.mediaSource.removeEventListener("sourceopen",this.handleSourceOpen_),this.mediaSource.removeEventListener("sourceended",this.handleSourceEnded_),this.off()},r.master=function(){return this.masterPlaylistLoader_.master},r.media=function(){return this.masterPlaylistLoader_.media()||this.initialMedia_},r.areMediaTypesKnown_=function(){var e=!!this.mediaTypes_.AUDIO.activePlaylistLoader,t=!!this.mainSegmentLoader_.getCurrentMediaInfo_(),r=!e||!!this.audioSegmentLoader_.getCurrentMediaInfo_();return!(!t||!r)},r.getCodecsOrExclude_=function(){var e=this,t={main:this.mainSegmentLoader_.getCurrentMediaInfo_()||{},audio:this.audioSegmentLoader_.getCurrentMediaInfo_()||{}},r=this.mainSegmentLoader_.getPendingSegmentPlaylist()||this.media();t.video=t.main;var n=se(this.master(),r),i={},o=!!this.mediaTypes_.AUDIO.activePlaylistLoader;if(t.main.hasVideo&&(i.video=n.video||t.main.videoCodec||"avc1.4d400d"),t.main.isMuxed&&(i.video+=","+(n.audio||t.main.audioCodec||W)),(t.main.hasAudio&&!t.main.isMuxed||t.audio.hasAudio||o)&&(i.audio=n.audio||t.main.audioCodec||t.audio.audioCodec||W,t.audio.isFmp4=t.main.hasAudio&&!t.main.isMuxed?t.main.isFmp4:t.audio.isFmp4),i.audio||i.video){var u,l={};if(["video","audio"].forEach(function(e){if(i.hasOwnProperty(e)&&(r=t[e].isFmp4,n=i[e],!(r?z(n):K(n)))){var r,n,o=t[e].isFmp4?"browser":"muxer";l[o]=l[o]||[],l[o].push(i[e]),"audio"===e&&(u=o)}}),o&&u&&r.attributes.AUDIO){var c=r.attributes.AUDIO;this.master().playlists.forEach(function(e){(e.attributes&&e.attributes.AUDIO)===c&&e!==r&&(e.excludeUntil=1/0)}),this.logger_("excluding audio group "+c+" as "+u+' does not support codec(s): "'+i.audio+'"')}if(!Object.keys(l).length){if(this.sourceUpdater_.hasCreatedSourceBuffers()&&!this.sourceUpdater_.canChangeType()){var f=[];if(["video","audio"].forEach(function(t){var r=(V(e.sourceUpdater_.codecs[t]||"")[0]||{}).type,n=(V(i[t]||"")[0]||{}).type;r&&n&&r.toLowerCase()!==n.toLowerCase()&&f.push('"'+e.sourceUpdater_.codecs[t]+'" -> "'+i[t]+'"')}),f.length)return void this.blacklistCurrentPlaylist({playlist:r,message:"Codec switching not supported: "+f.join(", ")+".",blacklistDuration:1/0,internal:!0})}return i}var d=Object.keys(l).reduce(function(e,t){return e&&(e+=", "),e+(t+' does not support codec(s): "')+l[t].join(",")+'"'},"")+".";this.blacklistCurrentPlaylist({playlist:r,internal:!0,message:d,blacklistDuration:1/0})}else this.blacklistCurrentPlaylist({playlist:r,message:"Could not determine codecs for playlist.",blacklistDuration:1/0})},r.tryToCreateSourceBuffers_=function(){if("open"===this.mediaSource.readyState&&!this.sourceUpdater_.hasCreatedSourceBuffers()&&this.areMediaTypesKnown_()){var e=this.getCodecsOrExclude_();if(e){this.sourceUpdater_.createSourceBuffers(e);var t=[e.video,e.audio].filter(Boolean).join(",");this.excludeIncompatibleVariants_(t)}}},r.excludeUnsupportedVariants_=function(){var e=this,t=this.master().playlists,r=[];Object.keys(t).forEach(function(n){var i=t[n];if(-1===r.indexOf(i.id)){r.push(i.id);var o=se(e.master,i),u=[];!o.audio||K(o.audio)||z(o.audio)||u.push("audio codec "+o.audio),!o.video||K(o.video)||z(o.video)||u.push("video codec "+o.video),o.text&&"stpp.ttml.im1t"===o.text&&u.push("text codec "+o.text),u.length&&(i.excludeUntil=1/0,e.logger_("excluding "+i.id+" for unsupported: "+u.join(", ")))}})},r.excludeIncompatibleVariants_=function(e){var t=this,r=[],n=this.master().playlists,i=a9(V(e)),o=a7(i),u=i.video&&V(i.video)[0]||null,l=i.audio&&V(i.audio)[0]||null;Object.keys(n).forEach(function(e){var i=n[e];if(-1===r.indexOf(i.id)&&i.excludeUntil!==1/0){r.push(i.id);var c=[],f=se(t.masterPlaylistLoader_.master,i),d=a7(f);if(f.audio||f.video){if(d!==o&&c.push('codec count "'+d+'" !== "'+o+'"'),!t.sourceUpdater_.canChangeType()){var h=f.video&&V(f.video)[0]||null,p=f.audio&&V(f.audio)[0]||null;h&&u&&h.type.toLowerCase()!==u.type.toLowerCase()&&c.push('video codec "'+h.type+'" !== "'+u.type+'"'),p&&l&&p.type.toLowerCase()!==l.type.toLowerCase()&&c.push('audio codec "'+p.type+'" !== "'+l.type+'"')}c.length&&(i.excludeUntil=1/0,t.logger_("blacklisting "+i.id+": "+c.join(" && ")))}}})},r.updateAdCues_=function(e){var t=0,r=this.seekable();r.length&&(t=r.start(0)),function(e,t,r){if(void 0===r&&(r=0),e.segments)for(var n,o=r,u=0;u<e.segments.length;u++){var l=e.segments[u];if(n||(n=sL(t,o+l.duration/2)),n){if("cueIn"in l){n.endTime=o,n.adEndTime=o,o+=l.duration,n=null;continue}if(o<n.endTime){o+=l.duration;continue}n.endTime+=l.duration}else if("cueOut"in l&&((n=new(i()).VTTCue(o,o+l.duration,l.cueOut)).adStartTime=o,n.adEndTime=o+parseFloat(l.cueOut),t.addCue(n)),"cueOutCont"in l){var c=l.cueOutCont.split("/").map(parseFloat),f=c[0],d=c[1];(n=new(i()).VTTCue(o,o+l.duration,"")).adStartTime=o-f,n.adEndTime=n.adStartTime+d,t.addCue(n)}o+=l.duration}}(e,this.cueTagsTrack_,t)},r.goalBufferLength=function(){var e=this.tech_.currentTime(),t=aq.GOAL_BUFFER_LENGTH,r=aq.GOAL_BUFFER_LENGTH_RATE,n=Math.max(t,aq.MAX_GOAL_BUFFER_LENGTH);return Math.min(t+e*r,n)},r.bufferLowWaterLine=function(){var e=this.tech_.currentTime(),t=aq.BUFFER_LOW_WATER_LINE,r=aq.BUFFER_LOW_WATER_LINE_RATE,n=Math.max(t,aq.MAX_BUFFER_LOW_WATER_LINE),i=Math.max(t,aq.EXPERIMENTAL_MAX_BUFFER_LOW_WATER_LINE);return Math.min(t+e*r,this.experimentalBufferBasedABR?i:n)},r.bufferHighWaterLine=function(){return aq.BUFFER_HIGH_WATER_LINE},t}(oF.EventTarget),sQ=function(e,t,r){var n,i,o=e.masterPlaylistController_,u=o[(e.options_.smoothQualityChange?"smooth":"fast")+"QualityChange_"].bind(o);if(t.attributes){var l=t.attributes.RESOLUTION;this.width=l&&l.width,this.height=l&&l.height,this.bandwidth=t.attributes.BANDWIDTH,this.frameRate=t.attributes["FRAME-RATE"]}this.codecs=se(o.master(),t),this.playlist=t,this.id=r,this.enabled=(n=e.playlists,i=t.id,function(e){var t=n.master.playlists[i],r=o9(t),o=o7(t);return void 0===e?o:(e?delete t.disabled:t.disabled=!0,e===o||r||(u(),e?n.trigger("renditionenabled"):n.trigger("renditiondisabled")),e)})},s$=["seeking","seeked","pause","playing","error"],sJ=function(){function e(e){var t=this;this.masterPlaylistController_=e.masterPlaylistController,this.tech_=e.tech,this.seekable=e.seekable,this.allowSeeksWithinUnsafeLiveWindow=e.allowSeeksWithinUnsafeLiveWindow,this.liveRangeSafeTimeDelta=e.liveRangeSafeTimeDelta,this.media=e.media,this.consecutiveUpdates=0,this.lastRecordedTime=null,this.timer_=null,this.checkCurrentTimeTimeout_=null,this.logger_=oH("PlaybackWatcher"),this.logger_("initialize");var r=function(){return t.monitorCurrentTime_()},n=function(){return t.monitorCurrentTime_()},o=function(){return t.techWaiting_()},u=function(){return t.cancelTimer_()},l=this.masterPlaylistController_,c=["main","subtitle","audio"],f={};c.forEach(function(e){f[e]={reset:function(){return t.resetSegmentDownloads_(e)},updateend:function(){return t.checkSegmentDownloads_(e)}},l[e+"SegmentLoader_"].on("appendsdone",f[e].updateend),l[e+"SegmentLoader_"].on("playlistupdate",f[e].reset),t.tech_.on(["seeked","seeking"],f[e].reset)});var d=function(e){["main","audio"].forEach(function(r){l[r+"SegmentLoader_"][e]("appended",t.seekingAppendCheck_)})};this.seekingAppendCheck_=function(){t.fixesBadSeeks_()&&(t.consecutiveUpdates=0,t.lastRecordedTime=t.tech_.currentTime(),d("off"))},this.clearSeekingAppendCheck_=function(){return d("off")},this.watchForBadSeeking_=function(){t.clearSeekingAppendCheck_(),d("on")},this.tech_.on("seeked",this.clearSeekingAppendCheck_),this.tech_.on("seeking",this.watchForBadSeeking_),this.tech_.on("waiting",o),this.tech_.on(s$,u),this.tech_.on("canplay",n),this.tech_.one("play",r),this.dispose=function(){t.clearSeekingAppendCheck_(),t.logger_("dispose"),t.tech_.off("waiting",o),t.tech_.off(s$,u),t.tech_.off("canplay",n),t.tech_.off("play",r),t.tech_.off("seeking",t.watchForBadSeeking_),t.tech_.off("seeked",t.clearSeekingAppendCheck_),c.forEach(function(e){l[e+"SegmentLoader_"].off("appendsdone",f[e].updateend),l[e+"SegmentLoader_"].off("playlistupdate",f[e].reset),t.tech_.off(["seeked","seeking"],f[e].reset)}),t.checkCurrentTimeTimeout_&&i().clearTimeout(t.checkCurrentTimeTimeout_),t.cancelTimer_()}}var t=e.prototype;return t.monitorCurrentTime_=function(){this.checkCurrentTime_(),this.checkCurrentTimeTimeout_&&i().clearTimeout(this.checkCurrentTimeTimeout_),this.checkCurrentTimeTimeout_=i().setTimeout(this.monitorCurrentTime_.bind(this),250)},t.resetSegmentDownloads_=function(e){var t=this.masterPlaylistController_[e+"SegmentLoader_"];this[e+"StalledDownloads_"]>0&&this.logger_("resetting possible stalled download count for "+e+" loader"),this[e+"StalledDownloads_"]=0,this[e+"Buffered_"]=t.buffered_()},t.checkSegmentDownloads_=function(e){var t=this.masterPlaylistController_,r=t[e+"SegmentLoader_"],n=r.buffered_(),i=function(e,t){if(e===t)return!1;if(!e&&t||!t&&e||e.length!==t.length)return!0;for(var r=0;r<e.length;r++)if(e.start(r)!==t.start(r)||e.end(r)!==t.end(r))return!0;return!1}(this[e+"Buffered_"],n);this[e+"Buffered_"]=n,i?this.resetSegmentDownloads_(e):(this[e+"StalledDownloads_"]++,this.logger_("found #"+this[e+"StalledDownloads_"]+" "+e+" appends that did not increase buffer (possible stalled download)",{playlistId:r.playlist_&&r.playlist_.id,buffered:oW(n)}),this[e+"StalledDownloads_"]<10||(this.logger_(e+" loader stalled download exclusion"),this.resetSegmentDownloads_(e),this.tech_.trigger({type:"usage",name:"vhs-"+e+"-download-exclusion"}),"subtitle"!==e&&t.blacklistCurrentPlaylist({message:"Excessive "+e+" segment downloading detected."},1/0)))},t.checkCurrentTime_=function(){if(!this.tech_.paused()&&!this.tech_.seeking()){var e=this.tech_.currentTime(),t=this.tech_.buffered();if(this.lastRecordedTime===e&&(!t.length||e+.1>=t.end(t.length-1)))return this.techWaiting_();this.consecutiveUpdates>=5&&e===this.lastRecordedTime?(this.consecutiveUpdates++,this.waiting_()):e===this.lastRecordedTime?this.consecutiveUpdates++:(this.consecutiveUpdates=0,this.lastRecordedTime=e)}},t.cancelTimer_=function(){this.consecutiveUpdates=0,this.timer_&&(this.logger_("cancelTimer_"),clearTimeout(this.timer_)),this.timer_=null},t.fixesBadSeeks_=function(){if(!this.tech_.seeking())return!1;var e,t=this.seekable(),r=this.tech_.currentTime();if(this.afterSeekableWindow_(t,r,this.media(),this.allowSeeksWithinUnsafeLiveWindow)&&(e=t.end(t.length-1)),this.beforeSeekableWindow_(t,r)){var n=t.start(0);e=n+(n===t.end(0)?0:.1)}if(void 0!==e)return this.logger_("Trying to seek outside of seekable at time "+r+" with seekable range "+oK(t)+". Seeking to "+e+"."),this.tech_.setCurrentTime(e),!0;for(var i=this.masterPlaylistController_.sourceUpdater_,o=this.tech_.buffered(),u=i.audioBuffer?i.audioBuffered():null,l=i.videoBuffer?i.videoBuffered():null,c=this.media(),f=c.partTargetDuration?c.partTargetDuration:2*(c.targetDuration-oV),d=[u,l],h=0;h<d.length;h++)if(d[h]&&oQ(d[h],r)<f)return!1;var p=oz(o,r);return 0!==p.length&&(e=p.start(0)+.1,this.logger_("Buffered region starts ("+p.start(0)+")  just beyond seek point ("+r+"). Seeking to "+e+"."),this.tech_.setCurrentTime(e),!0)},t.waiting_=function(){if(!this.techWaiting_()){var e=this.tech_.currentTime(),t=oY(this.tech_.buffered(),e);return t.length&&e+3<=t.end(0)?(this.cancelTimer_(),this.tech_.setCurrentTime(e),this.logger_("Stopped at "+e+" while inside a buffered region ["+t.start(0)+" -> "+t.end(0)+"]. Attempting to resume playback by seeking to the current time."),this.tech_.trigger({type:"usage",name:"vhs-unknown-waiting"}),void this.tech_.trigger({type:"usage",name:"hls-unknown-waiting"})):void 0}},t.techWaiting_=function(){var e=this.seekable(),t=this.tech_.currentTime();if(this.tech_.seeking()||null!==this.timer_)return!0;if(this.beforeSeekableWindow_(e,t)){var r=e.end(e.length-1);return this.logger_("Fell out of live window at time "+t+". Seeking to live point (seekable end) "+r),this.cancelTimer_(),this.tech_.setCurrentTime(r),this.tech_.trigger({type:"usage",name:"vhs-live-resync"}),this.tech_.trigger({type:"usage",name:"hls-live-resync"}),!0}var n=this.tech_.vhs.masterPlaylistController_.sourceUpdater_,i=this.tech_.buffered();if(this.videoUnderflow_({audioBuffered:n.audioBuffered(),videoBuffered:n.videoBuffered(),currentTime:t}))return this.cancelTimer_(),this.tech_.setCurrentTime(t),this.tech_.trigger({type:"usage",name:"vhs-video-underflow"}),this.tech_.trigger({type:"usage",name:"hls-video-underflow"}),!0;var o=oz(i,t);if(o.length>0){var u=o.start(0)-t;return this.logger_("Stopped at "+t+", setting timer for "+u+", seeking to "+o.start(0)),this.cancelTimer_(),this.timer_=setTimeout(this.skipTheGap_.bind(this),1e3*u,t),!0}return!1},t.afterSeekableWindow_=function(e,t,r,n){if(void 0===n&&(n=!1),!e.length)return!1;var i=e.end(e.length-1)+.1;return!r.endList&&n&&(i=e.end(e.length-1)+3*r.targetDuration),t>i},t.beforeSeekableWindow_=function(e,t){return!!(e.length&&e.start(0)>0&&t<e.start(0)-this.liveRangeSafeTimeDelta)},t.videoUnderflow_=function(e){var t,r=e.videoBuffered,n=e.audioBuffered,i=e.currentTime;if(r){if(r.length&&n.length){var o=oY(r,i-3),u=oY(r,i),l=oY(n,i);l.length&&!u.length&&o.length&&(t={start:o.end(0),end:l.end(0)})}else oz(r,i).length||(t=this.gapFromVideoUnderflow_(r,i));return!!t&&(this.logger_("Encountered a gap in video from "+t.start+" to "+t.end+". Seeking to current time "+i),!0)}},t.skipTheGap_=function(e){var t=this.tech_.buffered(),r=this.tech_.currentTime(),n=oz(t,r);this.cancelTimer_(),0!==n.length&&r===e&&(this.logger_("skipTheGap_:","currentTime:",r,"scheduled currentTime:",e,"nextRange start:",n.start(0)),this.tech_.setCurrentTime(n.start(0)+oV),this.tech_.trigger({type:"usage",name:"vhs-gap-skip"}),this.tech_.trigger({type:"usage",name:"hls-gap-skip"}))},t.gapFromVideoUnderflow_=function(e,t){for(var r=function(e){if(e.length<2)return oF.createTimeRanges();for(var t=[],r=1;r<e.length;r++){var n=e.end(r-1),i=e.start(r);t.push([n,i])}return oF.createTimeRanges(t)}(e),n=0;n<r.length;n++){var i=r.start(n),o=r.end(n);if(t-i<4&&t-i>2)return{start:i,end:o}}return null},e}(),sZ={errorInterval:30,getSource:function(e){return e(this.tech({IWillNotUseThisInPlugins:!0}).currentSource_||this.currentSource())}},s0=function e(t,r){var n=0,i=0,o=oF.mergeOptions(sZ,r);t.ready(function(){t.trigger({type:"usage",name:"vhs-error-reload-initialized"}),t.trigger({type:"usage",name:"hls-error-reload-initialized"})});var u=function(){i&&t.currentTime(i)},l=function(e){null!=e&&(i=t.duration()!==1/0&&t.currentTime()||0,t.one("loadedmetadata",u),t.src(e),t.trigger({type:"usage",name:"vhs-error-reload"}),t.trigger({type:"usage",name:"hls-error-reload"}),t.play())},c=function(){return Date.now()-n<1e3*o.errorInterval?(t.trigger({type:"usage",name:"vhs-error-reload-canceled"}),void t.trigger({type:"usage",name:"hls-error-reload-canceled"})):o.getSource&&"function"==typeof o.getSource?(n=Date.now(),o.getSource.call(t,l)):void oF.log.error("ERROR: reloadSourceOnError - The option getSource must be a function!")},f=function e(){t.off("loadedmetadata",u),t.off("error",c),t.off("dispose",e)};t.on("error",c),t.on("dispose",f),t.reloadSourceOnError=function(r){f(),e(t,r)}},s1="2.16.2",s2={PlaylistLoader:a_,Playlist:ao,utils:aD,STANDARD_PLAYLIST_SELECTOR:ss,INITIAL_PLAYLIST_SELECTOR:function(){var e=this,t=this.playlists.master.playlists.filter(ao.isEnabled);return si(t,function(e,t){return so(e,t)}),t.filter(function(t){return!!se(e.playlists.master,t).video})[0]||null},lastBandwidthSelector:ss,movingAverageBandwidthSelector:function(e){var t=-1,r=-1;if(e<0||e>1)throw Error("Moving average bandwidth decay must be between 0 and 1.");return function(){var n=this.useDevicePixelRatio&&i().devicePixelRatio||1;return t<0&&(t=this.systemBandwidth,r=this.systemBandwidth),this.systemBandwidth>0&&this.systemBandwidth!==r&&(t=e*this.systemBandwidth+(1-e)*t,r=this.systemBandwidth),sa(this.playlists.master,t,parseInt(sn(this.tech_.el(),"width"),10)*n,parseInt(sn(this.tech_.el(),"height"),10)*n,this.limitRenditionByPlayerDimensions,this.masterPlaylistController_)}},comparePlaylistBandwidth:so,comparePlaylistResolution:function(e,t){var r,n;return e.attributes.RESOLUTION&&e.attributes.RESOLUTION.width&&(r=e.attributes.RESOLUTION.width),r=r||i().Number.MAX_VALUE,t.attributes.RESOLUTION&&t.attributes.RESOLUTION.width&&(n=t.attributes.RESOLUTION.width),r===(n=n||i().Number.MAX_VALUE)&&e.attributes.BANDWIDTH&&t.attributes.BANDWIDTH?e.attributes.BANDWIDTH-t.attributes.BANDWIDTH:r-n},xhr:aw()};Object.keys(aq).forEach(function(e){Object.defineProperty(s2,e,{get:function(){return oF.log.warn("using Vhs."+e+" is UNSAFE be sure you know what you are doing"),aq[e]},set:function(t){oF.log.warn("using Vhs."+e+" is UNSAFE be sure you know what you are doing"),"number"!=typeof t||t<0?oF.log.warn("value of Vhs."+e+" must be greater than or equal to 0"):aq[e]=t}})});var s3="videojs-vhs",s4=function(e,t){for(var r=t.media(),n=-1,i=0;i<e.length;i++)if(e[i].id===r.id){n=i;break}e.selectedIndex_=n,e.trigger({selectedIndex:n,type:"change"})};s2.canPlaySource=function(){return oF.log.warn("HLS is no longer a tech. Please remove it from your player's techOrder.")};var s6=function(){if(!i().localStorage)return null;var e=i().localStorage.getItem(s3);if(!e)return null;try{return JSON.parse(e)}catch(e){return null}};s2.supportsNativeHls=function(){if(!u()||!u().createElement)return!1;var e=u().createElement("video");return!!oF.getTech("Html5").isSupported()&&["application/vnd.apple.mpegurl","audio/mpegurl","audio/x-mpegurl","application/x-mpegurl","video/x-mpegurl","video/mpegurl","application/mpegurl"].some(function(t){return/maybe|probably/i.test(e.canPlayType(t))})}(),s2.supportsNativeDash=!!(u()&&u().createElement&&oF.getTech("Html5").isSupported())&&/maybe|probably/i.test(u().createElement("video").canPlayType("application/dash+xml")),s2.supportsTypeNatively=function(e){return"hls"===e?s2.supportsNativeHls:"dash"===e&&s2.supportsNativeDash},s2.isSupported=function(){return oF.log.warn("HLS is no longer a tech. Please remove it from your player's techOrder.")};var s8=function(e){function t(t,r,n){var i;if(i=e.call(this,r,oF.mergeOptions(n.hls,n.vhs))||this,n.hls&&Object.keys(n.hls).length&&oF.log.warn("Using hls options is deprecated. Please rename `hls` to `vhs` in your options object."),"number"==typeof n.initialBandwidth&&(i.options_.bandwidth=n.initialBandwidth),i.logger_=oH("VhsHandler"),r.options_&&r.options_.playerId){var o=oF(r.options_.playerId);o.hasOwnProperty("hls")||Object.defineProperty(o,"hls",{get:function(){return oF.log.warn("player.hls is deprecated. Use player.tech().vhs instead."),r.trigger({type:"usage",name:"hls-player-access"}),h(i)},configurable:!0}),o.hasOwnProperty("vhs")||Object.defineProperty(o,"vhs",{get:function(){return oF.log.warn("player.vhs is deprecated. Use player.tech().vhs instead."),r.trigger({type:"usage",name:"vhs-player-access"}),h(i)},configurable:!0}),o.hasOwnProperty("dash")||Object.defineProperty(o,"dash",{get:function(){return oF.log.warn("player.dash is deprecated. Use player.tech().vhs instead."),h(i)},configurable:!0}),i.player_=o}if(i.tech_=r,i.source_=t,i.stats={},i.ignoreNextSeekingEvent_=!1,i.setOptions_(),i.options_.overrideNative&&r.overrideNativeAudioTracks&&r.overrideNativeVideoTracks)r.overrideNativeAudioTracks(!0),r.overrideNativeVideoTracks(!0);else if(i.options_.overrideNative&&(r.featuresNativeVideoTracks||r.featuresNativeAudioTracks))throw Error("Overriding native HLS requires emulated tracks. See https://git.io/vMpjB");return i.on(u(),["fullscreenchange","webkitfullscreenchange","mozfullscreenchange","MSFullscreenChange"],function(e){var t=u().fullscreenElement||u().webkitFullscreenElement||u().mozFullScreenElement||u().msFullscreenElement;t&&t.contains(i.tech_.el())?i.masterPlaylistController_.fastQualityChange_():i.masterPlaylistController_.checkABR_()}),i.on(i.tech_,"seeking",function(){this.ignoreNextSeekingEvent_?this.ignoreNextSeekingEvent_=!1:this.setCurrentTime(this.tech_.currentTime())}),i.on(i.tech_,"error",function(){this.tech_.error()&&this.masterPlaylistController_&&this.masterPlaylistController_.pauseLoading()}),i.on(i.tech_,"play",i.play),i}m(t,e);var r=t.prototype;return r.setOptions_=function(){var e=this;if(this.options_.withCredentials=this.options_.withCredentials||!1,this.options_.handleManifestRedirects=!1!==this.options_.handleManifestRedirects,this.options_.limitRenditionByPlayerDimensions=!1!==this.options_.limitRenditionByPlayerDimensions,this.options_.useDevicePixelRatio=this.options_.useDevicePixelRatio||!1,this.options_.smoothQualityChange=this.options_.smoothQualityChange||!1,this.options_.useBandwidthFromLocalStorage=void 0!==this.source_.useBandwidthFromLocalStorage?this.source_.useBandwidthFromLocalStorage:this.options_.useBandwidthFromLocalStorage||!1,this.options_.useNetworkInformationApi=this.options_.useNetworkInformationApi||!1,this.options_.useDtsForTimestampOffset=this.options_.useDtsForTimestampOffset||!1,this.options_.customTagParsers=this.options_.customTagParsers||[],this.options_.customTagMappers=this.options_.customTagMappers||[],this.options_.cacheEncryptionKeys=this.options_.cacheEncryptionKeys||!1,"number"!=typeof this.options_.blacklistDuration&&(this.options_.blacklistDuration=300),"number"!=typeof this.options_.bandwidth&&this.options_.useBandwidthFromLocalStorage){var t=s6();t&&t.bandwidth&&(this.options_.bandwidth=t.bandwidth,this.tech_.trigger({type:"usage",name:"vhs-bandwidth-from-local-storage"}),this.tech_.trigger({type:"usage",name:"hls-bandwidth-from-local-storage"})),t&&t.throughput&&(this.options_.throughput=t.throughput,this.tech_.trigger({type:"usage",name:"vhs-throughput-from-local-storage"}),this.tech_.trigger({type:"usage",name:"hls-throughput-from-local-storage"}))}"number"!=typeof this.options_.bandwidth&&(this.options_.bandwidth=aq.INITIAL_BANDWIDTH),this.options_.enableLowInitialPlaylist=this.options_.enableLowInitialPlaylist&&this.options_.bandwidth===aq.INITIAL_BANDWIDTH,["withCredentials","useDevicePixelRatio","limitRenditionByPlayerDimensions","bandwidth","smoothQualityChange","customTagParsers","customTagMappers","handleManifestRedirects","cacheEncryptionKeys","playlistSelector","initialPlaylistSelector","experimentalBufferBasedABR","liveRangeSafeTimeDelta","experimentalLLHLS","useNetworkInformationApi","useDtsForTimestampOffset","experimentalExactManifestTimings","experimentalLeastPixelDiffSelector"].forEach(function(t){void 0!==e.source_[t]&&(e.options_[t]=e.source_[t])}),this.limitRenditionByPlayerDimensions=this.options_.limitRenditionByPlayerDimensions,this.useDevicePixelRatio=this.options_.useDevicePixelRatio},r.src=function(e,t){var r=this;if(e){this.setOptions_(),this.options_.src=0===(n=this.source_.src).toLowerCase().indexOf("data:application/vnd.videojs.vhs+json,")?JSON.parse(n.substring(n.indexOf(",")+1)):n,this.options_.tech=this.tech_,this.options_.externVhs=s2,this.options_.sourceType=$(t),this.options_.seekTo=function(e){r.tech_.setCurrentTime(e)},this.options_.smoothQualityChange&&oF.log.warn("smoothQualityChange is deprecated and will be removed in the next major version"),this.masterPlaylistController_=new sX(this.options_);var n,o=oF.mergeOptions({liveRangeSafeTimeDelta:.1},this.options_,{seekable:function(){return r.seekable()},media:function(){return r.masterPlaylistController_.media()},masterPlaylistController:this.masterPlaylistController_});this.playbackWatcher_=new sJ(o),this.masterPlaylistController_.on("error",function(){var e=oF.players[r.tech_.options_.playerId],t=r.masterPlaylistController_.error;"object"!=typeof t||t.code?"string"==typeof t&&(t={message:t,code:3}):t.code=3,e.error(t)});var u=this.options_.experimentalBufferBasedABR?s2.movingAverageBandwidthSelector(.55):s2.STANDARD_PLAYLIST_SELECTOR;this.masterPlaylistController_.selectPlaylist=this.selectPlaylist?this.selectPlaylist.bind(this):u.bind(this),this.masterPlaylistController_.selectInitialPlaylist=s2.INITIAL_PLAYLIST_SELECTOR.bind(this),this.playlists=this.masterPlaylistController_.masterPlaylistLoader_,this.mediaSource=this.masterPlaylistController_.mediaSource,Object.defineProperties(this,{selectPlaylist:{get:function(){return this.masterPlaylistController_.selectPlaylist},set:function(e){this.masterPlaylistController_.selectPlaylist=e.bind(this)}},throughput:{get:function(){return this.masterPlaylistController_.mainSegmentLoader_.throughput.rate},set:function(e){this.masterPlaylistController_.mainSegmentLoader_.throughput.rate=e,this.masterPlaylistController_.mainSegmentLoader_.throughput.count=1}},bandwidth:{get:function(){var e=this.masterPlaylistController_.mainSegmentLoader_.bandwidth,t=i().navigator.connection||i().navigator.mozConnection||i().navigator.webkitConnection;if(this.options_.useNetworkInformationApi&&t){var r=1e3*t.downlink*1e3;e=r>=1e7&&e>=1e7?Math.max(e,r):r}return e},set:function(e){this.masterPlaylistController_.mainSegmentLoader_.bandwidth=e,this.masterPlaylistController_.mainSegmentLoader_.throughput={rate:0,count:0}}},systemBandwidth:{get:function(){return Math.floor(1/(1/(this.bandwidth||1)+(this.throughput>0?1/this.throughput:0)))},set:function(){oF.log.error('The "systemBandwidth" property is read-only')}}}),this.options_.bandwidth&&(this.bandwidth=this.options_.bandwidth),this.options_.throughput&&(this.throughput=this.options_.throughput),Object.defineProperties(this.stats,{bandwidth:{get:function(){return r.bandwidth||0},enumerable:!0},mediaRequests:{get:function(){return r.masterPlaylistController_.mediaRequests_()||0},enumerable:!0},mediaRequestsAborted:{get:function(){return r.masterPlaylistController_.mediaRequestsAborted_()||0},enumerable:!0},mediaRequestsTimedout:{get:function(){return r.masterPlaylistController_.mediaRequestsTimedout_()||0},enumerable:!0},mediaRequestsErrored:{get:function(){return r.masterPlaylistController_.mediaRequestsErrored_()||0},enumerable:!0},mediaTransferDuration:{get:function(){return r.masterPlaylistController_.mediaTransferDuration_()||0},enumerable:!0},mediaBytesTransferred:{get:function(){return r.masterPlaylistController_.mediaBytesTransferred_()||0},enumerable:!0},mediaSecondsLoaded:{get:function(){return r.masterPlaylistController_.mediaSecondsLoaded_()||0},enumerable:!0},mediaAppends:{get:function(){return r.masterPlaylistController_.mediaAppends_()||0},enumerable:!0},mainAppendsToLoadedData:{get:function(){return r.masterPlaylistController_.mainAppendsToLoadedData_()||0},enumerable:!0},audioAppendsToLoadedData:{get:function(){return r.masterPlaylistController_.audioAppendsToLoadedData_()||0},enumerable:!0},appendsToLoadedData:{get:function(){return r.masterPlaylistController_.appendsToLoadedData_()||0},enumerable:!0},timeToLoadedData:{get:function(){return r.masterPlaylistController_.timeToLoadedData_()||0},enumerable:!0},buffered:{get:function(){return oW(r.tech_.buffered())},enumerable:!0},currentTime:{get:function(){return r.tech_.currentTime()},enumerable:!0},currentSource:{get:function(){return r.tech_.currentSource_},enumerable:!0},currentTech:{get:function(){return r.tech_.name_},enumerable:!0},duration:{get:function(){return r.tech_.duration()},enumerable:!0},master:{get:function(){return r.playlists.master},enumerable:!0},playerDimensions:{get:function(){return r.tech_.currentDimensions()},enumerable:!0},seekable:{get:function(){return oW(r.tech_.seekable())},enumerable:!0},timestamp:{get:function(){return Date.now()},enumerable:!0},videoPlaybackQuality:{get:function(){return r.tech_.getVideoPlaybackQuality()},enumerable:!0}}),this.tech_.one("canplay",this.masterPlaylistController_.setupFirstPlay.bind(this.masterPlaylistController_)),this.tech_.on("bandwidthupdate",function(){r.options_.useBandwidthFromLocalStorage&&function(e){if(i().localStorage){var t=s6();t=t?oF.mergeOptions(t,e):e;try{i().localStorage.setItem(s3,JSON.stringify(t))}catch(e){return!1}}}({bandwidth:r.bandwidth,throughput:Math.round(r.throughput)})}),this.masterPlaylistController_.on("selectedinitialmedia",function(){r.representations=function(){var e=r.masterPlaylistController_.master(),t=ai(e)?r.masterPlaylistController_.getAudioTrackPlaylists_():e.playlists;return t?t.filter(function(e){return!o9(e)}).map(function(e,t){return new sQ(r,e,e.id)}):[]}}),this.masterPlaylistController_.sourceUpdater_.on("createdsourcebuffers",function(){r.setupEme_()}),this.on(this.masterPlaylistController_,"progress",function(){this.tech_.trigger("progress")}),this.on(this.masterPlaylistController_,"firstplay",function(){this.ignoreNextSeekingEvent_=!0}),this.setupQualityLevels_(),this.tech_.el()&&(this.mediaSourceUrl_=i().URL.createObjectURL(this.masterPlaylistController_.mediaSource),this.tech_.src(this.mediaSourceUrl_))}},r.createKeySessions_=function(){var e=this,t=this.masterPlaylistController_.mediaTypes_.AUDIO.activePlaylistLoader;this.logger_("waiting for EME key session creation"),(function(e){var t=e.player,r=e.sourceKeySystems,n=e.audioMedia,i=e.mainPlaylists;if(!t.eme.initializeMediaKeys)return Promise.resolve();var o,u,l=(o=n?i.concat([n]):i,u=Object.keys(r),o.reduce(function(e,t){if(!t.contentProtection)return e;var r=u.reduce(function(e,r){var n=t.contentProtection[r];return n&&n.pssh&&(e[r]={pssh:n.pssh}),e},{});return Object.keys(r).length&&e.push(r),e},[])),c=[],f=[];return l.forEach(function(e){f.push(new Promise(function(e,r){t.tech_.one("keysessioncreated",e)})),c.push(new Promise(function(r,n){t.eme.initializeMediaKeys({keySystems:e},function(e){e?n(e):r()})}))}),Promise.race([Promise.all(c),Promise.race(f)])})({player:this.player_,sourceKeySystems:this.source_.keySystems,audioMedia:t&&t.media(),mainPlaylists:this.playlists.master.playlists}).then(function(){e.logger_("created EME key session"),e.masterPlaylistController_.sourceUpdater_.initializedEme()}).catch(function(t){e.logger_("error while creating EME key session",t),e.player_.error({message:"Failed to initialize media keys for EME",code:3})})},r.handleWaitingForKey_=function(){this.logger_("waitingforkey fired, attempting to create any new key sessions"),this.createKeySessions_()},r.setupEme_=function(){var e,t,r,n=this,i=this.masterPlaylistController_.mediaTypes_.AUDIO.activePlaylistLoader,o=(t=(e={player:this.player_,sourceKeySystems:this.source_.keySystems,media:this.playlists.media(),audioMedia:i&&i.media()}).player,!(!(r=function(e,t,r){if(!e)return e;var n={};t&&t.attributes&&t.attributes.CODECS&&(n=a9(V(t.attributes.CODECS))),r&&r.attributes&&r.attributes.CODECS&&(n.audio=r.attributes.CODECS);var i=Y(n.video),o=Y(n.audio),u={};for(var l in e)u[l]={},o&&(u[l].audioContentType=o),i&&(u[l].videoContentType=i),t.contentProtection&&t.contentProtection[l]&&t.contentProtection[l].pssh&&(u[l].pssh=t.contentProtection[l].pssh),"string"==typeof e[l]&&(u[l].url=e[l]);return oF.mergeOptions(e,u)}(e.sourceKeySystems,e.media,e.audioMedia))||(t.currentSource().keySystems=r,r&&!t.eme&&(oF.log.warn("DRM encrypted source cannot be decrypted without a DRM plugin"),1))));this.player_.tech_.on("keystatuschange",function(e){if("output-restricted"===e.status){var t=n.masterPlaylistController_.master();if(t&&t.playlists){var r,i=[];t.playlists.forEach(function(e){e&&e.attributes&&e.attributes.RESOLUTION&&e.attributes.RESOLUTION.height>=720&&(!e.excludeUntil||e.excludeUntil<1/0)&&(e.excludeUntil=1/0,i.push(e))}),i.length&&((r=oF.log).warn.apply(r,['DRM keystatus changed to "output-restricted." Removing the following HD playlists that will most likely fail to play and clearing the buffer. This may be due to HDCP restrictions on the stream and the capabilities of the current device.'].concat(i)),n.masterPlaylistController_.fastQualityChange_())}}}),this.handleWaitingForKey_=this.handleWaitingForKey_.bind(this),this.player_.tech_.on("waitingforkey",this.handleWaitingForKey_),11!==oF.browser.IE_VERSION&&o?this.createKeySessions_():this.masterPlaylistController_.sourceUpdater_.initializedEme()},r.setupQualityLevels_=function(){var e=this,t=oF.players[this.tech_.options_.playerId];t&&t.qualityLevels&&!this.qualityLevels_&&(this.qualityLevels_=t.qualityLevels(),this.masterPlaylistController_.on("selectedinitialmedia",function(){var t;t=e.qualityLevels_,e.representations().forEach(function(e){t.addQualityLevel(e)}),s4(t,e.playlists)}),this.playlists.on("mediachange",function(){s4(e.qualityLevels_,e.playlists)}))},t.version=function(){return{"@videojs/http-streaming":s1,"mux.js":"6.0.1","mpd-parser":"0.22.1","m3u8-parser":"4.8.0","aes-decrypter":"3.1.3"}},r.version=function(){return this.constructor.version()},r.canChangeType=function(){return sR.canChangeType()},r.play=function(){this.masterPlaylistController_.play()},r.setCurrentTime=function(e){this.masterPlaylistController_.setCurrentTime(e)},r.duration=function(){return this.masterPlaylistController_.duration()},r.seekable=function(){return this.masterPlaylistController_.seekable()},r.dispose=function(){this.playbackWatcher_&&this.playbackWatcher_.dispose(),this.masterPlaylistController_&&this.masterPlaylistController_.dispose(),this.qualityLevels_&&this.qualityLevels_.dispose(),this.player_&&(delete this.player_.vhs,delete this.player_.dash,delete this.player_.hls),this.tech_&&this.tech_.vhs&&delete this.tech_.vhs,this.tech_&&delete this.tech_.hls,this.mediaSourceUrl_&&i().URL.revokeObjectURL&&(i().URL.revokeObjectURL(this.mediaSourceUrl_),this.mediaSourceUrl_=null),this.tech_&&this.tech_.off("waitingforkey",this.handleWaitingForKey_),e.prototype.dispose.call(this)},r.convertToProgramTime=function(e,t){return function(e){var t=e.playlist,r=e.time,n=void 0===r?void 0:r,i=e.callback;if(!i)throw Error("getProgramTime: callback must be provided");if(!t||void 0===n)return i({message:"getProgramTime: playlist and time must be provided"});var o=function(e,t){if(!t||!t.segments||0===t.segments.length)return null;for(var r,n=0,i=0;i<t.segments.length&&!(e<=(n=(r=t.segments[i]).videoTimingInfo?r.videoTimingInfo.transmuxedPresentationEnd:n+r.duration));i++);var o=t.segments[t.segments.length-1];if(o.videoTimingInfo&&o.videoTimingInfo.transmuxedPresentationEnd<e)return null;if(e>n){if(e>n+.25*o.duration)return null;r=o}return{segment:r,estimatedStart:r.videoTimingInfo?r.videoTimingInfo.transmuxedPresentationStart:n-r.duration,type:r.videoTimingInfo?"accurate":"estimate"}}(n,t);if(!o)return i({message:"valid programTime was not found"});if("estimate"===o.type)return i({message:"Accurate programTime could not be determined. Please seek to e.seekTime and try again",seekTime:o.estimatedStart});var u={mediaSeconds:n},l=function(e,t){if(!t.dateTimeObject)return null;var r=t.videoTimingInfo.transmuxerPrependedSeconds,n=e-(t.videoTimingInfo.transmuxedPresentationStart+r);return new Date(t.dateTimeObject.getTime()+1e3*n)}(n,o.segment);return l&&(u.programDateTime=l.toISOString()),i(null,u)}({playlist:this.masterPlaylistController_.media(),time:e,callback:t})},r.seekToProgramTime=function(e,t,r,n){return void 0===r&&(r=!0),void 0===n&&(n=2),aN({programTime:e,playlist:this.masterPlaylistController_.media(),retryCount:n,pauseAfterSeek:r,seekTo:this.options_.seekTo,tech:this.options_.tech,callback:t})},t}(oF.getComponent("Component")),s5={name:"videojs-http-streaming",VERSION:s1,canHandleSource:function(e,t){void 0===t&&(t={});var r=oF.mergeOptions(oF.options,t);return s5.canPlayType(e.type,r)},handleSource:function(e,t,r){void 0===r&&(r={});var n=oF.mergeOptions(oF.options,r);return t.vhs=new s8(e,t,n),oF.hasOwnProperty("hls")||Object.defineProperty(t,"hls",{get:function(){return oF.log.warn("player.tech().hls is deprecated. Use player.tech().vhs instead."),t.vhs},configurable:!0}),t.vhs.xhr=aw(),t.vhs.src(e.src,e.type),t.vhs},canPlayType:function(e,t){var r=$(e);if(!r)return"";var n=s5.getOverrideNative(t);return!s2.supportsTypeNatively(r)||n?"maybe":""},getOverrideNative:function(e){void 0===e&&(e={});var t=e,r=t.vhs,n=t.hls,i=!(oF.browser.IS_ANY_SAFARI||oF.browser.IS_IOS),o=(void 0===r?{}:r).overrideNative,u=(void 0===n?{}:n).overrideNative;return void 0!==u&&u||(void 0===o?i:o)}};z("avc1.4d400d,mp4a.40.2")&&oF.getTech("Html5").registerSourceHandler(s5,0),oF.VhsHandler=s8,Object.defineProperty(oF,"HlsHandler",{get:function(){return oF.log.warn("videojs.HlsHandler is deprecated. Use videojs.VhsHandler instead."),s8},configurable:!0}),oF.VhsSourceHandler=s5,Object.defineProperty(oF,"HlsSourceHandler",{get:function(){return oF.log.warn("videojs.HlsSourceHandler is deprecated. Use videojs.VhsSourceHandler instead."),s5},configurable:!0}),oF.Vhs=s2,Object.defineProperty(oF,"Hls",{get:function(){return oF.log.warn("videojs.Hls is deprecated. Use videojs.Vhs instead."),s2},configurable:!0}),oF.use||(oF.registerComponent("Hls",s2),oF.registerComponent("Vhs",s2)),oF.options.vhs=oF.options.vhs||{},oF.options.hls=oF.options.hls||{},oF.getPlugin&&oF.getPlugin("reloadSourceOnError")||(oF.registerPlugin||oF.plugin)("reloadSourceOnError",function(e){s0(this,e)});let s9=oF},833:(e,t,r)=>{r.r(t),r.d(t,{default:()=>K});var n=r(924),i=r.n(n),o=r(634),u=r.n(o),l=r(474),c=r.n(l),f="6.9.0",d=function(e,t){t.isImmediatePropagationStopped=function(){return!0},t.cancelBubble=!0,t.isPropagationStopped=function(){return!0}},h=function(e,t,r){d(0,r),e.trigger({type:t+r.type,originalEvent:r})};function p(e){"playing"===e.type?this.ads.isInAdMode()&&(this.ads.isContentResuming()?this.ads._contentEnding&&h(this,"content",e):h(this,"ad",e)):"ended"===e.type?this.ads.isInAdMode()?this.ads.isContentResuming()?(d(0,e),this.trigger("resumeended")):h(this,"ad",e):this.ads._contentHasEnded||this.ads.stitchedAds()||(h(this,"content",e),this.trigger("readyforpostroll")):"loadstart"===e.type||"loadeddata"===e.type||"loadedmetadata"===e.type?function(e,t){if(!("loadstart"===t.type&&!e.ads._hasThereBeenALoadStartDuringPlayerLife||"loadeddata"===t.type&&!e.ads._hasThereBeenALoadedData||"loadedmetadata"===t.type&&!e.ads._hasThereBeenALoadedMetaData)){if(e.ads.inAdBreak())h(e,"ad",t);else{if(e.currentSrc()!==e.ads.contentSrc)return;h(e,"content",t)}}}(this,e):"play"===e.type?this.ads.inAdBreak()?h(this,"ad",e):this.ads.isContentResuming()&&h(this,"content",e):this.ads.isInAdMode()&&(this.ads.isContentResuming()?h(this,"content",e):h(this,"ad",e))}var m={},g=function(){(function(){if(i().dom.isInFrame()&&"function"!=typeof u().__tcfapi){for(var e,t=u(),r={};t;){try{if(t.frames.__tcfapiLocator){e=t;break}}catch(e){}if(t===u().top)break;t=t.parent}e&&(u().__tcfapi=function(t,n,i,o){var u=Math.random()+"";r[u]=i,e.postMessage({__tcfapiCall:{command:t,parameter:o,version:n,callId:u}},"*")},u().addEventListener("message",function(e){var t={};try{t="string"==typeof e.data?JSON.parse(e.data):e.data}catch(e){}var n=t.__tcfapiReturn;n&&"function"==typeof r[n.callId]&&(r[n.callId](n.returnValue,n.success),r[n.callId]=null)},!1))}})(),"function"==typeof u().__tcfapi&&u().__tcfapi("addEventListener",2,function(e,t){t&&(m=e)})},y=function(e,t){return t?encodeURIComponent(e):e},v=function(e,t,r){if(e&&e[r])for(var n=e[r],i=Object.keys(n),o=0;o<i.length;o++)t["{mediainfo."+r+"."+i[o]+"}"]=n[i[o]]};function b(e,t,r){var n=this,o={};e=e.replace(/{([^}=]+)=([^}]+)}/g,function(e,t,r){return o["{"+t+"}"]=r,"{"+t+"}"}),void 0===t&&(t=!1);var l={};for(var f in void 0!==r&&(l=r),l["{player.id}"]=this.options_["data-player"]||this.id_,l["{player.height}"]=this.currentHeight(),l["{player.width}"]=this.currentWidth(),l["{mediainfo.id}"]=this.mediainfo?this.mediainfo.id:"",l["{mediainfo.name}"]=this.mediainfo?this.mediainfo.name:"",l["{mediainfo.duration}"]=this.mediainfo?this.mediainfo.duration:"",l["{player.duration}"]=this.duration(),l["{player.pageUrl}"]=i().dom.isInFrame()?c().referrer:u().location.href,l["{playlistinfo.id}"]=this.playlistinfo?this.playlistinfo.id:"",l["{playlistinfo.name}"]=this.playlistinfo?this.playlistinfo.name:"",l["{timestamp}"]=(new Date).getTime(),l["{document.referrer}"]=c().referrer,l["{window.location.href}"]=u().location.href,l["{random}"]=Math.floor(1e12*Math.random()),["description","tags","reference_id","ad_keys"].forEach(function(e){n.mediainfo&&n.mediainfo[e]?l["{mediainfo."+e+"}"]=n.mediainfo[e]:o["{mediainfo."+e+"}"]?l["{mediainfo."+e+"}"]=o["{mediainfo."+e+"}"]:l["{mediainfo."+e+"}"]=""}),v(this.mediainfo,l,"custom_fields"),v(this.mediainfo,l,"customFields"),Object.keys(m).forEach(function(e){l["{tcf."+e+"}"]=m[e]}),l["{tcf.gdprAppliesInt}"]=m.gdprApplies?1:0,l)e=e.split(f).join(y(l[f],t));for(var d in e=e.replace(/{pageVariable\.([^}]+)}/g,function(e,r){for(var n,l=u(),c=r.split("."),f=0;f<c.length;f++)f===c.length-1?n=l[c[f]]:l=l[c[f]];var d=typeof n;return null===n?"null":void 0===n?o["{pageVariable."+r+"}"]?o["{pageVariable."+r+"}"]:(i().log.warn('Page variable "'+r+'" not found'),""):"string"!==d&&"number"!==d&&"boolean"!==d?(i().log.warn('Page variable "'+r+'" is not a supported type'),""):y(String(n),t)}),o)e=e.replace(d,o[d]);return e}var _={processMetadataTracks:function(e,t){for(var r=e.textTracks(),n=function(r){"metadata"===r.kind&&(e.ads.cueTextTracks.setMetadataTrackMode(r),t(e,r))},i=0;i<r.length;i++)n(r[i]);r.addEventListener("addtrack",function(e){n(e.track)})},setMetadataTrackMode:function(e){},getSupportedAdCue:function(e,t){return t},isSupportedAdCue:function(e,t){return!0},getCueId:function(e,t){return t.id}},T=function(e,t){void 0!==t&&""!==t&&(e.ads.includedCues[t]=!0)};function E(){!1!==this.ads._shouldBlockPlay&&(this.paused()||(this.ads.debug("Playback was canceled by cancelContentPlay"),this.pause()),this.ads._cancelledPlay=!0)}_.processAdTrack=function(e,t,r,n){e.ads.includedCues={};for(var o=0;o<t.length;o++){var u=t[o],l=this.getSupportedAdCue(e,u);if(!this.isSupportedAdCue(e,u))return void i().log.warn("Skipping as this is not a supported ad cue.",u);var c=this.getCueId(e,u),f=u.startTime;if(void 0!==c&&e.ads.includedCues[c])return void i().log("Skipping ad already seen with ID "+c);n&&n(e,l,c,f),r(e,l,c,f),T(e,c)}};var S={},w=i();S.isMiddlewareMediatorSupported=function(){return!w.browser.IS_IOS&&!w.browser.IS_ANDROID&&!!(w.use&&w.middleware&&w.middleware.TERMINATOR)},S.playMiddleware=function(e){return{setSource:function(e,t){t(null,e)},callPlay:function(){if(e.ads&&!0===e.ads._shouldBlockPlay)return e.ads.debug("Using playMiddleware to block content playback"),e.ads._playBlocked=!0,w.middleware.TERMINATOR},play:function(t,r){e.ads&&e.ads._playBlocked&&t?(e.ads.debug("Play call to Tech was terminated."),e.trigger("play"),e.addClass("vjs-has-started"),e.ads._playBlocked=!1):r&&r.catch&&r.catch(function(t){"NotAllowedError"!==t.name||i().browser.IS_SAFARI||e.trigger("pause")})}}},S.testHook=function(e){w=e};var A=S.playMiddleware,C=S.isMiddlewareMediatorSupported,I=function(){function e(){}return e.getState=function(t){if(t)return e.states_&&e.states_[t]?e.states_[t]:void 0},e.registerState=function(t,r){if("string"!=typeof t||!t)throw Error('Illegal state name, "'+t+'"; must be a non-empty string.');return e.states_||(e.states_={}),e.states_[t]=r,r},e}(),O=function(){function e(e){this.player=e}e._getName=function(){return"Anonymous State"};var t=e.prototype;return t.transitionTo=function(e){var t=this.player;this.cleanup(t);var r=new e(t);t.ads._state=r,t.ads.debug(this.constructor._getName()+" -> "+r.constructor._getName());for(var n=arguments.length,i=Array(n>1?n-1:0),o=1;o<n;o++)i[o-1]=arguments[o];r.init.apply(r,[t].concat(i))},t.init=function(){},t.cleanup=function(){},t.onPlay=function(){},t.onPlaying=function(){},t.onEnded=function(){},t.onAdEnded=function(){},t.onAdsReady=function(){i().log.warn("Unexpected adsready event")},t.onAdsError=function(){},t.onAdsCanceled=function(){},t.onAdTimeout=function(){},t.onAdStarted=function(){},t.onContentChanged=function(){},t.onContentResumed=function(){},t.onReadyForPostroll=function(){i().log.warn("Unexpected readyforpostroll event")},t.onNoPreroll=function(){},t.onNoPostroll=function(){},t.startLinearAdMode=function(){i().log.warn("Unexpected startLinearAdMode invocation (State via "+this.constructor._getName()+")")},t.endLinearAdMode=function(){i().log.warn("Unexpected endLinearAdMode invocation (State via "+this.constructor._getName()+")")},t.skipLinearAdMode=function(){i().log.warn("Unexpected skipLinearAdMode invocation (State via "+this.constructor._getName()+")")},t.isAdState=function(){throw Error("isAdState unimplemented for "+this.constructor._getName())},t.isWaitingForAdBreak=function(){return!1},t.isContentResuming=function(){return!1},t.inAdBreak=function(){return!1},t.handleEvent=function(e){var t=this.player;"play"===e?this.onPlay(t):"adsready"===e?this.onAdsReady(t):"adserror"===e?this.onAdsError(t):"adscanceled"===e?this.onAdsCanceled(t):"adtimeout"===e?this.onAdTimeout(t):"ads-ad-started"===e?this.onAdStarted(t):"contentchanged"===e?this.onContentChanged(t):"contentresumed"===e?this.onContentResumed(t):"readyforpostroll"===e?this.onReadyForPostroll(t):"playing"===e?this.onPlaying(t):"ended"===e?this.onEnded(t):"nopreroll"===e?this.onNoPreroll(t):"nopostroll"===e?this.onNoPostroll(t):"adended"===e&&this.onAdEnded(t)},e}();function R(e,t){e.prototype=Object.create(t.prototype),e.prototype.constructor=e,e.__proto__=t}I.registerState("State",O);var P=function(e){function t(t){var r;return(r=e.call(this,t)||this).contentResuming=!1,r.waitingForAdBreak=!1,r}R(t,e);var r=t.prototype;return r.isAdState=function(){return!0},r.onPlaying=function(){var e=I.getState("ContentPlayback");this.contentResuming&&this.transitionTo(e)},r.onContentResumed=function(){var e=I.getState("ContentPlayback");this.contentResuming&&this.transitionTo(e)},r.isWaitingForAdBreak=function(){return this.waitingForAdBreak},r.isContentResuming=function(){return this.contentResuming},r.inAdBreak=function(){return!0===this.player.ads._inLinearAdMode},t}(O);I.registerState("AdState",P);var k=function(e){function t(){return e.apply(this,arguments)||this}R(t,e);var r=t.prototype;return r.isAdState=function(){return!1},r.onContentChanged=function(e){var t=I.getState("BeforePreroll"),r=I.getState("Preroll");e.ads.debug("Received contentchanged event (ContentState)"),e.paused()?this.transitionTo(t):(this.transitionTo(r,!1),e.pause(),e.ads._pausedOnContentupdate=!0)},t}(O);I.registerState("ContentState",k);var D,N=function(e){function t(){return e.apply(this,arguments)||this}R(t,e),t._getName=function(){return"AdsDone"};var r=t.prototype;return r.init=function(e){e.ads._contentHasEnded=!0,e.trigger("ended")},r.startLinearAdMode=function(){i().log.warn("Unexpected startLinearAdMode invocation (AdsDone)")},t}(I.getState("ContentState"));I.registerState("AdsDone",N);var L=function(e){e.ads.debug("Starting ad break"),e.ads._inLinearAdMode=!0,e.trigger("adstart"),e.ads.shouldTakeSnapshots()&&(e.ads.snapshot=function(e){t=i().browser.IS_IOS&&e.ads.isLive(e)&&e.seekable().length>0?e.currentTime()-e.seekable().end(0):e.currentTime();var t,r=e.$(".vjs-tech"),n=e.textTracks?e.textTracks():[],o=[],u={ended:e.ended(),currentSrc:e.currentSrc(),sources:e.currentSources(),src:e.tech_.src(),currentTime:t,type:e.currentType()};r&&(u.style=r.getAttribute("style"));for(var l=0;l<n.length;l++){var c=n[l];o.push({track:c,mode:c.mode}),c.mode="disabled"}return u.suppressedTracks=o,u}(e)),e.ads.shouldPlayContentBehindAd(e)&&(e.ads.preAdVolume_=e.volume(),e.volume(0)),e.addClass("vjs-ad-playing"),e.hasClass("vjs-live")&&e.removeClass("vjs-live"),e.ads.removeNativePoster()},x=function(e,t){e.ads.debug("Ending ad break"),void 0===t&&(t=function(){}),e.ads.adType=null,e.ads._inLinearAdMode=!1,e.trigger("adend"),e.removeClass("vjs-ad-playing"),e.ads.isLive(e)&&e.addClass("vjs-live"),e.ads.shouldTakeSnapshots()?function(e,t){var r=e.ads.snapshot;if(void 0===t&&(t=function(){}),!0===e.ads.disableNextSnapshotRestore)return e.ads.disableNextSnapshotRestore=!1,delete e.ads.snapshot,void t();var n,o=e.$(".vjs-tech"),u=20,l=r.suppressedTracks,c=function(){for(var e=0;e<l.length;e++)(n=l[e]).track.mode=n.mode},f=function(){var t;if(i().browser.IS_IOS&&e.ads.isLive(e)){if(r.currentTime<0&&(t=e.seekable().length>0?e.seekable().end(0)+r.currentTime:e.currentTime(),e.currentTime(t)),e.paused()){var n=e.play();n&&n.catch&&n.catch(function(e){i().log.warn("Play promise rejected in IOS snapshot resume",e)})}}else if(r.ended)e.currentTime(e.duration());else{e.currentTime(r.currentTime);var o=e.play();o&&o.catch&&o.catch(function(e){i().log.warn("Play promise rejected in snapshot resume",e)})}e.ads.shouldRemoveAutoplay_&&(e.autoplay(!1),e.ads.shouldRemoveAutoplay_=!1)},d=function t(){if(e.off("contentcanplay",t),D&&e.clearTimeout(D),(o=e.el().querySelector(".vjs-tech")).readyState>1||void 0===o.seekable||o.seekable.length>0)return f();if(u--)e.setTimeout(t,50);else try{f()}catch(e){i().log.warn("Failed to resume the content after an advertisement",e)}};if("style"in r&&o.setAttribute("style",r.style||""),e.ads.videoElementRecycled())e.one("resumeended",function(){delete e.ads.snapshot,t()}),e.one("contentloadedmetadata",c),i().browser.IS_IOS&&!e.autoplay()&&(e.autoplay(!0),e.ads.shouldRemoveAutoplay_=!0),e.src(r.sources),e.one("contentcanplay",d),D=e.setTimeout(d,2e3);else{if(c(),!e.ended()){var h=e.play();h&&h.catch&&h.catch(function(e){i().log.warn("Play promise rejected in snapshot restore",e)})}delete e.ads.snapshot,t()}}(e,t):(e.volume(e.ads.preAdVolume_),t())},j=function(e){function t(){return e.apply(this,arguments)||this}R(t,e),t._getName=function(){return"Preroll"};var r=t.prototype;return r.init=function(e,t,r){if(this.waitingForAdBreak=!0,e.addClass("vjs-ad-loading"),r||e.ads.nopreroll_)return this.resumeAfterNoPreroll(e);var n=e.ads.settings.timeout;"number"==typeof e.ads.settings.prerollTimeout&&(n=e.ads.settings.prerollTimeout),this._timeout=e.setTimeout(function(){e.trigger("adtimeout")},n),t?this.handleAdsReady():this.adsReady=!1},r.onAdsReady=function(e){e.ads.inAdBreak()?i().log.warn("Unexpected adsready event (Preroll)"):(e.ads.debug("Received adsready event (Preroll)"),this.handleAdsReady())},r.handleAdsReady=function(){this.adsReady=!0,this.readyForPreroll()},r.afterLoadStart=function(e){var t=this.player;t.ads._hasThereBeenALoadStartDuringPlayerLife?e():(t.ads.debug("Waiting for loadstart..."),t.one("loadstart",function(){t.ads.debug("Received loadstart event"),e()}))},r.noPreroll=function(){var e=this;this.afterLoadStart(function(){e.player.ads.debug("Skipping prerolls due to nopreroll event (Preroll)"),e.resumeAfterNoPreroll(e.player)})},r.readyForPreroll=function(){var e=this.player;this.afterLoadStart(function(){e.ads.debug("Triggered readyforpreroll event (Preroll)"),e.trigger("readyforpreroll")})},r.onAdsCanceled=function(e){var t=this;e.ads.debug("adscanceled (Preroll)"),this.afterLoadStart(function(){t.resumeAfterNoPreroll(e)})},r.onAdsError=function(e){var t=this;i().log("adserror (Preroll)"),this.inAdBreak()?e.ads.endLinearAdMode():this.afterLoadStart(function(){t.resumeAfterNoPreroll(e)})},r.startLinearAdMode=function(){var e=this.player;!this.adsReady||e.ads.inAdBreak()||this.isContentResuming()?i().log.warn("Unexpected startLinearAdMode invocation (Preroll)"):(this.clearTimeout(e),e.ads.adType="preroll",this.waitingForAdBreak=!1,L(e),e.ads._shouldBlockPlay=!1)},r.onAdStarted=function(e){e.removeClass("vjs-ad-loading")},r.endLinearAdMode=function(){var e=this.player;this.inAdBreak()&&(e.removeClass("vjs-ad-loading"),e.addClass("vjs-ad-content-resuming"),this.contentResuming=!0,x(e))},r.skipLinearAdMode=function(){var e=this,t=this.player;t.ads.inAdBreak()||this.isContentResuming()?i().log.warn("Unexpected skipLinearAdMode invocation"):this.afterLoadStart(function(){t.trigger("adskip"),t.ads.debug("skipLinearAdMode (Preroll)"),e.resumeAfterNoPreroll(t)})},r.onAdTimeout=function(e){var t=this;this.afterLoadStart(function(){e.ads.debug("adtimeout (Preroll)"),t.resumeAfterNoPreroll(e)})},r.onNoPreroll=function(e){e.ads.inAdBreak()||this.isContentResuming()?i().log.warn("Unexpected nopreroll event (Preroll)"):this.noPreroll()},r.resumeAfterNoPreroll=function(e){if(this.contentResuming=!0,e.ads._shouldBlockPlay=!1,this.cleanupPartial(e),e.ads._playRequested||e.ads._pausedOnContentupdate){if(e.paused()){e.ads.debug("resumeAfterNoPreroll: attempting to resume playback (Preroll)");var t=e.play();t&&t.then&&t.then(null,function(e){})}else e.ads.debug("resumeAfterNoPreroll: already playing (Preroll)"),e.trigger("play"),e.trigger("playing")}},r.cleanup=function(e){e.ads._hasThereBeenALoadStartDuringPlayerLife||i().log.warn("Leaving Preroll state before loadstart event can cause issues."),this.cleanupPartial(e)},r.cleanupPartial=function(e){e.removeClass("vjs-ad-loading"),e.removeClass("vjs-ad-content-resuming"),this.clearTimeout(e)},r.clearTimeout=function(e){e.clearTimeout(this._timeout),this._timeout=null},t}(I.getState("AdState"));I.registerState("Preroll",j);var M=function(e){function t(){return e.apply(this,arguments)||this}R(t,e),t._getName=function(){return"BeforePreroll"};var r=t.prototype;return r.init=function(e){this.adsReady=!1,this.shouldResumeToContent=!1,e.ads._shouldBlockPlay=!e.ads.settings.allowVjsAutoplay||!e.autoplay()},r.onAdsReady=function(e){e.ads.debug("Received adsready event (BeforePreroll)"),this.adsReady=!0},r.onPlay=function(e){var t=I.getState("Preroll");e.ads.debug("Received play event (BeforePreroll)"),this.transitionTo(t,this.adsReady,this.shouldResumeToContent)},r.onAdsCanceled=function(e){e.ads.debug("adscanceled (BeforePreroll)"),this.shouldResumeToContent=!0},r.onAdsError=function(){this.player.ads.debug("adserror (BeforePreroll)"),this.shouldResumeToContent=!0},r.onNoPreroll=function(){this.player.ads.debug("Skipping prerolls due to nopreroll event (BeforePreroll)"),this.shouldResumeToContent=!0},r.skipLinearAdMode=function(){var e=this.player;e.trigger("adskip"),e.ads.debug("skipLinearAdMode (BeforePreroll)"),this.shouldResumeToContent=!0},r.onContentChanged=function(){this.init(this.player)},t}(I.getState("ContentState"));I.registerState("BeforePreroll",M);var F=function(e){function t(){return e.apply(this,arguments)||this}R(t,e),t._getName=function(){return"Midroll"};var r=t.prototype;return r.init=function(e){e.ads.adType="midroll",L(e),e.addClass("vjs-ad-loading")},r.onAdStarted=function(e){e.removeClass("vjs-ad-loading")},r.endLinearAdMode=function(){var e=this.player;this.inAdBreak()&&(this.contentResuming=!0,e.addClass("vjs-ad-content-resuming"),e.removeClass("vjs-ad-loading"),x(e))},r.onAdsError=function(e){this.inAdBreak()&&e.ads.endLinearAdMode()},r.cleanup=function(e){e.removeClass("vjs-ad-loading"),e.removeClass("vjs-ad-content-resuming")},t}(I.getState("AdState"));I.registerState("Midroll",F);var B=function(e){function t(){return e.apply(this,arguments)||this}R(t,e),t._getName=function(){return"Postroll"};var r=t.prototype;return r.init=function(e){if(this.waitingForAdBreak=!0,e.ads._contentEnding=!0,e.ads.nopostroll_){this.resumeContent(e);var t=I.getState("AdsDone");this.transitionTo(t)}else{e.addClass("vjs-ad-loading");var r=e.ads.settings.timeout;"number"==typeof e.ads.settings.postrollTimeout&&(r=e.ads.settings.postrollTimeout),this._postrollTimeout=e.setTimeout(function(){e.trigger("adtimeout")},r)}},r.startLinearAdMode=function(){var e=this.player;e.ads.inAdBreak()||this.isContentResuming()?i().log.warn("Unexpected startLinearAdMode invocation (Postroll)"):(e.ads.adType="postroll",e.clearTimeout(this._postrollTimeout),this.waitingForAdBreak=!1,L(e))},r.onAdStarted=function(e){e.removeClass("vjs-ad-loading")},r.endLinearAdMode=function(){var e=this,t=this.player,r=I.getState("AdsDone");this.inAdBreak()&&(t.removeClass("vjs-ad-loading"),this.resumeContent(t),x(t,function(){e.transitionTo(r)}))},r.skipLinearAdMode=function(){var e=this.player;e.ads.inAdBreak()||this.isContentResuming()?i().log.warn("Unexpected skipLinearAdMode invocation"):(e.ads.debug("Postroll abort (skipLinearAdMode)"),e.trigger("adskip"),this.abort(e))},r.onAdTimeout=function(e){e.ads.debug("Postroll abort (adtimeout)"),this.abort(e)},r.onAdsError=function(e){e.ads.debug("Postroll abort (adserror)"),e.ads.inAdBreak()?e.ads.endLinearAdMode():this.abort(e)},r.onContentChanged=function(e){if(this.isContentResuming()){var t=I.getState("BeforePreroll");this.transitionTo(t)}else if(!this.inAdBreak()){var r=I.getState("Preroll");this.transitionTo(r)}},r.onNoPostroll=function(e){this.isContentResuming()||this.inAdBreak()?i().log.warn("Unexpected nopostroll event (Postroll)"):this.abort(e)},r.resumeContent=function(e){this.contentResuming=!0,e.addClass("vjs-ad-content-resuming")},r.abort=function(e){var t=I.getState("AdsDone");this.resumeContent(e),e.removeClass("vjs-ad-loading"),this.transitionTo(t)},r.cleanup=function(e){e.removeClass("vjs-ad-content-resuming"),e.clearTimeout(this._postrollTimeout),e.ads._contentEnding=!1},t}(I.getState("AdState"));I.registerState("Postroll",B);var U=function(e){function t(){return e.apply(this,arguments)||this}R(t,e),t._getName=function(){return"ContentPlayback"};var r=t.prototype;return r.init=function(e){e.ads._shouldBlockPlay=!1},r.onAdsReady=function(e){e.ads.debug("Received adsready event (ContentPlayback)"),e.ads.nopreroll_||(e.ads.debug("Triggered readyforpreroll event (ContentPlayback)"),e.trigger("readyforpreroll"))},r.onReadyForPostroll=function(e){var t=I.getState("Postroll");e.ads.debug("Received readyforpostroll event"),this.transitionTo(t)},r.startLinearAdMode=function(){var e=I.getState("Midroll");this.transitionTo(e)},t}(I.getState("ContentState"));I.registerState("ContentPlayback",U);var q=function(e){function t(){return e.apply(this,arguments)||this}R(t,e),t._getName=function(){return"StitchedContentPlayback"};var r=t.prototype;return r.init=function(){this.player.ads._shouldBlockPlay=!1},r.onContentChanged=function(){this.player.ads.debug("Received contentchanged event ("+this.constructor._getName()+")")},r.startLinearAdMode=function(){var e=I.getState("StitchedAdRoll");this.transitionTo(e)},t}(I.getState("ContentState"));I.registerState("StitchedContentPlayback",q);var H=function(e){function t(){return e.apply(this,arguments)||this}R(t,e),t._getName=function(){return"StitchedAdRoll"};var r=t.prototype;return r.init=function(){this.waitingForAdBreak=!1,this.contentResuming=!1,this.player.ads.adType="stitched",L(this.player)},r.onPlaying=function(){},r.onContentResumed=function(){},r.onAdEnded=function(){this.endLinearAdMode(),this.player.trigger("ended")},r.endLinearAdMode=function(){var e=I.getState("StitchedContentPlayback");x(this.player),this.transitionTo(e)},t}(I.getState("AdState"));I.registerState("StitchedAdRoll",H);var V=S.isMiddlewareMediatorSupported,G=i().getTech("Html5").Events,Y={timeout:5e3,prerollTimeout:void 0,postrollTimeout:void 0,debug:!1,stitchedAds:!1,contentIsLive:void 0,liveCuePoints:!0,allowVjsAutoplay:i().options.normalizeAutoplay||!1},z=function(e){var t=this,r=i().mergeOptions(Y,e),n=[];G.concat(["firstplay","loadedalldata"]).forEach(function(e){-1===n.indexOf(e)&&n.push(e)}),t.on(n,p),V()||(r.debug&&i().log("Using cancelContentPlay to block content playback"),t.on("play",E)),t.setTimeout(function(){t.ads._hasThereBeenALoadStartDuringPlayerLife||""===t.src()||i().log.error("videojs-contrib-ads has not seen a loadstart event 5 seconds after being initialized, but a source is present. This indicates that videojs-contrib-ads was initialized too late. It must be initialized immediately after video.js in the same tick. As a result, some ads will not play and some media events will be incorrect. For more information, see http://videojs.github.io/videojs-contrib-ads/integrator/getting-started.html")},5e3),t.on("ended",function(){t.hasClass("vjs-has-started")||t.addClass("vjs-has-started")}),t.on("contenttimeupdate",function(){t.removeClass("vjs-waiting")}),t.on(["addurationchange","adcanplay"],function(){if(!t.ads.settings.stitchedAds&&!t.hasStarted()&&(!t.ads.snapshot||t.currentSrc()!==t.ads.snapshot.currentSrc)&&t.ads.inAdBreak()){var e=t.play();e&&e.catch&&e.catch(function(e){i().log.warn("Play promise rejected when playing ad",e)})}}),t.on("nopreroll",function(){t.ads.debug("Received nopreroll event"),t.ads.nopreroll_=!0}),t.on("nopostroll",function(){t.ads.debug("Received nopostroll event"),t.ads.nopostroll_=!0}),t.on("playing",function(){t.ads._cancelledPlay=!1,t.ads._pausedOnContentupdate=!1}),t.on("play",function(){t.ads._playRequested=!0}),t.one("loadstart",function(){t.ads._hasThereBeenALoadStartDuringPlayerLife=!0}),t.on("loadeddata",function(){t.ads._hasThereBeenALoadedData=!0}),t.on("loadedmetadata",function(){t.ads._hasThereBeenALoadedMetaData=!0}),t.ads={disableNextSnapshotRestore:!1,_contentEnding:!1,_contentHasEnded:!1,_hasThereBeenALoadStartDuringPlayerLife:!1,_hasThereBeenALoadedData:!1,_hasThereBeenALoadedMetaData:!1,_inLinearAdMode:!1,_shouldBlockPlay:!1,_playBlocked:!1,_playRequested:!1,adType:null,VERSION:f,reset:function(){t.ads.disableNextSnapshotRestore=!1,t.ads._contentEnding=!1,t.ads._contentHasEnded=!1,t.ads.snapshot=null,t.ads.adType=null,t.ads._hasThereBeenALoadedData=!1,t.ads._hasThereBeenALoadedMetaData=!1,t.ads._cancelledPlay=!1,t.ads._shouldBlockPlay=!1,t.ads._playBlocked=!1,t.ads.nopreroll_=!1,t.ads.nopostroll_=!1,t.ads._playRequested=!1},startLinearAdMode:function(){t.ads._state.startLinearAdMode()},endLinearAdMode:function(){t.ads._state.endLinearAdMode()},skipLinearAdMode:function(){t.ads._state.skipLinearAdMode()},stitchedAds:function(e){return void 0!==e&&(i().log.warn("Using player.ads.stitchedAds() as a setter is deprecated, it should be set as an option upon initialization of contrib-ads."),this.settings.stitchedAds=!!e),this.settings.stitchedAds},videoElementRecycled:function(){if(t.ads.shouldPlayContentBehindAd(t))return!1;if(!this.snapshot)throw Error("You cannot use videoElementRecycled while there is no snapshot.");var e=t.tech_.src()!==this.snapshot.src,r=t.currentSrc()!==this.snapshot.currentSrc;return e||r},isLive:function(e){return void 0===e&&(e=t),"boolean"==typeof e.ads.settings.contentIsLive?e.ads.settings.contentIsLive:e.duration()===1/0||"8"===i().browser.IOS_VERSION&&0===e.duration()},shouldPlayContentBehindAd:function(e){if(void 0===e&&(e=t),e)return!!e.ads.settings.liveCuePoints&&!i().browser.IS_IOS&&!i().browser.IS_ANDROID&&e.duration()===1/0;throw Error("shouldPlayContentBehindAd requires a player as a param")},shouldTakeSnapshots:function(e){return void 0===e&&(e=t),!this.shouldPlayContentBehindAd(e)&&!this.stitchedAds()},isInAdMode:function(){return this._state.isAdState()},isWaitingForAdBreak:function(){return this._state.isWaitingForAdBreak()},isContentResuming:function(){return this._state.isContentResuming()},isAdPlaying:function(){return this._state.inAdBreak()},inAdBreak:function(){return this._state.inAdBreak()},removeNativePoster:function(){var e=t.$(".vjs-tech");e&&e.removeAttribute("poster")},debug:function(){if(this.settings.debug){for(var e=arguments.length,t=Array(e),r=0;r<e;r++)t[r]=arguments[r];1===t.length&&"string"==typeof t[0]?i().log("ADS: "+t[0]):i().log.apply(i(),["ADS:"].concat(t))}}},t.ads.settings=r,r.stitchedAds=!!r.stitchedAds,r.stitchedAds?t.ads._state=new(I.getState("StitchedContentPlayback"))(t):t.ads._state=new(I.getState("BeforePreroll"))(t),t.ads._state.init(t),t.ads.cueTextTracks=_,t.ads.adMacroReplacement=b.bind(t),t.ads.contentSrc=t.currentSrc(),t.ads._seenInitialLoadstart=!1,t.on("loadstart",function(){if(!t.ads.inAdBreak()){var e=t.currentSrc();e!==t.ads.contentSrc&&(t.ads._seenInitialLoadstart&&t.trigger({type:"contentchanged"}),t.trigger({type:"contentupdate",oldValue:t.ads.contentSrc,newValue:e}),t.ads.contentSrc=e),t.ads._seenInitialLoadstart=!0}}),t.on("contentchanged",t.ads.reset);var o=function(){var e=t.textTracks();if(!t.ads.shouldPlayContentBehindAd(t)&&t.ads.inAdBreak()&&t.tech_.featuresNativeTextTracks&&i().browser.IS_IOS&&!Array.isArray(t.textTracks()))for(var r=0;r<e.length;r++){var n=e[r];"showing"===n.mode&&(n.mode="disabled")}};t.ready(function(){t.textTracks().addEventListener("change",o)}),t.on(["play","playing","ended","adsready","adscanceled","adskip","adserror","adtimeout","adended","ads-ad-started","contentchanged","dispose","contentresumed","readyforpostroll","nopreroll","nopostroll"],function(e){t.ads._state.handleEvent(e.type)}),t.on("dispose",function(){t.ads.reset(),t.textTracks().removeEventListener("change",o)}),g(),t.ads.listenToTcf=g};z.VERSION=f,!function(){if(i().getPlugin)return!!i().getPlugin("ads");var e=i().getComponent("Player");return!!(e&&e.prototype.ads)}(i())&&((i().registerPlugin||i().plugin)("ads",z),C()&&!i().usingContribAdsMiddleware_&&(i().use("*",A),i().usingContribAdsMiddleware_=!0,i().log.debug("Play middleware has been registered with videojs")));let K=z},74:(e,t,r)=>{var n=r(634),i=e.exports={WebVTT:r(715),VTTCue:r(118),VTTRegion:r(748)};n.vttjs=i,n.WebVTT=i.WebVTT;var o=i.VTTCue,u=i.VTTRegion,l=n.VTTCue,c=n.VTTRegion;i.shim=function(){n.VTTCue=o,n.VTTRegion=u},i.restore=function(){n.VTTCue=l,n.VTTRegion=c},n.VTTCue||i.shim()},715:(e,t,r)=>{var n=r(474),i=Object.create||function(){function e(){}return function(t){if(1!=arguments.length)throw Error("Object.create shim only accepts one parameter.");return e.prototype=t,new e}}();function o(e,t){this.name="ParsingError",this.code=e.code,this.message=t||e.message}function u(e){function t(e,t,r,n){return 3600*(0|e)+60*(0|t)+(0|r)+(0|n)/1e3}var r=e.match(/^(\d+):(\d{1,2})(:\d{1,2})?\.(\d{3})/);return r?r[3]?t(r[1],r[2],r[3].replace(":",""),r[4]):r[1]>59?t(r[1],r[2],0,r[4]):t(0,r[1],r[2],r[4]):null}function l(){this.values=i(null)}function c(e,t,r,n){var i=n?e.split(n):[e];for(var o in i)if("string"==typeof i[o]){var u=i[o].split(r);2===u.length&&t(u[0].trim(),u[1].trim())}}o.prototype=i(Error.prototype),o.prototype.constructor=o,o.Errors={BadSignature:{code:0,message:"Malformed WebVTT signature."},BadTimeStamp:{code:1,message:"Malformed time stamp."}},l.prototype={set:function(e,t){this.get(e)||""===t||(this.values[e]=t)},get:function(e,t,r){return r?this.has(e)?this.values[e]:t[r]:this.has(e)?this.values[e]:t},has:function(e){return e in this.values},alt:function(e,t,r){for(var n=0;n<r.length;++n)if(t===r[n]){this.set(e,t);break}},integer:function(e,t){/^-?\d+$/.test(t)&&this.set(e,parseInt(t,10))},percent:function(e,t){return!!(t.match(/^([\d]{1,3})(\.[\d]*)?%$/)&&(t=parseFloat(t))>=0&&t<=100)&&(this.set(e,t),!0)}};var f=n.createElement&&n.createElement("textarea"),d={c:"span",i:"i",b:"b",u:"u",ruby:"ruby",rt:"rt",v:"span",lang:"span"},h={white:"rgba(255,255,255,1)",lime:"rgba(0,255,0,1)",cyan:"rgba(0,255,255,1)",red:"rgba(255,0,0,1)",yellow:"rgba(255,255,0,1)",magenta:"rgba(255,0,255,1)",blue:"rgba(0,0,255,1)",black:"rgba(0,0,0,1)"},p={v:"title",lang:"lang"},m={rt:"ruby"};function g(e,t){for(var r,n=e.document.createElement("div"),i=n,o=[];null!==(r=function(){if(!t)return null;var e,r=t.match(/^([^<]*)(<[^>]*>?)?/);return e=r[1]?r[1]:r[2],t=t.substr(e.length),e}());)if("<"!==r[0])i.appendChild(e.document.createTextNode((l=r,f.innerHTML=l,l=f.textContent,f.textContent="",l)));else{if("/"===r[1]){o.length&&o[o.length-1]===r.substr(2).replace(">","")&&(o.pop(),i=i.parentNode);continue}var l,c,g,y,v=u(r.substr(1,r.length-2));if(v){y=e.document.createProcessingInstruction("timestamp",v),i.appendChild(y);continue}var b=r.match(/^<([^.\s/0-9>]+)(\.[^\s\\>]+)?([^>\\]+)?(\\?)>?$/);if(!b||!(y=function(t,r){var n=d[t];if(!n)return null;var i=e.document.createElement(n),o=p[t];return o&&r&&(i[o]=r.trim()),i}(b[1],b[3]))||(c=i,m[(g=y).localName]&&m[g.localName]!==c.localName))continue;if(b[2]){var _=b[2].split(".");_.forEach(function(e){var t=/^bg_/.test(e),r=t?e.slice(3):e;if(h.hasOwnProperty(r)){var n=t?"background-color":"color",i=h[r];y.style[n]=i}}),y.className=_.join(" ")}o.push(b[1]),i.appendChild(y),i=y}return n}var y=[[1470,1470],[1472,1472],[1475,1475],[1478,1478],[1488,1514],[1520,1524],[1544,1544],[1547,1547],[1549,1549],[1563,1563],[1566,1610],[1645,1647],[1649,1749],[1765,1766],[1774,1775],[1786,1805],[1807,1808],[1810,1839],[1869,1957],[1969,1969],[1984,2026],[2036,2037],[2042,2042],[2048,2069],[2074,2074],[2084,2084],[2088,2088],[2096,2110],[2112,2136],[2142,2142],[2208,2208],[2210,2220],[8207,8207],[64285,64285],[64287,64296],[64298,64310],[64312,64316],[64318,64318],[64320,64321],[64323,64324],[64326,64449],[64467,64829],[64848,64911],[64914,64967],[65008,65020],[65136,65140],[65142,65276],[67584,67589],[67592,67592],[67594,67637],[67639,67640],[67644,67644],[67647,67669],[67671,67679],[67840,67867],[67872,67897],[67903,67903],[67968,68023],[68030,68031],[68096,68096],[68112,68115],[68117,68119],[68121,68147],[68160,68167],[68176,68184],[68192,68223],[68352,68405],[68416,68437],[68440,68466],[68472,68479],[68608,68680],[126464,126467],[126469,126495],[126497,126498],[126500,126500],[126503,126503],[126505,126514],[126516,126519],[126521,126521],[126523,126523],[126530,126530],[126535,126535],[126537,126537],[126539,126539],[126541,126543],[126545,126546],[126548,126548],[126551,126551],[126553,126553],[126555,126555],[126557,126557],[126559,126559],[126561,126562],[126564,126564],[126567,126570],[126572,126578],[126580,126583],[126585,126588],[126590,126590],[126592,126601],[126603,126619],[126625,126627],[126629,126633],[126635,126651],[1114109,1114109]];function v(){}function b(e,t,r){v.call(this),this.cue=t,this.cueDiv=g(e,t.text);var n={color:"rgba(255, 255, 255, 1)",backgroundColor:"rgba(0, 0, 0, 0.8)",position:"relative",left:0,right:0,top:0,bottom:0,display:"inline",writingMode:""===t.vertical?"horizontal-tb":"lr"===t.vertical?"vertical-lr":"vertical-rl",unicodeBidi:"plaintext"};this.applyStyles(n,this.cueDiv),this.div=e.document.createElement("div"),n={direction:function(e){var t=[],r="";if(!e||!e.childNodes)return"ltr";function n(e,t){for(var r=t.childNodes.length-1;r>=0;r--)e.push(t.childNodes[r])}for(n(t,e);r=function e(t){if(!t||!t.length)return null;var r=t.pop(),i=r.textContent||r.innerText;if(i){var o=i.match(/^.*(\n|\r)/);return o?(t.length=0,o[0]):i}return"ruby"===r.tagName?e(t):r.childNodes?(n(t,r),e(t)):void 0}(t);)for(var i=0;i<r.length;i++)if(function(e){for(var t=0;t<y.length;t++){var r=y[t];if(e>=r[0]&&e<=r[1])return!0}return!1}(r.charCodeAt(i)))return"rtl";return"ltr"}(this.cueDiv),writingMode:""===t.vertical?"horizontal-tb":"lr"===t.vertical?"vertical-lr":"vertical-rl",unicodeBidi:"plaintext",textAlign:"middle"===t.align?"center":t.align,font:r.font,whiteSpace:"pre-line",position:"absolute"},this.applyStyles(n),this.div.appendChild(this.cueDiv);var i=0;switch(t.positionAlign){case"start":i=t.position;break;case"center":i=t.position-t.size/2;break;case"end":i=t.position-t.size}""===t.vertical?this.applyStyles({left:this.formatStyle(i,"%"),width:this.formatStyle(t.size,"%")}):this.applyStyles({top:this.formatStyle(i,"%"),height:this.formatStyle(t.size,"%")}),this.move=function(e){this.applyStyles({top:this.formatStyle(e.top,"px"),bottom:this.formatStyle(e.bottom,"px"),left:this.formatStyle(e.left,"px"),right:this.formatStyle(e.right,"px"),height:this.formatStyle(e.height,"px"),width:this.formatStyle(e.width,"px")})}}function _(e){var t,r,n,i;if(e.div){r=e.div.offsetHeight,n=e.div.offsetWidth,i=e.div.offsetTop;var o=(o=e.div.childNodes)&&(o=o[0])&&o.getClientRects&&o.getClientRects();e=e.div.getBoundingClientRect(),t=o?Math.max(o[0]&&o[0].height||0,e.height/o.length):0}this.left=e.left,this.right=e.right,this.top=e.top||i,this.height=e.height||r,this.bottom=e.bottom||i+(e.height||r),this.width=e.width||n,this.lineHeight=void 0!==t?t:e.lineHeight}function T(){}v.prototype.applyStyles=function(e,t){for(var r in t=t||this.div,e)e.hasOwnProperty(r)&&(t.style[r]=e[r])},v.prototype.formatStyle=function(e,t){return 0===e?0:e+t},b.prototype=i(v.prototype),b.prototype.constructor=b,_.prototype.move=function(e,t){switch(t=void 0!==t?t:this.lineHeight,e){case"+x":this.left+=t,this.right+=t;break;case"-x":this.left-=t,this.right-=t;break;case"+y":this.top+=t,this.bottom+=t;break;case"-y":this.top-=t,this.bottom-=t}},_.prototype.overlaps=function(e){return this.left<e.right&&this.right>e.left&&this.top<e.bottom&&this.bottom>e.top},_.prototype.overlapsAny=function(e){for(var t=0;t<e.length;t++)if(this.overlaps(e[t]))return!0;return!1},_.prototype.within=function(e){return this.top>=e.top&&this.bottom<=e.bottom&&this.left>=e.left&&this.right<=e.right},_.prototype.overlapsOppositeAxis=function(e,t){switch(t){case"+x":return this.left<e.left;case"-x":return this.right>e.right;case"+y":return this.top<e.top;case"-y":return this.bottom>e.bottom}},_.prototype.intersectPercentage=function(e){return Math.max(0,Math.min(this.right,e.right)-Math.max(this.left,e.left))*Math.max(0,Math.min(this.bottom,e.bottom)-Math.max(this.top,e.top))/(this.height*this.width)},_.prototype.toCSSCompatValues=function(e){return{top:this.top-e.top,bottom:e.bottom-this.bottom,left:this.left-e.left,right:e.right-this.right,height:this.height,width:this.width}},_.getSimpleBoxPosition=function(e){var t=e.div?e.div.offsetHeight:e.tagName?e.offsetHeight:0,r=e.div?e.div.offsetWidth:e.tagName?e.offsetWidth:0,n=e.div?e.div.offsetTop:e.tagName?e.offsetTop:0;return{left:(e=e.div?e.div.getBoundingClientRect():e.tagName?e.getBoundingClientRect():e).left,right:e.right,top:e.top||n,height:e.height||t,bottom:e.bottom||n+(e.height||t),width:e.width||r}},T.StringDecoder=function(){return{decode:function(e){if(!e)return"";if("string"!=typeof e)throw Error("Error - expected string data.");return decodeURIComponent(encodeURIComponent(e))}}},T.convertCueToDOMTree=function(e,t){return e&&t?g(e,t):null},T.processCues=function(e,t,r){if(!e||!t||!r)return null;for(;r.firstChild;)r.removeChild(r.firstChild);var n=e.document.createElement("div");if(n.style.position="absolute",n.style.left="0",n.style.right="0",n.style.top="0",n.style.bottom="0",n.style.margin="1.5%",r.appendChild(n),function(e){for(var t=0;t<e.length;t++)if(e[t].hasBeenReset||!e[t].displayState)return!0;return!1}(t)){var i=[],o=_.getSimpleBoxPosition(n),u={font:Math.round(.05*o.height*100)/100+"px sans-serif"};!function(){for(var r,l,c=0;c<t.length;c++)l=t[c],r=new b(e,l,u),n.appendChild(r.div),function(e,t,r,n){var i=new _(t),o=t.cue,u=function(e){if("number"==typeof e.line&&(e.snapToLines||e.line>=0&&e.line<=100))return e.line;if(!e.track||!e.track.textTrackList||!e.track.textTrackList.mediaElement)return -1;for(var t=e.track,r=t.textTrackList,n=0,i=0;i<r.length&&r[i]!==t;i++)"showing"===r[i].mode&&n++;return -1*++n}(o),l=[];if(o.snapToLines){switch(o.vertical){case"":l=["+y","-y"],c="height";break;case"rl":l=["+x","-x"],c="width";break;case"lr":l=["-x","+x"],c="width"}var c,f=i.lineHeight,d=f*Math.round(u),h=r[c]+f,p=l[0];Math.abs(d)>h&&(d=(d<0?-1:1)*(Math.ceil(h/f)*f)),u<0&&(d+=""===o.vertical?r.height:r.width,l=l.reverse()),i.move(p,d)}else{var m=i.lineHeight/r.height*100;switch(o.lineAlign){case"center":u-=m/2;break;case"end":u-=m}switch(o.vertical){case"":t.applyStyles({top:t.formatStyle(u,"%")});break;case"rl":t.applyStyles({left:t.formatStyle(u,"%")});break;case"lr":t.applyStyles({right:t.formatStyle(u,"%")})}l=["+y","-x","+x","-y"],i=new _(t)}var g=function(e,t){for(var i,o=new _(e),u=1,l=0;l<t.length;l++){for(;e.overlapsOppositeAxis(r,t[l])||e.within(r)&&e.overlapsAny(n);)e.move(t[l]);if(e.within(r))return e;var c=e.intersectPercentage(r);u>c&&(i=new _(e),u=c),e=new _(o)}return i||o}(i,l);t.move(g.toCSSCompatValues(r))}(0,r,o,i),l.displayState=r.div,i.push(_.getSimpleBoxPosition(r))}()}else for(var l=0;l<t.length;l++)n.appendChild(t[l].displayState)},T.Parser=function(e,t,r){r||(r=t,t={}),t||(t={}),this.window=e,this.vttjs=t,this.state="INITIAL",this.buffer="",this.decoder=r||new TextDecoder("utf8"),this.regionList=[]},T.Parser.prototype={reportOrThrowError:function(e){if(!(e instanceof o))throw e;this.onparsingerror&&this.onparsingerror(e)},parse:function(e){var t,r,n=this;function i(){for(var e=n.buffer,t=0;t<e.length&&"\r"!==e[t]&&"\n"!==e[t];)++t;var r=e.substr(0,t);return"\r"===e[t]&&++t,"\n"===e[t]&&++t,n.buffer=e.substr(t),r}e&&(n.buffer+=n.decoder.decode(e,{stream:!0}));try{if("INITIAL"===n.state){if(!/\r\n|\n/.test(n.buffer))return this;var f=(t=i()).match(/^WEBVTT([ \t].*)?$/);if(!f||!f[0])throw new o(o.Errors.BadSignature);n.state="HEADER"}for(var d=!1;n.buffer&&/\r\n|\n/.test(n.buffer);)switch(d?d=!1:t=i(),n.state){case"HEADER":/:/.test(t)?(r=t).match(/X-TIMESTAMP-MAP/)?c(r,function(e,t){"X-TIMESTAMP-MAP"===e&&function(e){var t=new l;c(e,function(e,r){switch(e){case"MPEGT":t.integer(e+"S",r);break;case"LOCA":t.set(e+"L",u(r))}},/[^\d]:/,/,/),n.ontimestampmap&&n.ontimestampmap({MPEGTS:t.get("MPEGTS"),LOCAL:t.get("LOCAL")})}(t)},/=/):c(r,function(e,t){"Region"===e&&function(e){var t=new l;if(c(e,function(e,r){switch(e){case"id":t.set(e,r);break;case"width":t.percent(e,r);break;case"lines":t.integer(e,r);break;case"regionanchor":case"viewportanchor":var n=r.split(",");if(2!==n.length)break;var i=new l;if(i.percent("x",n[0]),i.percent("y",n[1]),!i.has("x")||!i.has("y"))break;t.set(e+"X",i.get("x")),t.set(e+"Y",i.get("y"));break;case"scroll":t.alt(e,r,["up"])}},/=/,/\s/),t.has("id")){var r=new(n.vttjs.VTTRegion||n.window.VTTRegion);r.width=t.get("width",100),r.lines=t.get("lines",3),r.regionAnchorX=t.get("regionanchorX",0),r.regionAnchorY=t.get("regionanchorY",100),r.viewportAnchorX=t.get("viewportanchorX",0),r.viewportAnchorY=t.get("viewportanchorY",100),r.scroll=t.get("scroll",""),n.onregion&&n.onregion(r),n.regionList.push({id:t.get("id"),region:r})}}(t)},/:/):t||(n.state="ID");continue;case"NOTE":t||(n.state="ID");continue;case"ID":if(/^NOTE($|[ \t])/.test(t)){n.state="NOTE";break}if(!t)continue;n.cue=new(n.vttjs.VTTCue||n.window.VTTCue)(0,0,"");try{n.cue.align="center"}catch(e){n.cue.align="middle"}if(n.state="CUE",-1===t.indexOf("-->")){n.cue.id=t;continue}case"CUE":try{(function(e,t,r){var n=e;function i(){var t=u(e);if(null===t)throw new o(o.Errors.BadTimeStamp,"Malformed timestamp: "+n);return e=e.replace(/^[^\sa-zA-Z-]+/,""),t}function f(){e=e.replace(/^\s+/,"")}if(f(),t.startTime=i(),f(),"-->"!==e.substr(0,3))throw new o(o.Errors.BadTimeStamp,"Malformed time stamp (time stamps must be separated by '-->'): "+n);e=e.substr(3),f(),t.endTime=i(),f(),function(e,t){var n=new l;c(e,function(e,t){switch(e){case"region":for(var i=r.length-1;i>=0;i--)if(r[i].id===t){n.set(e,r[i].region);break}break;case"vertical":n.alt(e,t,["rl","lr"]);break;case"line":var o=t.split(","),u=o[0];n.integer(e,u),n.percent(e,u)&&n.set("snapToLines",!1),n.alt(e,u,["auto"]),2===o.length&&n.alt("lineAlign",o[1],["start","center","end"]);break;case"position":o=t.split(","),n.percent(e,o[0]),2===o.length&&n.alt("positionAlign",o[1],["start","center","end"]);break;case"size":n.percent(e,t);break;case"align":n.alt(e,t,["start","center","end","left","right"])}},/:/,/\s/),t.region=n.get("region",null),t.vertical=n.get("vertical","");try{t.line=n.get("line","auto")}catch(e){}t.lineAlign=n.get("lineAlign","start"),t.snapToLines=n.get("snapToLines",!0),t.size=n.get("size",100);try{t.align=n.get("align","center")}catch(e){t.align=n.get("align","middle")}try{t.position=n.get("position","auto")}catch(e){t.position=n.get("position",{start:0,left:0,center:50,middle:50,end:100,right:100},t.align)}t.positionAlign=n.get("positionAlign",{start:"start",left:"start",center:"center",middle:"center",end:"end",right:"end"},t.align)}(e,t)})(t,n.cue,n.regionList)}catch(e){n.reportOrThrowError(e),n.cue=null,n.state="BADCUE";continue}n.state="CUETEXT";continue;case"CUETEXT":var h=-1!==t.indexOf("-->");if(!t||h&&(d=!0)){n.oncue&&n.oncue(n.cue),n.cue=null,n.state="ID";continue}n.cue.text&&(n.cue.text+="\n"),n.cue.text+=t.replace(/\u2028/g,"\n").replace(/u2029/g,"\n");continue;case"BADCUE":t||(n.state="ID");continue}}catch(e){n.reportOrThrowError(e),"CUETEXT"===n.state&&n.cue&&n.oncue&&n.oncue(n.cue),n.cue=null,n.state="INITIAL"===n.state?"BADWEBVTT":"BADCUE"}return this},flush:function(){try{if(this.buffer+=this.decoder.decode(),(this.cue||"HEADER"===this.state)&&(this.buffer+="\n\n",this.parse()),"INITIAL"===this.state)throw new o(o.Errors.BadSignature)}catch(e){this.reportOrThrowError(e)}return this.onflush&&this.onflush(),this}},e.exports=T},118:e=>{var t={"":1,lr:1,rl:1},r={start:1,center:1,end:1,left:1,right:1,auto:1,"line-left":1,"line-right":1};function n(e){return"string"==typeof e&&!!r[e.toLowerCase()]&&e.toLowerCase()}function i(e,r,i){this.hasBeenReset=!1;var o="",u=!1,l=e,c=r,f=i,d=null,h="",p=!0,m="auto",g="start",y="auto",v="auto",b=100,_="center";Object.defineProperties(this,{id:{enumerable:!0,get:function(){return o},set:function(e){o=""+e}},pauseOnExit:{enumerable:!0,get:function(){return u},set:function(e){u=!!e}},startTime:{enumerable:!0,get:function(){return l},set:function(e){if("number"!=typeof e)throw TypeError("Start time must be set to a number.");l=e,this.hasBeenReset=!0}},endTime:{enumerable:!0,get:function(){return c},set:function(e){if("number"!=typeof e)throw TypeError("End time must be set to a number.");c=e,this.hasBeenReset=!0}},text:{enumerable:!0,get:function(){return f},set:function(e){f=""+e,this.hasBeenReset=!0}},region:{enumerable:!0,get:function(){return d},set:function(e){d=e,this.hasBeenReset=!0}},vertical:{enumerable:!0,get:function(){return h},set:function(e){var r="string"==typeof e&&!!t[e.toLowerCase()]&&e.toLowerCase();if(!1===r)throw SyntaxError("Vertical: an invalid or illegal direction string was specified.");h=r,this.hasBeenReset=!0}},snapToLines:{enumerable:!0,get:function(){return p},set:function(e){p=!!e,this.hasBeenReset=!0}},line:{enumerable:!0,get:function(){return m},set:function(e){if("number"!=typeof e&&"auto"!==e)throw SyntaxError("Line: an invalid number or illegal string was specified.");m=e,this.hasBeenReset=!0}},lineAlign:{enumerable:!0,get:function(){return g},set:function(e){var t=n(e);t?(g=t,this.hasBeenReset=!0):console.warn("lineAlign: an invalid or illegal string was specified.")}},position:{enumerable:!0,get:function(){return y},set:function(e){if(e<0||e>100)throw Error("Position must be between 0 and 100.");y=e,this.hasBeenReset=!0}},positionAlign:{enumerable:!0,get:function(){return v},set:function(e){var t=n(e);t?(v=t,this.hasBeenReset=!0):console.warn("positionAlign: an invalid or illegal string was specified.")}},size:{enumerable:!0,get:function(){return b},set:function(e){if(e<0||e>100)throw Error("Size must be between 0 and 100.");b=e,this.hasBeenReset=!0}},align:{enumerable:!0,get:function(){return _},set:function(e){var t=n(e);if(!t)throw SyntaxError("align: an invalid or illegal alignment string was specified.");_=t,this.hasBeenReset=!0}}}),this.displayState=void 0}i.prototype.getCueAsHTML=function(){return WebVTT.convertCueToDOMTree(window,this.text)},e.exports=i},748:e=>{var t={"":!0,up:!0};function r(e){return"number"==typeof e&&e>=0&&e<=100}e.exports=function(){var e=100,n=3,i=0,o=100,u=0,l=100,c="";Object.defineProperties(this,{width:{enumerable:!0,get:function(){return e},set:function(t){if(!r(t))throw Error("Width must be between 0 and 100.");e=t}},lines:{enumerable:!0,get:function(){return n},set:function(e){if("number"!=typeof e)throw TypeError("Lines must be set to a number.");n=e}},regionAnchorY:{enumerable:!0,get:function(){return o},set:function(e){if(!r(e))throw Error("RegionAnchorX must be between 0 and 100.");o=e}},regionAnchorX:{enumerable:!0,get:function(){return i},set:function(e){if(!r(e))throw Error("RegionAnchorY must be between 0 and 100.");i=e}},viewportAnchorY:{enumerable:!0,get:function(){return l},set:function(e){if(!r(e))throw Error("ViewportAnchorY must be between 0 and 100.");l=e}},viewportAnchorX:{enumerable:!0,get:function(){return u},set:function(e){if(!r(e))throw Error("ViewportAnchorX must be between 0 and 100.");u=e}},scroll:{enumerable:!0,get:function(){return c},set:function(e){var r="string"==typeof e&&!!t[e.toLowerCase()]&&e.toLowerCase();!1===r?console.warn("Scroll: an invalid or illegal string was specified."):c=r}}})}},596:(e,t,r)=>{var n;!function(){function i(e,t,r){return e.call.apply(e.bind,arguments)}function o(e,t,r){if(!e)throw Error();if(2<arguments.length){var n=Array.prototype.slice.call(arguments,2);return function(){var r=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(r,n),e.apply(t,r)}}return function(){return e.apply(t,arguments)}}function u(e,t,r){return(u=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?i:o).apply(null,arguments)}var l=Date.now||function(){return+new Date};function c(e,t){this.a=e,this.o=t||e,this.c=this.o.document}var f=!!window.FontFace;function d(e,t,r,n){if(t=e.c.createElement(t),r)for(var i in r)r.hasOwnProperty(i)&&("style"==i?t.style.cssText=r[i]:t.setAttribute(i,r[i]));return n&&t.appendChild(e.c.createTextNode(n)),t}function h(e,t,r){(e=e.c.getElementsByTagName(t)[0])||(e=document.documentElement),e.insertBefore(r,e.lastChild)}function p(e){e.parentNode&&e.parentNode.removeChild(e)}function m(e,t,r){t=t||[],r=r||[];for(var n=e.className.split(/\s+/),i=0;i<t.length;i+=1){for(var o=!1,u=0;u<n.length;u+=1)if(t[i]===n[u]){o=!0;break}o||n.push(t[i])}for(t=[],i=0;i<n.length;i+=1){for(o=!1,u=0;u<r.length;u+=1)if(n[i]===r[u]){o=!0;break}o||t.push(n[i])}e.className=t.join(" ").replace(/\s+/g," ").replace(/^\s+|\s+$/,"")}function g(e,t){for(var r=e.className.split(/\s+/),n=0,i=r.length;n<i;n++)if(r[n]==t)return!0;return!1}function y(e,t,r){function n(){l&&i&&o&&(l(u),l=null)}t=d(e,"link",{rel:"stylesheet",href:t,media:"all"});var i=!1,o=!0,u=null,l=r||null;f?(t.onload=function(){i=!0,n()},t.onerror=function(){i=!0,u=Error("Stylesheet failed to load"),n()}):setTimeout(function(){i=!0,n()},0),h(e,"head",t)}function v(e,t,r,n){var i=e.c.getElementsByTagName("head")[0];if(i){var o=d(e,"script",{src:t}),u=!1;return o.onload=o.onreadystatechange=function(){u||this.readyState&&"loaded"!=this.readyState&&"complete"!=this.readyState||(u=!0,r&&r(null),o.onload=o.onreadystatechange=null,"HEAD"==o.parentNode.tagName&&i.removeChild(o))},i.appendChild(o),setTimeout(function(){u||(u=!0,r&&r(Error("Script load timeout")))},n||5e3),o}return null}function b(){this.a=0,this.c=null}function _(e){return e.a++,function(){e.a--,T(e)}}function T(e){0==e.a&&e.c&&(e.c(),e.c=null)}function E(e){this.a=e||"-"}function S(e,t){this.c=e,this.f=4,this.a="n";var r=(t||"n4").match(/^([nio])([1-9])$/i);r&&(this.a=r[1],this.f=parseInt(r[2],10))}function w(e){var t=[];e=e.split(/,\s*/);for(var r=0;r<e.length;r++){var n=e[r].replace(/['"]/g,"");-1!=n.indexOf(" ")||/^\d/.test(n)?t.push("'"+n+"'"):t.push(n)}return t.join(",")}function A(e){return e.a+e.f}function C(e){var t="normal";return"o"===e.a?t="oblique":"i"===e.a&&(t="italic"),t}function I(e,t){this.c=e,this.f=e.o.document.documentElement,this.h=t,this.a=new E("-"),this.j=!1!==t.events,this.g=!1!==t.classes}function O(e){if(e.g){var t=g(e.f,e.a.c("wf","active")),r=[],n=[e.a.c("wf","loading")];t||r.push(e.a.c("wf","inactive")),m(e.f,r,n)}R(e,"inactive")}function R(e,t,r){e.j&&e.h[t]&&(r?e.h[t](r.c,A(r)):e.h[t]())}function P(){this.c={}}function k(e,t){this.c=e,this.f=t,this.a=d(this.c,"span",{"aria-hidden":"true"},this.f)}function D(e){h(e.c,"body",e.a)}function N(e){return"display:block;position:absolute;top:-9999px;left:-9999px;font-size:300px;width:auto;height:auto;line-height:normal;margin:0;padding:0;font-variant:normal;white-space:nowrap;font-family:"+w(e.c)+";font-style:"+C(e)+";font-weight:"+e.f+"00;"}function L(e,t,r,n,i,o){this.g=e,this.j=t,this.a=n,this.c=r,this.f=i||3e3,this.h=o||void 0}function x(e,t,r,n,i,o,u){this.v=e,this.B=t,this.c=r,this.a=n,this.s=u||"BESbswy",this.f={},this.w=i||3e3,this.u=o||null,this.m=this.j=this.h=this.g=null,this.g=new k(this.c,this.s),this.h=new k(this.c,this.s),this.j=new k(this.c,this.s),this.m=new k(this.c,this.s),e=N(e=new S(this.a.c+",serif",A(this.a))),this.g.a.style.cssText=e,e=N(e=new S(this.a.c+",sans-serif",A(this.a))),this.h.a.style.cssText=e,e=N(e=new S("serif",A(this.a))),this.j.a.style.cssText=e,e=N(e=new S("sans-serif",A(this.a))),this.m.a.style.cssText=e,D(this.g),D(this.h),D(this.j),D(this.m)}E.prototype.c=function(e){for(var t=[],r=0;r<arguments.length;r++)t.push(arguments[r].replace(/[\W_]+/g,"").toLowerCase());return t.join(this.a)},L.prototype.start=function(){var e=this.c.o.document,t=this,r=l(),n=new Promise(function(n,i){!function o(){var u;l()-r>=t.f?i():e.fonts.load(C(u=t.a)+" "+u.f+"00 300px "+w(u.c),t.h).then(function(e){1<=e.length?n():setTimeout(o,25)},function(){i()})}()}),i=null;Promise.race([new Promise(function(e,r){i=setTimeout(r,t.f)}),n]).then(function(){i&&(clearTimeout(i),i=null),t.g(t.a)},function(){t.j(t.a)})};var j={D:"serif",C:"sans-serif"},M=null;function F(){if(null===M){var e=/AppleWebKit\/([0-9]+)(?:\.([0-9]+))/.exec(window.navigator.userAgent);M=!!e&&(536>parseInt(e[1],10)||536===parseInt(e[1],10)&&11>=parseInt(e[2],10))}return M}function B(e,t,r){for(var n in j)if(j.hasOwnProperty(n)&&t===e.f[j[n]]&&r===e.f[j[n]])return!0;return!1}function U(e,t){setTimeout(u(function(){p(this.g.a),p(this.h.a),p(this.j.a),p(this.m.a),t(this.a)},e),0)}function q(e,t,r){this.c=e,this.a=t,this.f=0,this.m=this.j=!1,this.s=r}x.prototype.start=function(){this.f.serif=this.j.a.offsetWidth,this.f["sans-serif"]=this.m.a.offsetWidth,this.A=l(),function e(t){var r,n=t.g.a.offsetWidth,i=t.h.a.offsetWidth;(r=n===t.f.serif&&i===t.f["sans-serif"])||(r=F()&&B(t,n,i)),r?l()-t.A>=t.w?F()&&B(t,n,i)&&(null===t.u||t.u.hasOwnProperty(t.a.c))?U(t,t.v):U(t,t.B):setTimeout(u(function(){e(this)},t),50):U(t,t.v)}(this)};var H=null;function V(e){0==--e.f&&e.j&&(e.m?((e=e.a).g&&m(e.f,[e.a.c("wf","active")],[e.a.c("wf","loading"),e.a.c("wf","inactive")]),R(e,"active")):O(e.a))}function G(e){this.j=e,this.a=new P,this.h=0,this.f=this.g=!0}function Y(e,t){this.c=e,this.a=t}function z(e,t){this.c=e,this.a=t}function K(e,t){this.c=e||W,this.a=[],this.f=[],this.g=t||""}q.prototype.g=function(e){var t=this.a;t.g&&m(t.f,[t.a.c("wf",e.c,A(e).toString(),"active")],[t.a.c("wf",e.c,A(e).toString(),"loading"),t.a.c("wf",e.c,A(e).toString(),"inactive")]),R(t,"fontactive",e),this.m=!0,V(this)},q.prototype.h=function(e){var t=this.a;if(t.g){var r=g(t.f,t.a.c("wf",e.c,A(e).toString(),"active")),n=[],i=[t.a.c("wf",e.c,A(e).toString(),"loading")];r||n.push(t.a.c("wf",e.c,A(e).toString(),"inactive")),m(t.f,n,i)}R(t,"fontinactive",e),V(this)},G.prototype.load=function(e){this.c=new c(this.j,e.context||this.j),this.g=!1!==e.events,this.f=!1!==e.classes,function(e,t,r){var n,i=[],o=r.timeout;(n=t).g&&m(n.f,[n.a.c("wf","loading")]),R(n,"loading"),i=function(e,t,r){var n,i=[];for(n in t)if(t.hasOwnProperty(n)){var o=e.c[n];o&&i.push(o(t[n],r))}return i}(e.a,r,e.c);var l=new q(e.c,t,o);for(e.h=i.length,t=0,r=i.length;t<r;t++)i[t].load(function(t,r,n){(function(e,t,r,n,i){var o=0==--e.h;(e.f||e.g)&&setTimeout(function(){var e=i||null,l=n||{};if(0===r.length&&o)O(t.a);else{t.f+=r.length,o&&(t.j=o);var c,f=[];for(c=0;c<r.length;c++){var d=r[c],h=l[d.c],p=t.a,g=d;if(p.g&&m(p.f,[p.a.c("wf",g.c,A(g).toString(),"loading")]),R(p,"fontloading",g),p=null,null===H){if(window.FontFace){g=/Gecko.*Firefox\/(\d+)/.exec(window.navigator.userAgent);var y=/OS X.*Version\/10\..*Safari/.exec(window.navigator.userAgent)&&/Apple/.exec(window.navigator.vendor);H=g?42<parseInt(g[1],10):!y}else H=!1}p=H?new L(u(t.g,t),u(t.h,t),t.c,d,t.s,h):new x(u(t.g,t),u(t.h,t),t.c,d,t.s,e,h),f.push(p)}for(c=0;c<f.length;c++)f[c].start()}},0)})(e,l,t,r,n)})}(this,new I(this.c,e),e)},Y.prototype.load=function(e){var t=this,r=t.a.projectId,n=t.a.version;if(r){var i=t.c.o;v(this.c,(t.a.api||"https://fast.fonts.net/jsapi")+"/"+r+".js"+(n?"?v="+n:""),function(n){n?e([]):(i["__MonotypeConfiguration__"+r]=function(){return t.a},function t(){if(i["__mti_fntLst"+r]){var n,o=i["__mti_fntLst"+r](),u=[];if(o)for(var l=0;l<o.length;l++){var c=o[l].fontfamily;null!=o[l].fontStyle&&null!=o[l].fontWeight?(n=o[l].fontStyle+o[l].fontWeight,u.push(new S(c,n))):u.push(new S(c))}e(u)}else setTimeout(function(){t()},50)}())}).id="__MonotypeAPIScript__"+r}else e([])},z.prototype.load=function(e){var t,r,n=this.a.urls||[],i=this.a.families||[],o=this.a.testStrings||{},u=new b;for(t=0,r=n.length;t<r;t++)y(this.c,n[t],_(u));var l=[];for(t=0,r=i.length;t<r;t++)if((n=i[t].split(":"))[1])for(var c=n[1].split(","),f=0;f<c.length;f+=1)l.push(new S(n[0],c[f]));else l.push(new S(n[0]));u.c=function(){e(l,o)},T(u)};var W="https://fonts.googleapis.com/css";function X(e){this.f=e,this.a=[],this.c={}}var Q={latin:"BESbswy","latin-ext":"\xe7\xf6\xfcğş",cyrillic:"йяЖ",greek:"αβΣ",khmer:"កខគ",Hanuman:"កខគ"},$={thin:"1",extralight:"2","extra-light":"2",ultralight:"2","ultra-light":"2",light:"3",regular:"4",book:"4",medium:"5","semi-bold":"6",semibold:"6","demi-bold":"6",demibold:"6",bold:"7","extra-bold":"8",extrabold:"8","ultra-bold":"8",ultrabold:"8",black:"9",heavy:"9",l:"3",r:"4",b:"7"},J={i:"i",italic:"i",n:"n",normal:"n"},Z=/^(thin|(?:(?:extra|ultra)-?)?light|regular|book|medium|(?:(?:semi|demi|extra|ultra)-?)?bold|black|heavy|l|r|b|[1-9]00)?(n|i|normal|italic)?$/;function ee(e,t){this.c=e,this.a=t}var et={Arimo:!0,Cousine:!0,Tinos:!0};function er(e,t){this.c=e,this.a=t}function en(e,t){this.c=e,this.f=t,this.a=[]}ee.prototype.load=function(e){var t=new b,r=this.c,n=new K(this.a.api,this.a.text),i=this.a.families;!function(e,t){for(var r=t.length,n=0;n<r;n++){var i=t[n].split(":");3==i.length&&e.f.push(i.pop());var o="";2==i.length&&""!=i[1]&&(o=":"),e.a.push(i.join(o))}}(n,i);var o=new X(i);(function(e){for(var t=e.f.length,r=0;r<t;r++){var n=e.f[r].split(":"),i=n[0].replace(/\+/g," "),o=["n4"];if(2<=n.length){if(l=[],c=n[1])for(var u,l,c,f=(c=c.split(",")).length,d=0;d<f;d++){if((u=c[d]).match(/^[\w-]+$/)){if(null==(h=Z.exec(u.toLowerCase())))u="";else{if(u=null==(u=h[2])||""==u?"n":J[u],null==(h=h[1])||""==h)h="4";else var h=$[h]||(isNaN(h)?"4":h.substr(0,1));u=[u,h].join("")}}else u="";u&&l.push(u)}0<l.length&&(o=l),3==n.length&&(l=[],0<(n=(n=n[2])?n.split(","):l).length&&(n=Q[n[0]])&&(e.c[i]=n))}for(e.c[i]||(n=Q[i])&&(e.c[i]=n),n=0;n<o.length;n+=1)e.a.push(new S(i,o[n]))}})(o),y(r,function(e){if(0==e.a.length)throw Error("No fonts to load!");if(-1!=e.c.indexOf("kit="))return e.c;for(var t=e.a.length,r=[],n=0;n<t;n++)r.push(e.a[n].replace(/ /g,"+"));return t=e.c+"?family="+r.join("%7C"),0<e.f.length&&(t+="&subset="+e.f.join(",")),0<e.g.length&&(t+="&text="+encodeURIComponent(e.g)),t}(n),_(t)),t.c=function(){e(o.a,o.c,et)},T(t)},er.prototype.load=function(e){var t=this.a.id,r=this.c.o;t?v(this.c,(this.a.api||"https://use.typekit.net")+"/"+t+".js",function(t){if(t)e([]);else if(r.Typekit&&r.Typekit.config&&r.Typekit.config.fn){t=r.Typekit.config.fn;for(var n=[],i=0;i<t.length;i+=2)for(var o=t[i],u=t[i+1],l=0;l<u.length;l++)n.push(new S(o,u[l]));try{r.Typekit.load({events:!1,classes:!1,async:!0})}catch(e){}e(n)}},2e3):e([])},en.prototype.load=function(e){var t,r=this.f.id,n=this.c.o,i=this;r?(n.__webfontfontdeckmodule__||(n.__webfontfontdeckmodule__={}),n.__webfontfontdeckmodule__[r]=function(t,r){for(var n=0,o=r.fonts.length;n<o;++n){var u=r.fonts[n];i.a.push(new S(u.name,function(e){var t=4,r="n",n=null;return e&&((n=e.match(/(normal|oblique|italic)/i))&&n[1]&&(r=n[1].substr(0,1).toLowerCase()),(n=e.match(/([1-9]00|normal|bold)/i))&&n[1]&&(/bold/i.test(n[1])?t=7:/[1-9]00/.test(n[1])&&(t=parseInt(n[1].substr(0,1),10)))),r+t}("font-weight:"+u.weight+";font-style:"+u.style)))}e(i.a)},v(this.c,(this.f.api||"https://f.fontdeck.com/s/css/js/")+((t=this.c).o.location.hostname||t.a.location.hostname)+"/"+r+".js",function(t){t&&e([])})):e([])};var ei=new G(window);ei.a.c.custom=function(e,t){return new z(t,e)},ei.a.c.fontdeck=function(e,t){return new en(t,e)},ei.a.c.monotype=function(e,t){return new Y(t,e)},ei.a.c.typekit=function(e,t){return new er(t,e)},ei.a.c.google=function(e,t){return new ee(t,e)};var eo={load:u(ei.load,ei)};void 0===(n=(function(){return eo}).call(t,r,t,e))||(e.exports=n)}()},444:()=>{},119:e=>{function t(){return e.exports=t=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},e.exports.__esModule=!0,e.exports.default=e.exports,t.apply(this,arguments)}e.exports=t,e.exports.__esModule=!0,e.exports.default=e.exports}},h={};function p(e){var t=h[e];if(void 0!==t)return t.exports;var r=h[e]={exports:{}};return d[e].call(r.exports,r,r.exports,p),r.exports}p.m=d,p.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return p.d(t,{a:t}),t},p.d=(e,t)=>{for(var r in t)p.o(t,r)&&!p.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:t[r]})},p.f={},p.e=e=>Promise.all(Object.keys(p.f).reduce((t,r)=>(p.f[r](e,t),t),[])),p.u=e=>"dash.js",p.miniCssF=e=>{},p.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||Function("return this")()}catch(e){if("object"==typeof window)return window}}(),p.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),l={},p.l=(e,t,r,n)=>{if(l[e])l[e].push(t);else{if(void 0!==r)for(var i,o,u=document.getElementsByTagName("script"),c=0;c<u.length;c++){var f=u[c];if(f.getAttribute("src")==e){i=f;break}}i||(o=!0,(i=document.createElement("script")).type="module",i.charset="utf-8",i.timeout=120,p.nc&&i.setAttribute("nonce",p.nc),i.src=e),l[e]=[t];var d=(t,r)=>{i.onerror=i.onload=null,clearTimeout(h);var n=l[e];if(delete l[e],i.parentNode&&i.parentNode.removeChild(i),n&&n.forEach(e=>e(r)),t)return t(r)},h=setTimeout(d.bind(null,void 0,{type:"timeout",target:i}),12e4);i.onerror=d.bind(null,i.onerror),i.onload=d.bind(null,i.onload),o&&document.head.appendChild(i)}},p.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},p.p="",r={870:0,53:0},p.f.j=(e,t)=>{var n=p.o(r,e)?r[e]:void 0;if(0!==n){if(n)t.push(n[2]);else{var i=new Promise((t,i)=>n=r[e]=[t,i]);t.push(n[2]=i);var o=p.p+p.u(e),u=Error();p.l(o,t=>{if(p.o(r,e)&&(0!==(n=r[e])&&(r[e]=void 0),n)){var i=t&&("load"===t.type?"missing":t.type),o=t&&t.target&&t.target.src;u.message="Loading chunk "+e+" failed.\n("+i+": "+o+")",u.name="ChunkLoadError",u.type=i,u.request=o,n[1](u)}},"chunk-"+e,e)}}},n=(e,t)=>{var n,i,[o,u,l]=t,c=0;if(o.some(e=>0!==r[e])){for(n in u)p.o(u,n)&&(p.m[n]=u[n]);l&&l(p)}for(e&&e(t);c<o.length;c++)i=o[c],p.o(r,i)&&r[i]&&r[i][0](),r[i]=0},(u=self.webpackChunk=self.webpackChunk||[]).forEach(n.bind(null,0)),u.push=n.bind(null,u.push.bind(u));var m={};(()=>{let r;p.d(m,{videoPlayer:()=>cH,videoPlayers:()=>cV});var n,o,u,l,c,f,d,h,g,y,v,b,_,T,E,S={};p.r(S),p.d(S,{assign:()=>K});var w={};p.r(w),p.d(w,{sliceAndUnsetProperties:()=>Q,sliceProperties:()=>X});var A={};p.r(A),p.d(A,{getElementPosition:()=>$,getPointerPosition:()=>J,isElementInViewport:()=>Z,setPosition:()=>ee});var C={};p.r(C),p.d(C,{camelize:()=>et,startsWith:()=>er});var I={};p.r(I),p.d(I,{filterAndAddTextTracks:()=>nn,handleCldError:()=>ne,isKeyInTransformation:()=>nr});var O={};p.r(O),p.d(O,{applyWithProps:()=>ni});var R={};p.r(R),p.d(R,{groupBy:()=>no});var P={};p.r(P),p.d(P,{mixin:()=>nu});var k={};p.r(k),p.d(k,{fontFace:()=>nf});var D={};p.r(D),p.d(D,{playButton:()=>nd});var N={};p.r(N),p.d(N,{CLASS_PREFIX:()=>nT,playerClassPrefix:()=>nS,setSkinClassPrefix:()=>nC,skinClass:()=>nw,skinClassPrefix:()=>nA});var L={};p.r(L),p.d(L,{normalizeAttributes:()=>nR});var x=p(924),j=p.n(x);function M(e){return(M="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function F(){return(F="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,r){var n=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=U(e)););return e}(e,t);if(n){var i=Object.getOwnPropertyDescriptor(n,t);return i.get?i.get.call(arguments.length<3?e:r):i.value}}).apply(this,arguments)}function B(e,t){return(B=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function U(e){return(U=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var q=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&B(e,t)}(i,e);var t,r,n=(r=function(){if("undefined"==typeof Reflect||!Reflect.construct||Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}(),function(){var e,t=U(i);if(r){var n=U(this).constructor;e=Reflect.construct(t,arguments,n)}else e=t.apply(this,arguments);return function(e,t){if(t&&("object"===M(t)||"function"==typeof t))return t;if(void 0!==t)throw TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,e)});function i(){return function(e,t){if(!(e instanceof t))throw TypeError("Cannot call a class as a function")}(this,i),n.apply(this,arguments)}return t=[{key:"handleClick",value:function(e){F(U(i.prototype),"handleClick",this).call(this,e),this.player().currentTime(this.player().currentTime()+10)}},{key:"createEl",value:function(){return j().dom.createEl("button",{className:"vjs-control vjs-icon-skip-10-plus vjs-button"})}}],function(e,t){for(var r,n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,(r=function(e,t){if("object"!==M(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,"string");if("object"!==M(n))return n;throw TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(i.key),"symbol"===M(r)?r:String(r)),i)}}(i.prototype,t),Object.defineProperty(i,"prototype",{writable:!1}),i}(j().getComponent("ClickableComponent"));function H(e){return(H="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function V(){return(V="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,r){var n=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=Y(e)););return e}(e,t);if(n){var i=Object.getOwnPropertyDescriptor(n,t);return i.get?i.get.call(arguments.length<3?e:r):i.value}}).apply(this,arguments)}function G(e,t){return(G=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function Y(e){return(Y=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}j().registerComponent("JumpForwardButton",q);var z=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&G(e,t)}(i,e);var t,r,n=(r=function(){if("undefined"==typeof Reflect||!Reflect.construct||Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}(),function(){var e,t=Y(i);if(r){var n=Y(this).constructor;e=Reflect.construct(t,arguments,n)}else e=t.apply(this,arguments);return function(e,t){if(t&&("object"===H(t)||"function"==typeof t))return t;if(void 0!==t)throw TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,e)});function i(){return function(e,t){if(!(e instanceof t))throw TypeError("Cannot call a class as a function")}(this,i),n.apply(this,arguments)}return t=[{key:"handleClick",value:function(e){V(Y(i.prototype),"handleClick",this).call(this,e),this.player().currentTime(this.player().currentTime()-10)}},{key:"createEl",value:function(){return j().dom.createEl("button",{className:"vjs-control vjs-icon-skip-10-min vjs-button"})}}],function(e,t){for(var r,n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,(r=function(e,t){if("object"!==H(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,"string");if("object"!==H(n))return n;throw TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(i.key),"symbol"===H(r)?r:String(r)),i)}}(i.prototype,t),Object.defineProperty(i,"prototype",{writable:!1}),i}(j().getComponent("ClickableComponent"));function K(e){for(var t=arguments.length,r=Array(t>1?t-1:0),n=1;n<t;n++)r[n-1]=arguments[n];return Object.assign?Object.assign.apply(Object,[e].concat(r)):(r.forEach(function(t){t&&Object.keys(t).forEach(function(r){var n=t[r];e[r]=n})}),e)}function W(e,t){for(var r=arguments.length,n=Array(r>2?r-2:0),i=2;i<r;i++)n[i-2]=arguments[i];return n.reduce(function(r,n){return Object.prototype.hasOwnProperty.call(e,n)&&(r[n]=e[n],t&&delete e[n]),r},{})}function X(e){for(var t=arguments.length,r=Array(t>1?t-1:0),n=1;n<t;n++)r[n-1]=arguments[n];return W.apply(void 0,[e,!1].concat(r))}function Q(e){for(var t=arguments.length,r=Array(t>1?t-1:0),n=1;n<t;n++)r[n-1]=arguments[n];return W.apply(void 0,[e,!0].concat(r))}function $(e){var t=e.getBoundingClientRect(),r=document.body,n=document.documentElement,i=window.pageYOffset||n.scrollTop||r.scrollTop,o=window.pageXOffset||n.scrollLeft||r.scrollLeft,u=n.clientTop||r.clientTop||0,l=n.clientLeft||r.clientLeft||0;return{top:Math.round(t.top+i-u),left:Math.round(t.left+o-l)}}function J(e,t){var r={},n=$(e),i=e.offsetWidth,o=e.offsetHeight,u=n.top,l=n.left,c=t.pageY,f=t.pageX;return t.changedTouches&&(f=t.changedTouches[0].pageX,c=t.changedTouches[0].pageY),r.y=Math.max(0,Math.min(1,(u-c+o)/o)),r.x=Math.max(0,Math.min(1,(f-l)/i)),r}function Z(e,t){var r=t.fraction,n=$(e),i=n.left,o=n.top,u=e.offsetHeight,l=e.offsetWidth;return Math.max(0,Math.min(l,window.pageXOffset+window.innerWidth-i,i+l-window.pageXOffset))*Math.max(0,Math.min(l,window.pageYOffset+window.innerHeight-o,o+u-window.pageYOffset))/(l*u)>r}function ee(e,t,r){e.style.left="".concat(t,"px"),e.style.top="".concat(r,"px")}function et(e){return e.replace(/[_.-](\w|$)/g,function(e,t){return t.toUpperCase()})}function er(e,t,r){if(String.prototype.startsWith)return e.startsWith(t,r);var n=n||0;return e.indexOf(t,n)===n}function en(e){return(en="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function ei(e){return null!==e&&"object"===en(e)&&"[object Object]"===Object.prototype.toString.call(e)}function eo(e){return e instanceof String||"string"==typeof e}function ea(e){return e instanceof Number||"number"==typeof e}function es(e){return"number"==typeof e&&e%1==0}function eu(e){return"boolean"==typeof e}function el(e){return e instanceof Element}function ec(e){return"function"==typeof e}function ef(){return null}j().registerComponent("JumpBackButton",z);var ed={format:"jpg",resource_type:"video"},eh=["webm/vp9","mp4/h265","mp4"],ep={resource_type:"video",type:"upload",transformation:[],sourceTransformation:{},sourceTypes:eh,recommendations:null,info:{},interactionAreas:{}},em=RegExp("\\.(".concat(eh.join("|"),")$$")),eg=RegExp("https?:\\/\\/(www\\.)?[-a-zA-Z0-9@:%._+~#=]{1,256}\\.[a-zA-Z0-9()]{1,6}\\b([-a-zA-Z0-9()@:%_+.~#?&/=]*)"),ey={dash:["application/dash+xml"],hls:["application/x-mpegURL"],mpd:["application/dash+xml"],m3u8:["application/x-mpegURL"]},ev={hls:"m3u8",dash:"mpd"};function eb(e){return"object"==typeof e&&null!==e}function e_(e){return("undefined"!=typeof window?btoa(encodeURI(decodeURI(e))):i.Buffer.from(e).toString("base64")).replace(/\+/g,"-").replace(/\//g,"_")}let eT={"=":"eq","!=":"ne","<":"lt",">":"gt","<=":"lte",">=":"gte","&&":"and","||":"or","*":"mul","/":"div","+":"add","-":"sub","^":"pow"},eE="res.cloudinary.com",eS={aspect_ratio:"ar",aspectRatio:"ar",current_page:"cp",currentPage:"cp",duration:"du",face_count:"fc",faceCount:"fc",height:"h",initial_aspect_ratio:"iar",initial_height:"ih",initial_width:"iw",initialAspectRatio:"iar",initialHeight:"ih",initialWidth:"iw",initial_duration:"idu",initialDuration:"idu",page_count:"pc",page_x:"px",page_y:"py",pageCount:"pc",pageX:"px",pageY:"py",tags:"tags",width:"w"},ew="(([0-9]*)\\.([0-9]+)|([0-9]+))([%pP])?",eA=RegExp(`^${ew}$`),eC=RegExp(`(${ew})\\.\\.(${ew})`),eI={font_weight:"normal",font_style:"normal",text_decoration:"none",text_align:"",stroke:"none"};function eO(e,t=/([^a-zA-Z0-9_.\-\/:]+)/g){return e.replace(t,function(e){return e.split("").map(function(e){return"%"+e.charCodeAt(0).toString(16).toUpperCase()}).join("")})}let eR=e=>e.replace(/[A-Z]/g,e=>`_${e.toLowerCase()}`);class eP{constructor(e){this.options={},null!=e&&["resourceType","type","publicId","format"].forEach(t=>{var r;return this.options[t]=null!=(r=e[t])?r:e[eR(t)]})}resourceType(e){return this.options.resourceType=e,this}type(e){return this.options.type=e,this}publicId(e){return this.options.publicId=e,this}getPublicId(){var e;return null!=(e=this.options.publicId)?e.replace(/\//g,":"):void 0}getFullPublicId(){return null!=this.options.format?this.getPublicId()+"."+this.options.format:this.getPublicId()}format(e){return this.options.format=e,this}toString(){let e=[];if(null==this.options.publicId)throw"Must supply publicId";return"image"!==this.options.resourceType&&e.push(this.options.resourceType),"upload"!==this.options.type&&e.push(this.options.type),e.push(this.getFullPublicId()),e.filter(e=>!!e).join(":")}clone(){return new eP(this.options)}}let ek=eP;function eD(e){return null==e||"object"==typeof e&&0===Object.keys(e).length||"string"==typeof e&&0===e.trim().length}let eN=function(e){return null!=e&&!isNaN(parseFloat(e))},eL=class extends ek{constructor(e){super(e),null!=e&&["resourceType","resourceType","fontFamily","fontSize","fontWeight","fontStyle","textDecoration","textAlign","stroke","letterSpacing","lineSpacing","fontHinting","fontAntialiasing","text"].forEach(t=>{var r;return this.options[t]=null!=(r=e[t])?r:e[eR(t)]}),this.options.resourceType="text"}resourceType(e){throw"Cannot modify resourceType for text layers"}type(e){throw"Cannot modify type for text layers"}format(e){throw"Cannot modify format for text layers"}fontFamily(e){return this.options.fontFamily=e,this}fontSize(e){return this.options.fontSize=e,this}fontWeight(e){return this.options.fontWeight=e,this}fontStyle(e){return this.options.fontStyle=e,this}textDecoration(e){return this.options.textDecoration=e,this}textAlign(e){return this.options.textAlign=e,this}stroke(e){return this.options.stroke=e,this}letterSpacing(e){return this.options.letterSpacing=e,this}lineSpacing(e){return this.options.lineSpacing=e,this}fontHinting(e){return this.options.fontHinting=e,this}fontAntialiasing(e){return this.options.fontAntialiasing=e,this}text(e){return this.options.text=e,this}toString(){var e,t,r,n,i,o,u,l,c;if(u=this.textStyleIdentifier(),null!=this.options.publicId&&(r=this.getFullPublicId()),null!=this.options.text){if(e=!eD(r),t=!eD(u),e&&t||!e&&!t)throw"Must supply either style parameters or a public_id when providing text parameter in a text overlay/underlay, but not both!";for(n=/\$\([a-zA-Z]\w*\)/g,o=0,c=eO(this.options.text,/[,\/]/g),l="";i=n.exec(c);)l+=eO(c.slice(o,i.index))+i[0],o=i.index+i[0].length;l+=eO(c.slice(o))}return[this.options.resourceType,u,r,l].filter(e=>!!e).join(":")}textStyleIdentifier(){var e;if(e=[],"normal"!==this.options.fontWeight&&e.push(this.options.fontWeight),"normal"!==this.options.fontStyle&&e.push(this.options.fontStyle),"none"!==this.options.textDecoration&&e.push(this.options.textDecoration),e.push(this.options.textAlign),"none"!==this.options.stroke&&e.push(this.options.stroke),eD(this.options.letterSpacing)&&!eN(this.options.letterSpacing)||e.push("letter_spacing_"+this.options.letterSpacing),eD(this.options.lineSpacing)&&!eN(this.options.lineSpacing)||e.push("line_spacing_"+this.options.lineSpacing),eD(this.options.fontAntialiasing)||e.push("antialias_"+this.options.fontAntialiasing),eD(this.options.fontHinting)||e.push("hinting_"+this.options.fontHinting),!eD(e.filter(e=>!!e))){if(eD(this.options.fontFamily))throw`Must supply fontFamily. ${e}`;if(eD(this.options.fontSize)&&!eN(this.options.fontSize))throw"Must supply fontSize."}return e.unshift(this.options.fontFamily,this.options.fontSize),e.filter(e=>!!e).join("_")}};function ex(e){let t=[],r="";if(Object.keys(eI).forEach(r=>{let n=eI[r],i=e[r]||n;i!==n&&t.push(i)}),Object.keys(e).forEach(r=>{"letter_spacing"!==r&&"line_spacing"!==r||t.push(`${r}_${e[r]}`),"font_hinting"===r&&t.push(`${r.split("_").pop()}_${e[r]}`),"font_antialiasing"===r&&t.push(`antialias_${e[r]}`)}),e.hasOwnProperty("font_size")||!t||0===t.length){if(!e.font_size)throw"Must supply font_size for text in overlay/underlay";if(!e.font_family)throw"Must supply font_family for text in overlay/underlay";t.unshift(e.font_size),t.unshift(e.font_family),r=t.filter(e=>e).join("_")}return r}function ej(e){if(e instanceof eL||e instanceof ek)return e.toString();let t="";if(eb(e)){if("fetch"===e.resource_type||null!=e.url)t=`fetch:${e_(e.url)}`;else{let r=e.public_id,n=e.format,i=e.resource_type||"image",o=e.type||"upload",u=e.text,l=null,c=[],f=!r||0===r.length;if(f||(r=r.replace(RegExp("/","g"),":"),null!=n&&(r=`${r}.${n}`)),u&&0!==u.length||"text"===i){if(i="text",o=null,l=ex(e),u&&u.length>=0){let e=!l;if(!f&&!e||f&&e)throw"Must supply either style parameters or a public_id when providing text parameter in a text overlay/underlay";let t=/\$\([a-zA-Z]\w*\)/g,r=0,n=eO(decodeURIComponent(u),/[,\/]/g);u="";for(let e=t.exec(n);e;e=t.exec(n))u+=eO(n.slice(r,e.index))+e[0],r=e.index+e[0].length;u+=encodeURIComponent(n.slice(r))}}else{if(f)throw"Must supply public_id for resource_type layer_parameter";"subtitles"===i&&(l=ex(e))}"image"!==i&&c.push(i),"upload"!==o&&c.push(o),c.push(l),c.push(r),c.push(u),t=c.filter(e=>e).join(":")}}else t=/^fetch:.+/.test(e)?`fetch:${e_(e.substr(6))}`:e;return t}function eM(e){if("string"!=typeof e||0===e.length||e.match(/^!.+!$/))return e?e.toString():e;e=String(e);let t=RegExp("((\\|\\||>=|<=|&&|!=|>|=|<|/|-|\\+|\\*|\\^)(?=[ _]))","g");e=e.replace(t,e=>eT[e]);let r="("+Object.keys(eS).join("|")+")",n=RegExp(`(\\$_*[^_ ]+)|${r}`,"g");return(e=e.replace(n,e=>eS[e]||e)).replace(/[ _]+/g,"_")}function eF(e){switch(!0){case null==e:return[];case Array.isArray(e):return e;default:return[e]}}function eB(e){if(!eb(e))return e;if("remote"===e.function_type){let t=e_(e.source).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,"");return[e.function_type,t].join(":")}return[e.function_type,e.source].join(":")}function eU(e){switch(e&&e.constructor){case String:return eC.test(e)?e.split(".."):e;case Array:return[[e],e[e.length-1]];default:return[null,null]}}function eq(e){let t=String(e).match(eA);if(t){let e=t[5]?"p":"";return`${t[1]||t[4]}${e}`}return e}class eH{constructor(e){this.expressions=[],null!=e&&this.expressions.push(eH.normalize(e))}static new(e){return new this(e)}static normalize(e){var t,r;return null==e?e:(e=String(e),t=RegExp("((\\|\\||>=|<=|&&|!=|>|=|<|/|-|\\+|\\*|\\^)(?=[ _]))","g"),e=e.replace(t,e=>eV[e]),r=RegExp("("+Object.keys(eG).join("|")+")","g"),(e=e.replace(r,(t,r,n)=>"$"===e[n-1]?t:eG[t])).replace(/[ _]+/g,"_"))}serialize(){return eH.normalize(this.expressions.join("_"))}toString(){return this.serialize()}getParent(){return this.parent}setParent(e){return this.parent=e,this}predicate(e,t,r){return null!=eV[t]&&(t=eV[t]),this.expressions.push(`${e}_${t}_${r}`),this}and(){return this.expressions.push("and"),this}or(){return this.expressions.push("or"),this}then(){return this.getParent().if(this.toString())}height(e,t){return this.predicate("h",e,t)}width(e,t){return this.predicate("w",e,t)}aspectRatio(e,t){return this.predicate("ar",e,t)}pageCount(e,t){return this.predicate("pc",e,t)}faceCount(e,t){return this.predicate("fc",e,t)}value(e){return this.expressions.push(e),this}static variable(e,t){return new this(e).value(t)}static width(){return new this("width")}static height(){return new this("height")}static initialWidth(){return new this("initialWidth")}static initialHeight(){return new this("initialHeight")}static aspectRatio(){return new this("aspectRatio")}static initialAspectRatio(){return new this("initialAspectRatio")}static pageCount(){return new this("pageCount")}static faceCount(){return new this("faceCount")}static currentPage(){return new this("currentPage")}static tags(){return new this("tags")}static pageX(){return new this("pageX")}static pageY(){return new this("pageY")}}let eV={"=":"eq","!=":"ne","<":"lt",">":"gt","<=":"lte",">=":"gte","&&":"and","||":"or","*":"mul","/":"div","+":"add","-":"sub","^":"pow"},eG={aspect_ratio:"ar",aspectRatio:"ar",current_page:"cp",currentPage:"cp","preview:duration":"preview:duration",duration:"du",face_count:"fc",faceCount:"fc",height:"h",initial_aspect_ratio:"iar",initial_duration:"idu",initial_height:"ih",initial_width:"iw",initialAspectRatio:"iar",initialDuration:"idu",initialHeight:"ih",initialWidth:"iw",page_count:"pc",page_x:"px",page_y:"py",pageCount:"pc",pageX:"px",pageY:"py",tags:"tags",width:"w"},eY=eH,ez=class extends eY{constructor(e){super(e)}height(e,t){return this.predicate("h",e,t)}width(e,t){return this.predicate("w",e,t)}aspectRatio(e,t){return this.predicate("ar",e,t)}pageCount(e,t){return this.predicate("pc",e,t)}faceCount(e,t){return this.predicate("fc",e,t)}duration(e,t){return this.predicate("du",e,t)}initialDuration(e,t){return this.predicate("idu",e,t)}};"undefined"!=typeof window&&null!==window&&window.location&&window.location.protocol;var eK="__lodash_hash_undefined__",eW="[object Arguments]",eX="[object Boolean]",eQ="[object Date]",e$="[object Function]",eJ="[object GeneratorFunction]",eZ="[object Map]",e0="[object Number]",e1="[object Object]",e2="[object Promise]",e3="[object RegExp]",e4="[object Set]",e6="[object String]",e8="[object Symbol]",e5="[object WeakMap]",e9="[object ArrayBuffer]",e7="[object DataView]",te="[object Float32Array]",tt="[object Float64Array]",tr="[object Int8Array]",tn="[object Int16Array]",ti="[object Int32Array]",to="[object Uint8Array]",ta="[object Uint8ClampedArray]",ts="[object Uint16Array]",tu="[object Uint32Array]",tl=/\w*$/,tc=/^\[object .+?Constructor\]$/,tf=/^(?:0|[1-9]\d*)$/,td={};td[eW]=td["[object Array]"]=td[e9]=td[e7]=td[eX]=td[eQ]=td[te]=td[tt]=td[tr]=td[tn]=td[ti]=td[eZ]=td[e0]=td[e1]=td[e3]=td[e4]=td[e6]=td[e8]=td[to]=td[ta]=td[ts]=td[tu]=!0,td["[object Error]"]=td[e$]=td[e5]=!1;var th="object"==typeof i&&i&&i.Object===Object&&i,tp="object"==typeof self&&self&&self.Object===Object&&self,tm=th||tp||Function("return this")(),tg=t&&!t.nodeType&&t,ty=tg&&e&&!e.nodeType&&e,tv=ty&&ty.exports===tg;function tb(e,t){return e.set(t[0],t[1]),e}function t_(e,t){return e.add(t),e}function tT(e,t,r,n){var i=-1,o=e?e.length:0;for(n&&o&&(r=e[++i]);++i<o;)r=t(r,e[i],i,e);return r}function tE(e){var t=!1;if(null!=e&&"function"!=typeof e.toString)try{t=!!`${e}`}catch(e){}return t}function tS(e){var t=-1,r=Array(e.size);return e.forEach(function(e,n){r[++t]=[n,e]}),r}function tw(e,t){return function(r){return e(t(r))}}function tA(e){var t=-1,r=Array(e.size);return e.forEach(function(e){r[++t]=e}),r}var tC,tI=Array.prototype,tO=Function.prototype,tR=Object.prototype,tP=tm["__core-js_shared__"],tk=(tC=/[^.]+$/.exec(tP&&tP.keys&&tP.keys.IE_PROTO||""))?`Symbol(src)_1.${tC}`:"",tD=tO.toString,tN=tR.hasOwnProperty,tL=tR.toString,tx=RegExp(`^${tD.call(tN).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")}$`),tj=tv?tm.Buffer:void 0,tM=tm.Symbol,tF=tm.Uint8Array,tB=tw(Object.getPrototypeOf,Object),tU=Object.create,tq=tR.propertyIsEnumerable,tH=tI.splice,tV=Object.getOwnPropertySymbols,tG=tj?tj.isBuffer:void 0,tY=tw(Object.keys,Object),tz=ri(tm,"DataView"),tK=ri(tm,"Map"),tW=ri(tm,"Promise"),tX=ri(tm,"Set"),tQ=ri(tm,"WeakMap"),t$=ri(Object,"create"),tJ=ru(tz),tZ=ru(tK),t0=ru(tW),t1=ru(tX),t2=ru(tQ),t3=tM?tM.prototype:void 0,t4=t3?t3.valueOf:void 0;function t6(e){var t=-1,r=e?e.length:0;for(this.clear();++t<r;){var n=e[t];this.set(n[0],n[1])}}function t8(e){var t=-1,r=e?e.length:0;for(this.clear();++t<r;){var n=e[t];this.set(n[0],n[1])}}function t5(e){var t=-1,r=e?e.length:0;for(this.clear();++t<r;){var n=e[t];this.set(n[0],n[1])}}function t9(e){this.__data__=new t8(e)}function t7(e,t,r){var n=e[t];tN.call(e,t)&&rc(n,r)&&(void 0!==r||t in e)||(e[t]=r)}function re(e,t){for(var r=e.length;r--;)if(rc(e[r][0],t))return r;return -1}function rt(e){var t=new e.constructor(e.byteLength);return new tF(t).set(new tF(e)),t}function rr(e,t,r,n){r||(r={});for(var i=-1,o=t.length;++i<o;){var u=t[i],l=n?n(r[u],e[u],u,r,e):void 0;t7(r,u,void 0===l?e[u]:l)}return r}function rn(e,t){var r,n=e.__data__;return("string"==(r=typeof t)||"number"==r||"symbol"==r||"boolean"==r?"__proto__"!==t:null===t)?n["string"==typeof t?"string":"hash"]:n.map}function ri(e,t){var r=null==e?void 0:e[t];return!(!rm(r)||tk&&tk in r)&&(rp(r)||tE(r)?tx:tc).test(ru(r))?r:void 0}t6.prototype.clear=function(){this.__data__=t$?t$(null):{}},t6.prototype.delete=function(e){return this.has(e)&&delete this.__data__[e]},t6.prototype.get=function(e){var t=this.__data__;if(t$){var r=t[e];return r===eK?void 0:r}return tN.call(t,e)?t[e]:void 0},t6.prototype.has=function(e){var t=this.__data__;return t$?void 0!==t[e]:tN.call(t,e)},t6.prototype.set=function(e,t){return this.__data__[e]=t$&&void 0===t?eK:t,this},t8.prototype.clear=function(){this.__data__=[]},t8.prototype.delete=function(e){var t=this.__data__,r=re(t,e);return!(r<0||(r==t.length-1?t.pop():tH.call(t,r,1),0))},t8.prototype.get=function(e){var t=this.__data__,r=re(t,e);return r<0?void 0:t[r][1]},t8.prototype.has=function(e){return re(this.__data__,e)>-1},t8.prototype.set=function(e,t){var r=this.__data__,n=re(r,e);return n<0?r.push([e,t]):r[n][1]=t,this},t5.prototype.clear=function(){this.__data__={hash:new t6,map:new(tK||t8),string:new t6}},t5.prototype.delete=function(e){return rn(this,e).delete(e)},t5.prototype.get=function(e){return rn(this,e).get(e)},t5.prototype.has=function(e){return rn(this,e).has(e)},t5.prototype.set=function(e,t){return rn(this,e).set(e,t),this},t9.prototype.clear=function(){this.__data__=new t8},t9.prototype.delete=function(e){return this.__data__.delete(e)},t9.prototype.get=function(e){return this.__data__.get(e)},t9.prototype.has=function(e){return this.__data__.has(e)},t9.prototype.set=function(e,t){var r=this.__data__;if(r instanceof t8){var n=r.__data__;if(!tK||n.length<199)return n.push([e,t]),this;r=this.__data__=new t5(n)}return r.set(e,t),this};var ro=tV?tw(tV,Object):function(){return[]},ra=function(e){return tL.call(e)};function rs(e){var t=e&&e.constructor;return e===("function"==typeof t&&t.prototype||tR)}function ru(e){if(null!=e){try{return tD.call(e)}catch(e){}try{return`${e}`}catch(e){}}return""}function rl(e){return function e(t,r,n,i,o,u,l){if(i&&(c=u?i(t,o,u,l):i(t)),void 0!==c)return c;if(!rm(t))return t;var c,f=rf(t);if(f){if(d=t.length,h=t.constructor(d),d&&"string"==typeof t[0]&&tN.call(t,"index")&&(h.index=t.index,h.input=t.input),c=h,!r)return function(e,t){var r=-1,n=e.length;for(t||(t=Array(n));++r<n;)t[r]=e[r];return t}(t,c)}else{var d,h,p,m,g,y,v=ra(t),b=v==e$||v==eJ;if(rh(t))return function(e,t){if(t)return e.slice();var r=new e.constructor(e.length);return e.copy(r),r}(t,r);if(v==e1||v==eW||b&&!u){if(tE(t))return u?t:{};if(c="function"!=typeof(p=b?{}:t).constructor||rs(p)?{}:rm(m=tB(p))?tU(m):{},!r)return y=(g=c)&&rr(t,rg(t),g),rr(t,ro(t),y)}else{if(!td[v])return u?t:{};c=function(e,t,r,n){var i,o,u,l=e.constructor;switch(t){case e9:return rt(e);case eX:case eQ:return new l(+e);case e7:return i=n?rt(e.buffer):e.buffer,new e.constructor(i,e.byteOffset,e.byteLength);case te:case tt:case tr:case tn:case ti:case to:case ta:case ts:case tu:return o=n?rt(e.buffer):e.buffer,new e.constructor(o,e.byteOffset,e.length);case eZ:return tT(n?r(tS(e),!0):tS(e),tb,new e.constructor);case e0:case e6:return new l(e);case e3:return(u=new e.constructor(e.source,tl.exec(e))).lastIndex=e.lastIndex,u;case e4:return tT(n?r(tA(e),!0):tA(e),t_,new e.constructor);case e8:return t4?Object(t4.call(e)):{}}}(t,v,e,r)}}l||(l=new t9);var _=l.get(t);if(_)return _;if(l.set(t,c),!f)var T,E=n?(T=rg(t),rf(t)?T:function(e,t){for(var r=-1,n=t.length,i=e.length;++r<n;)e[i+r]=t[r];return e}(T,ro(t))):rg(t);return function(e,t){for(var r=-1,n=e?e.length:0;++r<n&&!1!==t(e[r],r););}(E||t,function(o,u){E&&(o=t[u=o]),t7(c,u,e(o,r,n,i,u,t,l))}),c}(e,!0,!0)}function rc(e,t){return e===t||e!=e&&t!=t}(tz&&ra(new tz(new ArrayBuffer(1)))!=e7||tK&&ra(new tK)!=eZ||tW&&ra(tW.resolve())!=e2||tX&&ra(new tX)!=e4||tQ&&ra(new tQ)!=e5)&&(ra=function(e){var t=tL.call(e),r=t==e1?e.constructor:void 0,n=r?ru(r):void 0;if(n)switch(n){case tJ:return e7;case tZ:return eZ;case t0:return e2;case t1:return e4;case t2:return e5}return t});var rf=Array.isArray;function rd(e){var t;return null!=e&&"number"==typeof(t=e.length)&&t>-1&&t%1==0&&t<=9007199254740991&&!rp(e)}var rh=tG||function(){return!1};function rp(e){var t=rm(e)?tL.call(e):"";return t==e$||t==eJ}function rm(e){var t=typeof e;return!!e&&("object"==t||"function"==t)}function rg(e){return rd(e)?function(e,t){var r,n=rf(e)||e&&"object"==typeof e&&rd(e)&&tN.call(e,"callee")&&(!tq.call(e,"callee")||tL.call(e)==eW)?function(e,t){for(var r=-1,n=Array(e);++r<e;)n[r]=t(r);return n}(e.length,String):[],i=n.length,o=!!i;for(var u in e)!tN.call(e,u)||o&&("length"==u||(r=null==(r=i)?9007199254740991:r)&&("number"==typeof u||tf.test(u))&&u>-1&&u%1==0&&u<r)||n.push(u);return n}(e):function(e){if(!rs(e))return tY(e);var t=[];for(var r in Object(e))tN.call(e,r)&&"constructor"!=r&&t.push(r);return t}(e)}let ry=function(e){let t=e.match(r_);return(t=t.map(e=>e.charAt(0).toLocaleUpperCase()+e.slice(1).toLocaleLowerCase()))[0]=t[0].toLocaleLowerCase(),t.join("")};var rv,rb,r_=RegExp((rb="[A-Z]")+"+(?="+rb+(rv="[a-z]+")+")|"+rb+"?"+rv+"|"+rb+"+|[0-9]+","g");function rT(e){return e}function rE(e,t){for(let r=0;r<e.length;r++)if(e[r]===t)return!0;return!1}let rS=class extends eL{constructor(e){super(e),this.options.resourceType="subtitles"}};function rw(e){return"string"==typeof e||e instanceof String}let rA=class extends ek{constructor(e){super(e),rw(e)?this.options.url=e:(null!=e?e.url:void 0)&&(this.options.url=e.url)}url(e){return this.options.url=e,this}toString(){return`fetch:${e_(this.options.url)}`}};function rC(e){return e instanceof Function}let rI=["accessibility","api_secret","auth_token","cdn_subdomain","cloud_name","cname","format","placeholder","private_cdn","resource_type","secure","secure_cdn_subdomain","secure_distribution","shorten","sign_url","signature","ssl_detected","type","url_suffix","use_root_path","version"];function rO(e,...t){return t.forEach(t=>{Object.keys(t).forEach(r=>{null!=t[r]&&(e[r]=t[r])})}),e}class rR{constructor(e,t,r=rT){this.name=e,this.shortName=t,this.process=r}set(e){return this.origValue=e,this}serialize(){var e,t;return t=Array.isArray(e=this.value())||eb(e)||rw(e)?!eD(e):null!=e,null!=this.shortName&&t?`${this.shortName}_${e}`:""}value(){return this.process(this.origValue)}static norm_color(e){return null!=e?e.replace(/^#/,"rgb:"):void 0}static build_array(e){return null==e?[]:Array.isArray(e)?e:[e]}static process_video_params(e){var t;switch(e.constructor){case Object:return t="","codec"in e&&(t=e.codec,"profile"in e&&(t+=":"+e.profile,"level"in e&&(t+=":"+e.level))),t;case String:return e;default:return null}}}class rP extends rR{constructor(e,t,r=".",n){super(e,t,n),this.sep=r}serialize(){if(null!=this.shortName){let e=this.value();return eD(e)?"":rw(e)?`${this.shortName}_${e}`:`${this.shortName}_${e.map(e=>rC(e.serialize)?e.serialize():e).join(this.sep)}`}return""}value(){return Array.isArray(this.origValue)?this.origValue.map(e=>this.process(e)):this.process(this.origValue)}set(e){return null==e||Array.isArray(e)?super.set(e):super.set([e])}}class rk extends rR{constructor(e,t="t",r=".",n){super(e,t,n),this.sep=r}serialize(){let e="",t=this.value();if(eD(t))return e;if(t.length&&t.every(rw)){let r=t.join(this.sep);eD(r)||(e=`${this.shortName}_${r}`)}else e=t.map(e=>rw(e)&&!eD(e)?`${this.shortName}_${e}`:rC(e.serialize)?e.serialize():eb(e)&&!eD(e)?new rq(e).serialize():void 0).filter(e=>e);return e}set(e){return this.origValue=e,Array.isArray(this.origValue)?super.set(this.origValue):super.set([this.origValue])}}class rD extends rR{constructor(e,t,r=rD.norm_range_value){super(e,t,r)}static norm_range_value(e){let t=String(e).match(RegExp("^(([0-9]*)\\.([0-9]+)|([0-9]+))([%pP])?$"));if(t){let r=null!=t[5]?"p":"";e=(t[1]||t[4])+r}return e}}class rN extends rR{constructor(e,t,r=rT){super(e,t,r)}serialize(){return this.value()}}class rL extends rR{value(){let e;if(null==this.origValue)return"";if(this.origValue instanceof ek)e=this.origValue;else if(eb(this.origValue)){let t=function(e,t){var r,n;for(let i in r={},e)n=e[i],t&&(i=t(i)),eD(i)||(r[i]=n);return r}(this.origValue,ry);e="text"===t.resourceType||null!=t.text?new eL(t):"subtitles"===t.resourceType?new rS(t):"fetch"===t.resourceType||null!=t.url?new rA(t):new ek(t)}else e=rw(this.origValue)?/^fetch:.+/.test(this.origValue)?new rA(this.origValue.substr(6)):this.origValue:"";return e.toString()}static textStyle(e){return new eL(e).textStyleIdentifier()}}class rx{constructor(e){let t,r;t=void 0,r={},this.toOptions=e=>{let t={};if(null==e&&(e=!0),Object.keys(r).forEach(e=>t[e]=r[e].origValue),rO(t,this.otherOptions),e&&!eD(this.chained)){let e=this.chained.map(e=>e.toOptions());e.push(t),rO(t={},this.otherOptions),t.transformation=e}return t},this.setParent=e=>(t=e,null!=e&&this.fromOptions("function"==typeof e.toOptions?e.toOptions():void 0),this),this.getParent=()=>t,this.param=(e,t,n,i,o)=>(null==o&&(o=rC(i)?i:rT),r[t]=new rR(t,n,o).set(e),this),this.rawParam=function(e,t,n,i,o){return o=rB(arguments),r[t]=new rN(t,n,o).set(e),this},this.rangeParam=function(e,t,n,i,o){return o=rB(arguments),r[t]=new rD(t,n,o).set(e),this},this.arrayParam=function(e,t,n,i=":",o=[],u){return u=rB(arguments),r[t]=new rP(t,n,i,u).set(e),this},this.transformationParam=function(e,t,n,i=".",o,u){return u=rB(arguments),r[t]=new rk(t,n,i,u).set(e),this},this.layerParam=function(e,t,n){return r[t]=new rL(t,n).set(e),this},this.getValue=function(e){let t=r[e]&&r[e].value();return null!=t?t:this.otherOptions[e]},this.get=function(e){return r[e]},this.remove=function(e){var t;switch(!1){case null==r[e]:return t=r[e],delete r[e],t.origValue;case null==this.otherOptions[e]:return t=this.otherOptions[e],delete this.otherOptions[e],t;default:return null}},this.keys=function(){var e;return(function(){var t;for(e in t=[],r)null!=e&&t.push(e.match(rj)?e:eR(e));return t})().sort()},this.toPlainObject=function(){var e,t,n;for(t in e={},r)e[t]=r[t].value(),eb(e[t])&&(e[t]=rl(e[t]));return eD(this.chained)||((n=this.chained.map(e=>e.toPlainObject())).push(e),e={transformation:n}),e},this.chain=function(){var e;return 0!==Object.getOwnPropertyNames(r).length&&(e=new this.constructor(this.toOptions(!1)),this.resetTransformations(),this.chained.push(e)),this},this.resetTransformations=function(){return r={},this},this.otherOptions={},this.chained=[],this.fromOptions(e)}fromOptions(e={}){if(e instanceof rx)this.fromTransformation(e);else for(let t in(rw(e)||Array.isArray(e))&&(e={transformation:e}),(e=rl(e)).if&&(this.set("if",e.if),delete e.if),e){let r=e[t];null!=r&&(t.match(rj)?"$attr"!==t&&this.set("variable",t,r):this.set(t,r))}return this}fromTransformation(e){return e instanceof rx&&e.keys().forEach(t=>this.set(t,e.get(t).origValue)),this}set(e,...t){let r;return rE(rH,r=ry(e))?this[r].apply(this,t):this.otherOptions[e]=t[0],this}hasLayer(){return this.getValue("overlay")||this.getValue("underlay")}serialize(){var e,t,r,n,i,o,u,l,c,f,d,h,p,m,g,y,v,b;for(f=this.chained.map(e=>e.serialize()),n=this.keys(),m=null!=(i=this.get("transformation"))?i.serialize():void 0,e=null!=(o=this.get("if"))?o.serialize():void 0,y=function(e){var t,r,n,i,o;if(Array.isArray(e)){for(i=[],t=0,r=e.length;t<r;t++)[n,o]=e[t],i.push(`${n}_${eY.normalize(o)}`);return i}return e}(null!=(u=this.get("variables"))?u.value():void 0),b=["transformation","if","variables"],n=n.filter(e=>!b.includes(e)),v=[],h=[],t=0,r=n.length;t<r;t++)(d=n[t]).match(rj)?v.push(d+"_"+eY.normalize(null!=(l=this.get(d))?l.value():void 0)):h.push(null!=(c=this.get(d))?c.serialize():void 0);switch(!1){case!rw(m):h.push(m);break;case!Array.isArray(m):f=f.concat(m)}return h=function(){var e,t,r;for(r=[],e=0,t=h.length;e<t;e++)(Array.isArray(g=h[e])&&!eD(g)||!Array.isArray(g)&&g)&&r.push(g);return r}(),h=v.sort().concat(y).concat(h.sort()),"if_end"===e?h.push(e):eD(e)||h.unshift(e),eD(p=h.filter(e=>!!e).join(rF))||f.push(p),f.filter(e=>!!e).join(rM)}static listNames(){return rH}toHtmlAttributes(){let e,t,r,n,i,o,u;return t={},Object.keys(this.otherOptions).forEach(e=>{i=this.otherOptions[e],rE(rV,u=eR(e))||rE(rI,u)||(t[/^html_/.test(e)?e.slice(5):e]=i)}),this.keys().forEach(e=>{/^html_/.test(e)&&(t[ry(e.slice(5))]=this.getValue(e))}),this.hasLayer()||this.getValue("angle")||rE(["fit","limit","lfill"],this.getValue("crop"))||(o=null!=(r=this.get("width"))?r.origValue:void 0,e=null!=(n=this.get("height"))?n.origValue:void 0,parseFloat(o)>=1&&null==t.width&&(t.width=o),parseFloat(e)>=1&&null==t.height&&(t.height=e)),t}static isValidParamName(e){return rH.indexOf(ry(e))>=0}toHtml(){var e;return null!=(e=this.getParent())&&"function"==typeof e.toHtml?e.toHtml():void 0}toString(){return this.serialize()}clone(){return new rx(this.toOptions(!0))}}let rj=/^\$[a-zA-Z0-9]+$/,rM="/",rF=",";function rB(e){var t;return rC(t=null!=e?e[e.length-1]:void 0)?t:void 0}function rU({function_type:e,source:t}){return"remote"===e?[e,btoa(t)].join(":"):"wasm"===e?[e,t].join(":"):void 0}class rq extends rx{constructor(e){super(e)}static new(e){return new rq(e)}angle(e){return this.arrayParam(e,"angle","a",".",eY.normalize),this}audioCodec(e){return this.param(e,"audio_codec","ac"),this}audioFrequency(e){return this.param(e,"audio_frequency","af"),this}aspectRatio(e){return this.param(e,"aspect_ratio","ar",eY.normalize),this}background(e){return this.param(e,"background","b",rR.norm_color),this}bitRate(e){return this.param(e,"bit_rate","br"),this}border(e){return this.param(e,"border","bo",e=>eb(e)?`${(e=Object.assign({},{color:"black",width:2},e)).width}px_solid_${rR.norm_color(e.color)}`:e)}color(e){return this.param(e,"color","co",rR.norm_color),this}colorSpace(e){return this.param(e,"color_space","cs"),this}crop(e){return this.param(e,"crop","c"),this}customFunction(e){return this.param(e,"custom_function","fn",()=>rU(e))}customPreFunction(e){if(!this.get("custom_function"))return this.rawParam(e,"custom_function","",()=>(e=rU(e))?`fn_pre:${e}`:e)}defaultImage(e){return this.param(e,"default_image","d"),this}delay(e){return this.param(e,"delay","dl"),this}density(e){return this.param(e,"density","dn"),this}duration(e){return this.rangeParam(e,"duration","du"),this}dpr(e){return this.param(e,"dpr","dpr",e=>(null!=(e=e.toString())?e.match(/^\d+$/):void 0)?e+".0":eY.normalize(e))}effect(e){return this.arrayParam(e,"effect","e",":",eY.normalize),this}else(){return this.if("else")}endIf(){return this.if("end")}endOffset(e){return this.rangeParam(e,"end_offset","eo"),this}fallbackContent(e){return this.param(e,"fallback_content"),this}fetchFormat(e){return this.param(e,"fetch_format","f"),this}format(e){return this.param(e,"format"),this}flags(e){return this.arrayParam(e,"flags","fl","."),this}gravity(e){return this.param(e,"gravity","g"),this}fps(e){return this.param(e,"fps","fps",e=>rw(e)?e:Array.isArray(e)?e.join("-"):e)}height(e){return this.param(e,"height","h",()=>this.getValue("crop")||this.getValue("overlay")||this.getValue("underlay")?eY.normalize(e):null)}htmlHeight(e){return this.param(e,"html_height"),this}htmlWidth(e){return this.param(e,"html_width"),this}if(e=""){var t,r,n,i,o;switch(e){case"else":return this.chain(),this.param(e,"if","if");case"end":for(this.chain(),t=n=this.chained.length-1;n>=0&&"end"!==(r=this.chained[t].getValue("if"))&&(null==r||(i=rq.new().if(r),this.chained[t].remove("if"),o=this.chained[t],this.chained[t]=rq.new().transformation([i,o]),"else"===r));t=n+=-1);return this.param(e,"if","if");case"":return ez.new().setParent(this);default:return this.param(e,"if","if",e=>ez.new(e).toString())}}keyframeInterval(e){return this.param(e,"keyframe_interval","ki"),this}ocr(e){return this.param(e,"ocr","ocr"),this}offset(e){var t,r;if([r,t]=rC(null!=e?e.split:void 0)?e.split(".."):Array.isArray(e)?e:[null,null],null!=r&&this.startOffset(r),null!=t)return this.endOffset(t)}opacity(e){return this.param(e,"opacity","o",eY.normalize),this}overlay(e){return this.layerParam(e,"overlay","l"),this}page(e){return this.param(e,"page","pg"),this}poster(e){return this.param(e,"poster"),this}prefix(e){return this.param(e,"prefix","p"),this}quality(e){return this.param(e,"quality","q",eY.normalize),this}radius(e){return this.arrayParam(e,"radius","r",":",eY.normalize),this}rawTransformation(e){return this.rawParam(e,"raw_transformation"),this}size(e){let t,r;if(rC(null!=e?e.split:void 0))return[r,t]=e.split("x"),this.width(r),this.height(t)}sourceTypes(e){return this.param(e,"source_types"),this}sourceTransformation(e){return this.param(e,"source_transformation")}startOffset(e){return this.rangeParam(e,"start_offset","so"),this}streamingProfile(e){return this.param(e,"streaming_profile","sp"),this}transformation(e){return this.transformationParam(e,"transformation","t"),this}underlay(e){return this.layerParam(e,"underlay","u"),this}variable(e,t){return this.param(t,e,e),this}variables(e){return this.arrayParam(e,"variables"),this}videoCodec(e){return this.param(e,"video_codec","vc",rR.process_video_params),this}videoSampling(e){return this.param(e,"video_sampling","vs"),this}width(e){return this.param(e,"width","w",()=>this.getValue("crop")||this.getValue("overlay")||this.getValue("underlay")?eY.normalize(e):null),this}x(e){return this.param(e,"x","x",eY.normalize),this}y(e){return this.param(e,"y","y",eY.normalize),this}zoom(e){return this.param(e,"zoom","z",eY.normalize),this}}let rH=["angle","audioCodec","audioFrequency","aspectRatio","background","bitRate","border","color","colorSpace","crop","customFunction","customPreFunction","defaultImage","delay","density","duration","dpr","effect","else","endIf","endOffset","fallbackContent","fetchFormat","format","flags","gravity","fps","height","htmlHeight","htmlWidth","if","keyframeInterval","ocr","offset","opacity","overlay","page","poster","prefix","quality","radius","rawTransformation","size","sourceTypes","sourceTransformation","startOffset","streamingProfile","transformation","underlay","variable","variables","videoCodec","videoSampling","width","x","y","zoom"],rV=rH.map(eR).concat(["api_key","api_secret","callback","cdn_subdomain","cloud_name","cname","private_cdn","protocol","resource_type","responsive","responsive_class","responsive_use_breakpoints","responsive_width","round_dpr","secure","secure_cdn_subdomain","secure_distribution","shorten","type","upload_preset","url_suffix","use_root_path","version","externalLibraries","max_timeout_ms"]);function rG(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}function rY(e){return(rY="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var rz=function(e,t,r){if(e&&"object"===rY(e)){var n,i=e,o=function(e,t){var r="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!r){if(Array.isArray(e)||(r=function(e,t){if(e){if("string"==typeof e)return rG(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?rG(e,t):void 0}}(e))){r&&(e=r);var n=0,i=function(){};return{s:i,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:i}}throw TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,u=!0,l=!1;return{s:function(){r=r.call(e)},n:function(){var e=r.next();return u=e.done,e},e:function(e){l=!0,o=e},f:function(){try{u||null==r.return||r.return()}finally{if(l)throw o}}}}(t.split("."));try{for(o.s();!(n=o.n()).done;){var u=n.value;if(!Object.prototype.hasOwnProperty.call(i,u)||void 0===i[u])return r;i=i[u]}}catch(e){o.e(e)}finally{o.f()}return i}return r},rK=function(e,t){return Object.keys(e).reduce(function(r,n){var i=e[n];return t.includes(n)||(r[n]=i),r},{})};function rW(e){return(rW="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var rX=function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},n=r.tolerateMissingId;if(ei(e)){var i=K({},e);if(!eo(e=Q(i,"publicId").publicId)&&!(void 0!==n&&n))throw Error("Source is missing 'publicId'.");t&&(t=K({},i,t))}return{publicId:e,options:t}},rQ=function(e){return eg.test(e)},r$=function(e,t){return Object.assign(e,t)},rJ=function(e,t){return function(e,t){let r;"fetch"===t.type&&null==t.fetch_format&&(t.fetch_format=t.format);let n=t.type,i=t.resource_type||"image",o=t.version,u="boolean"!=typeof t.force_version||t.force_version,l=(t.long_url_signature,t.format),c=t.cloud_name;if(!c)throw"cloud_name must be provided in the configuration";let f=t.private_cdn,d=t.secure_distribution,h=t.secure,p=(t.cdn_subdomain,t.secure_cdn_subdomain,t.cname),m=t.shorten,g=t.sign_url,y=(t.api_secret,t.url_suffix),v=t.use_root_path,b=t.auth_token,_=/^(image|raw)\/([a-z0-9_]+)\/v(\d+)\/([^#]+)$/.exec(e);_&&(i=_[1],n=_[2],o=_[3],e=_[4]);let T=e;if(null==e||(e=e.toString(),null===n&&e.match(/^https?:\//i)))return T;[i,n]=function(e,t,r,n,i){if(null==t&&(t="upload"),null!=r){if("image"===e&&"upload"===t)e="images",t=null;else if("image"===e&&"private"===t)e="private_images",t=null;else if("image"===e&&"authenticated"===t)e="authenticated_images",t=null;else if("raw"===e&&"upload"===t)e="files",t=null;else{if("video"!==e||"upload"!==t)throw Error("URL Suffix only supported for image/upload, image/private, image/authenticated, video/upload and raw/upload");e="videos",t=null}}if(n){if(!("image"===e&&"upload"===t||"images"===e&&null==t))throw Error("Root path only supported for image/upload");e=null,t=null}return i&&"image"===e&&"upload"===t&&(e="iu",t=null),[e,t]}(i,n,y,v,m),[e,r]=function(e,t,r){let n;if((e=e.replace(/([^:])\/\//g,"$1/")).match(/^https?:\//i))n=e=eO(e);else{if(n=e=encodeURIComponent(decodeURIComponent(e)).replace(/%3A/g,":").replace(/%2F/g,"/"),r){if(r.match(/[\.\/]/))throw Error("url_suffix should not include . or /");e=e+"/"+r}null!=t&&(e=e+"."+t,n=n+"."+t)}return[e,n]}(e,l,y),null==o&&u&&r.indexOf("/")>=0&&!r.match(/^v[0-9]+/)&&!r.match(/^https?:\//)&&(o=1),o=null!=o?`v${o}`:null;let E=(function e(t){var r;let n,i,o;if("string"==typeof t)return t;if(t instanceof rq)return t.toString();if(Array.isArray(t))return t.map(t=>e(t)).filter(e=>e).join("/");let u=t.size,l=t.overlay||t.underlay,c=t.crop,f=eF(t.angle).join("."),d=(t.background||"").replace(/^#/,"rgb:"),h=(t.color||"").replace(/^#/,"rgb:"),p=eF(t.flags||[]).join("."),m=void 0===t.dpr?t.dpr:(null!=(o=t.dpr.toString())?o.match(/^\d+$/):void 0)?o+".0":eY.normalize(o),g=ej(t.overlay),y=function(e){let t=e;if(!t)return t;if(Array.isArray(t)||(t=[t]),0===t.length||t.length>4)throw Error("Radius array should contain between 1 and 4 values");if(t.findIndex(e=>null===e)>=0)throw Error("Corner: Cannot be null");return t.map(eM).join(":")}(t.radius),v=ej(t.underlay),b=(r=t.if)?"if_"+eM(r):r,_=eB(t.custom_function),T=function(e){let t=eB(e);return"string"==typeof t?`pre:${t}`:null}(t.custom_pre_function),E=t.fps,S=[],w=eF(t.transformation||[]),A=t.effect,C=l||f||"fit"===c||"limit"===c;if(u){let[e,t]=u.split("x");n=e,i=t}else n=t.width,i=t.height;n&&(0===n.toString().indexOf("auto")||C||1>parseFloat(n.toString()))&&delete t.width,i&&(C||1>parseFloat(i.toString()))&&delete t.height;let I=w.some(e=>"object"==typeof e);I?w=w.map(t=>eb(t)?e(t):e({transformation:t})).filter(e=>e):(S=w.join("."),w=[]),Array.isArray(A)?A=A.join(":"):eb(A)&&(A=Object.entries(A).map(([e,t])=>`${e}:${t}`));let O=t.border;eb(O)?O=`${null!=O.width?O.width:2}px_solid_${(null!=O.color?O.color:"black").replace(/^#/,"rgb:")}`:/^\d+$/.exec(O)&&(t.border=O,O=void 0),Array.isArray(E)&&(E=E.join("-"));let R={a:eM(f),ar:eM(t.aspect_ratio),b:d,bo:O,c:c,co:h,dpr:eM(m),e:eM(A),fl:p,fn:_||T,fps:E,h:eM(i),ki:eM(t.keyframe_interval),l:g,o:eM(t.opacity),q:eM(t.quality),r:y,t:S,u:v,w:eM(n),x:eM(t.x),y:eM(t.y),z:eM(t.zoom),ac:t.audio_codec,af:t.audio_frequency,br:t.bit_rate,cs:t.color_space,d:t.default_image,dl:t.delay,dn:t.density,du:eq(t.duration),eo:eq(t.end_offset||eN(t.end_offset)?t.end_offset:eU(t.offset)[1]),f:t.fetch_format,g:t.gravity,pg:t.page,p:t.prefix,so:eq(t.start_offset||eN(t.start_offset)?t.start_offset:eU(t.offset)[0]),sp:t.streaming_profile,vc:function(e){switch(e&&e.constructor){case Object:{let t="";return"codec"in e&&(t=e.codec,"profile"in e&&(t+=":"+e.profile,"level"in e&&(t+=":"+e.level))),t}case String:return e;default:return null}}(t.video_codec),vs:t.video_sampling},P=[b,Object.entries(t).filter(([e,t])=>e.startsWith("$")).map(([e,t])=>`${e}_${eM(t)}`).sort().concat((t.variables||[]).map(([e,t])=>`${e}_${eM(t)}`)).join(","),Object.entries(R).filter(([e,t])=>!(null==t||"string"==typeof t&&0===t.length||Array.isArray(t)&&0===t.length)).map(([e,t])=>`${e}_${t}`).sort().join(","),t.raw_transformation].filter(e=>e).join(",");return P&&w.push(P),w.join("/")})(rl(t)).replace(/([^:])\/\//g,"$1/");if(g&&!b){let e=[E,r].filter(function(e){return null!=e&&""!==e}).join("/");try{for(let t=0;e!==decodeURIComponent(e)&&t<10;t++)e=decodeURIComponent(e)}catch(e){}}return[function(e,t,r,n,i,o,u,l){let c;if(0===t.indexOf("/"))return"/res"+t;let f=!r;return u?(null!=l&&"cloudinary-a.akamaihd.net"!==l||(l=r?t+"-res.cloudinary.com":eE),null==f&&(f=l===eE),c="https://"+l):c=o?"http://"+o:"http://"+[r?t+"-":"","res",".cloudinary.com"].join(""),f&&(c+="/"+t),c}(0,c,f,0,0,p,h,d),i,n,E,o,e].filter(function(e){return null!=e&&""!==e}).join("/").replace(" ","%20")}(e,rK(t,["chainTarget"]))},rZ=function(e,t){var r="Transformation"===e.constructor.name&&e.toOptions?e.toOptions():e;return new rq(r).fromOptions(t).toOptions()},r0=function(e){var t={h265:"hev1.1.6.L93.B0",vp9:"vp09.00.50.08",h264:"avc1.42E01E"};return t[e]?t[e]:e},r1={avc1:"h264",avc2:"h264",svc1:"Scalable Video Coding",mvc1:"Multiview Video Coding",mvc2:"Multiview Video Coding"},r2={0:"No",42:"baseline","4d":"main",58:"extended",64:"high","6e":"high 10","7a":"high 4:2:2",f4:"high 4:4:4","2c":"CAVLC 4:4:4",53:"Scalable Baseline",56:"Scalable High",80:"Stereo High",76:"Multiview High","8a":"Multiview Depth High"},r3=function(e){var t=/(avc1|avc2|svc1|mvc1|mvc2)\.([0-9a-f]{6})/i;if(!1===t.test("avc1.42001e"))throw Error("Codec string is not formatted according to H.264/AVC standards for example avc1.42001e (maybe an iOS friendly version...)");var r=e.match(t);return null!==r?(r.shift(),r1[r[0]]+":"+function(e){var t=/([0-9a-f]{2})([0-9a-f]{2})([0-9a-f]{2})/i;if(!1===t.test(e))throw Error("error: please provide a 3-bytes hex-sequence for example: 42001e");var r=e.match(t);r.shift();var n=r[0];n="string"==typeof(n=r2[n])?n:"Unknown";var i=r[2];return i=String(i=parseInt(i,16)).split("").join("."),"".concat(n,":").concat(i)}(r[1])):e},r4={VP9:"vp9",HEV1:"hev1",H265:"h265",H264:"h264"};function r6(e,t){return Array.prototype.find&&Array.isArray(e)?e.find(t):r5(e,t)[0]}function r8(e,t){return Array.prototype.findIndex?e.findIndex(t):r5(e,t)[1]}function r5(e,t){for(var r=0;r<e.length;r++){var n=e[r];if(t(n,r,e))return[n,r]}return[void 0,-1]}var r9={method:"head"},r7={method:"get",credentials:"include",headers:{"Content-Range":"bytes=0-0"}},ne=function(e,t){var r=t.fetchErrorUsingGet?r7:r9,n=e.videojs.cloudinary.getCurrentSources();n.length>0?Promise.all(n.map(function(e){return fetch(e.src,r)})).then(function(t){var r=t.reduce(function(e,t){if(t.status>=200&&t.status<399&&""!==t.url){var r=nt(t.url);e.push(r.host+r.path)}return e},[]),i=t[0];if(r.length){var o=n.filter(function(e){var t=nt(e.src);return -1!==r.indexOf(t.host+t.path)&&!0!==e.try});o&&o.length?(console.log("Trying urls: "+JSON.stringify(o)),o.forEach(function(e){e.try=!0}),e.videojs.autoplay(e.videojs.autoplay()||e.playWasCalled),e.videojs.src(o)):(console.log("No urls left to try so stopping"),e.videojs.error({code:6,message:"No supported media sources",statusCode:t.status}))}else!function(e,t){var r,n,i,o,u,l,c,f;e.videojs.error((n=(r={errorMsg:t.headers.get("x-cld-error")||"",publicId:e.currentPublicId(),cloudName:e.cloudinaryConfig().cloud_name,error:t,statusCode:t.status}).errorMsg,i=r.publicId,o=r.cloudName,u=r.statusCode,c={code:10,message:"".concat(l="Video cannot be played").concat(n?"- "+n:""),statusCode:u},(f=n.toLowerCase()).startsWith("unknown customer")&&(c.code=11,c.message="".concat(l," Unknown cloud-name ").concat(o)),f.startsWith("resource not found")&&(c.code=12,c.message="".concat(l," Public ID ").concat(i," not found")),f.startsWith("private resource")&&(c.code=13,c.message="".concat(l," Private video")),f.startsWith("unauthenticated access")&&(c.message="".concat(l," Requires authentication"),c.code=14),c))}(e,i)}).catch(function(t){e.videojs.error({code:7,message:t&&t.message?t.message:"Failed to test sources"})}):e.videojs.error({code:6,message:"No supported media sources"})};function nt(e){for(var t={strictMode:!1,key:["source","protocol","authority","userInfo","user","password","host","port","relative","path","directory","file","query","anchor"],q:{name:"queryKey",parser:/(?:^|&)([^&=]*)=?([^&]*)/g},parser:{strict:/^(?:([^:\/?#]+):)?(?:\/\/((?:(([^:@]*)(?::([^:@]*))?)?@)?([^:\/?#]*)(?::(\d*))?))?((((?:[^?#\/]*\/)*)([^?#]*))(?:\?([^#]*))?(?:#(.*))?)/,loose:/^(?:(?![^:@]+:[^:@\/]*@)([^:\/?#.]+):)?(?:\/\/)?((?:(([^:@]*)(?::([^:@]*))?)?@)?([^:\/?#]*)(?::(\d*))?)(((\/(?:[^?#](?![^?#\/]*\.[^?#\/.]+(?:[?#]|$)))*\/?)?([^?#\/]*))(?:\?([^#]*))?(?:#(.*))?)/}},r=t.parser[t.strictMode?"strict":"loose"].exec(e),n={},i=14;i--;)n[t.key[i]]=r[i]||"";return n[t.q.name]={},n[t.key[12]].replace(t.q.parser,function(e,r,i){r&&(n[t.q.name][r]=i)}),n}var nr=function e(t,r){return!!(t&&r&&(Array.isArray(t)?r6(t,function(t){return e(t,r)}):t.getValue?t.getValue(r):t[r]))},nn=function(e,t){e.forEach(function(e){fetch(e.src,r9).then(function(r){r.status>=200&&r.status<=399&&t.addRemoteTextTrack(e,!0)})})};function ni(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},n=r.order,i=void 0===n?null:n,o=t,u=function(r){var n=t[r];void 0!==n&&e[r]&&ec(e[r])&&e[r](n)};i&&(o=K({},t),i.forEach(function(e){u(e),delete o[e]})),Object.keys(o).forEach(function(e){u(e)})}var no=function(e,t){return e.reduce(function(e,r,n){return n=t(r),Object.prototype.hasOwnProperty.call(e,n)?e[n].push(r):e[n]=[r],e},{})};function na(e){return(na="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function ns(e,t){for(var r,n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,(r=function(e,t){if("object"!==na(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,"string");if("object"!==na(n))return n;throw TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(i.key),"symbol"===na(r)?r:String(r)),i)}}function nu(){for(var e,t,r,n=arguments.length,i=Array(n),o=0;o<n;o++)i[o]=arguments[o];return i.reduce(function(e,t){return t(e)},(e=function e(){!function(e,t){if(!(e instanceof t))throw TypeError("Cannot call a class as a function")}(this,e)},t&&ns(e.prototype,t),r&&ns(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e))}var nl=p(596),nc=p.n(nl),nf=function(e,t){var r=t.cloudinary.fontFace;void 0===r&&(r="Fira Sans"),r&&"inherit"!==r?(nc().load({google:{families:[r]}}),e.style.fontFamily=r):"inherit"===r&&(e.style.fontFamily="inherit")},nd=function(e,t){"init"===t.bigPlayButton&&(e.classList.add("vjs-big-play-button-init-only"),t.bigPlayButton=!0)},nh=["cloudinaryConfig","transformation","sourceTypes","sourceTransformation","posterOptions","autoShowRecommendations","fontFace","secure"],np=nh.concat(["publicId","source","autoplayMode","playedEventPercents","playedEventTimes","analytics","cloudinaryAnalytics","fluid","ima","playlistWidget","hideContextMenu","colors","floatingWhenNotVisible","ads","showJumpControls","textTracks","qualitySelector","fetchErrorUsingGet","withCredentials","seekThumbnails","queryParams"]),nm=["cloud_name","secure","private_cdn","secure_distribution","cdn_subdomain","secure_cdn_subdomain","cname","shorten","sign_url","api_secret","url_suffix","use_root_path","auth_token"],ng={html5:{handlePartialData:!1,vhs:{overrideNative:!j()||!j().browser||!j().browser.IS_IOS&&!j().browser.IS_SAFARI}}},ny="cld-fluid",nv={ALWAYS:"always",ON_SCROLL:"on-scroll",NEVER:"never"},nb={LEFT:"left",RIGHT:"right",NONE:"none"};let n_={logoOnclickUrl:"https://cloudinary.com/",showLogo:!0,showJumpControls:!1,playsinline:j().browser.IS_IOS,skin:"dark",controls:!1,controlBar:{pictureInPictureToggle:!1},seekThumbnails:!0,preload:"auto",textTrackSettings:!1,loop:!1,muted:!1,posterOptions:{},sourceTypes:["webm/vp9","mp4/h265","mp4"],contextMenu:{content:function(e){var t=e.loop(),r=e.paused(),n=e.muted(),i=e.isFullscreen(),o={class:"player-version",label:"Cloudinary Player v1.9.12"};return e.controls()?[{label:t?"Unloop":"Loop",listener:function(){e.loop(!t)}},{label:r?"Play":"Pause",listener:function(){r?e.play():e.pause()}},{label:n?"Unmute":"Mute",listener:function(){e.muted(!n)}},{label:i?"Exit Fullscreen":"Fullscreen",listener:function(){i?e.exitFullscreen():e.requestFullscreen()}},o]:[o]}},floatingWhenNotVisible:nb.NONE,hideContextMenu:!1,analytics:!1,cloudinaryAnalytics:!0,playedEventPercents:[25,50,75,100]};var nT="cld-video-player",nE="".concat(nT,"-skin-"),nS=function(e){return"".concat(nT,"-").concat(e.id_)},nw=function(e){return"".concat(nE).concat(e)},nA=function(e){return r6(e.el().classList,function(e){return er(e,nE)})},nC=function(e,t){var r,n=nA(e),i=!!t&&t.replace(nE,"");(r=i?nw(i):e.options_.skin?nw(e.options_.skin):nw(n_.skin))!==n&&(n&&e.removeClass(n),e.addClass(r)),i&&e.options_.skin!==i&&(e.options_.skin=i)},nI=/^(data-cld-)(\w+)/,nO={},nR=function(e){var t={};if(e&&e.attributes&&e.attributes.length>0)for(var r=e.attributes,n=r.length-1;n>=0;n--){var i=r[n].name,o=r[n].value;i.match(nI)&&(i=et(i.replace(nI,"$2"))),o="boolean"==typeof e[i]?null!==o:(nO[i]||function(e){return function(e){var t=null;if(""===e)return!0;try{t=JSON.parse(e)}catch(e){}return t||(t=Number(e))||e}(e)})(o),t[i]=o}return t};let nP=K({},S,w,A,C,I,k,D,R,O,P,N,L);var nk=p(162),nD=p.n(nk);function nN(e){return function(e){if(Array.isArray(e))return nL(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(e){if("string"==typeof e)return nL(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?nL(e,t):void 0}}(e)||function(){throw TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function nL(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}var nx=function(e){return e.class.indexOf("cld-video-player-skin-light")>-1||"light"===e.skin};function nj(e){return(nj="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function nM(e,t){return(nM=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function nF(e){return(nF=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var nB=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&nM(e,t)}(i,e);var t,r,n=(r=function(){if("undefined"==typeof Reflect||!Reflect.construct||Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}(),function(){var e,t=nF(i);if(r){var n=nF(this).constructor;e=Reflect.construct(t,arguments,n)}else e=t.apply(this,arguments);return function(e,t){if(t&&("object"===nj(t)||"function"==typeof t))return t;if(void 0!==t)throw TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,e)});function i(){return function(e,t){if(!(e instanceof t))throw TypeError("Cannot call a class as a function")}(this,i),n.apply(this,arguments)}return t=[{key:"createEl",value:function(){var e=this.options_.playerOptions,t=e.showLogo?"block":"none",r=nx(e)?"https://res.cloudinary.com/cloudinary-marketing/image/upload/v1597164189/creative_source/Logo/Cloud%20Glyph/cloudinary_cloud_glyph_regular.svg":"https://res.cloudinary.com/cloudinary-marketing/image/upload/v1597164191/creative_source/Logo/Cloud%20Glyph/cloudinary_cloud_glyph_white.svg",n=e.logoImageUrl?e.logoImageUrl:r;return j().dom.createEl("a",{},{class:"vjs-control vjs-cloudinary-button vjs-button",href:e.logoOnclickUrl,target:"_blank",style:"display: ".concat(t,"; background-image: url(").concat(n,")"),"aria-label":"Logo link"})}}],function(e,t){for(var r,n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,(r=function(e,t){if("object"!==nj(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,"string");if("object"!==nj(n))return n;throw TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(i.key),"symbol"===nj(r)?r:String(r)),i)}}(i.prototype,t),Object.defineProperty(i,"prototype",{writable:!1}),i}(j().getComponent("ClickableComponent"));function nU(e){return(nU="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function nq(){return(nq="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,r){var n=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=nV(e)););return e}(e,t);if(n){var i=Object.getOwnPropertyDescriptor(n,t);return i.get?i.get.call(arguments.length<3?e:r):i.value}}).apply(this,arguments)}function nH(e,t){return(nH=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function nV(e){return(nV=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}j().registerComponent("logoButton",nB);var nG=j().getComponent("ClickableComponent"),nY={item:null,transformation:{width:300,aspect_ratio:"16:9",crop:"pad",background:"black"}};let nz=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&nH(e,t)}(i,e);var t,r,n=(r=function(){if("undefined"==typeof Reflect||!Reflect.construct||Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}(),function(){var e,t=nV(i);if(r){var n=nV(this).constructor;e=Reflect.construct(t,arguments,n)}else e=t.apply(this,arguments);return function(e,t){if(t&&("object"===nU(t)||"function"==typeof t))return t;if(void 0!==t)throw TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,e)});function i(e,t){!function(e,t){if(!(e instanceof t))throw TypeError("Cannot call a class as a function")}(this,i);var r=j().mergeOptions(nY,t);return n.call(this,e,r)}return t=[{key:"getItem",value:function(){return this.options_.item}},{key:"getTitle",value:function(){return this.getItem().info().title}},{key:"getDuration",value:function(){return" "}},{key:"getThumbnail",value:function(){return this.getItem().poster().url({transformation:this.options_.transformation})}},{key:"handleClick",value:function(e){e.preventDefault()}},{key:"createControlTextEl",value:function(){}},{key:"createEl",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"a",t=nq(nV(i.prototype),"createEl",this).call(this,e,{className:"cld-thumbnail",href:"#"}),r=nq(nV(i.prototype),"createEl",this).call(this,"img",{className:"cld-thumbnail-img",src:this.getThumbnail()});return t.appendChild(r),t.style.backgroundImage="url('".concat(this.getThumbnail(),"')"),t}}],function(e,t){for(var r,n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,(r=function(e,t){if("object"!==nU(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,"string");if("object"!==nU(n))return n;throw TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(i.key),"symbol"===nU(r)?r:String(r)),i)}}(i.prototype,t),Object.defineProperty(i,"prototype",{writable:!1}),i}(nG);function nK(e){return(nK="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function nW(){return(nW="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,r){var n=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=nQ(e)););return e}(e,t);if(n){var i=Object.getOwnPropertyDescriptor(n,t);return i.get?i.get.call(arguments.length<3?e:r):i.value}}).apply(this,arguments)}function nX(e,t){return(nX=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function nQ(e){return(nQ=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var n$=j().dom||j(),nJ={source:null,next:!1},nZ=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&nX(e,t)}(i,e);var t,r,n=(r=function(){if("undefined"==typeof Reflect||!Reflect.construct||Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}(),function(){var e,t=nQ(i);if(r){var n=nQ(this).constructor;e=Reflect.construct(t,arguments,n)}else e=t.apply(this,arguments);return function(e,t){if(t&&("object"===nK(t)||"function"==typeof t))return t;if(void 0!==t)throw TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,e)});function i(e,t){!function(e,t){if(!(e instanceof t))throw TypeError("Cannot call a class as a function")}(this,i);var r=j().mergeOptions(nJ,t);return n.call(this,e,r)}return t=[{key:"handleClick",value:function(e){nW(nQ(i.prototype),"handleClick",this).call(this,e),this.play()}},{key:"play",value:function(){var e=this.getItem(),t=this.player().cloudinary.playlist().list().indexOf(e);if(-1===t)throw Error("Invalid playlist item...");this.player().cloudinary.playlist().playAtIndex(t)}},{key:"isCurrent",value:function(){return this.options_.current}},{key:"getTitle",value:function(){return nW(nQ(i.prototype),"getTitle",this).call(this)}},{key:"getDuration",value:function(){return nW(nQ(i.prototype),"getDuration",this).call(this)}},{key:"createEl",value:function(){var e=nW(nQ(i.prototype),"createEl",this).call(this);e.classList.add("cld-plw-panel-item");var t=n$.createEl("div",{className:"cld-plw-item-info-wrap"}),r=n$.createEl("div",{className:"cld-plw-item-title"});if(this.isCurrent()){e.classList.add("cld-plw-panel-item-active");var n=n$.createEl("span",{className:"cld-plw-item-title-curr"},{},"Now Playing: ");r.appendChild(n)}var o=n$.createEl("span",{className:"cld-plw-item-title"},{},this.getTitle());r.appendChild(o);var u=n$.createEl("div",{className:"cld-plw-item-duration"},{},this.getDuration());return t.appendChild(r),t.appendChild(u),e&&e.appendChild(t),e.appendChild(t),e}}],function(e,t){for(var r,n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,(r=function(e,t){if("object"!==nK(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,"string");if("object"!==nK(n))return n;throw TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(i.key),"symbol"===nK(r)?r:String(r)),i)}}(i.prototype,t),Object.defineProperty(i,"prototype",{writable:!1}),i}(nz);j().registerComponent("playlistPanelItem",nZ);var n0="play",n1="pause",n2="seek",n3="mute",n4="unmute",n6="pausenoseek",n8="error",n5="timeupdate",n9="sourcechanged",n7="loadedmetadata",ie="loadeddata",it="playlistitemchanged",ir="volumechange",ii="fluid",io="ended",ia="resize",is="shoppableitemchanged",iu="fullscreenchange",il="percentsplayed",ic="timeplayed",id="qualitychanged",ih={AUDIO:"AudioSource",VIDEO:"VideoSource"};function ip(e){return(ip="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function im(e,t){return(im=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function ig(e){if(void 0===e)throw ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function iy(){return(iy="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,r){var n=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=iv(e)););return e}(e,t);if(n){var i=Object.getOwnPropertyDescriptor(n,t);return i.get?i.get.call(arguments.length<3?e:r):i.value}}).apply(this,arguments)}function iv(e){return(iv=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var ib=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&im(e,t)}(i,e);var t,r,n=(r=function(){if("undefined"==typeof Reflect||!Reflect.construct||Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}(),function(){var e,t=iv(i);if(r){var n=iv(this).constructor;e=Reflect.construct(t,arguments,n)}else e=t.apply(this,arguments);return function(e,t){if(t&&("object"===ip(t)||"function"==typeof t))return t;if(void 0!==t)throw TypeError("Derived constructors may only return object or undefined");return ig(e)}(this,e)});function i(e){var t,r,o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};(function(e,t){if(!(e instanceof t))throw TypeError("Cannot call a class as a function")})(this,i),r=n.call(this,e,o);var u=function(){r.render()};return e.on(it,u),r.render(),r.dispose=function(){iy((t=ig(r),iv(i.prototype)),"dispose",t).call(t),e.off(it,u)},r}return t=[{key:"createEl",value:function(){var e=iy(iv(i.prototype),"createEl",this).call(this);return e.classList.add("cld-plw-panel"),e}},{key:"removeAll",value:function(){for(var e=this.children(),t=e.length-1;t>=0;--t)this.removeChild(e[t])}},{key:"getItems",value:function(){var e=this.player().cloudinary.playlist(),t=e._repeat;if(this.options_.showAll)return e.list();var r=[],n=this.options_.total,i=e.currentIndex(),o=e.list()[i];for(r.push(o);r.length<n;){if(-1===(i=e.nextIndex(i))){if(!t&&r.length>0)break;i=0}o=e.list()[i],r.push(o)}return r}},{key:"render",value:function(){var e=this,t=this.getItems();this.removeAll(),t.forEach(function(t,r){var n=new nZ(e.player(),j().mergeOptions(e.options_,{item:t,next:1===r,current:0===r}));e.addChild(n)})}}],function(e,t){for(var r,n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,(r=function(e,t){if("object"!==ip(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,"string");if("object"!==ip(n))return n;throw TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(i.key),"symbol"===ip(r)?r:String(r)),i)}}(i.prototype,t),Object.defineProperty(i,"prototype",{writable:!1}),i}(j().getComponent("Component"));function i_(e){return(i_="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function iT(){return(iT="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,r){var n=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=iS(e)););return e}(e,t);if(n){var i=Object.getOwnPropertyDescriptor(n,t);return i.get?i.get.call(arguments.length<3?e:r):i.value}}).apply(this,arguments)}function iE(e,t){return(iE=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function iS(e){return(iS=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}j().registerComponent("playlistPanel",ib);var iw=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&iE(e,t)}(i,e);var t,r,n=(r=function(){if("undefined"==typeof Reflect||!Reflect.construct||Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}(),function(){var e,t=iS(i);if(r){var n=iS(this).constructor;e=Reflect.construct(t,arguments,n)}else e=t.apply(this,arguments);return function(e,t){if(t&&("object"===i_(t)||"function"==typeof t))return t;if(void 0!==t)throw TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,e)});function i(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return function(e,t){if(!(e instanceof t))throw TypeError("Cannot call a class as a function")}(this,i),n.call(this,e,t)}return t=[{key:"createEl",value:function(){return iT(iS(i.prototype),"createEl",this).call(this,"div",{className:"vjs-progress-control-events-blocker"})}}],function(e,t){for(var r,n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,(r=function(e,t){if("object"!==i_(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,"string");if("object"!==i_(n))return n;throw TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(i.key),"symbol"===i_(r)?r:String(r)),i)}}(i.prototype,t),Object.defineProperty(i,"prototype",{writable:!1}),i}(j().getComponent("Component"));function iA(e){return(iA="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function iC(){return(iC="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,r){var n=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=iO(e)););return e}(e,t);if(n){var i=Object.getOwnPropertyDescriptor(n,t);return i.get?i.get.call(arguments.length<3?e:r):i.value}}).apply(this,arguments)}function iI(e,t){return(iI=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function iO(e){return(iO=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}j().registerComponent("progressControlEventsBlocker",iw);let iR=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&iI(e,t)}(i,e);var t,r,n=(r=function(){if("undefined"==typeof Reflect||!Reflect.construct||Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}(),function(){var e,t=iO(i);if(r){var n=iO(this).constructor;e=Reflect.construct(t,arguments,n)}else e=t.apply(this,arguments);return function(e,t){if(t&&("object"===iA(t)||"function"==typeof t))return t;if(void 0!==t)throw TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,e)});function i(){return function(e,t){if(!(e instanceof t))throw TypeError("Cannot call a class as a function")}(this,i),n.apply(this,arguments)}return t=[{key:"setItem",value:function(e){var t=e.action,r=e.source;this.source=r;var n=r.info();this.setTitle(n.title||r.publicId()),this.setPoster(this.source.poster().url({transformation:{aspect_ratio:"16:9",crop:"pad",background:"black"}})),this.setAction(t)}},{key:"setTitle",value:function(e){this.title.innerText=e}},{key:"setAction",value:function(e){this.action=e}},{key:"handleClick",value:function(){iC(iO(i.prototype),"handleClick",this).call(this),this.player().trigger("recommendationshide"),this.action()}}],function(e,t){for(var r,n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,(r=function(e,t){if("object"!==iA(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,"string");if("object"!==iA(n))return n;throw TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(i.key),"symbol"===iA(r)?r:String(r)),i)}}(i.prototype,t),Object.defineProperty(i,"prototype",{writable:!1}),i}(j().getComponent("ClickableComponent"));var iP=p(169),ik=p.n(iP);function iD(e){return(iD="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function iN(){return(iN="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,r){var n=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=ix(e)););return e}(e,t);if(n){var i=Object.getOwnPropertyDescriptor(n,t);return i.get?i.get.call(arguments.length<3?e:r):i.value}}).apply(this,arguments)}function iL(e,t){return(iL=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function ix(e){return(ix=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var ij=j().dom||j();let iM=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&iL(e,t)}(i,e);var t,r,n=(r=function(){if("undefined"==typeof Reflect||!Reflect.construct||Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}(),function(){var e,t=ix(i);if(r){var n=ix(this).constructor;e=Reflect.construct(t,arguments,n)}else e=t.apply(this,arguments);return function(e,t){if(t&&("object"===iD(t)||"function"==typeof t))return t;if(void 0!==t)throw TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,e)});function i(){return function(e,t){if(!(e instanceof t))throw TypeError("Cannot call a class as a function")}(this,i),n.apply(this,arguments)}return t=[{key:"setItem",value:function(e){iN(ix(i.prototype),"setItem",this).call(this,e);var t=this.source.info();if(this.setTitle(t.title),this.setSubtitle(t.subtitle),t.description){var r=t.description.length>300?t.description.substring(0,300)+"...":t.description;this.setDescription(r)}}},{key:"setPoster",value:function(e){this.poster.style.backgroundImage="url('".concat(e,"')")}},{key:"setTitle",value:function(e){ik().setText(this.title,e),this.setAriaCheck(this.title,!!e)}},{key:"setSubtitle",value:function(e){ik().setText(this.subtitle,e),this.setAriaCheck(this.subtitle,!!e)}},{key:"setDescription",value:function(e){ik().setText(this.description,e),this.setAriaCheck(this.description,!!e)}},{key:"setAriaCheck",value:function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];t?e.removeAttribute("aria-hidden"):e.setAttribute("aria-hidden","true")}},{key:"clearItem",value:function(){this.setTitle(""),this.setSubtitle(""),this.setDescription(""),this.poster.style.backgroundImage=null}},{key:"createEl",value:function(){var e=iN(ix(i.prototype),"createEl",this).call(this,"div",{className:"vjs-recommendations-overlay-item vjs-recommendations-overlay-item-primary"});return this.poster=ij.createEl("div",{className:"vjs-recommendations-overlay-item-primary-image"}),this.title=ij.createEl("h2"),this.setAriaCheck(this.title,!1),this.title.innerHTML="",this.subtitle=ij.createEl("h3"),this.setAriaCheck(this.subtitle,!1),this.subtitle.innerHTML="",this.description=ij.createEl("p"),this.setAriaCheck(this.description,!1),this.description.innerHTML="",this.content=ij.createEl("div",{className:"vjs-recommendations-overlay-item-info vjs-recommendations-overlay-item-primary-content"}),this.content.appendChild(this.title),this.content.appendChild(this.subtitle),this.content.appendChild(this.description),e.appendChild(this.poster),e.appendChild(this.content),e}}],function(e,t){for(var r,n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,(r=function(e,t){if("object"!==iD(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,"string");if("object"!==iD(n))return n;throw TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(i.key),"symbol"===iD(r)?r:String(r)),i)}}(i.prototype,t),Object.defineProperty(i,"prototype",{writable:!1}),i}(iR);function iF(e){return(iF="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function iB(){return(iB="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,r){var n=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=iq(e)););return e}(e,t);if(n){var i=Object.getOwnPropertyDescriptor(n,t);return i.get?i.get.call(arguments.length<3?e:r):i.value}}).apply(this,arguments)}function iU(e,t){return(iU=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function iq(e){return(iq=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var iH=j().dom||j();let iV=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&iU(e,t)}(i,e);var t,r,n=(r=function(){if("undefined"==typeof Reflect||!Reflect.construct||Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}(),function(){var e,t=iq(i);if(r){var n=iq(this).constructor;e=Reflect.construct(t,arguments,n)}else e=t.apply(this,arguments);return function(e,t){if(t&&("object"===iF(t)||"function"==typeof t))return t;if(void 0!==t)throw TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,e)});function i(){return function(e,t){if(!(e instanceof t))throw TypeError("Cannot call a class as a function")}(this,i),n.apply(this,arguments)}return t=[{key:"setItem",value:function(e){iB(iq(i.prototype),"setItem",this).call(this,e),this.setDuration("")}},{key:"setPoster",value:function(e){this.el().style.backgroundImage="url('".concat(e,"')")}},{key:"setDuration",value:function(e){this.duration.innerText=e}},{key:"createEl",value:function(){var e=iB(iq(i.prototype),"createEl",this).call(this,"div",{className:"vjs-recommendations-overlay-item vjs-recommendations-overlay-item-secondary"});this.title=iH.createEl("span",{className:"vjs-recommendations-overlay-item-secondary-title"}),this.title.innerHTML="",this.duration=iH.createEl("span",{className:"vjs-recommendations-overlay-item-secondary-duration"}),this.duration.innerHTML="";var t=iH.createEl("div",{className:"vjs-recommendations-overlay-item-info"});return t.appendChild(this.title),t.appendChild(this.duration),e.appendChild(t),e}},{key:"handleClick",value:function(){iB(iq(i.prototype),"handleClick",this).call(this),this.action()}}],function(e,t){for(var r,n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,(r=function(e,t){if("object"!==iF(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,"string");if("object"!==iF(n))return n;throw TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(i.key),"symbol"===iF(r)?r:String(r)),i)}}(i.prototype,t),Object.defineProperty(i,"prototype",{writable:!1}),i}(iR);function iG(e){return(iG="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function iY(){return(iY="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,r){var n=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=iK(e)););return e}(e,t);if(n){var i=Object.getOwnPropertyDescriptor(n,t);return i.get?i.get.call(arguments.length<3?e:r):i.value}}).apply(this,arguments)}function iz(e,t){return(iz=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function iK(e){return(iK=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}let iW=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&iz(e,t)}(i,e);var t,r,n=(r=function(){if("undefined"==typeof Reflect||!Reflect.construct||Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}(),function(){var e,t=iK(i);if(r){var n=iK(this).constructor;e=Reflect.construct(t,arguments,n)}else e=t.apply(this,arguments);return function(e,t){if(t&&("object"===iG(t)||"function"==typeof t))return t;if(void 0!==t)throw TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,e)});function i(){return function(e,t){if(!(e instanceof t))throw TypeError("Cannot call a class as a function")}(this,i),n.apply(this,arguments)}return t=[{key:"setItems",value:function(){for(var e=this,t=arguments.length,r=Array(t),n=0;n<t;n++)r[n]=arguments[n];this.clearItems(),r&&r.forEach(function(t){var r=new iV(e.player());r.setItem(t),e.addChild(r)})}},{key:"clearItems",value:function(){var e=this;this.children().forEach(function(){e.removeChild(e.children()[0])})}},{key:"createEl",value:function(){return iY(iK(i.prototype),"createEl",this).call(this,"div",{className:"vjs-recommendations-overlay-item-secondary-container"})}}],function(e,t){for(var r,n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,(r=function(e,t){if("object"!==iG(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,"string");if("object"!==iG(n))return n;throw TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(i.key),"symbol"===iG(r)?r:String(r)),i)}}(i.prototype,t),Object.defineProperty(i,"prototype",{writable:!1}),i}(j().getComponent("Component"));function iX(e){return(iX="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function iQ(e,t){if(!(e instanceof t))throw TypeError("Cannot call a class as a function")}function i$(e,t){for(var r,n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,(r=function(e,t){if("object"!==iX(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,"string");if("object"!==iX(n))return n;throw TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(i.key),"symbol"===iX(r)?r:String(r)),i)}}function iJ(e,t,r){return t&&i$(e.prototype,t),r&&i$(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}function iZ(){return(iZ="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,r){var n=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=i3(e)););return e}(e,t);if(n){var i=Object.getOwnPropertyDescriptor(n,t);return i.get?i.get.call(arguments.length<3?e:r):i.value}}).apply(this,arguments)}function i0(e,t){if("function"!=typeof t&&null!==t)throw TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&i1(e,t)}function i1(e,t){return(i1=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function i2(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct||Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var r,n=i3(e);if(t){var i=i3(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return function(e,t){if(t&&("object"===iX(t)||"function"==typeof t))return t;if(void 0!==t)throw TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,r)}}function i3(e){return(i3=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var i4=j().getComponent("Component"),i6=function(e){i0(r,e);var t=i2(r);function r(e){var n;iQ(this,r);for(var i=arguments.length,o=Array(i>1?i-1:0),u=1;u<i;u++)o[u-1]=arguments[u];return(n=t.call.apply(t,[this,e].concat(o)))._content=new i8(e),n.addChild(n._content),n}return iJ(r,[{key:"setItems",value:function(e){for(var t,r=arguments.length,n=Array(r>1?r-1:0),i=1;i<r;i++)n[i-1]=arguments[i];(t=this._content).setItems.apply(t,[e].concat(n))}},{key:"clearItems",value:function(){this._content._primary.clearItem(),this._content._secondaryContainer.clearItems()}},{key:"createEl",value:function(){return iZ(i3(r.prototype),"createEl",this).call(this,"div",{className:"vjs-recommendations-overlay-content"})}}]),r}(i4),i8=function(e){i0(r,e);var t=i2(r);function r(e){var n;iQ(this,r);for(var i=arguments.length,o=Array(i>1?i-1:0),u=1;u<i;u++)o[u-1]=arguments[u];return(n=t.call.apply(t,[this,e].concat(o)))._primary=new iM(e),n._secondaryContainer=new iW(e),n.addChild(n._primary),n.addChild(n._secondaryContainer),n}return iJ(r,[{key:"setItems",value:function(e){var t;this._primary.setItem(e);for(var r=arguments.length,n=Array(r>1?r-1:0),i=1;i<r;i++)n[i-1]=arguments[i];(t=this._secondaryContainer).setItems.apply(t,n)}},{key:"createEl",value:function(){return iZ(i3(r.prototype),"createEl",this).call(this,"div",{className:"aspect-ratio-content"})}}]),r}(i4);function i5(e){return(i5="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function i9(){return(i9="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,r){var n=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=oe(e)););return e}(e,t);if(n){var i=Object.getOwnPropertyDescriptor(n,t);return i.get?i.get.call(arguments.length<3?e:r):i.value}}).apply(this,arguments)}function i7(e,t){return(i7=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function oe(e){return(oe=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}let ot=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&i7(e,t)}(i,e);var t,r,n=(r=function(){if("undefined"==typeof Reflect||!Reflect.construct||Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}(),function(){var e,t=oe(i);if(r){var n=oe(this).constructor;e=Reflect.construct(t,arguments,n)}else e=t.apply(this,arguments);return function(e,t){if(t&&("object"===i5(t)||"function"==typeof t))return t;if(void 0!==t)throw TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,e)});function i(){return function(e,t){if(!(e instanceof t))throw TypeError("Cannot call a class as a function")}(this,i),n.apply(this,arguments)}return t=[{key:"createEl",value:function(){return i9(oe(i.prototype),"createEl",this).call(this,"span",{className:"vjs-recommendations-overlay-hide vjs-icon-close"})}},{key:"handleClick",value:function(){this.options_.clickHandler()}}],function(e,t){for(var r,n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,(r=function(e,t){if("object"!==i5(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,"string");if("object"!==i5(n))return n;throw TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(i.key),"symbol"===i5(r)?r:String(r)),i)}}(i.prototype,t),Object.defineProperty(i,"prototype",{writable:!1}),i}(j().getComponent("ClickableComponent"));function or(e){return(or="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function on(e){return function(e){if(Array.isArray(e))return oi(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(e){if("string"==typeof e)return oi(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?oi(e,t):void 0}}(e)||function(){throw TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function oi(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}function oo(e,t,r){return(oo=ou()?Reflect.construct.bind():function(e,t,r){var n=[null];n.push.apply(n,t);var i=new(Function.bind.apply(e,n));return r&&os(i,r.prototype),i}).apply(null,arguments)}function oa(){return(oa="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,r){var n=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=ol(e)););return e}(e,t);if(n){var i=Object.getOwnPropertyDescriptor(n,t);return i.get?i.get.call(arguments.length<3?e:r):i.value}}).apply(this,arguments)}function os(e,t){return(os=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function ou(){if("undefined"==typeof Reflect||!Reflect.construct||Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}function ol(e){return(ol=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var oc=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&os(e,t)}(i,e);var t,r,n=(t=ou(),function(){var e,r=ol(i);if(t){var n=ol(this).constructor;e=Reflect.construct(r,arguments,n)}else e=r.apply(this,arguments);return function(e,t){if(t&&("object"===or(t)||"function"==typeof t))return t;if(void 0!==t)throw TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,e)});function i(e,t){var r;!function(e,t){if(!(e instanceof t))throw TypeError("Cannot call a class as a function")}(this,i);for(var o=arguments.length,u=Array(o>2?o-2:0),l=2;l<o;l++)u[l-2]=arguments[l];return(r=n.call.apply(n,[this,e].concat(u)))._content=new i6(e),r.addChild(r._content),r.addChild(oo(ot,[e,{clickHandler:function(){r.close()}}].concat(u))),r.setEvents(e),r.doNotOpen=!1,r}return r=[{key:"setEvents",value:function(e){var t=this;this.on(e,"recommendationschanged",function(e,r){t.setItems.apply(t,on(r.items))}),this.on(e,"recommendationsnoshow",this.setDoNotOpen),this.on(e,"recommendationsshow",this.open),this.on(e,"recommendationshide",this.close),this.on(e,"cldsourcechanged",function(){t.clearItems(),t.close()})}},{key:"setDoNotOpen",value:function(){this.doNotOpen=!0}},{key:"open",value:function(){this.doNotOpen||(this._showControlsOnClose=this.player().controls(),this.player().controls(!1),this.el().style.visibility="visible")}},{key:"clearItems",value:function(){this._content.clearItems()}},{key:"close",value:function(){this.el().style.visibility="hidden",this._showControlsOnClose&&this.player().controls(!0)}},{key:"createEl",value:function(){var e="vjs-recommendations-overlay",t=oa(ol(i.prototype),"createEl",this).call(this,"div",{className:e});return j().dom.addClass(t,e),t}},{key:"setItems",value:function(e){for(var t,r=arguments.length,n=Array(r>1?r-1:0),i=1;i<r;i++)n[i-1]=arguments[i];this.doNotOpen=!1,n=n.slice(0,3),(t=this._content).setItems.apply(t,[e].concat(on(n)))}},{key:"handleClick",value:function(){this.stopPropagation()}},{key:"dispose",value:function(){oa(ol(i.prototype),"dispose",this).call(this)}}],function(e,t){for(var r,n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,(r=function(e,t){if("object"!==or(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,"string");if("object"!==or(n))return n;throw TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(i.key),"symbol"===or(r)?r:String(r)),i)}}(i.prototype,r),Object.defineProperty(i,"prototype",{writable:!1}),i}(j().getComponent("Component"));function of(e,t){var r=window.performance.now();return function(){var n=window.performance.now();n-r>=t&&(e.apply(void 0,arguments),r=n)}}function od(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}j().registerComponent("recommendationsOverlay",oc);var oh=[1,4,5,6,7,10,11],op=function(e){var t,r=function(e){if(Array.isArray(e))return e}(t=e.split(":").reverse())||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,i,o,u,l=[],c=!0,f=!1;try{if(o=(r=r.call(e)).next,0===t){if(Object(r)!==r)return;c=!1}else for(;!(c=(n=o.call(r)).done)&&(l.push(n.value),l.length!==t);c=!0);}catch(e){f=!0,i=e}finally{try{if(!c&&null!=r.return&&(u=r.return(),Object(u)!==u))return}finally{if(f)throw i}}return l}}(t,3)||function(e,t){if(e){if("string"==typeof e)return od(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?od(e,t):void 0}}(t,3)||function(){throw TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}(),n=r[0],i=r[1],o=r[2],u=null;return isNaN(n)||(u=60*(+o||0)*60+60*(+i||0)+ +n),u},om=function(e,t){var r=Element.prototype;return(r.matches||r.webkitMatchesSelector||r.mozMatchesSelector||r.msMatchesSelector||function(e){return -1!==[].indexOf.call(document.querySelectorAll(e),this)}).call(e,t)},og=function(e){var t=Object.keys(e);if(!t.length)return"";var r=t.map(function(t){return"".concat(t,"=").concat(e[t])}).join("&");return"?".concat(r)};function oy(e){return(oy="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function ov(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function ob(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?ov(Object(r),!0).forEach(function(t){o_(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):ov(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}function o_(e,t,r){return(t=oT(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function oT(e){var t=function(e,t){if("object"!==oy(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,"string");if("object"!==oy(n))return n;throw TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"===oy(t)?t:String(t)}var oE=function(){var e;function t(e){var r=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};(function(e,t){if(!(e instanceof t))throw TypeError("Cannot call a class as a function")})(this,t),o_(this,"_transformation",null);var i=rX(e,n),o=i.publicId,u=i.options,l=Q(u,"cloudinaryConfig").cloudinaryConfig,c=Q(u,"transformation").transformation,f=Q(u,"queryParams").queryParams;if(!l)throw Error('Source is missing "cloudinaryConfig".');this.publicId=function(){return o},this.cloudinaryConfig=function(){return l},this.resourceConfig=function(){return u},this.queryParams=function(){return f},this.getType=function(){return r._type},this.transformation(c)}return e=[{key:"transformation",value:function(e){return e&&(this._transformation=e),this._transformation}},{key:"config",value:function(){var e=this,t=this.cloudinaryConfig();return{cloud_name:t.cloudName,url:function(r,n){if(rQ(r))return r;var i=rZ(e.resourceConfig(),n);return rJ(r,ob(ob({},t),i))}}}},{key:"url",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.transformation,r=this.config().url(this.publicId(),{transformation:t||this.transformation()}),n=this.queryParams()?og(this.queryParams()):"";return"".concat(r).concat(n)}}],function(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,oT(n.key),n)}}(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t}();function oS(e){return(oS="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function ow(e,t){return(ow=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function oA(e){return(oA=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var oC=RegExp("\\.(".concat("jpg|png|gif|webp",")$$")),oI={resource_type:"image",type:"upload",transformation:[]};let oO=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&ow(e,t)}(n,e);var t,r=(t=function(){if("undefined"==typeof Reflect||!Reflect.construct||Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}(),function(){var e,r=oA(n);if(t){var i=oA(this).constructor;e=Reflect.construct(r,arguments,i)}else e=r.apply(this,arguments);return function(e,t){if(t&&("object"===oS(t)||"function"==typeof t))return t;if(void 0!==t)throw TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,e)});function n(e){var t,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};!function(e,t){if(!(e instanceof t))throw TypeError("Cannot call a class as a function")}(this,n);var o=rX(e,i);return e=o.publicId,i=o.options,e=e.replace(oC,""),i=K({},oI,i),(t=r.call(this,e,i))._type="ImageSource",t}return Object.defineProperty(n,"prototype",{writable:!1}),n}(oE);var oR={location:"right",toggleIcon:"",width:"20%",startState:"openOnPlay",autoClose:2,transformation:{quality:"auto",width:"auto",fetch_format:"auto",crop:"scale"},products:[],showPostPlayOverlay:!1},oP="goto",ok="seek",oD="shoppable-panel-visible",oN="shoppable-panel-hidden",oL="shoppable-products-overlay",ox="cld-spbl-panel",oj="cld-spbl-toggle",oM="cld-spbl-toggle-icon",oF="cld-spbl-bar-inner",oB="animate",oU="cld-spbl-item",oq="cld-spbl-img";function oH(e){return(oH="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function oV(){return(oV="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,r){var n=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=oY(e)););return e}(e,t);if(n){var i=Object.getOwnPropertyDescriptor(n,t);return i.get?i.get.call(arguments.length<3?e:r):i.value}}).apply(this,arguments)}function oG(e,t){return(oG=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function oY(e){return(oY=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var oz=j().getComponent("ClickableComponent"),oK=j().dom||j(),oW={width:132},oX=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&oG(e,t)}(i,e);var t,r,n=(r=function(){if("undefined"==typeof Reflect||!Reflect.construct||Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}(),function(){var e,t=oY(i);if(r){var n=oY(this).constructor;e=Reflect.construct(t,arguments,n)}else e=t.apply(this,arguments);return function(e,t){if(t&&("object"===oH(t)||"function"==typeof t))return t;if(void 0!==t)throw TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,e)});function i(e,t){var r;return function(e,t){if(!(e instanceof t))throw TypeError("Cannot call a class as a function")}(this,i),(r=n.call(this,e,t)).options_=t,r.isDragged=!1,r}return t=[{key:"handleClick",value:function(e){e.preventDefault(),e.stopPropagation(),om(this.el_,".dragged .".concat(oU))||this.options_.clickHandler(e),this.isDragged=!1}},{key:"getTitle",value:function(){return this.options_.conf.title}},{key:"createEl",value:function(){var e=oV(oY(i.prototype),"createEl",this).call(this,"a",{className:"".concat(oU," base-color-bg accent-color-text"),href:"#"});e.setAttribute("data-product-id",this.options_.conf.productId||""),e.setAttribute("data-product-name",this.options_.conf.productName||""),this.options_.conf.onHover&&oQ(e,this.options_.conf.onHover,this.options_.item.cloudinaryConfig()),this.options_.conf.onClick&&o$(e,this.options_.conf.onClick);var t=oV(oY(i.prototype),"createEl",this).call(this,"img",{className:oq},{src:this.options_.item.url(oW)});if(e.appendChild(t),this.getTitle()){var r=oK.createEl("div",{className:"cld-spbl-item-info base-color-semi-bg text-color-text"}),n=oK.createEl("span",{className:"cld-spbl-item-title"},{},this.getTitle());r.appendChild(n),e.appendChild(r)}return e}}],function(e,t){for(var r,n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,(r=function(e,t){if("object"!==oH(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,"string");if("object"!==oH(n))return n;throw TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(i.key),"symbol"===oH(r)?r:String(r)),i)}}(i.prototype,t),Object.defineProperty(i,"prototype",{writable:!1}),i}(oz),oQ=function(e,t,r){if(e.setAttribute("data-hover-action",t.action),"overlay"===t.action){var n=oK.createEl("span",{className:"cld-spbl-overlay-text base-color-text"},{},t.args),i=oK.createEl("span",{className:"cld-spbl-overlay text-color-semi-bg base-color-text"},{title:t.args},n);e.appendChild(i)}else{var o=new oO(t.args.publicId,{cloudinaryConfig:r,transformation:t.args.transformation}),u=oK.createEl("img",{className:"".concat(oq," cld-spbl-hover-img")},{src:o.url(oW)});e.appendChild(u)}},o$=function(e,t){e.setAttribute("data-click-action",t.action),e.setAttribute("data-pause",t.pause),t.action===ok?e.setAttribute("data-seek",t.args.time):t.action===oP&&e.setAttribute("data-goto-url",t.args.url)};function oJ(e){return(oJ="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function oZ(e,t){return(oZ=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function o0(e){if(void 0===e)throw ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function o1(){return(o1="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,r){var n=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=o2(e)););return e}(e,t);if(n){var i=Object.getOwnPropertyDescriptor(n,t);return i.get?i.get.call(arguments.length<3?e:r):i.value}}).apply(this,arguments)}function o2(e){return(o2=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}j().registerComponent("shoppablePanelItem",oX);var o3=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&oZ(e,t)}(i,e);var t,r,n=(r=function(){if("undefined"==typeof Reflect||!Reflect.construct||Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}(),function(){var e,t=o2(i);if(r){var n=o2(this).constructor;e=Reflect.construct(t,arguments,n)}else e=t.apply(this,arguments);return function(e,t){if(t&&("object"===oJ(t)||"function"==typeof t))return t;if(void 0!==t)throw TypeError("Derived constructors may only return object or undefined");return o0(e)}(this,e)});function i(e){var t,r,o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};(function(e,t){if(!(e instanceof t))throw TypeError("Cannot call a class as a function")})(this,i),(r=n.call(this,e,o)).options=o;var u=function(){r.render()};return e.on(is,u),r.render(),r.dispose=function(){o1((t=o0(r),o2(i.prototype)),"dispose",t).call(t),e.off(is,u)},r}return t=[{key:"createEl",value:function(){var e=o1(o2(i.prototype),"createEl",this).call(this);return[ox,"base-color-bg"].map(function(t){return e.classList.add(t)}),e}},{key:"removeAll",value:function(){for(var e=this.children(),t=e.length-1;t>=0;--t)this.removeChild(e[t])}},{key:"getItems",value:function(){var e=this,t=this.player_.cloudinary.cloudinaryConfig();return this.options.products.map(function(r){r.onHover&&"object"===oJ(r.onHover.args)&&(r.onHover.args.transformation=K({},e.options.transformation,r.onHover.args.transformation));var n={productId:r.productId,productName:r.productName,title:r.title,onHover:r.onHover,onClick:r.onClick,startTime:r.startTime,endTime:r.endTime};return{imageSrc:new oO(r.publicId,{cloudinaryConfig:t,transformation:K({},e.options.transformation,r.transformation)}),conf:n}})}},{key:"scrollToActiveItem",value:function(){var e=this.el_.getElementsByClassName("active");if(e.length>0){var t=e[0].offsetTop-12;"scrollBehavior"in document.documentElement.style?this.el_.scrollTo({top:t,behavior:"smooth"}):this.el_.scrollTop=t}}},{key:"render",value:function(){var e=this;this.removeAll();var t=this.getItems(),r=of(function(){return e.scrollToActiveItem()},1e3);t.forEach(function(t,n){var i=new oX(e.player(),{item:t.imageSrc,conf:t.conf,next:1===n,current:0===n,clickHandler:function(t){var r=t.currentTarget||t.target,n=e.player_.ended()?"productClickPost":"productClick";if(e.player_.trigger(n,{productId:r.dataset.productId,productName:r.dataset.productName}),r.dataset.clickAction===oP)window.open(r.dataset.gotoUrl,"_blank");else if(r.dataset.clickAction===ok){var i=op(r.dataset.seek);null!==i&&(e.player_.addClass("vjs-has-started"),e.player_.postModal&&e.player_.postModal.close(),e.player_.currentTime(i),e.player_.removeClass(oD),e.player_.addClass(oN),e.player_.addClass(oL),e.player_.one("seeked",function(){return e.player_.trigger("showProductsOverlay")}))}"false"!==r.dataset.pause&&(e.player_.pause(),op(r.dataset.pause)&&setTimeout(function(){e.player_.play()},1e3*op(r.dataset.pause)))}});i.on("mouseover",function(t){var r=t.currentTarget||t.target,n=e.player_.ended()?"productHoverPost":"productHover";e.player_.trigger(n,{productId:r.dataset.productId,productName:r.dataset.productName})}),void 0!==t.conf.startTime&&void 0!==t.conf.endTime&&e.player_.on(n5,function(){var n=e.player_.currentTime();n>=t.conf.startTime&&n<t.conf.endTime?(i.el_.classList.add("active"),r()):i.el_.classList.contains("active")&&i.el_.classList.remove("active")}),e.addChild(i)})}}],function(e,t){for(var r,n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,(r=function(e,t){if("object"!==oJ(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,"string");if("object"!==oJ(n))return n;throw TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(i.key),"symbol"===oJ(r)?r:String(r)),i)}}(i.prototype,t),Object.defineProperty(i,"prototype",{writable:!1}),i}(j().getComponent("Component"));function o4(e){return(o4="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function o6(){return(o6="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,r){var n=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=o5(e)););return e}(e,t);if(n){var i=Object.getOwnPropertyDescriptor(n,t);return i.get?i.get.call(arguments.length<3?e:r):i.value}}).apply(this,arguments)}function o8(e,t){return(o8=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function o5(e){return(o5=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}j().registerComponent("shoppablePanel",o3);var o9=j().dom||j(),o7=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&o8(e,t)}(i,e);var t,r,n=(r=function(){if("undefined"==typeof Reflect||!Reflect.construct||Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}(),function(){var e,t=o5(i);if(r){var n=o5(this).constructor;e=Reflect.construct(t,arguments,n)}else e=t.apply(this,arguments);return function(e,t){if(t&&("object"===o4(t)||"function"==typeof t))return t;if(void 0!==t)throw TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,e)});function i(e){var t,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return function(e,t){if(!(e instanceof t))throw TypeError("Cannot call a class as a function")}(this,i),(t=n.call(this,e,r)).on(e,"cldsourcechanged",function(e,r){var n=r.source;return t.setItem(n)}),t}return t=[{key:"setItem",value:function(e){if(!e)return this.setTitle(""),void this.setSubtitle("");var t=e.info();this.setTitle(t.title),this.setSubtitle(t.subtitle)}},{key:"setTitle",value:function(e){return ik().setText(this.titleEl,e),this.refresh(),e}},{key:"setSubtitle",value:function(e){return ik().setText(this.subtitleEl,e),this.refresh(),e}},{key:"refresh",value:function(){this.titleEl.innerText||this.subtitleEl.innerText?this.show():this.hide()}},{key:"createEl",value:function(){this.titleEl=o9.createEl("div",{className:"vjs-title-bar-title"}),this.subtitleEl=o9.createEl("div",{className:"vjs-title-bar-subtitle"});var e=o6(o5(i.prototype),"createEl",this).call(this,"div",{append:this.titleEl,className:"vjs-title-bar"});return e.appendChild(this.titleEl),e.appendChild(this.subtitleEl),e}}],function(e,t){for(var r,n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,(r=function(e,t){if("object"!==o4(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,"string");if("object"!==o4(n))return n;throw TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(i.key),"symbol"===o4(r)?r:String(r)),i)}}(i.prototype,t),Object.defineProperty(i,"prototype",{writable:!1}),i}(j().getComponent("Component"));function ae(e){return(ae="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function at(){at=function(){return e};var e={},t=Object.prototype,r=t.hasOwnProperty,n=Object.defineProperty||function(e,t,r){e[t]=r.value},i="function"==typeof Symbol?Symbol:{},o=i.iterator||"@@iterator",u=i.asyncIterator||"@@asyncIterator",l=i.toStringTag||"@@toStringTag";function c(e,t,r){return Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{c({},"")}catch(e){c=function(e,t,r){return e[t]=r}}function f(e,t,r,i){var o,u,l=Object.create((t&&t.prototype instanceof p?t:p).prototype);return n(l,"_invoke",{value:(o=new A(i||[]),u="suspendedStart",function(t,n){if("executing"===u)throw Error("Generator is already running");if("completed"===u){if("throw"===t)throw n;return{value:void 0,done:!0}}for(o.method=t,o.arg=n;;){var i=o.delegate;if(i){var l=function e(t,r){var n=r.method,i=t.iterator[n];if(void 0===i)return r.delegate=null,"throw"===n&&t.iterator.return&&(r.method="return",r.arg=void 0,e(t,r),"throw"===r.method)||"return"!==n&&(r.method="throw",r.arg=TypeError("The iterator does not provide a '"+n+"' method")),h;var o=d(i,t.iterator,r.arg);if("throw"===o.type)return r.method="throw",r.arg=o.arg,r.delegate=null,h;var u=o.arg;return u?u.done?(r[t.resultName]=u.value,r.next=t.nextLoc,"return"!==r.method&&(r.method="next",r.arg=void 0),r.delegate=null,h):u:(r.method="throw",r.arg=TypeError("iterator result is not an object"),r.delegate=null,h)}(i,o);if(l){if(l===h)continue;return l}}if("next"===o.method)o.sent=o._sent=o.arg;else if("throw"===o.method){if("suspendedStart"===u)throw u="completed",o.arg;o.dispatchException(o.arg)}else"return"===o.method&&o.abrupt("return",o.arg);u="executing";var c=d(e,r,o);if("normal"===c.type){if(u=o.done?"completed":"suspendedYield",c.arg===h)continue;return{value:c.arg,done:o.done}}"throw"===c.type&&(u="completed",o.method="throw",o.arg=c.arg)}})}),l}function d(e,t,r){try{return{type:"normal",arg:e.call(t,r)}}catch(e){return{type:"throw",arg:e}}}e.wrap=f;var h={};function p(){}function m(){}function g(){}var y={};c(y,o,function(){return this});var v=Object.getPrototypeOf,b=v&&v(v(C([])));b&&b!==t&&r.call(b,o)&&(y=b);var _=g.prototype=p.prototype=Object.create(y);function T(e){["next","throw","return"].forEach(function(t){c(e,t,function(e){return this._invoke(t,e)})})}function E(e,t){var i;n(this,"_invoke",{value:function(n,o){function u(){return new t(function(i,u){!function n(i,o,u,l){var c=d(e[i],e,o);if("throw"!==c.type){var f=c.arg,h=f.value;return h&&"object"==ae(h)&&r.call(h,"__await")?t.resolve(h.__await).then(function(e){n("next",e,u,l)},function(e){n("throw",e,u,l)}):t.resolve(h).then(function(e){f.value=e,u(f)},function(e){return n("throw",e,u,l)})}l(c.arg)}(n,o,i,u)})}return i=i?i.then(u,u):u()}})}function S(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function w(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function A(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(S,this),this.reset(!0)}function C(e){if(e){var t=e[o];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var n=-1,i=function t(){for(;++n<e.length;)if(r.call(e,n))return t.value=e[n],t.done=!1,t;return t.value=void 0,t.done=!0,t};return i.next=i}}return{next:I}}function I(){return{value:void 0,done:!0}}return m.prototype=g,n(_,"constructor",{value:g,configurable:!0}),n(g,"constructor",{value:m,configurable:!0}),m.displayName=c(g,l,"GeneratorFunction"),e.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===m||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,g):(e.__proto__=g,c(e,l,"GeneratorFunction")),e.prototype=Object.create(_),e},e.awrap=function(e){return{__await:e}},T(E.prototype),c(E.prototype,u,function(){return this}),e.AsyncIterator=E,e.async=function(t,r,n,i,o){void 0===o&&(o=Promise);var u=new E(f(t,r,n,i),o);return e.isGeneratorFunction(r)?u:u.next().then(function(e){return e.done?e.value:u.next()})},T(_),c(_,l,"Generator"),c(_,o,function(){return this}),c(_,"toString",function(){return"[object Generator]"}),e.keys=function(e){var t=Object(e),r=[];for(var n in t)r.push(n);return r.reverse(),function e(){for(;r.length;){var n=r.pop();if(n in t)return e.value=n,e.done=!1,e}return e.done=!0,e}},e.values=C,A.prototype={constructor:A,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(w),!e)for(var t in this)"t"===t.charAt(0)&&r.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=void 0)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var t=this;function n(r,n){return u.type="throw",u.arg=e,t.next=r,n&&(t.method="next",t.arg=void 0),!!n}for(var i=this.tryEntries.length-1;i>=0;--i){var o=this.tryEntries[i],u=o.completion;if("root"===o.tryLoc)return n("end");if(o.tryLoc<=this.prev){var l=r.call(o,"catchLoc"),c=r.call(o,"finallyLoc");if(l&&c){if(this.prev<o.catchLoc)return n(o.catchLoc,!0);if(this.prev<o.finallyLoc)return n(o.finallyLoc)}else if(l){if(this.prev<o.catchLoc)return n(o.catchLoc,!0)}else{if(!c)throw Error("try statement without catch or finally");if(this.prev<o.finallyLoc)return n(o.finallyLoc)}}}},abrupt:function(e,t){for(var n=this.tryEntries.length-1;n>=0;--n){var i=this.tryEntries[n];if(i.tryLoc<=this.prev&&r.call(i,"finallyLoc")&&this.prev<i.finallyLoc){var o=i;break}}o&&("break"===e||"continue"===e)&&o.tryLoc<=t&&t<=o.finallyLoc&&(o=null);var u=o?o.completion:{};return u.type=e,u.arg=t,o?(this.method="next",this.next=o.finallyLoc,h):this.complete(u)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),h},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.finallyLoc===e)return this.complete(r.completion,r.afterLoc),w(r),h}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.tryLoc===e){var n=r.completion;if("throw"===n.type){var i=n.arg;w(r)}return i}}throw Error("illegal catch attempt")},delegateYield:function(e,t,r){return this.delegate={iterator:C(e),resultName:t,nextLoc:r},"next"===this.method&&(this.arg=void 0),h}},e}function ar(e,t,r,n,i,o,u){try{var l=e[o](u),c=l.value}catch(e){return void r(e)}l.done?t(c):Promise.resolve(c).then(n,i)}function an(){var e;return(e=at().mark(function e(){var t,r;return at().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,p.e(53).then(p.bind(p,161));case 2:return t=window.dashjs,r=function(e,r){t.MediaPlayer().create().on(t.MediaPlayer.events.PLAYBACK_STALLED,function(e){console.warn("PLAYBACK_STALLED",e)})},j().Html5DashJS.hook("beforeinitialize",r),e.abrupt("return",Promise.resolve());case 6:case"end":return e.stop()}},e)}),an=function(){var t=this,r=arguments;return new Promise(function(n,i){var o=e.apply(t,r);function u(e){ar(o,n,i,u,l,"next",e)}function l(e){ar(o,n,i,u,l,"throw",e)}u(void 0)})}).apply(this,arguments)}function ai(e){return(ai="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function ao(e){return(ao="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function aa(e,t){return(aa=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function as(e){if(void 0===e)throw ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function au(e){return(au=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function al(e,t,r){return(t=ac(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function ac(e){var t=function(e,t){if("object"!==ao(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,"string");if("object"!==ao(n))return n;throw TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"===ao(t)?t:String(t)}j().registerComponent("titleBar",o7),p(833),p(431);var af=j().dom||j(),ad=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&aa(e,t)}(n,e);var t,r=(t=function(){if("undefined"==typeof Reflect||!Reflect.construct||Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}(),function(){var e,r=au(n);if(t){var i=au(this).constructor;e=Reflect.construct(r,arguments,i)}else e=r.apply(this,arguments);return function(e,t){if(t&&("object"===ao(t)||"function"==typeof t))return t;if(void 0!==t)throw TypeError("Derived constructors may only return object or undefined");return as(e)}(this,e)});function n(e){var t,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return function(e,t){if(!(e instanceof t))throw TypeError("Cannot call a class as a function")}(this,n),al(as(t=r.call(this,e,i)),"renderProducts",function(){t.player_.removeClass(oD),t.player_.addClass(oN),t.player_.addClass(oL),t.layout_.innerHTML="";var e=t.player_.currentTime();t.options_.products.filter(function(t){return t.hotspots&&t.hotspots.some(function(t){return op(t.time)===e})}).forEach(function(r){var n=r6(r.hotspots,function(t){return op(t.time)===e}),i=af.createEl("div",{className:"cld-spbl-product-hotspot-name"},{},r.productName),o=af.createEl("div",{className:"cld-spbl-product-tooltip cld-spbl-product-tooltip-"+n.tooltipPosition},{},i),u=af.createEl("a",{className:"cld-spbl-product-hotspot accent-color-text",href:n.clickUrl,target:"_blank"},{style:"left:"+n.x+"; top:"+n.y+";"},o);t.layout_.appendChild(u)}),t.player_.one("seeking",t.clearLayout),t.player_.one(n0,t.clearLayout)}),al(as(t),"clearLayout",function(){t.layout_.innerHTML="",t.player_.removeClass(oL)}),t.options_=i,t.player_=e,t.player_.on("showProductsOverlay",t.renderProducts),t.dispose=function(){t.layout_.dispose()},t}return function(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,ac(n.key),n)}}(n.prototype,[{key:"createEl",value:function(){var e=this.player_.currentDimensions();return this.layout_=af.createEl("div",{className:"cld-spbl-products-overlay",style:"padding-top: ".concat(e.height/e.width*100,"%;")}),this.layout_}}]),Object.defineProperty(n,"prototype",{writable:!1}),n}(j().getComponent("Component"));function ah(e){return(ah="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function ap(){return(ap="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,r){var n=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=ag(e)););return e}(e,t);if(n){var i=Object.getOwnPropertyDescriptor(n,t);return i.get?i.get.call(arguments.length<3?e:r):i.value}}).apply(this,arguments)}function am(e,t){return(am=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function ag(e){return(ag=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}j().registerComponent("ShoppableProductsOverlay",ad);var ay=j().dom||j(),av=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&am(e,t)}(i,e);var t,r,n=(r=function(){if("undefined"==typeof Reflect||!Reflect.construct||Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}(),function(){var e,t=ag(i);if(r){var n=ag(this).constructor;e=Reflect.construct(t,arguments,n)}else e=t.apply(this,arguments);return function(e,t){if(t&&("object"===ah(t)||"function"==typeof t))return t;if(void 0!==t)throw TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,e)});function i(e,t){var r;return function(e,t){if(!(e instanceof t))throw TypeError("Cannot call a class as a function")}(this,i),(r=n.call(this,e,t)).options_=t,r}return t=[{key:"handleClick",value:function(e){e.preventDefault(),e.stopPropagation(),this.options_.clickHandler()}},{key:"createEl",value:function(){var e={},t={};this.options_.toggleIcon?(e={className:"".concat(oM," ").concat("cld-spbl-toggle-custom-icon"," ").concat("vjs-icon-close")},t={style:"background-image: url(".concat(this.options_.toggleIcon,")")}):e={className:"".concat(oM," ").concat("vjs-icon-cart")};var r=ay.createEl("span",e,t),n=ap(ag(i.prototype),"createEl",this).call(this,"a",{className:"".concat(oj," base-color-bg")});return n.appendChild(r),this.player_.on("productBarMin",function(){setTimeout(function(){r.classList.add(oB),setTimeout(function(){r.classList.remove(oB)},1e3)},500)}),n}}],function(e,t){for(var r,n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,(r=function(e,t){if("object"!==ah(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,"string");if("object"!==ah(n))return n;throw TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(i.key),"symbol"===ah(r)?r:String(r)),i)}}(i.prototype,t),Object.defineProperty(i,"prototype",{writable:!1}),i}(j().getComponent("ClickableComponent"));function ab(e){return(ab="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function a_(e,t){return(a_=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function aT(e){if(void 0===e)throw ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function aE(){return(aE="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,r){var n=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=aS(e)););return e}(e,t);if(n){var i=Object.getOwnPropertyDescriptor(n,t);return i.get?i.get.call(arguments.length<3?e:r):i.value}}).apply(this,arguments)}function aS(e){return(aS=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}j().registerComponent("shoppablePanelToggle",av);var aw=j().dom||j(),aA=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&a_(e,t)}(i,e);var t,r,n=(r=function(){if("undefined"==typeof Reflect||!Reflect.construct||Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}(),function(){var e,t=aS(i);if(r){var n=aS(this).constructor;e=Reflect.construct(t,arguments,n)}else e=t.apply(this,arguments);return function(e,t){if(t&&("object"===ab(t)||"function"==typeof t))return t;if(void 0!==t)throw TypeError("Derived constructors may only return object or undefined");return aT(e)}(this,e)});function i(e,t){(function(e,t){if(!(e instanceof t))throw TypeError("Cannot call a class as a function")})(this,i),(o=n.call(this,e,t)).player_=e,o.player().addClass("cld-shoppable-panel"),o.player().addClass(oN),o.contentWrpEl_=aw.createEl("div",{className:"cld-spbl-bar"}),o.contentBannerEl_=aw.createEl("div",{className:"cld-spbl-banner-msg base-color-text"},{},o.options_.bannerMsg||"Shop the Video"),o.contentWrpEl_.appendChild(o.contentBannerEl_);var r,o,u=new ad(o.player_,o.options_);return o.contentWrpEl_.appendChild(u.el_),o.contentEl_=aw.createEl("div",{className:oF}),o.contentWrpEl_.appendChild(o.contentEl_),o.player().el().appendChild(o.contentWrpEl_),o.addChild(new av(o.player_,{toggleIcon:o.options_.toggleIcon,clickHandler:function(){o.togglePanel()}})),o.addChild("ShoppablePanel",o.options_),o.dispose=function(){o.removeLayout(),aE((r=aT(o),aS(i.prototype)),"dispose",r).call(r)},o.togglePanel=function(e){!0===e?(o.player().removeClass(oN),o.player().addClass(oD)):!1===e?(o.player().removeClass(oD),o.player().addClass(oN)):(o.player().toggleClass(oN),o.player().toggleClass(oD));var t=o.player().hasClass(oD)?"productBarMax":"productBarMin";o.player().trigger(t)},"open"===o.options_.startState&&o.togglePanel(!0),o.player_.on(n0,function(){.01>o.player_.currentTime()&&("openOnPlay"===o.options_.startState&&o.togglePanel(!0,o.options_.autoClose),o.options_.autoClose&&-1!==o.options_.startState.indexOf("open")&&setTimeout(function(){om(o.contentEl_,":hover")?o.contentEl_.addEventListener("mouseleave",function(){o.togglePanel(!1)},{once:!0}):o.togglePanel(!1)},1e3*o.options_.autoClose))}),o}return t=[{key:"createEl",value:function(){return aE(aS(i.prototype),"createEl",this).call(this,"div")}}],function(e,t){for(var r,n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,(r=function(e,t){if("object"!==ab(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,"string");if("object"!==ab(n))return n;throw TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(i.key),"symbol"===ab(r)?r:String(r)),i)}}(i.prototype,t),Object.defineProperty(i,"prototype",{writable:!1}),i}(j().getComponent("Component"));function aC(e){return(aC="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function aI(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function aO(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?aI(Object(r),!0).forEach(function(t){var n,i;n=t,i=r[t],(n=aR(n))in e?Object.defineProperty(e,n,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[n]=i}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):aI(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}function aR(e){var t=function(e,t){if("object"!==aC(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,"string");if("object"!==aC(n))return n;throw TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"===aC(t)?t:String(t)}j().registerComponent("shoppableBarLayout",aA);var aP=j().dom||j();let ak=function(){var e;function t(e){var r=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};(function(e,t){if(!(e instanceof t))throw TypeError("Cannot call a class as a function")})(this,t),this.options_=aO(aO({},n),{},{postPlay:!0}),this.player_=e,this.render(),this.handleDragToScroll(),this.dispose=function(){r.layout_.dispose()}}return e=[{key:"handleDragToScroll",value:function(){var e=this.player_.postModal.el_.querySelector(".".concat(ox)),t=!1,r=0,n=0;e.addEventListener("mousedown",function(i){t=!0,r=i.pageX-e.offsetLeft,n=e.scrollLeft}),document.addEventListener("mouseup",function(n){t=!1,setTimeout(function(){e.classList.remove("dragged")},300),Math.abs(n.pageX-e.offsetLeft-r)>5&&n.preventDefault()}),document.addEventListener("mousemove",function(i){if(t){i.preventDefault();var o=i.pageX-e.offsetLeft-r;e.scrollLeft=n-o,Math.abs(o)>5&&!e.classList.contains("dragged")&&e.classList.add("dragged")}})}},{key:"render",value:function(){var e=this;this.player_.postModal=null;var t=aP.createEl("div",{className:"cld-spbl-post-play"}),r=new o3(this.player_,this.options_),n=aP.createEl("div",{className:"cld-spbl-post-title base-color-text"},{},this.options_.bannerMsg||"Shop the Video"),i=this.player_.cloudinary.currentPoster();i.transformation([i.transformation().toOptions?i.transformation().toOptions():{},{effect:"blur:3000"}]);var o=aP.createEl("div",{className:"cld-spbl-post-play-bg",style:'background-image: url("'.concat(i.url(),'")')}),u=aP.createEl("button",{className:"cld-spbl-replay-btn base-color-bg vjs-icon-replay",onclick:function(){e.player_.trigger("replay"),e.player_.postModal.close(),e.player_.play()}},{},"Replay");t.appendChild(o),t.appendChild(n),t.appendChild(r.el()),t.appendChild(u),this.player_.postModal=this.player_.createModal(t,{name:"postModal",uncloseable:!0}),this.player_.addClass("cld-spbl-post-modal"),this.player_.postModal.on("beforemodalclose",function(){e.player_.removeClass("cld-spbl-post-modal")})}}],function(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,aR(n.key),n)}}(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t}();function aD(e){return(aD="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function aN(e,t){if(e){if("string"==typeof e)return aL(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?aL(e,t):void 0}}function aL(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}let ax=function(){var e;function t(e){var r=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};(function(e,t){if(!(e instanceof t))throw TypeError("Cannot call a class as a function")})(this,t),this.options_=j().mergeOptions(oR,n),this.player_=e,this.options_.showPostPlayOverlay&&this.player_.on(io,function(){r.player_.addChild(new ak(r.player_,r.options_))});var i=this.options_.width;this._injectCSS("\n      .".concat(oF," {\n        transform: translateX(").concat(i,");\n      }\n      .").concat(oD," .vjs-control-bar {\n        width: calc(100% - ").concat(i,");\n      }\n      .").concat(oj," {\n        right: ").concat(i,";\n      }\n      .").concat(ox,"{\n        width: ").concat(i,";\n      }\n    ")),this._setListeners()}return e=[{key:"_setListeners",value:function(){var e=this,t=this._resizeHandler.bind(this);this.player_.on(ia,t),window.addEventListener("resize",t),this.dispose=function(){e.player_.off(ia,t),window.removeEventListener("resize",t),e.layout_.dispose()}}},{key:"_injectCSS",value:function(e){var t=document.createElement("style");t.innerHTML=e,this.player_.el_.appendChild(t)}},{key:"_resizeHandler",value:function(){var e,t=parseFloat(this.options_.width)/100*this.player_.el_.clientWidth,r=!1;if(t){var n,i=function(e,t){var r="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!r){if(Array.isArray(e)||(r=aN(e))){r&&(e=r);var n=0,i=function(){};return{s:i,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:i}}throw TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,u=!0,l=!1;return{s:function(){r=r.call(e)},n:function(){var e=r.next();return u=e.done,e},e:function(e){l=!0,o=e},f:function(){try{u||null==r.return||r.return()}finally{if(l)throw o}}}}([["sm",0,80],["md",81,110],["lg",111,170]]);try{for(i.s();!(n=i.n()).done;){var o=(e=n.value,function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,i,o,u,l=[],c=!0,f=!1;try{if(o=(r=r.call(e)).next,0===t){if(Object(r)!==r)return;c=!1}else for(;!(c=(n=o.call(r)).done)&&(l.push(n.value),l.length!==t);c=!0);}catch(e){f=!0,i=e}finally{try{if(!c&&null!=r.return&&(u=r.return(),Object(u)!==u))return}finally{if(f)throw i}}return l}}(e,3)||aN(e,3)||function(){throw TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),u=o[0],l=o[1],c=o[2];t>l&&t<=c&&(this.layout_.contentWrpEl_.setAttribute("size",u),r=u)}}catch(e){i.e(e)}finally{i.f()}r||this.layout_.contentWrpEl_.removeAttribute("size")}}},{key:"init",value:function(){this.render()}},{key:"render",value:function(){this.layout_=new aA(this.player_,this.options_)}}],function(e,t){for(var r,n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,(r=function(e,t){if("object"!==aD(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,"string");if("object"!==aD(n))return n;throw TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(i.key),"symbol"===aD(r)?r:String(r)),i)}}(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t}();function aj(e){return(aj="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function aM(){return(aM="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,r){var n=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=aB(e)););return e}(e,t);if(n){var i=Object.getOwnPropertyDescriptor(n,t);return i.get?i.get.call(arguments.length<3?e:r):i.value}}).apply(this,arguments)}function aF(e,t){return(aF=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function aB(e){return(aB=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var aU=j().getComponent("MenuItem"),aq=j().getComponent("Component"),aH=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&aF(e,t)}(i,e);var t,r,n=(r=function(){if("undefined"==typeof Reflect||!Reflect.construct||Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}(),function(){var e,t=aB(i);if(r){var n=aB(this).constructor;e=Reflect.construct(t,arguments,n)}else e=t.apply(this,arguments);return function(e,t){if(t&&("object"===aj(t)||"function"==typeof t))return t;if(void 0!==t)throw TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,e)});function i(e,t){return function(e,t){if(!(e instanceof t))throw TypeError("Cannot call a class as a function")}(this,i),t.selectable=!0,t.multiSelectable=!1,n.call(this,e,t)}return t=[{key:"handleClick",value:function(){var e=this.options_;console.log("Changing quality to:",e.label),aM(aB(i.prototype),"handleClick",this).call(this);for(var t=this.player().qualityLevels(),r=e.index===t.length,n=0;n<t.length;n++)r||e.index===n?t[n].enabled=!0:t[n].enabled=!1;r?this.deselectRest(6):this.deselectRest(e.index)}},{key:"deselectRest",value:function(e){this.parentComponent_&&this.parentComponent_.children().forEach(function(t){t.selected(e===t.options_.index)})}},{key:"update",value:function(){var e=this.player().qualityLevels().selectedIndex;this.selected(this.options_.index===e)}}],function(e,t){for(var r,n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,(r=function(e,t){if("object"!==aj(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,"string");if("object"!==aj(n))return n;throw TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(i.key),"symbol"===aj(r)?r:String(r)),i)}}(i.prototype,t),Object.defineProperty(i,"prototype",{writable:!1}),i}(aU);function aV(e){return(aV="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function aG(e,t){return(aG=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function aY(e){if(void 0===e)throw ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function az(e){return(az=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}aq.registerComponent("SourceMenuItem",aH);var aK=j().getComponent("MenuButton"),aW=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&aG(e,t)}(i,e);var t,r,n=(r=function(){if("undefined"==typeof Reflect||!Reflect.construct||Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}(),function(){var e,t=az(i);if(r){var n=az(this).constructor;e=Reflect.construct(t,arguments,n)}else e=t.apply(this,arguments);return function(e,t){if(t&&("object"===aV(t)||"function"==typeof t))return t;if(void 0!==t)throw TypeError("Derived constructors may only return object or undefined");return aY(e)}(this,e)});function i(e,t){(function(e,t){if(!(e instanceof t))throw TypeError("Cannot call a class as a function")})(this,i),r=n.call(this,e,t),aK.apply(aY(r),arguments);var r,o=r.player().qualityLevels();if(t&&t.default){if("low"===t.default)for(var u=0;u<o.length;u++)o[u].enabled=0===u;else if("high"===t.default)for(var l=0;l<o.length;l++)o[l].enabled=l===o.length-1}return r.player().qualityLevels().on(["addqualitylevel"],j().bind(aY(r),r.update)),r}return t=[{key:"createEl",value:function(){return j().dom.createEl("div",{className:"vjs-http-source-selector vjs-menu-button vjs-menu-button-popup vjs-control vjs-button"})}},{key:"buildCSSClass",value:function(){return aK.prototype.buildCSSClass.call(this)+" vjs-icon-cog"}},{key:"update",value:function(){return aK.prototype.update.call(this)}},{key:"createItems",value:function(){for(var e=[],t=this.player().qualityLevels(),r=[],n=0;n<t.length;n++){var i=t.length-(n+1),o=i===t.selectedIndex,u="".concat(i),l=i;t[i].height?(u="".concat(t[i].height,"p"),l=parseInt(t[i].height,10)):t[i].bitrate&&(u="".concat(Math.floor(t[i].bitrate/1e3)," kbps"),l=parseInt(t[i].bitrate,10)),r.indexOf(u)>=0||(r.push(u),e.push(new aH(this.player_,{label:u,index:i,selected:o,sortVal:l})))}return t.length>1&&e.push(new aH(this.player_,{label:"Auto",index:t.length,selected:!1,sortVal:99999})),e.sort(function(e,t){return e.options_.sortVal<t.options_.sortVal?1:e.options_.sortVal>t.options_.sortVal?-1:0}),e}}],function(e,t){for(var r,n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,(r=function(e,t){if("object"!==aV(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,"string");if("object"!==aV(n))return n;throw TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(i.key),"symbol"===aV(r)?r:String(r)),i)}}(i.prototype,t),Object.defineProperty(i,"prototype",{writable:!1}),i}(aK),aX={};function aQ(e){return(aQ="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function a$(e,t){for(var r,n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,(r=function(e,t){if("object"!==aQ(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,"string");if("object"!==aQ(n))return n;throw TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(i.key),"symbol"===aQ(r)?r:String(r)),i)}}(j().registerPlugin||j().plugin)("httpSourceSelector",function(e){var t=this;this.ready(function(){j().mergeOptions(aX,e),t.addClass("vjs-http-source-selector"),console.log("videojs-http-source-selector initialized!"),console.log("player.techName_:"+t.techName_),"Html5"===t.techName_&&t.on(["loadedmetadata"],function(){if("undefined"===t.videojs_http_source_selector_initialized||!0===t.videojs_http_source_selector_initialized)console.log("player.videojs_http_source_selector_initialized == true");else{console.log("player.videojs_http_source_selector_initialized == false"),t.videojs_http_source_selector_initialized=!0;var e=t.controlBar,r=e.getChild("fullscreenToggle");r?e.el().insertBefore(e.addChild("SourceMenuButton").el(),r.el()):e.el().appendChild(e.addChild("SourceMenuButton").el())}})}),j().registerComponent("SourceMenuButton",aW),j().registerComponent("SourceMenuItem",aH)});var aJ={fraction:.5,isMuted:!0},aZ=(n=function e(t){var r=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};(function(e,t){if(!(e instanceof t))throw TypeError("Cannot call a class as a function")})(this,e),n=K({},aJ,n),this.player=t;var i=X(n,"fraction"),o=!1,u=!1,l=null,c=null;this.init=function(){m(),p()};var f=function(){window.removeEventListener("DOMContentLoaded",p,!1),window.removeEventListener("load",p,!1),window.removeEventListener("scroll",p,!1),window.removeEventListener("resize",p,!1),r.player.off("pause",l),r.player.off("play",c)},d=function(){o=!0,u=!1,r.player.pause()},h=function(){o=!1,u=!0,r.player.play()},p=function(){Z(r.player.el(),{fraction:i.fraction})?r.player.paused()&&h():r.player.paused()||r.player.activePlugins_.floatingPlayer||d()},m=function(){l=function(){r.player.waiting||o||f()},c=function(){u||f()},window.addEventListener("DOMContentLoaded",p,!1),window.addEventListener("load",p,!1),window.addEventListener("scroll",p,!1),window.addEventListener("resize",p,!1),r.player.on("pause",l),r.player.on("play",c)}},o&&a$(n.prototype,o),u&&a$(n,u),Object.defineProperty(n,"prototype",{writable:!1}),n);function a0(e){return(a0="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function a1(e,t){for(var r,n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,(r=function(e,t){if("object"!==a0(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,"string");if("object"!==a0(n))return n;throw TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(i.key),"symbol"===a0(r)?r:String(r)),i)}}var a2={fraction:.5,collapsedWidth:300,floatTo:"right"},a3=(l=function e(t){var r=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};(function(e,t){if(!(e instanceof t))throw TypeError("Cannot call a class as a function")})(this,e),(n=K({},a2,n)).floatTo&&n.floatTo!==nb.LEFT&&n.floatTo!==nb.RIGHT&&(n.floatTo=a2.floatTo),this.player=t;var i=this.player.el(),o=X(n,"fraction"),u=null,l=!1,c=!1;this.init=function(){p(),"object"===a0(r.player.ima)&&g()};var f=function(e){var t=document.createElement("div");for(e.appendChild(t);e.firstChild!==t;)t.appendChild(e.firstChild);return t},d=function(){window.removeEventListener("DOMContentLoaded",T,!1),window.removeEventListener("load",T,!1),window.removeEventListener("scroll",T,!1),window.removeEventListener("resize",T,!1)},h=function(){window.addEventListener("DOMContentLoaded",T,!1),window.addEventListener("load",T,!1),window.addEventListener("scroll",T,!1),window.addEventListener("resize",T,!1)},p=function(){r.player.on("play",T),r.player.on("play",h),r.player.on("dispose",d)},m=function(){var e=i.getBoundingClientRect();u.setAttribute("class","cld-video-player-floater cld-video-player-floater-bottom-".concat(n.floatTo)),u.setAttribute("style",["width: "+n.collapsedWidth+"px;","top: "+e.top+"px;","left: "+e.left+"px;","right: "+(document.documentElement.clientWidth-e.right)+"px;","bottom: "+(document.documentElement.clientHeight-e.bottom)+"px;"].join("")),c=!0},g=function(){var e=i.getBoundingClientRect();u=f(i);var t=f(u);t.setAttribute("class","cld-video-player-floater-inner"),t.setAttribute("style","padding-bottom: "+100*e.height/e.width+"%;");var r=document.createElement("button");r.setAttribute("class","cld-video-player-floater-close"),r.innerHTML='<svg xmlns="http://www.w3.org/2000/svg" width="12" height="12" viewBox="0 0 12 12"><polygon fill-rule="evenodd" points="370 7.41 368.59 6 364 10.59 359.41 6 358 7.41 362.59 12 358 16.59 359.41 18 364 13.41 368.59 18 370 16.59 365.41 12" transform="translate(-358 -6)"/></svg>',r.onclick=function(){b(),_()},u.appendChild(r)},y=function(){var e=r.player.ima;e&&e.adsActive&&e.getAdsManager().resize(l?u.clientWidth:i.clientWidth,l?u.clientHeight:i.clientHeight)},v=function(){u||g(),c||m(),l=!0,setTimeout(function(){u.classList.add("cld-video-player-floating"),y()})},b=function(){u.classList.remove("cld-video-player-floating"),l=!1,y()},_=function(){d(),r.player.off("play",T),r.player.off("play",h)},T=function(){Z(r.player.el(),{fraction:o.fraction})?l&&b():l||v()}},c&&a1(l.prototype,c),f&&a1(l,f),Object.defineProperty(l,"prototype",{writable:!1}),l);function a4(e){return(a4="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function a6(e,t){for(var r,n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,(r=function(e,t){if("object"!==a4(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,"string");if("object"!==a4(n))return n;throw TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(i.key),"symbol"===a4(r)?r:String(r)),i)}}var a8={colorsDark:{base:"#000000",accent:"#FF620C",text:"#FFFFFF"},colorsLight:{base:"#FFFFFF",accent:"#0078FF",text:"#0E2F5A"}},a5=function(e){return nx(e)?a8.colorsLight:a8.colorsDark},a9=(d=function e(t){var r=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};(function(e,t){if(!(e instanceof t))throw TypeError("Cannot call a class as a function")})(this,e),this.player=t;var i=a5(this.player.options_);n.colors=K({},i,n.colors),this.init=function(){o(l("\n  .PLAYER-CLASS-PREFIX {\n    --color-accent: --accent-color;\n    --color-base: --base-color;\n    --color-text: --text-color;\n\n    color: --text-color;\n  }\n\n  .PLAYER-CLASS-PREFIX .vjs-time-tooltip,\n  .PLAYER-CLASS-PREFIX .vjs-mouse-display:after,\n  .PLAYER-CLASS-PREFIX .vjs-play-progress:after {\n    color: --base-color;\n    background-color: --text-color;\n  }\n\n  .PLAYER-CLASS-PREFIX .vjs-slider {\n    background-color: rgba(--accent-color, 0.3);\n  }\n\n  .PLAYER-CLASS-PREFIX .vjs-load-progress,\n  .PLAYER-CLASS-PREFIX .vjs-load-progress div {\n    background: rgba(--accent-color, 0.2);\n  }\n\n  .PLAYER-CLASS-PREFIX .vjs-volume-level,\n  .PLAYER-CLASS-PREFIX .vjs-play-progress {\n    background: --accent-color;\n  }\n\n  .PLAYER-CLASS-PREFIX .vjs-volume-vertical {\n    background-color: rgba(--base-color, 0.7);\n  }\n\n  .PLAYER-CLASS-PREFIX .vjs-volume-panel-horizontal .vjs-control:before {\n    border-color: transparent transparent rgba(--accent-color, 0.4) transparent;\n  }\n\n  .PLAYER-CLASS-PREFIX .vjs-volume-panel-horizontal .vjs-volume-level:before {\n    border-color: transparent transparent --accent-color transparent;\n  }\n\n  .PLAYER-CLASS-PREFIX .vjs-title-bar {\n    color: --text-color;\n  }\n\n  .PLAYER-CLASS-PREFIX .vjs-recommendations-overlay {\n    color: --text-color;\n    background-color: rgba(--base-color, 0.4);\n  }\n\n  .PLAYER-CLASS-PREFIX .vjs-recommendations-overlay .vjs-recommendations-overlay-item {\n    box-shadow: 0 0.5em 1.2em 0px --base-color;\n    color: --text-color;\n    border: 1px solid --text-color !important;\n    position: relative;\n  }\n\n  .PLAYER-CLASS-PREFIX .vjs-recommendations-overlay .vjs-recommendations-overlay-item:active,\n  .PLAYER-CLASS-PREFIX .vjs-recommendations-overlay .vjs-recommendations-overlay-item:hover {\n    border: 1px solid --accent-color !important;\n  }\n\n  .PLAYER-CLASS-PREFIX .vjs-context-menu-ui .vjs-menu-content .vjs-menu-item:active,\n  .PLAYER-CLASS-PREFIX .vjs-context-menu-ui .vjs-menu-content .vjs-menu-item:hover {\n    color: --text-color;\n    background-color: --accent-color;\n  }\n\n  .PLAYER-CLASS-PREFIX.vjs-ad-playing .vjs-progress-control .vjs-play-progress {\n    background: --base-color;\n  }\n\n  .PLAYER-CLASS-PREFIX.cld-plw-layout {\n    background-color: --base-color;\n  }\n\n  .PLAYER-CLASS-PREFIX .cld-plw-item-info-wrap {\n    color: --text-color;\n  }\n\n  .PLAYER-CLASS-PREFIX .cld-plw-panel-item {\n    border-color: --text-color;\n  }\n\n  .PLAYER-CLASS-PREFIX .cld-video-player-floater-close polygon {\n    fill: --base-color;\n  }\n\n  .PLAYER-CLASS-PREFIX .cld-spbl-product-hotspot:after {\n    background: --base-color;\n    box-shadow: 0 0 0 4px --accent-color, 0 0 0 8px rgba(--text-color, 0.24);\n  }\n\n  .PLAYER-CLASS-PREFIX .cld-spbl-product-tooltip {\n    color: --base-color;\n    background: --text-color;\n  }\n\n  .PLAYER-CLASS-PREFIX .base-color-semi-bg {\n    background: rgba(--base-color, 0.7);\n  }\n\n  .PLAYER-CLASS-PREFIX .text-color-semi-bg {\n    background: rgba(--text-color, 0.7);\n  }\n\n  .PLAYER-CLASS-PREFIX .text-color-text {\n    color: --text-color;\n  }\n\n  .PLAYER-CLASS-PREFIX .base-color-text {\n    color: --base-color;\n  }\n\n  .PLAYER-CLASS-PREFIX .accent-color-text {\n    color: --accent-color;\n  }\n")),"light"===r.player.options_.skin?o(l("\n  .PLAYER-CLASS-PREFIX .vjs-title-bar {\n    flex-direction: row;\n    justify-content: left;\n    height: 3.6em;\n    background: --base-color;\n  }\n\n  .PLAYER-CLASS-PREFIX .vjs-title-bar div {\n    width: auto;\n    padding: 0 inherit;\n    margin: 0;\n  }\n\n  .PLAYER-CLASS-PREFIX.cld-video-player-skin-light .base-color-bg,\n  .PLAYER-CLASS-PREFIX.cld-video-player-skin-light .vjs-control-bar,\n  .PLAYER-CLASS-PREFIX.cld-video-player-skin-light .vjs-big-play-button,\n  .PLAYER-CLASS-PREFIX.cld-video-player-skin-light .vjs-menu-button .vjs-menu-content {\n    background-color: --base-color;\n  }\n\n  .PLAYER-CLASS-PREFIX .vjs-recommendations-overlay .vjs-recommendations-overlay-item.vjs-recommendations-overlay-item-primary .vjs-recommendations-overlay-item-primary-content {\n    background-color: --base-color;\n  }\n\n  .PLAYER-CLASS-PREFIX .vjs-recommendations-overlay .vjs-recommendations-overlay-item.vjs-recommendations-overlay-item-primary:active .vjs-recommendations-overlay-item-primary-content,\n  .PLAYER-CLASS-PREFIX .vjs-recommendations-overlay .vjs-recommendations-overlay-item.vjs-recommendations-overlay-item-primary:hover .vjs-recommendations-overlay-item-primary-content {\n    color: --base-color;\n    background-color: rgba(--accent-color, 0.8);\n  }\n\n  .PLAYER-CLASS-PREFIX .vjs-recommendations-overlay .vjs-recommendations-overlay-item.vjs-recommendations-overlay-item-secondary:active div,\n  .PLAYER-CLASS-PREFIX .vjs-recommendations-overlay .vjs-recommendations-overlay-item.vjs-recommendations-overlay-item-secondary:hover div {\n    color: --base-color;\n    background-color: rgba(--accent-color, 0.8);\n  }\n\n  .PLAYER-CLASS-PREFIX .vjs-recommendations-overlay .vjs-recommendations-overlay-item.vjs-recommendations-overlay-item-secondary div {\n    background: --base-color;\n  }\n\n  .PLAYER-CLASS-PREFIX .vjs-upcoming-video {\n    border: 1px solid --text-color;\n  }\n\n  .PLAYER-CLASS-PREFIX .vjs-upcoming-video .vjs-upcoming-video-bar {\n    background-color: --base-color;\n  }\n\n  .PLAYER-CLASS-PREFIX .vjs-context-menu-ui .vjs-menu-content {\n    background-color: --base-color;\n  }\n\n  .PLAYER-CLASS-PREFIX .cld-plw-item-info-wrap {\n    color: --text-color;\n  }\n\n  @media only screen and (max-width: 768px) {\n    .PLAYER-CLASS-PREFIX.cld-plw-vertical .cld-plw-item-info-wrap {\n      color: --accent-color;\n    }\n  }\n")):o(l("\n\n  .PLAYER-CLASS-PREFIX.cld-video-player-skin-dark .base-color-bg,\n  .PLAYER-CLASS-PREFIX.cld-video-player-skin-dark .vjs-control-bar,\n  .PLAYER-CLASS-PREFIX.cld-video-player-skin-dark .vjs-big-play-button,\n  .PLAYER-CLASS-PREFIX.cld-video-player-skin-dark .vjs-menu-button\n  .vjs-menu-content {\n    background-color: rgba(--base-color, 0.6);\n  }\n\n  .PLAYER-CLASS-PREFIX .vjs-title-bar {\n    background-image: linear-gradient(--base-color, rgba(255, 255, 255, 0) 100%);\n  }\n\n  .PLAYER-CLASS-PREFIX .vjs-recommendations-overlay .vjs-recommendations-overlay-item.vjs-recommendations-overlay-item-primary .vjs-recommendations-overlay-item-primary-content {\n    background-color: rgba(--base-color, 0.6);\n  }\n\n  .PLAYER-CLASS-PREFIX .vjs-recommendations-overlay .vjs-recommendations-overlay-item.vjs-recommendations-overlay-item-secondary div {\n    background: linear-gradient(to top, rgba(0, 0, 0, 0.7), transparent 80%);\n  }\n\n  .PLAYER-CLASS-PREFIX .vjs-upcoming-video {\n    border: 1px solid rgba(--text-color, 0.5);\n  }\n\n  .PLAYER-CLASS-PREFIX .vjs-upcoming-video .vjs-upcoming-video-bar {\n    background-color: rgba(--base-color, 0.6);\n  }\n\n  .PLAYER-CLASS-PREFIX .vjs-context-menu-ui .vjs-menu-content {\n    background-color: rgba(--base-color, 0.6);\n  }\n"))};var o=function(e){var t=document.createElement("style");t.innerHTML=e,r.player.el_.appendChild(t)},u=function(e){e=e.replace(/^#?([a-f\d])([a-f\d])([a-f\d])$/i,function(e,t,r,n){return t+t+r+r+n+n});var t=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(e);return t?parseInt(t[1],16)+", "+parseInt(t[2],16)+", "+parseInt(t[3],16):null},l=function(e){return e.replace(/PLAYER\-CLASS\-PREFIX/g,nS(r.player)).replace(/rgba\(\-\-base\-color/g,"rgba("+u(n.colors.base)).replace(/rgba\(\-\-accent\-color/g,"rgba("+u(n.colors.accent)).replace(/rgba\(\-\-text\-color/g,"rgba("+u(n.colors.text)).replace(/\-\-base\-color/g,n.colors.base).replace(/\-\-accent\-color/g,n.colors.accent).replace(/\-\-text\-color/g,n.colors.text)}},h&&a6(d.prototype,h),g&&a6(d,g),Object.defineProperty(d,"prototype",{writable:!1}),d),a7={cancel:!0,sensitivity:10,wait:500,disabled:!1},se="vjs-contextmenu";function st(e,t){if(e.contextmenu.options.disabled)return e;var r={target:e,type:se};return["clientX","clientY","pageX","pageY","screenX","screenY"].forEach(function(e){r[e]=t[e]}),e.trigger(r)}function sr(e){var t=this.contextmenu.current;if(t){var r=this.contextmenu.options.wait;"touchend"===e.type&&(new Date).getTime()-t.time>=r&&st(this,e),this.contextmenu.current=null}}function sn(e){var t=this.contextmenu.current;if(t){var r=e.touches[0],n=this.contextmenu.options.sensitivity;(r.screenX-t.screenX>n||r.screenY-t.screenY>n)&&(this.contextmenu.current=null)}}function si(e){if(!this.contextmenu.current){var t=e.touches[0];this.contextmenu.current={screenX:t.screenX,screenY:t.screenY,time:(new Date).getTime()}}}function so(e){this.contextmenu.options.cancel&&!this.contextmenu.options.disabled&&e.preventDefault(),st(this,e),this.off(["touchcancel","touchend"],sr),this.off("touchmove",sn),this.off("touchstart",si)}j().registerPlugin("contextmenu",function(e){var t=this;this.contextmenu.options=j().mergeOptions(a7,e),this.on("contextmenu",so),this.on(["touchcancel","touchend"],sr),this.on("touchmove",sn),this.on("touchstart",si),this.ready(function(){return t.addClass(se)})});var sa=function(e){return Array.isArray(e)?e:[e]},ss=function(e,t){Array.isArray(e)&&e.length&&e.forEach(t)},su=function(e,t){return!(!Array.isArray(e)||!e.length)&&e.some(t)},sl=function(e,t){if(Array.isArray(e)&&e.length)return e.map(t)};function sc(e){return(sc="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var sf=function(e,t){return e.parentNode.insertBefore(t,e),t.appendChild(e),t},sd=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=arguments.length>2?arguments[2]:void 0,n=document.createElement(e);for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&n.setAttribute(i,t[i]);return sa(r).forEach(function(e){return sh(e,n)}),n},sh=function(e,t){if(el(e))t.appendChild(e);else if(e&&"object"!==sc(e)){var r=document.createTextNode(e);t.appendChild(r)}},sp=function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e.style[r]=t[r]);return e},sm=function e(t){var r=Array.isArray(t.children)?t.children.map(e):t.children,n=el(t)?t:sd(t.tag,t.attr,r);return t.onClick&&(t.event={name:"click",callback:t.onClick}),t.event&&n.addEventListener(t.event.name,t.event.callback,!1),t.style&&sp(n,t.style),n};function sg(e){return(sg="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function sy(){return(sy="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,r){var n=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=sb(e)););return e}(e,t);if(n){var i=Object.getOwnPropertyDescriptor(n,t);return i.get?i.get.call(arguments.length<3?e:r):i.value}}).apply(this,arguments)}function sv(e,t){return(sv=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function sb(e){return(sb=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}let s_=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&sv(e,t)}(i,e);var t,r,n=(r=function(){if("undefined"==typeof Reflect||!Reflect.construct||Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}(),function(){var e,t=sb(i);if(r){var n=sb(this).constructor;e=Reflect.construct(t,arguments,n)}else e=t.apply(this,arguments);return function(e,t){if(t&&("object"===sg(t)||"function"==typeof t))return t;if(void 0!==t)throw TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,e)});function i(){return function(e,t){if(!(e instanceof t))throw TypeError("Cannot call a class as a function")}(this,i),n.apply(this,arguments)}return t=[{key:"handleClick",value:function(){sy(sb(i.prototype),"handleClick",this).call(this),this.options_.listener()}},{key:"createEl",value:function(){var e=sd("span",{class:"vjs-menu-item-text"+(this.options_.class?" ".concat(this.options_.class):"")});return e.appendChild(document.createTextNode(this.localize(this.options_.label))),sd("li",{class:"vjs-menu-item",tabIndex:-1},e)}}],function(e,t){for(var r,n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,(r=function(e,t){if("object"!==sg(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,"string");if("object"!==sg(n))return n;throw TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(i.key),"symbol"===sg(r)?r:String(r)),i)}}(i.prototype,t),Object.defineProperty(i,"prototype",{writable:!1}),i}(j().getComponent("MenuItem"));function sT(e){return(sT="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function sE(){return(sE="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,r){var n=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=sA(e)););return e}(e,t);if(n){var i=Object.getOwnPropertyDescriptor(n,t);return i.get?i.get.call(arguments.length<3?e:r):i.value}}).apply(this,arguments)}function sS(e,t){return(sS=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function sw(e){if(void 0===e)throw ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function sA(e){return(sA=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}let sC=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&sS(e,t)}(i,e);var t,r,n=(r=function(){if("undefined"==typeof Reflect||!Reflect.construct||Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}(),function(){var e,t=sA(i);if(r){var n=sA(this).constructor;e=Reflect.construct(t,arguments,n)}else e=t.apply(this,arguments);return function(e,t){if(t&&("object"===sT(t)||"function"==typeof t))return t;if(void 0!==t)throw TypeError("Derived constructors may only return object or undefined");return sw(e)}(this,e)});function i(e,t){var r;return function(e,t){if(!(e instanceof t))throw TypeError("Cannot call a class as a function")}(this,i),(r=n.call(this,e,t)).dispose=j().bind(sw(r),r.dispose),t.content.forEach(function(t){var n=null;n=ec(t.listener)?t.listener:"string"==typeof t.href?function(){return window.open(t.href)}:function(){return!0};var i=sw(r);r.addItem(new s_(e,{label:t.label,class:t.class,listener:j().bind(e,function(){n(this),window.setTimeout(function(){i.dispose()},1)})}))}),r}return t=[{key:"setPosition",value:function(e,t){ee(this.el(),e,t)}},{key:"createEl",value:function(){var e=sE(sA(i.prototype),"createEl",this).call(this);if(j().dom.addClass(e,"vjs-context-menu-ui"),this.options_.position){var t=this.options_.position,r=t.left,n=t.top;this.setPosition(r,n)}return e}}],function(e,t){for(var r,n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,(r=function(e,t){if("object"!==sT(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,"string");if("object"!==sT(n))return n;throw TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(i.key),"symbol"===sT(r)?r:String(r)),i)}}(i.prototype,t),Object.defineProperty(i,"prototype",{writable:!1}),i}(j().getComponent("Menu"));function sI(e){return(sI="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function sO(e,t){for(var r,n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,(r=function(e,t){if("object"!==sI(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,"string");if("object"!==sI(n))return n;throw TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(i.key),"symbol"===sI(r)?r:String(r)),i)}}var sR={showNativeOnRecurringEvent:!1},sP=(y=function e(t,r){var n=this;if(function(e,t){if(!(e instanceof t))throw TypeError("Cannot call a class as a function")}(this,e),!Array.isArray(r.content)&&!ec(r.content))throw Error('"content" required');var i=K({},sR,r);this.player=t;var o=X(i,"content","showNativeOnRecurringEvent");this.init=function(){n.player.contextmenu(),n.player.on("vjs-contextmenu",u),n.player.ready(function(){return n.player.addClass("vjs-context-menu")})};var u=function(e){if(!n.menu||(n.menu.dispose(),!o.showNativeOnRecurringEvent)){o.showNativeOnRecurringEvent&&(n.player.contextmenu.options.cancel=!1),e.preventDefault();var t,r,i,u,l,c,f,d,h=o.content;ec(h)&&(h=h(n.player)),n.menu=new sC(n.player,{content:h});var p=((t=n.menu.el()).style.visibility="hidden",n.player.el().appendChild(t),r=t.getBoundingClientRect(),n.player.el().removeChild(t),t.style.visibility="visible",i=J(n.player.el(),e),l=(u=n.player.el().getBoundingClientRect()).height-u.height*i.y+1,c=Math.round(u.width*i.x)+1,f=l,d=c,l+r.height>u.height&&(f=l+r.height-u.height>r.height/2?l-r.height-1:u.height-r.height),c+r.width>u.width&&(d=c+r.width-u.width>r.width/2?c-r.width-1:u.width-r.width),f<l&&d<c&&(f=l-r.height-1,d=c-r.width-1),f=Math.max(0,f),{left:d=Math.max(0,d),top:f}),m=p.left,g=p.top;n.menu.setPosition(m,g);var y=function(e){("click"!==e.type||3!==e.which&&2!==e.button)&&n.menu.dispose()};n.menu.on("dispose",function(){n.player.contextmenu.options.cancel=!0,n.player.removeChild(n.menu),j().off(document,["click","tap"],y),delete n.menu}),n.player.addChild(n.menu),j().on(document,["click","tap"],y)}}},v&&sO(y.prototype,v),b&&sO(y,b),Object.defineProperty(y,"prototype",{writable:!1}),y);function sk(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}var sD=function(e){return e&&su(Object.values(r4),function(t){return e.includes(t)})};function sN(e){return(sN="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function sL(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}function sx(e,t){return(sx=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function sj(e){return(sj=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var sM=0;let sF=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&sx(e,t)}(i,e);var t,r,n=(r=function(){if("undefined"==typeof Reflect||!Reflect.construct||Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}(),function(){var e,t=sj(i);if(r){var n=sj(this).constructor;e=Reflect.construct(t,arguments,n)}else e=t.apply(this,arguments);return function(e,t){if(t&&("object"===sN(t)||"function"==typeof t))return t;if(void 0!==t)throw TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,e)});function i(e){var t,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};!function(e,t){if(!(e instanceof t))throw TypeError("Cannot call a class as a function")}(this,i);var o=rQ(e),u=rX(e,r),l=u.publicId,c=u.options;o||(l=l.replace(em,"")),(c=K({},ep,c)).poster||(c.poster=K({publicId:l},ed));var f=Q(c,"poster","sourceTypes","sourceTransformation","info","recommendations","textTracks","withCredentials","interactionAreas"),d=f.poster,h=f.sourceTypes,p=f.sourceTransformation,m=f.info,g=f.recommendations,y=f.textTracks,v=f.withCredentials,b=f.interactionAreas;return(t=n.call(this,l,c))._sourceTypes=null,t._recommendations=null,t._textTracks=null,t._poster=null,t._info=null,t._sourceTransformation=null,t._interactionAreas=null,t._type=ih.VIDEO,t.isRawUrl=o,t._rawTransformation=c.raw_transformation,t.withCredentials=!!v,t.getInitOptions=function(){return r},t.poster(d),t.sourceTypes(h),t.sourceTransformation(p),t.info(m),t.interactionAreas(b),t.recommendations(g),t.textTracks(y),t.objectId=sM++,t}return t=[{key:"textTracks",value:function(e){return void 0===e?this._textTracks:(this._textTracks=e,this)}},{key:"recommendations",value:function(e){return void 0===e?this._recommendations:(this._recommendations=e,this)}},{key:"sourceTypes",value:function(e){return e?(this._sourceTypes=e,this):this._sourceTypes}},{key:"info",value:function(e){return e?(this._info=e,this):this._info}},{key:"interactionAreas",value:function(e){return e?(this._interactionAreas=e,this):this._interactionAreas}},{key:"sourceTransformation",value:function(e){return e?(this._sourceTransformation=e,this):this._sourceTransformation}},{key:"poster",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(!e)return this._poster;if(e instanceof oO)return this._poster=e,this;var r=rX(e,t,{tolerateMissingId:!0});return e=r.publicId,t=r.options,e||(e=this.publicId(),t=K({},t,ed)),t.cloudinaryConfig=t.cloudinaryConfig||this.cloudinaryConfig(),this._poster=new oO(e,t),this}},{key:"contains",value:function(e){return this.generateSources().some(function(t){var r,n;return r=t,n=e,"object"===rW(t)&&(r=t.src),"object"===rW(e)&&(n=e.src),/^\/\//.test(r)&&(n=n.slice(n.indexOf("//"))),/^\/\//.test(n)&&(r=r.slice(r.indexOf("//"))),r===n})}},{key:"generateSources",value:function(){var e=this;if(this.isRawUrl){var t=this.sourceTypes().length>1?null:this.sourceTypes()[0];return[this.generateRawSource(this.publicId(),t)]}var r=this.sourceTypes().map(function(t){var r=e.sourceTransformation()[t]||e.transformation(),n=((l=ev[u=(u=t).toLowerCase().split("/").shift()])||(l=u.split("/").shift()),l),i=-1!==["mpd","m3u8"].indexOf(n),o={};r&&(o.transformation=sa(r)),K(o,{resource_type:"video",format:n});var u,l,c,f,d,h,p,m,g,y,v,b=(d=(f=function(e){if(Array.isArray(e))return e}(c=t.toLowerCase().split("/"))||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,i,o,u,l=[],c=!0,f=!1;try{if(o=(r=r.call(e)).next,0===t){if(Object(r)!==r)return;c=!1}else for(;!(c=(n=o.call(r)).done)&&(l.push(n.value),l.length!==t);c=!0);}catch(e){f=!0,i=e}finally{try{if(!c&&null!=r.return&&(u=r.return(),Object(u)!==u))return}finally{if(f)throw i}}return l}}(c,2)||function(e,t){if(e){if("string"==typeof e)return sk(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?sk(e,t):void 0}}(c,2)||function(){throw TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}())[0],h=f[1],p=ey[d],m=null,p||(p=["video/".concat(d),m]),h&&(m=function(e){if(!e)return{};switch(e){case r4.VP9:return{video_codec:r4.VP9};case r4.HEV1:return{video_codec:r4.H265};case r4.H264:return{video_codec:"".concat(r4.H264,":baseline:3.0")};default:return{video_codec:r3(e)}}}(h),p=["".concat(p[0],'; codecs="').concat(r0(h),'"'),m]),function(e){if(Array.isArray(e))return e}(g=p)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,i,o,u,l=[],c=!0,f=!1;try{if(o=(r=r.call(e)).next,0===t){if(Object(r)!==r)return;c=!1}else for(;!(c=(n=o.call(r)).done)&&(l.push(n.value),l.length!==t);c=!0);}catch(e){f=!0,i=e}finally{try{if(!c&&null!=r.return&&(u=r.return(),Object(u)!==u))return}finally{if(f)throw i}}return l}}(g,2)||function(e,t){if(e){if("string"==typeof e)return sL(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?sL(e,t):void 0}}(g,2)||function(){throw TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),_=b[0],T=b[1];T&&(y=o.transformation,v=e._rawTransformation,!((y||v)&&(su(["video_codec","streaming_profile"],function(e){return nr(y,e)})||(eo(v)?sD(v):su(y,function(e){return su(e,function(e){return sD(ei(e)?e.video_codec:e)})})))))&&(o.transformation=rZ(o.transformation,T)),"auto"===o.format&&delete o.format;var E=e.queryParams()?og(e.queryParams()):"",S=e.config().url(e.publicId(),o),w=S.indexOf("?")>-1?E.replace("?","&"):E;return{type:_,src:S+w,cldSrc:e,isAdaptive:i,withCredentials:e.withCredentials}});return"undefined"!=typeof navigator&&(/MSIE/.test(navigator.userAgent)||/Trident\//.test(navigator.appVersion))?r.filter(function(e){return'video/mp4; codec="hev1.1.6.L93.B0"'!==e.type}):j().browser.IS_ANY_SAFARI?r.filter(function(e){return -1===e.type.indexOf("application/dash+xml")}):r}},{key:"generateRawSource",value:function(e,t){var r=t||e.split(".").pop(),n=!!ey[r];return{type:t=n?ey[r][0]:t?"video/".concat(t):null,src:e,cldSrc:this,isAdaptive:n,withCredentials:this.withCredentials}}},{key:"getInteractionAreas",value:function(){return this._interactionAreas}}],function(e,t){for(var r,n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,(r=function(e,t){if("object"!==sN(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,"string");if("object"!==sN(n))return n;throw TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(i.key),"symbol"===sN(r)?r:String(r)),i)}}(i.prototype,t),Object.defineProperty(i,"prototype",{writable:!1}),i}(oE);function sB(e){return(sB="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function sU(e,t){if(!(e instanceof t))throw TypeError("Cannot call a class as a function")}function sq(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,sQ(n.key),n)}}function sH(e,t,r){return t&&sq(e.prototype,t),r&&sq(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}function sV(){return(sV="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,r){var n=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=sW(e)););return e}(e,t);if(n){var i=Object.getOwnPropertyDescriptor(n,t);return i.get?i.get.call(arguments.length<3?e:r):i.value}}).apply(this,arguments)}function sG(e,t){if("function"!=typeof t&&null!==t)throw TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&sY(e,t)}function sY(e,t){return(sY=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function sz(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct||Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var r,n=sW(e);if(t){var i=sW(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return function(e,t){if(t&&("object"===sB(t)||"function"==typeof t))return t;if(void 0!==t)throw TypeError("Derived constructors may only return object or undefined");return sK(e)}(this,r)}}function sK(e){if(void 0===e)throw ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function sW(e){return(sW=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function sX(e,t,r){return(t=sQ(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function sQ(e){var t=function(e,t){if("object"!==sB(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,"string");if("object"!==sB(n))return n;throw TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"===sB(t)?t:String(t)}var s$=j().dom||j(),sJ=j().getComponent("Component"),sZ=function(e){sG(r,e);var t=sz(r);function r(e){var n;sU(this,r);for(var i=arguments.length,o=Array(i>1?i-1:0),u=1;u<i;u++)o[u-1]=arguments[u];return sX(sK(n=t.call.apply(t,[this,e].concat(o))),"_hide",function(){n.removeClass(r.VJS_UPCOMING_VIDEO_SHOW)}),sX(sK(n),"_onPlaylistItemChange",function(e,t){n._hide(),n._disableTransition(function(){t.next&&n.setItem(t.next)})}),sX(sK(n),"_show",function(){var e=n.player().ima,t="object"===e&&e.getAdsManager();t&&t.getCurrentAd()&&!t.getCurrentAd().isLinear()||n.addClass(r.VJS_UPCOMING_VIDEO_SHOW)}),n._setEvents(e),n}return sH(r,[{key:"_setEvents",value:function(e){e.on("upcomingvideoshow",this._show),e.on("upcomingvideohide",this._hide),e.on(it,this._onPlaylistItemChange)}},{key:"_disableTransition",value:function(e){this.addClass(r.DISABLE_TRANSITION_CLASS),e(),this.removeClass(r.DISABLE_TRANSITION_CLASS)}},{key:"setTitle",value:function(e){this.getChild("upcomingVideoOverlayContent").getChild("upcomingVideoOverlayBar").getChild("upcomingVideoOverlayTitle").setContent(e.info().title||e.publicId())}},{key:"setItem",value:function(e){this._source=e;var t=parseInt(window.getComputedStyle(this.el(),null).getPropertyValue("max-width"),10),r=this.getChild("upcomingVideoOverlayContent");this.setTitle(e),r.el().style.backgroundImage="url(".concat(this._source.poster().url({transformation:{crop:"pad",background:"auto:predominant",width:t,height:Math.round(t*(9/16))}}),")")}},{key:"handleClick",value:function(){sV(sW(r.prototype),"handleClick",this).call(this,event),this.player().cloudinary.playlist().playNext()}},{key:"createEl",value:function(){return sV(sW(r.prototype),"createEl",this).call(this,"div",{className:"vjs-upcoming-video"})}}]),r}(j().getComponent("ClickableComponent"));sX(sZ,"DISABLE_TRANSITION_CLASS","disable-transition"),sX(sZ,"VJS_UPCOMING_VIDEO_SHOW","vjs-upcoming-video-show");var s0=function(e){sG(r,e);var t=sz(r);function r(){return sU(this,r),t.apply(this,arguments)}return sH(r,[{key:"createEl",value:function(){return sV(sW(r.prototype),"createEl",this).call(this,"div",{className:"upcoming-video-overlay aspect-ratio-content"})}}]),r}(sJ),s1=function(e){sG(r,e);var t=sz(r);function r(){return sU(this,r),t.apply(this,arguments)}return sH(r,[{key:"setContent",value:function(e){this._contentSpan.innerText=e}},{key:"createEl",value:function(){var e=sV(sW(r.prototype),"createEl",this).call(this,"div",{className:"vjs-control vjs-upcoming-video-title"}),t=s$.createEl("div",{className:"vjs-upcoming-video-title-display",innerHTML:'<span class="vjs-control-text">Next up</span>Next up: '});return this._contentSpan=s$.createEl("span",{className:"vjs-upcoming-video-title-display-label"}),t.appendChild(this._contentSpan),e.appendChild(t),e}}]),r}(sJ),s2=function(e){sG(r,e);var t=sz(r);function r(){return sU(this,r),t.apply(this,arguments)}return sH(r,[{key:"createEl",value:function(){return sV(sW(r.prototype),"createEl",this).call(this,"div",{className:"vjs-upcoming-video-bar"})}}]),r}(sJ);function s3(e){return(s3="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function s4(e,t){return(s4=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function s6(e){return(s6=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}sZ.prototype.options_={children:["upcomingVideoOverlayContent"]},j().registerComponent("upcomingVideoOverlay",sZ),s0.prototype.options_={children:["upcomingVideoOverlayBar"]},j().registerComponent("upcomingVideoOverlayContent",s0),s2.prototype.options_={children:["upcomingVideoOverlayTitle","playlistNextButton"]},j().registerComponent("upcomingVideoOverlayBar",s2),j().registerComponent("upcomingVideoOverlayTitle",s1);let s8=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&s4(e,t)}(n,e);var t,r=(t=function(){if("undefined"==typeof Reflect||!Reflect.construct||Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}(),function(){var e,r=s6(n);if(t){var i=s6(this).constructor;e=Reflect.construct(r,arguments,i)}else e=r.apply(this,arguments);return function(e,t){if(t&&("object"===s3(t)||"function"==typeof t))return t;if(void 0!==t)throw TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,e)});function n(e,t){(function(e,t){if(!(e instanceof t))throw TypeError("Cannot call a class as a function")})(this,n),i=r.call(this,e,t);var i,o=t.type;if(!o&&"previous"!==o&&"next"!==o)throw Error("Type must be either 'previous' or 'next'");return i}return function(e,t){for(var r,n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,(r=function(e,t){if("object"!==s3(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,"string");if("object"!==s3(n))return n;throw TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(i.key),"symbol"===s3(r)?r:String(r)),i)}}(n.prototype,[{key:"createEl",value:function(){var e=this.options_.type;return j().dom.createEl("button",{className:"vjs-control vjs-playlist-button vjs-button ".concat("vjs-icon-play-".concat(e))})}}]),Object.defineProperty(n,"prototype",{writable:!1}),n}(j().getComponent("ClickableComponent"));function s5(e){return(s5="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function s9(){return(s9="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,r){var n=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=ue(e)););return e}(e,t);if(n){var i=Object.getOwnPropertyDescriptor(n,t);return i.get?i.get.call(arguments.length<3?e:r):i.value}}).apply(this,arguments)}function s7(e,t){return(s7=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function ue(e){return(ue=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var ut=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&s7(e,t)}(i,e);var t,r,n=(r=function(){if("undefined"==typeof Reflect||!Reflect.construct||Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}(),function(){var e,t=ue(i);if(r){var n=ue(this).constructor;e=Reflect.construct(t,arguments,n)}else e=t.apply(this,arguments);return function(e,t){if(t&&("object"===s5(t)||"function"==typeof t))return t;if(void 0!==t)throw TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,e)});function i(e){return function(e,t){if(!(e instanceof t))throw TypeError("Cannot call a class as a function")}(this,i),n.call(this,e,{type:"next"})}return t=[{key:"handleClick",value:function(e){e.stopPropagation(),s9(ue(i.prototype),"handleClick",this).call(this,e),this.player().cloudinary.playlist().playNext()}}],function(e,t){for(var r,n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,(r=function(e,t){if("object"!==s5(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,"string");if("object"!==s5(n))return n;throw TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(i.key),"symbol"===s5(r)?r:String(r)),i)}}(i.prototype,t),Object.defineProperty(i,"prototype",{writable:!1}),i}(s8);function ur(e){return(ur="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function un(){return(un="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,r){var n=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=uo(e)););return e}(e,t);if(n){var i=Object.getOwnPropertyDescriptor(n,t);return i.get?i.get.call(arguments.length<3?e:r):i.value}}).apply(this,arguments)}function ui(e,t){return(ui=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function uo(e){return(uo=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}j().registerComponent("PlaylistNextButton",ut);var ua=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&ui(e,t)}(i,e);var t,r,n=(r=function(){if("undefined"==typeof Reflect||!Reflect.construct||Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}(),function(){var e,t=uo(i);if(r){var n=uo(this).constructor;e=Reflect.construct(t,arguments,n)}else e=t.apply(this,arguments);return function(e,t){if(t&&("object"===ur(t)||"function"==typeof t))return t;if(void 0!==t)throw TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,e)});function i(e){return function(e,t){if(!(e instanceof t))throw TypeError("Cannot call a class as a function")}(this,i),n.call(this,e,{type:"previous"})}return t=[{key:"handleClick",value:function(e){un(uo(i.prototype),"handleClick",this).call(this,e),this.player().cloudinary.playlist().playPrevious()}}],function(e,t){for(var r,n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,(r=function(e,t){if("object"!==ur(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,"string");if("object"!==ur(n))return n;throw TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(i.key),"symbol"===ur(r)?r:String(r)),i)}}(i.prototype,t),Object.defineProperty(i,"prototype",{writable:!1}),i}(s8);j().registerComponent("PlaylistPreviousButton",ua);var us={fluid:!1,show:!0,direction:"vertical",total:4,selector:!1,renderTo:[]};function uu(e){return(uu="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}let ul=function(){var e;function t(e){var r=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},o=i.repeat,u=void 0!==o&&o,l=i.autoAdvance,c=void 0!==l&&l,f=i.presentUpcoming,d=void 0!==f&&f;(function(e,t){if(!(e instanceof t))throw TypeError("Cannot call a class as a function")})(this,t),this._context=e,this._sources=[],this._defaultRecResolverCache={},this._currentIndex=null,this._recommendationsHandler=null,this._autoAdvance=null,this._presentUpcoming=null,this.resetState=function(){r.repeat(u),r.autoAdvance(c),r.presentUpcoming(d)},n.forEach(function(e){return r.enqueue(e)}),this.resetState()}return e=[{key:"list",value:function(){return this._sources}},{key:"player",value:function(){return this._context.player}},{key:"presentUpcoming",value:function(e){if(this._presentUpcoming=this._presentUpcoming||{},void 0===e)return this._presentUpcoming.delay;if(!0===e)e=10;else if(!1===e)e=!1;else if(!es(e)||e<0)throw Error("presentUpcoming 'delay' must be either a boolean or a positive integer.");return this._presentUpcoming.delay=e,this._setupPresentUpcoming(),this._presentUpcoming.delay}},{key:"autoAdvance",value:function(e){if(this._autoAdvance=this._autoAdvance||{},void 0===e)return this._autoAdvance.delay;if(!0===e)e=0;else if(!1===e)e=!1;else if(!es(e)||e<0)throw Error("Auto advance 'delay' must be either a boolean or a positive integer.");return this._autoAdvance.delay=e,this._setupAutoAdvance(),this._autoAdvance.delay}},{key:"_setupAutoAdvance",value:function(){var e=this;this._resetAutoAdvance();var t=this._autoAdvance.delay;!1!==t&&(this._autoAdvance={delay:t,trigger:function(){e.player().ended()&&(e._autoAdvance.timeout=setTimeout(function(){e.playNext()},1e3*t))}},this._context.on("ended",this._autoAdvance.trigger))}},{key:"dispose",value:function(){this._resetAutoAdvance(),this._resetPresentUpcoming(),this._resetRecommendations()}},{key:"_resetPresentUpcoming",value:function(){this.player().trigger("upcomingvideohide"),this._presentUpcoming||(this._presentUpcoming={}),this._presentUpcoming.trigger&&this._context.off("timeupdate",this._presentUpcoming.trigger),this._presentUpcoming.trigger=null,this._presentUpcoming.showTriggered=!1}},{key:"_setupPresentUpcoming",value:function(){var e=this;this._resetPresentUpcoming(),!1!==this._presentUpcoming.delay&&(this._presentUpcoming.trigger=function(){var t=e.player().currentTime(),r=e.player().duration()-t;r<1.5?e._presentUpcoming.showTriggered&&(e.player().trigger("upcomingvideohide"),e._presentUpcoming.showTriggered=!1):!(r<=e._presentUpcoming.delay)||e._presentUpcoming.showTriggered||e.player().loop()?e._presentUpcoming.showTriggered&&(r>e._presentUpcoming.delay||e.player().loop())&&(e.player().trigger("upcomingvideohide"),e._presentUpcoming.showTriggered=!1):(e.player().trigger("upcomingvideoshow"),e._presentUpcoming.showTriggered=!0)},this._context.on("timeupdate",this._presentUpcoming.trigger))}},{key:"_resetAutoAdvance",value:function(){this._autoAdvance||(this._autoAdvance={}),this._autoAdvance.timeout&&clearTimeout(this._autoAdvance.timeout),this._autoAdvance.trigger&&this._context.off("ended",this._autoAdvance.trigger),this._autoAdvance.timeout=null,this._autoAdvance.trigger=null}},{key:"_resetRecommendations",value:function(){this._recommendationsHandler&&this._context.off("ended",this._recommendationsHandler)}},{key:"_refreshRecommendations",value:function(){var e=this;this._resetRecommendations(),this._recommendationsHandler=function(){!1===e.autoAdvance()&&e._context.autoShowRecommendations()&&e.player().trigger("recommendationsshow")},this._context.on("ended",this._recommendationsHandler)}},{key:"_refreshTextTracks",value:function(){this.player().trigger("refreshTextTracks",this.currentSource().textTracks())}},{key:"_recommendationItemBuilder",value:function(e){var t=this,r=this._defaultRecResolverCache[e.objectId];if(!e.recommendations()||r&&e.recommendations()===r)return function(e){return{source:e,action:function(){return t.playItem(e)}}}}},{key:"currentIndex",value:function(e){if(void 0===e)return this._currentIndex;if(e>=this.length()||e<0)throw Error("Invalid playlist index.");this._currentIndex=e;var t=this.currentSource(),r=this._recommendationItemBuilder(t);t.recommendations()||t.recommendations(this._defaultRecommendationsResolver(t)),this._context.source(t,{recommendationOptions:{disableAutoShow:!0,itemBuilder:r}});var n={playlist:this,current:t,next:this.next()};return this.player().trigger("playlistitemchanged",n),this._refreshRecommendations(),this._refreshTextTracks(),t}},{key:"_defaultRecommendationsResolver",value:function(e){var t=this;return this._defaultRecResolverCache[e.objectId]||(this._defaultRecResolverCache[e.objectId]=function(){for(var r=t.list().indexOf(e),n=[],i=Math.min(4,t.length()-1);n.length<i&&-1!==(r=t.nextIndex(r));){var o=t.list()[r];n.push(o)}return n},this._defaultRecResolverCache[e.objectId])}},{key:"buildSource",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return this._context.buildSource(e,t)}},{key:"enqueue",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=e instanceof sF?e:this.buildSource(e,t);return this._sources.push(r),r}},{key:"playItem",value:function(e){var t=this.list().indexOf(e);if(-1===t)throw Error("Invalid playlist item.");this.playAtIndex(t)}},{key:"playAtIndex",value:function(e){return this.currentIndex(e),this.player().play(),this.currentSource()}},{key:"currentSource",value:function(){return this.list()[this.currentIndex()]}},{key:"removeAt",value:function(e){if(e>=this.length()||e<0)throw Error("Invalid playlist index.");return this._sources.splice(e,1),this}},{key:"repeat",value:function(e){return void 0===e||(this._repeat=!!e),this._repeat}},{key:"first",value:function(){return this.list()[0]}},{key:"last",value:function(){return this.list()[this.length()-1]}},{key:"next",value:function(){var e=this.nextIndex();return -1===e?null:this.list()[e]}},{key:"nextIndex",value:function(e){if((e=void 0!==e?e:this.currentIndex())>=this.length()||e<0)throw Error("Invalid playlist index.");var t=e+1;if(e===this.length()-1){if(!this.repeat())return -1;t=0}return t}},{key:"previousIndex",value:function(){return this.isFirst()?-1:this.currentIndex()-1}},{key:"playFirst",value:function(){return this.playAtIndex(0)}},{key:"playLast",value:function(){var e=this.list().length-1;return this.playAtIndex(e)}},{key:"isLast",value:function(){return this.currentIndex()>=this.length()-1}},{key:"isFirst",value:function(){return 0===this.currentIndex()}},{key:"length",value:function(){return this.list().length}},{key:"playNext",value:function(){var e=this.nextIndex();return -1===e?null:this.playAtIndex(e)}},{key:"playPrevious",value:function(){var e=this.previousIndex();return -1===e?null:this.playAtIndex(e)}}],function(e,t){for(var r,n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,(r=function(e,t){if("object"!==uu(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,"string");if("object"!==uu(n))return n;throw TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(i.key),"symbol"===uu(r)?r:String(r)),i)}}(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t}();var uc=["created_at","updated_at"],uf=function e(t){var r={};return ei(t)?(Object.keys(t).reduce(function(r,n){var i=et(n);return -1!==uc.indexOf(n)?r[i]=new Date(function(e){var t=0,r=0,n=0;if(r=/^(\d{4}|[+\-]\d{6})(?:-(\d{2})(?:-(\d{2}))?)?(?:T(\d{2}):(\d{2})(?::(\d{2})(?:\.(\d{3}))?)?(?:(Z)|([+\-])(\d{2})(?::(\d{2}))?)?)?$/.exec(e)){for(var i,o=0;i=oh[o];++o)r[i]=+r[i]||0;r[2]=(+r[2]||1)-1,r[3]=+r[3]||1,"Z"!==r[8]&&void 0!==r[9]&&(n=60*r[10]+r[11],"+"===r[9]&&(n=0-n)),t=Date.UTC(r[1],r[2],r[3],r[4],r[5]+n,r[6],r[7])}else t=NaN;return t}(t[n])):r[i]=e(t[n]),r},r),r):Array.isArray(t)?t.map(function(t){return e(t)}):t};function ud(e){return(ud="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function uh(e,t){return(uh=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function up(e){if(void 0===e)throw ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function um(e){return(um=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var ug={format:"json",resource_type:"video",type:"list"};function uy(e){return(uy="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}let uv=function(){var e;function t(e){(function(e,t){if(!(e instanceof t))throw TypeError("Cannot call a class as a function")})(this,t),this._emitter=e,this._eventHandlers=[]}return e=[{key:"on",value:function(e,t){this._eventHandlers.push({type:e,handler:t}),this._emitter.on(e,t)}},{key:"one",value:function(e,t){var r=this;this._eventHandlers.push({type:e,handler:t,wrapper:function(){t.apply(void 0,arguments),r.off(e,t)}}),this._emitter.one(e,t)}},{key:"off",value:function(e,t){var r=r8(this._eventHandlers,function(r){return r.type===e&&r.handler===t});if(-1!==r){var n=this._eventHandlers[r];this._emitter.off(e,n.wrapper||n.handler),this._eventHandlers.splice(r,1)}}},{key:"removeAllListeners",value:function(){var e=this;this._eventHandlers.forEach(function(t){e.off(t)})}}],function(e,t){for(var r,n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,(r=function(e,t){if("object"!==uy(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,"string");if("object"!==uy(n))return n;throw TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(i.key),"symbol"===uy(r)?r:String(r)),i)}}(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t}();var ub={format:"jpg",resource_type:"video",transformation:{flags:"waveform"}},u_=RegExp("\\.(".concat("mp3|ogg|wav|mp4",")$$")),uT={resource_type:"video",type:"upload",transformation:[]};function uE(e){return(uE="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function uS(e,t){return(uS=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function uw(e){return(uw=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}let uA=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&uS(e,t)}(i,e);var t,r,n=(r=function(){if("undefined"==typeof Reflect||!Reflect.construct||Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}(),function(){var e,t=uw(i);if(r){var n=uw(this).constructor;e=Reflect.construct(t,arguments,n)}else e=t.apply(this,arguments);return function(e,t){if(t&&("object"===uE(t)||"function"==typeof t))return t;if(void 0!==t)throw TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,e)});function i(e){var t,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};!function(e,t){if(!(e instanceof t))throw TypeError("Cannot call a class as a function")}(this,i);var o=rX(e,r);e=o.publicId,r=o.options,e=e.replace(u_,"");var u=Q(r=K({},uT,r),"poster").poster;return(t=n.call(this,e,r))._poster=null,t._type=ih.AUDIO,t.poster(u),t}return t=[{key:"getPoster",value:function(){return this._poster}},{key:"poster",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(!e)return this._poster;if(e instanceof oO)return this._poster=e,this;var r=rX(e,t,{tolerateMissingId:!0});return e=r.publicId,t=r.options,e||(e=this.publicId(),t=K({},t,ub)),t.cloudinaryConfig=t.cloudinaryConfig||this.cloudinaryConfig(),this._poster=new oO(e,t),this}},{key:"generateSources",value:function(){var e=this;return this.sourceTypes().map(function(t){if("audio"===t){var r={},n=e.sourceTransformation()[t]||[e.transformation()];n&&(r.transformation=n),K(r,{resource_type:"video",format:"mp3"});var i=e.queryParams()?og(e.queryParams()):"";return{type:"video/mp4",src:"".concat(e.config().url(e.publicId(),r)).concat(i),cldSrc:e,poster:e.getPoster().url()}}return null},this)}}],function(e,t){for(var r,n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,(r=function(e,t){if("object"!==uE(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,"string");if("object"!==uE(n))return n;throw TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(i.key),"symbol"===uE(r)?r:String(r)),i)}}(i.prototype,t),Object.defineProperty(i,"prototype",{writable:!1}),i}(sF);function uC(e){return(uC="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function uI(e,t){return(uI=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function uO(e){if(void 0===e)throw ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function uR(e){return(uR=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var uP={transformation:{},sourceTypes:[],sourceTransformation:[],posterOptions:{}},uk=["cloudinaryConfig","transformation","sourceTypes","sourceTransformation","posterOptions","autoShowRecommendations"],uD=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&uI(e,t)}(n,e);var t,r=(t=function(){if("undefined"==typeof Reflect||!Reflect.construct||Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}(),function(){var e,r=uR(n);if(t){var i=uR(this).constructor;e=Reflect.construct(r,arguments,i)}else e=r.apply(this,arguments);return function(e,t){if(t&&("object"===uC(t)||"function"==typeof t))return t;if(void 0!==t)throw TypeError("Derived constructors may only return object or undefined");return uO(e)}(this,e)});function n(e){var t,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};(function(e,t){if(!(e instanceof t))throw TypeError("Cannot call a class as a function")})(this,n),(t=r.call(this,e,i)).player=e;var o=null,u=null,l=null,c=null,f=null,d=null,h=null,p=null,m=null,g=(i=K({},uP,i)).chainTarget,y=null,v=null,b=!1;t.source=function(e){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(r=K({},r),!e)return o;var n=null;if(e instanceof sF)n=e;else{var i=rX(e,r),u=i.publicId,l=i.options;n=t.buildSource(u,l)}if(n.recommendations()){var c=n.recommendations(),f=null,d=!1;if(r.recommendationOptions){var h=Q(r.recommendationOptions,"disableAutoShow","itemBuilder");d=h.disableAutoShow,f=h.itemBuilder}_(c,{disableAutoShow:d,itemBuilder:f})}else T();return o=n,r.skipRefresh||E(),t.player.trigger("cldsourcechanged",{source:n}),g},t.buildSource=function(e){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=rX(e,r);return e=n.publicId,(r=n.options).cloudinaryConfig=r$(t.cloudinaryConfig(),r.cloudinaryConfig||{}),r.transformation=rZ(t.transformation(),r.transformation||{}),r.sourceTransformation=r.sourceTransformation||t.sourceTransformation(),r.sourceTypes=r.sourceTypes||t.sourceTypes(),r.poster=r.poster||w(),r.queryParams=Object.assign(r.queryParams||{},r.usageReport?{_s:"vp-".concat("1.9.12")}:{}),r.sourceTypes.indexOf("audio")>-1?new uA(e,r):new sF(e,r)},t.posterOptions=function(e){return e?(f=e,g):f},t.disablePoster=function(e){t.player.poster(" "),t.player.posterImage.el().style.backgroundColor=e},t.cloudinaryConfig=function(e){return e?(d=e,g):d},t.transformation=function(e){return e?(h=e,g):h},t.sourceTypes=function(e){return e?(p=e,g):p},t.getCurrentSources=function(){return u},t.sourceTransformation=function(e){return e?(m=e,g):m},t.on=function(){var e;return(e=y).on.apply(e,arguments)},t.one=function(){var e;return(e=y).one.apply(e,arguments)},t.off=function(){var e;return(e=y).off.apply(e,arguments)},t.autoShowRecommendations=function(e){return void 0===e?b:(b=e,g)},t.dispose=function(){t.playlist()&&t.disposePlaylist(),T(),o=void 0,y.removeAllListeners()};var _=function(e,r){var n=r.disableAutoShow,i=void 0!==n&&n,o=r.itemBuilder,u=void 0===o?null:o;if(T(),!Array.isArray(e)&&"function"!=typeof e&&!e.then)throw Error('"recommendations" must be either an array or a function');u=u||function(e){return{source:e instanceof sF?e:t.buildSource(e),action:function(){return t.source(e)}}},(v={}).sourceChangedHandler=function(){var r=function(e){if(void 0!==e&&e.length>0){var r=e.map(function(e){return u(e)});t.player.trigger("recommendationschanged",{items:r})}else t.player.trigger("recommendationsnoshow");v.sources=e};ec(e)?r(e()):e.then?e.then(r):r(e)},t.one("cldsourcechanged",v.sourceChangedHandler),v.endedHandler=function(){!i&&t.autoShowRecommendations()&&t.player.trigger("recommendationsshow")},t.on("ended",v.endedHandler)},T=function(){v&&(t.off("cldsourcechanged",v.sourceChangedHandler),t.off("ended",v.endedHandler),delete v.endedHandler,delete v.sourceChangedHandler),v=null},E=function(){var e=t.source(),r=t.player.cloudinary.posterOptions().posterColor;r?t.disablePoster(r):e.poster()&&t.player.poster(e.poster().url()),u=e.generateSources().reduce(function(e,t){if(t.isAdaptive){if(t.type.split("; ")[1]&&"MediaSource"in window){var r=t.type.split("; "),n=S("video/mp4; ".concat(r[1]||""));j().browser.IS_ANY_SAFARI&&(t.type="".concat(r[0],"; ").concat(r0("h264"))),n&&e.push(t)}else e.push(t)}else e.push(t);return e},[]),t.player.src(u),l=e,c=t.playlist()},S=function(e){return document.createElement("video").canPlayType(e)||"MediaSource"in window&&MediaSource.isTypeSupported(e)},w=function(){var e=K({},t.posterOptions());e.transformation&&(e.transformation.width||e.transformation.height)&&!e.transformation.crop&&(e.transformation.crop="scale"),e.transformation=e.transformation||{};var r=t.player.el();if(r&&r.clientWidth&&r.clientHeight&&!nr(e.transformation,"width")&&!nr(e.transformation,"height")){var n=function(e){return 100*Math.ceil(e/100)};e.transformation=rZ(e.transformation,{width:n(r.clientWidth),height:n(r.clientHeight),crop:"limit"})}return e};y=new uv(t.player);var A=Q.apply(void 0,[i].concat(uk));return ni(uO(t),A),t.on("sourcechanged",function(e,r){var n=r.to;l&&l.contains(n)?t.source()||(c&&t.playlist(c),t.source(l,{skipRefresh:!0})):(t.player.trigger("cldsourcechanged",{}),t.dispose())}),t}return function(e,t){for(var r,n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,(r=function(e,t){if("object"!==uC(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,"string");if("object"!==uC(n))return n;throw TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(i.key),"symbol"===uC(r)?r:String(r)),i)}}(n.prototype,[{key:"currentSourceType",value:function(){return this.source().getType()}},{key:"currentPublicId",value:function(){return this.source()&&this.source().publicId()}},{key:"currentPoster",value:function(){return this.source()&&this.source().poster()}}]),Object.defineProperty(n,"prototype",{writable:!1}),n}(nu(function(e){return function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&uh(e,t)}(i,e);var t,r,n=(r=function(){if("undefined"==typeof Reflect||!Reflect.construct||Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}(),function(){var e,t=um(i);if(r){var n=um(this).constructor;e=Reflect.construct(t,arguments,n)}else e=t.apply(this,arguments);return function(e,t){if(t&&("object"===ud(t)||"function"==typeof t))return t;if(void 0!==t)throw TypeError("Derived constructors may only return object or undefined");return up(e)}(this,e)});function i(e){var t,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};(function(e,t){if(!(e instanceof t))throw TypeError("Cannot call a class as a function")})(this,i),t=n.call(this);var o=X(r,"chainTarget").chainTarget,u=null,l=null;t.playlist=function(r){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return void 0===r?u:(t.playlist()&&t.disposePlaylist(),c(r,n),e.trigger("playlistcreated"),o)},t.disposePlaylist=function(){e.removeClass("vjs-playlist");var r=t.playlist();u=void 0,r.dispose(),t.off("cldsourcechanged",l)};var c=function(r,n){r instanceof ul?((u=r).resetState(),u.currentIndex(u.currentIndex())):(u=new ul(up(t),r,n)).currentIndex(0),l=f(),e.addClass("vjs-playlist")},f=function(){var e=function(){t.playlist()&&!t.playlist().currentSource().contains(t.player.currentSource())&&t.disposePlaylist()};return t.on("cldsourcechanged",e),e};return t}return t=[{key:"playlistByTag",value:function(e){var t=this,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return this.sourcesByTag(e,r).then(function(e){return t.playlist(e,r)})}},{key:"sourcesByTag",value:function(e){var t=this,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=rJ(e,r$(this.cloudinaryConfig(),ug));return fetch(n).then(function(e){return e.json()}).then(function(e){var n=uf(e.resources);return r.sorter&&n.sort(r.sorter),n.map(function(e){var n=r.sourceParams||{};"function"==typeof n&&(n=n(e));var i=K({info:e.context&&e.context.custom||{}},n,{publicId:e.publicId});return t.buildSource(i)})})}}],function(e,t){for(var r,n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,(r=function(e,t){if("object"!==ud(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,"string");if("object"!==ud(n))return n;throw TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(i.key),"symbol"===ud(r)?r:String(r)),i)}}(i.prototype,t),Object.defineProperty(i,"prototype",{writable:!1}),i}(e)})),uN=p(343);function uL(e){return(uL="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function ux(e,t){return(ux=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function uj(e){if(void 0===e)throw ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function uM(e){return(uM=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var uF={percentsplayed:{percents:[25,50,75,100]}},uB={events:[il,n6,n2,n3,n4,id]},uU=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&ux(e,t)}(n,e);var t,r=(t=function(){if("undefined"==typeof Reflect||!Reflect.construct||Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}(),function(){var e,r=uM(n);if(t){var i=uM(this).constructor;e=Reflect.construct(r,arguments,i)}else e=r.apply(this,arguments);return function(e,t){if(t&&("object"===uL(t)||"function"==typeof t))return t;if(void 0!==t)throw TypeError("Derived constructors may only return object or undefined");return uj(e)}(this,e)});function n(e){var t,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};(function(e,t){if(!(e instanceof t))throw TypeError("Cannot call a class as a function")})(this,n),(t=r.call(this)).player=e;var o=j().mergeOptions(uB,i),u={lastState:void 0},l=0,c=0,f=!1,d=[],h=[],p=null,m=!1,g=function(){d=[],h=[]};return t.events=uq(o.events,uF),u={lastState:void 0},l=c=0,f=!1,g(),t.player.on(n0,(function(){m&&(t.player.trigger("replay"),m=!1)}).bind(uj(t))),t.player.on(io,(function(){m=!0}).bind(uj(t))),(t.events.percentsplayed||t.events.timeplayed||t.events.seek||t.events.totaltimeplayed)&&t.player.on(n5,(function(e){var r=t.player.currentTime(),n=t.player.duration(),i=function(r,n){n.originalType="timeupdate",t.emit(r,e,n)};if(t.events.percentsplayed&&t.events.percentsplayed.percents.forEach(function(e){uH(r,n,e)&&-1===d.indexOf(e)&&(d.push(e),i(il,{percent:e}))}),t.events.timeplayed){var o=t.events.timeplayed;(o.interval?[Math.floor(r/o.interval)*o.interval]:o.times).forEach(function(e){uV(r,e)&&-1===h.indexOf(e)&&(h.push(e),i(ic,{time:e}))})}t.events.seek&&Math.abs((l=c)-(c=r))>1&&(f=!0,g(),i(n2,{seekStart:l,seekEnd:c}))}).bind(uj(t))),(t.events.mute||t.events.unmute)&&t.player.on(ir,(function(e){t.player.muted()&&"muted"!==u.lastState?(u.lastState="muted",t.emit(n3,e)):t.player.muted()||"unmuted"===u.lastState||(u.lastState="unmuted",t.emit(n4,e))}).bind(uj(t))),t.events.pausenoseek&&(t.player.on(n1,(function(e){Math.round(t.player.currentTime())===Math.round(t.player.duration())||f||t.emit(n6,e)}).bind(uj(t))),t.player.on(n0,(function(){f=!1}).bind(uj(t)))),t.player.on(n7,(function(){t.player.currentSource().src!==p&&(g(),p=t.player.currentSource().src)}).bind(uj(t))),t.player.on(ie,(function(e){for(var r=uj(t),n=t.player.textTracks(),i=null,o=0;o<n.length;o++)"segment-metadata"===n[o].label&&(i=n[o]);var u=null;i&&i.on("cuechange",function(){var t=i.activeCues[0];if(t){var n=t.value.resolution;if(u!==n){var o={from:u,to:n};r.emit(id,e,o)}u=n}})}).bind(uj(t))),t}return Object.defineProperty(n,"prototype",{writable:!1}),n}(p.n(uN)()),uq=function(e,t){var r=e;return"Array"===e.constructor.name&&(r=e.reduce(function(e,r){var n=t[r]||{};return ei(r)?e[r.type]=K({},n,r):e[r]=n,e},{})),r},uH=function(e,t,r){var n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:.5;return uV(e,t*r/100,n)},uV=function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:.5;return e<=t+r&&e>=t-r};function uG(e){return(uG="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var uY={percentsplayed:{percents:[25,50,75,100]}},uz={events:[n0,n1,io,ir,ia,n8,iu,"start","videoload",il,n2,"playerload"],category:"Video",defaultLabel:function(e){return e.cloudinary&&e.cloudinary.currentPublicId()||e.currentSource().src}},uK=function(){var e;function t(e){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};(function(e,t){if(!(e instanceof t))throw TypeError("Cannot call a class as a function")})(this,t),this.player=e,this.options=j().mergeOptions(uz,r),this.events=uq(this.options.events,uY);var n=X(this.events,il,ic,n1,n2);n.pause&&(delete n.pause,n.pausenoseek={}),this._extendedEvents=new uU(e,{events:n}),this._currentSource=null,this._startTracked=null,this._endTracked=null,this.resetState()}return e=[{key:"init",value:function(){var e=this;this.events.shoppable&&(this.player.on("productHover",(function(t,r){e.track({action:"productHover",label:r.productName})}).bind(this)),this.player.on("productClick",(function(t,r){e.track({action:"productClick",label:r.productName})}).bind(this)),this.player.on("productHoverPost",(function(t,r){e.track({action:"productHoverPostPlay",label:r.productName})}).bind(this)),this.player.on("productClickPost",(function(t,r){e.track({action:"productClickPostPlay",label:r.productName})}).bind(this)),this.player.on("productBarMin",(function(){e.track({action:"shoppableBar",label:"closed"})}).bind(this)),this.player.on("productBarMax",(function(){e.track({action:"shoppableBar",label:"opened"})}).bind(this)),this.player.on("replay",(function(){e.track({action:"replay"})}).bind(this))),this.events.play&&this.player.on(n0,(function(){e.track({action:"Play"})}).bind(this)),this.events.ended&&this.player.on(io,(function(){e._endTracked||(e.track({action:"Ended",nonInteraction:!0}),e._endTracked=!0)}).bind(this)),this.events.volumechange&&this.player.on(ir,(function(){var t=e.player.muted()?0:e.player.volume();e.track({action:"Volume Change",value:t})}).bind(this)),this.events.resize&&this.player.on(ia,(function(){var t="Resize - ".concat(e.player.width(),"x").concat(e.player.height(),"}");e.track({action:t})}).bind(this)),this.events.error&&this.player.on(n8,(function(){e.track({action:"Error",nonInteraction:!0})}).bind(this)),this.events.start&&this.player.on("playing",(function(){e._startTracked&&(e.track({action:"Start"}),e._startTracked=!0)}).bind(this)),this.events.fullscreenchange&&this.player.on(iu,(function(){var t=e.player.isFullscreen()?"Enter Fullscreen":"Exit Fullscreen";e.track({action:t})}).bind(this)),this.events.percentsplayed&&this._extendedEvents.on(il,(function(t,r){var n=r.percent;e.track({action:"".concat(n," Percents Played"),nonInteraction:!0})}).bind(this)),this.events.timeplayed&&this._extendedEvents.on(ic,(function(t,r){var n=r.time;e.track({action:"".concat(n," Seconds Played"),value:n,nonInteraction:!0})}).bind(this)),this.events.pause&&this._extendedEvents.on(n6,(function(){e.track({action:"Pause"})}).bind(this)),this.events.seek&&this._extendedEvents.on(n2,(function(t,r){var n=r.seekStart,i=r.seekEnd;e.track({action:"Seek Start",value:n}),e.track({action:"Seek End",value:i})}).bind(this)),this.events.playerload&&e.track({action:"Player Load",label:window.location.href,nonInteraction:!0}),this.player.on(n7,this.loadedmetadata.bind(this))}},{key:"track",value:function(e){var t=e.action,r=e.label,n=e.value,i=e.nonInteraction,o={eventCategory:this.options.category,eventAction:t,eventLabel:r||this.options.defaultLabel(this.player),eventValue:(void 0===n?null:n)||Math.round(this.player.currentTime()),nonInteraction:void 0!==i&&i};window.ga("send","event",o)}},{key:"videoload",value:function(){this.track({action:"Video Load",nonInteraction:!0})}},{key:"resetState",value:function(){this._currentSource="",this._startTracked=!1,this._endTracked=!1}},{key:"loadedmetadata",value:function(){var e=this.player.currentSource().src;e!==this._currentSource&&(this.resetState(),this._currentSource=e,this.events.videoload&&this.videoload())}}],function(e,t){for(var r,n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,(r=function(e,t){if("object"!==uG(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,"string");if("object"!==uG(n))return n;throw TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(i.key),"symbol"===uG(r)?r:String(r)),i)}}(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t}();let uW={randomUUID:"undefined"!=typeof crypto&&crypto.randomUUID&&crypto.randomUUID.bind(crypto)},uX=new Uint8Array(16),uQ=[];for(let e=0;e<256;++e)uQ.push((e+256).toString(16).slice(1));let u$=function(e,t,n){if(uW.randomUUID&&!t&&!e)return uW.randomUUID();let i=(e=e||{}).random||(e.rng||function(){if(!r&&!(r="undefined"!=typeof crypto&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto)))throw Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return r(uX)})();if(i[6]=15&i[6]|64,i[8]=63&i[8]|128,t){n=n||0;for(let e=0;e<16;++e)t[n+e]=i[e];return t}return function(e,t=0){return(uQ[e[t+0]]+uQ[e[t+1]]+uQ[e[t+2]]+uQ[e[t+3]]+"-"+uQ[e[t+4]]+uQ[e[t+5]]+"-"+uQ[e[t+6]]+uQ[e[t+7]]+"-"+uQ[e[t+8]]+uQ[e[t+9]]+"-"+uQ[e[t+10]]+uQ[e[t+11]]+uQ[e[t+12]]+uQ[e[t+13]]+uQ[e[t+14]]+uQ[e[t+15]]).toLowerCase()}(i)};var uJ="play",uZ="pause";function u0(e){return(u0="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function u1(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function u2(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?u1(Object(r),!0).forEach(function(t){(function(e,t,r){var n;(n=function(e,t){if("object"!==u0(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,"string");if("object"!==u0(n))return n;throw TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(t),(t="symbol"===u0(n)?n:String(n))in e)?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r})(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):u1(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}function u3(e,t){if(e){if("string"==typeof e)return u4(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?u4(e,t):void 0}}function u4(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}var u6="cld-analytics-user-id",u8=function(){var e=window.localStorage.getItem(u6);if(e)return e;var t=u$();return window.localStorage.setItem(u6,t),t},u5=function(e,t){var r=[];window.addEventListener("beforeunload",function(){e.currentTime;var n,i,o,u,l=e.duration,c=Math.round(((n=function(e){if(Array.isArray(e))return u4(e)}(r)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(r)||u3(r)||function(){throw TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()).findLastIndex(function(e){return e.type===uJ})>n.findLastIndex(function(e){return e.type===uZ})&&n.push({type:uZ,time:Date.now()}),n).reduce(function(e,t){var r=e.watchedFrames[e.watchedFrames.length-1];return t.type===uJ?e.watchedFrames.push([t.time]):r&&1===r.length&&t.type===uZ&&r.push(t.time),e},{watchedFrames:[]}).watchedFrames.reduce(function(e,t){var r=function(e){if(Array.isArray(e))return e}(t)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,i,o,u,l=[],c=!0,f=!1;try{if(o=(r=r.call(e)).next,0===t){if(Object(r)!==r)return;c=!1}else for(;!(c=(n=o.call(r)).done)&&(l.push(n.value),l.length!==t);c=!0);}catch(e){f=!0,i=e}finally{try{if(!c&&null!=r.return&&(u=r.return(),Object(u)!==u))return}finally{if(f)throw i}}return l}}(t,2)||u3(t,2)||function(){throw TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}(),n=r[0];return e+(r[1]-n)/1e3},0)),f="function"==typeof t?t():t;[void 0,"undefined",null,""].includes(f.cloudName)||(i="https://video-analytics-api.cloudinary.com/video-analytics",u=Object.keys(o=u2(u2({},f),{},{userId:u8(),videoDuration:l,playedTimeSeconds:c})).reduce(function(e,t){return e.append(t,o[t]),e},new FormData),"function"!=typeof window.navigator.sendBeacon?fetch(i,{method:"POST",mode:"no-cors",body:u,keepalive:!0}):window.navigator.sendBeacon(i,u))}),e.addEventListener("play",function(){r.push({type:uJ,time:Date.now()})}),e.addEventListener("pause",function(){r.push({type:uZ,time:Date.now()})}),e.addEventListener("emptied",function(){r.push({type:uZ,time:Date.now()})})};function u9(e){return(u9="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function u7(e){var t=function(e,t){if("object"!==u9(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,"string");if("object"!==u9(n))return n;throw TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"===u9(t)?t:String(t)}var le=function(){function e(t){var r,n,i=this;(function(e,t){if(!(e instanceof t))throw TypeError("Cannot call a class as a function")})(this,e),n=function(){return{cloudName:i.player.cloudinary.cloudinaryConfig().cloud_name,videoPublicId:i.player.cloudinary.currentPublicId()}},(r=u7(r="getMetadata"))in this?Object.defineProperty(this,r,{value:n,enumerable:!0,configurable:!0,writable:!0}):this[r]=n,this.player=t}return function(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,u7(n.key),n)}}(e.prototype,[{key:"init",value:function(){u5(this.player.videoElement,this.getMetadata)}}]),Object.defineProperty(e,"prototype",{writable:!1}),e}(),lt={},lr={},ln=function(){function e(e,t){return this.player=e,this.options=t,this.listenForDurationChange(),this.initializeThumbnails(),this.registeredEvents={},this}return e.prototype.src=function(e){this.resetPlugin(),this.options.src=e,this.initializeThumbnails()},e.prototype.detach=function(){this.resetPlugin()},e.prototype.resetPlugin=function(){this.thumbnailHolder&&this.thumbnailHolder.parentNode.removeChild(this.thumbnailHolder),this.progressBar&&(this.progressBar.removeEventListener("mouseenter",this.registeredEvents.progressBarMouseEnter),this.progressBar.removeEventListener("mouseleave",this.registeredEvents.progressBarMouseLeave),this.progressBar.removeEventListener("mousemove",this.registeredEvents.progressBarMouseMove)),delete this.registeredEvents.progressBarMouseEnter,delete this.registeredEvents.progressBarMouseLeave,delete this.registeredEvents.progressBarMouseMove,delete this.progressBar,delete this.vttData,delete this.thumbnailHolder,delete this.lastStyle},e.prototype.listenForDurationChange=function(){this.player.on("durationchange",function(){})},e.prototype.initializeThumbnails=function(){var e=this;if(this.options.src){var t=this.getBaseUrl(),r=this.getFullyQualifiedUrl(this.options.src,t);this.getVttFile(r).then(function(t){e.vttData=e.processVtt(t),e.setupThumbnailElement()})}},e.prototype.getBaseUrl=function(){return[window.location.protocol,"//",window.location.hostname,window.location.port?":"+window.location.port:"",window.location.pathname].join("").split(/([^\/]*)$/gi).shift()},e.prototype.getVttFile=function(e){var t=this;return new Promise(function(r){var n=new XMLHttpRequest;n.data={resolve:r},n.addEventListener("load",t.vttFileLoaded),n.open("GET",e),n.send()})},e.prototype.vttFileLoaded=function(){this.data.resolve(this.responseText)},e.prototype.setupThumbnailElement=function(){var e=this,t=this.player.$(".vjs-mouse-display");this.progressBar=this.player.$(".vjs-progress-control");var r=document.createElement("div");r.setAttribute("class","vjs-vtt-thumbnail-display"),this.progressBar.appendChild(r),this.thumbnailHolder=r;var n=document.createElement("div");n.setAttribute("class","vjs-vtt-time-display"),this.thumbnailHolder.appendChild(n),this.timeHolder=n,t&&t.classList.add("vjs-hidden"),this.registeredEvents.progressBarMouseEnter=function(){return e.onBarMouseenter()},this.registeredEvents.progressBarMouseLeave=function(){return e.onBarMouseleave()},this.progressBar.addEventListener("mouseenter",this.registeredEvents.progressBarMouseEnter),this.progressBar.addEventListener("mouseleave",this.registeredEvents.progressBarMouseLeave)},e.prototype.onBarMouseenter=function(){var e=this;this.progressBar.offsetWidth<400||(this.mouseMoveCallback=function(t){e.onBarMousemove(t)},this.registeredEvents.progressBarMouseMove=this.mouseMoveCallback,this.progressBar.addEventListener("mousemove",this.registeredEvents.progressBarMouseMove),this.showThumbnailHolder())},e.prototype.onBarMouseleave=function(){this.registeredEvents.progressBarMouseMove&&this.progressBar.removeEventListener("mousemove",this.registeredEvents.progressBarMouseMove),this.hideThumbnailHolder()},e.prototype.getXCoord=function(e,t){var r=e.getBoundingClientRect(),n=document.documentElement;return t-(r.left+(window.pageXOffset||n.scrollLeft||0))},e.prototype.onBarMousemove=function(e){this.updateThumbnailStyle(j().dom.getPointerPosition(this.progressBar,e).x,this.progressBar.offsetWidth)},e.prototype.getStyleForTime=function(e){for(var t=0;t<this.vttData.length;++t){var r=this.vttData[t];if(e>=r.start&&e<r.end){if(r.css.url&&!lr[r.css.url]){var n=new Image;n.src=r.css.url,lr[r.css.url]=n}return r.css}}},e.prototype.showThumbnailHolder=function(){this.thumbnailHolder.style.opacity="1"},e.prototype.hideThumbnailHolder=function(){this.thumbnailHolder.style.opacity="0"},e.prototype.updateThumbnailStyle=function(e,t){var r=e*this.player.duration(),n=this.getStyleForTime(r);if(!n)return this.hideThumbnailHolder();var i=e*t,o=parseInt(n.width,10),u=o/2,l=t-(i+u),c=i-u;if(c>0&&l>0?this.thumbnailHolder.style.transform="translateX("+(i-u)+"px)":c<=0?this.thumbnailHolder.style.transform="translateX(0px)":l<=0&&(this.thumbnailHolder.style.transform="translateX("+(t-o)+"px)"),this.timeHolder.innerHTML=this.getTimestampFromSeconds(r),!this.lastStyle||this.lastStyle!==n)for(var f in this.lastStyle=n,n)Object.prototype.hasOwnProperty.call(n,f)&&(this.thumbnailHolder.style[f]=n[f])},e.prototype.processVtt=function(e){var t=this,r=[];return e.split(/[\r\n][\r\n]/i).forEach(function(e){if(e.match(/([0-9]{2}:)?([0-9]{2}:)?[0-9]{2}(.[0-9]{3})?( ?--> ?)([0-9]{2}:)?([0-9]{2}:)?[0-9]{2}(.[0-9]{3})?[\r\n]{1}.*/gi)){var n=e.split(/[\r\n]/i),i=n[0].split(/ ?--> ?/i),o=i[0],u=i[1],l=n[1].split("/").pop(),c=t.getVttCss(l);r.push({start:t.getSecondsFromTimestamp(o),end:t.getSecondsFromTimestamp(u),css:c})}}),r},e.prototype.getFullyQualifiedUrl=function(e,t){return e.indexOf("//")>=0?e:0===t.indexOf("//")?[t.replace(/\/$/gi,""),this.trim(e,"/")].join("/"):t.indexOf("//")>0?[this.trim(t,"/"),this.trim(e,"/")].join("/"):e},e.prototype.getPropsFromDef=function(e){var t=e.split(/#xywh=/i),r=t[0],n=t[1].match(/[0-9]+/gi);return{x:n[0],y:n[1],w:n[2],h:n[3],image:r}},e.prototype.getVttCss=function(e){var t,r={};if(t=this.options.src.indexOf("//")>=0?this.options.src.split(/([^\/]*)$/gi).shift():this.getBaseUrl()+this.options.src.split(/([^\/]*)$/gi).shift(),!(e=this.getFullyQualifiedUrl(e,t)).match(/#xywh=/i))return r.background='url("'+e+'")',r;var n=this.getPropsFromDef(e);return r.background='url("'+n.image+'") no-repeat -'+n.x+"px -"+n.y+"px",r.width=n.w+"px",r.height=n.h+"px",r.url=n.image,r},e.prototype.doconstructTimestamp=function(e){var t=e.split("."),r=t[0].split(":");return{milliseconds:parseInt(t[1],10)||0,seconds:parseInt(r.pop(),10)||0,minutes:parseInt(r.pop(),10)||0,hours:parseInt(r.pop(),10)||0}},e.prototype.getSecondsFromTimestamp=function(e){var t=this.doconstructTimestamp(e);return parseInt(3600*t.hours+60*t.minutes+t.seconds+t.milliseconds/1e3,10)},e.prototype.getTimestampFromSeconds=function(e){var t=Math.floor(e/60),r=Math.floor(e%60);return r<10&&(r="0"+r),t+":"+r},e.prototype.trim=function(e,t){var r=" \n\r	\f\v\xa0           ​\u2028\u2029　",n=0,i=0;for(e+="",t&&(r=(t+"").replace(/([[\]().?/*{}+$^:])/g,"$1")),n=e.length,i=0;i<n;i++)if(-1===r.indexOf(e.charAt(i))){e=e.substring(i);break}for(i=(n=e.length)-1;i>=0;i--)if(-1===r.indexOf(e.charAt(i))){e=e.substring(0,i+1);break}return -1===r.indexOf(e.charAt(0))?e:""},e}();let li={autoplayOnScroll:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};new aZ(this,e).init()},floatingPlayer:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};new a3(this,e).init()},colors:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};new a9(this,e).init()},contextMenu:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};new sP(this,e).init()},cloudinary:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};e.chainTarget=e.chainTarget||this,this.cloudinary=new uD(this,e)},analytics:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};new uK(this,e).init()},cloudinaryAnalytics:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};new le(this,e).init()},vttThumbnails:function(e){var t=this;this.ready(function(){var r;r=j().mergeOptions(lt,e),t.addClass("vjs-vtt-thumbnails"),t.vttThumbnails=new ln(t,r)})},interactive:function(e,t){t.shoppable&&new ax(e,t.shoppable).init()},dashPlugin:function(){return an.apply(this,arguments)},imaPlugin:function(e,t){var r=ec(e.ads),n="object"===("undefined"==typeof google?"undefined":ai(google))&&"object"===ai(google.ima);if(t.ads&&(!r||!n))return r||console.log("contribAds is not loaded"),n||console.log("imaSdk is not loaded"),!1;e.ima({id:e.el().id,adTagUrl:t.ads.adTagUrl,disableFlashAds:!0,prerollTimeout:t.ads.prerollTimeout||5e3,postrollTimeout:t.ads.postrollTimeout||5e3,showCountdown:!1!==t.ads.showCountdown,adLabel:t.ads.adLabel||"Advertisement",locale:t.ads.locale||"en",autoPlayAdBreaks:!1!==t.ads.autoPlayAdBreaks,debug:!0}),Object.keys(t.ads).length>0&&"object"===ai(e.ima)&&("first-video"===t.ads.adsInPlaylist?e.one(n9,function(){e.ima.playAd()}):e.on(n9,function(){e.ima.playAd()}))}};function lo(e){return(lo="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function la(e,t){return(la=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function ls(e){if(void 0===e)throw ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function lu(e){return(lu=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function ll(e){return(ll="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function lc(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function lf(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?lc(Object(r),!0).forEach(function(t){var n,i;n=t,i=r[t],(n=ld(n))in e?Object.defineProperty(e,n,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[n]=i}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):lc(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}function ld(e){var t=function(e,t){if("object"!==ll(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,"string");if("object"!==ll(n))return n;throw TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"===ll(t)?t:String(t)}function lh(e,t){return(lh=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function lp(e){if(void 0===e)throw ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function lm(){return(lm="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,r){var n=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=lg(e)););return e}(e,t);if(n){var i=Object.getOwnPropertyDescriptor(n,t);return i.get?i.get.call(arguments.length<3?e:r):i.value}}).apply(this,arguments)}function lg(e){return(lg=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var ly=j().dom||j(),lv=j().getComponent("Component"),lb={wrap:!1},l_=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&lh(e,t)}(i,e);var t,r,n=(r=function(){if("undefined"==typeof Reflect||!Reflect.construct||Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}(),function(){var e,t=lg(i);if(r){var n=lg(this).constructor;e=Reflect.construct(t,arguments,n)}else e=t.apply(this,arguments);return function(e,t){if(t&&("object"===ll(t)||"function"==typeof t))return t;if(void 0!==t)throw TypeError("Derived constructors may only return object or undefined");return lp(e)}(this,e)});function i(e,t){!function(e,t){if(!(e instanceof t))throw TypeError("Cannot call a class as a function")}(this,i);var r=lf(lf({},lb),t);(u=n.call(this,e,r)).player_=e,u.setCls();var o,u,l,c=function(e,t){u.options_.fluid=t,u.removeCls(),u.setCls()};return r.wrap&&(l=u.el(),u.videoWrap_=ly.createEl("div",{className:"cld-plw-col-player"}),u.contentEl_=u.contentEl_=ly.createEl("div",{className:"cld-plw-col-list"}),sf(u.player().el(),l),l.appendChild(u.videoWrap_),l.appendChild(u.contentEl_),sf(u.player().el(),u.videoWrap_)),e.on(ii,c),u.addChild("PlaylistPanel",u.options_),u.dispose=function(){u.removeLayout(),lm((o=lp(u),lg(i.prototype)),"dispose",o).call(o),e.off(ii,c)},u}return t=[{key:"getCls",value:function(){var e=["cld-video-player","cld-plw-layout"];return e.push(nA(this.player())),e.push(nS(this.player())),this.options_.fluid&&e.push("cld-plw-layout-fluid"),e}},{key:"setCls",value:function(){var e=this;this.removeClass(nA(this)),this.getCls().forEach(function(t){e.addClass(t)})}},{key:"removeCls",value:function(){var e=this;this.getCls().forEach(function(t){e.removeClass(t)})}},{key:"update",value:function(e,t){this.options(t),this.removeChild("PlaylistPanel"),this.addChild("PlaylistPanel",this.options_),this.trigger("playlistlayoutupdate")}},{key:"removeLayout",value:function(){var e=this.el().parentElement;e&&e.appendChild(this.player().el())}},{key:"createEl",value:function(){var e=lm(lg(i.prototype),"createEl",this).call(this,"div");return e.style.fontFamily=this.player().el().style.fontFamily,e}}],function(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,ld(n.key),n)}}(i.prototype,t),Object.defineProperty(i,"prototype",{writable:!1}),i}(lv);function lT(e){return(lT="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function lE(){return(lE="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,r){var n=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=lw(e)););return e}(e,t);if(n){var i=Object.getOwnPropertyDescriptor(n,t);return i.get?i.get.call(arguments.length<3?e:r):i.value}}).apply(this,arguments)}function lS(e,t){return(lS=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function lw(e){return(lw=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}j().registerComponent("playlistLayout",l_);let lA=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&lS(e,t)}(i,e);var t,r,n=(r=function(){if("undefined"==typeof Reflect||!Reflect.construct||Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}(),function(){var e,t=lw(i);if(r){var n=lw(this).constructor;e=Reflect.construct(t,arguments,n)}else e=t.apply(this,arguments);return function(e,t){if(t&&("object"===lT(t)||"function"==typeof t))return t;if(void 0!==t)throw TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,e)});function i(e,t){return function(e,t){if(!(e instanceof t))throw TypeError("Cannot call a class as a function")}(this,i),t.wrap=!0,n.call(this,e,t)}return t=[{key:"getCls",value:function(){var e=lE(lw(i.prototype),"getCls",this).call(this);return e.push("cld-plw-horizontal"),e}}],function(e,t){for(var r,n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,(r=function(e,t){if("object"!==lT(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,"string");if("object"!==lT(n))return n;throw TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(i.key),"symbol"===lT(r)?r:String(r)),i)}}(i.prototype,t),Object.defineProperty(i,"prototype",{writable:!1}),i}(l_);function lC(e){return(lC="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function lI(){return(lI="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,r){var n=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=lR(e)););return e}(e,t);if(n){var i=Object.getOwnPropertyDescriptor(n,t);return i.get?i.get.call(arguments.length<3?e:r):i.value}}).apply(this,arguments)}function lO(e,t){return(lO=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function lR(e){return(lR=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}let lP=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&lO(e,t)}(i,e);var t,r,n=(r=function(){if("undefined"==typeof Reflect||!Reflect.construct||Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}(),function(){var e,t=lR(i);if(r){var n=lR(this).constructor;e=Reflect.construct(t,arguments,n)}else e=t.apply(this,arguments);return function(e,t){if(t&&("object"===lC(t)||"function"==typeof t))return t;if(void 0!==t)throw TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,e)});function i(e,t){return function(e,t){if(!(e instanceof t))throw TypeError("Cannot call a class as a function")}(this,i),t.wrap=!0,n.call(this,e,t)}return t=[{key:"getCls",value:function(){var e=lI(lR(i.prototype),"getCls",this).call(this);return e.push("cld-plw-vertical"),e}}],function(e,t){for(var r,n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,(r=function(e,t){if("object"!==lC(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,"string");if("object"!==lC(n))return n;throw TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(i.key),"symbol"===lC(r)?r:String(r)),i)}}(i.prototype,t),Object.defineProperty(i,"prototype",{writable:!1}),i}(l_);function lk(e){return(lk="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function lD(){return(lD="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,r){var n=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=lL(e)););return e}(e,t);if(n){var i=Object.getOwnPropertyDescriptor(n,t);return i.get?i.get.call(arguments.length<3?e:r):i.value}}).apply(this,arguments)}function lN(e,t){return(lN=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function lL(e){return(lL=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}let lx=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&lN(e,t)}(i,e);var t,r,n=(r=function(){if("undefined"==typeof Reflect||!Reflect.construct||Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}(),function(){var e,t=lL(i);if(r){var n=lL(this).constructor;e=Reflect.construct(t,arguments,n)}else e=t.apply(this,arguments);return function(e,t){if(t&&("object"===lk(t)||"function"==typeof t))return t;if(void 0!==t)throw TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,e)});function i(){return function(e,t){if(!(e instanceof t))throw TypeError("Cannot call a class as a function")}(this,i),n.apply(this,arguments)}return t=[{key:"getCls",value:function(){var e=lD(lL(i.prototype),"getCls",this).call(this);return e.push("cld-plw-custom"),e}},{key:"createEl",value:function(){var e=lD(lL(i.prototype),"createEl",this).call(this);return this.options_.renderTo.appendChild(e),e}}],function(e,t){for(var r,n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,(r=function(e,t){if("object"!==lk(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,"string");if("object"!==lk(n))return n;throw TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(i.key),"symbol"===lk(r)?r:String(r)),i)}}(i.prototype,t),Object.defineProperty(i,"prototype",{writable:!1}),i}(l_);function lj(e){return(lj="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function lM(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function lF(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?lM(Object(r),!0).forEach(function(t){var n,i;n=t,i=r[t],(n=lB(n))in e?Object.defineProperty(e,n,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[n]=i}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):lM(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}function lB(e){var t=function(e,t){if("object"!==lj(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,"string");if("object"!==lj(n))return n;throw TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"===lj(t)?t:String(t)}var lU=function(e,t){var r=lF(lF({},us),t);return r.show&&"string"==typeof r.selector&&(r.useDefaultLayout=!1,r.useCustomLayout=!0,r.renderTo=document.querySelector(r.selector),r.showAll=!0,r.renderTo.length),r.show&&!r.selector&&(r.useDefaultLayout=!0,r.useCustomLayout=!1),r.direction="horizontal"===r.direction.toLowerCase()?"horizontal":"vertical",r.skin=e.options_.skin,r};let lq=function(){var e;function t(e){var r=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};(function(e,t){if(!(e instanceof t))throw TypeError("Cannot call a class as a function")})(this,t),n=lU(e,n),this.options_=n,this.player_=e,this.render();var i=function(e,t){r.options_.fluid=t};e.on(ii,i),this.options=function(t){return t&&(r.options_=j().mergeOptions(r.options_,t),e.trigger("playlistwidgetoption",r.options_.playlistWidget)),r.options_},this.dispose=function(){r.layout_.dispose(),e.off(ii,i)}}return e=[{key:"render",value:function(){this.options_.useDefaultLayout&&("horizontal"===this.options_.direction?this.layout_=new lA(this.player_,this.options_):this.layout_=new lP(this.player_,this.options_)),this.options_.useCustomLayout&&(this.layout_=new lx(this.player_,this.options_))}},{key:"getLayout",value:function(){return this.layout_}},{key:"update",value:function(e,t){this.options(t),"direction"===e?(this.layout_.removeLayout(),this.layout_.dispose(),this.render()):this.layout_.update(e,this.options_)}},{key:"setSkin",value:function(){this.layout_.setCls()}},{key:"total",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:us.total,t=parseInt(e,10);return t!==this.options_.total&&"number"==typeof t&&t>0&&this.update("total",{total:t}),this}},{key:"direction",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:us.direction;return"horizontal"!==e&&"vertical"!==e||this.update("direction",{direction:e}),this}}],function(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,lB(n.key),n)}}(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t}();var lH="2.1.0",lV=j().getTech("Html5"),lG=j().registerPlugin||j().plugin,lY=["abort","emptied","loadstart","play"],lz=["abort","emptied"],lK=["ad-playback","ads-ready?","postroll?","preroll?"],lW=function(){var e,t,r=this,n=[],i=!1,o=!0,u=function(e){return function(t,r){var i=this;if(!this.perSourceBehaviors.disabled()){var o=2==arguments.length,u=this.currentSrc(),l=[t],c=j().bind(o?this:t,arguments[arguments.length-1]),f=function(){var t=i.currentSrc()!==u;i.perSourceBehaviors.disabled()||((t||e)&&i.off.apply(i,l),t||c.apply(void 0,arguments))};return f.guid=c.guid,o||l.push(r),l.push(f),n.push(l),this.on.apply(this,l)}}};this.perSourceBehaviors={disable:j().bind(this,function(){return this.clearTimeout(t),t=null,i=!0}),disabled:function(){return i},enable:function(){return i=!1},enabled:function(){return!i},isSrcStable:function(){return o},VERSION:lH},this.onPerSrc=u(),this.onePerSrc=u(!0),this.on("dispose",function(){n.length=0}),this.on(lY,function(i){if(!(r.perSourceBehaviors.disabled()||t||r.usingPlugin("ads")&&(r.usingPlugin("ads")&&"function"==typeof r.ads.inAdBreak?r.ads.isInAdMode()&&"loadstart"!==i.type:(u=r.ads.state,lK.indexOf(u)>-1)))){o&&lz.indexOf(i.type)>-1&&(o=!1,r.trigger("sourceunstable"));var u,l=[],c=function(e){return l.push({time:Date.now(),event:e})};c(i),r.on(lV.Events,c),t=r.setTimeout(function(){var i=r.currentSrc();o=!0,t=null,r.off(lV.Events,c),i&&i!==e&&(n.forEach(function(e){return r.off.apply(r,e)}),n.length=0,r.trigger("sourcechanged",{interimEvents:l,from:e,to:i}),e=i)},1)}})};function lX(e){if(void 0===e)throw ReferenceError("this hasn't been initialised - super() hasn't been called");return e}lW.VERSION=lH,lG("perSourceBehaviors",lW);var lQ=function(e){var t=this;return t.id=e.id,t.label=t.id,t.width=e.width,t.height=e.height,t.bitrate=e.bandwidth,t.frameRate=e.frameRate,t.enabled_=e.enabled,Object.defineProperty(t,"enabled",{get:function(){return t.enabled_()},set:function(e){t.enabled_(e)}}),t},l$=function(e){function t(){var t,r=lX(lX(t=e.call(this)||this));return r.levels_=[],r.selectedIndex_=-1,Object.defineProperty(r,"selectedIndex",{get:function(){return r.selectedIndex_}}),Object.defineProperty(r,"length",{get:function(){return r.levels_.length}}),r||lX(t)}t.prototype=Object.create(e.prototype),t.prototype.constructor=t,t.__proto__=e;var r=t.prototype;return r.addQualityLevel=function(e){var t=this.getQualityLevelById(e.id);if(t)return t;var r=this.levels_.length;return t=new lQ(e),""+r in this||Object.defineProperty(this,r,{get:function(){return this.levels_[r]}}),this.levels_.push(t),this.trigger({qualityLevel:t,type:"addqualitylevel"}),t},r.removeQualityLevel=function(e){for(var t=null,r=0,n=this.length;r<n;r++)if(this[r]===e){t=this.levels_.splice(r,1)[0],this.selectedIndex_===r?this.selectedIndex_=-1:this.selectedIndex_>r&&this.selectedIndex_--;break}return t&&this.trigger({qualityLevel:e,type:"removequalitylevel"}),t},r.getQualityLevelById=function(e){for(var t=0,r=this.length;t<r;t++){var n=this[t];if(n.id===e)return n}return null},r.dispose=function(){this.selectedIndex_=-1,this.levels_.length=0},t}(j().EventTarget);for(var lJ in l$.prototype.allowedEvents_={change:"change",addqualitylevel:"addqualitylevel",removequalitylevel:"removequalitylevel"},l$.prototype.allowedEvents_)l$.prototype["on"+lJ]=null;var lZ="2.2.1",l0=function(e){var t,r,n;return t=this,j().mergeOptions({},e),r=t.qualityLevels,n=new l$,t.on("dispose",function e(){n.dispose(),t.qualityLevels=r,t.off("dispose",e)}),t.qualityLevels=function(){return n},t.qualityLevels.VERSION=lZ,n};(j().registerPlugin||j().plugin)("qualityLevels",l0),l0.VERSION=lZ;let l1={init:function(e){if(window.dashjs&&e&&e.qualityLevels&&e.dash&&e.dash.mediaPlayer){var t=dashjs.MediaPlayer;e.dash.qualityLevels=e.qualityLevels(),e.dash.mediaPlayer.getAutoSwitchQualityFor=function(t){var r=e.dash.mediaPlayer.getSettings();return!r||r.streaming.abr.autoSwitchBitrate[t]},e.dash.mediaPlayer.setAutoSwitchQualityFor=function(t,r){var n=e.dash.mediaPlayer,i={streaming:{abr:{autoSwitchBitrate:{}}}};i.streaming.abr.autoSwitchBitrate[t]=r,n.updateSettings(i)},e.dash.mediaPlayer.on(t.events.PLAYBACK_METADATA_LOADED,function(){var t=e.dash.mediaPlayer.getBitrateInfoListFor("video"),r=e.dash.mediaPlayer.getBitrateInfoListFor("audio");if(t.length>0){var n=t[t.length-1].bitrate;e.dash.audioMapper=t.map(function(e){return Math.round(e.bitrate/n*(r.length-1))}),t.forEach(function(t){e.dash.qualityLevels.addQualityLevel({id:t.bitrate,width:t.width,height:t.height,bandwidth:t.bitrate,selected:!0,enabled:function(t){var r=this;if(void 0===t)return void 0===this.selected||this.selected;if(this.selected=t,!0===t){var n=r8(e.qualityLevels().levels_,function(e){return e.id===r.id});e.qualityLevels().selectedIndex_=n,e.qualityLevels().trigger({type:"change",selectedIndex:n})}}})})}}),e.qualityLevels().on("change",function(t){1===e.dash.qualityLevels.levels_.filter(function(e){return e.enabled}).length?(e.dash.mediaPlayer.setQualityFor("video",t.selectedIndex),e.dash.mediaPlayer.setQualityFor("audio",e.dash.audioMapper[t.selectedIndex])):e.dash.mediaPlayer.getAutoSwitchQualityFor("video")||(e.dash.mediaPlayer.setAutoSwitchQualityFor("video",!0),e.dash.mediaPlayer.setAutoSwitchQualityFor("audio",!0))})}},setVisibility:function(e){var t=e.controlBar.getChild("sourceMenuButton");if(t){var r=e.qualityLevels();if(r&&r.length>1){var n=r.levels_.filter(function(e){return e.enabled});if(1===n.length){var i=r.levels_.findIndex(function(e){return e.id===n[0].id});t.children()[1].children()[i].selected(!0)}else t.children()[1].children()[0].selected(!0),t.children()[1].children().forEach(function(e,t){t>0&&e.selected(!1)});t.show()}else t.hide()}}};function l2(e){return(l2="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function l3(e,t,r){var n;return(n=function(e,t){if("object"!==l2(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,"string");if("object"!==l2(n))return n;throw TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(t),(t="symbol"===l2(n)?n:String(n))in e)?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var l4="cld-ia-layout-state",l6="vp-ia",l8="interaction-areas-container",l5={PORTRAIT:"portrait",LANDSCAPE:"landscape",All:"all",CENTER:"center"},l9={PULSING:"pulsing",SHADOWED:"shadowed"},l7=(l3(E={},l5.PORTRAIT,"https://res.cloudinary.com/prod/raw/upload/v1623772481/video-player/vtts/portrait.vtt"),l3(E,l5.LANDSCAPE,"https://res.cloudinary.com/prod/raw/upload/v1623772303/video-player/vtts/landscape.vtt"),l3(E,l5.All,"https://res.cloudinary.com/prod/raw/upload/v1623250266/video-player/vtts/all.vtt"),l3(E,l5.CENTER,"https://res.cloudinary.com/prod/raw/upload/v1623250265/video-player/vtts/center.vtt"),E),ce=function(e){var t=e.text,r=e.onClick,n=e.theme,i=e.loadingDelay;return sm({tag:"button",attr:{class:"vp-theme-button theme-".concat(void 0===n?"":n)},onClick:r,children:[{tag:"div",attr:{class:"vp-loading-bar"},style:{"animation-duration":"".concat(void 0===i?0:i,"ms")}},{tag:"div",attr:{class:"content"},children:t}]})};function ct(e){return(ct="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var cr=function(e,t){return e.id||e.type||"id_".concat(t)},cn=function(e,t,r,n,i){var o,u,l,c=e.playerOptions,f=e.videojsOptions,d=a5(f),h=c&&c.colors?c.colors.accent:d.accent,p=rz(f,"interactionDisplay.theme.template",l9.PULSING);return sm({tag:"div",attr:{class:"".concat(l6,"-item theme-").concat(p),"data-id":cr(t,r)},style:{left:"".concat(t.left,"%"),top:"".concat(t.top,"%"),width:"".concat(t.width,"%"),height:"".concat(t.height,"%"),transitionDuration:"".concat(n,"ms")},event:{name:"click",callback:i},children:[{tag:"div",attr:{class:"".concat(l6,"-area-marker")},children:[{tag:"div",attr:{class:"".concat(l6,"-marker-shadow")},style:(u={},(o=function(e,t){if("object"!==ct(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,"string");if("object"!==ct(n))return n;throw TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(l=p===l9.SHADOWED?"backgroundColor":"borderColor"),(l="symbol"===ct(o)?o:String(o))in u)?Object.defineProperty(u,l,{value:h,enumerable:!0,configurable:!0,writable:!0}):u[l]=h,u)},{tag:"div",attr:{class:"".concat(l6,"-marker-main")},style:{borderColor:h}}]}]})},ci=function(e,t){return e/(100/+t)},co=function(e,t){var r=cl(e);r?r.replaceWith(t):e.el().appendChild(t)},ca=function(e,t,r){return e.querySelector("[data-id=".concat(cr(t,r),"]"))},cs=function(e,t,r,n,i,o){var u=cl(e);ss(r,function(e,r){var l=ca(u,e,r),c=cr(e),f=su(n,function(e){return cr(e)===c});f&&l?sp(l,{left:"".concat(e.left,"%"),top:"".concat(e.top,"%"),width:"".concat(e.width,"%"),height:"".concat(e.height,"%"),transitionDuration:"".concat(i,"ms")}):f||l||u.appendChild(cn(t,e,r,i,function(t){o({event:t,item:e,index:r})}))}),ss(n,function(e,t){var n=ca(u,e,t),i=cr(e),o=!su(r,function(e){return cr(e)===i});n&&o&&n.parentNode.removeChild(n)})},cu=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:ef;localStorage.setItem(l4,JSON.parse(e)),t()},cl=function(e){return e.el().querySelector(".".concat(l8))},cc=function(e){var t=cl(e);t&&t.parentNode.removeChild(t)};function cf(e){return(cf="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var cd=function(e,t,r){var n=!1,i=null,o=ef;function u(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=c();return e||t&&t.enable}function l(){i&&e.videojs.removeRemoteTextTrack(i);var t=u(),r=c();if(!t||n)return null;if(Array.isArray(r.template))p(r.template),m();else{var o=r.vttUrl||l7[r.template];o&&function(t){if(t){var r=null;t.addEventListener("cuechange",function(){var n=t.activeCues&&t.activeCues[0];if(n){var i=Math.max(Math.floor(1e3*(n.endTime-n.startTime)),250),o=JSON.parse(n.text);p(o,r,i),r||m(),r=o}else cc(e.videojs),r=null})}}(i=e.videojs.addRemoteTextTrack({kind:"metadata",srclang:"en",src:o,default:!0},!0).track)}}function c(){var t=e.videojs.currentSource().cldSrc;return t&&t.getInteractionAreas()}function f(){cc(e.videojs),l(),e.play()}function d(){if(u()){if(rz(r.interactionDisplay,"layout.enable",!0)&&"true"!==localStorage.getItem(l4)){var t=null,n=rz(r,"interactionDisplay.layout.showAgain",!1);e.pause(),function(e,t){var r=arguments.length>2&&void 0!==arguments[2]&&arguments[2],n=!1,i="checkbox_".concat(Math.round(1e4*Math.random()));co(e,sm({tag:"div",attr:{class:"".concat(l8," ").concat(l6,"-layout-message ").concat(r?"":"clickable")},onClick:r?null:function(){return cu(n,t)},children:[{tag:"img",attr:{class:"".concat(l6,"-layout-icon"),src:"https://res.cloudinary.com/prod/image/upload/v1626764643/video-player/interaction-area-hand.svg"}},{tag:"h3",attr:{class:"".concat(l6,"-layout-message-title")},children:"Tap on dots to zoom for a product."},ce({text:"Got it",theme:"transparent-white",loadingDelay:r?0:4500,onClick:r?function(){return cu(n,t)}:null}),r&&{tag:"div",attr:{class:"".concat(l6,"-layout-message-do-not-show")},children:[{tag:"input",attr:{type:"checkbox",class:"".concat(l6,"-layout-message-checkbox"),id:i},event:{name:"input",callback:function(e){n=e.target.checked}}},{tag:"label",attr:{class:"".concat(l6,"-layout-message-checkbox-title"),for:i},children:"Don׳t show it again"}]}].filter(function(e){return e})}))}(e.videojs,function(){clearTimeout(t),f()},n),n||(t=setTimeout(f,4500))}else f()}}function h(t){var r=t.event,i=t.item,u=t.index,f=c();f.onClick&&f.onClick({item:i,index:u,event:r,zoom:function(t,r){var u,f,d,h,p,m,g,y,v,b,_,T,E,S,w,A,C,I,O,R,P,k,D,N,L;C=e.videojs.currentSource(),I=e.currentTime(),O=!(!(d=c())||void 0===d.syncOffsetTime)&&d.syncOffsetTime,P=(R=C.cldSrc).getInitOptions(),k=r||{transformation:P.transformation},N=(D=!t&&(p=(h=e.videoElement).videoHeight,g=ci(m=h.videoWidth,i.left),y=ci(p,i.top),_=m/p,S=Math.round((E=Math.round((T=(v=ci(m,i.width))/(b=ci(p,i.height)))>1||_>1?b*T:v))/_),w=Math.round(g-(E-v)/2),A=Math.round(y-(S-b)/2),{width:E,height:S,x:Math.min(Math.max(w,0),m-E),y:Math.min(Math.max(A,0),p-S),crop:"crop"}))?j().mergeOptions({transformation:D},k):k,L=R.isRawUrl?C.src:{publicId:R.publicId()},e.source(D?{publicId:R.publicId()}:t,N).play(),O&&e.currentTime(I),n=!0,(u=sd("div",{class:"go-back-button"})).addEventListener("click",function(){o()},!1),f=sd("div",{class:l8},u),co(e.videojs,f),o=function(){if(n){n=!1;var t=e.currentTime(),r=e.duration();e.source(L,P).play(),O&&t<r&&e.currentTime(t),l()}}}})}function p(n,i){var o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,u={playerOptions:t,videojsOptions:r};if(i)cs(e.videojs,u,n,i,o,h);else{var l=n.map(function(e,t){return cn(u,e,t,o,function(r){h({event:r,item:e,index:t})})});co(e.videojs,sd("div",{class:l8},l))}}function m(){u()&&function(e,t){var r=cl(e);if(r){var n=t.videoHeight,i=t.videoWidth/n,o=i*t.clientHeight;r.style.width="".concat(t.clientWidth<o?"100%":o,"px"),r.style.height=t.clientWidth<o?"".concat(t.clientWidth/i,"px"):"100%"}}(e.videojs,e.videoElement)}return{init:function(){if(u()){e.videojs.el().classList.add("interaction-areas"),e.videojs.one(n0,function(){"object"===cf(e.videojs.ima)?e.on("adsready",function(){e.videojs.ima.addEventListener(window.google.ima.AdEvent.Type.ALL_ADS_COMPLETED,d)}):d()});var t,r,n=of(m,100);e.videojs.on(iu,function(){setTimeout(n,100)});var i=(t=window,r="resize",t.addEventListener(r,m,!1),function(){t.removeEventListener(r,m,!1)});e.videojs.on("dispose",i)}e.videojs.on(io,function(){o()}),e.videojs.on(n8,function(){e.pause()})}}},ch=function(e){return ec(e)?e():e},cp=function(e,t,r){var n=ch(e),i=n.value(t);return i||console.error("cloudinary video player: ".concat(n.message(r))),i},cm=function e(t,r){if(ei(r)){for(var n in t)if(Object.prototype.hasOwnProperty.call(r,n)){var i=t[n],o=r[n],u=ei(i);if(u&&!e(i,o)||!u&&!cp(o,i,n))return!1}}return!0};function cg(e){return(cg="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var cy=function(e){return ei(e)?":(".concat(Object.values(e).join("/"),")"):""},cv={isString:function(e){return{value:eo,message:function(t){return"'".concat(t,"' should be a string").concat(cy(e))}}},isNumber:function(e){return{value:ea,message:function(t){return"'".concat(t,"' should be a number").concat(cy(e))}}},isBoolean:function(){return{value:eu,message:function(e){return"'".concat(e,"' should be a boolean")}}},isFunction:function(){return{value:ec,message:function(e){return"'".concat(e,"' should be a function")}}},isPlainObject:function(){return{value:ei,message:function(e){return"'".concat(e,"' should be an object")}}},isObject:function(){return{value:function(e){return e&&"object"===cg(e)},message:function(e){return"'".concat(e,"' should be an object")}}},isArray:function(){return{value:Array.isArray,message:function(e){return"'".concat(e,"' should be an array")}}},isArrayOfNumbers:function(){return{value:function(e){return Array.isArray(e)&&e.every(ea)},message:function(e){return"'".concat(e,"' should be an array of numbers")}}},isArrayOfStrings:function(){return{value:function(e){return Array.isArray(e)&&e.every(eo)},message:function(e){return"'".concat(e,"' should be an array of strings")}}},isArrayOfObjects:function(e){return{value:function(t){return t.every(function(t){for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r)){var n=t[r],i=e[r];if(!i||!cp(i(n),n,r))return!1}return!0})},message:function(){return"invalid array"}}},or:function(){for(var e=arguments.length,t=Array(e),r=0;r<e;r++)t[r]=arguments[r];return function(){return{value:function(e){return su(t,function(t){return ch(t).value(e)})},message:function(e){return sl(t,function(t){return ch(t).message(e)}).join(" or ")}}}}},cb={videojsOptions:{loop:cv.isBoolean,controls:cv.isBoolean,autoplay:cv.isBoolean,autoplayMode:cv.isString(nv),bigPlayButton:cv.isBoolean,playbackRates:cv.isArray,showLogo:cv.isBoolean,logoImageUrl:cv.isString,logoOnclickUrl:cv.isString,videoJS:cv.isPlainObject,maxTries:cv.isNumber,muted:cv.isBoolean,playsinline:cv.isBoolean,videoTimeout:cv.isNumber,preload:cv.isString,sourceTransformation:cv.isPlainObject,allowUsageReport:cv.isBoolean,interactionAreas:{theme:{template:cv.isString(l9)},layout:{enable:cv.isBoolean,showAgain:cv.isBoolean}}},playerOptions:{queryParams:cv.isPlainObject,publicId:cv.isString,fluid:cv.isBoolean,analytics:cv.isBoolean,cloudinaryAnalytics:cv.isBoolean,hideContextMenu:cv.isBoolean,playedEventPercents:cv.isArrayOfNumbers,showJumpControls:cv.isBoolean,seekThumbnails:cv.isBoolean,floatingWhenNotVisible:cv.isString(nb),playedEventTimes:cv.isArray,playlistWidget:{direction:cv.isString,total:cv.isNumber},colors:{base:cv.isString,accent:cv.isString,text:cv.isString},ads:{adTagUrl:cv.isString,showCountdown:cv.isBoolean,adLabel:cv.isString,locale:cv.isString,prerollTimeout:cv.isNumber,postrollTimeout:cv.isNumber,adsInPlaylist:cv.isString({FIRST_VIDEO:"first-video",EVERY_VIDEO:"every-video"})},cloudinary:{autoShowRecommendations:cv.isBoolean,sourceTypes:cv.isArrayOfStrings,transformation:cv.isObject,fontFace:cv.isString,posterOptions:{publicId:cv.isString,transformation:cv.isObject}}}},c_={raw_transformation:cv.isString,shoppable:cv.isPlainObject,withCredentials:cv.isBoolean,interactionAreas:{enable:cv.isBoolean,template:cv.or(cv.isString(l5),cv.isArray),vttUrl:cv.isString,onClick:cv.isFunction},textTracks:{captions:{label:cv.isString,language:cv.isString,default:cv.isBoolean,url:cv.isString},subtitles:cv.isArrayOfObjects({label:cv.isString,language:cv.isString,url:cv.isString})},info:{title:cv.isString,subtitle:cv.isString,description:cv.isString},cloudinary:{sourceTypes:cv.isArrayOfStrings,transformation:cv.isObject}};function cT(e,t,r){return(cT=ck()?Reflect.construct.bind():function(e,t,r){var n=[null];n.push.apply(n,t);var i=new(Function.bind.apply(e,n));return r&&cO(i,r.prototype),i}).apply(null,arguments)}function cE(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}function cS(e){return(cS="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function cw(){cw=function(){return e};var e={},t=Object.prototype,r=t.hasOwnProperty,n=Object.defineProperty||function(e,t,r){e[t]=r.value},i="function"==typeof Symbol?Symbol:{},o=i.iterator||"@@iterator",u=i.asyncIterator||"@@asyncIterator",l=i.toStringTag||"@@toStringTag";function c(e,t,r){return Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{c({},"")}catch(e){c=function(e,t,r){return e[t]=r}}function f(e,t,r,i){var o,u,l=Object.create((t&&t.prototype instanceof p?t:p).prototype);return n(l,"_invoke",{value:(o=new A(i||[]),u="suspendedStart",function(t,n){if("executing"===u)throw Error("Generator is already running");if("completed"===u){if("throw"===t)throw n;return{value:void 0,done:!0}}for(o.method=t,o.arg=n;;){var i=o.delegate;if(i){var l=function e(t,r){var n=r.method,i=t.iterator[n];if(void 0===i)return r.delegate=null,"throw"===n&&t.iterator.return&&(r.method="return",r.arg=void 0,e(t,r),"throw"===r.method)||"return"!==n&&(r.method="throw",r.arg=TypeError("The iterator does not provide a '"+n+"' method")),h;var o=d(i,t.iterator,r.arg);if("throw"===o.type)return r.method="throw",r.arg=o.arg,r.delegate=null,h;var u=o.arg;return u?u.done?(r[t.resultName]=u.value,r.next=t.nextLoc,"return"!==r.method&&(r.method="next",r.arg=void 0),r.delegate=null,h):u:(r.method="throw",r.arg=TypeError("iterator result is not an object"),r.delegate=null,h)}(i,o);if(l){if(l===h)continue;return l}}if("next"===o.method)o.sent=o._sent=o.arg;else if("throw"===o.method){if("suspendedStart"===u)throw u="completed",o.arg;o.dispatchException(o.arg)}else"return"===o.method&&o.abrupt("return",o.arg);u="executing";var c=d(e,r,o);if("normal"===c.type){if(u=o.done?"completed":"suspendedYield",c.arg===h)continue;return{value:c.arg,done:o.done}}"throw"===c.type&&(u="completed",o.method="throw",o.arg=c.arg)}})}),l}function d(e,t,r){try{return{type:"normal",arg:e.call(t,r)}}catch(e){return{type:"throw",arg:e}}}e.wrap=f;var h={};function p(){}function m(){}function g(){}var y={};c(y,o,function(){return this});var v=Object.getPrototypeOf,b=v&&v(v(C([])));b&&b!==t&&r.call(b,o)&&(y=b);var _=g.prototype=p.prototype=Object.create(y);function T(e){["next","throw","return"].forEach(function(t){c(e,t,function(e){return this._invoke(t,e)})})}function E(e,t){var i;n(this,"_invoke",{value:function(n,o){function u(){return new t(function(i,u){!function n(i,o,u,l){var c=d(e[i],e,o);if("throw"!==c.type){var f=c.arg,h=f.value;return h&&"object"==cS(h)&&r.call(h,"__await")?t.resolve(h.__await).then(function(e){n("next",e,u,l)},function(e){n("throw",e,u,l)}):t.resolve(h).then(function(e){f.value=e,u(f)},function(e){return n("throw",e,u,l)})}l(c.arg)}(n,o,i,u)})}return i=i?i.then(u,u):u()}})}function S(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function w(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function A(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(S,this),this.reset(!0)}function C(e){if(e){var t=e[o];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var n=-1,i=function t(){for(;++n<e.length;)if(r.call(e,n))return t.value=e[n],t.done=!1,t;return t.value=void 0,t.done=!0,t};return i.next=i}}return{next:I}}function I(){return{value:void 0,done:!0}}return m.prototype=g,n(_,"constructor",{value:g,configurable:!0}),n(g,"constructor",{value:m,configurable:!0}),m.displayName=c(g,l,"GeneratorFunction"),e.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===m||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,g):(e.__proto__=g,c(e,l,"GeneratorFunction")),e.prototype=Object.create(_),e},e.awrap=function(e){return{__await:e}},T(E.prototype),c(E.prototype,u,function(){return this}),e.AsyncIterator=E,e.async=function(t,r,n,i,o){void 0===o&&(o=Promise);var u=new E(f(t,r,n,i),o);return e.isGeneratorFunction(r)?u:u.next().then(function(e){return e.done?e.value:u.next()})},T(_),c(_,l,"Generator"),c(_,o,function(){return this}),c(_,"toString",function(){return"[object Generator]"}),e.keys=function(e){var t=Object(e),r=[];for(var n in t)r.push(n);return r.reverse(),function e(){for(;r.length;){var n=r.pop();if(n in t)return e.value=n,e.done=!1,e}return e.done=!0,e}},e.values=C,A.prototype={constructor:A,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(w),!e)for(var t in this)"t"===t.charAt(0)&&r.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=void 0)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var t=this;function n(r,n){return u.type="throw",u.arg=e,t.next=r,n&&(t.method="next",t.arg=void 0),!!n}for(var i=this.tryEntries.length-1;i>=0;--i){var o=this.tryEntries[i],u=o.completion;if("root"===o.tryLoc)return n("end");if(o.tryLoc<=this.prev){var l=r.call(o,"catchLoc"),c=r.call(o,"finallyLoc");if(l&&c){if(this.prev<o.catchLoc)return n(o.catchLoc,!0);if(this.prev<o.finallyLoc)return n(o.finallyLoc)}else if(l){if(this.prev<o.catchLoc)return n(o.catchLoc,!0)}else{if(!c)throw Error("try statement without catch or finally");if(this.prev<o.finallyLoc)return n(o.finallyLoc)}}}},abrupt:function(e,t){for(var n=this.tryEntries.length-1;n>=0;--n){var i=this.tryEntries[n];if(i.tryLoc<=this.prev&&r.call(i,"finallyLoc")&&this.prev<i.finallyLoc){var o=i;break}}o&&("break"===e||"continue"===e)&&o.tryLoc<=t&&t<=o.finallyLoc&&(o=null);var u=o?o.completion:{};return u.type=e,u.arg=t,o?(this.method="next",this.next=o.finallyLoc,h):this.complete(u)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),h},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.finallyLoc===e)return this.complete(r.completion,r.afterLoc),w(r),h}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.tryLoc===e){var n=r.completion;if("throw"===n.type){var i=n.arg;w(r)}return i}}throw Error("illegal catch attempt")},delegateYield:function(e,t,r){return this.delegate={iterator:C(e),resultName:t,nextLoc:r},"next"===this.method&&(this.arg=void 0),h}},e}function cA(e,t,r,n,i,o,u){try{var l=e[o](u),c=l.value}catch(e){return void r(e)}l.done?t(c):Promise.resolve(c).then(n,i)}function cC(e){return function(){var t=this,r=arguments;return new Promise(function(n,i){var o=e.apply(t,r);function u(e){cA(o,n,i,u,l,"next",e)}function l(e){cA(o,n,i,u,l,"throw",e)}u(void 0)})}}function cI(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,cN(n.key),n)}}function cO(e,t){return(cO=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function cR(e,t){if(t&&("object"===cS(t)||"function"==typeof t))return t;if(void 0!==t)throw TypeError("Derived constructors may only return object or undefined");return cP(e)}function cP(e){if(void 0===e)throw ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function ck(){if("undefined"==typeof Reflect||!Reflect.construct||Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}function cD(e){return(cD=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function cN(e){var t=function(e,t){if("object"!==cS(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,"string");if("object"!==cS(n))return n;throw TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"===cS(t)?t:String(t)}Object.keys(li).forEach(function(e){j().registerPlugin(e,li[e])}),(_=j().getComponent("Player").prototype.options_.children).push("titleBar"),_.push("upcomingVideoOverlay"),_.push("recommendationsOverlay"),(T=j().getComponent("ControlBar"))&&((_=T.prototype.options_.children).splice(_.indexOf("progressControl"),0,"spacer","progressControlEventsBlocker"),_.splice(_.indexOf("playToggle"),1,"playlistPreviousButton","JumpBackButton","playToggle","JumpForwardButton","playlistNextButton"),_.splice(_.indexOf("fullscreenToggle"),1,"logoButton","fullscreenToggle"));var cL=!0,cx=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&cO(e,t)}(l,e);var t,r,n,i,o,u=(t=ck(),function(){var e,r=cD(l);if(t){var n=cD(this).constructor;e=Reflect.construct(r,arguments,n)}else e=r.apply(this,arguments);return cR(this,e)});function l(e,t,r){var n,i,o,c,f,d,h,p,m,g;return function(e,t){if(!(e instanceof t))throw TypeError("Cannot call a class as a function")}(this,l),i=cP(n=u.call(this)),c=function(){n.videojs.clearTimeout(n.reTryId)},(o=cN(o="_clearTimeOut"))in i?Object.defineProperty(i,o,{value:c,enumerable:!0,configurable:!0,writable:!0}):i[o]=c,n._playlistWidget=null,n.nbCalls=0,n.videoElement=function(e){if(eo(e)){var t=e;0===t.indexOf("#")&&(t=t.slice(1));try{e=document.querySelector("#".concat(nD()(t)))||j().getPlayer(t)}catch(t){e=null}if(!e)throw Error("Could not find element with id ".concat(t))}if(!e.tagName)throw Error("Must specify either an element or an element id.");if("VIDEO"!==e.tagName)throw Error("Element is not a video tag.");return e}(e),n.options=(f=n.videoElement,d=t,h=nP.normalizeAttributes(f),(j().dom.hasClass(f,ny)||j().dom.hasClass(f,"vjs-fluid"))&&(d.fluid=!0),(m=(p=d=nP.assign({},ng,n_,h,d)).autoplayMode)&&(p.autoplay=m===nv.ALWAYS),(g=nP.sliceAndUnsetProperties.apply(nP,[d].concat(nN(np)))).cloudinary=nP.sliceAndUnsetProperties.apply(nP,[g].concat(nN(nh))),d.videojs&&(nP.assign(d,d.videojs),delete d.videojs),{playerOptions:g,videojsOptions:d}),n._videojsOptions=n.options.videojsOptions,n.videoElement.classList.add("video-js"),nP.fontFace(n.videoElement,n.playerOptions),nP.playButton(n.videoElement,n._videojsOptions),n.videojs=j()(n.videoElement,n._videojsOptions),n._isPlayerConfigValid=!0,cm(n.options,cb),n._isPlayerConfigValid?(n._videojsOptions.muted&&n.videojs.volume(.4),n.playerOptions.fluid&&n.fluid(n.playerOptions.fluid),n.interactionArea=cd(cP(n),n.playerOptions,n._videojsOptions),n._setCssClasses(),n._initPlugins(),n._initPlaylistWidget(),n._initJumpButtons(),n._setVideoJsListeners(r),n):(n.videojs.error("invalid player configuration"),cR(n))}return r=[{key:"_setVideoJsListeners",value:function(e){var t=this;j().hook("beforeerror",function(e,r){return r&&3===r.code&&t.loadingLazyPlugins&&(r=null),r}),this.videojs.on(n8,function(){var e=t.videojs.error();if(e){var r=t._isPlayerConfigValid&&t.videojs.cloudinary.currentSourceType();[3===e.code&&j().browser.IS_SAFARI,4===e.code].includes(!0)&&[ih.AUDIO,ih.VIDEO].includes(r)?(t.videojs.error(null),nP.handleCldError(t,t.playerOptions)):t._clearTimeOut()}}),this.videojs.tech_.on("retryplaylist",function(){rz(t.videojs,"hls.stats.mediaRequestsErrored",0)>0&&(t._clearTimeOut(),nP.handleCldError(t,t.playerOptions))}),this.videojs.on(n0,this._clearTimeOut),this.videojs.on("canplaythrough",this._clearTimeOut),this.videojs.ready(function(){t._onReady(),e&&e(t),t.interactionArea.init()})}},{key:"_initPlugins",value:function(){this._initIma(),this._initAutoplay(),this._initContextMenu(),this._initPerSrcBehaviors(),this._initCloudinary(),this._initAnalytics(),this._initCloudinaryAnalytics(),this._initFloatingPlayer(),this._initColors(),this._initTextTracks(),this._initSeekThumbs()}},{key:"_initLazyPlugins",value:(o=cC(cw().mark(function e(t){return cw().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return this.loadingLazyPlugins=!0,e.next=3,this._initDash(t);case 3:this.loadingLazyPlugins=!1;case 4:case"end":return e.stop()}},e,this)})),function(e){return o.apply(this,arguments)})},{key:"_initDash",value:(i=cC(cw().mark(function e(t){var r;return cw().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(r=t.sourceTypes&&t.sourceTypes.some(function(e){return e.includes("dash")}),!li.dashPlugin||!r){e.next=4;break}return e.next=4,li.dashPlugin();case 4:case"end":return e.stop()}},e)})),function(e){return i.apply(this,arguments)})},{key:"_isFullScreen",value:function(){return this.videojs.player().isFullscreen()}},{key:"_initIma",value:function(){this.playerOptions.ads&&0!==Object.keys(this.playerOptions.ads).length&&li.imaPlugin(this.videojs,this.playerOptions)}},{key:"setTextTracks",value:function(e){var t=this.videojs.remoteTextTracks();if(t)for(var r=t.tracks_.length-1;r>=0;r--)this.videojs.removeRemoteTextTrack(t.tracks_[r]);if(e){for(var n=[],i=0,o=Object.keys(e);i<o.length;i++){var u=o[i];if(Array.isArray(e[u]))for(var c=e[u],f=0;f<c.length;f++)n.push(l.buildTextTrackObj(u,c[f]));else n.push(l.buildTextTrackObj(u,e[u]))}nP.filterAndAddTextTracks(n,this.videojs)}}},{key:"_initSeekThumbs",value:function(){var e=this;this.playerOptions.seekThumbnails&&this.videojs.on("cldsourcechanged",function(t,r){var n=r.source;if(n&&n.getType()!==ih.AUDIO&&!(e.videojs&&e.videojs.activePlugins_&&e.videojs.activePlugins_.vr)){var i=n.publicId(),o=nP.assign({},n.transformation());o&&o.streaming_profile&&delete o.streaming_profile,o.flags=o.flags||[],o.flags.push("sprite");var u=n.config().url("".concat(i,".vtt"),{transformation:o});ec(e.videojs.vttThumbnails)?e.videojs.vttThumbnails({src:u}):e.videojs.vttThumbnails.src(u)}})}},{key:"_initColors",value:function(){this.videojs.colors(this.playerOptions.colors?{colors:this.playerOptions.colors}:{})}},{key:"_initQualitySelector",value:function(){var e=this;this._videojsOptions.controlBar&&!1!==this.playerOptions.qualitySelector&&(this.videojs.httpSourceSelector({default:"auto"}),this.videojs.on(n7,function(){l1.init(e.videojs)}),this.videojs.on(ie,function(){l1.setVisibility(e.videojs)}))}},{key:"_initTextTracks",value:function(){var e=this;this.videojs.on("refreshTextTracks",function(t,r){e.setTextTracks(r)})}},{key:"_initPerSrcBehaviors",value:function(){this.videojs.perSourceBehaviors&&this.videojs.perSourceBehaviors()}},{key:"_initJumpButtons",value:function(){!this.playerOptions.showJumpControls&&this.videojs.controlBar&&(this.videojs.controlBar.removeChild("JumpForwardButton"),this.videojs.controlBar.removeChild("JumpBackButton"))}},{key:"_initCloudinary",value:function(){var e=this.playerOptions.cloudinary.cloudinaryConfig;e.chainTarget=this,!1!==e.secure&&r$(e,{secure:!0}),this.videojs.cloudinary(this.playerOptions.cloudinary)}},{key:"_initAnalytics",value:function(){var e=this.playerOptions.analytics;if(window.ga||!e){if(e){var t="object"===cS(e)?e:{};this.videojs.analytics(t)}}else console.error("Google Analytics script is missing")}},{key:"_initCloudinaryAnalytics",value:function(){this.playerOptions.cloudinaryAnalytics&&(this.videojs.videoElement=this.videoElement,this.videojs.cloudinaryAnalytics())}},{key:"reTryVideo",value:function(e,t){var r=this;if(!this.isVideoReady()){if(this.nbCalls<e)this.nbCalls++,this.reTryId=this.videojs.setTimeout(function(){return r.reTryVideo(e,t)},t);else{var n=Error("Video is not ready please try later");this.videojs.trigger("error",n)}}}},{key:"isVideoReady",value:function(){return this.videojs.readyState()>=(/iPad|iPhone|iPod/.test(navigator.userAgent)?1:4)&&(this.nbCalls=0,!0)}},{key:"_initPlaylistWidget",value:function(){var e=this;this.videojs.on("playlistcreated",function(){e._playlistWidget&&e._playlistWidget.dispose();var t=e.playerOptions.playlistWidget;ei(t)&&(e.playerOptions.fluid&&(t.fluid=!0),e.playerOptions.cloudinary.fontFace&&(t.fontFace=e.playerOptions.cloudinary.fontFace),e._playlistWidget=new lq(e.videojs,t))})}},{key:"playlistWidget",value:function(e){return!(!e&&!this._playlistWidget)&&(!e&&this._playlistWidget||ei(e)&&this._playlistWidget.options(e),this._playlistWidget)}},{key:"_initAutoplay",value:function(){"on-scroll"===this.playerOptions.autoplayMode&&this.videojs.autoplayOnScroll()}},{key:"_initContextMenu",value:function(){this.playerOptions.hideContextMenu||this.videojs.contextMenu(n_.contextMenu)}},{key:"_initFloatingPlayer",value:function(){this.playerOptions.floatingWhenNotVisible!==nb.NONE&&this.videojs.floatingPlayer({floatTo:this.playerOptions.floatingWhenNotVisible})}},{key:"_setCssClasses",value:function(){this.videojs.addClass(nP.CLASS_PREFIX),this.videojs.addClass(nP.playerClassPrefix(this.videojs)),nP.setSkinClassPrefix(this.videojs,nP.skinClassPrefix(this.videojs))}},{key:"_onReady",value:function(){this._setExtendedEvents();var e=this.playerOptions.source||this.playerOptions.publicId;e&&this.source(e,this.playerOptions)}},{key:"_setExtendedEvents",value:function(){var e=this,t=[];this.playerOptions.playedEventPercents&&t.push({type:il,percents:this.playerOptions.playedEventPercents}),this.playerOptions.playedEventTimes&&t.push({type:ic,times:this.playerOptions.playedEventTimes}),t.push.apply(t,[n2,n3,n4,id]);var r=new uU(this.videojs,{events:t});Object.keys(r.events).forEach(function(t){r.on(t,function(r,n){e.videojs.trigger({type:t,eventData:n})})})}},{key:"cloudinaryConfig",value:function(e){return this.videojs.cloudinary.cloudinaryConfig(e)}},{key:"playerOptions",get:function(){return this.options.playerOptions}},{key:"currentPublicId",value:function(){return this.videojs.cloudinary.currentPublicId()}},{key:"currentSourceUrl",value:function(){return this.videojs.currentSource().src}},{key:"currentPoster",value:function(){return this.videojs.cloudinary.currentPoster()}},{key:"source",value:function(e){var t=this,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=rX(e,r);if(e=n.publicId,r=n.options,this._isPlayerConfigValid){if(cm(r,c_)){if(e instanceof sF)return this.videojs.cloudinary.source(e,r);this.videojs.interactive&&this.videojs.interactive(this.videojs,r),l.allowUsageReport()&&(r.usageReport=!0),this.setTextTracks(r.textTracks),this._initQualitySelector(),clearTimeout(this.reTryId),this.nbCalls=0;var i=this.videojs.options_.maxTries||3,o=this.videojs.options_.videoTimeout||55e3;return this.reTryVideo(i,o),this._initLazyPlugins(r).then(function(){return t.videojs.cloudinary.source(e,r)}),this.videojs.cloudinary.source(e,r)}this.videojs.error("invalid source configuration")}}},{key:"posterOptions",value:function(e){return this.videojs.cloudinary.posterOptions(e)}},{key:"skin",value:function(e){if(void 0!==e&&eo(e)){nP.setSkinClassPrefix(this.videojs,e);var t=this.playlistWidget();t&&t.setSkin()}return nP.skinClassPrefix(this.videojs)}},{key:"playlist",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return this._initQualitySelector(),this.videojs.cloudinary.playlist(e,t)}},{key:"playlistByTag",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return this.videojs.cloudinary.playlistByTag(e,t)}},{key:"sourcesByTag",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return this.videojs.cloudinary.sourcesByTag(e,t)}},{key:"fluid",value:function(e){return void 0===e?this.videojs.fluid():(e?this.videojs.addClass(ny):this.videojs.removeClass(ny),this.videojs.fluid(e),this.videojs.trigger(ii,e),this)}},{key:"play",value:function(){return this.playWasCalled=!0,this.videojs.play(),this}},{key:"stop",value:function(){return this.pause(),this.currentTime(0),this}},{key:"playPrevious",value:function(){return this.playlist().playPrevious(),this}},{key:"playNext",value:function(){return this.playlist().playNext(),this}},{key:"transformation",value:function(e){return this.videojs.cloudinary.transformation(e)}},{key:"sourceTypes",value:function(e){return this.videojs.cloudinary.sourceTypes(e)}},{key:"sourceTransformation",value:function(e){return this.videojs.cloudinary.sourceTransformation(e)}},{key:"autoShowRecommendations",value:function(e){return this.videojs.cloudinary.autoShowRecommendations(e)}},{key:"duration",value:function(){return this.videojs.duration()}},{key:"height",value:function(e){return e?(this.videojs.height(e),this):this.videojs.height()}},{key:"width",value:function(e){return e?(this.videojs.width(e),this):this.videojs.width()}},{key:"volume",value:function(e){return e?(this.videojs.volume(e),this):this.videojs.volume()}},{key:"mute",value:function(){return this.isMuted()||this.videojs.muted(!0),this}},{key:"unmute",value:function(){return this.isMuted()&&this.videojs.muted(!1),this}},{key:"isMuted",value:function(){return this.videojs.muted()}},{key:"pause",value:function(){return this.videojs.pause(),this}},{key:"currentTime",value:function(e){return e||0===e?(this.videojs.currentTime(e),this):this.videojs.currentTime()}},{key:"maximize",value:function(){return this.isMaximized()||this.videojs.requestFullscreen(),this}},{key:"exitMaximize",value:function(){return this.isMaximized()&&this.videojs.exitFullscreen(),this}},{key:"isMaximized",value:function(){return this.videojs.isFullscreen()}},{key:"dispose",value:function(){this.videojs.dispose()}},{key:"controls",value:function(e){return void 0===e?this.videojs.controls():(this.videojs.controls(e),this)}},{key:"ima",value:function(){return{playAd:this.videojs.ima.playAd}}},{key:"loop",value:function(e){return void 0===e?this.videojs.loop():(this.videojs.loop(e),this)}},{key:"el",value:function(){return this.videojs.el()}}],n=[{key:"all",value:function(e){for(var t,r=arguments.length,n=Array(r>1?r-1:0),i=1;i<r;i++)n[i-1]=arguments[i];return((function(e){if(Array.isArray(e))return cE(e)})(t=document.querySelectorAll(e))||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(t)||function(e,t){if(e){if("string"==typeof e)return cE(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?cE(e,t):void 0}}(t)||function(){throw TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()).map(function(e){return cT(l,[e].concat(n))})}},{key:"allowUsageReport",value:function(e){return void 0===e?cL:cL=!!e}},{key:"buildTextTrackObj",value:function(e,t){return{kind:e,label:t.label,srclang:t.language,default:!!t.default,src:t.url}}}],r&&cI(l.prototype,r),n&&cI(l,n),Object.defineProperty(l,"prototype",{writable:!1}),l}(nP.mixin(function(e){return function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&la(e,t)}(n,e);var t,r=(t=function(){if("undefined"==typeof Reflect||!Reflect.construct||Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}(),function(){var e,r=lu(n);if(t){var i=lu(this).constructor;e=Reflect.construct(r,arguments,i)}else e=r.apply(this,arguments);return function(e,t){if(t&&("object"===lo(t)||"function"==typeof t))return t;if(void 0!==t)throw TypeError("Derived constructors may only return object or undefined");return ls(e)}(this,e)});function n(){!function(e,t){if(!(e instanceof t))throw TypeError("Cannot call a class as a function")}(this,n);var e,t={handlers:{}};return(e=r.call(this)).on=function(){for(var r,n=arguments.length,i=Array(n),o=0;o<n;o++)i[o]=arguments[o];var u=i.length-1,l=i[u];return t.handlers[l]=function(t){t.Player=ls(e);for(var r=arguments.length,n=Array(r>1?r-1:0),i=1;i<r;i++)n[i-1]=arguments[i];l.apply(void 0,[t].concat(n))},i[u]=t.handlers[l],(r=e.videojs).on.apply(r,i)},e.one=function(){for(var r,n=arguments.length,i=Array(n),o=0;o<n;o++)i[o]=arguments[o];var u=i.length-1,l=i[u];return t.handlers[l]=function(r){r.Player=ls(e);for(var n=arguments.length,i=Array(n>1?n-1:0),o=1;o<n;o++)i[o-1]=arguments[o];l.apply(void 0,[r].concat(i)),delete t.handlers[l]},i[u]=t.handlers[l],(r=e.videojs).one.apply(r,i)},e.off=function(){for(var r,n=arguments.length,i=Array(n),o=0;o<n;o++)i[o]=arguments[o];var u=i.length-1,l=i[u];i[u]=t.handlers[l];var c=(r=e.videojs).off.apply(r,i);return delete t.handlers[l],c},e.trigger=function(){var t;(t=e.videojs).trigger.apply(t,arguments)},e}return Object.defineProperty(n,"prototype",{writable:!1}),n}(e)}));function cj(e){return(cj="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function cM(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function cF(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?cM(Object(r),!0).forEach(function(t){(function(e,t,r){var n;(n=function(e,t){if("object"!==cj(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,"string");if("object"!==cj(n))return n;throw TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(t),(t="symbol"===cj(n)?n:String(n))in e)?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r})(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):cM(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}window.cloudinary&&window.cloudinary.Cloudinary&&console.warn("For version 1.9.0 and above, cloudinary-core is not needed for using the Cloudinary Video Player");var cB=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;return K(rK(e,nm),{cloudinaryConfig:t||nm.reduce(function(t,r){var n=e[r];return void 0!==n&&(t[r]=n),t},{})})},cU=function(e){return function(t,r,n){return new cx(t,cB(r,e),n)}},cq=function(e){return function(t,r,n){return cx.all(t,cB(r,e),n)}},cH=cU(),cV=cq(),cG=cF(cF({},window.cloudinary||{}),{},{videoPlayer:cH,videoPlayers:cV,Cloudinary:{new:function(e){return{videoPlayer:cU(e),videoPlayers:cq(e)}}}});window.cloudinary=cG,p(161)})();var g=m.videoPlayer;m.videoPlayers}),c.register("awmEs",function(e,t){o(e.exports,"Buffer",()=>r,e=>r=e),o(e.exports,"INSPECT_MAX_BYTES",()=>n,e=>n=e);var r,n,i=c("cK8LV"),u=c("7y6mg");let l="function"==typeof Symbol&&"function"==typeof Symbol.for?Symbol.for("nodejs.util.inspect.custom"):null;function f(e){if(e>2147483647)throw RangeError('The value "'+e+'" is invalid for option "size"');let t=new Uint8Array(e);return Object.setPrototypeOf(t,d.prototype),t}function d(e,t,r){if("number"==typeof e){if("string"==typeof t)throw TypeError('The "string" argument must be of type string. Received type number');return m(e)}return h(e,t,r)}function h(e,t,r){if("string"==typeof e)return function(e,t){if(("string"!=typeof t||""===t)&&(t="utf8"),!d.isEncoding(t))throw TypeError("Unknown encoding: "+t);let r=0|b(e,t),n=f(r),i=n.write(e,t);return i!==r&&(n=n.slice(0,i)),n}(e,t);if(ArrayBuffer.isView(e))return function(e){if(H(e,Uint8Array)){let t=new Uint8Array(e);return y(t.buffer,t.byteOffset,t.byteLength)}return g(e)}(e);if(null==e)throw TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof e);if(H(e,ArrayBuffer)||e&&H(e.buffer,ArrayBuffer)||"undefined"!=typeof SharedArrayBuffer&&(H(e,SharedArrayBuffer)||e&&H(e.buffer,SharedArrayBuffer)))return y(e,t,r);if("number"==typeof e)throw TypeError('The "value" argument must not be of type number. Received type number');let n=e.valueOf&&e.valueOf();if(null!=n&&n!==e)return d.from(n,t,r);let i=function(e){var t;if(d.isBuffer(e)){let t=0|v(e.length),r=f(t);return 0===r.length||e.copy(r,0,0,t),r}return void 0!==e.length?"number"!=typeof e.length||(t=e.length)!=t?f(0):g(e):"Buffer"===e.type&&Array.isArray(e.data)?g(e.data):void 0}(e);if(i)return i;if("undefined"!=typeof Symbol&&null!=Symbol.toPrimitive&&"function"==typeof e[Symbol.toPrimitive])return d.from(e[Symbol.toPrimitive]("string"),t,r);throw TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof e)}function p(e){if("number"!=typeof e)throw TypeError('"size" argument must be of type number');if(e<0)throw RangeError('The value "'+e+'" is invalid for option "size"')}function m(e){return p(e),f(e<0?0:0|v(e))}function g(e){let t=e.length<0?0:0|v(e.length),r=f(t);for(let n=0;n<t;n+=1)r[n]=255&e[n];return r}function y(e,t,r){let n;if(t<0||e.byteLength<t)throw RangeError('"offset" is outside of buffer bounds');if(e.byteLength<t+(r||0))throw RangeError('"length" is outside of buffer bounds');return Object.setPrototypeOf(n=void 0===t&&void 0===r?new Uint8Array(e):void 0===r?new Uint8Array(e,t):new Uint8Array(e,t,r),d.prototype),n}function v(e){if(e>=2147483647)throw RangeError("Attempt to allocate Buffer larger than maximum size: 0x7fffffff bytes");return 0|e}function b(e,t){if(d.isBuffer(e))return e.length;if(ArrayBuffer.isView(e)||H(e,ArrayBuffer))return e.byteLength;if("string"!=typeof e)throw TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+typeof e);let r=e.length,n=arguments.length>2&&!0===arguments[2];if(!n&&0===r)return 0;let i=!1;for(;;)switch(t){case"ascii":case"latin1":case"binary":return r;case"utf8":case"utf-8":return B(e).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*r;case"hex":return r>>>1;case"base64":return U(e).length;default:if(i)return n?-1:B(e).length;t=(""+t).toLowerCase(),i=!0}}function _(e,t,r){let n=!1;if((void 0===t||t<0)&&(t=0),t>this.length||((void 0===r||r>this.length)&&(r=this.length),r<=0||(r>>>=0)<=(t>>>=0)))return"";for(e||(e="utf8");;)switch(e){case"hex":return function(e,t,r){let n=e.length;(!t||t<0)&&(t=0),(!r||r<0||r>n)&&(r=n);let i="";for(let n=t;n<r;++n)i+=V[e[n]];return i}(this,t,r);case"utf8":case"utf-8":return w(this,t,r);case"ascii":return function(e,t,r){let n="";r=Math.min(e.length,r);for(let i=t;i<r;++i)n+=String.fromCharCode(127&e[i]);return n}(this,t,r);case"latin1":case"binary":return function(e,t,r){let n="";r=Math.min(e.length,r);for(let i=t;i<r;++i)n+=String.fromCharCode(e[i]);return n}(this,t,r);case"base64":var o,u;return o=t,u=r,0===o&&u===this.length?i.fromByteArray(this):i.fromByteArray(this.slice(o,u));case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return function(e,t,r){let n=e.slice(t,r),i="";for(let e=0;e<n.length-1;e+=2)i+=String.fromCharCode(n[e]+256*n[e+1]);return i}(this,t,r);default:if(n)throw TypeError("Unknown encoding: "+e);e=(e+"").toLowerCase(),n=!0}}function T(e,t,r){let n=e[t];e[t]=e[r],e[r]=n}function E(e,t,r,n,i){var o;if(0===e.length)return -1;if("string"==typeof r?(n=r,r=0):r>2147483647?r=2147483647:r<-2147483648&&(r=-2147483648),(o=r=+r)!=o&&(r=i?0:e.length-1),r<0&&(r=e.length+r),r>=e.length){if(i)return -1;r=e.length-1}else if(r<0){if(!i)return -1;r=0}if("string"==typeof t&&(t=d.from(t,n)),d.isBuffer(t))return 0===t.length?-1:S(e,t,r,n,i);if("number"==typeof t)return(t&=255,"function"==typeof Uint8Array.prototype.indexOf)?i?Uint8Array.prototype.indexOf.call(e,t,r):Uint8Array.prototype.lastIndexOf.call(e,t,r):S(e,[t],r,n,i);throw TypeError("val must be string, number or Buffer")}function S(e,t,r,n,i){let o,u=1,l=e.length,c=t.length;if(void 0!==n&&("ucs2"===(n=String(n).toLowerCase())||"ucs-2"===n||"utf16le"===n||"utf-16le"===n)){if(e.length<2||t.length<2)return -1;u=2,l/=2,c/=2,r/=2}function f(e,t){return 1===u?e[t]:e.readUInt16BE(t*u)}if(i){let n=-1;for(o=r;o<l;o++)if(f(e,o)===f(t,-1===n?0:o-n)){if(-1===n&&(n=o),o-n+1===c)return n*u}else -1!==n&&(o-=o-n),n=-1}else for(r+c>l&&(r=l-c),o=r;o>=0;o--){let r=!0;for(let n=0;n<c;n++)if(f(e,o+n)!==f(t,n)){r=!1;break}if(r)return o}return -1}function w(e,t,r){r=Math.min(e.length,r);let n=[],i=t;for(;i<r;){let t=e[i],o=null,u=t>239?4:t>223?3:t>191?2:1;if(i+u<=r){let r,n,l,c;switch(u){case 1:t<128&&(o=t);break;case 2:(192&(r=e[i+1]))==128&&(c=(31&t)<<6|63&r)>127&&(o=c);break;case 3:r=e[i+1],n=e[i+2],(192&r)==128&&(192&n)==128&&(c=(15&t)<<12|(63&r)<<6|63&n)>2047&&(c<55296||c>57343)&&(o=c);break;case 4:r=e[i+1],n=e[i+2],l=e[i+3],(192&r)==128&&(192&n)==128&&(192&l)==128&&(c=(15&t)<<18|(63&r)<<12|(63&n)<<6|63&l)>65535&&c<1114112&&(o=c)}}null===o?(o=65533,u=1):o>65535&&(o-=65536,n.push(o>>>10&1023|55296),o=56320|1023&o),n.push(o),i+=u}return function(e){let t=e.length;if(t<=4096)return String.fromCharCode.apply(String,e);let r="",n=0;for(;n<t;)r+=String.fromCharCode.apply(String,e.slice(n,n+=4096));return r}(n)}function A(e,t,r){if(e%1!=0||e<0)throw RangeError("offset is not uint");if(e+t>r)throw RangeError("Trying to access beyond buffer length")}function C(e,t,r,n,i,o){if(!d.isBuffer(e))throw TypeError('"buffer" argument must be a Buffer instance');if(t>i||t<o)throw RangeError('"value" argument is out of bounds');if(r+n>e.length)throw RangeError("Index out of range")}function I(e,t,r,n,i){x(t,n,i,e,r,7);let o=Number(t&BigInt(4294967295));e[r++]=o,o>>=8,e[r++]=o,o>>=8,e[r++]=o,o>>=8,e[r++]=o;let u=Number(t>>BigInt(32)&BigInt(4294967295));return e[r++]=u,u>>=8,e[r++]=u,u>>=8,e[r++]=u,u>>=8,e[r++]=u,r}function O(e,t,r,n,i){x(t,n,i,e,r,7);let o=Number(t&BigInt(4294967295));e[r+7]=o,o>>=8,e[r+6]=o,o>>=8,e[r+5]=o,o>>=8,e[r+4]=o;let u=Number(t>>BigInt(32)&BigInt(4294967295));return e[r+3]=u,u>>=8,e[r+2]=u,u>>=8,e[r+1]=u,u>>=8,e[r]=u,r+8}function R(e,t,r,n,i,o){if(r+n>e.length||r<0)throw RangeError("Index out of range")}function P(e,t,r,n,i){return t=+t,r>>>=0,i||R(e,t,r,4,34028234663852886e22,-34028234663852886e22),u.write(e,t,r,n,23,4),r+4}function k(e,t,r,n,i){return t=+t,r>>>=0,i||R(e,t,r,8,17976931348623157e292,-17976931348623157e292),u.write(e,t,r,n,52,8),r+8}r=d,n=50,d.TYPED_ARRAY_SUPPORT=function(){try{let e=new Uint8Array(1),t={foo:function(){return 42}};return Object.setPrototypeOf(t,Uint8Array.prototype),Object.setPrototypeOf(e,t),42===e.foo()}catch(e){return!1}}(),d.TYPED_ARRAY_SUPPORT||"undefined"==typeof console||"function"!=typeof console.error||console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support."),Object.defineProperty(d.prototype,"parent",{enumerable:!0,get:function(){if(d.isBuffer(this))return this.buffer}}),Object.defineProperty(d.prototype,"offset",{enumerable:!0,get:function(){if(d.isBuffer(this))return this.byteOffset}}),d.poolSize=8192,d.from=function(e,t,r){return h(e,t,r)},Object.setPrototypeOf(d.prototype,Uint8Array.prototype),Object.setPrototypeOf(d,Uint8Array),d.alloc=function(e,t,r){return(p(e),e<=0)?f(e):void 0!==t?"string"==typeof r?f(e).fill(t,r):f(e).fill(t):f(e)},d.allocUnsafe=function(e){return m(e)},d.allocUnsafeSlow=function(e){return m(e)},d.isBuffer=function(e){return null!=e&&!0===e._isBuffer&&e!==d.prototype},d.compare=function(e,t){if(H(e,Uint8Array)&&(e=d.from(e,e.offset,e.byteLength)),H(t,Uint8Array)&&(t=d.from(t,t.offset,t.byteLength)),!d.isBuffer(e)||!d.isBuffer(t))throw TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(e===t)return 0;let r=e.length,n=t.length;for(let i=0,o=Math.min(r,n);i<o;++i)if(e[i]!==t[i]){r=e[i],n=t[i];break}return r<n?-1:n<r?1:0},d.isEncoding=function(e){switch(String(e).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},d.concat=function(e,t){let r;if(!Array.isArray(e))throw TypeError('"list" argument must be an Array of Buffers');if(0===e.length)return d.alloc(0);if(void 0===t)for(r=0,t=0;r<e.length;++r)t+=e[r].length;let n=d.allocUnsafe(t),i=0;for(r=0;r<e.length;++r){let t=e[r];if(H(t,Uint8Array))i+t.length>n.length?(d.isBuffer(t)||(t=d.from(t)),t.copy(n,i)):Uint8Array.prototype.set.call(n,t,i);else if(d.isBuffer(t))t.copy(n,i);else throw TypeError('"list" argument must be an Array of Buffers');i+=t.length}return n},d.byteLength=b,d.prototype._isBuffer=!0,d.prototype.swap16=function(){let e=this.length;if(e%2!=0)throw RangeError("Buffer size must be a multiple of 16-bits");for(let t=0;t<e;t+=2)T(this,t,t+1);return this},d.prototype.swap32=function(){let e=this.length;if(e%4!=0)throw RangeError("Buffer size must be a multiple of 32-bits");for(let t=0;t<e;t+=4)T(this,t,t+3),T(this,t+1,t+2);return this},d.prototype.swap64=function(){let e=this.length;if(e%8!=0)throw RangeError("Buffer size must be a multiple of 64-bits");for(let t=0;t<e;t+=8)T(this,t,t+7),T(this,t+1,t+6),T(this,t+2,t+5),T(this,t+3,t+4);return this},d.prototype.toString=function(){let e=this.length;return 0===e?"":0==arguments.length?w(this,0,e):_.apply(this,arguments)},d.prototype.toLocaleString=d.prototype.toString,d.prototype.equals=function(e){if(!d.isBuffer(e))throw TypeError("Argument must be a Buffer");return this===e||0===d.compare(this,e)},d.prototype.inspect=function(){let e="",t=n;return e=this.toString("hex",0,t).replace(/(.{2})/g,"$1 ").trim(),this.length>t&&(e+=" ... "),"<Buffer "+e+">"},l&&(d.prototype[l]=d.prototype.inspect),d.prototype.compare=function(e,t,r,n,i){if(H(e,Uint8Array)&&(e=d.from(e,e.offset,e.byteLength)),!d.isBuffer(e))throw TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+typeof e);if(void 0===t&&(t=0),void 0===r&&(r=e?e.length:0),void 0===n&&(n=0),void 0===i&&(i=this.length),t<0||r>e.length||n<0||i>this.length)throw RangeError("out of range index");if(n>=i&&t>=r)return 0;if(n>=i)return -1;if(t>=r)return 1;if(t>>>=0,r>>>=0,n>>>=0,i>>>=0,this===e)return 0;let o=i-n,u=r-t,l=Math.min(o,u),c=this.slice(n,i),f=e.slice(t,r);for(let e=0;e<l;++e)if(c[e]!==f[e]){o=c[e],u=f[e];break}return o<u?-1:u<o?1:0},d.prototype.includes=function(e,t,r){return -1!==this.indexOf(e,t,r)},d.prototype.indexOf=function(e,t,r){return E(this,e,t,r,!0)},d.prototype.lastIndexOf=function(e,t,r){return E(this,e,t,r,!1)},d.prototype.write=function(e,t,r,n){var i,o,u,l,c,f,d,h;if(void 0===t)n="utf8",r=this.length,t=0;else if(void 0===r&&"string"==typeof t)n=t,r=this.length,t=0;else if(isFinite(t))t>>>=0,isFinite(r)?(r>>>=0,void 0===n&&(n="utf8")):(n=r,r=void 0);else throw Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");let p=this.length-t;if((void 0===r||r>p)&&(r=p),e.length>0&&(r<0||t<0)||t>this.length)throw RangeError("Attempt to write outside buffer bounds");n||(n="utf8");let m=!1;for(;;)switch(n){case"hex":return function(e,t,r,n){let i;r=Number(r)||0;let o=e.length-r;n?(n=Number(n))>o&&(n=o):n=o;let u=t.length;for(n>u/2&&(n=u/2),i=0;i<n;++i){let n=parseInt(t.substr(2*i,2),16);if(n!=n)break;e[r+i]=n}return i}(this,e,t,r);case"utf8":case"utf-8":return i=t,o=r,q(B(e,this.length-i),this,i,o);case"ascii":case"latin1":case"binary":return u=t,l=r,q(function(e){let t=[];for(let r=0;r<e.length;++r)t.push(255&e.charCodeAt(r));return t}(e),this,u,l);case"base64":return c=t,f=r,q(U(e),this,c,f);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return d=t,h=r,q(function(e,t){let r,n;let i=[];for(let o=0;o<e.length&&!((t-=2)<0);++o)n=(r=e.charCodeAt(o))>>8,i.push(r%256),i.push(n);return i}(e,this.length-d),this,d,h);default:if(m)throw TypeError("Unknown encoding: "+n);n=(""+n).toLowerCase(),m=!0}},d.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}},d.prototype.slice=function(e,t){let r=this.length;e=~~e,t=void 0===t?r:~~t,e<0?(e+=r)<0&&(e=0):e>r&&(e=r),t<0?(t+=r)<0&&(t=0):t>r&&(t=r),t<e&&(t=e);let n=this.subarray(e,t);return Object.setPrototypeOf(n,d.prototype),n},d.prototype.readUintLE=d.prototype.readUIntLE=function(e,t,r){e>>>=0,t>>>=0,r||A(e,t,this.length);let n=this[e],i=1,o=0;for(;++o<t&&(i*=256);)n+=this[e+o]*i;return n},d.prototype.readUintBE=d.prototype.readUIntBE=function(e,t,r){e>>>=0,t>>>=0,r||A(e,t,this.length);let n=this[e+--t],i=1;for(;t>0&&(i*=256);)n+=this[e+--t]*i;return n},d.prototype.readUint8=d.prototype.readUInt8=function(e,t){return e>>>=0,t||A(e,1,this.length),this[e]},d.prototype.readUint16LE=d.prototype.readUInt16LE=function(e,t){return e>>>=0,t||A(e,2,this.length),this[e]|this[e+1]<<8},d.prototype.readUint16BE=d.prototype.readUInt16BE=function(e,t){return e>>>=0,t||A(e,2,this.length),this[e]<<8|this[e+1]},d.prototype.readUint32LE=d.prototype.readUInt32LE=function(e,t){return e>>>=0,t||A(e,4,this.length),(this[e]|this[e+1]<<8|this[e+2]<<16)+16777216*this[e+3]},d.prototype.readUint32BE=d.prototype.readUInt32BE=function(e,t){return e>>>=0,t||A(e,4,this.length),16777216*this[e]+(this[e+1]<<16|this[e+2]<<8|this[e+3])},d.prototype.readBigUInt64LE=G(function(e){j(e>>>=0,"offset");let t=this[e],r=this[e+7];(void 0===t||void 0===r)&&M(e,this.length-8);let n=t+256*this[++e]+65536*this[++e]+16777216*this[++e],i=this[++e]+256*this[++e]+65536*this[++e]+16777216*r;return BigInt(n)+(BigInt(i)<<BigInt(32))}),d.prototype.readBigUInt64BE=G(function(e){j(e>>>=0,"offset");let t=this[e],r=this[e+7];(void 0===t||void 0===r)&&M(e,this.length-8);let n=16777216*t+65536*this[++e]+256*this[++e]+this[++e],i=16777216*this[++e]+65536*this[++e]+256*this[++e]+r;return(BigInt(n)<<BigInt(32))+BigInt(i)}),d.prototype.readIntLE=function(e,t,r){e>>>=0,t>>>=0,r||A(e,t,this.length);let n=this[e],i=1,o=0;for(;++o<t&&(i*=256);)n+=this[e+o]*i;return n>=(i*=128)&&(n-=Math.pow(2,8*t)),n},d.prototype.readIntBE=function(e,t,r){e>>>=0,t>>>=0,r||A(e,t,this.length);let n=t,i=1,o=this[e+--n];for(;n>0&&(i*=256);)o+=this[e+--n]*i;return o>=(i*=128)&&(o-=Math.pow(2,8*t)),o},d.prototype.readInt8=function(e,t){return(e>>>=0,t||A(e,1,this.length),128&this[e])?-((255-this[e]+1)*1):this[e]},d.prototype.readInt16LE=function(e,t){e>>>=0,t||A(e,2,this.length);let r=this[e]|this[e+1]<<8;return 32768&r?4294901760|r:r},d.prototype.readInt16BE=function(e,t){e>>>=0,t||A(e,2,this.length);let r=this[e+1]|this[e]<<8;return 32768&r?4294901760|r:r},d.prototype.readInt32LE=function(e,t){return e>>>=0,t||A(e,4,this.length),this[e]|this[e+1]<<8|this[e+2]<<16|this[e+3]<<24},d.prototype.readInt32BE=function(e,t){return e>>>=0,t||A(e,4,this.length),this[e]<<24|this[e+1]<<16|this[e+2]<<8|this[e+3]},d.prototype.readBigInt64LE=G(function(e){j(e>>>=0,"offset");let t=this[e],r=this[e+7];(void 0===t||void 0===r)&&M(e,this.length-8);let n=this[e+4]+256*this[e+5]+65536*this[e+6]+(r<<24);return(BigInt(n)<<BigInt(32))+BigInt(t+256*this[++e]+65536*this[++e]+16777216*this[++e])}),d.prototype.readBigInt64BE=G(function(e){j(e>>>=0,"offset");let t=this[e],r=this[e+7];(void 0===t||void 0===r)&&M(e,this.length-8);let n=(t<<24)+65536*this[++e]+256*this[++e]+this[++e];return(BigInt(n)<<BigInt(32))+BigInt(16777216*this[++e]+65536*this[++e]+256*this[++e]+r)}),d.prototype.readFloatLE=function(e,t){return e>>>=0,t||A(e,4,this.length),u.read(this,e,!0,23,4)},d.prototype.readFloatBE=function(e,t){return e>>>=0,t||A(e,4,this.length),u.read(this,e,!1,23,4)},d.prototype.readDoubleLE=function(e,t){return e>>>=0,t||A(e,8,this.length),u.read(this,e,!0,52,8)},d.prototype.readDoubleBE=function(e,t){return e>>>=0,t||A(e,8,this.length),u.read(this,e,!1,52,8)},d.prototype.writeUintLE=d.prototype.writeUIntLE=function(e,t,r,n){if(e=+e,t>>>=0,r>>>=0,!n){let n=Math.pow(2,8*r)-1;C(this,e,t,r,n,0)}let i=1,o=0;for(this[t]=255&e;++o<r&&(i*=256);)this[t+o]=e/i&255;return t+r},d.prototype.writeUintBE=d.prototype.writeUIntBE=function(e,t,r,n){if(e=+e,t>>>=0,r>>>=0,!n){let n=Math.pow(2,8*r)-1;C(this,e,t,r,n,0)}let i=r-1,o=1;for(this[t+i]=255&e;--i>=0&&(o*=256);)this[t+i]=e/o&255;return t+r},d.prototype.writeUint8=d.prototype.writeUInt8=function(e,t,r){return e=+e,t>>>=0,r||C(this,e,t,1,255,0),this[t]=255&e,t+1},d.prototype.writeUint16LE=d.prototype.writeUInt16LE=function(e,t,r){return e=+e,t>>>=0,r||C(this,e,t,2,65535,0),this[t]=255&e,this[t+1]=e>>>8,t+2},d.prototype.writeUint16BE=d.prototype.writeUInt16BE=function(e,t,r){return e=+e,t>>>=0,r||C(this,e,t,2,65535,0),this[t]=e>>>8,this[t+1]=255&e,t+2},d.prototype.writeUint32LE=d.prototype.writeUInt32LE=function(e,t,r){return e=+e,t>>>=0,r||C(this,e,t,4,4294967295,0),this[t+3]=e>>>24,this[t+2]=e>>>16,this[t+1]=e>>>8,this[t]=255&e,t+4},d.prototype.writeUint32BE=d.prototype.writeUInt32BE=function(e,t,r){return e=+e,t>>>=0,r||C(this,e,t,4,4294967295,0),this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=255&e,t+4},d.prototype.writeBigUInt64LE=G(function(e,t=0){return I(this,e,t,BigInt(0),BigInt("0xffffffffffffffff"))}),d.prototype.writeBigUInt64BE=G(function(e,t=0){return O(this,e,t,BigInt(0),BigInt("0xffffffffffffffff"))}),d.prototype.writeIntLE=function(e,t,r,n){if(e=+e,t>>>=0,!n){let n=Math.pow(2,8*r-1);C(this,e,t,r,n-1,-n)}let i=0,o=1,u=0;for(this[t]=255&e;++i<r&&(o*=256);)e<0&&0===u&&0!==this[t+i-1]&&(u=1),this[t+i]=(e/o>>0)-u&255;return t+r},d.prototype.writeIntBE=function(e,t,r,n){if(e=+e,t>>>=0,!n){let n=Math.pow(2,8*r-1);C(this,e,t,r,n-1,-n)}let i=r-1,o=1,u=0;for(this[t+i]=255&e;--i>=0&&(o*=256);)e<0&&0===u&&0!==this[t+i+1]&&(u=1),this[t+i]=(e/o>>0)-u&255;return t+r},d.prototype.writeInt8=function(e,t,r){return e=+e,t>>>=0,r||C(this,e,t,1,127,-128),e<0&&(e=255+e+1),this[t]=255&e,t+1},d.prototype.writeInt16LE=function(e,t,r){return e=+e,t>>>=0,r||C(this,e,t,2,32767,-32768),this[t]=255&e,this[t+1]=e>>>8,t+2},d.prototype.writeInt16BE=function(e,t,r){return e=+e,t>>>=0,r||C(this,e,t,2,32767,-32768),this[t]=e>>>8,this[t+1]=255&e,t+2},d.prototype.writeInt32LE=function(e,t,r){return e=+e,t>>>=0,r||C(this,e,t,4,2147483647,-2147483648),this[t]=255&e,this[t+1]=e>>>8,this[t+2]=e>>>16,this[t+3]=e>>>24,t+4},d.prototype.writeInt32BE=function(e,t,r){return e=+e,t>>>=0,r||C(this,e,t,4,2147483647,-2147483648),e<0&&(e=4294967295+e+1),this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=255&e,t+4},d.prototype.writeBigInt64LE=G(function(e,t=0){return I(this,e,t,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))}),d.prototype.writeBigInt64BE=G(function(e,t=0){return O(this,e,t,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))}),d.prototype.writeFloatLE=function(e,t,r){return P(this,e,t,!0,r)},d.prototype.writeFloatBE=function(e,t,r){return P(this,e,t,!1,r)},d.prototype.writeDoubleLE=function(e,t,r){return k(this,e,t,!0,r)},d.prototype.writeDoubleBE=function(e,t,r){return k(this,e,t,!1,r)},d.prototype.copy=function(e,t,r,n){if(!d.isBuffer(e))throw TypeError("argument should be a Buffer");if(r||(r=0),n||0===n||(n=this.length),t>=e.length&&(t=e.length),t||(t=0),n>0&&n<r&&(n=r),n===r||0===e.length||0===this.length)return 0;if(t<0)throw RangeError("targetStart out of bounds");if(r<0||r>=this.length)throw RangeError("Index out of range");if(n<0)throw RangeError("sourceEnd out of bounds");n>this.length&&(n=this.length),e.length-t<n-r&&(n=e.length-t+r);let i=n-r;return this===e&&"function"==typeof Uint8Array.prototype.copyWithin?this.copyWithin(t,r,n):Uint8Array.prototype.set.call(e,this.subarray(r,n),t),i},d.prototype.fill=function(e,t,r,n){let i;if("string"==typeof e){if("string"==typeof t?(n=t,t=0,r=this.length):"string"==typeof r&&(n=r,r=this.length),void 0!==n&&"string"!=typeof n)throw TypeError("encoding must be a string");if("string"==typeof n&&!d.isEncoding(n))throw TypeError("Unknown encoding: "+n);if(1===e.length){let t=e.charCodeAt(0);("utf8"===n&&t<128||"latin1"===n)&&(e=t)}}else"number"==typeof e?e&=255:"boolean"==typeof e&&(e=Number(e));if(t<0||this.length<t||this.length<r)throw RangeError("Out of range index");if(r<=t)return this;if(t>>>=0,r=void 0===r?this.length:r>>>0,e||(e=0),"number"==typeof e)for(i=t;i<r;++i)this[i]=e;else{let o=d.isBuffer(e)?e:d.from(e,n),u=o.length;if(0===u)throw TypeError('The value "'+e+'" is invalid for argument "value"');for(i=0;i<r-t;++i)this[i+t]=o[i%u]}return this};let D={};function N(e,t,r){D[e]=class extends r{constructor(){super(),Object.defineProperty(this,"message",{value:t.apply(this,arguments),writable:!0,configurable:!0}),this.name=`${this.name} [${e}]`,this.stack,delete this.name}get code(){return e}set code(e){Object.defineProperty(this,"code",{configurable:!0,enumerable:!0,value:e,writable:!0})}toString(){return`${this.name} [${e}]: ${this.message}`}}}function L(e){let t="",r=e.length,n="-"===e[0]?1:0;for(;r>=n+4;r-=3)t=`_${e.slice(r-3,r)}${t}`;return`${e.slice(0,r)}${t}`}function x(e,t,r,n,i,o){if(e>r||e<t){let n;let i="bigint"==typeof t?"n":"";throw n=o>3?0===t||t===BigInt(0)?`>= 0${i} and < 2${i} ** ${(o+1)*8}${i}`:`>= -(2${i} ** ${(o+1)*8-1}${i}) and < 2 ** ${(o+1)*8-1}${i}`:`>= ${t}${i} and <= ${r}${i}`,new D.ERR_OUT_OF_RANGE("value",n,e)}j(i,"offset"),(void 0===n[i]||void 0===n[i+o])&&M(i,n.length-(o+1))}function j(e,t){if("number"!=typeof e)throw new D.ERR_INVALID_ARG_TYPE(t,"number",e)}function M(e,t,r){if(Math.floor(e)!==e)throw j(e,r),new D.ERR_OUT_OF_RANGE(r||"offset","an integer",e);if(t<0)throw new D.ERR_BUFFER_OUT_OF_BOUNDS;throw new D.ERR_OUT_OF_RANGE(r||"offset",`>= ${r?1:0} and <= ${t}`,e)}N("ERR_BUFFER_OUT_OF_BOUNDS",function(e){return e?`${e} is outside of buffer bounds`:"Attempt to access memory outside buffer bounds"},RangeError),N("ERR_INVALID_ARG_TYPE",function(e,t){return`The "${e}" argument must be of type number. Received type ${typeof t}`},TypeError),N("ERR_OUT_OF_RANGE",function(e,t,r){let n=`The value of "${e}" is out of range.`,i=r;return Number.isInteger(r)&&Math.abs(r)>4294967296?i=L(String(r)):"bigint"==typeof r&&(i=String(r),(r>BigInt(2)**BigInt(32)||r<-(BigInt(2)**BigInt(32)))&&(i=L(i)),i+="n"),n+=` It must be ${t}. Received ${i}`},RangeError);let F=/[^+/0-9A-Za-z-_]/g;function B(e,t){let r;t=t||1/0;let n=e.length,i=null,o=[];for(let u=0;u<n;++u){if((r=e.charCodeAt(u))>55295&&r<57344){if(!i){if(r>56319||u+1===n){(t-=3)>-1&&o.push(239,191,189);continue}i=r;continue}if(r<56320){(t-=3)>-1&&o.push(239,191,189),i=r;continue}r=(i-55296<<10|r-56320)+65536}else i&&(t-=3)>-1&&o.push(239,191,189);if(i=null,r<128){if((t-=1)<0)break;o.push(r)}else if(r<2048){if((t-=2)<0)break;o.push(r>>6|192,63&r|128)}else if(r<65536){if((t-=3)<0)break;o.push(r>>12|224,r>>6&63|128,63&r|128)}else if(r<1114112){if((t-=4)<0)break;o.push(r>>18|240,r>>12&63|128,r>>6&63|128,63&r|128)}else throw Error("Invalid code point")}return o}function U(e){return i.toByteArray(function(e){if((e=(e=e.split("=")[0]).trim().replace(F,"")).length<2)return"";for(;e.length%4!=0;)e+="=";return e}(e))}function q(e,t,r,n){let i;for(i=0;i<n&&!(i+r>=t.length)&&!(i>=e.length);++i)t[i+r]=e[i];return i}function H(e,t){return e instanceof t||null!=e&&null!=e.constructor&&null!=e.constructor.name&&e.constructor.name===t.name}let V=function(){let e="0123456789abcdef",t=Array(256);for(let r=0;r<16;++r){let n=16*r;for(let i=0;i<16;++i)t[n+i]=e[r]+e[i]}return t}();function G(e){return"undefined"==typeof BigInt?Y:e}function Y(){throw Error("BigInt not supported")}}),c.register("cK8LV",function(e,t){o(e.exports,"toByteArray",()=>r,e=>r=e),o(e.exports,"fromByteArray",()=>n,e=>n=e),r=function(e){var t,r,n=function(e){var t=e.length;if(t%4>0)throw Error("Invalid string. Length must be a multiple of 4");var r=e.indexOf("=");-1===r&&(r=t);var n=r===t?0:4-r%4;return[r,n]}(e),i=n[0],o=n[1],c=new l((i+o)*3/4-o),f=0,d=o>0?i-4:i;for(r=0;r<d;r+=4)t=u[e.charCodeAt(r)]<<18|u[e.charCodeAt(r+1)]<<12|u[e.charCodeAt(r+2)]<<6|u[e.charCodeAt(r+3)],c[f++]=t>>16&255,c[f++]=t>>8&255,c[f++]=255&t;return 2===o&&(t=u[e.charCodeAt(r)]<<2|u[e.charCodeAt(r+1)]>>4,c[f++]=255&t),1===o&&(t=u[e.charCodeAt(r)]<<10|u[e.charCodeAt(r+1)]<<4|u[e.charCodeAt(r+2)]>>2,c[f++]=t>>8&255,c[f++]=255&t),c},n=function(e){for(var t,r=e.length,n=r%3,o=[],u=0,l=r-n;u<l;u+=16383)o.push(function(e,t,r){for(var n,o=[],u=t;u<r;u+=3)o.push(i[(n=(e[u]<<16&16711680)+(e[u+1]<<8&65280)+(255&e[u+2]))>>18&63]+i[n>>12&63]+i[n>>6&63]+i[63&n]);return o.join("")}(e,u,u+16383>l?l:u+16383));return 1===n?o.push(i[(t=e[r-1])>>2]+i[t<<4&63]+"=="):2===n&&o.push(i[(t=(e[r-2]<<8)+e[r-1])>>10]+i[t>>4&63]+i[t<<2&63]+"="),o.join("")};for(var r,n,i=[],u=[],l="undefined"!=typeof Uint8Array?Uint8Array:Array,c="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",f=0,d=c.length;f<d;++f)i[f]=c[f],u[c.charCodeAt(f)]=f;u["-".charCodeAt(0)]=62,u["_".charCodeAt(0)]=63}),c.register("7y6mg",function(e,t){var r,n;o(e.exports,"read",()=>r,e=>r=e),o(e.exports,"write",()=>n,e=>n=e),r=function(e,t,r,n,i){var o,u,l=8*i-n-1,c=(1<<l)-1,f=c>>1,d=-7,h=r?i-1:0,p=r?-1:1,m=e[t+h];for(h+=p,o=m&(1<<-d)-1,m>>=-d,d+=l;d>0;o=256*o+e[t+h],h+=p,d-=8);for(u=o&(1<<-d)-1,o>>=-d,d+=n;d>0;u=256*u+e[t+h],h+=p,d-=8);if(0===o)o=1-f;else{if(o===c)return u?NaN:(m?-1:1)*(1/0);u+=Math.pow(2,n),o-=f}return(m?-1:1)*u*Math.pow(2,o-n)},n=function(e,t,r,n,i,o){var u,l,c,f=8*o-i-1,d=(1<<f)-1,h=d>>1,p=23===i?5960464477539062e-23:0,m=n?0:o-1,g=n?1:-1,y=t<0||0===t&&1/t<0?1:0;for(isNaN(t=Math.abs(t))||t===1/0?(l=isNaN(t)?1:0,u=d):(u=Math.floor(Math.log(t)/Math.LN2),t*(c=Math.pow(2,-u))<1&&(u--,c*=2),u+h>=1?t+=p/c:t+=p*Math.pow(2,1-h),t*c>=2&&(u++,c/=2),u+h>=d?(l=0,u=d):u+h>=1?(l=(t*c-1)*Math.pow(2,i),u+=h):(l=t*Math.pow(2,h-1)*Math.pow(2,i),u=0));i>=8;e[r+m]=255&l,m+=g,l/=256,i-=8);for(u=u<<i|l,f+=i;f>0;e[r+m]=255&u,m+=g,u/=256,f-=8);e[r+m-g]|=128*y}});var f=c("kW8Wl");const d=document.querySelector("#demo-player"),h=document.querySelector(".videos"),p=document.querySelector(".player-title"),m=window.location.origin,g=[.25,.5,.75,1,1.25,1.5,1.75,2];async function y(){let e=await fetch("/api/db"),t=await e.json();(n=t.data.map(e=>(function(e){e.master=m+e.master,e.textTracks.subtitles=e.textTracks.subtitles.map(t=>(t.url=e.vid+t.url,t));let t=e.vid+"/poster.jpg",r=new URL(t,m).href;return e.poster=r,e})(e))).map((e,t)=>{h.innerHTML+=`        
    <a class="video__container" data-video=${t}>
      <div class="video__thumbnail">
        <img src="${e.poster}" alt="${e.title}" />
        <span class="video__duration">${e.duration}</span>
      </div>
      <div class="video__info">
        <span>${e.title}</span>
      </div>
    </a>
    `})}function v(i){let o=n[i],u=o.master,l=o.poster;e.source(u,{sourceTypes:["hls"],textTracks:o.textTracks,info:{title:o.title}});let c=document.querySelector(".vjs-poster");c.style.background=`center / contain url(${l})`,p.textContent=o.title,t[i].classList.add("video-active"),r=i}const b=()=>{document.querySelectorAll(".video-active").forEach(e=>e.classList.remove("video-active"))};function _(e){let t=+e.target.getAttribute("data-video");t!==r&&(b(),v(t))}document.addEventListener("DOMContentLoaded",function(){e=(0,f.videoPlayer)(d,{html5:{vhs:{overrideNative:!0}},hideContextMenu:!1,preload:"metadata",fluid:!0,floatingWhenNotVisible:"right",fontFace:"Roboto Slab",playbackRates:g}),y().then(()=>{document.querySelector("a.vjs-control.vjs-cloudinary-button.vjs-button").remove(),document.querySelector("#demo-player").oncontextmenu=e=>{let t=document.querySelector(".vjs-menu.vjs-context-menu-ui");if(!t)return;let r=t.querySelectorAll("li");5===r.length&&r[r.length-1].remove()},(t=document.querySelectorAll("a[data-video]")).forEach(e=>e.onclick=_),v(0)})});